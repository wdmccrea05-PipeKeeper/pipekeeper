var ZJ=Object.defineProperty;var q8=e=>{throw TypeError(e)};var eZ=(e,n,r)=>n in e?ZJ(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var z8=(e,n,r)=>eZ(e,typeof n!="symbol"?n+"":n,r),gN=(e,n,r)=>n.has(e)||q8("Cannot "+r);var Ne=(e,n,r)=>(gN(e,n,"read from private field"),r?r.call(e):n.get(e)),zt=(e,n,r)=>n.has(e)?q8("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,r),_t=(e,n,r,s)=>(gN(e,n,"write to private field"),s?s.call(e,r):n.set(e,r),r),xn=(e,n,r)=>(gN(e,n,"access private method"),r);var ib=(e,n,r,s)=>({set _(a){_t(e,n,a,r)},get _(){return Ne(e,n,s)}});function tZ(e,n){for(var r=0;r<n.length;r++){const s=n[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var ab=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ur(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xN={exports:{}},B0={},vN={exports:{}},jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U8;function nZ(){if(U8)return jn;U8=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function g(Q){return Q===null||typeof Q!="object"?null:(Q=m&&Q[m]||Q["@@iterator"],typeof Q=="function"?Q:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function b(Q,T,B){this.props=Q,this.context=T,this.refs=y,this.updater=B||x}b.prototype.isReactComponent={},b.prototype.setState=function(Q,T){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,T,"setState")},b.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function N(){}N.prototype=b.prototype;function j(Q,T,B){this.props=Q,this.context=T,this.refs=y,this.updater=B||x}var S=j.prototype=new N;S.constructor=j,v(S,b.prototype),S.isPureReactComponent=!0;var A=Array.isArray,P=Object.prototype.hasOwnProperty,L={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function R(Q,T,B){var H,ee={},ce=null,he=null;if(T!=null)for(H in T.ref!==void 0&&(he=T.ref),T.key!==void 0&&(ce=""+T.key),T)P.call(T,H)&&!O.hasOwnProperty(H)&&(ee[H]=T[H]);var W=arguments.length-2;if(W===1)ee.children=B;else if(1<W){for(var J=Array(W),pe=0;pe<W;pe++)J[pe]=arguments[pe+2];ee.children=J}if(Q&&Q.defaultProps)for(H in W=Q.defaultProps,W)ee[H]===void 0&&(ee[H]=W[H]);return{$$typeof:e,type:Q,key:ce,ref:he,props:ee,_owner:L.current}}function q(Q,T){return{$$typeof:e,type:Q.type,key:T,ref:Q.ref,props:Q.props,_owner:Q._owner}}function U(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===e}function D(Q){var T={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(B){return T[B]})}var M=/\/+/g;function G(Q,T){return typeof Q=="object"&&Q!==null&&Q.key!=null?D(""+Q.key):T.toString(36)}function Y(Q,T,B,H,ee){var ce=typeof Q;(ce==="undefined"||ce==="boolean")&&(Q=null);var he=!1;if(Q===null)he=!0;else switch(ce){case"string":case"number":he=!0;break;case"object":switch(Q.$$typeof){case e:case n:he=!0}}if(he)return he=Q,ee=ee(he),Q=H===""?"."+G(he,0):H,A(ee)?(B="",Q!=null&&(B=Q.replace(M,"$&/")+"/"),Y(ee,T,B,"",function(pe){return pe})):ee!=null&&(U(ee)&&(ee=q(ee,B+(!ee.key||he&&he.key===ee.key?"":(""+ee.key).replace(M,"$&/")+"/")+Q)),T.push(ee)),1;if(he=0,H=H===""?".":H+":",A(Q))for(var W=0;W<Q.length;W++){ce=Q[W];var J=H+G(ce,W);he+=Y(ce,T,B,J,ee)}else if(J=g(Q),typeof J=="function")for(Q=J.call(Q),W=0;!(ce=Q.next()).done;)ce=ce.value,J=H+G(ce,W++),he+=Y(ce,T,B,J,ee);else if(ce==="object")throw T=String(Q),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.");return he}function Z(Q,T,B){if(Q==null)return Q;var H=[],ee=0;return Y(Q,H,"","",function(ce){return T.call(B,ce,ee++)}),H}function X(Q){if(Q._status===-1){var T=Q._result;T=T(),T.then(function(B){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=B)},function(B){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=B)}),Q._status===-1&&(Q._status=0,Q._result=T)}if(Q._status===1)return Q._result.default;throw Q._result}var re={current:null},z={transition:null},te={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:z,ReactCurrentOwner:L};function le(){throw Error("act(...) is not supported in production builds of React.")}return jn.Children={map:Z,forEach:function(Q,T,B){Z(Q,function(){T.apply(this,arguments)},B)},count:function(Q){var T=0;return Z(Q,function(){T++}),T},toArray:function(Q){return Z(Q,function(T){return T})||[]},only:function(Q){if(!U(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},jn.Component=b,jn.Fragment=r,jn.Profiler=a,jn.PureComponent=j,jn.StrictMode=s,jn.Suspense=u,jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,jn.act=le,jn.cloneElement=function(Q,T,B){if(Q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Q+".");var H=v({},Q.props),ee=Q.key,ce=Q.ref,he=Q._owner;if(T!=null){if(T.ref!==void 0&&(ce=T.ref,he=L.current),T.key!==void 0&&(ee=""+T.key),Q.type&&Q.type.defaultProps)var W=Q.type.defaultProps;for(J in T)P.call(T,J)&&!O.hasOwnProperty(J)&&(H[J]=T[J]===void 0&&W!==void 0?W[J]:T[J])}var J=arguments.length-2;if(J===1)H.children=B;else if(1<J){W=Array(J);for(var pe=0;pe<J;pe++)W[pe]=arguments[pe+2];H.children=W}return{$$typeof:e,type:Q.type,key:ee,ref:ce,props:H,_owner:he}},jn.createContext=function(Q){return Q={$$typeof:l,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Q.Provider={$$typeof:o,_context:Q},Q.Consumer=Q},jn.createElement=R,jn.createFactory=function(Q){var T=R.bind(null,Q);return T.type=Q,T},jn.createRef=function(){return{current:null}},jn.forwardRef=function(Q){return{$$typeof:c,render:Q}},jn.isValidElement=U,jn.lazy=function(Q){return{$$typeof:f,_payload:{_status:-1,_result:Q},_init:X}},jn.memo=function(Q,T){return{$$typeof:d,type:Q,compare:T===void 0?null:T}},jn.startTransition=function(Q){var T=z.transition;z.transition={};try{Q()}finally{z.transition=T}},jn.unstable_act=le,jn.useCallback=function(Q,T){return re.current.useCallback(Q,T)},jn.useContext=function(Q){return re.current.useContext(Q)},jn.useDebugValue=function(){},jn.useDeferredValue=function(Q){return re.current.useDeferredValue(Q)},jn.useEffect=function(Q,T){return re.current.useEffect(Q,T)},jn.useId=function(){return re.current.useId()},jn.useImperativeHandle=function(Q,T,B){return re.current.useImperativeHandle(Q,T,B)},jn.useInsertionEffect=function(Q,T){return re.current.useInsertionEffect(Q,T)},jn.useLayoutEffect=function(Q,T){return re.current.useLayoutEffect(Q,T)},jn.useMemo=function(Q,T){return re.current.useMemo(Q,T)},jn.useReducer=function(Q,T,B){return re.current.useReducer(Q,T,B)},jn.useRef=function(Q){return re.current.useRef(Q)},jn.useState=function(Q){return re.current.useState(Q)},jn.useSyncExternalStore=function(Q,T,B){return re.current.useSyncExternalStore(Q,T,B)},jn.useTransition=function(){return re.current.useTransition()},jn.version="18.3.1",jn}var V8;function Kw(){return V8||(V8=1,vN.exports=nZ()),vN.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H8;function rZ(){if(H8)return B0;H8=1;var e=Kw(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,u,d){var f,m={},g=null,x=null;d!==void 0&&(g=""+d),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(x=u.ref);for(f in u)s.call(u,f)&&!o.hasOwnProperty(f)&&(m[f]=u[f]);if(c&&c.defaultProps)for(f in u=c.defaultProps,u)m[f]===void 0&&(m[f]=u[f]);return{$$typeof:n,type:c,key:g,ref:x,props:m,_owner:a.current}}return B0.Fragment=r,B0.jsx=l,B0.jsxs=l,B0}var W8;function sZ(){return W8||(W8=1,xN.exports=rZ()),xN.exports}var i=sZ(),C=Kw();const ve=ur(C),E4=tZ({__proto__:null,default:ve},[C]),yN={en:{ageGate:{title:"Adults Only",intendedForAdults:"PipeKeeper is intended for adult users only.",disclaimer:"This app is a collection tool for pipe enthusiasts. It does not sell tobacco products or facilitate their purchase.",confirmAge:"I confirm I am of legal age"},search:{trigger:"Search",openAria:"Open search",hintTitle:"Start typing to search",hintSubtitle:"Search pipes, tobacco, makers, shapes, and more",kbdNavigate:"Navigate",kbdSelect:"Select",kbdClose:"Close",commandDialogTitle:"Search",commandInputPlaceholder:"Type to search pipes, tobacco, makers…",noResultsFound:"No results found",noResultsMessage:"Try searching for a pipe, brand, tobacco blend, or shape",sectionPipes:"Pipes",sectionTobacco:"Tobacco",sectionQuickActions:"Quick actions",actionAddPipe:"Add new pipe",actionAddBlend:"Add new blend",actionViewStats:"View stats",actionExportData:"Export data"},home:{title:"Pipe & Tobacco Collection",subtitle:"Manage your pipes and tobacco blends with AI-powered search, photo identification, pairing suggestions, and market valuations.",pipeCollectionTitle:"Pipe Collection",pipeCollectionSubtitle:"Track and value your pipes",pipesInCollection:"Pipes in Collection",collectionValue:"Collection Value",viewCollection:"View Collection",tobaccoCellarTitle:"Tobacco Cellar",tobaccoCellarSubtitle:"Manage your blends",tobaccoBlends:"Tobacco Blends",cellared:"Cellared",viewCellar:"View Cellar"},insights:{title:"Collection Insights",subtitle:"Track usage and optimize pairings",log:"Usage Log",pairingGrid:"Pairing Grid",rotation:"Rotation",stats:"Statistics",trends:"Trends",aging:"Aging",reports:"Reports"},smokingLog:{totalBowls:"Total Bowls",breakIn:"break-in",logSession:"Log Session"},tobacconist:{title:"Tobacconist Consultation",subtitle:"Personalized pipe and tobacco advice",optional:"Optional",identify:"Identify",optimize:"Optimize",whatIf:"What If",updatesTitle:"AI Updates",identificationTitle:"AI Pipe Identifier",identificationSubtitle:"Upload photos for quick identification help"}},es:{ageGate:{title:"Solo para adultos",intendedForAdults:"PipeKeeper está destinado solo a usuarios adultos.",disclaimer:"Esta app es una herramienta de colección para aficionados a la pipa. No vende productos de tabaco ni facilita su compra.",confirmAge:"Confirmo que soy mayor de edad"},search:{trigger:"Buscar",openAria:"Abrir búsqueda",hintTitle:"Empieza a escribir para buscar",hintSubtitle:"Busca pipas, tabaco, marcas, formas y más",kbdNavigate:"Navegar",kbdSelect:"Seleccionar",kbdClose:"Cerrar",commandDialogTitle:"Buscar",commandInputPlaceholder:"Escribe para buscar pipas, tabaco, marcas…",noResultsFound:"No se encontraron resultados",noResultsMessage:"Prueba a buscar una pipa, marca, mezcla de tabaco o forma",sectionPipes:"Pipas",sectionTobacco:"Tabaco",sectionQuickActions:"Acciones rápidas",actionAddPipe:"Agregar nueva pipa",actionAddBlend:"Agregar nueva mezcla",actionViewStats:"Ver estadísticas",actionExportData:"Exportar datos"},home:{title:"Colección de pipas y tabaco",subtitle:"Gestiona tus pipas y mezclas de tabaco con búsqueda con IA, identificación por fotos, sugerencias de emparejamiento y valoraciones de mercado.",pipeCollectionTitle:"Colección de pipas",pipeCollectionSubtitle:"Rastrea y valora tus pipas",pipesInCollection:"Pipas en colección",collectionValue:"Valor de la colección",viewCollection:"Ver colección",tobaccoCellarTitle:"Bodega de tabaco",tobaccoCellarSubtitle:"Gestiona tus mezclas",tobaccoBlends:"Mezclas de tabaco",cellared:"En bodega",viewCellar:"Ver bodega"},insights:{title:"Información de colección",subtitle:"Rastrear uso y optimizar emparejamientos",log:"Registro de uso",pairingGrid:"Cuadrícula de emparejamiento",rotation:"Rotación",stats:"Estadísticas",trends:"Tendencias",aging:"Añejamiento",reports:"Informes"},smokingLog:{totalBowls:"Cargas totales",breakIn:"asentado",logSession:"Registrar sesión"},tobacconist:{title:"Consulta con tabaquero",subtitle:"Asesoramiento personalizado sobre pipas y tabaco",optional:"Opcional",identify:"Identificar",optimize:"Optimizar",whatIf:"¿Y si…?",updatesTitle:"Actualizaciones de IA",identificationTitle:"Identificador de pipas con IA",identificationSubtitle:"Sube fotos para ayuda rápida de identificación"}},de:{ageGate:{title:"Nur für Erwachsene",intendedForAdults:"PipeKeeper ist nur für erwachsene Nutzer bestimmt.",disclaimer:"Diese App ist ein Sammlungs-Tool für Pfeifenliebhaber. Sie verkauft keine Tabakprodukte und erleichtert deren Kauf nicht.",confirmAge:"Ich bestätige, dass ich volljährig bin"},search:{trigger:"Suchen",openAria:"Suche öffnen",hintTitle:"Zum Suchen tippen",hintSubtitle:"Suche Pfeifen, Tabak, Hersteller, Formen und mehr",kbdNavigate:"Navigieren",kbdSelect:"Auswählen",kbdClose:"Schließen",commandDialogTitle:"Suchen",commandInputPlaceholder:"Tippe, um Pfeifen, Tabak, Hersteller… zu suchen",noResultsFound:"Keine Ergebnisse gefunden",noResultsMessage:"Versuche nach Pfeife, Marke, Tabakmischung oder Form zu suchen",sectionPipes:"Pfeifen",sectionTobacco:"Tabak",sectionQuickActions:"Schnellaktionen",actionAddPipe:"Neue Pfeife hinzufügen",actionAddBlend:"Neue Mischung hinzufügen",actionViewStats:"Statistiken ansehen",actionExportData:"Daten exportieren"},home:{title:"Pfeifen- & Tabaksammlung",subtitle:"Verwalte deine Pfeifen und Tabakmischungen mit KI-Suche, Fotoerkennung, Pairing-Vorschlägen und Marktwerten.",pipeCollectionTitle:"Pfeifensammlung",pipeCollectionSubtitle:"Pfeifen verfolgen und bewerten",pipesInCollection:"Pfeifen in der Sammlung",collectionValue:"Sammlungswert",viewCollection:"Sammlung ansehen",tobaccoCellarTitle:"Tabaklager",tobaccoCellarSubtitle:"Mischungen verwalten",tobaccoBlends:"Tabakmischungen",cellared:"Gelagert",viewCellar:"Lager ansehen"},insights:{title:"Sammlungs-Einblicke",subtitle:"Nutzung verfolgen und Pairings optimieren",log:"Nutzungsprotokoll",pairingGrid:"Pairing-Raster",rotation:"Rotation",stats:"Statistiken",trends:"Trends",aging:"Reifung",reports:"Berichte"},smokingLog:{totalBowls:"Gesamtfüllungen",breakIn:"Einrauchen",logSession:"Sitzung protokollieren"},tobacconist:{title:"Tabakberater-Beratung",subtitle:"Personalisierte Pfeifen- und Tabakberatung",optional:"Optional",identify:"Identifizieren",optimize:"Optimieren",whatIf:"Was wäre wenn",updatesTitle:"KI-Updates",identificationTitle:"KI-Pfeifen-Identifikator",identificationSubtitle:"Fotos hochladen für schnelle Identifikationshilfe"}},ja:{ageGate:{title:"成人のみ",intendedForAdults:"PipeKeeperは成人ユーザーのみを対象としています。",disclaimer:"このアプリはパイプ愛好家向けのコレクション管理ツールです。タバコ製品の販売や購入の支援は行いません。",confirmAge:"私は法定年齢以上であることを確認します"},search:{trigger:"検索",openAria:"検索を開く",hintTitle:"入力して検索",hintSubtitle:"パイプ、タバコ、メーカー、形状などを検索",kbdNavigate:"移動",kbdSelect:"選択",kbdClose:"閉じる",commandDialogTitle:"検索",commandInputPlaceholder:"入力して検索…",noResultsFound:"結果が見つかりません",noResultsMessage:"パイプ、ブランド、ブレンド、形状で検索してみてください",sectionPipes:"パイプ",sectionTobacco:"タバコ",sectionQuickActions:"クイック操作",actionAddPipe:"新しいパイプを追加",actionAddBlend:"新しいブレンドを追加",actionViewStats:"統計を見る",actionExportData:"データを書き出す"},home:{title:"パイプ＆タバコ コレクション",subtitle:"AI検索、写真識別、ペアリング提案、市場評価でパイプとブレンドを管理します。",pipeCollectionTitle:"パイプコレクション",pipeCollectionSubtitle:"パイプを記録して評価",pipesInCollection:"コレクション内のパイプ",collectionValue:"コレクション価値",viewCollection:"コレクションを見る",tobaccoCellarTitle:"タバコ保管庫",tobaccoCellarSubtitle:"ブレンドを管理",tobaccoBlends:"タバコブレンド",cellared:"保管中",viewCellar:"保管庫を見る"},insights:{title:"コレクション分析",subtitle:"使用状況を追跡しペアリングを最適化",log:"使用ログ",pairingGrid:"ペアリング表",rotation:"ローテーション",stats:"統計",trends:"トレンド",aging:"熟成",reports:"レポート"},smokingLog:{totalBowls:"合計ボウル数",breakIn:"慣らし",logSession:"セッションを記録"},tobacconist:{title:"タバコ相談",subtitle:"パイプとタバコの個別アドバイス",optional:"任意",identify:"識別",optimize:"最適化",whatIf:"もしも",updatesTitle:"AI更新",identificationTitle:"AIパイプ識別",identificationSubtitle:"写真をアップロードして簡易識別"}}};function K8(e,n){if(!e||!n)return;const r=String(n).split(".");let s=e;for(const a of r)if(s&&typeof s=="object"&&a in s)s=s[a];else return;return s}function G8(e,n){return!e||typeof e!="string"||!n?e:e.replace(/\{([^}]+)\}/g,(r,s)=>n[s]!==void 0?String(n[s]):`{${s}}`)}function dq(e=null){const n=C.useMemo(()=>{var a;if(e)return e;try{return typeof window<"u"&&((a=window==null?void 0:window.localStorage)==null?void 0:a.getItem("pk_lang"))||"en"}catch{return"en"}},[e]),r=C.useMemo(()=>yN[n]||yN.en||{},[n]);return{t:C.useMemo(()=>(a,o={})=>{const l=K8(r,a);if(l===void 0){const c=K8(yN.en,a);return c?G8(String(c),o):a}return typeof l=="string"?G8(l,o):String(l)},[r]),lang:n}}const Y8=[{code:"en",label:"English"},{code:"es",label:"Español"},{code:"fr",label:"Français"},{code:"de",label:"Deutsch"},{code:"it",label:"Italiano"},{code:"pt-BR",label:"Português (BR)"},{code:"nl",label:"Nederlands"},{code:"pl",label:"Polski"},{code:"ja",label:"日本語"},{code:"zh-Hans",label:"中文 (简体)"}];var ob={},bN={exports:{}},Aa={},wN={exports:{}},jN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q8;function iZ(){return Q8||(Q8=1,(function(e){function n(z,te){var le=z.length;z.push(te);e:for(;0<le;){var Q=le-1>>>1,T=z[Q];if(0<a(T,te))z[Q]=te,z[le]=T,le=Q;else break e}}function r(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var te=z[0],le=z.pop();if(le!==te){z[0]=le;e:for(var Q=0,T=z.length,B=T>>>1;Q<B;){var H=2*(Q+1)-1,ee=z[H],ce=H+1,he=z[ce];if(0>a(ee,le))ce<T&&0>a(he,ee)?(z[Q]=he,z[ce]=le,Q=ce):(z[Q]=ee,z[H]=le,Q=H);else if(ce<T&&0>a(he,le))z[Q]=he,z[ce]=le,Q=ce;else break e}}return te}function a(z,te){var le=z.sortIndex-te.sortIndex;return le!==0?le:z.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var u=[],d=[],f=1,m=null,g=3,x=!1,v=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var te=r(d);te!==null;){if(te.callback===null)s(d);else if(te.startTime<=z)s(d),te.sortIndex=te.expirationTime,n(u,te);else break;te=r(d)}}function A(z){if(y=!1,S(z),!v)if(r(u)!==null)v=!0,X(P);else{var te=r(d);te!==null&&re(A,te.startTime-z)}}function P(z,te){v=!1,y&&(y=!1,N(R),R=-1),x=!0;var le=g;try{for(S(te),m=r(u);m!==null&&(!(m.expirationTime>te)||z&&!D());){var Q=m.callback;if(typeof Q=="function"){m.callback=null,g=m.priorityLevel;var T=Q(m.expirationTime<=te);te=e.unstable_now(),typeof T=="function"?m.callback=T:m===r(u)&&s(u),S(te)}else s(u);m=r(u)}if(m!==null)var B=!0;else{var H=r(d);H!==null&&re(A,H.startTime-te),B=!1}return B}finally{m=null,g=le,x=!1}}var L=!1,O=null,R=-1,q=5,U=-1;function D(){return!(e.unstable_now()-U<q)}function M(){if(O!==null){var z=e.unstable_now();U=z;var te=!0;try{te=O(!0,z)}finally{te?G():(L=!1,O=null)}}else L=!1}var G;if(typeof j=="function")G=function(){j(M)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Z=Y.port2;Y.port1.onmessage=M,G=function(){Z.postMessage(null)}}else G=function(){b(M,0)};function X(z){O=z,L||(L=!0,G())}function re(z,te){R=b(function(){z(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,X(P))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(z){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var le=g;g=te;try{return z()}finally{g=le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,te){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var le=g;g=z;try{return te()}finally{g=le}},e.unstable_scheduleCallback=function(z,te,le){var Q=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Q+le:Q):le=Q,z){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=le+T,z={id:f++,callback:te,priorityLevel:z,startTime:le,expirationTime:T,sortIndex:-1},le>Q?(z.sortIndex=le,n(d,z),r(u)===null&&z===r(d)&&(y?(N(R),R=-1):y=!0,re(A,le-Q))):(z.sortIndex=T,n(u,z),v||x||(v=!0,X(P))),z},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(z){var te=g;return function(){var le=g;g=te;try{return z.apply(this,arguments)}finally{g=le}}}})(jN)),jN}var X8;function aZ(){return X8||(X8=1,wN.exports=iZ()),wN.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J8;function oZ(){if(J8)return Aa;J8=1;var e=Kw(),n=aZ();function r(h){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+h,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function o(h,p){l(h,p),l(h+"Capture",p)}function l(h,p){for(a[h]=p,h=0;h<p.length;h++)s.add(p[h])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function g(h){return u.call(m,h)?!0:u.call(f,h)?!1:d.test(h)?m[h]=!0:(f[h]=!0,!1)}function x(h,p,w,k){if(w!==null&&w.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return k?!1:w!==null?!w.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function v(h,p,w,k){if(p===null||typeof p>"u"||x(h,p,w,k))return!0;if(k)return!1;if(w!==null)switch(w.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function y(h,p,w,k,F,V,ae){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=k,this.attributeNamespace=F,this.mustUseProperty=w,this.propertyName=h,this.type=p,this.sanitizeURL=V,this.removeEmptyString=ae}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){b[h]=new y(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var p=h[0];b[p]=new y(p,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){b[h]=new y(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){b[h]=new y(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){b[h]=new y(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){b[h]=new y(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){b[h]=new y(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){b[h]=new y(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){b[h]=new y(h,5,!1,h.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function j(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var p=h.replace(N,j);b[p]=new y(p,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var p=h.replace(N,j);b[p]=new y(p,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var p=h.replace(N,j);b[p]=new y(p,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){b[h]=new y(h,1,!1,h.toLowerCase(),null,!1,!1)}),b.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){b[h]=new y(h,1,!1,h.toLowerCase(),null,!0,!0)});function S(h,p,w,k){var F=b.hasOwnProperty(p)?b[p]:null;(F!==null?F.type!==0:k||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(v(p,w,F,k)&&(w=null),k||F===null?g(p)&&(w===null?h.removeAttribute(p):h.setAttribute(p,""+w)):F.mustUseProperty?h[F.propertyName]=w===null?F.type===3?!1:"":w:(p=F.attributeName,k=F.attributeNamespace,w===null?h.removeAttribute(p):(F=F.type,w=F===3||F===4&&w===!0?"":""+w,k?h.setAttributeNS(k,p,w):h.setAttribute(p,w))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),L=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),D=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),z=Symbol.iterator;function te(h){return h===null||typeof h!="object"?null:(h=z&&h[z]||h["@@iterator"],typeof h=="function"?h:null)}var le=Object.assign,Q;function T(h){if(Q===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);Q=p&&p[1]||""}return`
`+Q+h}var B=!1;function H(h,p){if(!h||B)return"";B=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch($e){var k=$e}Reflect.construct(h,[],p)}else{try{p.call()}catch($e){k=$e}h.call(p.prototype)}else{try{throw Error()}catch($e){k=$e}h()}}catch($e){if($e&&k&&typeof $e.stack=="string"){for(var F=$e.stack.split(`
`),V=k.stack.split(`
`),ae=F.length-1,we=V.length-1;1<=ae&&0<=we&&F[ae]!==V[we];)we--;for(;1<=ae&&0<=we;ae--,we--)if(F[ae]!==V[we]){if(ae!==1||we!==1)do if(ae--,we--,0>we||F[ae]!==V[we]){var Pe=`
`+F[ae].replace(" at new "," at ");return h.displayName&&Pe.includes("<anonymous>")&&(Pe=Pe.replace("<anonymous>",h.displayName)),Pe}while(1<=ae&&0<=we);break}}}finally{B=!1,Error.prepareStackTrace=w}return(h=h?h.displayName||h.name:"")?T(h):""}function ee(h){switch(h.tag){case 5:return T(h.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 2:case 15:return h=H(h.type,!1),h;case 11:return h=H(h.type.render,!1),h;case 1:return h=H(h.type,!0),h;default:return""}}function ce(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case O:return"Fragment";case L:return"Portal";case q:return"Profiler";case R:return"StrictMode";case G:return"Suspense";case Y:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case D:return(h.displayName||"Context")+".Consumer";case U:return(h._context.displayName||"Context")+".Provider";case M:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case Z:return p=h.displayName||null,p!==null?p:ce(h.type)||"Memo";case X:p=h._payload,h=h._init;try{return ce(h(p))}catch{}}return null}function he(h){var p=h.type;switch(h.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=p.render,h=h.displayName||h.name||"",p.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(p);case 8:return p===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function W(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function J(h){var p=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function pe(h){var p=J(h)?"checked":"value",w=Object.getOwnPropertyDescriptor(h.constructor.prototype,p),k=""+h[p];if(!h.hasOwnProperty(p)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var F=w.get,V=w.set;return Object.defineProperty(h,p,{configurable:!0,get:function(){return F.call(this)},set:function(ae){k=""+ae,V.call(this,ae)}}),Object.defineProperty(h,p,{enumerable:w.enumerable}),{getValue:function(){return k},setValue:function(ae){k=""+ae},stopTracking:function(){h._valueTracker=null,delete h[p]}}}}function ue(h){h._valueTracker||(h._valueTracker=pe(h))}function me(h){if(!h)return!1;var p=h._valueTracker;if(!p)return!0;var w=p.getValue(),k="";return h&&(k=J(h)?h.checked?"true":"false":h.value),h=k,h!==w?(p.setValue(h),!0):!1}function je(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function ze(h,p){var w=p.checked;return le({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??h._wrapperState.initialChecked})}function Te(h,p){var w=p.defaultValue==null?"":p.defaultValue,k=p.checked!=null?p.checked:p.defaultChecked;w=W(p.value!=null?p.value:w),h._wrapperState={initialChecked:k,initialValue:w,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function xe(h,p){p=p.checked,p!=null&&S(h,"checked",p,!1)}function ht(h,p){xe(h,p);var w=W(p.value),k=p.type;if(w!=null)k==="number"?(w===0&&h.value===""||h.value!=w)&&(h.value=""+w):h.value!==""+w&&(h.value=""+w);else if(k==="submit"||k==="reset"){h.removeAttribute("value");return}p.hasOwnProperty("value")?Ye(h,p.type,w):p.hasOwnProperty("defaultValue")&&Ye(h,p.type,W(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(h.defaultChecked=!!p.defaultChecked)}function gt(h,p,w){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var k=p.type;if(!(k!=="submit"&&k!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+h._wrapperState.initialValue,w||p===h.value||(h.value=p),h.defaultValue=p}w=h.name,w!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,w!==""&&(h.name=w)}function Ye(h,p,w){(p!=="number"||je(h.ownerDocument)!==h)&&(w==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+w&&(h.defaultValue=""+w))}var dt=Array.isArray;function ft(h,p,w,k){if(h=h.options,p){p={};for(var F=0;F<w.length;F++)p["$"+w[F]]=!0;for(w=0;w<h.length;w++)F=p.hasOwnProperty("$"+h[w].value),h[w].selected!==F&&(h[w].selected=F),F&&k&&(h[w].defaultSelected=!0)}else{for(w=""+W(w),p=null,F=0;F<h.length;F++){if(h[F].value===w){h[F].selected=!0,k&&(h[F].defaultSelected=!0);return}p!==null||h[F].disabled||(p=h[F])}p!==null&&(p.selected=!0)}}function st(h,p){if(p.dangerouslySetInnerHTML!=null)throw Error(r(91));return le({},p,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Ct(h,p){var w=p.value;if(w==null){if(w=p.children,p=p.defaultValue,w!=null){if(p!=null)throw Error(r(92));if(dt(w)){if(1<w.length)throw Error(r(93));w=w[0]}p=w}p==null&&(p=""),w=p}h._wrapperState={initialValue:W(w)}}function Vt(h,p){var w=W(p.value),k=W(p.defaultValue);w!=null&&(w=""+w,w!==h.value&&(h.value=w),p.defaultValue==null&&h.defaultValue!==w&&(h.defaultValue=w)),k!=null&&(h.defaultValue=""+k)}function Zt(h){var p=h.textContent;p===h._wrapperState.initialValue&&p!==""&&p!==null&&(h.value=p)}function sn(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yn(h,p){return h==null||h==="http://www.w3.org/1999/xhtml"?sn(p):h==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var Pn,Ut=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,w,k,F){MSApp.execUnsafeLocalFunction(function(){return h(p,w,k,F)})}:h})(function(h,p){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=p;else{for(Pn=Pn||document.createElement("div"),Pn.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=Pn.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;p.firstChild;)h.appendChild(p.firstChild)}});function Qt(h,p){if(p){var w=h.firstChild;if(w&&w===h.lastChild&&w.nodeType===3){w.nodeValue=p;return}}h.textContent=p}var yt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cr=["Webkit","ms","Moz","O"];Object.keys(yt).forEach(function(h){Cr.forEach(function(p){p=p+h.charAt(0).toUpperCase()+h.substring(1),yt[p]=yt[h]})});function _n(h,p,w){return p==null||typeof p=="boolean"||p===""?"":w||typeof p!="number"||p===0||yt.hasOwnProperty(h)&&yt[h]?(""+p).trim():p+"px"}function pi(h,p){h=h.style;for(var w in p)if(p.hasOwnProperty(w)){var k=w.indexOf("--")===0,F=_n(w,p[w],k);w==="float"&&(w="cssFloat"),k?h.setProperty(w,F):h[w]=F}}var Un=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gn(h,p){if(p){if(Un[h]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(r(137,h));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(r(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(r(61))}if(p.style!=null&&typeof p.style!="object")throw Error(r(62))}}function gi(h,p){if(h.indexOf("-")===-1)return typeof p.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wn=null;function vs(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var dr=null,ys=null,Ps=null;function hr(h){if(h=Pd(h)){if(typeof dr!="function")throw Error(r(280));var p=h.stateNode;p&&(p=yf(p),dr(h.stateNode,h.type,p))}}function mt(h){ys?Ps?Ps.push(h):Ps=[h]:ys=h}function Ht(){if(ys){var h=ys,p=Ps;if(Ps=ys=null,hr(h),p)for(h=0;h<p.length;h++)hr(p[h])}}function vr(h,p){return h(p)}function Dn(){}var As=!1;function Yn(h,p,w){if(As)return h(p,w);As=!0;try{return vr(h,p,w)}finally{As=!1,(ys!==null||Ps!==null)&&(Dn(),Ht())}}function Pt(h,p){var w=h.stateNode;if(w===null)return null;var k=yf(w);if(k===null)return null;w=k[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(h=h.type,k=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!k;break e;default:h=!1}if(h)return null;if(w&&typeof w!="function")throw Error(r(231,p,typeof w));return w}var bs=!1;if(c)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){bs=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{bs=!1}function mr(h,p,w,k,F,V,ae,we,Pe){var $e=Array.prototype.slice.call(arguments,3);try{p.apply(w,$e)}catch(it){this.onError(it)}}var pr=!1,Fn=null,ks=!1,Ml=null,Ho={onError:function(h){pr=!0,Fn=h}};function qa(h,p,w,k,F,V,ae,we,Pe){pr=!1,Fn=null,mr.apply(Ho,arguments)}function za(h,p,w,k,F,V,ae,we,Pe){if(qa.apply(this,arguments),pr){if(pr){var $e=Fn;pr=!1,Fn=null}else throw Error(r(198));ks||(ks=!0,Ml=$e)}}function Es(h){var p=h,w=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,(p.flags&4098)!==0&&(w=p.return),h=p.return;while(h)}return p.tag===3?w:null}function Ua(h){if(h.tag===13){var p=h.memoizedState;if(p===null&&(h=h.alternate,h!==null&&(p=h.memoizedState)),p!==null)return p.dehydrated}return null}function Wi(h){if(Es(h)!==h)throw Error(r(188))}function mo(h){var p=h.alternate;if(!p){if(p=Es(h),p===null)throw Error(r(188));return p!==h?null:h}for(var w=h,k=p;;){var F=w.return;if(F===null)break;var V=F.alternate;if(V===null){if(k=F.return,k!==null){w=k;continue}break}if(F.child===V.child){for(V=F.child;V;){if(V===w)return Wi(F),h;if(V===k)return Wi(F),p;V=V.sibling}throw Error(r(188))}if(w.return!==k.return)w=F,k=V;else{for(var ae=!1,we=F.child;we;){if(we===w){ae=!0,w=F,k=V;break}if(we===k){ae=!0,k=F,w=V;break}we=we.sibling}if(!ae){for(we=V.child;we;){if(we===w){ae=!0,w=V,k=F;break}if(we===k){ae=!0,k=V,w=F;break}we=we.sibling}if(!ae)throw Error(r(189))}}if(w.alternate!==k)throw Error(r(190))}if(w.tag!==3)throw Error(r(188));return w.stateNode.current===w?h:p}function Fl(h){return h=mo(h),h!==null?Fc(h):null}function Fc(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var p=Fc(h);if(p!==null)return p;h=h.sibling}return null}var Bc=n.unstable_scheduleCallback,$c=n.unstable_cancelCallback,Xu=n.unstable_shouldYield,qm=n.unstable_requestPaint,Pr=n.unstable_now,v0=n.unstable_getCurrentPriorityLevel,Bl=n.unstable_ImmediatePriority,Xh=n.unstable_UserBlockingPriority,Ju=n.unstable_NormalPriority,Jh=n.unstable_LowPriority,zm=n.unstable_IdlePriority,qc=null,pa=null;function Zu(h){if(pa&&typeof pa.onCommitFiberRoot=="function")try{pa.onCommitFiberRoot(qc,h,void 0,(h.current.flags&128)===128)}catch{}}var Ki=Math.clz32?Math.clz32:Vm,zr=Math.log,Um=Math.LN2;function Vm(h){return h>>>=0,h===0?32:31-(zr(h)/Um|0)|0}var zc=64,$l=4194304;function Uc(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function xi(h,p){var w=h.pendingLanes;if(w===0)return 0;var k=0,F=h.suspendedLanes,V=h.pingedLanes,ae=w&268435455;if(ae!==0){var we=ae&~F;we!==0?k=Uc(we):(V&=ae,V!==0&&(k=Uc(V)))}else ae=w&~F,ae!==0?k=Uc(ae):V!==0&&(k=Uc(V));if(k===0)return 0;if(p!==0&&p!==k&&(p&F)===0&&(F=k&-k,V=p&-p,F>=V||F===16&&(V&4194240)!==0))return p;if((k&4)!==0&&(k|=w&16),p=h.entangledLanes,p!==0)for(h=h.entanglements,p&=k;0<p;)w=31-Ki(p),F=1<<w,k|=h[w],p&=~F;return k}function ed(h,p){switch(h){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vi(h,p){for(var w=h.suspendedLanes,k=h.pingedLanes,F=h.expirationTimes,V=h.pendingLanes;0<V;){var ae=31-Ki(V),we=1<<ae,Pe=F[ae];Pe===-1?((we&w)===0||(we&k)!==0)&&(F[ae]=ed(we,p)):Pe<=p&&(h.expiredLanes|=we),V&=~we}}function Vc(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Zh(){var h=zc;return zc<<=1,(zc&4194240)===0&&(zc=64),h}function ef(h){for(var p=[],w=0;31>w;w++)p.push(h);return p}function ql(h,p,w){h.pendingLanes|=p,p!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,p=31-Ki(p),h[p]=w}function y0(h,p){var w=h.pendingLanes&~p;h.pendingLanes=p,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=p,h.mutableReadLanes&=p,h.entangledLanes&=p,p=h.entanglements;var k=h.eventTimes;for(h=h.expirationTimes;0<w;){var F=31-Ki(w),V=1<<F;p[F]=0,k[F]=-1,h[F]=-1,w&=~V}}function td(h,p){var w=h.entangledLanes|=p;for(h=h.entanglements;w;){var k=31-Ki(w),F=1<<k;F&p|h[k]&p&&(h[k]|=p),w&=~F}}var Bn=0;function nd(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var Hm,tf,Wm,po,Hc,zl=!1,Wc=[],Ar=null,go=null,Va=null,Gt=new Map,Kc=new Map,xo=[],vo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nf(h,p){switch(h){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":Va=null;break;case"pointerover":case"pointerout":Gt.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kc.delete(p.pointerId)}}function Ul(h,p,w,k,F,V){return h===null||h.nativeEvent!==V?(h={blockedOn:p,domEventName:w,eventSystemFlags:k,nativeEvent:V,targetContainers:[F]},p!==null&&(p=Pd(p),p!==null&&tf(p)),h):(h.eventSystemFlags|=k,p=h.targetContainers,F!==null&&p.indexOf(F)===-1&&p.push(F),h)}function rd(h,p,w,k,F){switch(p){case"focusin":return Ar=Ul(Ar,h,p,w,k,F),!0;case"dragenter":return go=Ul(go,h,p,w,k,F),!0;case"mouseover":return Va=Ul(Va,h,p,w,k,F),!0;case"pointerover":var V=F.pointerId;return Gt.set(V,Ul(Gt.get(V)||null,h,p,w,k,F)),!0;case"gotpointercapture":return V=F.pointerId,Kc.set(V,Ul(Kc.get(V)||null,h,p,w,k,F)),!0}return!1}function sd(h){var p=ec(h.target);if(p!==null){var w=Es(p);if(w!==null){if(p=w.tag,p===13){if(p=Ua(w),p!==null){h.blockedOn=p,Hc(h.priority,function(){Wm(w)});return}}else if(p===3&&w.stateNode.current.memoizedState.isDehydrated){h.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}h.blockedOn=null}function id(h){if(h.blockedOn!==null)return!1;for(var p=h.targetContainers;0<p.length;){var w=od(h.domEventName,h.eventSystemFlags,p[0],h.nativeEvent);if(w===null){w=h.nativeEvent;var k=new w.constructor(w.type,w);wn=k,w.target.dispatchEvent(k),wn=null}else return p=Pd(w),p!==null&&tf(p),h.blockedOn=w,!1;p.shift()}return!0}function Km(h,p,w){id(h)&&w.delete(p)}function b0(){zl=!1,Ar!==null&&id(Ar)&&(Ar=null),go!==null&&id(go)&&(go=null),Va!==null&&id(Va)&&(Va=null),Gt.forEach(Km),Kc.forEach(Km)}function Wo(h,p){h.blockedOn===p&&(h.blockedOn=null,zl||(zl=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,b0)))}function Ha(h){function p(F){return Wo(F,h)}if(0<Wc.length){Wo(Wc[0],h);for(var w=1;w<Wc.length;w++){var k=Wc[w];k.blockedOn===h&&(k.blockedOn=null)}}for(Ar!==null&&Wo(Ar,h),go!==null&&Wo(go,h),Va!==null&&Wo(Va,h),Gt.forEach(p),Kc.forEach(p),w=0;w<xo.length;w++)k=xo[w],k.blockedOn===h&&(k.blockedOn=null);for(;0<xo.length&&(w=xo[0],w.blockedOn===null);)sd(w),w.blockedOn===null&&xo.shift()}var Gi=A.ReactCurrentBatchConfig,ad=!0;function Gc(h,p,w,k){var F=Bn,V=Gi.transition;Gi.transition=null;try{Bn=1,Vl(h,p,w,k)}finally{Bn=F,Gi.transition=V}}function rf(h,p,w,k){var F=Bn,V=Gi.transition;Gi.transition=null;try{Bn=4,Vl(h,p,w,k)}finally{Bn=F,Gi.transition=V}}function Vl(h,p,w,k){if(ad){var F=od(h,p,w,k);if(F===null)gf(h,p,k,Yc,w),nf(h,k);else if(rd(F,h,p,w,k))k.stopPropagation();else if(nf(h,k),p&4&&-1<vo.indexOf(h)){for(;F!==null;){var V=Pd(F);if(V!==null&&Hm(V),V=od(h,p,w,k),V===null&&gf(h,p,k,Yc,w),V===F)break;F=V}F!==null&&k.stopPropagation()}else gf(h,p,k,null,w)}}var Yc=null;function od(h,p,w,k){if(Yc=null,h=vs(k),h=ec(h),h!==null)if(p=Es(h),p===null)h=null;else if(w=p.tag,w===13){if(h=Ua(p),h!==null)return h;h=null}else if(w===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;h=null}else p!==h&&(h=null);return Yc=h,null}function sf(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(v0()){case Bl:return 1;case Xh:return 4;case Ju:case Jh:return 16;case zm:return 536870912;default:return 16}default:return 16}}var Wa=null,ga=null,xa=null;function Gm(){if(xa)return xa;var h,p=ga,w=p.length,k,F="value"in Wa?Wa.value:Wa.textContent,V=F.length;for(h=0;h<w&&p[h]===F[h];h++);var ae=w-h;for(k=1;k<=ae&&p[w-k]===F[V-k];k++);return xa=F.slice(h,1<k?1-k:void 0)}function Ka(h){var p=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&p===13&&(h=13)):h=p,h===10&&(h=13),32<=h||h===13?h:0}function yi(){return!0}function ld(){return!1}function rs(h){function p(w,k,F,V,ae){this._reactName=w,this._targetInst=F,this.type=k,this.nativeEvent=V,this.target=ae,this.currentTarget=null;for(var we in h)h.hasOwnProperty(we)&&(w=h[we],this[we]=w?w(V):V[we]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?yi:ld,this.isPropagationStopped=ld,this}return le(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=yi)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=yi)},persist:function(){},isPersistent:yi}),p}var Hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wl=rs(Hl),Qc=le({},Hl,{view:0,detail:0}),af=rs(Qc),Xc,cd,yo,Kl=le({},Qc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jt,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==yo&&(yo&&h.type==="mousemove"?(Xc=h.screenX-yo.screenX,cd=h.screenY-yo.screenY):cd=Xc=0,yo=h),Xc)},movementY:function(h){return"movementY"in h?h.movementY:cd}}),ud=rs(Kl),Ym=le({},Kl,{dataTransfer:0}),w0=rs(Ym),dd=le({},Qc,{relatedTarget:0}),Ko=rs(dd),of=le({},Hl,{animationName:0,elapsedTime:0,pseudoElement:0}),Gl=rs(of),lf=le({},Hl,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),I=rs(lf),se=le({},Hl,{data:0}),be=rs(se),_e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},De={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},He={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nt(h){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(h):(h=He[h])?!!p[h]:!1}function jt(){return nt}var Bt=le({},Qc,{key:function(h){if(h.key){var p=_e[h.key]||h.key;if(p!=="Unidentified")return p}return h.type==="keypress"?(h=Ka(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?De[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jt,charCode:function(h){return h.type==="keypress"?Ka(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Ka(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),on=rs(Bt),an=le({},Kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sn=rs(an),kr=le({},Qc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jt}),Ir=rs(kr),Gr=le({},Hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),zs=rs(Gr),ws=le({},Kl,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Ga=rs(ws),Yi=[9,13,27,32],va=c&&"CompositionEvent"in window,Yl=null;c&&"documentMode"in document&&(Yl=document.documentMode);var cf=c&&"TextEvent"in window&&!Yl,hd=c&&(!va||Yl&&8<Yl&&11>=Yl),Jc=" ",fd=!1;function md(h,p){switch(h){case"keyup":return Yi.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Mr=!1;function pd(h,p){switch(h){case"compositionend":return Zc(p);case"keypress":return p.which!==32?null:(fd=!0,Jc);case"textInput":return h=p.data,h===Jc&&fd?null:h;default:return null}}function gd(h,p){if(Mr)return h==="compositionend"||!va&&md(h,p)?(h=Gm(),xa=ga=Wa=null,Mr=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return hd&&p.locale!=="ko"?null:p.data;default:return null}}var xd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vd(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p==="input"?!!xd[h.type]:p==="textarea"}function ni(h,p,w,k){mt(k),p=Zm(p,"onChange"),0<p.length&&(w=new Wl("onChange","change",null,w,k),h.push({event:w,listeners:p}))}var eu=null,Go=null;function Qm(h){mf(h,0)}function ri(h){var p=cu(h);if(me(p))return h}function yd(h,p){if(h==="change")return p}var uf=!1;if(c){var bd;if(c){var bo="oninput"in document;if(!bo){var Ql=document.createElement("div");Ql.setAttribute("oninput","return;"),bo=typeof Ql.oninput=="function"}bd=bo}else bd=!1;uf=bd&&(!document.documentMode||9<document.documentMode)}function si(){eu&&(eu.detachEvent("onpropertychange",Us),Go=eu=null)}function Us(h){if(h.propertyName==="value"&&ri(Go)){var p=[];ni(p,Go,h,vs(h)),Yn(Qm,p)}}function Xl(h,p,w){h==="focusin"?(si(),eu=p,Go=w,eu.attachEvent("onpropertychange",Us)):h==="focusout"&&si()}function Yo(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return ri(Go)}function Qo(h,p){if(h==="click")return ri(p)}function wd(h,p){if(h==="input"||h==="change")return ri(p)}function Xo(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var $n=typeof Object.is=="function"?Object.is:Xo;function Jo(h,p){if($n(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var w=Object.keys(h),k=Object.keys(p);if(w.length!==k.length)return!1;for(k=0;k<w.length;k++){var F=w[k];if(!u.call(p,F)||!$n(h[F],p[F]))return!1}return!0}function Vs(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Qi(h,p){var w=Vs(h);h=0;for(var k;w;){if(w.nodeType===3){if(k=h+w.textContent.length,h<=p&&k>=p)return{node:w,offset:p-h};h=k}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Vs(w)}}function tu(h,p){return h&&p?h===p?!0:h&&h.nodeType===3?!1:p&&p.nodeType===3?tu(h,p.parentNode):"contains"in h?h.contains(p):h.compareDocumentPosition?!!(h.compareDocumentPosition(p)&16):!1:!1}function df(){for(var h=window,p=je();p instanceof h.HTMLIFrameElement;){try{var w=typeof p.contentWindow.location.href=="string"}catch{w=!1}if(w)h=p.contentWindow;else break;p=je(h.document)}return p}function nu(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p&&(p==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||p==="textarea"||h.contentEditable==="true")}function ru(h){var p=df(),w=h.focusedElem,k=h.selectionRange;if(p!==w&&w&&w.ownerDocument&&tu(w.ownerDocument.documentElement,w)){if(k!==null&&nu(w)){if(p=k.start,h=k.end,h===void 0&&(h=p),"selectionStart"in w)w.selectionStart=p,w.selectionEnd=Math.min(h,w.value.length);else if(h=(p=w.ownerDocument||document)&&p.defaultView||window,h.getSelection){h=h.getSelection();var F=w.textContent.length,V=Math.min(k.start,F);k=k.end===void 0?V:Math.min(k.end,F),!h.extend&&V>k&&(F=k,k=V,V=F),F=Qi(w,V);var ae=Qi(w,k);F&&ae&&(h.rangeCount!==1||h.anchorNode!==F.node||h.anchorOffset!==F.offset||h.focusNode!==ae.node||h.focusOffset!==ae.offset)&&(p=p.createRange(),p.setStart(F.node,F.offset),h.removeAllRanges(),V>k?(h.addRange(p),h.extend(ae.node,ae.offset)):(p.setEnd(ae.node,ae.offset),h.addRange(p)))}}for(p=[],h=w;h=h.parentNode;)h.nodeType===1&&p.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<p.length;w++)h=p[w],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var su=c&&"documentMode"in document&&11>=document.documentMode,Xi=null,Zo=null,wo=null,el=!1;function tl(h,p,w){var k=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;el||Xi==null||Xi!==je(k)||(k=Xi,"selectionStart"in k&&nu(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),wo&&Jo(wo,k)||(wo=k,k=Zm(Zo,"onSelect"),0<k.length&&(p=new Wl("onSelect","select",null,p,w),h.push({event:p,listeners:k}),p.target=Xi)))}function Jl(h,p){var w={};return w[h.toLowerCase()]=p.toLowerCase(),w["Webkit"+h]="webkit"+p,w["Moz"+h]="moz"+p,w}var Ts={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionend:Jl("Transition","TransitionEnd")},bi={},ar={};c&&(ar=document.createElement("div").style,"AnimationEvent"in window||(delete Ts.animationend.animation,delete Ts.animationiteration.animation,delete Ts.animationstart.animation),"TransitionEvent"in window||delete Ts.transitionend.transition);function Qn(h){if(bi[h])return bi[h];if(!Ts[h])return h;var p=Ts[h],w;for(w in p)if(p.hasOwnProperty(w)&&w in ar)return bi[h]=p[w];return h}var Fr=Qn("animationend"),Yr=Qn("animationiteration"),jo=Qn("animationstart"),jd=Qn("transitionend"),iu=new Map,hf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function No(h,p){iu.set(h,p),o(p,[h])}for(var Nd=0;Nd<hf.length;Nd++){var ii=hf[Nd],ya=ii.toLowerCase(),Xm=ii[0].toUpperCase()+ii.slice(1);No(ya,"on"+Xm)}No(Fr,"onAnimationEnd"),No(Yr,"onAnimationIteration"),No(jo,"onAnimationStart"),No("dblclick","onDoubleClick"),No("focusin","onFocus"),No("focusout","onBlur"),No(jd,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zl));function ff(h,p,w){var k=h.type||"unknown-event";h.currentTarget=w,za(k,p,void 0,h),h.currentTarget=null}function mf(h,p){p=(p&4)!==0;for(var w=0;w<h.length;w++){var k=h[w],F=k.event;k=k.listeners;e:{var V=void 0;if(p)for(var ae=k.length-1;0<=ae;ae--){var we=k[ae],Pe=we.instance,$e=we.currentTarget;if(we=we.listener,Pe!==V&&F.isPropagationStopped())break e;ff(F,we,$e),V=Pe}else for(ae=0;ae<k.length;ae++){if(we=k[ae],Pe=we.instance,$e=we.currentTarget,we=we.listener,Pe!==V&&F.isPropagationStopped())break e;ff(F,we,$e),V=Pe}}}if(ks)throw h=Ml,ks=!1,Ml=null,h}function or(h,p){var w=p[ji];w===void 0&&(w=p[ji]=new Set);var k=h+"__bubble";w.has(k)||(pf(p,h,2,!1),w.add(k))}function Jm(h,p,w){var k=0;p&&(k|=4),pf(w,h,k,p)}var _d="_reactListening"+Math.random().toString(36).slice(2);function au(h){if(!h[_d]){h[_d]=!0,s.forEach(function(w){w!=="selectionchange"&&(Sy.has(w)||Jm(w,!1,h),Jm(w,!0,h))});var p=h.nodeType===9?h:h.ownerDocument;p===null||p[_d]||(p[_d]=!0,Jm("selectionchange",!1,p))}}function pf(h,p,w,k){switch(sf(p)){case 1:var F=Gc;break;case 4:F=rf;break;default:F=Vl}w=F.bind(null,p,w,h),F=void 0,!bs||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(F=!0),k?F!==void 0?h.addEventListener(p,w,{capture:!0,passive:F}):h.addEventListener(p,w,!0):F!==void 0?h.addEventListener(p,w,{passive:F}):h.addEventListener(p,w,!1)}function gf(h,p,w,k,F){var V=k;if((p&1)===0&&(p&2)===0&&k!==null)e:for(;;){if(k===null)return;var ae=k.tag;if(ae===3||ae===4){var we=k.stateNode.containerInfo;if(we===F||we.nodeType===8&&we.parentNode===F)break;if(ae===4)for(ae=k.return;ae!==null;){var Pe=ae.tag;if((Pe===3||Pe===4)&&(Pe=ae.stateNode.containerInfo,Pe===F||Pe.nodeType===8&&Pe.parentNode===F))return;ae=ae.return}for(;we!==null;){if(ae=ec(we),ae===null)return;if(Pe=ae.tag,Pe===5||Pe===6){k=V=ae;continue e}we=we.parentNode}}k=k.return}Yn(function(){var $e=V,it=vs(w),ct=[];e:{var rt=iu.get(h);if(rt!==void 0){var St=Wl,Tt=h;switch(h){case"keypress":if(Ka(w)===0)break e;case"keydown":case"keyup":St=on;break;case"focusin":Tt="focus",St=Ko;break;case"focusout":Tt="blur",St=Ko;break;case"beforeblur":case"afterblur":St=Ko;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":St=ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":St=w0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":St=Ir;break;case Fr:case Yr:case jo:St=Gl;break;case jd:St=zs;break;case"scroll":St=af;break;case"wheel":St=Ga;break;case"copy":case"cut":case"paste":St=I;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":St=Sn}var It=(p&4)!==0,os=!It&&h==="scroll",Fe=It?rt!==null?rt+"Capture":null:rt;It=[];for(var Le=$e,Be;Le!==null;){Be=Le;var pt=Be.stateNode;if(Be.tag===5&&pt!==null&&(Be=pt,Fe!==null&&(pt=Pt(Le,Fe),pt!=null&&It.push(xf(Le,pt,Be)))),os)break;Le=Le.return}0<It.length&&(rt=new St(rt,Tt,null,w,it),ct.push({event:rt,listeners:It}))}}if((p&7)===0){e:{if(rt=h==="mouseover"||h==="pointerover",St=h==="mouseout"||h==="pointerout",rt&&w!==wn&&(Tt=w.relatedTarget||w.fromElement)&&(ec(Tt)||Tt[Hs]))break e;if((St||rt)&&(rt=it.window===it?it:(rt=it.ownerDocument)?rt.defaultView||rt.parentWindow:window,St?(Tt=w.relatedTarget||w.toElement,St=$e,Tt=Tt?ec(Tt):null,Tt!==null&&(os=Es(Tt),Tt!==os||Tt.tag!==5&&Tt.tag!==6)&&(Tt=null)):(St=null,Tt=$e),St!==Tt)){if(It=ud,pt="onMouseLeave",Fe="onMouseEnter",Le="mouse",(h==="pointerout"||h==="pointerover")&&(It=Sn,pt="onPointerLeave",Fe="onPointerEnter",Le="pointer"),os=St==null?rt:cu(St),Be=Tt==null?rt:cu(Tt),rt=new It(pt,Le+"leave",St,w,it),rt.target=os,rt.relatedTarget=Be,pt=null,ec(it)===$e&&(It=new It(Fe,Le+"enter",Tt,w,it),It.target=Be,It.relatedTarget=os,pt=It),os=pt,St&&Tt)t:{for(It=St,Fe=Tt,Le=0,Be=It;Be;Be=ou(Be))Le++;for(Be=0,pt=Fe;pt;pt=ou(pt))Be++;for(;0<Le-Be;)It=ou(It),Le--;for(;0<Be-Le;)Fe=ou(Fe),Be--;for(;Le--;){if(It===Fe||Fe!==null&&It===Fe.alternate)break t;It=ou(It),Fe=ou(Fe)}It=null}else It=null;St!==null&&Cy(ct,rt,St,It,!1),Tt!==null&&os!==null&&Cy(ct,os,Tt,It,!0)}}e:{if(rt=$e?cu($e):window,St=rt.nodeName&&rt.nodeName.toLowerCase(),St==="select"||St==="input"&&rt.type==="file")var Mt=yd;else if(vd(rt))if(uf)Mt=wd;else{Mt=Yo;var Wt=Xl}else(St=rt.nodeName)&&St.toLowerCase()==="input"&&(rt.type==="checkbox"||rt.type==="radio")&&(Mt=Qo);if(Mt&&(Mt=Mt(h,$e))){ni(ct,Mt,w,it);break e}Wt&&Wt(h,rt,$e),h==="focusout"&&(Wt=rt._wrapperState)&&Wt.controlled&&rt.type==="number"&&Ye(rt,"number",rt.value)}switch(Wt=$e?cu($e):window,h){case"focusin":(vd(Wt)||Wt.contentEditable==="true")&&(Xi=Wt,Zo=$e,wo=null);break;case"focusout":wo=Zo=Xi=null;break;case"mousedown":el=!0;break;case"contextmenu":case"mouseup":case"dragend":el=!1,tl(ct,w,it);break;case"selectionchange":if(su)break;case"keydown":case"keyup":tl(ct,w,it)}var Kt;if(va)e:{switch(h){case"compositionstart":var nn="onCompositionStart";break e;case"compositionend":nn="onCompositionEnd";break e;case"compositionupdate":nn="onCompositionUpdate";break e}nn=void 0}else Mr?md(h,w)&&(nn="onCompositionEnd"):h==="keydown"&&w.keyCode===229&&(nn="onCompositionStart");nn&&(hd&&w.locale!=="ko"&&(Mr||nn!=="onCompositionStart"?nn==="onCompositionEnd"&&Mr&&(Kt=Gm()):(Wa=it,ga="value"in Wa?Wa.value:Wa.textContent,Mr=!0)),Wt=Zm($e,nn),0<Wt.length&&(nn=new be(nn,h,null,w,it),ct.push({event:nn,listeners:Wt}),Kt?nn.data=Kt:(Kt=Zc(w),Kt!==null&&(nn.data=Kt)))),(Kt=cf?pd(h,w):gd(h,w))&&($e=Zm($e,"onBeforeInput"),0<$e.length&&(it=new be("onBeforeInput","beforeinput",null,w,it),ct.push({event:it,listeners:$e}),it.data=Kt))}mf(ct,p)})}function xf(h,p,w){return{instance:h,listener:p,currentTarget:w}}function Zm(h,p){for(var w=p+"Capture",k=[];h!==null;){var F=h,V=F.stateNode;F.tag===5&&V!==null&&(F=V,V=Pt(h,w),V!=null&&k.unshift(xf(h,V,F)),V=Pt(h,p),V!=null&&k.push(xf(h,V,F))),h=h.return}return k}function ou(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function Cy(h,p,w,k,F){for(var V=p._reactName,ae=[];w!==null&&w!==k;){var we=w,Pe=we.alternate,$e=we.stateNode;if(Pe!==null&&Pe===k)break;we.tag===5&&$e!==null&&(we=$e,F?(Pe=Pt(w,V),Pe!=null&&ae.unshift(xf(w,Pe,we))):F||(Pe=Pt(w,V),Pe!=null&&ae.push(xf(w,Pe,we)))),w=w.return}ae.length!==0&&h.push({event:p,listeners:ae})}var Ej=/\r\n?/g,Tj=/\u0000|\uFFFD/g;function Py(h){return(typeof h=="string"?h:""+h).replace(Ej,`
`).replace(Tj,"")}function ep(h,p,w){if(p=Py(p),Py(h)!==p&&w)throw Error(r(425))}function Sd(){}var vf=null,lu=null;function j0(h,p){return h==="textarea"||h==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var N0=typeof setTimeout=="function"?setTimeout:void 0,Ay=typeof clearTimeout=="function"?clearTimeout:void 0,ky=typeof Promise=="function"?Promise:void 0,Oj=typeof queueMicrotask=="function"?queueMicrotask:typeof ky<"u"?function(h){return ky.resolve(null).then(h).catch(Lj)}:N0;function Lj(h){setTimeout(function(){throw h})}function _0(h,p){var w=p,k=0;do{var F=w.nextSibling;if(h.removeChild(w),F&&F.nodeType===8)if(w=F.data,w==="/$"){if(k===0){h.removeChild(F),Ha(p);return}k--}else w!=="$"&&w!=="$?"&&w!=="$!"||k++;w=F}while(w);Ha(p)}function ai(h){for(;h!=null;h=h.nextSibling){var p=h.nodeType;if(p===1||p===3)break;if(p===8){if(p=h.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return h}function ba(h){h=h.previousSibling;for(var p=0;h;){if(h.nodeType===8){var w=h.data;if(w==="$"||w==="$!"||w==="$?"){if(p===0)return h;p--}else w==="/$"&&p++}h=h.previousSibling}return null}var wi=Math.random().toString(36).slice(2),_o="__reactFiber$"+wi,Cd="__reactProps$"+wi,Hs="__reactContainer$"+wi,ji="__reactEvents$"+wi,Rj="__reactListeners$"+wi,Dj="__reactHandles$"+wi;function ec(h){var p=h[_o];if(p)return p;for(var w=h.parentNode;w;){if(p=w[Hs]||w[_o]){if(w=p.alternate,p.child!==null||w!==null&&w.child!==null)for(h=ba(h);h!==null;){if(w=h[_o])return w;h=ba(h)}return p}h=w,w=h.parentNode}return null}function Pd(h){return h=h[_o]||h[Hs],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function cu(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(r(33))}function yf(h){return h[Cd]||null}var S0=[],nl=-1;function Ya(h){return{current:h}}function Xn(h){0>nl||(h.current=S0[nl],S0[nl]=null,nl--)}function tr(h,p){nl++,S0[nl]=h.current,h.current=p}var tc={},Os=Ya(tc),Ni=Ya(!1),uu=tc;function Ad(h,p){var w=h.type.contextTypes;if(!w)return tc;var k=h.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===p)return k.__reactInternalMemoizedMaskedChildContext;var F={},V;for(V in w)F[V]=p[V];return k&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=p,h.__reactInternalMemoizedMaskedChildContext=F),F}function _i(h){return h=h.childContextTypes,h!=null}function tp(){Xn(Ni),Xn(Os)}function Ey(h,p,w){if(Os.current!==tc)throw Error(r(168));tr(Os,p),tr(Ni,w)}function C0(h,p,w){var k=h.stateNode;if(p=p.childContextTypes,typeof k.getChildContext!="function")return w;k=k.getChildContext();for(var F in k)if(!(F in p))throw Error(r(108,he(h)||"Unknown",F));return le({},w,k)}function du(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||tc,uu=Os.current,tr(Os,h),tr(Ni,Ni.current),!0}function Ty(h,p,w){var k=h.stateNode;if(!k)throw Error(r(169));w?(h=C0(h,p,uu),k.__reactInternalMemoizedMergedChildContext=h,Xn(Ni),Xn(Os),tr(Os,h)):Xn(Ni),tr(Ni,w)}var rl=null,bf=!1,_=!1;function E(h){rl===null?rl=[h]:rl.push(h)}function $(h){bf=!0,E(h)}function K(){if(!_&&rl!==null){_=!0;var h=0,p=Bn;try{var w=rl;for(Bn=1;h<w.length;h++){var k=w[h];do k=k(!0);while(k!==null)}rl=null,bf=!1}catch(F){throw rl!==null&&(rl=rl.slice(h+1)),Bc(Bl,K),F}finally{Bn=p,_=!1}}return null}var ne=[],ie=0,oe=null,de=0,fe=[],ge=0,Se=null,Ie=1,Me="";function Re(h,p){ne[ie++]=de,ne[ie++]=oe,oe=h,de=p}function Je(h,p,w){fe[ge++]=Ie,fe[ge++]=Me,fe[ge++]=Se,Se=h;var k=Ie;h=Me;var F=32-Ki(k)-1;k&=~(1<<F),w+=1;var V=32-Ki(p)+F;if(30<V){var ae=F-F%5;V=(k&(1<<ae)-1).toString(32),k>>=ae,F-=ae,Ie=1<<32-Ki(p)+F|w<<F|k,Me=V+h}else Ie=1<<V|w<<F|k,Me=h}function Ue(h){h.return!==null&&(Re(h,1),Je(h,1,0))}function Ae(h){for(;h===oe;)oe=ne[--ie],ne[ie]=null,de=ne[--ie],ne[ie]=null;for(;h===Se;)Se=fe[--ge],fe[ge]=null,Me=fe[--ge],fe[ge]=null,Ie=fe[--ge],fe[ge]=null}var ke=null,Ke=null,We=!1,Qe=null;function Nt(h,p){var w=Eo(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=h,p=h.deletions,p===null?(h.deletions=[w],h.flags|=16):p.push(w)}function vt(h,p){switch(h.tag){case 5:var w=h.type;return p=p.nodeType!==1||w.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(h.stateNode=p,ke=h,Ke=ai(p.firstChild),!0):!1;case 6:return p=h.pendingProps===""||p.nodeType!==3?null:p,p!==null?(h.stateNode=p,ke=h,Ke=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(w=Se!==null?{id:Ie,overflow:Me}:null,h.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=Eo(18,null,null,0),w.stateNode=p,w.return=h,h.child=w,ke=h,Ke=null,!0):!1;default:return!1}}function qt(h){return(h.mode&1)!==0&&(h.flags&128)===0}function wt(h){if(We){var p=Ke;if(p){var w=p;if(!vt(h,p)){if(qt(h))throw Error(r(418));p=ai(w.nextSibling);var k=ke;p&&vt(h,p)?Nt(k,w):(h.flags=h.flags&-4097|2,We=!1,ke=h)}}else{if(qt(h))throw Error(r(418));h.flags=h.flags&-4097|2,We=!1,ke=h}}}function In(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;ke=h}function Mn(h){if(h!==ke)return!1;if(!We)return In(h),We=!0,!1;var p;if((p=h.tag!==3)&&!(p=h.tag!==5)&&(p=h.type,p=p!=="head"&&p!=="body"&&!j0(h.type,h.memoizedProps)),p&&(p=Ke)){if(qt(h))throw An(),Error(r(418));for(;p;)Nt(h,p),p=ai(p.nextSibling)}if(In(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,p=0;h;){if(h.nodeType===8){var w=h.data;if(w==="/$"){if(p===0){Ke=ai(h.nextSibling);break e}p--}else w!=="$"&&w!=="$!"&&w!=="$?"||p++}h=h.nextSibling}Ke=null}}else Ke=ke?ai(h.stateNode.nextSibling):null;return!0}function An(){for(var h=Ke;h;)h=ai(h.nextSibling)}function dn(){Ke=ke=null,We=!1}function Jn(h){Qe===null?Qe=[h]:Qe.push(h)}var nr=A.ReactCurrentBatchConfig;function tn(h,p,w){if(h=w.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(r(309));var k=w.stateNode}if(!k)throw Error(r(147,h));var F=k,V=""+h;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===V?p.ref:(p=function(ae){var we=F.refs;ae===null?delete we[V]:we[V]=ae},p._stringRef=V,p)}if(typeof h!="string")throw Error(r(284));if(!w._owner)throw Error(r(290,h))}return h}function Er(h,p){throw h=Object.prototype.toString.call(p),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h))}function oi(h){var p=h._init;return p(h._payload)}function Ur(h){function p(Fe,Le){if(h){var Be=Fe.deletions;Be===null?(Fe.deletions=[Le],Fe.flags|=16):Be.push(Le)}}function w(Fe,Le){if(!h)return null;for(;Le!==null;)p(Fe,Le),Le=Le.sibling;return null}function k(Fe,Le){for(Fe=new Map;Le!==null;)Le.key!==null?Fe.set(Le.key,Le):Fe.set(Le.index,Le),Le=Le.sibling;return Fe}function F(Fe,Le){return Fe=$d(Fe,Le),Fe.index=0,Fe.sibling=null,Fe}function V(Fe,Le,Be){return Fe.index=Be,h?(Be=Fe.alternate,Be!==null?(Be=Be.index,Be<Le?(Fe.flags|=2,Le):Be):(Fe.flags|=2,Le)):(Fe.flags|=1048576,Le)}function ae(Fe){return h&&Fe.alternate===null&&(Fe.flags|=2),Fe}function we(Fe,Le,Be,pt){return Le===null||Le.tag!==6?(Le=uN(Be,Fe.mode,pt),Le.return=Fe,Le):(Le=F(Le,Be),Le.return=Fe,Le)}function Pe(Fe,Le,Be,pt){var Mt=Be.type;return Mt===O?it(Fe,Le,Be.props.children,pt,Be.key):Le!==null&&(Le.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===X&&oi(Mt)===Le.type)?(pt=F(Le,Be.props),pt.ref=tn(Fe,Le,Be),pt.return=Fe,pt):(pt=Xy(Be.type,Be.key,Be.props,null,Fe.mode,pt),pt.ref=tn(Fe,Le,Be),pt.return=Fe,pt)}function $e(Fe,Le,Be,pt){return Le===null||Le.tag!==4||Le.stateNode.containerInfo!==Be.containerInfo||Le.stateNode.implementation!==Be.implementation?(Le=dN(Be,Fe.mode,pt),Le.return=Fe,Le):(Le=F(Le,Be.children||[]),Le.return=Fe,Le)}function it(Fe,Le,Be,pt,Mt){return Le===null||Le.tag!==7?(Le=Af(Be,Fe.mode,pt,Mt),Le.return=Fe,Le):(Le=F(Le,Be),Le.return=Fe,Le)}function ct(Fe,Le,Be){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return Le=uN(""+Le,Fe.mode,Be),Le.return=Fe,Le;if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case P:return Be=Xy(Le.type,Le.key,Le.props,null,Fe.mode,Be),Be.ref=tn(Fe,null,Le),Be.return=Fe,Be;case L:return Le=dN(Le,Fe.mode,Be),Le.return=Fe,Le;case X:var pt=Le._init;return ct(Fe,pt(Le._payload),Be)}if(dt(Le)||te(Le))return Le=Af(Le,Fe.mode,Be,null),Le.return=Fe,Le;Er(Fe,Le)}return null}function rt(Fe,Le,Be,pt){var Mt=Le!==null?Le.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number")return Mt!==null?null:we(Fe,Le,""+Be,pt);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case P:return Be.key===Mt?Pe(Fe,Le,Be,pt):null;case L:return Be.key===Mt?$e(Fe,Le,Be,pt):null;case X:return Mt=Be._init,rt(Fe,Le,Mt(Be._payload),pt)}if(dt(Be)||te(Be))return Mt!==null?null:it(Fe,Le,Be,pt,null);Er(Fe,Be)}return null}function St(Fe,Le,Be,pt,Mt){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return Fe=Fe.get(Be)||null,we(Le,Fe,""+pt,Mt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case P:return Fe=Fe.get(pt.key===null?Be:pt.key)||null,Pe(Le,Fe,pt,Mt);case L:return Fe=Fe.get(pt.key===null?Be:pt.key)||null,$e(Le,Fe,pt,Mt);case X:var Wt=pt._init;return St(Fe,Le,Be,Wt(pt._payload),Mt)}if(dt(pt)||te(pt))return Fe=Fe.get(Be)||null,it(Le,Fe,pt,Mt,null);Er(Le,pt)}return null}function Tt(Fe,Le,Be,pt){for(var Mt=null,Wt=null,Kt=Le,nn=Le=0,Ys=null;Kt!==null&&nn<Be.length;nn++){Kt.index>nn?(Ys=Kt,Kt=null):Ys=Kt.sibling;var Wn=rt(Fe,Kt,Be[nn],pt);if(Wn===null){Kt===null&&(Kt=Ys);break}h&&Kt&&Wn.alternate===null&&p(Fe,Kt),Le=V(Wn,Le,nn),Wt===null?Mt=Wn:Wt.sibling=Wn,Wt=Wn,Kt=Ys}if(nn===Be.length)return w(Fe,Kt),We&&Re(Fe,nn),Mt;if(Kt===null){for(;nn<Be.length;nn++)Kt=ct(Fe,Be[nn],pt),Kt!==null&&(Le=V(Kt,Le,nn),Wt===null?Mt=Kt:Wt.sibling=Kt,Wt=Kt);return We&&Re(Fe,nn),Mt}for(Kt=k(Fe,Kt);nn<Be.length;nn++)Ys=St(Kt,Fe,nn,Be[nn],pt),Ys!==null&&(h&&Ys.alternate!==null&&Kt.delete(Ys.key===null?nn:Ys.key),Le=V(Ys,Le,nn),Wt===null?Mt=Ys:Wt.sibling=Ys,Wt=Ys);return h&&Kt.forEach(function(qd){return p(Fe,qd)}),We&&Re(Fe,nn),Mt}function It(Fe,Le,Be,pt){var Mt=te(Be);if(typeof Mt!="function")throw Error(r(150));if(Be=Mt.call(Be),Be==null)throw Error(r(151));for(var Wt=Mt=null,Kt=Le,nn=Le=0,Ys=null,Wn=Be.next();Kt!==null&&!Wn.done;nn++,Wn=Be.next()){Kt.index>nn?(Ys=Kt,Kt=null):Ys=Kt.sibling;var qd=rt(Fe,Kt,Wn.value,pt);if(qd===null){Kt===null&&(Kt=Ys);break}h&&Kt&&qd.alternate===null&&p(Fe,Kt),Le=V(qd,Le,nn),Wt===null?Mt=qd:Wt.sibling=qd,Wt=qd,Kt=Ys}if(Wn.done)return w(Fe,Kt),We&&Re(Fe,nn),Mt;if(Kt===null){for(;!Wn.done;nn++,Wn=Be.next())Wn=ct(Fe,Wn.value,pt),Wn!==null&&(Le=V(Wn,Le,nn),Wt===null?Mt=Wn:Wt.sibling=Wn,Wt=Wn);return We&&Re(Fe,nn),Mt}for(Kt=k(Fe,Kt);!Wn.done;nn++,Wn=Be.next())Wn=St(Kt,Fe,nn,Wn.value,pt),Wn!==null&&(h&&Wn.alternate!==null&&Kt.delete(Wn.key===null?nn:Wn.key),Le=V(Wn,Le,nn),Wt===null?Mt=Wn:Wt.sibling=Wn,Wt=Wn);return h&&Kt.forEach(function(JJ){return p(Fe,JJ)}),We&&Re(Fe,nn),Mt}function os(Fe,Le,Be,pt){if(typeof Be=="object"&&Be!==null&&Be.type===O&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case P:e:{for(var Mt=Be.key,Wt=Le;Wt!==null;){if(Wt.key===Mt){if(Mt=Be.type,Mt===O){if(Wt.tag===7){w(Fe,Wt.sibling),Le=F(Wt,Be.props.children),Le.return=Fe,Fe=Le;break e}}else if(Wt.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===X&&oi(Mt)===Wt.type){w(Fe,Wt.sibling),Le=F(Wt,Be.props),Le.ref=tn(Fe,Wt,Be),Le.return=Fe,Fe=Le;break e}w(Fe,Wt);break}else p(Fe,Wt);Wt=Wt.sibling}Be.type===O?(Le=Af(Be.props.children,Fe.mode,pt,Be.key),Le.return=Fe,Fe=Le):(pt=Xy(Be.type,Be.key,Be.props,null,Fe.mode,pt),pt.ref=tn(Fe,Le,Be),pt.return=Fe,Fe=pt)}return ae(Fe);case L:e:{for(Wt=Be.key;Le!==null;){if(Le.key===Wt)if(Le.tag===4&&Le.stateNode.containerInfo===Be.containerInfo&&Le.stateNode.implementation===Be.implementation){w(Fe,Le.sibling),Le=F(Le,Be.children||[]),Le.return=Fe,Fe=Le;break e}else{w(Fe,Le);break}else p(Fe,Le);Le=Le.sibling}Le=dN(Be,Fe.mode,pt),Le.return=Fe,Fe=Le}return ae(Fe);case X:return Wt=Be._init,os(Fe,Le,Wt(Be._payload),pt)}if(dt(Be))return Tt(Fe,Le,Be,pt);if(te(Be))return It(Fe,Le,Be,pt);Er(Fe,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"?(Be=""+Be,Le!==null&&Le.tag===6?(w(Fe,Le.sibling),Le=F(Le,Be),Le.return=Fe,Fe=Le):(w(Fe,Le),Le=uN(Be,Fe.mode,pt),Le.return=Fe,Fe=Le),ae(Fe)):w(Fe,Le)}return os}var ss=Ur(!0),Vn=Ur(!1),Ws=Ya(null),Ks=null,Tr=null,is=null;function Ls(){is=Tr=Ks=null}function Si(h){var p=Ws.current;Xn(Ws),h._currentValue=p}function wa(h,p,w){for(;h!==null;){var k=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,k!==null&&(k.childLanes|=p)):k!==null&&(k.childLanes&p)!==p&&(k.childLanes|=p),h===w)break;h=h.return}}function Or(h,p){Ks=h,is=Tr=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&p)!==0&&(Sa=!0),h.firstContext=null)}function Qr(h){var p=h._currentValue;if(is!==h)if(h={context:h,memoizedValue:p,next:null},Tr===null){if(Ks===null)throw Error(r(308));Tr=h,Ks.dependencies={lanes:0,firstContext:h}}else Tr=Tr.next=h;return p}var Ji=null;function nc(h){Ji===null?Ji=[h]:Ji.push(h)}function sl(h,p,w,k){var F=p.interleaved;return F===null?(w.next=w,nc(p)):(w.next=F.next,F.next=w),p.interleaved=w,Hn(h,k)}function Hn(h,p){h.lanes|=p;var w=h.alternate;for(w!==null&&(w.lanes|=p),w=h,h=h.return;h!==null;)h.childLanes|=p,w=h.alternate,w!==null&&(w.childLanes|=p),w=h,h=h.return;return w.tag===3?w.stateNode:null}var So=!1;function np(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P0(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function ja(h,p){return{eventTime:h,lane:p,tag:0,payload:null,callback:null,next:null}}function Na(h,p,w){var k=h.updateQueue;if(k===null)return null;if(k=k.shared,(qn&2)!==0){var F=k.pending;return F===null?p.next=p:(p.next=F.next,F.next=p),k.pending=p,Hn(h,w)}return F=k.interleaved,F===null?(p.next=p,nc(k)):(p.next=F.next,F.next=p),k.interleaved=p,Hn(h,w)}function hu(h,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var k=p.lanes;k&=h.pendingLanes,w|=k,p.lanes=w,td(h,w)}}function _a(h,p){var w=h.updateQueue,k=h.alternate;if(k!==null&&(k=k.updateQueue,w===k)){var F=null,V=null;if(w=w.firstBaseUpdate,w!==null){do{var ae={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};V===null?F=V=ae:V=V.next=ae,w=w.next}while(w!==null);V===null?F=V=p:V=V.next=p}else F=V=p;w={baseState:k.baseState,firstBaseUpdate:F,lastBaseUpdate:V,shared:k.shared,effects:k.effects},h.updateQueue=w;return}h=w.lastBaseUpdate,h===null?w.firstBaseUpdate=p:h.next=p,w.lastBaseUpdate=p}function il(h,p,w,k){var F=h.updateQueue;So=!1;var V=F.firstBaseUpdate,ae=F.lastBaseUpdate,we=F.shared.pending;if(we!==null){F.shared.pending=null;var Pe=we,$e=Pe.next;Pe.next=null,ae===null?V=$e:ae.next=$e,ae=Pe;var it=h.alternate;it!==null&&(it=it.updateQueue,we=it.lastBaseUpdate,we!==ae&&(we===null?it.firstBaseUpdate=$e:we.next=$e,it.lastBaseUpdate=Pe))}if(V!==null){var ct=F.baseState;ae=0,it=$e=Pe=null,we=V;do{var rt=we.lane,St=we.eventTime;if((k&rt)===rt){it!==null&&(it=it.next={eventTime:St,lane:0,tag:we.tag,payload:we.payload,callback:we.callback,next:null});e:{var Tt=h,It=we;switch(rt=p,St=w,It.tag){case 1:if(Tt=It.payload,typeof Tt=="function"){ct=Tt.call(St,ct,rt);break e}ct=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=It.payload,rt=typeof Tt=="function"?Tt.call(St,ct,rt):Tt,rt==null)break e;ct=le({},ct,rt);break e;case 2:So=!0}}we.callback!==null&&we.lane!==0&&(h.flags|=64,rt=F.effects,rt===null?F.effects=[we]:rt.push(we))}else St={eventTime:St,lane:rt,tag:we.tag,payload:we.payload,callback:we.callback,next:null},it===null?($e=it=St,Pe=ct):it=it.next=St,ae|=rt;if(we=we.next,we===null){if(we=F.shared.pending,we===null)break;rt=we,we=rt.next,rt.next=null,F.lastBaseUpdate=rt,F.shared.pending=null}}while(!0);if(it===null&&(Pe=ct),F.baseState=Pe,F.firstBaseUpdate=$e,F.lastBaseUpdate=it,p=F.shared.interleaved,p!==null){F=p;do ae|=F.lane,F=F.next;while(F!==p)}else V===null&&(F.shared.lanes=0);_f|=ae,h.lanes=ae,h.memoizedState=ct}}function fu(h,p,w){if(h=p.effects,p.effects=null,h!==null)for(p=0;p<h.length;p++){var k=h[p],F=k.callback;if(F!==null){if(k.callback=null,k=w,typeof F!="function")throw Error(r(191,F));F.call(k)}}}var kd={},Zi=Ya(kd),Ed=Ya(kd),rc=Ya(kd);function al(h){if(h===kd)throw Error(r(174));return h}function Td(h,p){switch(tr(rc,p),tr(Ed,h),tr(Zi,kd),h=p.nodeType,h){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:yn(null,"");break;default:h=h===8?p.parentNode:p,p=h.namespaceURI||null,h=h.tagName,p=yn(p,h)}Xn(Zi),tr(Zi,p)}function Co(){Xn(Zi),Xn(Ed),Xn(rc)}function Oy(h){al(rc.current);var p=al(Zi.current),w=yn(p,h.type);p!==w&&(tr(Ed,h),tr(Zi,w))}function A0(h){Ed.current===h&&(Xn(Zi),Xn(Ed))}var yr=Ya(0);function Qa(h){for(var p=h;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var k0=[];function E0(){for(var h=0;h<k0.length;h++)k0[h]._workInProgressVersionPrimary=null;k0.length=0}var rp=A.ReactCurrentDispatcher,sp=A.ReactCurrentBatchConfig,Po=0,_r=null,Xr=null,Vr=null,Od=!1,ol=!1,Ld=0,Ij=0;function as(){throw Error(r(321))}function ip(h,p){if(p===null)return!1;for(var w=0;w<p.length&&w<h.length;w++)if(!$n(h[w],p[w]))return!1;return!0}function wf(h,p,w,k,F,V){if(Po=V,_r=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,rp.current=h===null||h.memoizedState===null?_J:SJ,h=w(k,F),ol){V=0;do{if(ol=!1,Ld=0,25<=V)throw Error(r(301));V+=1,Vr=Xr=null,p.updateQueue=null,rp.current=CJ,h=w(k,F)}while(ol)}if(rp.current=My,p=Xr!==null&&Xr.next!==null,Po=0,Vr=Xr=_r=null,Od=!1,p)throw Error(r(300));return h}function Ao(){var h=Ld!==0;return Ld=0,h}function Xa(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?_r.memoizedState=Vr=h:Vr=Vr.next=h,Vr}function ea(){if(Xr===null){var h=_r.alternate;h=h!==null?h.memoizedState:null}else h=Xr.next;var p=Vr===null?_r.memoizedState:Vr.next;if(p!==null)Vr=p,Xr=h;else{if(h===null)throw Error(r(310));Xr=h,h={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},Vr===null?_r.memoizedState=Vr=h:Vr=Vr.next=h}return Vr}function jf(h,p){return typeof p=="function"?p(h):p}function ap(h){var p=ea(),w=p.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=h;var k=Xr,F=k.baseQueue,V=w.pending;if(V!==null){if(F!==null){var ae=F.next;F.next=V.next,V.next=ae}k.baseQueue=F=V,w.pending=null}if(F!==null){V=F.next,k=k.baseState;var we=ae=null,Pe=null,$e=V;do{var it=$e.lane;if((Po&it)===it)Pe!==null&&(Pe=Pe.next={lane:0,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null}),k=$e.hasEagerState?$e.eagerState:h(k,$e.action);else{var ct={lane:it,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null};Pe===null?(we=Pe=ct,ae=k):Pe=Pe.next=ct,_r.lanes|=it,_f|=it}$e=$e.next}while($e!==null&&$e!==V);Pe===null?ae=k:Pe.next=we,$n(k,p.memoizedState)||(Sa=!0),p.memoizedState=k,p.baseState=ae,p.baseQueue=Pe,w.lastRenderedState=k}if(h=w.interleaved,h!==null){F=h;do V=F.lane,_r.lanes|=V,_f|=V,F=F.next;while(F!==h)}else F===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function sc(h){var p=ea(),w=p.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=h;var k=w.dispatch,F=w.pending,V=p.memoizedState;if(F!==null){w.pending=null;var ae=F=F.next;do V=h(V,ae.action),ae=ae.next;while(ae!==F);$n(V,p.memoizedState)||(Sa=!0),p.memoizedState=V,p.baseQueue===null&&(p.baseState=V),w.lastRenderedState=V}return[V,k]}function Ly(){}function T0(h,p){var w=_r,k=ea(),F=p(),V=!$n(k.memoizedState,F);if(V&&(k.memoizedState=F,Sa=!0),k=k.queue,cp(Dy.bind(null,w,k,h),[h]),k.getSnapshot!==p||V||Vr!==null&&Vr.memoizedState.tag&1){if(w.flags|=2048,ta(9,O0.bind(null,w,k,F,p),void 0,null),Gs===null)throw Error(r(349));(Po&30)!==0||Ry(w,p,F)}return F}function Ry(h,p,w){h.flags|=16384,h={getSnapshot:p,value:w},p=_r.updateQueue,p===null?(p={lastEffect:null,stores:null},_r.updateQueue=p,p.stores=[h]):(w=p.stores,w===null?p.stores=[h]:w.push(h))}function O0(h,p,w,k){p.value=w,p.getSnapshot=k,Rd(p)&&op(h)}function Dy(h,p,w){return w(function(){Rd(p)&&op(h)})}function Rd(h){var p=h.getSnapshot;h=h.value;try{var w=p();return!$n(h,w)}catch{return!0}}function op(h){var p=Hn(h,1);p!==null&&hl(p,h,1,-1)}function Nf(h){var p=Xa();return typeof h=="function"&&(h=h()),p.memoizedState=p.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jf,lastRenderedState:h},p.queue=h,h=h.dispatch=NJ.bind(null,_r,h),[p.memoizedState,h]}function ta(h,p,w,k){return h={tag:h,create:p,destroy:w,deps:k,next:null},p=_r.updateQueue,p===null?(p={lastEffect:null,stores:null},_r.updateQueue=p,p.lastEffect=h.next=h):(w=p.lastEffect,w===null?p.lastEffect=h.next=h:(k=w.next,w.next=h,h.next=k,p.lastEffect=h)),h}function ll(){return ea().memoizedState}function Ja(h,p,w,k){var F=Xa();_r.flags|=h,F.memoizedState=ta(1|p,w,void 0,k===void 0?null:k)}function mu(h,p,w,k){var F=ea();k=k===void 0?null:k;var V=void 0;if(Xr!==null){var ae=Xr.memoizedState;if(V=ae.destroy,k!==null&&ip(k,ae.deps)){F.memoizedState=ta(p,w,V,k);return}}_r.flags|=h,F.memoizedState=ta(1|p,w,V,k)}function lp(h,p){return Ja(8390656,8,h,p)}function cp(h,p){return mu(2048,8,h,p)}function Iy(h,p){return mu(4,2,h,p)}function up(h,p){return mu(4,4,h,p)}function dp(h,p){if(typeof p=="function")return h=h(),p(h),function(){p(null)};if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function BT(h,p,w){return w=w!=null?w.concat([h]):null,mu(4,4,dp.bind(null,p,h),w)}function Mj(){}function $T(h,p){var w=ea();p=p===void 0?null:p;var k=w.memoizedState;return k!==null&&p!==null&&ip(p,k[1])?k[0]:(w.memoizedState=[h,p],h)}function qT(h,p){var w=ea();p=p===void 0?null:p;var k=w.memoizedState;return k!==null&&p!==null&&ip(p,k[1])?k[0]:(h=h(),w.memoizedState=[h,p],h)}function zT(h,p,w){return(Po&21)===0?(h.baseState&&(h.baseState=!1,Sa=!0),h.memoizedState=w):($n(w,p)||(w=Zh(),_r.lanes|=w,_f|=w,h.baseState=!0),p)}function wJ(h,p){var w=Bn;Bn=w!==0&&4>w?w:4,h(!0);var k=sp.transition;sp.transition={};try{h(!1),p()}finally{Bn=w,sp.transition=k}}function UT(){return ea().memoizedState}function jJ(h,p,w){var k=Fd(h);if(w={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null},VT(h))HT(p,w);else if(w=sl(h,p,w,k),w!==null){var F=ra();hl(w,h,k,F),WT(w,p,k)}}function NJ(h,p,w){var k=Fd(h),F={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null};if(VT(h))HT(p,F);else{var V=h.alternate;if(h.lanes===0&&(V===null||V.lanes===0)&&(V=p.lastRenderedReducer,V!==null))try{var ae=p.lastRenderedState,we=V(ae,w);if(F.hasEagerState=!0,F.eagerState=we,$n(we,ae)){var Pe=p.interleaved;Pe===null?(F.next=F,nc(p)):(F.next=Pe.next,Pe.next=F),p.interleaved=F;return}}catch{}finally{}w=sl(h,p,F,k),w!==null&&(F=ra(),hl(w,h,k,F),WT(w,p,k))}}function VT(h){var p=h.alternate;return h===_r||p!==null&&p===_r}function HT(h,p){ol=Od=!0;var w=h.pending;w===null?p.next=p:(p.next=w.next,w.next=p),h.pending=p}function WT(h,p,w){if((w&4194240)!==0){var k=p.lanes;k&=h.pendingLanes,w|=k,p.lanes=w,td(h,w)}}var My={readContext:Qr,useCallback:as,useContext:as,useEffect:as,useImperativeHandle:as,useInsertionEffect:as,useLayoutEffect:as,useMemo:as,useReducer:as,useRef:as,useState:as,useDebugValue:as,useDeferredValue:as,useTransition:as,useMutableSource:as,useSyncExternalStore:as,useId:as,unstable_isNewReconciler:!1},_J={readContext:Qr,useCallback:function(h,p){return Xa().memoizedState=[h,p===void 0?null:p],h},useContext:Qr,useEffect:lp,useImperativeHandle:function(h,p,w){return w=w!=null?w.concat([h]):null,Ja(4194308,4,dp.bind(null,p,h),w)},useLayoutEffect:function(h,p){return Ja(4194308,4,h,p)},useInsertionEffect:function(h,p){return Ja(4,2,h,p)},useMemo:function(h,p){var w=Xa();return p=p===void 0?null:p,h=h(),w.memoizedState=[h,p],h},useReducer:function(h,p,w){var k=Xa();return p=w!==void 0?w(p):p,k.memoizedState=k.baseState=p,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:p},k.queue=h,h=h.dispatch=jJ.bind(null,_r,h),[k.memoizedState,h]},useRef:function(h){var p=Xa();return h={current:h},p.memoizedState=h},useState:Nf,useDebugValue:Mj,useDeferredValue:function(h){return Xa().memoizedState=h},useTransition:function(){var h=Nf(!1),p=h[0];return h=wJ.bind(null,h[1]),Xa().memoizedState=h,[p,h]},useMutableSource:function(){},useSyncExternalStore:function(h,p,w){var k=_r,F=Xa();if(We){if(w===void 0)throw Error(r(407));w=w()}else{if(w=p(),Gs===null)throw Error(r(349));(Po&30)!==0||Ry(k,p,w)}F.memoizedState=w;var V={value:w,getSnapshot:p};return F.queue=V,lp(Dy.bind(null,k,V,h),[h]),k.flags|=2048,ta(9,O0.bind(null,k,V,w,p),void 0,null),w},useId:function(){var h=Xa(),p=Gs.identifierPrefix;if(We){var w=Me,k=Ie;w=(k&~(1<<32-Ki(k)-1)).toString(32)+w,p=":"+p+"R"+w,w=Ld++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=Ij++,p=":"+p+"r"+w.toString(32)+":";return h.memoizedState=p},unstable_isNewReconciler:!1},SJ={readContext:Qr,useCallback:$T,useContext:Qr,useEffect:cp,useImperativeHandle:BT,useInsertionEffect:Iy,useLayoutEffect:up,useMemo:qT,useReducer:ap,useRef:ll,useState:function(){return ap(jf)},useDebugValue:Mj,useDeferredValue:function(h){var p=ea();return zT(p,Xr.memoizedState,h)},useTransition:function(){var h=ap(jf)[0],p=ea().memoizedState;return[h,p]},useMutableSource:Ly,useSyncExternalStore:T0,useId:UT,unstable_isNewReconciler:!1},CJ={readContext:Qr,useCallback:$T,useContext:Qr,useEffect:cp,useImperativeHandle:BT,useInsertionEffect:Iy,useLayoutEffect:up,useMemo:qT,useReducer:sc,useRef:ll,useState:function(){return sc(jf)},useDebugValue:Mj,useDeferredValue:function(h){var p=ea();return Xr===null?p.memoizedState=h:zT(p,Xr.memoizedState,h)},useTransition:function(){var h=sc(jf)[0],p=ea().memoizedState;return[h,p]},useMutableSource:Ly,useSyncExternalStore:T0,useId:UT,unstable_isNewReconciler:!1};function cl(h,p){if(h&&h.defaultProps){p=le({},p),h=h.defaultProps;for(var w in h)p[w]===void 0&&(p[w]=h[w]);return p}return p}function Fj(h,p,w,k){p=h.memoizedState,w=w(k,p),w=w==null?p:le({},p,w),h.memoizedState=w,h.lanes===0&&(h.updateQueue.baseState=w)}var Fy={isMounted:function(h){return(h=h._reactInternals)?Es(h)===h:!1},enqueueSetState:function(h,p,w){h=h._reactInternals;var k=ra(),F=Fd(h),V=ja(k,F);V.payload=p,w!=null&&(V.callback=w),p=Na(h,V,F),p!==null&&(hl(p,h,F,k),hu(p,h,F))},enqueueReplaceState:function(h,p,w){h=h._reactInternals;var k=ra(),F=Fd(h),V=ja(k,F);V.tag=1,V.payload=p,w!=null&&(V.callback=w),p=Na(h,V,F),p!==null&&(hl(p,h,F,k),hu(p,h,F))},enqueueForceUpdate:function(h,p){h=h._reactInternals;var w=ra(),k=Fd(h),F=ja(w,k);F.tag=2,p!=null&&(F.callback=p),p=Na(h,F,k),p!==null&&(hl(p,h,k,w),hu(p,h,k))}};function KT(h,p,w,k,F,V,ae){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(k,V,ae):p.prototype&&p.prototype.isPureReactComponent?!Jo(w,k)||!Jo(F,V):!0}function GT(h,p,w){var k=!1,F=tc,V=p.contextType;return typeof V=="object"&&V!==null?V=Qr(V):(F=_i(p)?uu:Os.current,k=p.contextTypes,V=(k=k!=null)?Ad(h,F):tc),p=new p(w,V),h.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Fy,h.stateNode=p,p._reactInternals=h,k&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=F,h.__reactInternalMemoizedMaskedChildContext=V),p}function YT(h,p,w,k){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,k),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,k),p.state!==h&&Fy.enqueueReplaceState(p,p.state,null)}function Bj(h,p,w,k){var F=h.stateNode;F.props=w,F.state=h.memoizedState,F.refs={},np(h);var V=p.contextType;typeof V=="object"&&V!==null?F.context=Qr(V):(V=_i(p)?uu:Os.current,F.context=Ad(h,V)),F.state=h.memoizedState,V=p.getDerivedStateFromProps,typeof V=="function"&&(Fj(h,p,V,w),F.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(p=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),p!==F.state&&Fy.enqueueReplaceState(F,F.state,null),il(h,w,F,k),F.state=h.memoizedState),typeof F.componentDidMount=="function"&&(h.flags|=4194308)}function hp(h,p){try{var w="",k=p;do w+=ee(k),k=k.return;while(k);var F=w}catch(V){F=`
Error generating stack: `+V.message+`
`+V.stack}return{value:h,source:p,stack:F,digest:null}}function $j(h,p,w){return{value:h,source:null,stack:w??null,digest:p??null}}function qj(h,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var PJ=typeof WeakMap=="function"?WeakMap:Map;function QT(h,p,w){w=ja(-1,w),w.tag=3,w.payload={element:null};var k=p.value;return w.callback=function(){Hy||(Hy=!0,nN=k),qj(h,p)},w}function XT(h,p,w){w=ja(-1,w),w.tag=3;var k=h.type.getDerivedStateFromError;if(typeof k=="function"){var F=p.value;w.payload=function(){return k(F)},w.callback=function(){qj(h,p)}}var V=h.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&(w.callback=function(){qj(h,p),typeof k!="function"&&(Id===null?Id=new Set([this]):Id.add(this));var ae=p.stack;this.componentDidCatch(p.value,{componentStack:ae!==null?ae:""})}),w}function JT(h,p,w){var k=h.pingCache;if(k===null){k=h.pingCache=new PJ;var F=new Set;k.set(p,F)}else F=k.get(p),F===void 0&&(F=new Set,k.set(p,F));F.has(w)||(F.add(w),h=qJ.bind(null,h,p,w),p.then(h,h))}function ZT(h){do{var p;if((p=h.tag===13)&&(p=h.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return h;h=h.return}while(h!==null);return null}function e8(h,p,w,k,F){return(h.mode&1)===0?(h===p?h.flags|=65536:(h.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=ja(-1,1),p.tag=2,Na(w,p,1))),w.lanes|=1),h):(h.flags|=65536,h.lanes=F,h)}var AJ=A.ReactCurrentOwner,Sa=!1;function na(h,p,w,k){p.child=h===null?Vn(p,null,w,k):ss(p,h.child,w,k)}function t8(h,p,w,k,F){w=w.render;var V=p.ref;return Or(p,F),k=wf(h,p,w,k,V,F),w=Ao(),h!==null&&!Sa?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~F,pu(h,p,F)):(We&&w&&Ue(p),p.flags|=1,na(h,p,k,F),p.child)}function n8(h,p,w,k,F){if(h===null){var V=w.type;return typeof V=="function"&&!cN(V)&&V.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=V,r8(h,p,V,k,F)):(h=Xy(w.type,null,k,p,p.mode,F),h.ref=p.ref,h.return=p,p.child=h)}if(V=h.child,(h.lanes&F)===0){var ae=V.memoizedProps;if(w=w.compare,w=w!==null?w:Jo,w(ae,k)&&h.ref===p.ref)return pu(h,p,F)}return p.flags|=1,h=$d(V,k),h.ref=p.ref,h.return=p,p.child=h}function r8(h,p,w,k,F){if(h!==null){var V=h.memoizedProps;if(Jo(V,k)&&h.ref===p.ref)if(Sa=!1,p.pendingProps=k=V,(h.lanes&F)!==0)(h.flags&131072)!==0&&(Sa=!0);else return p.lanes=h.lanes,pu(h,p,F)}return zj(h,p,w,k,F)}function s8(h,p,w){var k=p.pendingProps,F=k.children,V=h!==null?h.memoizedState:null;if(k.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},tr(mp,Za),Za|=w;else{if((w&1073741824)===0)return h=V!==null?V.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:h,cachePool:null,transitions:null},p.updateQueue=null,tr(mp,Za),Za|=h,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=V!==null?V.baseLanes:w,tr(mp,Za),Za|=k}else V!==null?(k=V.baseLanes|w,p.memoizedState=null):k=w,tr(mp,Za),Za|=k;return na(h,p,F,w),p.child}function i8(h,p){var w=p.ref;(h===null&&w!==null||h!==null&&h.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function zj(h,p,w,k,F){var V=_i(w)?uu:Os.current;return V=Ad(p,V),Or(p,F),w=wf(h,p,w,k,V,F),k=Ao(),h!==null&&!Sa?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~F,pu(h,p,F)):(We&&k&&Ue(p),p.flags|=1,na(h,p,w,F),p.child)}function a8(h,p,w,k,F){if(_i(w)){var V=!0;du(p)}else V=!1;if(Or(p,F),p.stateNode===null)$y(h,p),GT(p,w,k),Bj(p,w,k,F),k=!0;else if(h===null){var ae=p.stateNode,we=p.memoizedProps;ae.props=we;var Pe=ae.context,$e=w.contextType;typeof $e=="object"&&$e!==null?$e=Qr($e):($e=_i(w)?uu:Os.current,$e=Ad(p,$e));var it=w.getDerivedStateFromProps,ct=typeof it=="function"||typeof ae.getSnapshotBeforeUpdate=="function";ct||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(we!==k||Pe!==$e)&&YT(p,ae,k,$e),So=!1;var rt=p.memoizedState;ae.state=rt,il(p,k,ae,F),Pe=p.memoizedState,we!==k||rt!==Pe||Ni.current||So?(typeof it=="function"&&(Fj(p,w,it,k),Pe=p.memoizedState),(we=So||KT(p,w,we,k,rt,Pe,$e))?(ct||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount()),typeof ae.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ae.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=k,p.memoizedState=Pe),ae.props=k,ae.state=Pe,ae.context=$e,k=we):(typeof ae.componentDidMount=="function"&&(p.flags|=4194308),k=!1)}else{ae=p.stateNode,P0(h,p),we=p.memoizedProps,$e=p.type===p.elementType?we:cl(p.type,we),ae.props=$e,ct=p.pendingProps,rt=ae.context,Pe=w.contextType,typeof Pe=="object"&&Pe!==null?Pe=Qr(Pe):(Pe=_i(w)?uu:Os.current,Pe=Ad(p,Pe));var St=w.getDerivedStateFromProps;(it=typeof St=="function"||typeof ae.getSnapshotBeforeUpdate=="function")||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(we!==ct||rt!==Pe)&&YT(p,ae,k,Pe),So=!1,rt=p.memoizedState,ae.state=rt,il(p,k,ae,F);var Tt=p.memoizedState;we!==ct||rt!==Tt||Ni.current||So?(typeof St=="function"&&(Fj(p,w,St,k),Tt=p.memoizedState),($e=So||KT(p,w,$e,k,rt,Tt,Pe)||!1)?(it||typeof ae.UNSAFE_componentWillUpdate!="function"&&typeof ae.componentWillUpdate!="function"||(typeof ae.componentWillUpdate=="function"&&ae.componentWillUpdate(k,Tt,Pe),typeof ae.UNSAFE_componentWillUpdate=="function"&&ae.UNSAFE_componentWillUpdate(k,Tt,Pe)),typeof ae.componentDidUpdate=="function"&&(p.flags|=4),typeof ae.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ae.componentDidUpdate!="function"||we===h.memoizedProps&&rt===h.memoizedState||(p.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||we===h.memoizedProps&&rt===h.memoizedState||(p.flags|=1024),p.memoizedProps=k,p.memoizedState=Tt),ae.props=k,ae.state=Tt,ae.context=Pe,k=$e):(typeof ae.componentDidUpdate!="function"||we===h.memoizedProps&&rt===h.memoizedState||(p.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||we===h.memoizedProps&&rt===h.memoizedState||(p.flags|=1024),k=!1)}return Uj(h,p,w,k,V,F)}function Uj(h,p,w,k,F,V){i8(h,p);var ae=(p.flags&128)!==0;if(!k&&!ae)return F&&Ty(p,w,!1),pu(h,p,V);k=p.stateNode,AJ.current=p;var we=ae&&typeof w.getDerivedStateFromError!="function"?null:k.render();return p.flags|=1,h!==null&&ae?(p.child=ss(p,h.child,null,V),p.child=ss(p,null,we,V)):na(h,p,we,V),p.memoizedState=k.state,F&&Ty(p,w,!0),p.child}function o8(h){var p=h.stateNode;p.pendingContext?Ey(h,p.pendingContext,p.pendingContext!==p.context):p.context&&Ey(h,p.context,!1),Td(h,p.containerInfo)}function l8(h,p,w,k,F){return dn(),Jn(F),p.flags|=256,na(h,p,w,k),p.child}var Vj={dehydrated:null,treeContext:null,retryLane:0};function Hj(h){return{baseLanes:h,cachePool:null,transitions:null}}function c8(h,p,w){var k=p.pendingProps,F=yr.current,V=!1,ae=(p.flags&128)!==0,we;if((we=ae)||(we=h!==null&&h.memoizedState===null?!1:(F&2)!==0),we?(V=!0,p.flags&=-129):(h===null||h.memoizedState!==null)&&(F|=1),tr(yr,F&1),h===null)return wt(p),h=p.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((p.mode&1)===0?p.lanes=1:h.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(ae=k.children,h=k.fallback,V?(k=p.mode,V=p.child,ae={mode:"hidden",children:ae},(k&1)===0&&V!==null?(V.childLanes=0,V.pendingProps=ae):V=Jy(ae,k,0,null),h=Af(h,k,w,null),V.return=p,h.return=p,V.sibling=h,p.child=V,p.child.memoizedState=Hj(w),p.memoizedState=Vj,h):Wj(p,ae));if(F=h.memoizedState,F!==null&&(we=F.dehydrated,we!==null))return kJ(h,p,ae,k,we,F,w);if(V){V=k.fallback,ae=p.mode,F=h.child,we=F.sibling;var Pe={mode:"hidden",children:k.children};return(ae&1)===0&&p.child!==F?(k=p.child,k.childLanes=0,k.pendingProps=Pe,p.deletions=null):(k=$d(F,Pe),k.subtreeFlags=F.subtreeFlags&14680064),we!==null?V=$d(we,V):(V=Af(V,ae,w,null),V.flags|=2),V.return=p,k.return=p,k.sibling=V,p.child=k,k=V,V=p.child,ae=h.child.memoizedState,ae=ae===null?Hj(w):{baseLanes:ae.baseLanes|w,cachePool:null,transitions:ae.transitions},V.memoizedState=ae,V.childLanes=h.childLanes&~w,p.memoizedState=Vj,k}return V=h.child,h=V.sibling,k=$d(V,{mode:"visible",children:k.children}),(p.mode&1)===0&&(k.lanes=w),k.return=p,k.sibling=null,h!==null&&(w=p.deletions,w===null?(p.deletions=[h],p.flags|=16):w.push(h)),p.child=k,p.memoizedState=null,k}function Wj(h,p){return p=Jy({mode:"visible",children:p},h.mode,0,null),p.return=h,h.child=p}function By(h,p,w,k){return k!==null&&Jn(k),ss(p,h.child,null,w),h=Wj(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function kJ(h,p,w,k,F,V,ae){if(w)return p.flags&256?(p.flags&=-257,k=$j(Error(r(422))),By(h,p,ae,k)):p.memoizedState!==null?(p.child=h.child,p.flags|=128,null):(V=k.fallback,F=p.mode,k=Jy({mode:"visible",children:k.children},F,0,null),V=Af(V,F,ae,null),V.flags|=2,k.return=p,V.return=p,k.sibling=V,p.child=k,(p.mode&1)!==0&&ss(p,h.child,null,ae),p.child.memoizedState=Hj(ae),p.memoizedState=Vj,V);if((p.mode&1)===0)return By(h,p,ae,null);if(F.data==="$!"){if(k=F.nextSibling&&F.nextSibling.dataset,k)var we=k.dgst;return k=we,V=Error(r(419)),k=$j(V,k,void 0),By(h,p,ae,k)}if(we=(ae&h.childLanes)!==0,Sa||we){if(k=Gs,k!==null){switch(ae&-ae){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}F=(F&(k.suspendedLanes|ae))!==0?0:F,F!==0&&F!==V.retryLane&&(V.retryLane=F,Hn(h,F),hl(k,h,F,-1))}return lN(),k=$j(Error(r(421))),By(h,p,ae,k)}return F.data==="$?"?(p.flags|=128,p.child=h.child,p=zJ.bind(null,h),F._reactRetry=p,null):(h=V.treeContext,Ke=ai(F.nextSibling),ke=p,We=!0,Qe=null,h!==null&&(fe[ge++]=Ie,fe[ge++]=Me,fe[ge++]=Se,Ie=h.id,Me=h.overflow,Se=p),p=Wj(p,k.children),p.flags|=4096,p)}function u8(h,p,w){h.lanes|=p;var k=h.alternate;k!==null&&(k.lanes|=p),wa(h.return,p,w)}function Kj(h,p,w,k,F){var V=h.memoizedState;V===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:k,tail:w,tailMode:F}:(V.isBackwards=p,V.rendering=null,V.renderingStartTime=0,V.last=k,V.tail=w,V.tailMode=F)}function d8(h,p,w){var k=p.pendingProps,F=k.revealOrder,V=k.tail;if(na(h,p,k.children,w),k=yr.current,(k&2)!==0)k=k&1|2,p.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&u8(h,w,p);else if(h.tag===19)u8(h,w,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}k&=1}if(tr(yr,k),(p.mode&1)===0)p.memoizedState=null;else switch(F){case"forwards":for(w=p.child,F=null;w!==null;)h=w.alternate,h!==null&&Qa(h)===null&&(F=w),w=w.sibling;w=F,w===null?(F=p.child,p.child=null):(F=w.sibling,w.sibling=null),Kj(p,!1,F,w,V);break;case"backwards":for(w=null,F=p.child,p.child=null;F!==null;){if(h=F.alternate,h!==null&&Qa(h)===null){p.child=F;break}h=F.sibling,F.sibling=w,w=F,F=h}Kj(p,!0,w,null,V);break;case"together":Kj(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function $y(h,p){(p.mode&1)===0&&h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2)}function pu(h,p,w){if(h!==null&&(p.dependencies=h.dependencies),_f|=p.lanes,(w&p.childLanes)===0)return null;if(h!==null&&p.child!==h.child)throw Error(r(153));if(p.child!==null){for(h=p.child,w=$d(h,h.pendingProps),p.child=w,w.return=p;h.sibling!==null;)h=h.sibling,w=w.sibling=$d(h,h.pendingProps),w.return=p;w.sibling=null}return p.child}function EJ(h,p,w){switch(p.tag){case 3:o8(p),dn();break;case 5:Oy(p);break;case 1:_i(p.type)&&du(p);break;case 4:Td(p,p.stateNode.containerInfo);break;case 10:var k=p.type._context,F=p.memoizedProps.value;tr(Ws,k._currentValue),k._currentValue=F;break;case 13:if(k=p.memoizedState,k!==null)return k.dehydrated!==null?(tr(yr,yr.current&1),p.flags|=128,null):(w&p.child.childLanes)!==0?c8(h,p,w):(tr(yr,yr.current&1),h=pu(h,p,w),h!==null?h.sibling:null);tr(yr,yr.current&1);break;case 19:if(k=(w&p.childLanes)!==0,(h.flags&128)!==0){if(k)return d8(h,p,w);p.flags|=128}if(F=p.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),tr(yr,yr.current),k)break;return null;case 22:case 23:return p.lanes=0,s8(h,p,w)}return pu(h,p,w)}var h8,Gj,f8,m8;h8=function(h,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)h.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Gj=function(){},f8=function(h,p,w,k){var F=h.memoizedProps;if(F!==k){h=p.stateNode,al(Zi.current);var V=null;switch(w){case"input":F=ze(h,F),k=ze(h,k),V=[];break;case"select":F=le({},F,{value:void 0}),k=le({},k,{value:void 0}),V=[];break;case"textarea":F=st(h,F),k=st(h,k),V=[];break;default:typeof F.onClick!="function"&&typeof k.onClick=="function"&&(h.onclick=Sd)}Gn(w,k);var ae;w=null;for($e in F)if(!k.hasOwnProperty($e)&&F.hasOwnProperty($e)&&F[$e]!=null)if($e==="style"){var we=F[$e];for(ae in we)we.hasOwnProperty(ae)&&(w||(w={}),w[ae]="")}else $e!=="dangerouslySetInnerHTML"&&$e!=="children"&&$e!=="suppressContentEditableWarning"&&$e!=="suppressHydrationWarning"&&$e!=="autoFocus"&&(a.hasOwnProperty($e)?V||(V=[]):(V=V||[]).push($e,null));for($e in k){var Pe=k[$e];if(we=F!=null?F[$e]:void 0,k.hasOwnProperty($e)&&Pe!==we&&(Pe!=null||we!=null))if($e==="style")if(we){for(ae in we)!we.hasOwnProperty(ae)||Pe&&Pe.hasOwnProperty(ae)||(w||(w={}),w[ae]="");for(ae in Pe)Pe.hasOwnProperty(ae)&&we[ae]!==Pe[ae]&&(w||(w={}),w[ae]=Pe[ae])}else w||(V||(V=[]),V.push($e,w)),w=Pe;else $e==="dangerouslySetInnerHTML"?(Pe=Pe?Pe.__html:void 0,we=we?we.__html:void 0,Pe!=null&&we!==Pe&&(V=V||[]).push($e,Pe)):$e==="children"?typeof Pe!="string"&&typeof Pe!="number"||(V=V||[]).push($e,""+Pe):$e!=="suppressContentEditableWarning"&&$e!=="suppressHydrationWarning"&&(a.hasOwnProperty($e)?(Pe!=null&&$e==="onScroll"&&or("scroll",h),V||we===Pe||(V=[])):(V=V||[]).push($e,Pe))}w&&(V=V||[]).push("style",w);var $e=V;(p.updateQueue=$e)&&(p.flags|=4)}},m8=function(h,p,w,k){w!==k&&(p.flags|=4)};function L0(h,p){if(!We)switch(h.tailMode){case"hidden":p=h.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?h.tail=null:w.sibling=null;break;case"collapsed":w=h.tail;for(var k=null;w!==null;)w.alternate!==null&&(k=w),w=w.sibling;k===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:k.sibling=null}}function Ci(h){var p=h.alternate!==null&&h.alternate.child===h.child,w=0,k=0;if(p)for(var F=h.child;F!==null;)w|=F.lanes|F.childLanes,k|=F.subtreeFlags&14680064,k|=F.flags&14680064,F.return=h,F=F.sibling;else for(F=h.child;F!==null;)w|=F.lanes|F.childLanes,k|=F.subtreeFlags,k|=F.flags,F.return=h,F=F.sibling;return h.subtreeFlags|=k,h.childLanes=w,p}function TJ(h,p,w){var k=p.pendingProps;switch(Ae(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ci(p),null;case 1:return _i(p.type)&&tp(),Ci(p),null;case 3:return k=p.stateNode,Co(),Xn(Ni),Xn(Os),E0(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(h===null||h.child===null)&&(Mn(p)?p.flags|=4:h===null||h.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Qe!==null&&(iN(Qe),Qe=null))),Gj(h,p),Ci(p),null;case 5:A0(p);var F=al(rc.current);if(w=p.type,h!==null&&p.stateNode!=null)f8(h,p,w,k,F),h.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!k){if(p.stateNode===null)throw Error(r(166));return Ci(p),null}if(h=al(Zi.current),Mn(p)){k=p.stateNode,w=p.type;var V=p.memoizedProps;switch(k[_o]=p,k[Cd]=V,h=(p.mode&1)!==0,w){case"dialog":or("cancel",k),or("close",k);break;case"iframe":case"object":case"embed":or("load",k);break;case"video":case"audio":for(F=0;F<Zl.length;F++)or(Zl[F],k);break;case"source":or("error",k);break;case"img":case"image":case"link":or("error",k),or("load",k);break;case"details":or("toggle",k);break;case"input":Te(k,V),or("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!V.multiple},or("invalid",k);break;case"textarea":Ct(k,V),or("invalid",k)}Gn(w,V),F=null;for(var ae in V)if(V.hasOwnProperty(ae)){var we=V[ae];ae==="children"?typeof we=="string"?k.textContent!==we&&(V.suppressHydrationWarning!==!0&&ep(k.textContent,we,h),F=["children",we]):typeof we=="number"&&k.textContent!==""+we&&(V.suppressHydrationWarning!==!0&&ep(k.textContent,we,h),F=["children",""+we]):a.hasOwnProperty(ae)&&we!=null&&ae==="onScroll"&&or("scroll",k)}switch(w){case"input":ue(k),gt(k,V,!0);break;case"textarea":ue(k),Zt(k);break;case"select":case"option":break;default:typeof V.onClick=="function"&&(k.onclick=Sd)}k=F,p.updateQueue=k,k!==null&&(p.flags|=4)}else{ae=F.nodeType===9?F:F.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=sn(w)),h==="http://www.w3.org/1999/xhtml"?w==="script"?(h=ae.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof k.is=="string"?h=ae.createElement(w,{is:k.is}):(h=ae.createElement(w),w==="select"&&(ae=h,k.multiple?ae.multiple=!0:k.size&&(ae.size=k.size))):h=ae.createElementNS(h,w),h[_o]=p,h[Cd]=k,h8(h,p,!1,!1),p.stateNode=h;e:{switch(ae=gi(w,k),w){case"dialog":or("cancel",h),or("close",h),F=k;break;case"iframe":case"object":case"embed":or("load",h),F=k;break;case"video":case"audio":for(F=0;F<Zl.length;F++)or(Zl[F],h);F=k;break;case"source":or("error",h),F=k;break;case"img":case"image":case"link":or("error",h),or("load",h),F=k;break;case"details":or("toggle",h),F=k;break;case"input":Te(h,k),F=ze(h,k),or("invalid",h);break;case"option":F=k;break;case"select":h._wrapperState={wasMultiple:!!k.multiple},F=le({},k,{value:void 0}),or("invalid",h);break;case"textarea":Ct(h,k),F=st(h,k),or("invalid",h);break;default:F=k}Gn(w,F),we=F;for(V in we)if(we.hasOwnProperty(V)){var Pe=we[V];V==="style"?pi(h,Pe):V==="dangerouslySetInnerHTML"?(Pe=Pe?Pe.__html:void 0,Pe!=null&&Ut(h,Pe)):V==="children"?typeof Pe=="string"?(w!=="textarea"||Pe!=="")&&Qt(h,Pe):typeof Pe=="number"&&Qt(h,""+Pe):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(a.hasOwnProperty(V)?Pe!=null&&V==="onScroll"&&or("scroll",h):Pe!=null&&S(h,V,Pe,ae))}switch(w){case"input":ue(h),gt(h,k,!1);break;case"textarea":ue(h),Zt(h);break;case"option":k.value!=null&&h.setAttribute("value",""+W(k.value));break;case"select":h.multiple=!!k.multiple,V=k.value,V!=null?ft(h,!!k.multiple,V,!1):k.defaultValue!=null&&ft(h,!!k.multiple,k.defaultValue,!0);break;default:typeof F.onClick=="function"&&(h.onclick=Sd)}switch(w){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Ci(p),null;case 6:if(h&&p.stateNode!=null)m8(h,p,h.memoizedProps,k);else{if(typeof k!="string"&&p.stateNode===null)throw Error(r(166));if(w=al(rc.current),al(Zi.current),Mn(p)){if(k=p.stateNode,w=p.memoizedProps,k[_o]=p,(V=k.nodeValue!==w)&&(h=ke,h!==null))switch(h.tag){case 3:ep(k.nodeValue,w,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&ep(k.nodeValue,w,(h.mode&1)!==0)}V&&(p.flags|=4)}else k=(w.nodeType===9?w:w.ownerDocument).createTextNode(k),k[_o]=p,p.stateNode=k}return Ci(p),null;case 13:if(Xn(yr),k=p.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(We&&Ke!==null&&(p.mode&1)!==0&&(p.flags&128)===0)An(),dn(),p.flags|=98560,V=!1;else if(V=Mn(p),k!==null&&k.dehydrated!==null){if(h===null){if(!V)throw Error(r(318));if(V=p.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(r(317));V[_o]=p}else dn(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Ci(p),V=!1}else Qe!==null&&(iN(Qe),Qe=null),V=!0;if(!V)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=w,p):(k=k!==null,k!==(h!==null&&h.memoizedState!==null)&&k&&(p.child.flags|=8192,(p.mode&1)!==0&&(h===null||(yr.current&1)!==0?Rs===0&&(Rs=3):lN())),p.updateQueue!==null&&(p.flags|=4),Ci(p),null);case 4:return Co(),Gj(h,p),h===null&&au(p.stateNode.containerInfo),Ci(p),null;case 10:return Si(p.type._context),Ci(p),null;case 17:return _i(p.type)&&tp(),Ci(p),null;case 19:if(Xn(yr),V=p.memoizedState,V===null)return Ci(p),null;if(k=(p.flags&128)!==0,ae=V.rendering,ae===null)if(k)L0(V,!1);else{if(Rs!==0||h!==null&&(h.flags&128)!==0)for(h=p.child;h!==null;){if(ae=Qa(h),ae!==null){for(p.flags|=128,L0(V,!1),k=ae.updateQueue,k!==null&&(p.updateQueue=k,p.flags|=4),p.subtreeFlags=0,k=w,w=p.child;w!==null;)V=w,h=k,V.flags&=14680066,ae=V.alternate,ae===null?(V.childLanes=0,V.lanes=h,V.child=null,V.subtreeFlags=0,V.memoizedProps=null,V.memoizedState=null,V.updateQueue=null,V.dependencies=null,V.stateNode=null):(V.childLanes=ae.childLanes,V.lanes=ae.lanes,V.child=ae.child,V.subtreeFlags=0,V.deletions=null,V.memoizedProps=ae.memoizedProps,V.memoizedState=ae.memoizedState,V.updateQueue=ae.updateQueue,V.type=ae.type,h=ae.dependencies,V.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),w=w.sibling;return tr(yr,yr.current&1|2),p.child}h=h.sibling}V.tail!==null&&Pr()>pp&&(p.flags|=128,k=!0,L0(V,!1),p.lanes=4194304)}else{if(!k)if(h=Qa(ae),h!==null){if(p.flags|=128,k=!0,w=h.updateQueue,w!==null&&(p.updateQueue=w,p.flags|=4),L0(V,!0),V.tail===null&&V.tailMode==="hidden"&&!ae.alternate&&!We)return Ci(p),null}else 2*Pr()-V.renderingStartTime>pp&&w!==1073741824&&(p.flags|=128,k=!0,L0(V,!1),p.lanes=4194304);V.isBackwards?(ae.sibling=p.child,p.child=ae):(w=V.last,w!==null?w.sibling=ae:p.child=ae,V.last=ae)}return V.tail!==null?(p=V.tail,V.rendering=p,V.tail=p.sibling,V.renderingStartTime=Pr(),p.sibling=null,w=yr.current,tr(yr,k?w&1|2:w&1),p):(Ci(p),null);case 22:case 23:return oN(),k=p.memoizedState!==null,h!==null&&h.memoizedState!==null!==k&&(p.flags|=8192),k&&(p.mode&1)!==0?(Za&1073741824)!==0&&(Ci(p),p.subtreeFlags&6&&(p.flags|=8192)):Ci(p),null;case 24:return null;case 25:return null}throw Error(r(156,p.tag))}function OJ(h,p){switch(Ae(p),p.tag){case 1:return _i(p.type)&&tp(),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return Co(),Xn(Ni),Xn(Os),E0(),h=p.flags,(h&65536)!==0&&(h&128)===0?(p.flags=h&-65537|128,p):null;case 5:return A0(p),null;case 13:if(Xn(yr),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(r(340));dn()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return Xn(yr),null;case 4:return Co(),null;case 10:return Si(p.type._context),null;case 22:case 23:return oN(),null;case 24:return null;default:return null}}var qy=!1,Pi=!1,LJ=typeof WeakSet=="function"?WeakSet:Set,kt=null;function fp(h,p){var w=h.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(k){Jr(h,p,k)}else w.current=null}function Yj(h,p,w){try{w()}catch(k){Jr(h,p,k)}}var p8=!1;function RJ(h,p){if(vf=ad,h=df(),nu(h)){if("selectionStart"in h)var w={start:h.selectionStart,end:h.selectionEnd};else e:{w=(w=h.ownerDocument)&&w.defaultView||window;var k=w.getSelection&&w.getSelection();if(k&&k.rangeCount!==0){w=k.anchorNode;var F=k.anchorOffset,V=k.focusNode;k=k.focusOffset;try{w.nodeType,V.nodeType}catch{w=null;break e}var ae=0,we=-1,Pe=-1,$e=0,it=0,ct=h,rt=null;t:for(;;){for(var St;ct!==w||F!==0&&ct.nodeType!==3||(we=ae+F),ct!==V||k!==0&&ct.nodeType!==3||(Pe=ae+k),ct.nodeType===3&&(ae+=ct.nodeValue.length),(St=ct.firstChild)!==null;)rt=ct,ct=St;for(;;){if(ct===h)break t;if(rt===w&&++$e===F&&(we=ae),rt===V&&++it===k&&(Pe=ae),(St=ct.nextSibling)!==null)break;ct=rt,rt=ct.parentNode}ct=St}w=we===-1||Pe===-1?null:{start:we,end:Pe}}else w=null}w=w||{start:0,end:0}}else w=null;for(lu={focusedElem:h,selectionRange:w},ad=!1,kt=p;kt!==null;)if(p=kt,h=p.child,(p.subtreeFlags&1028)!==0&&h!==null)h.return=p,kt=h;else for(;kt!==null;){p=kt;try{var Tt=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Tt!==null){var It=Tt.memoizedProps,os=Tt.memoizedState,Fe=p.stateNode,Le=Fe.getSnapshotBeforeUpdate(p.elementType===p.type?It:cl(p.type,It),os);Fe.__reactInternalSnapshotBeforeUpdate=Le}break;case 3:var Be=p.stateNode.containerInfo;Be.nodeType===1?Be.textContent="":Be.nodeType===9&&Be.documentElement&&Be.removeChild(Be.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(pt){Jr(p,p.return,pt)}if(h=p.sibling,h!==null){h.return=p.return,kt=h;break}kt=p.return}return Tt=p8,p8=!1,Tt}function R0(h,p,w){var k=p.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var F=k=k.next;do{if((F.tag&h)===h){var V=F.destroy;F.destroy=void 0,V!==void 0&&Yj(p,w,V)}F=F.next}while(F!==k)}}function zy(h,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&h)===h){var k=w.create;w.destroy=k()}w=w.next}while(w!==p)}}function Qj(h){var p=h.ref;if(p!==null){var w=h.stateNode;switch(h.tag){case 5:h=w;break;default:h=w}typeof p=="function"?p(h):p.current=h}}function g8(h){var p=h.alternate;p!==null&&(h.alternate=null,g8(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&(delete p[_o],delete p[Cd],delete p[ji],delete p[Rj],delete p[Dj])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function x8(h){return h.tag===5||h.tag===3||h.tag===4}function v8(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||x8(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Xj(h,p,w){var k=h.tag;if(k===5||k===6)h=h.stateNode,p?w.nodeType===8?w.parentNode.insertBefore(h,p):w.insertBefore(h,p):(w.nodeType===8?(p=w.parentNode,p.insertBefore(h,w)):(p=w,p.appendChild(h)),w=w._reactRootContainer,w!=null||p.onclick!==null||(p.onclick=Sd));else if(k!==4&&(h=h.child,h!==null))for(Xj(h,p,w),h=h.sibling;h!==null;)Xj(h,p,w),h=h.sibling}function Jj(h,p,w){var k=h.tag;if(k===5||k===6)h=h.stateNode,p?w.insertBefore(h,p):w.appendChild(h);else if(k!==4&&(h=h.child,h!==null))for(Jj(h,p,w),h=h.sibling;h!==null;)Jj(h,p,w),h=h.sibling}var li=null,ul=!1;function Dd(h,p,w){for(w=w.child;w!==null;)y8(h,p,w),w=w.sibling}function y8(h,p,w){if(pa&&typeof pa.onCommitFiberUnmount=="function")try{pa.onCommitFiberUnmount(qc,w)}catch{}switch(w.tag){case 5:Pi||fp(w,p);case 6:var k=li,F=ul;li=null,Dd(h,p,w),li=k,ul=F,li!==null&&(ul?(h=li,w=w.stateNode,h.nodeType===8?h.parentNode.removeChild(w):h.removeChild(w)):li.removeChild(w.stateNode));break;case 18:li!==null&&(ul?(h=li,w=w.stateNode,h.nodeType===8?_0(h.parentNode,w):h.nodeType===1&&_0(h,w),Ha(h)):_0(li,w.stateNode));break;case 4:k=li,F=ul,li=w.stateNode.containerInfo,ul=!0,Dd(h,p,w),li=k,ul=F;break;case 0:case 11:case 14:case 15:if(!Pi&&(k=w.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){F=k=k.next;do{var V=F,ae=V.destroy;V=V.tag,ae!==void 0&&((V&2)!==0||(V&4)!==0)&&Yj(w,p,ae),F=F.next}while(F!==k)}Dd(h,p,w);break;case 1:if(!Pi&&(fp(w,p),k=w.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=w.memoizedProps,k.state=w.memoizedState,k.componentWillUnmount()}catch(we){Jr(w,p,we)}Dd(h,p,w);break;case 21:Dd(h,p,w);break;case 22:w.mode&1?(Pi=(k=Pi)||w.memoizedState!==null,Dd(h,p,w),Pi=k):Dd(h,p,w);break;default:Dd(h,p,w)}}function b8(h){var p=h.updateQueue;if(p!==null){h.updateQueue=null;var w=h.stateNode;w===null&&(w=h.stateNode=new LJ),p.forEach(function(k){var F=UJ.bind(null,h,k);w.has(k)||(w.add(k),k.then(F,F))})}}function dl(h,p){var w=p.deletions;if(w!==null)for(var k=0;k<w.length;k++){var F=w[k];try{var V=h,ae=p,we=ae;e:for(;we!==null;){switch(we.tag){case 5:li=we.stateNode,ul=!1;break e;case 3:li=we.stateNode.containerInfo,ul=!0;break e;case 4:li=we.stateNode.containerInfo,ul=!0;break e}we=we.return}if(li===null)throw Error(r(160));y8(V,ae,F),li=null,ul=!1;var Pe=F.alternate;Pe!==null&&(Pe.return=null),F.return=null}catch($e){Jr(F,p,$e)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)w8(p,h),p=p.sibling}function w8(h,p){var w=h.alternate,k=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(dl(p,h),ic(h),k&4){try{R0(3,h,h.return),zy(3,h)}catch(It){Jr(h,h.return,It)}try{R0(5,h,h.return)}catch(It){Jr(h,h.return,It)}}break;case 1:dl(p,h),ic(h),k&512&&w!==null&&fp(w,w.return);break;case 5:if(dl(p,h),ic(h),k&512&&w!==null&&fp(w,w.return),h.flags&32){var F=h.stateNode;try{Qt(F,"")}catch(It){Jr(h,h.return,It)}}if(k&4&&(F=h.stateNode,F!=null)){var V=h.memoizedProps,ae=w!==null?w.memoizedProps:V,we=h.type,Pe=h.updateQueue;if(h.updateQueue=null,Pe!==null)try{we==="input"&&V.type==="radio"&&V.name!=null&&xe(F,V),gi(we,ae);var $e=gi(we,V);for(ae=0;ae<Pe.length;ae+=2){var it=Pe[ae],ct=Pe[ae+1];it==="style"?pi(F,ct):it==="dangerouslySetInnerHTML"?Ut(F,ct):it==="children"?Qt(F,ct):S(F,it,ct,$e)}switch(we){case"input":ht(F,V);break;case"textarea":Vt(F,V);break;case"select":var rt=F._wrapperState.wasMultiple;F._wrapperState.wasMultiple=!!V.multiple;var St=V.value;St!=null?ft(F,!!V.multiple,St,!1):rt!==!!V.multiple&&(V.defaultValue!=null?ft(F,!!V.multiple,V.defaultValue,!0):ft(F,!!V.multiple,V.multiple?[]:"",!1))}F[Cd]=V}catch(It){Jr(h,h.return,It)}}break;case 6:if(dl(p,h),ic(h),k&4){if(h.stateNode===null)throw Error(r(162));F=h.stateNode,V=h.memoizedProps;try{F.nodeValue=V}catch(It){Jr(h,h.return,It)}}break;case 3:if(dl(p,h),ic(h),k&4&&w!==null&&w.memoizedState.isDehydrated)try{Ha(p.containerInfo)}catch(It){Jr(h,h.return,It)}break;case 4:dl(p,h),ic(h);break;case 13:dl(p,h),ic(h),F=h.child,F.flags&8192&&(V=F.memoizedState!==null,F.stateNode.isHidden=V,!V||F.alternate!==null&&F.alternate.memoizedState!==null||(tN=Pr())),k&4&&b8(h);break;case 22:if(it=w!==null&&w.memoizedState!==null,h.mode&1?(Pi=($e=Pi)||it,dl(p,h),Pi=$e):dl(p,h),ic(h),k&8192){if($e=h.memoizedState!==null,(h.stateNode.isHidden=$e)&&!it&&(h.mode&1)!==0)for(kt=h,it=h.child;it!==null;){for(ct=kt=it;kt!==null;){switch(rt=kt,St=rt.child,rt.tag){case 0:case 11:case 14:case 15:R0(4,rt,rt.return);break;case 1:fp(rt,rt.return);var Tt=rt.stateNode;if(typeof Tt.componentWillUnmount=="function"){k=rt,w=rt.return;try{p=k,Tt.props=p.memoizedProps,Tt.state=p.memoizedState,Tt.componentWillUnmount()}catch(It){Jr(k,w,It)}}break;case 5:fp(rt,rt.return);break;case 22:if(rt.memoizedState!==null){_8(ct);continue}}St!==null?(St.return=rt,kt=St):_8(ct)}it=it.sibling}e:for(it=null,ct=h;;){if(ct.tag===5){if(it===null){it=ct;try{F=ct.stateNode,$e?(V=F.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none"):(we=ct.stateNode,Pe=ct.memoizedProps.style,ae=Pe!=null&&Pe.hasOwnProperty("display")?Pe.display:null,we.style.display=_n("display",ae))}catch(It){Jr(h,h.return,It)}}}else if(ct.tag===6){if(it===null)try{ct.stateNode.nodeValue=$e?"":ct.memoizedProps}catch(It){Jr(h,h.return,It)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===h)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===h)break e;for(;ct.sibling===null;){if(ct.return===null||ct.return===h)break e;it===ct&&(it=null),ct=ct.return}it===ct&&(it=null),ct.sibling.return=ct.return,ct=ct.sibling}}break;case 19:dl(p,h),ic(h),k&4&&b8(h);break;case 21:break;default:dl(p,h),ic(h)}}function ic(h){var p=h.flags;if(p&2){try{e:{for(var w=h.return;w!==null;){if(x8(w)){var k=w;break e}w=w.return}throw Error(r(160))}switch(k.tag){case 5:var F=k.stateNode;k.flags&32&&(Qt(F,""),k.flags&=-33);var V=v8(h);Jj(h,V,F);break;case 3:case 4:var ae=k.stateNode.containerInfo,we=v8(h);Xj(h,we,ae);break;default:throw Error(r(161))}}catch(Pe){Jr(h,h.return,Pe)}h.flags&=-3}p&4096&&(h.flags&=-4097)}function DJ(h,p,w){kt=h,j8(h)}function j8(h,p,w){for(var k=(h.mode&1)!==0;kt!==null;){var F=kt,V=F.child;if(F.tag===22&&k){var ae=F.memoizedState!==null||qy;if(!ae){var we=F.alternate,Pe=we!==null&&we.memoizedState!==null||Pi;we=qy;var $e=Pi;if(qy=ae,(Pi=Pe)&&!$e)for(kt=F;kt!==null;)ae=kt,Pe=ae.child,ae.tag===22&&ae.memoizedState!==null?S8(F):Pe!==null?(Pe.return=ae,kt=Pe):S8(F);for(;V!==null;)kt=V,j8(V),V=V.sibling;kt=F,qy=we,Pi=$e}N8(h)}else(F.subtreeFlags&8772)!==0&&V!==null?(V.return=F,kt=V):N8(h)}}function N8(h){for(;kt!==null;){var p=kt;if((p.flags&8772)!==0){var w=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Pi||zy(5,p);break;case 1:var k=p.stateNode;if(p.flags&4&&!Pi)if(w===null)k.componentDidMount();else{var F=p.elementType===p.type?w.memoizedProps:cl(p.type,w.memoizedProps);k.componentDidUpdate(F,w.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var V=p.updateQueue;V!==null&&fu(p,V,k);break;case 3:var ae=p.updateQueue;if(ae!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=p.child.stateNode;break;case 1:w=p.child.stateNode}fu(p,ae,w)}break;case 5:var we=p.stateNode;if(w===null&&p.flags&4){w=we;var Pe=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Pe.autoFocus&&w.focus();break;case"img":Pe.src&&(w.src=Pe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var $e=p.alternate;if($e!==null){var it=$e.memoizedState;if(it!==null){var ct=it.dehydrated;ct!==null&&Ha(ct)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Pi||p.flags&512&&Qj(p)}catch(rt){Jr(p,p.return,rt)}}if(p===h){kt=null;break}if(w=p.sibling,w!==null){w.return=p.return,kt=w;break}kt=p.return}}function _8(h){for(;kt!==null;){var p=kt;if(p===h){kt=null;break}var w=p.sibling;if(w!==null){w.return=p.return,kt=w;break}kt=p.return}}function S8(h){for(;kt!==null;){var p=kt;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{zy(4,p)}catch(Pe){Jr(p,w,Pe)}break;case 1:var k=p.stateNode;if(typeof k.componentDidMount=="function"){var F=p.return;try{k.componentDidMount()}catch(Pe){Jr(p,F,Pe)}}var V=p.return;try{Qj(p)}catch(Pe){Jr(p,V,Pe)}break;case 5:var ae=p.return;try{Qj(p)}catch(Pe){Jr(p,ae,Pe)}}}catch(Pe){Jr(p,p.return,Pe)}if(p===h){kt=null;break}var we=p.sibling;if(we!==null){we.return=p.return,kt=we;break}kt=p.return}}var IJ=Math.ceil,Uy=A.ReactCurrentDispatcher,Zj=A.ReactCurrentOwner,ko=A.ReactCurrentBatchConfig,qn=0,Gs=null,js=null,ci=0,Za=0,mp=Ya(0),Rs=0,D0=null,_f=0,Vy=0,eN=0,I0=null,Ca=null,tN=0,pp=1/0,gu=null,Hy=!1,nN=null,Id=null,Wy=!1,Md=null,Ky=0,M0=0,rN=null,Gy=-1,Yy=0;function ra(){return(qn&6)!==0?Pr():Gy!==-1?Gy:Gy=Pr()}function Fd(h){return(h.mode&1)===0?1:(qn&2)!==0&&ci!==0?ci&-ci:nr.transition!==null?(Yy===0&&(Yy=Zh()),Yy):(h=Bn,h!==0||(h=window.event,h=h===void 0?16:sf(h.type)),h)}function hl(h,p,w,k){if(50<M0)throw M0=0,rN=null,Error(r(185));ql(h,w,k),((qn&2)===0||h!==Gs)&&(h===Gs&&((qn&2)===0&&(Vy|=w),Rs===4&&Bd(h,ci)),Pa(h,k),w===1&&qn===0&&(p.mode&1)===0&&(pp=Pr()+500,bf&&K()))}function Pa(h,p){var w=h.callbackNode;vi(h,p);var k=xi(h,h===Gs?ci:0);if(k===0)w!==null&&$c(w),h.callbackNode=null,h.callbackPriority=0;else if(p=k&-k,h.callbackPriority!==p){if(w!=null&&$c(w),p===1)h.tag===0?$(P8.bind(null,h)):E(P8.bind(null,h)),Oj(function(){(qn&6)===0&&K()}),w=null;else{switch(nd(k)){case 1:w=Bl;break;case 4:w=Xh;break;case 16:w=Ju;break;case 536870912:w=zm;break;default:w=Ju}w=D8(w,C8.bind(null,h))}h.callbackPriority=p,h.callbackNode=w}}function C8(h,p){if(Gy=-1,Yy=0,(qn&6)!==0)throw Error(r(327));var w=h.callbackNode;if(gp()&&h.callbackNode!==w)return null;var k=xi(h,h===Gs?ci:0);if(k===0)return null;if((k&30)!==0||(k&h.expiredLanes)!==0||p)p=Qy(h,k);else{p=k;var F=qn;qn|=2;var V=k8();(Gs!==h||ci!==p)&&(gu=null,pp=Pr()+500,Cf(h,p));do try{BJ();break}catch(we){A8(h,we)}while(!0);Ls(),Uy.current=V,qn=F,js!==null?p=0:(Gs=null,ci=0,p=Rs)}if(p!==0){if(p===2&&(F=Vc(h),F!==0&&(k=F,p=sN(h,F))),p===1)throw w=D0,Cf(h,0),Bd(h,k),Pa(h,Pr()),w;if(p===6)Bd(h,k);else{if(F=h.current.alternate,(k&30)===0&&!MJ(F)&&(p=Qy(h,k),p===2&&(V=Vc(h),V!==0&&(k=V,p=sN(h,V))),p===1))throw w=D0,Cf(h,0),Bd(h,k),Pa(h,Pr()),w;switch(h.finishedWork=F,h.finishedLanes=k,p){case 0:case 1:throw Error(r(345));case 2:Pf(h,Ca,gu);break;case 3:if(Bd(h,k),(k&130023424)===k&&(p=tN+500-Pr(),10<p)){if(xi(h,0)!==0)break;if(F=h.suspendedLanes,(F&k)!==k){ra(),h.pingedLanes|=h.suspendedLanes&F;break}h.timeoutHandle=N0(Pf.bind(null,h,Ca,gu),p);break}Pf(h,Ca,gu);break;case 4:if(Bd(h,k),(k&4194240)===k)break;for(p=h.eventTimes,F=-1;0<k;){var ae=31-Ki(k);V=1<<ae,ae=p[ae],ae>F&&(F=ae),k&=~V}if(k=F,k=Pr()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*IJ(k/1960))-k,10<k){h.timeoutHandle=N0(Pf.bind(null,h,Ca,gu),k);break}Pf(h,Ca,gu);break;case 5:Pf(h,Ca,gu);break;default:throw Error(r(329))}}}return Pa(h,Pr()),h.callbackNode===w?C8.bind(null,h):null}function sN(h,p){var w=I0;return h.current.memoizedState.isDehydrated&&(Cf(h,p).flags|=256),h=Qy(h,p),h!==2&&(p=Ca,Ca=w,p!==null&&iN(p)),h}function iN(h){Ca===null?Ca=h:Ca.push.apply(Ca,h)}function MJ(h){for(var p=h;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var k=0;k<w.length;k++){var F=w[k],V=F.getSnapshot;F=F.value;try{if(!$n(V(),F))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Bd(h,p){for(p&=~eN,p&=~Vy,h.suspendedLanes|=p,h.pingedLanes&=~p,h=h.expirationTimes;0<p;){var w=31-Ki(p),k=1<<w;h[w]=-1,p&=~k}}function P8(h){if((qn&6)!==0)throw Error(r(327));gp();var p=xi(h,0);if((p&1)===0)return Pa(h,Pr()),null;var w=Qy(h,p);if(h.tag!==0&&w===2){var k=Vc(h);k!==0&&(p=k,w=sN(h,k))}if(w===1)throw w=D0,Cf(h,0),Bd(h,p),Pa(h,Pr()),w;if(w===6)throw Error(r(345));return h.finishedWork=h.current.alternate,h.finishedLanes=p,Pf(h,Ca,gu),Pa(h,Pr()),null}function aN(h,p){var w=qn;qn|=1;try{return h(p)}finally{qn=w,qn===0&&(pp=Pr()+500,bf&&K())}}function Sf(h){Md!==null&&Md.tag===0&&(qn&6)===0&&gp();var p=qn;qn|=1;var w=ko.transition,k=Bn;try{if(ko.transition=null,Bn=1,h)return h()}finally{Bn=k,ko.transition=w,qn=p,(qn&6)===0&&K()}}function oN(){Za=mp.current,Xn(mp)}function Cf(h,p){h.finishedWork=null,h.finishedLanes=0;var w=h.timeoutHandle;if(w!==-1&&(h.timeoutHandle=-1,Ay(w)),js!==null)for(w=js.return;w!==null;){var k=w;switch(Ae(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&tp();break;case 3:Co(),Xn(Ni),Xn(Os),E0();break;case 5:A0(k);break;case 4:Co();break;case 13:Xn(yr);break;case 19:Xn(yr);break;case 10:Si(k.type._context);break;case 22:case 23:oN()}w=w.return}if(Gs=h,js=h=$d(h.current,null),ci=Za=p,Rs=0,D0=null,eN=Vy=_f=0,Ca=I0=null,Ji!==null){for(p=0;p<Ji.length;p++)if(w=Ji[p],k=w.interleaved,k!==null){w.interleaved=null;var F=k.next,V=w.pending;if(V!==null){var ae=V.next;V.next=F,k.next=ae}w.pending=k}Ji=null}return h}function A8(h,p){do{var w=js;try{if(Ls(),rp.current=My,Od){for(var k=_r.memoizedState;k!==null;){var F=k.queue;F!==null&&(F.pending=null),k=k.next}Od=!1}if(Po=0,Vr=Xr=_r=null,ol=!1,Ld=0,Zj.current=null,w===null||w.return===null){Rs=1,D0=p,js=null;break}e:{var V=h,ae=w.return,we=w,Pe=p;if(p=ci,we.flags|=32768,Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var $e=Pe,it=we,ct=it.tag;if((it.mode&1)===0&&(ct===0||ct===11||ct===15)){var rt=it.alternate;rt?(it.updateQueue=rt.updateQueue,it.memoizedState=rt.memoizedState,it.lanes=rt.lanes):(it.updateQueue=null,it.memoizedState=null)}var St=ZT(ae);if(St!==null){St.flags&=-257,e8(St,ae,we,V,p),St.mode&1&&JT(V,$e,p),p=St,Pe=$e;var Tt=p.updateQueue;if(Tt===null){var It=new Set;It.add(Pe),p.updateQueue=It}else Tt.add(Pe);break e}else{if((p&1)===0){JT(V,$e,p),lN();break e}Pe=Error(r(426))}}else if(We&&we.mode&1){var os=ZT(ae);if(os!==null){(os.flags&65536)===0&&(os.flags|=256),e8(os,ae,we,V,p),Jn(hp(Pe,we));break e}}V=Pe=hp(Pe,we),Rs!==4&&(Rs=2),I0===null?I0=[V]:I0.push(V),V=ae;do{switch(V.tag){case 3:V.flags|=65536,p&=-p,V.lanes|=p;var Fe=QT(V,Pe,p);_a(V,Fe);break e;case 1:we=Pe;var Le=V.type,Be=V.stateNode;if((V.flags&128)===0&&(typeof Le.getDerivedStateFromError=="function"||Be!==null&&typeof Be.componentDidCatch=="function"&&(Id===null||!Id.has(Be)))){V.flags|=65536,p&=-p,V.lanes|=p;var pt=XT(V,we,p);_a(V,pt);break e}}V=V.return}while(V!==null)}T8(w)}catch(Mt){p=Mt,js===w&&w!==null&&(js=w=w.return);continue}break}while(!0)}function k8(){var h=Uy.current;return Uy.current=My,h===null?My:h}function lN(){(Rs===0||Rs===3||Rs===2)&&(Rs=4),Gs===null||(_f&268435455)===0&&(Vy&268435455)===0||Bd(Gs,ci)}function Qy(h,p){var w=qn;qn|=2;var k=k8();(Gs!==h||ci!==p)&&(gu=null,Cf(h,p));do try{FJ();break}catch(F){A8(h,F)}while(!0);if(Ls(),qn=w,Uy.current=k,js!==null)throw Error(r(261));return Gs=null,ci=0,Rs}function FJ(){for(;js!==null;)E8(js)}function BJ(){for(;js!==null&&!Xu();)E8(js)}function E8(h){var p=R8(h.alternate,h,Za);h.memoizedProps=h.pendingProps,p===null?T8(h):js=p,Zj.current=null}function T8(h){var p=h;do{var w=p.alternate;if(h=p.return,(p.flags&32768)===0){if(w=TJ(w,p,Za),w!==null){js=w;return}}else{if(w=OJ(w,p),w!==null){w.flags&=32767,js=w;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Rs=6,js=null;return}}if(p=p.sibling,p!==null){js=p;return}js=p=h}while(p!==null);Rs===0&&(Rs=5)}function Pf(h,p,w){var k=Bn,F=ko.transition;try{ko.transition=null,Bn=1,$J(h,p,w,k)}finally{ko.transition=F,Bn=k}return null}function $J(h,p,w,k){do gp();while(Md!==null);if((qn&6)!==0)throw Error(r(327));w=h.finishedWork;var F=h.finishedLanes;if(w===null)return null;if(h.finishedWork=null,h.finishedLanes=0,w===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0;var V=w.lanes|w.childLanes;if(y0(h,V),h===Gs&&(js=Gs=null,ci=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||Wy||(Wy=!0,D8(Ju,function(){return gp(),null})),V=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||V){V=ko.transition,ko.transition=null;var ae=Bn;Bn=1;var we=qn;qn|=4,Zj.current=null,RJ(h,w),w8(w,h),ru(lu),ad=!!vf,lu=vf=null,h.current=w,DJ(w),qm(),qn=we,Bn=ae,ko.transition=V}else h.current=w;if(Wy&&(Wy=!1,Md=h,Ky=F),V=h.pendingLanes,V===0&&(Id=null),Zu(w.stateNode),Pa(h,Pr()),p!==null)for(k=h.onRecoverableError,w=0;w<p.length;w++)F=p[w],k(F.value,{componentStack:F.stack,digest:F.digest});if(Hy)throw Hy=!1,h=nN,nN=null,h;return(Ky&1)!==0&&h.tag!==0&&gp(),V=h.pendingLanes,(V&1)!==0?h===rN?M0++:(M0=0,rN=h):M0=0,K(),null}function gp(){if(Md!==null){var h=nd(Ky),p=ko.transition,w=Bn;try{if(ko.transition=null,Bn=16>h?16:h,Md===null)var k=!1;else{if(h=Md,Md=null,Ky=0,(qn&6)!==0)throw Error(r(331));var F=qn;for(qn|=4,kt=h.current;kt!==null;){var V=kt,ae=V.child;if((kt.flags&16)!==0){var we=V.deletions;if(we!==null){for(var Pe=0;Pe<we.length;Pe++){var $e=we[Pe];for(kt=$e;kt!==null;){var it=kt;switch(it.tag){case 0:case 11:case 15:R0(8,it,V)}var ct=it.child;if(ct!==null)ct.return=it,kt=ct;else for(;kt!==null;){it=kt;var rt=it.sibling,St=it.return;if(g8(it),it===$e){kt=null;break}if(rt!==null){rt.return=St,kt=rt;break}kt=St}}}var Tt=V.alternate;if(Tt!==null){var It=Tt.child;if(It!==null){Tt.child=null;do{var os=It.sibling;It.sibling=null,It=os}while(It!==null)}}kt=V}}if((V.subtreeFlags&2064)!==0&&ae!==null)ae.return=V,kt=ae;else e:for(;kt!==null;){if(V=kt,(V.flags&2048)!==0)switch(V.tag){case 0:case 11:case 15:R0(9,V,V.return)}var Fe=V.sibling;if(Fe!==null){Fe.return=V.return,kt=Fe;break e}kt=V.return}}var Le=h.current;for(kt=Le;kt!==null;){ae=kt;var Be=ae.child;if((ae.subtreeFlags&2064)!==0&&Be!==null)Be.return=ae,kt=Be;else e:for(ae=Le;kt!==null;){if(we=kt,(we.flags&2048)!==0)try{switch(we.tag){case 0:case 11:case 15:zy(9,we)}}catch(Mt){Jr(we,we.return,Mt)}if(we===ae){kt=null;break e}var pt=we.sibling;if(pt!==null){pt.return=we.return,kt=pt;break e}kt=we.return}}if(qn=F,K(),pa&&typeof pa.onPostCommitFiberRoot=="function")try{pa.onPostCommitFiberRoot(qc,h)}catch{}k=!0}return k}finally{Bn=w,ko.transition=p}}return!1}function O8(h,p,w){p=hp(w,p),p=QT(h,p,1),h=Na(h,p,1),p=ra(),h!==null&&(ql(h,1,p),Pa(h,p))}function Jr(h,p,w){if(h.tag===3)O8(h,h,w);else for(;p!==null;){if(p.tag===3){O8(p,h,w);break}else if(p.tag===1){var k=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(Id===null||!Id.has(k))){h=hp(w,h),h=XT(p,h,1),p=Na(p,h,1),h=ra(),p!==null&&(ql(p,1,h),Pa(p,h));break}}p=p.return}}function qJ(h,p,w){var k=h.pingCache;k!==null&&k.delete(p),p=ra(),h.pingedLanes|=h.suspendedLanes&w,Gs===h&&(ci&w)===w&&(Rs===4||Rs===3&&(ci&130023424)===ci&&500>Pr()-tN?Cf(h,0):eN|=w),Pa(h,p)}function L8(h,p){p===0&&((h.mode&1)===0?p=1:(p=$l,$l<<=1,($l&130023424)===0&&($l=4194304)));var w=ra();h=Hn(h,p),h!==null&&(ql(h,p,w),Pa(h,w))}function zJ(h){var p=h.memoizedState,w=0;p!==null&&(w=p.retryLane),L8(h,w)}function UJ(h,p){var w=0;switch(h.tag){case 13:var k=h.stateNode,F=h.memoizedState;F!==null&&(w=F.retryLane);break;case 19:k=h.stateNode;break;default:throw Error(r(314))}k!==null&&k.delete(p),L8(h,w)}var R8;R8=function(h,p,w){if(h!==null)if(h.memoizedProps!==p.pendingProps||Ni.current)Sa=!0;else{if((h.lanes&w)===0&&(p.flags&128)===0)return Sa=!1,EJ(h,p,w);Sa=(h.flags&131072)!==0}else Sa=!1,We&&(p.flags&1048576)!==0&&Je(p,de,p.index);switch(p.lanes=0,p.tag){case 2:var k=p.type;$y(h,p),h=p.pendingProps;var F=Ad(p,Os.current);Or(p,w),F=wf(null,p,k,h,F,w);var V=Ao();return p.flags|=1,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,_i(k)?(V=!0,du(p)):V=!1,p.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,np(p),F.updater=Fy,p.stateNode=F,F._reactInternals=p,Bj(p,k,h,w),p=Uj(null,p,k,!0,V,w)):(p.tag=0,We&&V&&Ue(p),na(null,p,F,w),p=p.child),p;case 16:k=p.elementType;e:{switch($y(h,p),h=p.pendingProps,F=k._init,k=F(k._payload),p.type=k,F=p.tag=HJ(k),h=cl(k,h),F){case 0:p=zj(null,p,k,h,w);break e;case 1:p=a8(null,p,k,h,w);break e;case 11:p=t8(null,p,k,h,w);break e;case 14:p=n8(null,p,k,cl(k.type,h),w);break e}throw Error(r(306,k,""))}return p;case 0:return k=p.type,F=p.pendingProps,F=p.elementType===k?F:cl(k,F),zj(h,p,k,F,w);case 1:return k=p.type,F=p.pendingProps,F=p.elementType===k?F:cl(k,F),a8(h,p,k,F,w);case 3:e:{if(o8(p),h===null)throw Error(r(387));k=p.pendingProps,V=p.memoizedState,F=V.element,P0(h,p),il(p,k,null,w);var ae=p.memoizedState;if(k=ae.element,V.isDehydrated)if(V={element:k,isDehydrated:!1,cache:ae.cache,pendingSuspenseBoundaries:ae.pendingSuspenseBoundaries,transitions:ae.transitions},p.updateQueue.baseState=V,p.memoizedState=V,p.flags&256){F=hp(Error(r(423)),p),p=l8(h,p,k,w,F);break e}else if(k!==F){F=hp(Error(r(424)),p),p=l8(h,p,k,w,F);break e}else for(Ke=ai(p.stateNode.containerInfo.firstChild),ke=p,We=!0,Qe=null,w=Vn(p,null,k,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(dn(),k===F){p=pu(h,p,w);break e}na(h,p,k,w)}p=p.child}return p;case 5:return Oy(p),h===null&&wt(p),k=p.type,F=p.pendingProps,V=h!==null?h.memoizedProps:null,ae=F.children,j0(k,F)?ae=null:V!==null&&j0(k,V)&&(p.flags|=32),i8(h,p),na(h,p,ae,w),p.child;case 6:return h===null&&wt(p),null;case 13:return c8(h,p,w);case 4:return Td(p,p.stateNode.containerInfo),k=p.pendingProps,h===null?p.child=ss(p,null,k,w):na(h,p,k,w),p.child;case 11:return k=p.type,F=p.pendingProps,F=p.elementType===k?F:cl(k,F),t8(h,p,k,F,w);case 7:return na(h,p,p.pendingProps,w),p.child;case 8:return na(h,p,p.pendingProps.children,w),p.child;case 12:return na(h,p,p.pendingProps.children,w),p.child;case 10:e:{if(k=p.type._context,F=p.pendingProps,V=p.memoizedProps,ae=F.value,tr(Ws,k._currentValue),k._currentValue=ae,V!==null)if($n(V.value,ae)){if(V.children===F.children&&!Ni.current){p=pu(h,p,w);break e}}else for(V=p.child,V!==null&&(V.return=p);V!==null;){var we=V.dependencies;if(we!==null){ae=V.child;for(var Pe=we.firstContext;Pe!==null;){if(Pe.context===k){if(V.tag===1){Pe=ja(-1,w&-w),Pe.tag=2;var $e=V.updateQueue;if($e!==null){$e=$e.shared;var it=$e.pending;it===null?Pe.next=Pe:(Pe.next=it.next,it.next=Pe),$e.pending=Pe}}V.lanes|=w,Pe=V.alternate,Pe!==null&&(Pe.lanes|=w),wa(V.return,w,p),we.lanes|=w;break}Pe=Pe.next}}else if(V.tag===10)ae=V.type===p.type?null:V.child;else if(V.tag===18){if(ae=V.return,ae===null)throw Error(r(341));ae.lanes|=w,we=ae.alternate,we!==null&&(we.lanes|=w),wa(ae,w,p),ae=V.sibling}else ae=V.child;if(ae!==null)ae.return=V;else for(ae=V;ae!==null;){if(ae===p){ae=null;break}if(V=ae.sibling,V!==null){V.return=ae.return,ae=V;break}ae=ae.return}V=ae}na(h,p,F.children,w),p=p.child}return p;case 9:return F=p.type,k=p.pendingProps.children,Or(p,w),F=Qr(F),k=k(F),p.flags|=1,na(h,p,k,w),p.child;case 14:return k=p.type,F=cl(k,p.pendingProps),F=cl(k.type,F),n8(h,p,k,F,w);case 15:return r8(h,p,p.type,p.pendingProps,w);case 17:return k=p.type,F=p.pendingProps,F=p.elementType===k?F:cl(k,F),$y(h,p),p.tag=1,_i(k)?(h=!0,du(p)):h=!1,Or(p,w),GT(p,k,F),Bj(p,k,F,w),Uj(null,p,k,!0,h,w);case 19:return d8(h,p,w);case 22:return s8(h,p,w)}throw Error(r(156,p.tag))};function D8(h,p){return Bc(h,p)}function VJ(h,p,w,k){this.tag=h,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Eo(h,p,w,k){return new VJ(h,p,w,k)}function cN(h){return h=h.prototype,!(!h||!h.isReactComponent)}function HJ(h){if(typeof h=="function")return cN(h)?1:0;if(h!=null){if(h=h.$$typeof,h===M)return 11;if(h===Z)return 14}return 2}function $d(h,p){var w=h.alternate;return w===null?(w=Eo(h.tag,p,h.key,h.mode),w.elementType=h.elementType,w.type=h.type,w.stateNode=h.stateNode,w.alternate=h,h.alternate=w):(w.pendingProps=p,w.type=h.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=h.flags&14680064,w.childLanes=h.childLanes,w.lanes=h.lanes,w.child=h.child,w.memoizedProps=h.memoizedProps,w.memoizedState=h.memoizedState,w.updateQueue=h.updateQueue,p=h.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=h.sibling,w.index=h.index,w.ref=h.ref,w}function Xy(h,p,w,k,F,V){var ae=2;if(k=h,typeof h=="function")cN(h)&&(ae=1);else if(typeof h=="string")ae=5;else e:switch(h){case O:return Af(w.children,F,V,p);case R:ae=8,F|=8;break;case q:return h=Eo(12,w,p,F|2),h.elementType=q,h.lanes=V,h;case G:return h=Eo(13,w,p,F),h.elementType=G,h.lanes=V,h;case Y:return h=Eo(19,w,p,F),h.elementType=Y,h.lanes=V,h;case re:return Jy(w,F,V,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case U:ae=10;break e;case D:ae=9;break e;case M:ae=11;break e;case Z:ae=14;break e;case X:ae=16,k=null;break e}throw Error(r(130,h==null?h:typeof h,""))}return p=Eo(ae,w,p,F),p.elementType=h,p.type=k,p.lanes=V,p}function Af(h,p,w,k){return h=Eo(7,h,k,p),h.lanes=w,h}function Jy(h,p,w,k){return h=Eo(22,h,k,p),h.elementType=re,h.lanes=w,h.stateNode={isHidden:!1},h}function uN(h,p,w){return h=Eo(6,h,null,p),h.lanes=w,h}function dN(h,p,w){return p=Eo(4,h.children!==null?h.children:[],h.key,p),p.lanes=w,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function WJ(h,p,w,k,F){this.tag=p,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ef(0),this.expirationTimes=ef(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ef(0),this.identifierPrefix=k,this.onRecoverableError=F,this.mutableSourceEagerHydrationData=null}function hN(h,p,w,k,F,V,ae,we,Pe){return h=new WJ(h,p,w,we,Pe),p===1?(p=1,V===!0&&(p|=8)):p=0,V=Eo(3,null,null,p),h.current=V,V.stateNode=h,V.memoizedState={element:k,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},np(V),h}function KJ(h,p,w){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:k==null?null:""+k,children:h,containerInfo:p,implementation:w}}function I8(h){if(!h)return tc;h=h._reactInternals;e:{if(Es(h)!==h||h.tag!==1)throw Error(r(170));var p=h;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(_i(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(r(171))}if(h.tag===1){var w=h.type;if(_i(w))return C0(h,w,p)}return p}function M8(h,p,w,k,F,V,ae,we,Pe){return h=hN(w,k,!0,h,F,V,ae,we,Pe),h.context=I8(null),w=h.current,k=ra(),F=Fd(w),V=ja(k,F),V.callback=p??null,Na(w,V,F),h.current.lanes=F,ql(h,F,k),Pa(h,k),h}function Zy(h,p,w,k){var F=p.current,V=ra(),ae=Fd(F);return w=I8(w),p.context===null?p.context=w:p.pendingContext=w,p=ja(V,ae),p.payload={element:h},k=k===void 0?null:k,k!==null&&(p.callback=k),h=Na(F,p,ae),h!==null&&(hl(h,F,ae,V),hu(h,F,ae)),ae}function eb(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function F8(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var w=h.retryLane;h.retryLane=w!==0&&w<p?w:p}}function fN(h,p){F8(h,p),(h=h.alternate)&&F8(h,p)}function GJ(){return null}var B8=typeof reportError=="function"?reportError:function(h){console.error(h)};function mN(h){this._internalRoot=h}tb.prototype.render=mN.prototype.render=function(h){var p=this._internalRoot;if(p===null)throw Error(r(409));Zy(h,p,null,null)},tb.prototype.unmount=mN.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var p=h.containerInfo;Sf(function(){Zy(null,h,null,null)}),p[Hs]=null}};function tb(h){this._internalRoot=h}tb.prototype.unstable_scheduleHydration=function(h){if(h){var p=po();h={blockedOn:null,target:h,priority:p};for(var w=0;w<xo.length&&p!==0&&p<xo[w].priority;w++);xo.splice(w,0,h),w===0&&sd(h)}};function pN(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function nb(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function $8(){}function YJ(h,p,w,k,F){if(F){if(typeof k=="function"){var V=k;k=function(){var $e=eb(ae);V.call($e)}}var ae=M8(p,k,h,0,null,!1,!1,"",$8);return h._reactRootContainer=ae,h[Hs]=ae.current,au(h.nodeType===8?h.parentNode:h),Sf(),ae}for(;F=h.lastChild;)h.removeChild(F);if(typeof k=="function"){var we=k;k=function(){var $e=eb(Pe);we.call($e)}}var Pe=hN(h,0,!1,null,null,!1,!1,"",$8);return h._reactRootContainer=Pe,h[Hs]=Pe.current,au(h.nodeType===8?h.parentNode:h),Sf(function(){Zy(p,Pe,w,k)}),Pe}function rb(h,p,w,k,F){var V=w._reactRootContainer;if(V){var ae=V;if(typeof F=="function"){var we=F;F=function(){var Pe=eb(ae);we.call(Pe)}}Zy(p,ae,h,F)}else ae=YJ(w,p,h,F,k);return eb(ae)}Hm=function(h){switch(h.tag){case 3:var p=h.stateNode;if(p.current.memoizedState.isDehydrated){var w=Uc(p.pendingLanes);w!==0&&(td(p,w|1),Pa(p,Pr()),(qn&6)===0&&(pp=Pr()+500,K()))}break;case 13:Sf(function(){var k=Hn(h,1);if(k!==null){var F=ra();hl(k,h,1,F)}}),fN(h,1)}},tf=function(h){if(h.tag===13){var p=Hn(h,134217728);if(p!==null){var w=ra();hl(p,h,134217728,w)}fN(h,134217728)}},Wm=function(h){if(h.tag===13){var p=Fd(h),w=Hn(h,p);if(w!==null){var k=ra();hl(w,h,p,k)}fN(h,p)}},po=function(){return Bn},Hc=function(h,p){var w=Bn;try{return Bn=h,p()}finally{Bn=w}},dr=function(h,p,w){switch(p){case"input":if(ht(h,w),p=w.name,w.type==="radio"&&p!=null){for(w=h;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<w.length;p++){var k=w[p];if(k!==h&&k.form===h.form){var F=yf(k);if(!F)throw Error(r(90));me(k),ht(k,F)}}}break;case"textarea":Vt(h,w);break;case"select":p=w.value,p!=null&&ft(h,!!w.multiple,p,!1)}},vr=aN,Dn=Sf;var QJ={usingClientEntryPoint:!1,Events:[Pd,cu,yf,mt,Ht,aN]},F0={findFiberByHostInstance:ec,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XJ={bundleType:F0.bundleType,version:F0.version,rendererPackageName:F0.rendererPackageName,rendererConfig:F0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=Fl(h),h===null?null:h.stateNode},findFiberByHostInstance:F0.findFiberByHostInstance||GJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sb.isDisabled&&sb.supportsFiber)try{qc=sb.inject(XJ),pa=sb}catch{}}return Aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QJ,Aa.createPortal=function(h,p){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pN(p))throw Error(r(200));return KJ(h,p,null,w)},Aa.createRoot=function(h,p){if(!pN(h))throw Error(r(299));var w=!1,k="",F=B8;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(k=p.identifierPrefix),p.onRecoverableError!==void 0&&(F=p.onRecoverableError)),p=hN(h,1,!1,null,null,w,!1,k,F),h[Hs]=p.current,au(h.nodeType===8?h.parentNode:h),new mN(p)},Aa.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=Fl(p),h=h===null?null:h.stateNode,h},Aa.flushSync=function(h){return Sf(h)},Aa.hydrate=function(h,p,w){if(!nb(p))throw Error(r(200));return rb(null,h,p,!0,w)},Aa.hydrateRoot=function(h,p,w){if(!pN(h))throw Error(r(405));var k=w!=null&&w.hydratedSources||null,F=!1,V="",ae=B8;if(w!=null&&(w.unstable_strictMode===!0&&(F=!0),w.identifierPrefix!==void 0&&(V=w.identifierPrefix),w.onRecoverableError!==void 0&&(ae=w.onRecoverableError)),p=M8(p,null,h,1,w??null,F,!1,V,ae),h[Hs]=p.current,au(h),k)for(h=0;h<k.length;h++)w=k[h],F=w._getVersion,F=F(w._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[w,F]:p.mutableSourceEagerHydrationData.push(w,F);return new tb(p)},Aa.render=function(h,p,w){if(!nb(p))throw Error(r(200));return rb(null,h,p,!1,w)},Aa.unmountComponentAtNode=function(h){if(!nb(h))throw Error(r(40));return h._reactRootContainer?(Sf(function(){rb(null,null,h,!1,function(){h._reactRootContainer=null,h[Hs]=null})}),!0):!1},Aa.unstable_batchedUpdates=aN,Aa.unstable_renderSubtreeIntoContainer=function(h,p,w,k){if(!nb(w))throw Error(r(200));if(h==null||h._reactInternals===void 0)throw Error(r(38));return rb(h,p,w,!1,k)},Aa.version="18.3.1-next-f1338f8080-20240426",Aa}var Z8;function hq(){if(Z8)return bN.exports;Z8=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),bN.exports=oZ(),bN.exports}var eO;function lZ(){if(eO)return ob;eO=1;var e=hq();return ob.createRoot=e.createRoot,ob.hydrateRoot=e.hydrateRoot,ob}var cZ=lZ();const uZ=ur(cZ),dZ=20,hZ=1e6,Su={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let NN=0;function fZ(){return NN=(NN+1)%Number.MAX_VALUE,NN.toString()}const _N=new Map,tO=e=>{if(_N.has(e))return;const n=setTimeout(()=>{_N.delete(e),wx({type:Su.REMOVE_TOAST,toastId:e})},hZ);_N.set(e,n)},mZ=(e,n)=>{switch(n.type){case Su.ADD_TOAST:return{...e,toasts:[n.toast,...e.toasts].slice(0,dZ)};case Su.UPDATE_TOAST:return{...e,toasts:e.toasts.map(r=>r.id===n.toast.id?{...r,...n.toast}:r)};case Su.DISMISS_TOAST:{const{toastId:r}=n;return r?tO(r):e.toasts.forEach(s=>{tO(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case Su.REMOVE_TOAST:return n.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==n.toastId)}}},Wb=[];let Kb={toasts:[]};function wx(e){Kb=mZ(Kb,e),Wb.forEach(n=>{n(Kb)})}function pZ({...e}){const n=fZ(),r=a=>wx({type:Su.UPDATE_TOAST,toast:{...a,id:n}}),s=()=>wx({type:Su.DISMISS_TOAST,toastId:n});return wx({type:Su.ADD_TOAST,toast:{...e,id:n,open:!0,onOpenChange:a=>{a||s()}}}),{id:n,dismiss:s,update:r}}function gZ(){const[e,n]=C.useState(Kb);return C.useEffect(()=>(Wb.push(n),()=>{const r=Wb.indexOf(n);r>-1&&Wb.splice(r,1)}),[e]),{...e,toast:pZ,dismiss:r=>wx({type:Su.DISMISS_TOAST,toastId:r})}}function fq(e){var n,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(n=0;n<a;n++)e[n]&&(r=fq(e[n]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function zn(){for(var e,n,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(n=fq(e))&&(s&&(s+=" "),s+=n);return s}const nO=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,rO=zn,Gg=(e,n)=>r=>{var s;if((n==null?void 0:n.variants)==null)return rO(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=n,l=Object.keys(a).map(d=>{const f=r==null?void 0:r[d],m=o==null?void 0:o[d];if(f===null)return null;const g=nO(f)||nO(m);return a[d][g]}),c=r&&Object.entries(r).reduce((d,f)=>{let[m,g]=f;return g===void 0||(d[m]=g),d},{}),u=n==null||(s=n.compoundVariants)===null||s===void 0?void 0:s.reduce((d,f)=>{let{class:m,className:g,...x}=f;return Object.entries(x).every(v=>{let[y,b]=v;return Array.isArray(b)?b.includes({...o,...c}[y]):{...o,...c}[y]===b})?[...d,m,g]:d},[]);return rO(e,l,u,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mq=(...e)=>e.filter((n,r,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===r).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vZ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yZ=C.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:l,...c},u)=>C.createElement("svg",{ref:u,...vZ,width:n,height:n,stroke:e,strokeWidth:s?Number(r)*24/Number(n):r,className:mq("lucide",a),...c},[...l.map(([d,f])=>C.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=(e,n)=>{const r=C.forwardRef(({className:s,...a},o)=>C.createElement(yZ,{ref:o,iconNode:n,className:mq(`lucide-${xZ(e)}`,s),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Gb=lt("Activity",bZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],sO=lt("ArrowDownToLine",wZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],DP=lt("ArrowLeftRight",jZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],$i=lt("ArrowLeft",NZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Z=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],IP=lt("ArrowRight",_Z);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]],iO=lt("ArrowUpFromLine",SZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CZ=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],T4=lt("BookOpen",CZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PZ=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],AZ=lt("Box",PZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],EZ=lt("Briefcase",kZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TZ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],zx=lt("Calendar",TZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OZ=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],g1=lt("Camera",OZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LZ=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],RZ=lt("ChartColumn",LZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DZ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vh=lt("Check",DZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IZ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],La=lt("ChevronDown",IZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],pq=lt("ChevronRight",MZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FZ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],uh=lt("ChevronUp",FZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BZ=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],$Z=lt("ChevronsUpDown",BZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vn=lt("CircleAlert",qZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zZ=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ei=lt("CircleCheckBig",zZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Nr=lt("CircleCheck",UZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ux=lt("CircleHelp",VZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ha=lt("CircleX",HZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],aO=lt("Circle",WZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Gw=lt("Clock",KZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GZ=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],YZ=lt("Copy",GZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QZ=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],XZ=lt("CreditCard",QZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JZ=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],ZZ=lt("Crop",JZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eee=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],yh=lt("Crown",eee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tee=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Tu=lt("DollarSign",tee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nee=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],MP=lt("Download",nee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ree=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],FP=lt("ExternalLink",ree);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const see=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],x1=lt("EyeOff",see);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iee=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Yw=lt("Eye",iee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aee=[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]],oee=lt("FastForward",aee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lee=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],O4=lt("FileSpreadsheet",lee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cee=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],L4=lt("FileText",cee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uee=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],gq=lt("Flag",uee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dee=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],hee=lt("Flame",dee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],oO=lt("Globe",fee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mee=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],R4=lt("Grid3x3",mee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pee=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Tm=lt("Heart",pee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gee=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],xee=lt("House",gee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vee=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],yee=lt("Image",vee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],bh=lt("Info",bee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wee=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],v1=lt("Layers",wee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jee=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Hp=lt("Leaf",jee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nee=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],lO=lt("Library",Nee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ee=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],See=lt("Lightbulb",_ee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cee=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],xq=lt("List",Cee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pee=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Cn=lt("LoaderCircle",Pee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aee=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],kee=lt("LockOpen",Aee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eee=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ff=lt("Lock",Eee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tee=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Oee=lt("LogOut",Tee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lee=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Cu=lt("Mail",Lee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ree=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],D4=lt("MapPin",Ree);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dee=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Iee=lt("Maximize2",Dee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mee=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],Fee=lt("Menu",Mee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bee=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],$ee=lt("MessageCircle",Bee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qee=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],jx=lt("MessageSquare",qee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zee=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],wh=lt("Package",zee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uee=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],cO=lt("PenLine",Uee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vee=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Hee=lt("Pen",Vee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wee=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],vq=lt("Play",Wee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kee=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ra=lt("Plus",Kee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gee=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$s=lt("RefreshCw",Gee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yee=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Qee=lt("RotateCw",Yee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xee=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],y1=lt("Ruler",Xee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jee=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Zee=lt("Save",Jee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ete=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m16 16-1.9-1.9",key:"1dq9hf"}]],tte=lt("ScanSearch",ete);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nte=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],fs=lt("Search",nte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rte=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],I4=lt("Send",rte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ste=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wp=lt("Settings",ste);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ite=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],ate=lt("ShieldAlert",ite);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ote=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],lte=lt("ShieldOff",ote);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cte=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],yq=lt("Shield",cte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ute=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Da=lt("Sparkles",ute);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dte=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],dm=lt("SquarePen",dte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hte=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Qw=lt("Star",hte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fte=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],BP=lt("Tags",fte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mte=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Vx=lt("Target",mte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pte=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],yc=lt("Trash2",pte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gte=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],xte=lt("TrendingDown",gte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vte=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Hx=lt("TrendingUp",vte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yte=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ou=lt("TriangleAlert",yte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bte=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],wte=lt("Undo",bte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jte=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Wx=lt("Upload",jte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nte=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],uO=lt("UserCheck",Nte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _te=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],dO=lt("UserCog",_te);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ste=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Kp=lt("UserPlus",Ste);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cte=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],b1=lt("UserX",Cte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pte=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hm=lt("User",Pte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ate=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],nm=lt("Users",Ate);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kte=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],Ete=lt("Weight",kte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tte=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Yv=lt("Wrench",Tte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ote=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zi=lt("X",Ote);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lte=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Rte=lt("ZoomIn",Lte);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dte=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Ite=lt("ZoomOut",Dte),M4="-",Mte=e=>{const n=Bte(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:l=>{const c=l.split(M4);return c[0]===""&&c.length!==1&&c.shift(),bq(c,n)||Fte(l)},getConflictingClassGroupIds:(l,c)=>{const u=r[l]||[];return c&&s[l]?[...u,...s[l]]:u}}},bq=(e,n)=>{var l;if(e.length===0)return n.classGroupId;const r=e[0],s=n.nextPart.get(r),a=s?bq(e.slice(1),s):void 0;if(a)return a;if(n.validators.length===0)return;const o=e.join(M4);return(l=n.validators.find(({validator:c})=>c(o)))==null?void 0:l.classGroupId},hO=/^\[(.+)\]$/,Fte=e=>{if(hO.test(e)){const n=hO.exec(e)[1],r=n==null?void 0:n.substring(0,n.indexOf(":"));if(r)return"arbitrary.."+r}},Bte=e=>{const{theme:n,classGroups:r}=e,s={nextPart:new Map,validators:[]};for(const a in r)$P(r[a],s,a,n);return s},$P=(e,n,r,s)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?n:fO(n,a);o.classGroupId=r;return}if(typeof a=="function"){if($te(a)){$P(a(s),n,r,s);return}n.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,l])=>{$P(l,fO(n,o),r,s)})})},fO=(e,n)=>{let r=e;return n.split(M4).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},$te=e=>e.isThemeGetter,qte=e=>{if(e<1)return{get:()=>{},set:()=>{}};let n=0,r=new Map,s=new Map;const a=(o,l)=>{r.set(o,l),n++,n>e&&(n=0,s=r,r=new Map)};return{get(o){let l=r.get(o);if(l!==void 0)return l;if((l=s.get(o))!==void 0)return a(o,l),l},set(o,l){r.has(o)?r.set(o,l):a(o,l)}}},qP="!",zP=":",zte=zP.length,Ute=e=>{const{prefix:n,experimentalParseClassName:r}=e;let s=a=>{const o=[];let l=0,c=0,u=0,d;for(let v=0;v<a.length;v++){let y=a[v];if(l===0&&c===0){if(y===zP){o.push(a.slice(u,v)),u=v+zte;continue}if(y==="/"){d=v;continue}}y==="["?l++:y==="]"?l--:y==="("?c++:y===")"&&c--}const f=o.length===0?a:a.substring(u),m=Vte(f),g=m!==f,x=d&&d>u?d-u:void 0;return{modifiers:o,hasImportantModifier:g,baseClassName:m,maybePostfixModifierPosition:x}};if(n){const a=n+zP,o=s;s=l=>l.startsWith(a)?o(l.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(r){const a=s;s=o=>r({className:o,parseClassName:a})}return s},Vte=e=>e.endsWith(qP)?e.substring(0,e.length-1):e.startsWith(qP)?e.substring(1):e,Hte=e=>{const n=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const a=[];let o=[];return s.forEach(l=>{l[0]==="["||n[l]?(a.push(...o.sort(),l),o=[]):o.push(l)}),a.push(...o.sort()),a}},Wte=e=>({cache:qte(e.cacheSize),parseClassName:Ute(e),sortModifiers:Hte(e),...Mte(e)}),Kte=/\s+/,Gte=(e,n)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:o}=n,l=[],c=e.trim().split(Kte);let u="";for(let d=c.length-1;d>=0;d-=1){const f=c[d],{isExternal:m,modifiers:g,hasImportantModifier:x,baseClassName:v,maybePostfixModifierPosition:y}=r(f);if(m){u=f+(u.length>0?" "+u:u);continue}let b=!!y,N=s(b?v.substring(0,y):v);if(!N){if(!b){u=f+(u.length>0?" "+u:u);continue}if(N=s(v),!N){u=f+(u.length>0?" "+u:u);continue}b=!1}const j=o(g).join(":"),S=x?j+qP:j,A=S+N;if(l.includes(A))continue;l.push(A);const P=a(N,b);for(let L=0;L<P.length;++L){const O=P[L];l.push(S+O)}u=f+(u.length>0?" "+u:u)}return u};function Yte(){let e=0,n,r,s="";for(;e<arguments.length;)(n=arguments[e++])&&(r=wq(n))&&(s&&(s+=" "),s+=r);return s}const wq=e=>{if(typeof e=="string")return e;let n,r="";for(let s=0;s<e.length;s++)e[s]&&(n=wq(e[s]))&&(r&&(r+=" "),r+=n);return r};function Qte(e,...n){let r,s,a,o=l;function l(u){const d=n.reduce((f,m)=>m(f),e());return r=Wte(d),s=r.cache.get,a=r.cache.set,o=c,c(u)}function c(u){const d=s(u);if(d)return d;const f=Gte(u,r);return a(u,f),f}return function(){return o(Yte.apply(null,arguments))}}const Ds=e=>{const n=r=>r[e]||[];return n.isThemeGetter=!0,n},jq=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Nq=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Xte=/^\d+\/\d+$/,Jte=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Zte=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ene=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,tne=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nne=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xp=e=>Xte.test(e),bn=e=>!!e&&!Number.isNaN(Number(e)),zd=e=>!!e&&Number.isInteger(Number(e)),SN=e=>e.endsWith("%")&&bn(e.slice(0,-1)),xu=e=>Jte.test(e),rne=()=>!0,sne=e=>Zte.test(e)&&!ene.test(e),_q=()=>!1,ine=e=>tne.test(e),ane=e=>nne.test(e),one=e=>!Ot(e)&&!Lt(e),lne=e=>Yg(e,Pq,_q),Ot=e=>jq.test(e),kf=e=>Yg(e,Aq,sne),CN=e=>Yg(e,fne,bn),mO=e=>Yg(e,Sq,_q),cne=e=>Yg(e,Cq,ane),lb=e=>Yg(e,kq,ine),Lt=e=>Nq.test(e),$0=e=>Qg(e,Aq),une=e=>Qg(e,mne),pO=e=>Qg(e,Sq),dne=e=>Qg(e,Pq),hne=e=>Qg(e,Cq),cb=e=>Qg(e,kq,!0),Yg=(e,n,r)=>{const s=jq.exec(e);return s?s[1]?n(s[1]):r(s[2]):!1},Qg=(e,n,r=!1)=>{const s=Nq.exec(e);return s?s[1]?n(s[1]):r:!1},Sq=e=>e==="position"||e==="percentage",Cq=e=>e==="image"||e==="url",Pq=e=>e==="length"||e==="size"||e==="bg-size",Aq=e=>e==="length",fne=e=>e==="number",mne=e=>e==="family-name",kq=e=>e==="shadow",pne=()=>{const e=Ds("color"),n=Ds("font"),r=Ds("text"),s=Ds("font-weight"),a=Ds("tracking"),o=Ds("leading"),l=Ds("breakpoint"),c=Ds("container"),u=Ds("spacing"),d=Ds("radius"),f=Ds("shadow"),m=Ds("inset-shadow"),g=Ds("text-shadow"),x=Ds("drop-shadow"),v=Ds("blur"),y=Ds("perspective"),b=Ds("aspect"),N=Ds("ease"),j=Ds("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...A(),Lt,Ot],L=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],R=()=>[Lt,Ot,u],q=()=>[xp,"full","auto",...R()],U=()=>[zd,"none","subgrid",Lt,Ot],D=()=>["auto",{span:["full",zd,Lt,Ot]},zd,Lt,Ot],M=()=>[zd,"auto",Lt,Ot],G=()=>["auto","min","max","fr",Lt,Ot],Y=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Z=()=>["start","end","center","stretch","center-safe","end-safe"],X=()=>["auto",...R()],re=()=>[xp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],z=()=>[e,Lt,Ot],te=()=>[...A(),pO,mO,{position:[Lt,Ot]}],le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Q=()=>["auto","cover","contain",dne,lne,{size:[Lt,Ot]}],T=()=>[SN,$0,kf],B=()=>["","none","full",d,Lt,Ot],H=()=>["",bn,$0,kf],ee=()=>["solid","dashed","dotted","double"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>[bn,SN,pO,mO],W=()=>["","none",v,Lt,Ot],J=()=>["none",bn,Lt,Ot],pe=()=>["none",bn,Lt,Ot],ue=()=>[bn,Lt,Ot],me=()=>[xp,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xu],breakpoint:[xu],color:[rne],container:[xu],"drop-shadow":[xu],ease:["in","out","in-out"],font:[one],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xu],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xu],shadow:[xu],spacing:["px",bn],text:[xu],"text-shadow":[xu],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xp,Ot,Lt,b]}],container:["container"],columns:[{columns:[bn,Ot,Lt,c]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:q()}],"inset-x":[{"inset-x":q()}],"inset-y":[{"inset-y":q()}],start:[{start:q()}],end:[{end:q()}],top:[{top:q()}],right:[{right:q()}],bottom:[{bottom:q()}],left:[{left:q()}],visibility:["visible","invisible","collapse"],z:[{z:[zd,"auto",Lt,Ot]}],basis:[{basis:[xp,"full","auto",c,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[bn,xp,"auto","initial","none",Ot]}],grow:[{grow:["",bn,Lt,Ot]}],shrink:[{shrink:["",bn,Lt,Ot]}],order:[{order:[zd,"first","last","none",Lt,Ot]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":G()}],"auto-rows":[{"auto-rows":G()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...Y(),"normal"]}],"justify-items":[{"justify-items":[...Z(),"normal"]}],"justify-self":[{"justify-self":["auto",...Z()]}],"align-content":[{content:["normal",...Y()]}],"align-items":[{items:[...Z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Z(),{baseline:["","last"]}]}],"place-content":[{"place-content":Y()}],"place-items":[{"place-items":[...Z(),"baseline"]}],"place-self":[{"place-self":["auto",...Z()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:X()}],mx:[{mx:X()}],my:[{my:X()}],ms:[{ms:X()}],me:[{me:X()}],mt:[{mt:X()}],mr:[{mr:X()}],mb:[{mb:X()}],ml:[{ml:X()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[c,"screen",...re()]}],"min-w":[{"min-w":[c,"screen","none",...re()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...re()]}],h:[{h:["screen","lh",...re()]}],"min-h":[{"min-h":["screen","lh","none",...re()]}],"max-h":[{"max-h":["screen","lh",...re()]}],"font-size":[{text:["base",r,$0,kf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,Lt,CN]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",SN,Ot]}],"font-family":[{font:[une,Ot,n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Lt,Ot]}],"line-clamp":[{"line-clamp":[bn,"none",Lt,CN]}],leading:[{leading:[o,...R()]}],"list-image":[{"list-image":["none",Lt,Ot]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Lt,Ot]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[bn,"from-font","auto",Lt,kf]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[bn,"auto",Lt,Ot]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Lt,Ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Lt,Ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:le()}],"bg-size":[{bg:Q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},zd,Lt,Ot],radial:["",Lt,Ot],conic:[zd,Lt,Ot]},hne,cne]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:T()}],"gradient-via-pos":[{via:T()}],"gradient-to-pos":[{to:T()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:B()}],"rounded-s":[{"rounded-s":B()}],"rounded-e":[{"rounded-e":B()}],"rounded-t":[{"rounded-t":B()}],"rounded-r":[{"rounded-r":B()}],"rounded-b":[{"rounded-b":B()}],"rounded-l":[{"rounded-l":B()}],"rounded-ss":[{"rounded-ss":B()}],"rounded-se":[{"rounded-se":B()}],"rounded-ee":[{"rounded-ee":B()}],"rounded-es":[{"rounded-es":B()}],"rounded-tl":[{"rounded-tl":B()}],"rounded-tr":[{"rounded-tr":B()}],"rounded-br":[{"rounded-br":B()}],"rounded-bl":[{"rounded-bl":B()}],"border-w":[{border:H()}],"border-w-x":[{"border-x":H()}],"border-w-y":[{"border-y":H()}],"border-w-s":[{"border-s":H()}],"border-w-e":[{"border-e":H()}],"border-w-t":[{"border-t":H()}],"border-w-r":[{"border-r":H()}],"border-w-b":[{"border-b":H()}],"border-w-l":[{"border-l":H()}],"divide-x":[{"divide-x":H()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":H()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ee(),"hidden","none"]}],"divide-style":[{divide:[...ee(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[bn,Lt,Ot]}],"outline-w":[{outline:["",bn,$0,kf]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",f,cb,lb]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",m,cb,lb]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[bn,kf]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":H()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",g,cb,lb]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[bn,Lt,Ot]}],"mix-blend":[{"mix-blend":[...ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[bn]}],"mask-image-linear-from-pos":[{"mask-linear-from":he()}],"mask-image-linear-to-pos":[{"mask-linear-to":he()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":he()}],"mask-image-t-to-pos":[{"mask-t-to":he()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":he()}],"mask-image-r-to-pos":[{"mask-r-to":he()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":he()}],"mask-image-b-to-pos":[{"mask-b-to":he()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":he()}],"mask-image-l-to-pos":[{"mask-l-to":he()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":he()}],"mask-image-x-to-pos":[{"mask-x-to":he()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":he()}],"mask-image-y-to-pos":[{"mask-y-to":he()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[Lt,Ot]}],"mask-image-radial-from-pos":[{"mask-radial-from":he()}],"mask-image-radial-to-pos":[{"mask-radial-to":he()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[bn]}],"mask-image-conic-from-pos":[{"mask-conic-from":he()}],"mask-image-conic-to-pos":[{"mask-conic-to":he()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:le()}],"mask-size":[{mask:Q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Lt,Ot]}],filter:[{filter:["","none",Lt,Ot]}],blur:[{blur:W()}],brightness:[{brightness:[bn,Lt,Ot]}],contrast:[{contrast:[bn,Lt,Ot]}],"drop-shadow":[{"drop-shadow":["","none",x,cb,lb]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",bn,Lt,Ot]}],"hue-rotate":[{"hue-rotate":[bn,Lt,Ot]}],invert:[{invert:["",bn,Lt,Ot]}],saturate:[{saturate:[bn,Lt,Ot]}],sepia:[{sepia:["",bn,Lt,Ot]}],"backdrop-filter":[{"backdrop-filter":["","none",Lt,Ot]}],"backdrop-blur":[{"backdrop-blur":W()}],"backdrop-brightness":[{"backdrop-brightness":[bn,Lt,Ot]}],"backdrop-contrast":[{"backdrop-contrast":[bn,Lt,Ot]}],"backdrop-grayscale":[{"backdrop-grayscale":["",bn,Lt,Ot]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[bn,Lt,Ot]}],"backdrop-invert":[{"backdrop-invert":["",bn,Lt,Ot]}],"backdrop-opacity":[{"backdrop-opacity":[bn,Lt,Ot]}],"backdrop-saturate":[{"backdrop-saturate":[bn,Lt,Ot]}],"backdrop-sepia":[{"backdrop-sepia":["",bn,Lt,Ot]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Lt,Ot]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[bn,"initial",Lt,Ot]}],ease:[{ease:["linear","initial",N,Lt,Ot]}],delay:[{delay:[bn,Lt,Ot]}],animate:[{animate:["none",j,Lt,Ot]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Lt,Ot]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:J()}],"rotate-x":[{"rotate-x":J()}],"rotate-y":[{"rotate-y":J()}],"rotate-z":[{"rotate-z":J()}],scale:[{scale:pe()}],"scale-x":[{"scale-x":pe()}],"scale-y":[{"scale-y":pe()}],"scale-z":[{"scale-z":pe()}],"scale-3d":["scale-3d"],skew:[{skew:ue()}],"skew-x":[{"skew-x":ue()}],"skew-y":[{"skew-y":ue()}],transform:[{transform:[Lt,Ot,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:me()}],"translate-x":[{"translate-x":me()}],"translate-y":[{"translate-y":me()}],"translate-z":[{"translate-z":me()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Lt,Ot]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Lt,Ot]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[bn,$0,kf,CN]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},gne=Qte(pne);function ut(...e){return gne(zn(e))}const Eq=C.forwardRef(({...e},n)=>i.jsx("div",{ref:n,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...e}));Eq.displayName="ToastProvider";const Tq=C.forwardRef(({...e},n)=>i.jsx("div",{ref:n,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...e}));Tq.displayName="ToastViewport";const xne=Gg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Oq=C.forwardRef(({className:e,variant:n,...r},s)=>i.jsx("div",{ref:s,className:ut(xne({variant:n}),e),...r}));Oq.displayName="Toast";const vne=C.forwardRef(({className:e,...n},r)=>i.jsx("div",{ref:r,className:ut("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...n}));vne.displayName="ToastAction";const Lq=C.forwardRef(({className:e,...n},r)=>i.jsx("button",{ref:r,className:ut("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...n,children:i.jsx(zi,{className:"h-4 w-4"})}));Lq.displayName="ToastClose";const Rq=C.forwardRef(({className:e,...n},r)=>i.jsx("div",{ref:r,className:ut("text-sm font-semibold",e),...n}));Rq.displayName="ToastTitle";const Dq=C.forwardRef(({className:e,...n},r)=>i.jsx("div",{ref:r,className:ut("text-sm opacity-90",e),...n}));Dq.displayName="ToastDescription";function yne(){const{toasts:e}=gZ();return i.jsxs(Eq,{children:[e.map(function({id:n,title:r,description:s,action:a,...o}){return i.jsxs(Oq,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx(Rq,{children:r}),s&&i.jsx(Dq,{children:s})]}),a,i.jsx(Lq,{})]},n)}),i.jsx(Tq,{})]})}var Xg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},bne={setTimeout:(e,n)=>setTimeout(e,n),clearTimeout:e=>clearTimeout(e),setInterval:(e,n)=>setInterval(e,n),clearInterval:e=>clearInterval(e)},Jd,k4,Q$,wne=(Q$=class{constructor(){zt(this,Jd,bne);zt(this,k4,!1)}setTimeoutProvider(e){_t(this,Jd,e)}setTimeout(e,n){return Ne(this,Jd).setTimeout(e,n)}clearTimeout(e){Ne(this,Jd).clearTimeout(e)}setInterval(e,n){return Ne(this,Jd).setInterval(e,n)}clearInterval(e){Ne(this,Jd).clearInterval(e)}},Jd=new WeakMap,k4=new WeakMap,Q$),$f=new wne;function jne(e){setTimeout(e,0)}var fm=typeof window>"u"||"Deno"in globalThis;function oa(){}function Nne(e,n){return typeof e=="function"?e(n):e}function UP(e){return typeof e=="number"&&e>=0&&e!==1/0}function Iq(e,n){return Math.max(e+(n||0)-Date.now(),0)}function dh(e,n){return typeof e=="function"?e(n):e}function Mo(e,n){return typeof e=="function"?e(n):e}function gO(e,n){const{type:r="all",exact:s,fetchStatus:a,predicate:o,queryKey:l,stale:c}=e;if(l){if(s){if(n.queryHash!==F4(l,n.options))return!1}else if(!Kx(n.queryKey,l))return!1}if(r!=="all"){const u=n.isActive();if(r==="active"&&!u||r==="inactive"&&u)return!1}return!(typeof c=="boolean"&&n.isStale()!==c||a&&a!==n.state.fetchStatus||o&&!o(n))}function xO(e,n){const{exact:r,status:s,predicate:a,mutationKey:o}=e;if(o){if(!n.options.mutationKey)return!1;if(r){if(mm(n.options.mutationKey)!==mm(o))return!1}else if(!Kx(n.options.mutationKey,o))return!1}return!(s&&n.state.status!==s||a&&!a(n))}function F4(e,n){return((n==null?void 0:n.queryKeyHashFn)||mm)(e)}function mm(e){return JSON.stringify(e,(n,r)=>VP(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function Kx(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?Object.keys(n).every(r=>Kx(e[r],n[r])):!1}var _ne=Object.prototype.hasOwnProperty;function Mq(e,n){if(e===n)return e;const r=vO(e)&&vO(n);if(!r&&!(VP(e)&&VP(n)))return n;const a=(r?e:Object.keys(e)).length,o=r?n:Object.keys(n),l=o.length,c=r?new Array(l):{};let u=0;for(let d=0;d<l;d++){const f=r?d:o[d],m=e[f],g=n[f];if(m===g){c[f]=m,(r?d<a:_ne.call(e,f))&&u++;continue}if(m===null||g===null||typeof m!="object"||typeof g!="object"){c[f]=g;continue}const x=Mq(m,g);c[f]=x,x===m&&u++}return a===l&&u===a?e:c}function w1(e,n){if(!n||Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}function vO(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function VP(e){if(!yO(e))return!1;const n=e.constructor;if(n===void 0)return!0;const r=n.prototype;return!(!yO(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function yO(e){return Object.prototype.toString.call(e)==="[object Object]"}function Sne(e){return new Promise(n=>{$f.setTimeout(n,e)})}function HP(e,n,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,n):r.structuralSharing!==!1?Mq(e,n):n}function Cne(e,n,r=0){const s=[...e,n];return r&&s.length>r?s.slice(1):s}function Pne(e,n,r=0){const s=[n,...e];return r&&s.length>r?s.slice(0,-1):s}var B4=Symbol();function Fq(e,n){return!e.queryFn&&(n!=null&&n.initialPromise)?()=>n.initialPromise:!e.queryFn||e.queryFn===B4?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Bq(e,n){return typeof e=="function"?e(...n):!!e}var Kf,Zd,og,X$,Ane=(X$=class extends Xg{constructor(){super();zt(this,Kf);zt(this,Zd);zt(this,og);_t(this,og,n=>{if(!fm&&window.addEventListener){const r=()=>n();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ne(this,Zd)||this.setEventListener(Ne(this,og))}onUnsubscribe(){var n;this.hasListeners()||((n=Ne(this,Zd))==null||n.call(this),_t(this,Zd,void 0))}setEventListener(n){var r;_t(this,og,n),(r=Ne(this,Zd))==null||r.call(this),_t(this,Zd,n(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(n){Ne(this,Kf)!==n&&(_t(this,Kf,n),this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(r=>{r(n)})}isFocused(){var n;return typeof Ne(this,Kf)=="boolean"?Ne(this,Kf):((n=globalThis.document)==null?void 0:n.visibilityState)!=="hidden"}},Kf=new WeakMap,Zd=new WeakMap,og=new WeakMap,X$),$4=new Ane;function WP(){let e,n;const r=new Promise((a,o)=>{e=a,n=o});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),n(a)},r}var kne=jne;function Ene(){let e=[],n=0,r=c=>{c()},s=c=>{c()},a=kne;const o=c=>{n?e.push(c):a(()=>{r(c)})},l=()=>{const c=e;e=[],c.length&&a(()=>{s(()=>{c.forEach(u=>{r(u)})})})};return{batch:c=>{let u;n++;try{u=c()}finally{n--,n||l()}return u},batchCalls:c=>(...u)=>{o(()=>{c(...u)})},schedule:o,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{s=c},setScheduler:c=>{a=c}}}var Fs=Ene(),lg,eh,cg,J$,Tne=(J$=class extends Xg{constructor(){super();zt(this,lg,!0);zt(this,eh);zt(this,cg);_t(this,cg,n=>{if(!fm&&window.addEventListener){const r=()=>n(!0),s=()=>n(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){Ne(this,eh)||this.setEventListener(Ne(this,cg))}onUnsubscribe(){var n;this.hasListeners()||((n=Ne(this,eh))==null||n.call(this),_t(this,eh,void 0))}setEventListener(n){var r;_t(this,cg,n),(r=Ne(this,eh))==null||r.call(this),_t(this,eh,n(this.setOnline.bind(this)))}setOnline(n){Ne(this,lg)!==n&&(_t(this,lg,n),this.listeners.forEach(s=>{s(n)}))}isOnline(){return Ne(this,lg)}},lg=new WeakMap,eh=new WeakMap,cg=new WeakMap,J$),j1=new Tne;function One(e){return Math.min(1e3*2**e,3e4)}function $q(e){return(e??"online")==="online"?j1.isOnline():!0}var KP=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function qq(e){let n=!1,r=0,s;const a=WP(),o=()=>a.status!=="pending",l=y=>{var b;if(!o()){const N=new KP(y);g(N),(b=e.onCancel)==null||b.call(e,N)}},c=()=>{n=!0},u=()=>{n=!1},d=()=>$4.isFocused()&&(e.networkMode==="always"||j1.isOnline())&&e.canRun(),f=()=>$q(e.networkMode)&&e.canRun(),m=y=>{o()||(s==null||s(),a.resolve(y))},g=y=>{o()||(s==null||s(),a.reject(y))},x=()=>new Promise(y=>{var b;s=N=>{(o()||d())&&y(N)},(b=e.onPause)==null||b.call(e)}).then(()=>{var y;s=void 0,o()||(y=e.onContinue)==null||y.call(e)}),v=()=>{if(o())return;let y;const b=r===0?e.initialPromise:void 0;try{y=b??e.fn()}catch(N){y=Promise.reject(N)}Promise.resolve(y).then(m).catch(N=>{var L;if(o())return;const j=e.retry??(fm?0:3),S=e.retryDelay??One,A=typeof S=="function"?S(r,N):S,P=j===!0||typeof j=="number"&&r<j||typeof j=="function"&&j(r,N);if(n||!P){g(N);return}r++,(L=e.onFail)==null||L.call(e,r,N),Sne(A).then(()=>d()?void 0:x()).then(()=>{n?g(N):v()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(s==null||s(),a),cancelRetry:c,continueRetry:u,canStart:f,start:()=>(f()?v():x().then(v),a)}}var Gf,Z$,zq=(Z$=class{constructor(){zt(this,Gf)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),UP(this.gcTime)&&_t(this,Gf,$f.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(fm?1/0:300*1e3))}clearGcTimeout(){Ne(this,Gf)&&($f.clearTimeout(Ne(this,Gf)),_t(this,Gf,void 0))}},Gf=new WeakMap,Z$),Yf,ug,Io,Qf,Qs,Vv,Xf,yl,bu,eq,Lne=(eq=class extends zq{constructor(n){super();zt(this,yl);zt(this,Yf);zt(this,ug);zt(this,Io);zt(this,Qf);zt(this,Qs);zt(this,Vv);zt(this,Xf);_t(this,Xf,!1),_t(this,Vv,n.defaultOptions),this.setOptions(n.options),this.observers=[],_t(this,Qf,n.client),_t(this,Io,Ne(this,Qf).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,_t(this,Yf,bO(this.options)),this.state=n.state??Ne(this,Yf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Ne(this,Qs))==null?void 0:n.promise}setOptions(n){if(this.options={...Ne(this,Vv),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=bO(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),_t(this,Yf,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ne(this,Io).remove(this)}setData(n,r){const s=HP(this.state.data,n,this.options);return xn(this,yl,bu).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){xn(this,yl,bu).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=Ne(this,Qs))==null?void 0:s.promise;return(a=Ne(this,Qs))==null||a.cancel(n),r?r.then(oa).catch(oa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ne(this,Yf))}isActive(){return this.observers.some(n=>Mo(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===B4||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>dh(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Iq(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Ne(this,Qs))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Ne(this,Qs))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Ne(this,Io).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Ne(this,Qs)&&(Ne(this,Xf)?Ne(this,Qs).cancel({revert:!0}):Ne(this,Qs).cancelRetry()),this.scheduleGc()),Ne(this,Io).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xn(this,yl,bu).call(this,{type:"invalidate"})}async fetch(n,r){var u,d,f,m,g,x,v,y,b,N,j,S;if(this.state.fetchStatus!=="idle"&&((u=Ne(this,Qs))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ne(this,Qs))return Ne(this,Qs).continueRetry(),Ne(this,Qs).promise}if(n&&this.setOptions(n),!this.options.queryFn){const A=this.observers.find(P=>P.options.queryFn);A&&this.setOptions(A.options)}const s=new AbortController,a=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(_t(this,Xf,!0),s.signal)})},o=()=>{const A=Fq(this.options,r),L=(()=>{const O={client:Ne(this,Qf),queryKey:this.queryKey,meta:this.meta};return a(O),O})();return _t(this,Xf,!1),this.options.persister?this.options.persister(A,L,this):A(L)},c=(()=>{const A={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Ne(this,Qf),state:this.state,fetchFn:o};return a(A),A})();(d=this.options.behavior)==null||d.onFetch(c,this),_t(this,ug,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=c.fetchOptions)==null?void 0:f.meta))&&xn(this,yl,bu).call(this,{type:"fetch",meta:(m=c.fetchOptions)==null?void 0:m.meta}),_t(this,Qs,qq({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,onCancel:A=>{A instanceof KP&&A.revert&&this.setState({...Ne(this,ug),fetchStatus:"idle"}),s.abort()},onFail:(A,P)=>{xn(this,yl,bu).call(this,{type:"failed",failureCount:A,error:P})},onPause:()=>{xn(this,yl,bu).call(this,{type:"pause"})},onContinue:()=>{xn(this,yl,bu).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const A=await Ne(this,Qs).start();if(A===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(A),(x=(g=Ne(this,Io).config).onSuccess)==null||x.call(g,A,this),(y=(v=Ne(this,Io).config).onSettled)==null||y.call(v,A,this.state.error,this),A}catch(A){if(A instanceof KP){if(A.silent)return Ne(this,Qs).promise;if(A.revert){if(this.state.data===void 0)throw A;return this.state.data}}throw xn(this,yl,bu).call(this,{type:"error",error:A}),(N=(b=Ne(this,Io).config).onError)==null||N.call(b,A,this),(S=(j=Ne(this,Io).config).onSettled)==null||S.call(j,this.state.data,A,this),A}finally{this.scheduleGc()}}},Yf=new WeakMap,ug=new WeakMap,Io=new WeakMap,Qf=new WeakMap,Qs=new WeakMap,Vv=new WeakMap,Xf=new WeakMap,yl=new WeakSet,bu=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Uq(s.data,this.options),fetchMeta:n.meta??null};case"success":const a={...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return _t(this,ug,n.manual?a:void 0),a;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Fs.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Ne(this,Io).notify({query:this,type:"updated",action:n})})},eq);function Uq(e,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$q(n.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function bO(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,r=n!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ka,Ln,Hv,sa,Jf,dg,wu,th,Wv,hg,fg,Zf,em,nh,mg,ir,ox,GP,YP,QP,XP,JP,ZP,eA,Vq,tq,Rne=(tq=class extends Xg{constructor(n,r){super();zt(this,ir);zt(this,ka);zt(this,Ln);zt(this,Hv);zt(this,sa);zt(this,Jf);zt(this,dg);zt(this,wu);zt(this,th);zt(this,Wv);zt(this,hg);zt(this,fg);zt(this,Zf);zt(this,em);zt(this,nh);zt(this,mg,new Set);this.options=r,_t(this,ka,n),_t(this,th,null),_t(this,wu,WP()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Ne(this,Ln).addObserver(this),wO(Ne(this,Ln),this.options)?xn(this,ir,ox).call(this):this.updateResult(),xn(this,ir,XP).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return tA(Ne(this,Ln),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return tA(Ne(this,Ln),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,xn(this,ir,JP).call(this),xn(this,ir,ZP).call(this),Ne(this,Ln).removeObserver(this)}setOptions(n){const r=this.options,s=Ne(this,Ln);if(this.options=Ne(this,ka).defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Mo(this.options.enabled,Ne(this,Ln))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");xn(this,ir,eA).call(this),Ne(this,Ln).setOptions(this.options),r._defaulted&&!w1(this.options,r)&&Ne(this,ka).getQueryCache().notify({type:"observerOptionsUpdated",query:Ne(this,Ln),observer:this});const a=this.hasListeners();a&&jO(Ne(this,Ln),s,this.options,r)&&xn(this,ir,ox).call(this),this.updateResult(),a&&(Ne(this,Ln)!==s||Mo(this.options.enabled,Ne(this,Ln))!==Mo(r.enabled,Ne(this,Ln))||dh(this.options.staleTime,Ne(this,Ln))!==dh(r.staleTime,Ne(this,Ln)))&&xn(this,ir,GP).call(this);const o=xn(this,ir,YP).call(this);a&&(Ne(this,Ln)!==s||Mo(this.options.enabled,Ne(this,Ln))!==Mo(r.enabled,Ne(this,Ln))||o!==Ne(this,nh))&&xn(this,ir,QP).call(this,o)}getOptimisticResult(n){const r=Ne(this,ka).getQueryCache().build(Ne(this,ka),n),s=this.createResult(r,n);return Ine(this,s)&&(_t(this,sa,s),_t(this,dg,this.options),_t(this,Jf,Ne(this,Ln).state)),s}getCurrentResult(){return Ne(this,sa)}trackResult(n,r){return new Proxy(n,{get:(s,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&!this.options.experimental_prefetchInRender&&Ne(this,wu).status==="pending"&&Ne(this,wu).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(s,a))})}trackProp(n){Ne(this,mg).add(n)}getCurrentQuery(){return Ne(this,Ln)}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const r=Ne(this,ka).defaultQueryOptions(n),s=Ne(this,ka).getQueryCache().build(Ne(this,ka),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(n){return xn(this,ir,ox).call(this,{...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),Ne(this,sa)))}createResult(n,r){var q;const s=Ne(this,Ln),a=this.options,o=Ne(this,sa),l=Ne(this,Jf),c=Ne(this,dg),d=n!==s?n.state:Ne(this,Hv),{state:f}=n;let m={...f},g=!1,x;if(r._optimisticResults){const U=this.hasListeners(),D=!U&&wO(n,r),M=U&&jO(n,s,r,a);(D||M)&&(m={...m,...Uq(f.data,n.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:v,errorUpdatedAt:y,status:b}=m;x=m.data;let N=!1;if(r.placeholderData!==void 0&&x===void 0&&b==="pending"){let U;o!=null&&o.isPlaceholderData&&r.placeholderData===(c==null?void 0:c.placeholderData)?(U=o.data,N=!0):U=typeof r.placeholderData=="function"?r.placeholderData((q=Ne(this,fg))==null?void 0:q.state.data,Ne(this,fg)):r.placeholderData,U!==void 0&&(b="success",x=HP(o==null?void 0:o.data,U,r),g=!0)}if(r.select&&x!==void 0&&!N)if(o&&x===(l==null?void 0:l.data)&&r.select===Ne(this,Wv))x=Ne(this,hg);else try{_t(this,Wv,r.select),x=r.select(x),x=HP(o==null?void 0:o.data,x,r),_t(this,hg,x),_t(this,th,null)}catch(U){_t(this,th,U)}Ne(this,th)&&(v=Ne(this,th),x=Ne(this,hg),y=Date.now(),b="error");const j=m.fetchStatus==="fetching",S=b==="pending",A=b==="error",P=S&&j,L=x!==void 0,R={status:b,fetchStatus:m.fetchStatus,isPending:S,isSuccess:b==="success",isError:A,isInitialLoading:P,isLoading:P,data:x,dataUpdatedAt:m.dataUpdatedAt,error:v,errorUpdatedAt:y,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:j,isRefetching:j&&!S,isLoadingError:A&&!L,isPaused:m.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:A&&L,isStale:q4(n,r),refetch:this.refetch,promise:Ne(this,wu),isEnabled:Mo(r.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const U=G=>{R.status==="error"?G.reject(R.error):R.data!==void 0&&G.resolve(R.data)},D=()=>{const G=_t(this,wu,R.promise=WP());U(G)},M=Ne(this,wu);switch(M.status){case"pending":n.queryHash===s.queryHash&&U(M);break;case"fulfilled":(R.status==="error"||R.data!==M.value)&&D();break;case"rejected":(R.status!=="error"||R.error!==M.reason)&&D();break}}return R}updateResult(){const n=Ne(this,sa),r=this.createResult(Ne(this,Ln),this.options);if(_t(this,Jf,Ne(this,Ln).state),_t(this,dg,this.options),Ne(this,Jf).data!==void 0&&_t(this,fg,Ne(this,Ln)),w1(r,n))return;_t(this,sa,r);const s=()=>{if(!n)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!Ne(this,mg).size)return!0;const l=new Set(o??Ne(this,mg));return this.options.throwOnError&&l.add("error"),Object.keys(Ne(this,sa)).some(c=>{const u=c;return Ne(this,sa)[u]!==n[u]&&l.has(u)})};xn(this,ir,Vq).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&xn(this,ir,XP).call(this)}},ka=new WeakMap,Ln=new WeakMap,Hv=new WeakMap,sa=new WeakMap,Jf=new WeakMap,dg=new WeakMap,wu=new WeakMap,th=new WeakMap,Wv=new WeakMap,hg=new WeakMap,fg=new WeakMap,Zf=new WeakMap,em=new WeakMap,nh=new WeakMap,mg=new WeakMap,ir=new WeakSet,ox=function(n){xn(this,ir,eA).call(this);let r=Ne(this,Ln).fetch(this.options,n);return n!=null&&n.throwOnError||(r=r.catch(oa)),r},GP=function(){xn(this,ir,JP).call(this);const n=dh(this.options.staleTime,Ne(this,Ln));if(fm||Ne(this,sa).isStale||!UP(n))return;const s=Iq(Ne(this,sa).dataUpdatedAt,n)+1;_t(this,Zf,$f.setTimeout(()=>{Ne(this,sa).isStale||this.updateResult()},s))},YP=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Ne(this,Ln)):this.options.refetchInterval)??!1},QP=function(n){xn(this,ir,ZP).call(this),_t(this,nh,n),!(fm||Mo(this.options.enabled,Ne(this,Ln))===!1||!UP(Ne(this,nh))||Ne(this,nh)===0)&&_t(this,em,$f.setInterval(()=>{(this.options.refetchIntervalInBackground||$4.isFocused())&&xn(this,ir,ox).call(this)},Ne(this,nh)))},XP=function(){xn(this,ir,GP).call(this),xn(this,ir,QP).call(this,xn(this,ir,YP).call(this))},JP=function(){Ne(this,Zf)&&($f.clearTimeout(Ne(this,Zf)),_t(this,Zf,void 0))},ZP=function(){Ne(this,em)&&($f.clearInterval(Ne(this,em)),_t(this,em,void 0))},eA=function(){const n=Ne(this,ka).getQueryCache().build(Ne(this,ka),this.options);if(n===Ne(this,Ln))return;const r=Ne(this,Ln);_t(this,Ln,n),_t(this,Hv,n.state),this.hasListeners()&&(r==null||r.removeObserver(this),n.addObserver(this))},Vq=function(n){Fs.batch(()=>{n.listeners&&this.listeners.forEach(r=>{r(Ne(this,sa))}),Ne(this,ka).getQueryCache().notify({query:Ne(this,Ln),type:"observerResultsUpdated"})})},tq);function Dne(e,n){return Mo(n.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&n.retryOnMount===!1)}function wO(e,n){return Dne(e,n)||e.state.data!==void 0&&tA(e,n,n.refetchOnMount)}function tA(e,n,r){if(Mo(n.enabled,e)!==!1&&dh(n.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&q4(e,n)}return!1}function jO(e,n,r,s){return(e!==n||Mo(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&q4(e,r)}function q4(e,n){return Mo(n.enabled,e)!==!1&&e.isStaleByTime(dh(n.staleTime,e))}function Ine(e,n){return!w1(e.getCurrentResult(),n)}function NO(e){return{onFetch:(n,r)=>{var f,m,g,x,v;const s=n.options,a=(g=(m=(f=n.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,o=((x=n.state.data)==null?void 0:x.pages)||[],l=((v=n.state.data)==null?void 0:v.pageParams)||[];let c={pages:[],pageParams:[]},u=0;const d=async()=>{let y=!1;const b=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(n.signal.aborted?y=!0:n.signal.addEventListener("abort",()=>{y=!0}),n.signal)})},N=Fq(n.options,n.fetchOptions),j=async(S,A,P)=>{if(y)return Promise.reject();if(A==null&&S.pages.length)return Promise.resolve(S);const O=(()=>{const D={client:n.client,queryKey:n.queryKey,pageParam:A,direction:P?"backward":"forward",meta:n.options.meta};return b(D),D})(),R=await N(O),{maxPages:q}=n.options,U=P?Pne:Cne;return{pages:U(S.pages,R,q),pageParams:U(S.pageParams,A,q)}};if(a&&o.length){const S=a==="backward",A=S?Mne:_O,P={pages:o,pageParams:l},L=A(s,P);c=await j(P,L,S)}else{const S=e??o.length;do{const A=u===0?l[0]??s.initialPageParam:_O(s,c);if(u>0&&A==null)break;c=await j(c,A),u++}while(u<S)}return c};n.options.persister?n.fetchFn=()=>{var y,b;return(b=(y=n.options).persister)==null?void 0:b.call(y,d,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},r)}:n.fetchFn=d}}}function _O(e,{pages:n,pageParams:r}){const s=n.length-1;return n.length>0?e.getNextPageParam(n[s],n,r[s],r):void 0}function Mne(e,{pages:n,pageParams:r}){var s;return n.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,n[0],n,r[0],r):void 0}var Kv,uc,ia,tm,dc,Wd,nq,Fne=(nq=class extends zq{constructor(n){super();zt(this,dc);zt(this,Kv);zt(this,uc);zt(this,ia);zt(this,tm);_t(this,Kv,n.client),this.mutationId=n.mutationId,_t(this,ia,n.mutationCache),_t(this,uc,[]),this.state=n.state||Hq(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Ne(this,uc).includes(n)||(Ne(this,uc).push(n),this.clearGcTimeout(),Ne(this,ia).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){_t(this,uc,Ne(this,uc).filter(r=>r!==n)),this.scheduleGc(),Ne(this,ia).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Ne(this,uc).length||(this.state.status==="pending"?this.scheduleGc():Ne(this,ia).remove(this))}continue(){var n;return((n=Ne(this,tm))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var l,c,u,d,f,m,g,x,v,y,b,N,j,S,A,P,L,O,R,q;const r=()=>{xn(this,dc,Wd).call(this,{type:"continue"})},s={client:Ne(this,Kv),meta:this.options.meta,mutationKey:this.options.mutationKey};_t(this,tm,qq({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(U,D)=>{xn(this,dc,Wd).call(this,{type:"failed",failureCount:U,error:D})},onPause:()=>{xn(this,dc,Wd).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ne(this,ia).canRun(this)}));const a=this.state.status==="pending",o=!Ne(this,tm).canStart();try{if(a)r();else{xn(this,dc,Wd).call(this,{type:"pending",variables:n,isPaused:o}),await((c=(l=Ne(this,ia).config).onMutate)==null?void 0:c.call(l,n,this,s));const D=await((d=(u=this.options).onMutate)==null?void 0:d.call(u,n,s));D!==this.state.context&&xn(this,dc,Wd).call(this,{type:"pending",context:D,variables:n,isPaused:o})}const U=await Ne(this,tm).start();return await((m=(f=Ne(this,ia).config).onSuccess)==null?void 0:m.call(f,U,n,this.state.context,this,s)),await((x=(g=this.options).onSuccess)==null?void 0:x.call(g,U,n,this.state.context,s)),await((y=(v=Ne(this,ia).config).onSettled)==null?void 0:y.call(v,U,null,this.state.variables,this.state.context,this,s)),await((N=(b=this.options).onSettled)==null?void 0:N.call(b,U,null,n,this.state.context,s)),xn(this,dc,Wd).call(this,{type:"success",data:U}),U}catch(U){try{throw await((S=(j=Ne(this,ia).config).onError)==null?void 0:S.call(j,U,n,this.state.context,this,s)),await((P=(A=this.options).onError)==null?void 0:P.call(A,U,n,this.state.context,s)),await((O=(L=Ne(this,ia).config).onSettled)==null?void 0:O.call(L,void 0,U,this.state.variables,this.state.context,this,s)),await((q=(R=this.options).onSettled)==null?void 0:q.call(R,void 0,U,n,this.state.context,s)),U}finally{xn(this,dc,Wd).call(this,{type:"error",error:U})}}finally{Ne(this,ia).runNext(this)}}},Kv=new WeakMap,uc=new WeakMap,ia=new WeakMap,tm=new WeakMap,dc=new WeakSet,Wd=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Fs.batch(()=>{Ne(this,uc).forEach(s=>{s.onMutationUpdate(n)}),Ne(this,ia).notify({mutation:this,type:"updated",action:n})})},nq);function Hq(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ju,bl,Gv,rq,Bne=(rq=class extends Xg{constructor(n={}){super();zt(this,ju);zt(this,bl);zt(this,Gv);this.config=n,_t(this,ju,new Set),_t(this,bl,new Map),_t(this,Gv,0)}build(n,r,s){const a=new Fne({client:n,mutationCache:this,mutationId:++ib(this,Gv)._,options:n.defaultMutationOptions(r),state:s});return this.add(a),a}add(n){Ne(this,ju).add(n);const r=ub(n);if(typeof r=="string"){const s=Ne(this,bl).get(r);s?s.push(n):Ne(this,bl).set(r,[n])}this.notify({type:"added",mutation:n})}remove(n){if(Ne(this,ju).delete(n)){const r=ub(n);if(typeof r=="string"){const s=Ne(this,bl).get(r);if(s)if(s.length>1){const a=s.indexOf(n);a!==-1&&s.splice(a,1)}else s[0]===n&&Ne(this,bl).delete(r)}}this.notify({type:"removed",mutation:n})}canRun(n){const r=ub(n);if(typeof r=="string"){const s=Ne(this,bl).get(r),a=s==null?void 0:s.find(o=>o.state.status==="pending");return!a||a===n}else return!0}runNext(n){var s;const r=ub(n);if(typeof r=="string"){const a=(s=Ne(this,bl).get(r))==null?void 0:s.find(o=>o!==n&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Fs.batch(()=>{Ne(this,ju).forEach(n=>{this.notify({type:"removed",mutation:n})}),Ne(this,ju).clear(),Ne(this,bl).clear()})}getAll(){return Array.from(Ne(this,ju))}find(n){const r={exact:!0,...n};return this.getAll().find(s=>xO(r,s))}findAll(n={}){return this.getAll().filter(r=>xO(n,r))}notify(n){Fs.batch(()=>{this.listeners.forEach(r=>{r(n)})})}resumePausedMutations(){const n=this.getAll().filter(r=>r.state.isPaused);return Fs.batch(()=>Promise.all(n.map(r=>r.continue().catch(oa))))}},ju=new WeakMap,bl=new WeakMap,Gv=new WeakMap,rq);function ub(e){var n;return(n=e.options.scope)==null?void 0:n.id}var Nu,rh,Ea,_u,$u,Yb,nA,sq,$ne=(sq=class extends Xg{constructor(r,s){super();zt(this,$u);zt(this,Nu);zt(this,rh);zt(this,Ea);zt(this,_u);_t(this,Nu,r),this.setOptions(s),this.bindMethods(),xn(this,$u,Yb).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const s=this.options;this.options=Ne(this,Nu).defaultMutationOptions(r),w1(this.options,s)||Ne(this,Nu).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Ne(this,Ea),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&mm(s.mutationKey)!==mm(this.options.mutationKey)?this.reset():((a=Ne(this,Ea))==null?void 0:a.state.status)==="pending"&&Ne(this,Ea).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Ne(this,Ea))==null||r.removeObserver(this)}onMutationUpdate(r){xn(this,$u,Yb).call(this),xn(this,$u,nA).call(this,r)}getCurrentResult(){return Ne(this,rh)}reset(){var r;(r=Ne(this,Ea))==null||r.removeObserver(this),_t(this,Ea,void 0),xn(this,$u,Yb).call(this),xn(this,$u,nA).call(this)}mutate(r,s){var a;return _t(this,_u,s),(a=Ne(this,Ea))==null||a.removeObserver(this),_t(this,Ea,Ne(this,Nu).getMutationCache().build(Ne(this,Nu),this.options)),Ne(this,Ea).addObserver(this),Ne(this,Ea).execute(r)}},Nu=new WeakMap,rh=new WeakMap,Ea=new WeakMap,_u=new WeakMap,$u=new WeakSet,Yb=function(){var s;const r=((s=Ne(this,Ea))==null?void 0:s.state)??Hq();_t(this,rh,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},nA=function(r){Fs.batch(()=>{var s,a,o,l,c,u,d,f;if(Ne(this,_u)&&this.hasListeners()){const m=Ne(this,rh).variables,g=Ne(this,rh).context,x={client:Ne(this,Nu),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(s=Ne(this,_u)).onSuccess)==null||a.call(s,r.data,m,g,x),(l=(o=Ne(this,_u)).onSettled)==null||l.call(o,r.data,null,m,g,x)):(r==null?void 0:r.type)==="error"&&((u=(c=Ne(this,_u)).onError)==null||u.call(c,r.error,m,g,x),(f=(d=Ne(this,_u)).onSettled)==null||f.call(d,void 0,r.error,m,g,x))}this.listeners.forEach(m=>{m(Ne(this,rh))})})},sq),hc,iq,qne=(iq=class extends Xg{constructor(n={}){super();zt(this,hc);this.config=n,_t(this,hc,new Map)}build(n,r,s){const a=r.queryKey,o=r.queryHash??F4(a,r);let l=this.get(o);return l||(l=new Lne({client:n,queryKey:a,queryHash:o,options:n.defaultQueryOptions(r),state:s,defaultOptions:n.getQueryDefaults(a)}),this.add(l)),l}add(n){Ne(this,hc).has(n.queryHash)||(Ne(this,hc).set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const r=Ne(this,hc).get(n.queryHash);r&&(n.destroy(),r===n&&Ne(this,hc).delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){Fs.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return Ne(this,hc).get(n)}getAll(){return[...Ne(this,hc).values()]}find(n){const r={exact:!0,...n};return this.getAll().find(s=>gO(r,s))}findAll(n={}){const r=this.getAll();return Object.keys(n).length>0?r.filter(s=>gO(n,s)):r}notify(n){Fs.batch(()=>{this.listeners.forEach(r=>{r(n)})})}onFocus(){Fs.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){Fs.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},hc=new WeakMap,iq),Zr,sh,ih,pg,gg,ah,xg,vg,aq,Wq=(aq=class{constructor(e={}){zt(this,Zr);zt(this,sh);zt(this,ih);zt(this,pg);zt(this,gg);zt(this,ah);zt(this,xg);zt(this,vg);_t(this,Zr,e.queryCache||new qne),_t(this,sh,e.mutationCache||new Bne),_t(this,ih,e.defaultOptions||{}),_t(this,pg,new Map),_t(this,gg,new Map),_t(this,ah,0)}mount(){ib(this,ah)._++,Ne(this,ah)===1&&(_t(this,xg,$4.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ne(this,Zr).onFocus())})),_t(this,vg,j1.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ne(this,Zr).onOnline())})))}unmount(){var e,n;ib(this,ah)._--,Ne(this,ah)===0&&((e=Ne(this,xg))==null||e.call(this),_t(this,xg,void 0),(n=Ne(this,vg))==null||n.call(this),_t(this,vg,void 0))}isFetching(e){return Ne(this,Zr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ne(this,sh).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const n=this.defaultQueryOptions({queryKey:e});return(r=Ne(this,Zr).get(n.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),r=Ne(this,Zr).build(this,n),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(dh(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(s))}getQueriesData(e){return Ne(this,Zr).findAll(e).map(({queryKey:n,state:r})=>{const s=r.data;return[n,s]})}setQueryData(e,n,r){const s=this.defaultQueryOptions({queryKey:e}),a=Ne(this,Zr).get(s.queryHash),o=a==null?void 0:a.state.data,l=Nne(n,o);if(l!==void 0)return Ne(this,Zr).build(this,s).setData(l,{...r,manual:!0})}setQueriesData(e,n,r){return Fs.batch(()=>Ne(this,Zr).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,n,r)]))}getQueryState(e){var r;const n=this.defaultQueryOptions({queryKey:e});return(r=Ne(this,Zr).get(n.queryHash))==null?void 0:r.state}removeQueries(e){const n=Ne(this,Zr);Fs.batch(()=>{n.findAll(e).forEach(r=>{n.remove(r)})})}resetQueries(e,n){const r=Ne(this,Zr);return Fs.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const r={revert:!0,...n},s=Fs.batch(()=>Ne(this,Zr).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(oa).catch(oa)}invalidateQueries(e,n={}){return Fs.batch(()=>(Ne(this,Zr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},n)))}refetchQueries(e,n={}){const r={...n,cancelRefetch:n.cancelRefetch??!0},s=Fs.batch(()=>Ne(this,Zr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(oa)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(oa)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const r=Ne(this,Zr).build(this,n);return r.isStaleByTime(dh(n.staleTime,r))?r.fetch(n):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(oa).catch(oa)}fetchInfiniteQuery(e){return e.behavior=NO(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(oa).catch(oa)}ensureInfiniteQueryData(e){return e.behavior=NO(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return j1.isOnline()?Ne(this,sh).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ne(this,Zr)}getMutationCache(){return Ne(this,sh)}getDefaultOptions(){return Ne(this,ih)}setDefaultOptions(e){_t(this,ih,e)}setQueryDefaults(e,n){Ne(this,pg).set(mm(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...Ne(this,pg).values()],r={};return n.forEach(s=>{Kx(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,n){Ne(this,gg).set(mm(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...Ne(this,gg).values()],r={};return n.forEach(s=>{Kx(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const n={...Ne(this,ih).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=F4(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===B4&&(n.enabled=!1),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ne(this,ih).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ne(this,Zr).clear(),Ne(this,sh).clear()}},Zr=new WeakMap,sh=new WeakMap,ih=new WeakMap,pg=new WeakMap,gg=new WeakMap,ah=new WeakMap,xg=new WeakMap,vg=new WeakMap,aq),Kq=C.createContext(void 0),On=e=>{const n=C.useContext(Kq);if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n},Gq=({client:e,children:n})=>(C.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(Kq.Provider,{value:e,children:n})),Yq=C.createContext(!1),zne=()=>C.useContext(Yq);Yq.Provider;function Une(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Vne=C.createContext(Une()),Hne=()=>C.useContext(Vne),Wne=(e,n)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(n.isReset()||(e.retryOnMount=!1))},Kne=e=>{C.useEffect(()=>{e.clearReset()},[e])},Gne=({result:e,errorResetBoundary:n,throwOnError:r,query:s,suspense:a})=>e.isError&&!n.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||Bq(r,[e.error,s])),Yne=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...a)=>r(s(...a)):r(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Qne=(e,n)=>e.isLoading&&e.isFetching&&!n,Xne=(e,n)=>(e==null?void 0:e.suspense)&&n.isPending,SO=(e,n,r)=>n.fetchOptimistic(e).catch(()=>{r.clearReset()});function Jne(e,n,r){var m,g,x,v,y;const s=zne(),a=Hne(),o=On(),l=o.defaultQueryOptions(e);(g=(m=o.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||g.call(m,l),l._optimisticResults=s?"isRestoring":"optimistic",Yne(l),Wne(l,a),Kne(a);const c=!o.getQueryCache().get(l.queryHash),[u]=C.useState(()=>new n(o,l)),d=u.getOptimisticResult(l),f=!s&&e.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(b=>{const N=f?u.subscribe(Fs.batchCalls(b)):oa;return u.updateResult(),N},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),C.useEffect(()=>{u.setOptions(l)},[l,u]),Xne(l,d))throw SO(l,u,a);if(Gne({result:d,errorResetBoundary:a,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((v=(x=o.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||v.call(x,l,d),l.experimental_prefetchInRender&&!fm&&Qne(d,s)){const b=c?SO(l,u,a):(y=o.getQueryCache().get(l.queryHash))==null?void 0:y.promise;b==null||b.catch(oa).finally(()=>{u.updateResult()})}return l.notifyOnChangeProps?d:u.trackResult(d)}function Dt(e,n){return Jne(e,Rne)}function rn(e,n){const r=On(),[s]=C.useState(()=>new $ne(r,e));C.useEffect(()=>{s.setOptions(e)},[s,e]);const a=C.useSyncExternalStore(C.useCallback(l=>s.subscribe(Fs.batchCalls(l)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=C.useCallback((l,c)=>{s.mutate(l,c).catch(oa)},[s]);if(a.error&&Bq(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}const Zne=new Wq({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});var Qv=hq();const Qq=ur(Qv);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gx(){return Gx=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Gx.apply(this,arguments)}var oh;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(oh||(oh={}));const CO="popstate";function ere(e){e===void 0&&(e={});function n(s,a){let{pathname:o,search:l,hash:c}=s.location;return rA("",{pathname:o,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:N1(a)}return nre(n,r,null,e)}function Ss(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function Xq(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function tre(){return Math.random().toString(36).substr(2,8)}function PO(e,n){return{usr:e.state,key:e.key,idx:n}}function rA(e,n,r,s){return r===void 0&&(r=null),Gx({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?Jg(n):n,{state:r,key:n&&n.key||s||tre()})}function N1(e){let{pathname:n="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function Jg(e){let n={};if(e){let r=e.indexOf("#");r>=0&&(n.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(n.search=e.substr(s),e=e.substr(0,s)),e&&(n.pathname=e)}return n}function nre(e,n,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,c=oh.Pop,u=null,d=f();d==null&&(d=0,l.replaceState(Gx({},l.state,{idx:d}),""));function f(){return(l.state||{idx:null}).idx}function m(){c=oh.Pop;let b=f(),N=b==null?null:b-d;d=b,u&&u({action:c,location:y.location,delta:N})}function g(b,N){c=oh.Push;let j=rA(y.location,b,N);d=f()+1;let S=PO(j,d),A=y.createHref(j);try{l.pushState(S,"",A)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(A)}o&&u&&u({action:c,location:y.location,delta:1})}function x(b,N){c=oh.Replace;let j=rA(y.location,b,N);d=f();let S=PO(j,d),A=y.createHref(j);l.replaceState(S,"",A),o&&u&&u({action:c,location:y.location,delta:0})}function v(b){let N=a.location.origin!=="null"?a.location.origin:a.location.href,j=typeof b=="string"?b:N1(b);return j=j.replace(/ $/,"%20"),Ss(N,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,N)}let y={get action(){return c},get location(){return e(a,l)},listen(b){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(CO,m),u=b,()=>{a.removeEventListener(CO,m),u=null}},createHref(b){return n(a,b)},createURL:v,encodeLocation(b){let N=v(b);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:g,replace:x,go(b){return l.go(b)}};return y}var AO;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(AO||(AO={}));function rre(e,n,r){return r===void 0&&(r="/"),sre(e,n,r)}function sre(e,n,r,s){let a=typeof n=="string"?Jg(n):n,o=z4(a.pathname||"/",r);if(o==null)return null;let l=Jq(e);ire(l);let c=null;for(let u=0;c==null&&u<l.length;++u){let d=xre(o);c=mre(l[u],d)}return c}function Jq(e,n,r,s){n===void 0&&(n=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(o,l,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};u.relativePath.startsWith("/")&&(Ss(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let d=hh([s,u.relativePath]),f=r.concat(u);o.children&&o.children.length>0&&(Ss(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Jq(o.children,n,f,d)),!(o.path==null&&!o.index)&&n.push({path:d,score:hre(d,o.index),routesMeta:f})};return e.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))a(o,l);else for(let u of Zq(o.path))a(o,l,u)}),n}function Zq(e){let n=e.split("/");if(n.length===0)return[];let[r,...s]=n,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=Zq(s.join("/")),c=[];return c.push(...l.map(u=>u===""?o:[o,u].join("/"))),a&&c.push(...l),c.map(u=>e.startsWith("/")&&u===""?"/":u)}function ire(e){e.sort((n,r)=>n.score!==r.score?r.score-n.score:fre(n.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const are=/^:[\w-]+$/,ore=3,lre=2,cre=1,ure=10,dre=-2,kO=e=>e==="*";function hre(e,n){let r=e.split("/"),s=r.length;return r.some(kO)&&(s+=dre),n&&(s+=lre),r.filter(a=>!kO(a)).reduce((a,o)=>a+(are.test(o)?ore:o===""?cre:ure),s)}function fre(e,n){return e.length===n.length&&e.slice(0,-1).every((s,a)=>s===n[a])?e[e.length-1]-n[n.length-1]:0}function mre(e,n,r){let{routesMeta:s}=e,a={},o="/",l=[];for(let c=0;c<s.length;++c){let u=s[c],d=c===s.length-1,f=o==="/"?n:n.slice(o.length)||"/",m=pre({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(a,m.params),l.push({params:a,pathname:hh([o,m.pathname]),pathnameBase:wre(hh([o,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(o=hh([o,m.pathnameBase]))}return l}function pre(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=gre(e.path,e.caseSensitive,e.end),a=n.match(r);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:s.reduce((d,f,m)=>{let{paramName:g,isOptional:x}=f;if(g==="*"){let y=c[m]||"";l=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const v=c[m];return x&&!v?d[g]=void 0:d[g]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:e}}function gre(e,n,r){n===void 0&&(n=!1),r===void 0&&(r=!0),Xq(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,u)=>(s.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),s]}function xre(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Xq(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function z4(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function vre(e,n){n===void 0&&(n="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?Jg(e):e;return{pathname:r?r.startsWith("/")?r:yre(r,n):n,search:jre(s),hash:Nre(a)}}function yre(e,n){let r=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function PN(e,n,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bre(e){return e.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function ez(e,n){let r=bre(e);return n?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function tz(e,n,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=Jg(e):(a=Gx({},e),Ss(!a.pathname||!a.pathname.includes("?"),PN("?","pathname","search",a)),Ss(!a.pathname||!a.pathname.includes("#"),PN("#","pathname","hash",a)),Ss(!a.search||!a.search.includes("#"),PN("#","search","hash",a)));let o=e===""||a.pathname==="",l=o?"/":a.pathname,c;if(l==null)c=r;else{let m=n.length-1;if(!s&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),m-=1;a.pathname=g.join("/")}c=m>=0?n[m]:"/"}let u=vre(a,c),d=l&&l!=="/"&&l.endsWith("/"),f=(o||l===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const hh=e=>e.join("/").replace(/\/\/+/g,"/"),wre=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),jre=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Nre=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _re(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nz=["post","put","patch","delete"];new Set(nz);const Sre=["get",...nz];new Set(Sre);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yx(){return Yx=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Yx.apply(this,arguments)}const U4=C.createContext(null),Cre=C.createContext(null),Om=C.createContext(null),Xw=C.createContext(null),Lm=C.createContext({outlet:null,matches:[],isDataRoute:!1}),rz=C.createContext(null);function Pre(e,n){let{relative:r}=n===void 0?{}:n;Xv()||Ss(!1);let{basename:s,navigator:a}=C.useContext(Om),{hash:o,pathname:l,search:c}=iz(e,{relative:r}),u=l;return s!=="/"&&(u=l==="/"?s:hh([s,l])),a.createHref({pathname:u,search:c,hash:o})}function Xv(){return C.useContext(Xw)!=null}function $h(){return Xv()||Ss(!1),C.useContext(Xw).location}function sz(e){C.useContext(Om).static||C.useLayoutEffect(e)}function co(){let{isDataRoute:e}=C.useContext(Lm);return e?$re():Are()}function Are(){Xv()||Ss(!1);let e=C.useContext(U4),{basename:n,future:r,navigator:s}=C.useContext(Om),{matches:a}=C.useContext(Lm),{pathname:o}=$h(),l=JSON.stringify(ez(a,r.v7_relativeSplatPath)),c=C.useRef(!1);return sz(()=>{c.current=!0}),C.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){s.go(d);return}let m=tz(d,JSON.parse(l),o,f.relative==="path");e==null&&n!=="/"&&(m.pathname=m.pathname==="/"?n:hh([n,m.pathname])),(f.replace?s.replace:s.push)(m,f.state,f)},[n,s,l,o,e])}function iz(e,n){let{relative:r}=n===void 0?{}:n,{future:s}=C.useContext(Om),{matches:a}=C.useContext(Lm),{pathname:o}=$h(),l=JSON.stringify(ez(a,s.v7_relativeSplatPath));return C.useMemo(()=>tz(e,JSON.parse(l),o,r==="path"),[e,l,o,r])}function kre(e,n){return Ere(e,n)}function Ere(e,n,r,s){Xv()||Ss(!1);let{navigator:a}=C.useContext(Om),{matches:o}=C.useContext(Lm),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let d=$h(),f;if(n){var m;let b=typeof n=="string"?Jg(n):n;u==="/"||(m=b.pathname)!=null&&m.startsWith(u)||Ss(!1),f=b}else f=d;let g=f.pathname||"/",x=g;if(u!=="/"){let b=u.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=rre(e,{pathname:x}),y=Dre(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:hh([u,a.encodeLocation?a.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:hh([u,a.encodeLocation?a.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,r,s);return n&&y?C.createElement(Xw.Provider,{value:{location:Yx({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:oh.Pop}},y):y}function Tre(){let e=Bre(),n=_re(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},n),r?C.createElement("pre",{style:a},r):null,null)}const Ore=C.createElement(Tre,null);class Lre extends C.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){console.error("React Router caught the following error during render",n,r)}render(){return this.state.error!==void 0?C.createElement(Lm.Provider,{value:this.props.routeContext},C.createElement(rz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rre(e){let{routeContext:n,match:r,children:s}=e,a=C.useContext(U4);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),C.createElement(Lm.Provider,{value:n},s)}function Dre(e,n,r,s){var a;if(n===void 0&&(n=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=s)!=null&&o.v7_partialHydration&&n.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,c=(a=r)==null?void 0:a.errors;if(c!=null){let f=l.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||Ss(!1),l=l.slice(0,Math.min(l.length,f+1))}let u=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let f=0;f<l.length;f++){let m=l[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:x}=r,v=m.route.loader&&g[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||v){u=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((f,m,g)=>{let x,v=!1,y=null,b=null;r&&(x=c&&m.route.id?c[m.route.id]:void 0,y=m.route.errorElement||Ore,u&&(d<0&&g===0?(qre("route-fallback"),v=!0,b=null):d===g&&(v=!0,b=m.route.hydrateFallbackElement||null)));let N=n.concat(l.slice(0,g+1)),j=()=>{let S;return x?S=y:v?S=b:m.route.Component?S=C.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=f,C.createElement(Rre,{match:m,routeContext:{outlet:f,matches:N,isDataRoute:r!=null},children:S})};return r&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?C.createElement(Lre,{location:r.location,revalidation:r.revalidation,component:y,error:x,children:j(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):j()},null)}var az=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(az||{}),oz=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(oz||{});function Ire(e){let n=C.useContext(U4);return n||Ss(!1),n}function Mre(e){let n=C.useContext(Cre);return n||Ss(!1),n}function Fre(e){let n=C.useContext(Lm);return n||Ss(!1),n}function lz(e){let n=Fre(),r=n.matches[n.matches.length-1];return r.route.id||Ss(!1),r.route.id}function Bre(){var e;let n=C.useContext(rz),r=Mre(),s=lz();return n!==void 0?n:(e=r.errors)==null?void 0:e[s]}function $re(){let{router:e}=Ire(az.UseNavigateStable),n=lz(oz.UseNavigateStable),r=C.useRef(!1);return sz(()=>{r.current=!0}),C.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Yx({fromRouteId:n},o)))},[e,n])}const EO={};function qre(e,n,r){EO[e]||(EO[e]=!0)}function zre(e,n){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Qb(e){Ss(!1)}function Ure(e){let{basename:n="/",children:r=null,location:s,navigationType:a=oh.Pop,navigator:o,static:l=!1,future:c}=e;Xv()&&Ss(!1);let u=n.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:u,navigator:o,static:l,future:Yx({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);typeof s=="string"&&(s=Jg(s));let{pathname:f="/",search:m="",hash:g="",state:x=null,key:v="default"}=s,y=C.useMemo(()=>{let b=z4(f,u);return b==null?null:{location:{pathname:b,search:m,hash:g,state:x,key:v},navigationType:a}},[u,f,m,g,x,v,a]);return y==null?null:C.createElement(Om.Provider,{value:d},C.createElement(Xw.Provider,{children:r,value:y}))}function Vre(e){let{children:n,location:r}=e;return kre(sA(n),r)}new Promise(()=>{});function sA(e,n){n===void 0&&(n=[]);let r=[];return C.Children.forEach(e,(s,a)=>{if(!C.isValidElement(s))return;let o=[...n,a];if(s.type===C.Fragment){r.push.apply(r,sA(s.props.children,o));return}s.type!==Qb&&Ss(!1),!s.props.index||!s.props.children||Ss(!1);let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=sA(s.props.children,o)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iA(){return iA=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},iA.apply(this,arguments)}function Hre(e,n){if(e==null)return{};var r={},s=Object.keys(e),a,o;for(o=0;o<s.length;o++)a=s[o],!(n.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Wre(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Kre(e,n){return e.button===0&&(!n||n==="_self")&&!Wre(e)}const Gre=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Yre="6";try{window.__reactRouterVersion=Yre}catch{}const Qre="startTransition",TO=E4[Qre];function Xre(e){let{basename:n,children:r,future:s,window:a}=e,o=C.useRef();o.current==null&&(o.current=ere({window:a,v5Compat:!0}));let l=o.current,[c,u]=C.useState({action:l.action,location:l.location}),{v7_startTransition:d}=s||{},f=C.useCallback(m=>{d&&TO?TO(()=>u(m)):u(m)},[u,d]);return C.useLayoutEffect(()=>l.listen(f),[l,f]),C.useEffect(()=>zre(s),[s]),C.createElement(Ure,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:s})}const Jre=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zre=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ca=C.forwardRef(function(n,r){let{onClick:s,relative:a,reloadDocument:o,replace:l,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m}=n,g=Hre(n,Gre),{basename:x}=C.useContext(Om),v,y=!1;if(typeof d=="string"&&Zre.test(d)&&(v=d,Jre))try{let S=new URL(window.location.href),A=d.startsWith("//")?new URL(S.protocol+d):new URL(d),P=z4(A.pathname,x);A.origin===S.origin&&P!=null?d=P+A.search+A.hash:y=!0}catch{}let b=Pre(d,{relative:a}),N=ese(d,{replace:l,state:c,target:u,preventScrollReset:f,relative:a,viewTransition:m});function j(S){s&&s(S),S.defaultPrevented||N(S)}return C.createElement("a",iA({},g,{href:v||b,onClick:y||o?s:j,ref:r,target:u}))});var OO;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(OO||(OO={}));var LO;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(LO||(LO={}));function ese(e,n){let{target:r,replace:s,state:a,preventScrollReset:o,relative:l,viewTransition:c}=n===void 0?{}:n,u=co(),d=$h(),f=iz(e,{relative:l});return C.useCallback(m=>{if(Kre(m,r)){m.preventDefault();let g=s!==void 0?s:N1(d)===N1(f);u(e,{replace:g,state:a,preventScrollReset:o,relative:l,viewTransition:c})}},[d,u,f,s,a,r,e,o,l,c])}function cz(e,n){return function(){return e.apply(n,arguments)}}const{toString:tse}=Object.prototype,{getPrototypeOf:V4}=Object,{iterator:Jw,toStringTag:uz}=Symbol,Zw=(e=>n=>{const r=tse.call(n);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),El=e=>(e=e.toLowerCase(),n=>Zw(n)===e),e2=e=>n=>typeof n===e,{isArray:Zg}=Array,yg=e2("undefined");function Jv(e){return e!==null&&!yg(e)&&e.constructor!==null&&!yg(e.constructor)&&Ia(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const dz=El("ArrayBuffer");function nse(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&dz(e.buffer),n}const rse=e2("string"),Ia=e2("function"),hz=e2("number"),Zv=e=>e!==null&&typeof e=="object",sse=e=>e===!0||e===!1,Xb=e=>{if(Zw(e)!=="object")return!1;const n=V4(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(uz in e)&&!(Jw in e)},ise=e=>{if(!Zv(e)||Jv(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},ase=El("Date"),ose=El("File"),lse=El("Blob"),cse=El("FileList"),use=e=>Zv(e)&&Ia(e.pipe),dse=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||Ia(e.append)&&((n=Zw(e))==="formdata"||n==="object"&&Ia(e.toString)&&e.toString()==="[object FormData]"))},hse=El("URLSearchParams"),[fse,mse,pse,gse]=["ReadableStream","Request","Response","Headers"].map(El),xse=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ey(e,n,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,a;if(typeof e!="object"&&(e=[e]),Zg(e))for(s=0,a=e.length;s<a;s++)n.call(null,e[s],s,e);else{if(Jv(e))return;const o=r?Object.getOwnPropertyNames(e):Object.keys(e),l=o.length;let c;for(s=0;s<l;s++)c=o[s],n.call(null,e[c],c,e)}}function fz(e,n){if(Jv(e))return null;n=n.toLowerCase();const r=Object.keys(e);let s=r.length,a;for(;s-- >0;)if(a=r[s],n===a.toLowerCase())return a;return null}const qf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,mz=e=>!yg(e)&&e!==qf;function aA(){const{caseless:e,skipUndefined:n}=mz(this)&&this||{},r={},s=(a,o)=>{const l=e&&fz(r,o)||o;Xb(r[l])&&Xb(a)?r[l]=aA(r[l],a):Xb(a)?r[l]=aA({},a):Zg(a)?r[l]=a.slice():(!n||!yg(a))&&(r[l]=a)};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&ey(arguments[a],s);return r}const vse=(e,n,r,{allOwnKeys:s}={})=>(ey(n,(a,o)=>{r&&Ia(a)?e[o]=cz(a,r):e[o]=a},{allOwnKeys:s}),e),yse=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),bse=(e,n,r,s)=>{e.prototype=Object.create(n.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),r&&Object.assign(e.prototype,r)},wse=(e,n,r,s)=>{let a,o,l;const c={};if(n=n||{},e==null)return n;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)l=a[o],(!s||s(l,e,n))&&!c[l]&&(n[l]=e[l],c[l]=!0);e=r!==!1&&V4(e)}while(e&&(!r||r(e,n))&&e!==Object.prototype);return n},jse=(e,n,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=n.length;const s=e.indexOf(n,r);return s!==-1&&s===r},Nse=e=>{if(!e)return null;if(Zg(e))return e;let n=e.length;if(!hz(n))return null;const r=new Array(n);for(;n-- >0;)r[n]=e[n];return r},_se=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&V4(Uint8Array)),Sse=(e,n)=>{const s=(e&&e[Jw]).call(e);let a;for(;(a=s.next())&&!a.done;){const o=a.value;n.call(e,o[0],o[1])}},Cse=(e,n)=>{let r;const s=[];for(;(r=e.exec(n))!==null;)s.push(r);return s},Pse=El("HTMLFormElement"),Ase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,a){return s.toUpperCase()+a}),RO=(({hasOwnProperty:e})=>(n,r)=>e.call(n,r))(Object.prototype),kse=El("RegExp"),pz=(e,n)=>{const r=Object.getOwnPropertyDescriptors(e),s={};ey(r,(a,o)=>{let l;(l=n(a,o,e))!==!1&&(s[o]=l||a)}),Object.defineProperties(e,s)},Ese=e=>{pz(e,(n,r)=>{if(Ia(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(Ia(s)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Tse=(e,n)=>{const r={},s=a=>{a.forEach(o=>{r[o]=!0})};return Zg(e)?s(e):s(String(e).split(n)),r},Ose=()=>{},Lse=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function Rse(e){return!!(e&&Ia(e.append)&&e[uz]==="FormData"&&e[Jw])}const Dse=e=>{const n=new Array(10),r=(s,a)=>{if(Zv(s)){if(n.indexOf(s)>=0)return;if(Jv(s))return s;if(!("toJSON"in s)){n[a]=s;const o=Zg(s)?[]:{};return ey(s,(l,c)=>{const u=r(l,a+1);!yg(u)&&(o[c]=u)}),n[a]=void 0,o}}return s};return r(e,0)},Ise=El("AsyncFunction"),Mse=e=>e&&(Zv(e)||Ia(e))&&Ia(e.then)&&Ia(e.catch),gz=((e,n)=>e?setImmediate:n?((r,s)=>(qf.addEventListener("message",({source:a,data:o})=>{a===qf&&o===r&&s.length&&s.shift()()},!1),a=>{s.push(a),qf.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ia(qf.postMessage)),Fse=typeof queueMicrotask<"u"?queueMicrotask.bind(qf):typeof process<"u"&&process.nextTick||gz,Bse=e=>e!=null&&Ia(e[Jw]),qe={isArray:Zg,isArrayBuffer:dz,isBuffer:Jv,isFormData:dse,isArrayBufferView:nse,isString:rse,isNumber:hz,isBoolean:sse,isObject:Zv,isPlainObject:Xb,isEmptyObject:ise,isReadableStream:fse,isRequest:mse,isResponse:pse,isHeaders:gse,isUndefined:yg,isDate:ase,isFile:ose,isBlob:lse,isRegExp:kse,isFunction:Ia,isStream:use,isURLSearchParams:hse,isTypedArray:_se,isFileList:cse,forEach:ey,merge:aA,extend:vse,trim:xse,stripBOM:yse,inherits:bse,toFlatObject:wse,kindOf:Zw,kindOfTest:El,endsWith:jse,toArray:Nse,forEachEntry:Sse,matchAll:Cse,isHTMLForm:Pse,hasOwnProperty:RO,hasOwnProp:RO,reduceDescriptors:pz,freezeMethods:Ese,toObjectSet:Tse,toCamelCase:Ase,noop:Ose,toFiniteNumber:Lse,findKey:fz,global:qf,isContextDefined:mz,isSpecCompliantForm:Rse,toJSONObject:Dse,isAsyncFn:Ise,isThenable:Mse,setImmediate:gz,asap:Fse,isIterable:Bse};function mn(e,n,r,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}qe.inherits(mn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:qe.toJSONObject(this.config),code:this.code,status:this.status}}});const xz=mn.prototype,vz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{vz[e]={value:e}});Object.defineProperties(mn,vz);Object.defineProperty(xz,"isAxiosError",{value:!0});mn.from=(e,n,r,s,a,o)=>{const l=Object.create(xz);qe.toFlatObject(e,l,function(f){return f!==Error.prototype},d=>d!=="isAxiosError");const c=e&&e.message?e.message:"Error",u=n==null&&e?e.code:n;return mn.call(l,c,u,r,s,a),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",o&&Object.assign(l,o),l};const $se=null;function oA(e){return qe.isPlainObject(e)||qe.isArray(e)}function yz(e){return qe.endsWith(e,"[]")?e.slice(0,-2):e}function DO(e,n,r){return e?e.concat(n).map(function(a,o){return a=yz(a),!r&&o?"["+a+"]":a}).join(r?".":""):n}function qse(e){return qe.isArray(e)&&!e.some(oA)}const zse=qe.toFlatObject(qe,{},null,function(n){return/^is[A-Z]/.test(n)});function t2(e,n,r){if(!qe.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,r=qe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!qe.isUndefined(b[y])});const s=r.metaTokens,a=r.visitor||f,o=r.dots,l=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&qe.isSpecCompliantForm(n);if(!qe.isFunction(a))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(qe.isDate(v))return v.toISOString();if(qe.isBoolean(v))return v.toString();if(!u&&qe.isBlob(v))throw new mn("Blob is not supported. Use a Buffer instead.");return qe.isArrayBuffer(v)||qe.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function f(v,y,b){let N=v;if(v&&!b&&typeof v=="object"){if(qe.endsWith(y,"{}"))y=s?y:y.slice(0,-2),v=JSON.stringify(v);else if(qe.isArray(v)&&qse(v)||(qe.isFileList(v)||qe.endsWith(y,"[]"))&&(N=qe.toArray(v)))return y=yz(y),N.forEach(function(S,A){!(qe.isUndefined(S)||S===null)&&n.append(l===!0?DO([y],A,o):l===null?y:y+"[]",d(S))}),!1}return oA(v)?!0:(n.append(DO(b,y,o),d(v)),!1)}const m=[],g=Object.assign(zse,{defaultVisitor:f,convertValue:d,isVisitable:oA});function x(v,y){if(!qe.isUndefined(v)){if(m.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));m.push(v),qe.forEach(v,function(N,j){(!(qe.isUndefined(N)||N===null)&&a.call(n,N,qe.isString(j)?j.trim():j,y,g))===!0&&x(N,y?y.concat(j):[j])}),m.pop()}}if(!qe.isObject(e))throw new TypeError("data must be an object");return x(e),n}function IO(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return n[s]})}function H4(e,n){this._pairs=[],e&&t2(e,this,n)}const bz=H4.prototype;bz.append=function(n,r){this._pairs.push([n,r])};bz.toString=function(n){const r=n?function(s){return n.call(this,s,IO)}:IO;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function Use(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function wz(e,n,r){if(!n)return e;const s=r&&r.encode||Use;qe.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let o;if(a?o=a(n,r):o=qe.isURLSearchParams(n)?n.toString():new H4(n,r).toString(s),o){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class MO{constructor(){this.handlers=[]}use(n,r,s){return this.handlers.push({fulfilled:n,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){qe.forEach(this.handlers,function(s){s!==null&&n(s)})}}const jz={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Vse=typeof URLSearchParams<"u"?URLSearchParams:H4,Hse=typeof FormData<"u"?FormData:null,Wse=typeof Blob<"u"?Blob:null,Kse={isBrowser:!0,classes:{URLSearchParams:Vse,FormData:Hse,Blob:Wse},protocols:["http","https","file","blob","url","data"]},W4=typeof window<"u"&&typeof document<"u",lA=typeof navigator=="object"&&navigator||void 0,Gse=W4&&(!lA||["ReactNative","NativeScript","NS"].indexOf(lA.product)<0),Yse=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Qse=W4&&window.location.href||"http://localhost",Xse=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:W4,hasStandardBrowserEnv:Gse,hasStandardBrowserWebWorkerEnv:Yse,navigator:lA,origin:Qse},Symbol.toStringTag,{value:"Module"})),Mi={...Xse,...Kse};function Jse(e,n){return t2(e,new Mi.classes.URLSearchParams,{visitor:function(r,s,a,o){return Mi.isNode&&qe.isBuffer(r)?(this.append(s,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...n})}function Zse(e){return qe.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function eie(e){const n={},r=Object.keys(e);let s;const a=r.length;let o;for(s=0;s<a;s++)o=r[s],n[o]=e[o];return n}function Nz(e){function n(r,s,a,o){let l=r[o++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),u=o>=r.length;return l=!l&&qe.isArray(a)?a.length:l,u?(qe.hasOwnProp(a,l)?a[l]=[a[l],s]:a[l]=s,!c):((!a[l]||!qe.isObject(a[l]))&&(a[l]=[]),n(r,s,a[l],o)&&qe.isArray(a[l])&&(a[l]=eie(a[l])),!c)}if(qe.isFormData(e)&&qe.isFunction(e.entries)){const r={};return qe.forEachEntry(e,(s,a)=>{n(Zse(s),a,r,0)}),r}return null}function tie(e,n,r){if(qe.isString(e))try{return(n||JSON.parse)(e),qe.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const ty={transitional:jz,adapter:["xhr","http","fetch"],transformRequest:[function(n,r){const s=r.getContentType()||"",a=s.indexOf("application/json")>-1,o=qe.isObject(n);if(o&&qe.isHTMLForm(n)&&(n=new FormData(n)),qe.isFormData(n))return a?JSON.stringify(Nz(n)):n;if(qe.isArrayBuffer(n)||qe.isBuffer(n)||qe.isStream(n)||qe.isFile(n)||qe.isBlob(n)||qe.isReadableStream(n))return n;if(qe.isArrayBufferView(n))return n.buffer;if(qe.isURLSearchParams(n))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let c;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Jse(n,this.formSerializer).toString();if((c=qe.isFileList(n))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return t2(c?{"files[]":n}:n,u&&new u,this.formSerializer)}}return o||a?(r.setContentType("application/json",!1),tie(n)):n}],transformResponse:[function(n){const r=this.transitional||ty.transitional,s=r&&r.forcedJSONParsing,a=this.responseType==="json";if(qe.isResponse(n)||qe.isReadableStream(n))return n;if(n&&qe.isString(n)&&(s&&!this.responseType||a)){const l=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(n,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?mn.from(c,mn.ERR_BAD_RESPONSE,this,null,this.response):c}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Mi.classes.FormData,Blob:Mi.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};qe.forEach(["delete","get","head","post","put","patch"],e=>{ty.headers[e]={}});const nie=qe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rie=e=>{const n={};let r,s,a;return e&&e.split(`
`).forEach(function(l){a=l.indexOf(":"),r=l.substring(0,a).trim().toLowerCase(),s=l.substring(a+1).trim(),!(!r||n[r]&&nie[r])&&(r==="set-cookie"?n[r]?n[r].push(s):n[r]=[s]:n[r]=n[r]?n[r]+", "+s:s)}),n},FO=Symbol("internals");function q0(e){return e&&String(e).trim().toLowerCase()}function Jb(e){return e===!1||e==null?e:qe.isArray(e)?e.map(Jb):String(e)}function sie(e){const n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)n[s[1]]=s[2];return n}const iie=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function AN(e,n,r,s,a){if(qe.isFunction(s))return s.call(this,n,r);if(a&&(n=r),!!qe.isString(n)){if(qe.isString(s))return n.indexOf(s)!==-1;if(qe.isRegExp(s))return s.test(n)}}function aie(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,r,s)=>r.toUpperCase()+s)}function oie(e,n){const r=qe.toCamelCase(" "+n);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(a,o,l){return this[s].call(this,n,a,o,l)},configurable:!0})})}let Ma=class{constructor(n){n&&this.set(n)}set(n,r,s){const a=this;function o(c,u,d){const f=q0(u);if(!f)throw new Error("header name must be a non-empty string");const m=qe.findKey(a,f);(!m||a[m]===void 0||d===!0||d===void 0&&a[m]!==!1)&&(a[m||u]=Jb(c))}const l=(c,u)=>qe.forEach(c,(d,f)=>o(d,f,u));if(qe.isPlainObject(n)||n instanceof this.constructor)l(n,r);else if(qe.isString(n)&&(n=n.trim())&&!iie(n))l(rie(n),r);else if(qe.isObject(n)&&qe.isIterable(n)){let c={},u,d;for(const f of n){if(!qe.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[d=f[0]]=(u=c[d])?qe.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}l(c,r)}else n!=null&&o(r,n,s);return this}get(n,r){if(n=q0(n),n){const s=qe.findKey(this,n);if(s){const a=this[s];if(!r)return a;if(r===!0)return sie(a);if(qe.isFunction(r))return r.call(this,a,s);if(qe.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,r){if(n=q0(n),n){const s=qe.findKey(this,n);return!!(s&&this[s]!==void 0&&(!r||AN(this,this[s],s,r)))}return!1}delete(n,r){const s=this;let a=!1;function o(l){if(l=q0(l),l){const c=qe.findKey(s,l);c&&(!r||AN(s,s[c],c,r))&&(delete s[c],a=!0)}}return qe.isArray(n)?n.forEach(o):o(n),a}clear(n){const r=Object.keys(this);let s=r.length,a=!1;for(;s--;){const o=r[s];(!n||AN(this,this[o],o,n,!0))&&(delete this[o],a=!0)}return a}normalize(n){const r=this,s={};return qe.forEach(this,(a,o)=>{const l=qe.findKey(s,o);if(l){r[l]=Jb(a),delete r[o];return}const c=n?aie(o):String(o).trim();c!==o&&delete r[o],r[c]=Jb(a),s[c]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const r=Object.create(null);return qe.forEach(this,(s,a)=>{s!=null&&s!==!1&&(r[a]=n&&qe.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,r])=>n+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...r){const s=new this(n);return r.forEach(a=>s.set(a)),s}static accessor(n){const s=(this[FO]=this[FO]={accessors:{}}).accessors,a=this.prototype;function o(l){const c=q0(l);s[c]||(oie(a,l),s[c]=!0)}return qe.isArray(n)?n.forEach(o):o(n),this}};Ma.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);qe.reduceDescriptors(Ma.prototype,({value:e},n)=>{let r=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(s){this[r]=s}}});qe.freezeMethods(Ma);function kN(e,n){const r=this||ty,s=n||r,a=Ma.from(s.headers);let o=s.data;return qe.forEach(e,function(c){o=c.call(r,o,a.normalize(),n?n.status:void 0)}),a.normalize(),o}function _z(e){return!!(e&&e.__CANCEL__)}function e0(e,n,r){mn.call(this,e??"canceled",mn.ERR_CANCELED,n,r),this.name="CanceledError"}qe.inherits(e0,mn,{__CANCEL__:!0});function Sz(e,n,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):n(new mn("Request failed with status code "+r.status,[mn.ERR_BAD_REQUEST,mn.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function lie(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function cie(e,n){e=e||10;const r=new Array(e),s=new Array(e);let a=0,o=0,l;return n=n!==void 0?n:1e3,function(u){const d=Date.now(),f=s[o];l||(l=d),r[a]=u,s[a]=d;let m=o,g=0;for(;m!==a;)g+=r[m++],m=m%e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),d-l<n)return;const x=f&&d-f;return x?Math.round(g*1e3/x):void 0}}function uie(e,n){let r=0,s=1e3/n,a,o;const l=(d,f=Date.now())=>{r=f,a=null,o&&(clearTimeout(o),o=null),e(...d)};return[(...d)=>{const f=Date.now(),m=f-r;m>=s?l(d,f):(a=d,o||(o=setTimeout(()=>{o=null,l(a)},s-m)))},()=>a&&l(a)]}const _1=(e,n,r=3)=>{let s=0;const a=cie(50,250);return uie(o=>{const l=o.loaded,c=o.lengthComputable?o.total:void 0,u=l-s,d=a(u),f=l<=c;s=l;const m={loaded:l,total:c,progress:c?l/c:void 0,bytes:u,rate:d||void 0,estimated:d&&c&&f?(c-l)/d:void 0,event:o,lengthComputable:c!=null,[n?"download":"upload"]:!0};e(m)},r)},BO=(e,n)=>{const r=e!=null;return[s=>n[0]({lengthComputable:r,total:e,loaded:s}),n[1]]},$O=e=>(...n)=>qe.asap(()=>e(...n)),die=Mi.hasStandardBrowserEnv?((e,n)=>r=>(r=new URL(r,Mi.origin),e.protocol===r.protocol&&e.host===r.host&&(n||e.port===r.port)))(new URL(Mi.origin),Mi.navigator&&/(msie|trident)/i.test(Mi.navigator.userAgent)):()=>!0,hie=Mi.hasStandardBrowserEnv?{write(e,n,r,s,a,o){const l=[e+"="+encodeURIComponent(n)];qe.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),qe.isString(s)&&l.push("path="+s),qe.isString(a)&&l.push("domain="+a),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function fie(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function mie(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function Cz(e,n,r){let s=!fie(n);return e&&(s||r==!1)?mie(e,n):n}const qO=e=>e instanceof Ma?{...e}:e;function pm(e,n){n=n||{};const r={};function s(d,f,m,g){return qe.isPlainObject(d)&&qe.isPlainObject(f)?qe.merge.call({caseless:g},d,f):qe.isPlainObject(f)?qe.merge({},f):qe.isArray(f)?f.slice():f}function a(d,f,m,g){if(qe.isUndefined(f)){if(!qe.isUndefined(d))return s(void 0,d,m,g)}else return s(d,f,m,g)}function o(d,f){if(!qe.isUndefined(f))return s(void 0,f)}function l(d,f){if(qe.isUndefined(f)){if(!qe.isUndefined(d))return s(void 0,d)}else return s(void 0,f)}function c(d,f,m){if(m in n)return s(d,f);if(m in e)return s(void 0,d)}const u={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(d,f,m)=>a(qO(d),qO(f),m,!0)};return qe.forEach(Object.keys({...e,...n}),function(f){const m=u[f]||a,g=m(e[f],n[f],f);qe.isUndefined(g)&&m!==c||(r[f]=g)}),r}const Pz=e=>{const n=pm({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:o,headers:l,auth:c}=n;if(n.headers=l=Ma.from(l),n.url=wz(Cz(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),qe.isFormData(r)){if(Mi.hasStandardBrowserEnv||Mi.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(qe.isFunction(r.getHeaders)){const u=r.getHeaders(),d=["content-type","content-length"];Object.entries(u).forEach(([f,m])=>{d.includes(f.toLowerCase())&&l.set(f,m)})}}if(Mi.hasStandardBrowserEnv&&(s&&qe.isFunction(s)&&(s=s(n)),s||s!==!1&&die(n.url))){const u=a&&o&&hie.read(o);u&&l.set(a,u)}return n},pie=typeof XMLHttpRequest<"u",gie=pie&&function(e){return new Promise(function(r,s){const a=Pz(e);let o=a.data;const l=Ma.from(a.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:d}=a,f,m,g,x,v;function y(){x&&x(),v&&v(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let b=new XMLHttpRequest;b.open(a.method.toUpperCase(),a.url,!0),b.timeout=a.timeout;function N(){if(!b)return;const S=Ma.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),P={data:!c||c==="text"||c==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:S,config:e,request:b};Sz(function(O){r(O),y()},function(O){s(O),y()},P),b=null}"onloadend"in b?b.onloadend=N:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(N)},b.onabort=function(){b&&(s(new mn("Request aborted",mn.ECONNABORTED,e,b)),b=null)},b.onerror=function(A){const P=A&&A.message?A.message:"Network Error",L=new mn(P,mn.ERR_NETWORK,e,b);L.event=A||null,s(L),b=null},b.ontimeout=function(){let A=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||jz;a.timeoutErrorMessage&&(A=a.timeoutErrorMessage),s(new mn(A,P.clarifyTimeoutError?mn.ETIMEDOUT:mn.ECONNABORTED,e,b)),b=null},o===void 0&&l.setContentType(null),"setRequestHeader"in b&&qe.forEach(l.toJSON(),function(A,P){b.setRequestHeader(P,A)}),qe.isUndefined(a.withCredentials)||(b.withCredentials=!!a.withCredentials),c&&c!=="json"&&(b.responseType=a.responseType),d&&([g,v]=_1(d,!0),b.addEventListener("progress",g)),u&&b.upload&&([m,x]=_1(u),b.upload.addEventListener("progress",m),b.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(f=S=>{b&&(s(!S||S.type?new e0(null,e,b):S),b.abort(),b=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const j=lie(a.url);if(j&&Mi.protocols.indexOf(j)===-1){s(new mn("Unsupported protocol "+j+":",mn.ERR_BAD_REQUEST,e));return}b.send(o||null)})},xie=(e,n)=>{const{length:r}=e=e?e.filter(Boolean):[];if(n||r){let s=new AbortController,a;const o=function(d){if(!a){a=!0,c();const f=d instanceof Error?d:this.reason;s.abort(f instanceof mn?f:new e0(f instanceof Error?f.message:f))}};let l=n&&setTimeout(()=>{l=null,o(new mn(`timeout ${n} of ms exceeded`,mn.ETIMEDOUT))},n);const c=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),e=null)};e.forEach(d=>d.addEventListener("abort",o));const{signal:u}=s;return u.unsubscribe=()=>qe.asap(c),u}},vie=function*(e,n){let r=e.byteLength;if(r<n){yield e;return}let s=0,a;for(;s<r;)a=s+n,yield e.slice(s,a),s=a},yie=async function*(e,n){for await(const r of bie(e))yield*vie(r,n)},bie=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:r,value:s}=await n.read();if(r)break;yield s}}finally{await n.cancel()}},zO=(e,n,r,s)=>{const a=yie(e,n);let o=0,l,c=u=>{l||(l=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:d,value:f}=await a.next();if(d){c(),u.close();return}let m=f.byteLength;if(r){let g=o+=m;r(g)}u.enqueue(new Uint8Array(f))}catch(d){throw c(d),d}},cancel(u){return c(u),a.return()}},{highWaterMark:2})},UO=64*1024,{isFunction:db}=qe,wie=(({Request:e,Response:n})=>({Request:e,Response:n}))(qe.global),{ReadableStream:VO,TextEncoder:HO}=qe.global,WO=(e,...n)=>{try{return!!e(...n)}catch{return!1}},jie=e=>{e=qe.merge.call({skipUndefined:!0},wie,e);const{fetch:n,Request:r,Response:s}=e,a=n?db(n):typeof fetch=="function",o=db(r),l=db(s);if(!a)return!1;const c=a&&db(VO),u=a&&(typeof HO=="function"?(v=>y=>v.encode(y))(new HO):async v=>new Uint8Array(await new r(v).arrayBuffer())),d=o&&c&&WO(()=>{let v=!1;const y=new r(Mi.origin,{body:new VO,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!y}),f=l&&c&&WO(()=>qe.isReadableStream(new s("").body)),m={stream:f&&(v=>v.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!m[v]&&(m[v]=(y,b)=>{let N=y&&y[v];if(N)return N.call(y);throw new mn(`Response type '${v}' is not supported`,mn.ERR_NOT_SUPPORT,b)})});const g=async v=>{if(v==null)return 0;if(qe.isBlob(v))return v.size;if(qe.isSpecCompliantForm(v))return(await new r(Mi.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(qe.isArrayBufferView(v)||qe.isArrayBuffer(v))return v.byteLength;if(qe.isURLSearchParams(v)&&(v=v+""),qe.isString(v))return(await u(v)).byteLength},x=async(v,y)=>{const b=qe.toFiniteNumber(v.getContentLength());return b??g(y)};return async v=>{let{url:y,method:b,data:N,signal:j,cancelToken:S,timeout:A,onDownloadProgress:P,onUploadProgress:L,responseType:O,headers:R,withCredentials:q="same-origin",fetchOptions:U}=Pz(v),D=n||fetch;O=O?(O+"").toLowerCase():"text";let M=xie([j,S&&S.toAbortSignal()],A),G=null;const Y=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let Z;try{if(L&&d&&b!=="get"&&b!=="head"&&(Z=await x(R,N))!==0){let Q=new r(y,{method:"POST",body:N,duplex:"half"}),T;if(qe.isFormData(N)&&(T=Q.headers.get("content-type"))&&R.setContentType(T),Q.body){const[B,H]=BO(Z,_1($O(L)));N=zO(Q.body,UO,B,H)}}qe.isString(q)||(q=q?"include":"omit");const X=o&&"credentials"in r.prototype,re={...U,signal:M,method:b.toUpperCase(),headers:R.normalize().toJSON(),body:N,duplex:"half",credentials:X?q:void 0};G=o&&new r(y,re);let z=await(o?D(G,U):D(y,re));const te=f&&(O==="stream"||O==="response");if(f&&(P||te&&Y)){const Q={};["status","statusText","headers"].forEach(ee=>{Q[ee]=z[ee]});const T=qe.toFiniteNumber(z.headers.get("content-length")),[B,H]=P&&BO(T,_1($O(P),!0))||[];z=new s(zO(z.body,UO,B,()=>{H&&H(),Y&&Y()}),Q)}O=O||"text";let le=await m[qe.findKey(m,O)||"text"](z,v);return!te&&Y&&Y(),await new Promise((Q,T)=>{Sz(Q,T,{data:le,headers:Ma.from(z.headers),status:z.status,statusText:z.statusText,config:v,request:G})})}catch(X){throw Y&&Y(),X&&X.name==="TypeError"&&/Load failed|fetch/i.test(X.message)?Object.assign(new mn("Network Error",mn.ERR_NETWORK,v,G),{cause:X.cause||X}):mn.from(X,X&&X.code,v,G)}}},Nie=new Map,Az=e=>{let n=e?e.env:{};const{fetch:r,Request:s,Response:a}=n,o=[s,a,r];let l=o.length,c=l,u,d,f=Nie;for(;c--;)u=o[c],d=f.get(u),d===void 0&&f.set(u,d=c?new Map:jie(n)),f=d;return d};Az();const cA={http:$se,xhr:gie,fetch:{get:Az}};qe.forEach(cA,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const KO=e=>`- ${e}`,_ie=e=>qe.isFunction(e)||e===null||e===!1,kz={getAdapter:(e,n)=>{e=qe.isArray(e)?e:[e];const{length:r}=e;let s,a;const o={};for(let l=0;l<r;l++){s=e[l];let c;if(a=s,!_ie(s)&&(a=cA[(c=String(s)).toLowerCase()],a===void 0))throw new mn(`Unknown adapter '${c}'`);if(a&&(qe.isFunction(a)||(a=a.get(n))))break;o[c||"#"+l]=a}if(!a){const l=Object.entries(o).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=r?l.length>1?`since :
`+l.map(KO).join(`
`):" "+KO(l[0]):"as no adapter specified";throw new mn("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return a},adapters:cA};function EN(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new e0(null,e)}function GO(e){return EN(e),e.headers=Ma.from(e.headers),e.data=kN.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),kz.getAdapter(e.adapter||ty.adapter,e)(e).then(function(s){return EN(e),s.data=kN.call(e,e.transformResponse,s),s.headers=Ma.from(s.headers),s},function(s){return _z(s)||(EN(e),s&&s.response&&(s.response.data=kN.call(e,e.transformResponse,s.response),s.response.headers=Ma.from(s.response.headers))),Promise.reject(s)})}const Ez="1.12.2",n2={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{n2[e]=function(s){return typeof s===e||"a"+(n<1?"n ":" ")+e}});const YO={};n2.transitional=function(n,r,s){function a(o,l){return"[Axios v"+Ez+"] Transitional option '"+o+"'"+l+(s?". "+s:"")}return(o,l,c)=>{if(n===!1)throw new mn(a(l," has been removed"+(r?" in "+r:"")),mn.ERR_DEPRECATED);return r&&!YO[l]&&(YO[l]=!0,console.warn(a(l," has been deprecated since v"+r+" and will be removed in the near future"))),n?n(o,l,c):!0}};n2.spelling=function(n){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${n}`),!0)};function Sie(e,n,r){if(typeof e!="object")throw new mn("options must be an object",mn.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const o=s[a],l=n[o];if(l){const c=e[o],u=c===void 0||l(c,o,e);if(u!==!0)throw new mn("option "+o+" must be "+u,mn.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new mn("Unknown option "+o,mn.ERR_BAD_OPTION)}}const Zb={assertOptions:Sie,validators:n2},ac=Zb.validators;let rm=class{constructor(n){this.defaults=n||{},this.interceptors={request:new MO,response:new MO}}async request(n,r){try{return await this._request(n,r)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(n,r){typeof n=="string"?(r=r||{},r.url=n):r=n||{},r=pm(this.defaults,r);const{transitional:s,paramsSerializer:a,headers:o}=r;s!==void 0&&Zb.assertOptions(s,{silentJSONParsing:ac.transitional(ac.boolean),forcedJSONParsing:ac.transitional(ac.boolean),clarifyTimeoutError:ac.transitional(ac.boolean)},!1),a!=null&&(qe.isFunction(a)?r.paramsSerializer={serialize:a}:Zb.assertOptions(a,{encode:ac.function,serialize:ac.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Zb.assertOptions(r,{baseUrl:ac.spelling("baseURL"),withXsrfToken:ac.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=o&&qe.merge(o.common,o[r.method]);o&&qe.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),r.headers=Ma.concat(l,o);const c=[];let u=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(u=u&&y.synchronous,c.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let f,m=0,g;if(!u){const v=[GO.bind(this),void 0];for(v.unshift(...c),v.push(...d),g=v.length,f=Promise.resolve(r);m<g;)f=f.then(v[m++],v[m++]);return f}g=c.length;let x=r;for(;m<g;){const v=c[m++],y=c[m++];try{x=v(x)}catch(b){y.call(this,b);break}}try{f=GO.call(this,x)}catch(v){return Promise.reject(v)}for(m=0,g=d.length;m<g;)f=f.then(d[m++],d[m++]);return f}getUri(n){n=pm(this.defaults,n);const r=Cz(n.baseURL,n.url,n.allowAbsoluteUrls);return wz(r,n.params,n.paramsSerializer)}};qe.forEach(["delete","get","head","options"],function(n){rm.prototype[n]=function(r,s){return this.request(pm(s||{},{method:n,url:r,data:(s||{}).data}))}});qe.forEach(["post","put","patch"],function(n){function r(s){return function(o,l,c){return this.request(pm(c||{},{method:n,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}rm.prototype[n]=r(),rm.prototype[n+"Form"]=r(!0)});let Cie=class Tz{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const s=this;this.promise.then(a=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](a);s._listeners=null}),this.promise.then=a=>{let o;const l=new Promise(c=>{s.subscribe(c),o=c}).then(a);return l.cancel=function(){s.unsubscribe(o)},l},n(function(o,l,c){s.reason||(s.reason=new e0(o,l,c),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const n=new AbortController,r=s=>{n.abort(s)};return this.subscribe(r),n.signal.unsubscribe=()=>this.unsubscribe(r),n.signal}static source(){let n;return{token:new Tz(function(a){n=a}),cancel:n}}};function Pie(e){return function(r){return e.apply(null,r)}}function Aie(e){return qe.isObject(e)&&e.isAxiosError===!0}const uA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(uA).forEach(([e,n])=>{uA[n]=e});function Oz(e){const n=new rm(e),r=cz(rm.prototype.request,n);return qe.extend(r,rm.prototype,n,{allOwnKeys:!0}),qe.extend(r,n,null,{allOwnKeys:!0}),r.create=function(a){return Oz(pm(e,a))},r}const gs=Oz(ty);gs.Axios=rm;gs.CanceledError=e0;gs.CancelToken=Cie;gs.isCancel=_z;gs.VERSION=Ez;gs.toFormData=t2;gs.AxiosError=mn;gs.Cancel=gs.CanceledError;gs.all=function(n){return Promise.all(n)};gs.spread=Pie;gs.isAxiosError=Aie;gs.mergeConfig=pm;gs.AxiosHeaders=Ma;gs.formToJSON=e=>Nz(qe.isHTMLForm(e)?new FormData(e):e);gs.getAdapter=kz.getAdapter;gs.HttpStatusCode=uA;gs.default=gs;const{Axios:GRe,AxiosError:YRe,CanceledError:QRe,isCancel:XRe,CancelToken:JRe,VERSION:ZRe,all:e6e,Cancel:t6e,isAxiosError:n6e,spread:r6e,toFormData:s6e,AxiosHeaders:i6e,HttpStatusCode:a6e,formToJSON:o6e,getAdapter:l6e,mergeConfig:c6e}=gs,kie=typeof window>"u",QO=!kie&&window.self!==window.top,TN=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),ui=[];for(let e=0;e<256;++e)ui.push((e+256).toString(16).slice(1));function Eie(e,n=0){return(ui[e[n+0]]+ui[e[n+1]]+ui[e[n+2]]+ui[e[n+3]]+"-"+ui[e[n+4]]+ui[e[n+5]]+"-"+ui[e[n+6]]+ui[e[n+7]]+"-"+ui[e[n+8]]+ui[e[n+9]]+"-"+ui[e[n+10]]+ui[e[n+11]]+ui[e[n+12]]+ui[e[n+13]]+ui[e[n+14]]+ui[e[n+15]]).toLowerCase()}let ON;const Tie=new Uint8Array(16);function Oie(){if(!ON){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ON=crypto.getRandomValues.bind(crypto)}return ON(Tie)}const Lie=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),XO={randomUUID:Lie};function Rie(e,n,r){var a;e=e||{};const s=e.random??((a=e.rng)==null?void 0:a.call(e))??Oie();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Eie(s)}function Die(e,n,r){return XO.randomUUID&&!e?XO.randomUUID():Rie(e)}class Iie extends Error{constructor(n,r,s,a,o){super(n),this.name="Base44Error",this.status=r,this.code=s,this.data=a,this.originalError=o}toJSON(){return{name:this.name,message:this.message,status:this.status,code:this.code,data:this.data}}}function lx({baseURL:e,headers:n={},token:r,interceptResponses:s=!0,onError:a}){const o=gs.create({baseURL:e,headers:{"Content-Type":"application/json",Accept:"application/json",...n}});return r&&(o.defaults.headers.common.Authorization=`Bearer ${r}`),o.interceptors.request.use(l=>{typeof window<"u"&&l.headers.set("X-Origin-URL",window.location.href);const c=Die();if(l.requestId=c,QO)try{window.parent.postMessage({type:"api-request-start",requestId:c,data:{url:e+l.url,method:l.method,body:l.data instanceof FormData?"[FormData object]":l.data}},"*")}catch{}return l}),s&&o.interceptors.response.use(l=>{var c;const u=(c=l.config)===null||c===void 0?void 0:c.requestId;try{QO&&u&&window.parent.postMessage({type:"api-request-end",requestId:u,data:{statusCode:l.status,response:l.data}},"*")}catch{}return l.data},l=>{var c,u,d,f,m,g,x,v;const y=((u=(c=l.response)===null||c===void 0?void 0:c.data)===null||u===void 0?void 0:u.message)||((f=(d=l.response)===null||d===void 0?void 0:d.data)===null||f===void 0?void 0:f.detail)||l.message,b=new Iie(y,(m=l.response)===null||m===void 0?void 0:m.status,(x=(g=l.response)===null||g===void 0?void 0:g.data)===null||x===void 0?void 0:x.code,(v=l.response)===null||v===void 0?void 0:v.data,l);return a==null||a(b),Promise.reject(b)}),o}function JO(e){const{axios:n,appId:r,getSocket:s}=e;return new Proxy({},{get(a,o){if(!(typeof o!="string"||o==="then"||o.startsWith("_")))return Fie(n,r,o,s)}})}function Mie(e){var n;try{const r=JSON.parse(e);return{type:r.type,data:r.data,id:r.id||((n=r.data)===null||n===void 0?void 0:n.id),timestamp:r.timestamp||new Date().toISOString()}}catch(r){return console.warn("[Base44 SDK] Failed to parse realtime message:",r),null}}function Fie(e,n,r,s){const a=`/apps/${n}/entities/${r}`;return{async list(o,l,c,u){const d={};return o&&(d.sort=o),l&&(d.limit=l),c&&(d.skip=c),u&&(d.fields=Array.isArray(u)?u.join(","):u),e.get(a,{params:d})},async filter(o,l,c,u,d){const f={q:JSON.stringify(o)};return l&&(f.sort=l),c&&(f.limit=c),u&&(f.skip=u),d&&(f.fields=Array.isArray(d)?d.join(","):d),e.get(a,{params:f})},async get(o){return e.get(`${a}/${o}`)},async create(o){return e.post(a,o)},async update(o,l){return e.put(`${a}/${o}`,l)},async delete(o){return e.delete(`${a}/${o}`)},async deleteMany(o){return e.delete(a,{data:o})},async bulkCreate(o){return e.post(`${a}/bulk`,o)},async importEntities(o){const l=new FormData;return l.append("file",o,o.name),e.post(`${a}/import`,l,{headers:{"Content-Type":"multipart/form-data"}})},subscribe(o){const l=`entities:${n}:${r}`;return s().subscribeToRoom(l,{update_model:d=>{const f=Mie(d.data);if(f)try{o(f)}catch(m){console.error("[Base44 SDK] Subscription callback error:",m)}}})}}}function Bie(e,n){return{async call(r,s,a){if(!(r!=null&&r.trim()))throw new Error("Integration slug is required and cannot be empty");if(!(s!=null&&s.trim()))throw new Error("Operation ID is required and cannot be empty");const{pathParams:o,queryParams:l,...c}=a??{},u={...c,...o&&{path_params:o},...l&&{query_params:l}};return await e.post(`/apps/${n}/integrations/custom/${r}/${s}`,u)}}}function ZO(e,n){const r=Bie(e,n);return new Proxy({},{get(s,a){if(!(typeof a!="string"||a==="then"||a.startsWith("_")))return a==="custom"?r:new Proxy({},{get(o,l){if(!(typeof l!="string"||l==="then"||l.startsWith("_")))return async c=>{if(typeof c=="string")throw new Error(`Integration ${l} must receive an object with named parameters, received: ${c}`);let u,d;return c instanceof FormData||c&&Object.values(c).some(f=>f instanceof File)?(u=new FormData,Object.keys(c).forEach(f=>{c[f]instanceof File?u.append(f,c[f],c[f].name):typeof c[f]=="object"&&c[f]!==null?u.append(f,JSON.stringify(c[f])):u.append(f,c[f])}),d="multipart/form-data"):(u=c,d="application/json"),a==="Core"?e.post(`/apps/${n}/integration-endpoints/Core/${l}`,u||c,{headers:{"Content-Type":d}}):e.post(`/apps/${n}/integration-endpoints/installable/${a}/integration-endpoints/${l}`,u||c,{headers:{"Content-Type":d}})}}})}})}function $ie(e,n,r,s){return{async me(){return e.get(`/apps/${r}/entities/User/me`)},async updateMe(a){return e.put(`/apps/${r}/entities/User/me`,a)},redirectToLogin(a){if(typeof window>"u")throw new Error("Login method can only be used in a browser environment");const o=a?new URL(a,window.location.origin).toString():window.location.href,l=`${s.appBaseUrl}/login?from_url=${encodeURIComponent(o)}`;window.location.href=l},loginWithProvider(a,o="/"){const l=new URL(o,window.location.origin).toString(),c=a==="google"?"":`/${a}`,u=`${s.appBaseUrl}/api/apps/auth${c}/login?app_id=${r}&from_url=${encodeURIComponent(l)}`;window.location.href=u},logout(a){if(delete e.defaults.headers.common.Authorization,typeof window<"u"){if(window.localStorage)try{window.localStorage.removeItem("base44_access_token"),window.localStorage.removeItem("token")}catch(c){console.error("Failed to remove token from localStorage:",c)}const o=a||window.location.href,l=`${s.appBaseUrl}/api/apps/auth/logout?from_url=${encodeURIComponent(o)}`;window.location.href=l}},setToken(a,o=!0){if(a&&(e.defaults.headers.common.Authorization=`Bearer ${a}`,n.defaults.headers.common.Authorization=`Bearer ${a}`,o&&typeof window<"u"&&window.localStorage))try{window.localStorage.setItem("base44_access_token",a),window.localStorage.setItem("token",a)}catch(l){console.error("Failed to save token to localStorage:",l)}},async loginViaEmailPassword(a,o,l){var c;try{const u=await e.post(`/apps/${r}/auth/login`,{email:a,password:o,...l&&{turnstile_token:l}}),{access_token:d,user:f}=u;return d&&this.setToken(d),{access_token:d,user:f}}catch(u){throw((c=u.response)===null||c===void 0?void 0:c.status)===401&&await this.logout(),u}},async isAuthenticated(){try{return await this.me(),!0}catch{return!1}},inviteUser(a,o){return e.post(`/apps/${r}/users/invite-user`,{user_email:a,role:o})},register(a){return e.post(`/apps/${r}/auth/register`,a)},verifyOtp({email:a,otpCode:o}){return e.post(`/apps/${r}/auth/verify-otp`,{email:a,otp_code:o})},resendOtp(a){return e.post(`/apps/${r}/auth/resend-otp`,{email:a})},resetPasswordRequest(a){return e.post(`/apps/${r}/auth/reset-password-request`,{email:a})},resetPassword({resetToken:a,newPassword:o}){return e.post(`/apps/${r}/auth/reset-password`,{reset_token:a,new_password:o})},changePassword({userId:a,currentPassword:o,newPassword:l}){return e.post(`/apps/${r}/auth/change-password`,{user_id:a,current_password:o,new_password:l})}}}function qie(e,n,r){return{async getAccessToken(s){const a=`/apps/${n}/auth/sso/accesstoken/${s}`,o={};return r&&(o["on-behalf-of"]=`Bearer ${r}`),e.get(a,{headers:o})}}}function zie(e,n){return{async getAccessToken(r){if(!r||typeof r!="string")throw new Error("Integration type is required and must be a string");return(await e.get(`/apps/${n}/external-auth/tokens/${r}`)).access_token}}}function K4(e={}){const{storageKey:n="base44_access_token",paramName:r="access_token",saveToStorage:s=!0,removeFromUrl:a=!0}=e;let o=null;if(typeof window<"u"&&window.location)try{const l=new URLSearchParams(window.location.search);if(o=l.get(r),o){if(s&&Uie(o,{storageKey:n}),a){l.delete(r);const c=`${window.location.pathname}${l.toString()?`?${l.toString()}`:""}${window.location.hash}`;window.history.replaceState({},document.title,c)}return o}}catch(l){console.error("Error retrieving token from URL:",l)}if(typeof window<"u"&&window.localStorage)try{return o=window.localStorage.getItem(n),o}catch(l){console.error("Error retrieving token from local storage:",l)}return null}function Uie(e,n){const{storageKey:r="base44_access_token"}=n;if(typeof window>"u"||!window.localStorage||!e)return!1;try{return window.localStorage.setItem(r,e),window.localStorage.setItem("token",e),!0}catch(s){return console.error("Error saving token to local storage:",s),!1}}function eL(e,n){return{async invoke(r,s){if(typeof s=="string")throw new Error(`Function ${r} must receive an object with named parameters, received: ${s}`);let a,o;return s instanceof FormData||s&&Object.values(s).some(l=>l instanceof File)?(a=new FormData,Object.keys(s).forEach(l=>{s[l]instanceof File?a.append(l,s[l],s[l].name):typeof s[l]=="object"&&s[l]!==null?a.append(l,JSON.stringify(s[l])):a.append(l,s[l])}),o="multipart/form-data"):(a=s,o="application/json"),e.post(`/apps/${n}/functions/${r}`,a||s,{headers:{"Content-Type":o}})}}}function tL({axios:e,getSocket:n,appId:r,serverUrl:s,token:a}){const o=`/apps/${r}/agents`,l={},c=()=>e.get(`${o}/conversations`),u=v=>e.get(`${o}/conversations/${v}`);return{getConversations:c,getConversation:u,listConversations:v=>e.get(`${o}/conversations`,{params:v}),createConversation:v=>e.post(`${o}/conversations`,v),addMessage:async(v,y)=>e.post(`${o}/conversations/v2/${v.id}/messages`,y),subscribeToConversation:(v,y)=>{const b=`/agent-conversations/${v}`,N=n(),j=u(v).then(S=>(l[v]=S,S));return N.subscribeToRoom(b,{connect:()=>{},update_model:async({data:S})=>{const A=JSON.parse(S);if(A._message){await j;const P=A._message,L=l[v];if(L){const O=L.messages||[],R=O.findIndex(U=>U.id===P.id),q=R!==-1?O.map((U,D)=>D===R?P:U):[...O,P];l[v]={...L,messages:q},y==null||y(l[v])}}}})},getWhatsAppConnectURL:v=>{const y=`${s}/api/apps/${r}/agents/${encodeURIComponent(v)}/whatsapp`,b=a??K4();return b?`${y}?token=${b}`:y}}}function nL(e,n){const r=`/app-logs/${n}`;return{async logUserInApp(s){await e.post(`${r}/log-user-in-app/${s}`)},async fetchLogs(s={}){return await e.get(r,{params:s})},async getStats(s={}){return await e.get(`${r}/stats`,{params:s})}}}function Vie(e,n){return{async inviteUser(r,s){if(s!=="user"&&s!=="admin")throw new Error(`Invalid role: "${s}". Role must be either "user" or "admin".`);return await e.post(`/apps/${n}/runtime/users/invite-user`,{user_email:r,role:s})}}}const Pc=Object.create(null);Pc.open="0";Pc.close="1";Pc.ping="2";Pc.pong="3";Pc.message="4";Pc.upgrade="5";Pc.noop="6";const e1=Object.create(null);Object.keys(Pc).forEach(e=>{e1[Pc[e]]=e});const dA={type:"error",data:"parser error"},Lz=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Rz=typeof ArrayBuffer=="function",Dz=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,G4=({type:e,data:n},r,s)=>Lz&&n instanceof Blob?r?s(n):rL(n,s):Rz&&(n instanceof ArrayBuffer||Dz(n))?r?s(n):rL(new Blob([n]),s):s(Pc[e]+(n||"")),rL=(e,n)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];n("b"+(s||""))},r.readAsDataURL(e)};function sL(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let LN;function Hie(e,n){if(Lz&&e.data instanceof Blob)return e.data.arrayBuffer().then(sL).then(n);if(Rz&&(e.data instanceof ArrayBuffer||Dz(e.data)))return n(sL(e.data));G4(e,!1,r=>{LN||(LN=new TextEncoder),n(LN.encode(r))})}const iL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<iL.length;e++)cx[iL.charCodeAt(e)]=e;const Wie=e=>{let n=e.length*.75,r=e.length,s,a=0,o,l,c,u;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);const d=new ArrayBuffer(n),f=new Uint8Array(d);for(s=0;s<r;s+=4)o=cx[e.charCodeAt(s)],l=cx[e.charCodeAt(s+1)],c=cx[e.charCodeAt(s+2)],u=cx[e.charCodeAt(s+3)],f[a++]=o<<2|l>>4,f[a++]=(l&15)<<4|c>>2,f[a++]=(c&3)<<6|u&63;return d},Kie=typeof ArrayBuffer=="function",Y4=(e,n)=>{if(typeof e!="string")return{type:"message",data:Iz(e,n)};const r=e.charAt(0);return r==="b"?{type:"message",data:Gie(e.substring(1),n)}:e1[r]?e.length>1?{type:e1[r],data:e.substring(1)}:{type:e1[r]}:dA},Gie=(e,n)=>{if(Kie){const r=Wie(e);return Iz(r,n)}else return{base64:!0,data:e}},Iz=(e,n)=>{switch(n){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Mz="",Yie=(e,n)=>{const r=e.length,s=new Array(r);let a=0;e.forEach((o,l)=>{G4(o,!1,c=>{s[l]=c,++a===r&&n(s.join(Mz))})})},Qie=(e,n)=>{const r=e.split(Mz),s=[];for(let a=0;a<r.length;a++){const o=Y4(r[a],n);if(s.push(o),o.type==="error")break}return s};function Xie(){return new TransformStream({transform(e,n){Hie(e,r=>{const s=r.length;let a;if(s<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,s);else if(s<65536){a=new Uint8Array(3);const o=new DataView(a.buffer);o.setUint8(0,126),o.setUint16(1,s)}else{a=new Uint8Array(9);const o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(a[0]|=128),n.enqueue(a),n.enqueue(r)})}})}let RN;function hb(e){return e.reduce((n,r)=>n+r.length,0)}function fb(e,n){if(e[0].length===n)return e.shift();const r=new Uint8Array(n);let s=0;for(let a=0;a<n;a++)r[a]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),r}function Jie(e,n){RN||(RN=new TextDecoder);const r=[];let s=0,a=-1,o=!1;return new TransformStream({transform(l,c){for(r.push(l);;){if(s===0){if(hb(r)<1)break;const u=fb(r,1);o=(u[0]&128)===128,a=u[0]&127,a<126?s=3:a===126?s=1:s=2}else if(s===1){if(hb(r)<2)break;const u=fb(r,2);a=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),s=3}else if(s===2){if(hb(r)<8)break;const u=fb(r,8),d=new DataView(u.buffer,u.byteOffset,u.length),f=d.getUint32(0);if(f>Math.pow(2,21)-1){c.enqueue(dA);break}a=f*Math.pow(2,32)+d.getUint32(4),s=3}else{if(hb(r)<a)break;const u=fb(r,a);c.enqueue(Y4(o?u:RN.decode(u),n)),s=0}if(a===0||a>e){c.enqueue(dA);break}}}})}const Fz=4;function _s(e){if(e)return Zie(e)}function Zie(e){for(var n in _s.prototype)e[n]=_s.prototype[n];return e}_s.prototype.on=_s.prototype.addEventListener=function(e,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(n),this};_s.prototype.once=function(e,n){function r(){this.off(e,r),n.apply(this,arguments)}return r.fn=n,this.on(e,r),this};_s.prototype.off=_s.prototype.removeListener=_s.prototype.removeAllListeners=_s.prototype.removeEventListener=function(e,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,a=0;a<r.length;a++)if(s=r[a],s===n||s.fn===n){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};_s.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),r=this._callbacks["$"+e],s=1;s<arguments.length;s++)n[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,a=r.length;s<a;++s)r[s].apply(this,n)}return this};_s.prototype.emitReserved=_s.prototype.emit;_s.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};_s.prototype.hasListeners=function(e){return!!this.listeners(e).length};const r2=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,r)=>r(n,0),Fo=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),eae="arraybuffer";function Bz(e,...n){return n.reduce((r,s)=>(e.hasOwnProperty(s)&&(r[s]=e[s]),r),{})}const tae=Fo.setTimeout,nae=Fo.clearTimeout;function s2(e,n){n.useNativeTimers?(e.setTimeoutFn=tae.bind(Fo),e.clearTimeoutFn=nae.bind(Fo)):(e.setTimeoutFn=Fo.setTimeout.bind(Fo),e.clearTimeoutFn=Fo.clearTimeout.bind(Fo))}const rae=1.33;function sae(e){return typeof e=="string"?iae(e):Math.ceil((e.byteLength||e.size)*rae)}function iae(e){let n=0,r=0;for(let s=0,a=e.length;s<a;s++)n=e.charCodeAt(s),n<128?r+=1:n<2048?r+=2:n<55296||n>=57344?r+=3:(s++,r+=4);return r}function $z(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function aae(e){let n="";for(let r in e)e.hasOwnProperty(r)&&(n.length&&(n+="&"),n+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n}function oae(e){let n={},r=e.split("&");for(let s=0,a=r.length;s<a;s++){let o=r[s].split("=");n[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return n}class lae extends Error{constructor(n,r,s){super(n),this.description=r,this.context=s,this.type="TransportError"}}class Q4 extends _s{constructor(n){super(),this.writable=!1,s2(this,n),this.opts=n,this.query=n.query,this.socket=n.socket,this.supportsBinary=!n.forceBase64}onError(n,r,s){return super.emitReserved("error",new lae(n,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const r=Y4(n,this.socket.binaryType);this.onPacket(r)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,r={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const r=aae(n);return r.length?"?"+r:""}}class cae extends Q4{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(n){this.readyState="pausing";const r=()=>{this.readyState="paused",n()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Qie(n,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,Yie(n,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=$z()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(n,r)}}let qz=!1;try{qz=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const uae=qz;function dae(){}class hae extends cae{constructor(n){if(super(n),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||s!==n.port}}doWrite(n,r){const s=this.request({method:"POST",data:n});s.on("success",r),s.on("error",(a,o)=>{this.onError("xhr post error",a,o)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=n}}class bc extends _s{constructor(n,r,s){super(),this.createRequest=n,s2(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var n;const r=Bz(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&s.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var a;s.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=bc.requestsCount++,bc.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=dae,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete bc.requests[this._index],this._xhr=null}}_onLoad(){const n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}bc.requestsCount=0;bc.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",aL);else if(typeof addEventListener=="function"){const e="onpagehide"in Fo?"pagehide":"unload";addEventListener(e,aL,!1)}}function aL(){for(let e in bc.requests)bc.requests.hasOwnProperty(e)&&bc.requests[e].abort()}const fae=(function(){const e=zz({xdomain:!1});return e&&e.responseType!==null})();class mae extends hae{constructor(n){super(n);const r=n&&n.forceBase64;this.supportsBinary=fae&&!r}request(n={}){return Object.assign(n,{xd:this.xd},this.opts),new bc(zz,this.uri(),n)}}function zz(e){const n=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||uae))return new XMLHttpRequest}catch{}if(!n)try{return new Fo[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Uz=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class pae extends Q4{get name(){return"websocket"}doOpen(){const n=this.uri(),r=this.opts.protocols,s=Uz?{}:Bz(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(n,r,s)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],a=r===n.length-1;G4(s,this.supportsBinary,o=>{try{this.doWrite(s,o)}catch{}a&&r2(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=$z()),this.supportsBinary||(r.b64=1),this.createUri(n,r)}}const DN=Fo.WebSocket||Fo.MozWebSocket;class gae extends pae{createSocket(n,r,s){return Uz?new DN(n,r,s):r?new DN(n,r):new DN(n)}doWrite(n,r){this.ws.send(r)}}class xae extends Q4{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(n){return this.emitReserved("error",n)}this._transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{const r=Jie(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=n.readable.pipeThrough(r).getReader(),a=Xie();a.readable.pipeTo(n.writable),this._writer=a.writable.getWriter();const o=()=>{s.read().then(({done:c,value:u})=>{c||(this.onPacket(u),o())}).catch(c=>{})};o();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],a=r===n.length-1;this._writer.write(s).then(()=>{a&&r2(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this._transport)===null||n===void 0||n.close()}}const vae={websocket:gae,webtransport:xae,polling:mae},yae=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bae=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hA(e){if(e.length>8e3)throw"URI too long";const n=e,r=e.indexOf("["),s=e.indexOf("]");r!=-1&&s!=-1&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));let a=yae.exec(e||""),o={},l=14;for(;l--;)o[bae[l]]=a[l]||"";return r!=-1&&s!=-1&&(o.source=n,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=wae(o,o.path),o.queryKey=jae(o,o.query),o}function wae(e,n){const r=/\/{2,9}/g,s=n.replace(r,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&s.splice(0,1),n.slice(-1)=="/"&&s.splice(s.length-1,1),s}function jae(e,n){const r={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,a,o){a&&(r[a]=o)}),r}const fA=typeof addEventListener=="function"&&typeof removeEventListener=="function",t1=[];fA&&addEventListener("offline",()=>{t1.forEach(e=>e())},!1);class fh extends _s{constructor(n,r){if(super(),this.binaryType=eae,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(r=n,n=null),n){const s=hA(n);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=hA(r.host).host);s2(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const a=s.prototype.name;this.transports.push(a),this._transportsByName[a]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=oae(this.opts.query)),fA&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},t1.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){const r=Object.assign({},this.opts.query);r.EIO=Fz,r.transport=n,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const n=this.opts.rememberUpgrade&&fh.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(n);r.open(),this.setTransport(r)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",fh.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=n.data,this._onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const a=this.writeBuffer[s].data;if(a&&(r+=sae(a)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,r2(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,r,s){return this._sendPacket("message",n,r,s),this}send(n,r,s){return this._sendPacket("message",n,r,s),this}_sendPacket(n,r,s,a){if(typeof r=="function"&&(a=r,r=void 0),typeof s=="function"&&(a=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const o={type:n,data:r,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){const n=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():n()}):this.upgrading?s():n()),this}_onError(n){if(fh.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),fA&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=t1.indexOf(this._offlineEventListener);s!==-1&&t1.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this._prevBufferLen=0}}}fh.protocol=Fz;class Nae extends fh{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let n=0;n<this._upgrades.length;n++)this._probe(this._upgrades[n])}_probe(n){let r=this.createTransport(n),s=!1;fh.priorWebsocketSuccess=!1;const a=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!s)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;fh.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(f(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=r.name,this.emitReserved("upgradeError",g)}}))};function o(){s||(s=!0,f(),r.close(),r=null)}const l=m=>{const g=new Error("probe error: "+m);g.transport=r.name,o(),this.emitReserved("upgradeError",g)};function c(){l("transport closed")}function u(){l("socket closed")}function d(m){r&&m.name!==r.name&&o()}const f=()=>{r.removeListener("open",a),r.removeListener("error",l),r.removeListener("close",c),this.off("close",u),this.off("upgrading",d)};r.once("open",a),r.once("error",l),r.once("close",c),this.once("close",u),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(n){this._upgrades=this._filterUpgrades(n.upgrades),super.onHandshake(n)}_filterUpgrades(n){const r=[];for(let s=0;s<n.length;s++)~this.transports.indexOf(n[s])&&r.push(n[s]);return r}}let _ae=class extends Nae{constructor(n,r={}){const s=typeof n=="object"?n:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(a=>vae[a]).filter(a=>!!a)),super(n,s)}};function Sae(e,n="",r){let s=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),s=hA(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+n,s.href=s.protocol+"://"+o+(r&&r.port===s.port?"":":"+s.port),s}const Cae=typeof ArrayBuffer=="function",Pae=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Vz=Object.prototype.toString,Aae=typeof Blob=="function"||typeof Blob<"u"&&Vz.call(Blob)==="[object BlobConstructor]",kae=typeof File=="function"||typeof File<"u"&&Vz.call(File)==="[object FileConstructor]";function X4(e){return Cae&&(e instanceof ArrayBuffer||Pae(e))||Aae&&e instanceof Blob||kae&&e instanceof File}function n1(e,n){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,s=e.length;r<s;r++)if(n1(e[r]))return!0;return!1}if(X4(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return n1(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n1(e[r]))return!0;return!1}function Eae(e){const n=[],r=e.data,s=e;return s.data=mA(r,n),s.attachments=n.length,{packet:s,buffers:n}}function mA(e,n){if(!e)return e;if(X4(e)){const r={_placeholder:!0,num:n.length};return n.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=mA(e[s],n);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=mA(e[s],n));return r}return e}function Tae(e,n){return e.data=pA(e.data,n),delete e.attachments,e}function pA(e,n){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<n.length)return n[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=pA(e[r],n);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=pA(e[r],n));return e}const Oae=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Lae=5;var Rn;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Rn||(Rn={}));class Rae{constructor(n){this.replacer=n}encode(n){return(n.type===Rn.EVENT||n.type===Rn.ACK)&&n1(n)?this.encodeAsBinary({type:n.type===Rn.EVENT?Rn.BINARY_EVENT:Rn.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let r=""+n.type;return(n.type===Rn.BINARY_EVENT||n.type===Rn.BINARY_ACK)&&(r+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(r+=n.nsp+","),n.id!=null&&(r+=n.id),n.data!=null&&(r+=JSON.stringify(n.data,this.replacer)),r}encodeAsBinary(n){const r=Eae(n),s=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(s),a}}function oL(e){return Object.prototype.toString.call(e)==="[object Object]"}class J4 extends _s{constructor(n){super(),this.reviver=n}add(n){let r;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(n);const s=r.type===Rn.BINARY_EVENT;s||r.type===Rn.BINARY_ACK?(r.type=s?Rn.EVENT:Rn.ACK,this.reconstructor=new Dae(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(X4(n)||n.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(n),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let r=0;const s={type:Number(n.charAt(0))};if(Rn[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===Rn.BINARY_EVENT||s.type===Rn.BINARY_ACK){const o=r+1;for(;n.charAt(++r)!=="-"&&r!=n.length;);const l=n.substring(o,r);if(l!=Number(l)||n.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(l)}if(n.charAt(r+1)==="/"){const o=r+1;for(;++r&&!(n.charAt(r)===","||r===n.length););s.nsp=n.substring(o,r)}else s.nsp="/";const a=n.charAt(r+1);if(a!==""&&Number(a)==a){const o=r+1;for(;++r;){const l=n.charAt(r);if(l==null||Number(l)!=l){--r;break}if(r===n.length)break}s.id=Number(n.substring(o,r+1))}if(n.charAt(++r)){const o=this.tryParse(n.substr(r));if(J4.isPayloadValid(s.type,o))s.data=o;else throw new Error("invalid payload")}return s}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,r){switch(n){case Rn.CONNECT:return oL(r);case Rn.DISCONNECT:return r===void 0;case Rn.CONNECT_ERROR:return typeof r=="string"||oL(r);case Rn.EVENT:case Rn.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Oae.indexOf(r[0])===-1);case Rn.ACK:case Rn.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Dae{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const r=Tae(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Iae=Object.freeze(Object.defineProperty({__proto__:null,Decoder:J4,Encoder:Rae,get PacketType(){return Rn},protocol:Lae},Symbol.toStringTag,{value:"Module"}));function wl(e,n,r){return e.on(n,r),function(){e.off(n,r)}}const Mae=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Hz extends _s{constructor(n,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[wl(n,"open",this.onopen.bind(this)),wl(n,"packet",this.onpacket.bind(this)),wl(n,"error",this.onerror.bind(this)),wl(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...r){var s,a,o;if(Mae.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(r.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const l={type:Rn.EVENT,data:r};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const f=this.ids++,m=r.pop();this._registerAckCallback(f,m),l.id=f}const c=(a=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||a===void 0?void 0:a.writable,u=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!c||(u?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(n,r){var s;const a=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(a===void 0){this.acks[n]=r;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===n&&this.sendBuffer.splice(c,1);r.call(this,new Error("operation has timed out"))},a),l=(...c)=>{this.io.clearTimeoutFn(o),r.apply(this,c)};l.withError=!0,this.acks[n]=l}emitWithAck(n,...r){return new Promise((s,a)=>{const o=(l,c)=>l?a(l):s(c);o.withError=!0,r.push(o),this.emit(n,...r)})}_addToQueue(n){let r;typeof n[n.length-1]=="function"&&(r=n.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((a,...o)=>s!==this._queue[0]?void 0:(a!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...o)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!n||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:Rn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(s=>String(s.id)===n)){const s=this.acks[n];delete this.acks[n],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case Rn.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Rn.EVENT:case Rn.BINARY_EVENT:this.onevent(n);break;case Rn.ACK:case Rn.BINARY_ACK:this.onack(n);break;case Rn.DISCONNECT:this.ondisconnect();break;case Rn.CONNECT_ERROR:this.destroy();const s=new Error(n.data.message);s.data=n.data.data,this.emitReserved("connect_error",s);break}}onevent(n){const r=n.data||[];n.id!=null&&r.push(this.ack(n.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const r=this;let s=!1;return function(...a){s||(s=!0,r.packet({type:Rn.ACK,id:n,data:a}))}}onack(n){const r=this.acks[n.id];typeof r=="function"&&(delete this.acks[n.id],r.withError&&n.data.unshift(null),r.apply(this,n.data))}onconnect(n,r){this.id=n,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Rn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,n.data)}}}function t0(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t0.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),r=Math.floor(n*this.jitter*e);e=(Math.floor(n*10)&1)==0?e-r:e+r}return Math.min(e,this.max)|0};t0.prototype.reset=function(){this.attempts=0};t0.prototype.setMin=function(e){this.ms=e};t0.prototype.setMax=function(e){this.max=e};t0.prototype.setJitter=function(e){this.jitter=e};class gA extends _s{constructor(n,r){var s;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(r=n,n=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,s2(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new t0({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=n;const a=r.parser||Iae;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,n||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var r;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(r=this.backoff)===null||r===void 0||r.setMin(n),this)}randomizationFactor(n){var r;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(r=this.backoff)===null||r===void 0||r.setJitter(n),this)}reconnectionDelayMax(n){var r;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(r=this.backoff)===null||r===void 0||r.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new _ae(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=wl(r,"open",function(){s.onopen(),n&&n()}),o=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),n?n(c):this.maybeReconnectOnOpen()},l=wl(r,"error",o);if(this._timeout!==!1){const c=this._timeout,u=this.setTimeoutFn(()=>{a(),o(new Error("timeout")),r.close()},c);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(a),this.subs.push(l),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(wl(n,"ping",this.onping.bind(this)),wl(n,"data",this.ondata.bind(this)),wl(n,"error",this.onerror.bind(this)),wl(n,"close",this.onclose.bind(this)),wl(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(r){this.onclose("parse error",r)}}ondecoded(n){r2(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,r){let s=this.nsps[n];return s?this._autoConnect&&!s.active&&s.connect():(s=new Hz(this,n,r),this.nsps[n]=s),s}_destroy(n){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(n){const r=this.encoder.encode(n);for(let s=0;s<r.length;s++)this.engine.write(r[s],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(n,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(a=>{a?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",a)):n.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const z0={};function r1(e,n){typeof e=="object"&&(n=e,e=void 0),n=n||{};const r=Sae(e,n.path||"/socket.io"),s=r.source,a=r.id,o=r.path,l=z0[a]&&o in z0[a].nsps,c=n.forceNew||n["force new connection"]||n.multiplex===!1||l;let u;return c?u=new gA(s,n):(z0[a]||(z0[a]=new gA(s,n)),u=z0[a]),r.query&&!n.query&&(n.query=r.queryKey),u.socket(r.path,n)}Object.assign(r1,{Manager:gA,Socket:Hz,io:r1,connect:r1});function lL(e,n){var r;const s=r1(e.serverUrl,{path:e.mountPath,transports:e.transports,query:{app_id:e.appId,token:(r=e.token)!==null&&r!==void 0?r:K4()}});return s.on("connect",async()=>{var a;return console.log("connect",s.id),(a=n.connect)===null||a===void 0?void 0:a.call(n)}),s.on("update_model",async a=>{var o;return(o=n.update_model)===null||o===void 0?void 0:o.call(n,a)}),s.on("error",async a=>{var o;return(o=n.error)===null||o===void 0?void 0:o.call(n,a)}),s.on("connect_error",async a=>{var o;return console.error("connect_error",a),(o=n.error)===null||o===void 0?void 0:o.call(n,a)}),s}function Fae({config:e}){let n={...e};const r={},s={connect:async()=>{const x=[];Object.keys(r).forEach(v=>{u(v);const y=m(v);y==null||y.forEach(({connect:b})=>{const N=async()=>b==null?void 0:b();x.push(N())})}),await Promise.all(x)},update_model:async x=>{const y=m(x.room).map(b=>{var N;return(N=b.update_model)===null||N===void 0?void 0:N.call(b,x)});await Promise.all(y)},error:async x=>{console.error("error",x);const v=Object.values(r).flat().map(y=>{var b;return(b=y.error)===null||b===void 0?void 0:b.call(y,x)});await Promise.all(v)}};let a=lL(e,s);function o(){l()}function l(){a&&a.disconnect()}function c(x){o(),n={...n,...x},a=lL(n,s)}function u(x){a.emit("join",x)}function d(x){a.emit("leave",x)}async function f(x,v){var y;const b=JSON.stringify(v);return(y=s.update_model)===null||y===void 0?void 0:y.call(s,{room:x,data:b})}function m(x){return r[x]}return{socket:a,subscribeToRoom:(x,v)=>(r[x]||(u(x),r[x]=[]),r[x].push(v),()=>{var y,b;r[x]=(b=(y=r[x])===null||y===void 0?void 0:y.filter(N=>N!==v))!==null&&b!==void 0?b:[],r[x].length===0&&d(x)}),updateConfig:c,updateModel:f,disconnect:l}}const U0=typeof window<"u"?window:{base44SharedInstances:{}};function Bae(e,n){return U0.base44SharedInstances||(U0.base44SharedInstances={}),U0.base44SharedInstances[e]||(U0.base44SharedInstances[e]={instance:n()}),U0.base44SharedInstances[e].instance}const $ae="__user_heartbeat_event__",qae="__initialization_event__",zae="__session_duration_event__",cL="analytics-enable",uL="base44_analytics_session_id",Uae={enabled:!0,maxQueueSize:1e3,throttleTime:1e3,batchSize:30,heartBeatInterval:60*1e3},Vae="analytics",wr=Bae(Vae,()=>({requestsQueue:[],isProcessing:!1,isHeartBeatProcessing:!1,wasInitializationTracked:!1,sessionContext:null,sessionStartTime:null,config:{...Uae,...Jae()}})),Hae=({axiosClient:e,serverUrl:n,appId:r,userAuthModule:s})=>{var a;const{maxQueueSize:o,throttleTime:l,batchSize:c}=wr.config;if(!(!((a=wr.config)===null||a===void 0)&&a.enabled))return{track:()=>{},cleanup:()=>{}};let u;const d=`${n}/api/apps/${r}/analytics/track/batch`,f=async S=>{await e.request({method:"POST",url:`/apps/${r}/analytics/track/batch`,data:{events:S}})},m=S=>{try{const A=JSON.stringify({events:S}),P=new Blob([A],{type:"application/json"});return typeof navigator>"u"||A.length>6e4||!navigator.sendBeacon(d,P)}catch{return!1}},g=async(S,A={})=>{if(S.length===0)return;const P=await Xae(s),L=S.map(Qae(P));try{(!A.isBeacon||!m(L))&&await f(L)}catch{}},x=()=>{hL(g,{throttleTime:l,batchSize:c})},v=S=>{if(wr.requestsQueue.length>=o)return;const A=Yae();wr.requestsQueue.push({...S,...A}),x()},y=()=>{hL(g,{throttleTime:l,batchSize:c}),u=fL(v),Kae()},b=()=>{dL(),u==null||u(),Gae(v);const S=wr.requestsQueue.splice(0);g(S,{isBeacon:!0})},N=()=>{typeof window>"u"||(document.visibilityState==="hidden"?b():document.visibilityState==="visible"&&y())},j=()=>{dL(),u==null||u(),typeof window<"u"&&window.removeEventListener("visibilitychange",N)};return x(),u=fL(v),Wae(v),typeof window<"u"&&window.addEventListener("visibilitychange",N),{track:v,cleanup:j}};function dL(){wr.isProcessing=!1}async function hL(e,n){if(wr.isProcessing)return;wr.isProcessing=!0;const{throttleTime:r=1e3,batchSize:s=30}=n??{};for(;wr.isProcessing&&wr.requestsQueue.length>0;){const a=wr.requestsQueue.splice(0,s);a.length&&await e(a),await new Promise(o=>setTimeout(o,r))}wr.isProcessing=!1}function fL(e){var n;if(wr.isHeartBeatProcessing||((n=wr.config.heartBeatInterval)!==null&&n!==void 0?n:0)<10)return()=>{};wr.isHeartBeatProcessing=!0;const r=setInterval(()=>{e({eventName:$ae})},wr.config.heartBeatInterval);return()=>{clearInterval(r),wr.isHeartBeatProcessing=!1}}function Wae(e){typeof window>"u"||wr.wasInitializationTracked||(wr.wasInitializationTracked=!0,e({eventName:qae,properties:{referrer:document==null?void 0:document.referrer}}))}function Kae(){typeof window>"u"||wr.sessionStartTime!==null||(wr.sessionStartTime=new Date().toISOString())}function Gae(e){if(typeof window>"u"||wr.sessionStartTime===null)return;const n=new Date().getTime()-new Date(wr.sessionStartTime).getTime();wr.sessionStartTime=null,e({eventName:zae,properties:{sessionDuration:n}})}function Yae(){return{timestamp:new Date().toISOString(),pageUrl:typeof window<"u"?window.location.pathname:null}}function Qae(e){return n=>({event_name:n.eventName,properties:n.properties,timestamp:n.timestamp,page_url:n.pageUrl,...e})}let IN=null;async function Xae(e){if(!wr.sessionContext){if(!IN){const n=Zae();IN=e.me().then(r=>({user_id:r.id,session_id:n})).catch(()=>({user_id:null,session_id:n}))}wr.sessionContext=await IN}return wr.sessionContext}function Jae(){if(typeof window>"u")return;const n=new URLSearchParams(window.location.search).get(cL);if(n==null||!n.length)return;const r=new URLSearchParams(window.location.search);r.delete(cL);const s=window.location.pathname+(r.toString()?"?"+r.toString():"");return window.history.replaceState({},"",s),{enabled:n==="true"}}function Zae(){if(typeof window>"u")return TN();try{const e=localStorage.getItem(uL);if(!e){const n=TN();return localStorage.setItem(uL,n),n}return e}catch{return TN()}}function eoe(e){const{serverUrl:n="https://base44.app",appId:r,token:s,serviceToken:a,requiresAuth:o=!1,appBaseUrl:l,options:c,functionsVersion:u,headers:d}=e,f=typeof l=="string"?l:"",m={serverUrl:n,mountPath:"/ws-user-apps/socket.io/",transports:["websocket"],appId:r,token:s};let g=null;const x=()=>(g||(g=Fae({config:m})),g),v={...d,"X-App-Id":String(r)},y=u?{...v,"Base44-Functions-Version":u}:v,b=lx({baseURL:`${n}/api`,headers:v,token:s,onError:c==null?void 0:c.onError}),N=lx({baseURL:`${n}/api`,headers:y,token:s,interceptResponses:!1,onError:c==null?void 0:c.onError}),j=lx({baseURL:`${n}/api`,headers:v,token:a,onError:c==null?void 0:c.onError}),S=lx({baseURL:`${n}/api`,headers:y,token:a,interceptResponses:!1}),A=$ie(b,N,r,{appBaseUrl:f}),P={entities:JO({axios:b,appId:r,getSocket:x}),integrations:ZO(b,r),auth:A,functions:eL(N,r),agents:tL({axios:b,getSocket:x,appId:r,serverUrl:n,token:s}),appLogs:nL(b,r),users:Vie(b,r),analytics:Hae({axiosClient:b,serverUrl:n,appId:r,userAuthModule:A}),cleanup:()=>{P.analytics.cleanup(),g&&g.disconnect()}},L={entities:JO({axios:j,appId:r,getSocket:x}),integrations:ZO(j,r),sso:qie(j,r,s),connectors:zie(j,r),functions:eL(S,r),agents:tL({axios:j,getSocket:x,appId:r,serverUrl:n,token:s}),appLogs:nL(j,r),cleanup:()=>{g&&g.disconnect()}};if(typeof window<"u"){const R=s||K4();R&&P.auth.setToken(R)}return o&&typeof window<"u"&&setTimeout(async()=>{try{await P.auth.isAuthenticated()||P.auth.redirectToLogin(window.location.href)}catch(R){console.error("Authentication check failed:",R),P.auth.redirectToLogin(window.location.href)}},0),{...P,setToken(R){P.auth.setToken(R),g&&g.updateConfig({token:R}),m.token=R},getConfig(){return{serverUrl:n,appId:r,requiresAuth:o}},get asServiceRole(){if(!a)throw new Error("Service token is required to use asServiceRole. Please provide a serviceToken when creating the client.");return L}}}const Wz=typeof window>"u",toe=Wz?{localStorage:new Map}:window,Nx=toe.localStorage,noe=e=>e.replace(/([A-Z])/g,"_$1").toLowerCase(),V0=(e,{defaultValue:n=void 0,removeFromUrl:r=!1}={})=>{if(Wz)return n;const s=`base44_${noe(e)}`,a=new URLSearchParams(window.location.search),o=a.get(e);if(r){a.delete(e);const c=`${window.location.pathname}${a.toString()?`?${a.toString()}`:""}${window.location.hash}`;window.history.replaceState({},document.title,c)}if(o)return Nx.setItem(s,o),o;if(n)return Nx.setItem(s,n),n;const l=Nx.getItem(s);return l||null},roe=()=>(V0("clear_access_token")==="true"&&(Nx.removeItem("base44_access_token"),Nx.removeItem("token")),{appId:V0("app_id",{defaultValue:void 0}),token:V0("access_token",{removeFromUrl:!0}),fromUrl:V0("from_url",{defaultValue:window.location.href}),functionsVersion:V0("functions_version",{defaultValue:void 0})}),ux={...roe()},{appId:soe,token:ioe,functionsVersion:aoe}=ux,Ce=eoe({appId:soe,token:ioe,functionsVersion:aoe,serverUrl:"",requiresAuth:!1}),Kz=C.createContext();var oq,lq;const mL=(lq=(oq=import.meta)==null?void 0:oq.env)==null?void 0:lq.DEV,ooe=({children:e})=>{const[n,r]=C.useState(null),[s,a]=C.useState(!1),[o,l]=C.useState(!0),[c,u]=C.useState(!0),[d,f]=C.useState(null),[m,g]=C.useState(null),x=C.useRef(!0),v=C.useCallback((S,A)=>{x.current&&S(A)},[]),y=C.useCallback(async()=>{try{v(l,!0);const S=await Ce.auth.me();v(r,S),v(a,!0),v(f,null)}catch(S){v(r,null),v(a,!1),(S==null?void 0:S.status)===401||(S==null?void 0:S.status)===403?v(f,{type:"auth_required",message:"Authentication required"}):(mL&&console.warn("[AuthContext] User auth check failed:",S),v(f,{type:"unknown",message:(S==null?void 0:S.message)||"An unexpected error occurred"}))}finally{v(l,!1)}},[v]),b=C.useCallback(async()=>{var S,A;try{v(u,!0),v(f,null);const L=await lx({baseURL:"/api/apps/public",headers:{"X-App-Id":ux.appId},token:ux.token,interceptResponses:!0}).get(`/prod/public-settings/by-id/${ux.appId}`);v(g,L),ux.token?await y():(v(a,!1),v(l,!1))}catch(P){const L=(A=(S=P==null?void 0:P.data)==null?void 0:S.extra_data)==null?void 0:A.reason,O=P==null?void 0:P.status;(O===401||O===403)&&L?L==="auth_required"?v(f,{type:"auth_required",message:"Authentication required"}):L==="user_not_registered"?v(f,{type:"user_not_registered",message:"User not registered for this app"}):v(f,{type:L,message:(P==null?void 0:P.message)||"App access denied"}):(mL&&console.warn("[AuthContext] App state check failed:",P),v(f,{type:"unknown",message:(P==null?void 0:P.message)||"Failed to load app"})),v(l,!1),v(a,!1)}finally{v(u,!1)}},[y,v]);C.useEffect(()=>(x.current=!0,b(),()=>{x.current=!1}),[b]);const N=C.useCallback((S=!0)=>{v(r,null),v(a,!1),v(f,null),S?Ce.auth.logout(window.location.href):Ce.auth.logout()},[v]),j=C.useCallback(()=>{Ce.auth.redirectToLogin(window.location.href)},[]);return i.jsx(Kz.Provider,{value:{user:n,isAuthenticated:s,isLoadingAuth:o,isLoadingPublicSettings:c,authError:d,appPublicSettings:m,logout:N,navigateToLogin:j,checkAppState:b},children:e})},Gz=()=>{const e=C.useContext(Kz);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Ee=C.forwardRef(({className:e,...n},r)=>i.jsx("div",{ref:r,className:ut("rounded-xl border border-white/10 bg-[#223447] text-[#E0D8C8] shadow-sm",e),...n}));Ee.displayName="Card";const Ze=({className:e,...n})=>i.jsx("div",{className:ut("p-5 border-b border-white/10",e),...n}),et=({className:e,...n})=>i.jsx("h3",{className:ut("text-lg font-semibold text-[#E0D8C8]",e),...n}),Tl=({className:e,...n})=>i.jsx("p",{className:ut("text-sm text-[#E0D8C8]/70",e),...n}),Oe=({className:e,...n})=>i.jsx("div",{className:ut("p-5",e),...n}),loe=({className:e,...n})=>i.jsx("div",{className:ut("p-5 border-t border-white/10",e),...n});function pL(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function gm(...e){return n=>{let r=!1;const s=e.map(a=>{const o=pL(a,n);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():pL(e[a],null)}}}}function un(...e){return C.useCallback(gm(...e),e)}function xm(e){const n=uoe(e),r=C.forwardRef((s,a)=>{const{children:o,...l}=s,c=C.Children.toArray(o),u=c.find(hoe);if(u){const d=u.props.children,f=c.map(m=>m===u?C.Children.count(d)>1?C.Children.only(null):C.isValidElement(d)?d.props.children:null:m);return i.jsx(n,{...l,ref:a,children:C.isValidElement(d)?C.cloneElement(d,void 0,f):null})}return i.jsx(n,{...l,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}var coe=xm("Slot");function uoe(e){const n=C.forwardRef((r,s)=>{const{children:a,...o}=r;if(C.isValidElement(a)){const l=moe(a),c=foe(o,a.props);return a.type!==C.Fragment&&(c.ref=s?gm(s,l):l),C.cloneElement(a,c)}return C.Children.count(a)>1?C.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var Yz=Symbol("radix.slottable");function doe(e){const n=({children:r})=>i.jsx(i.Fragment,{children:r});return n.displayName=`${e}.Slottable`,n.__radixId=Yz,n}function hoe(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Yz}function foe(e,n){const r={...n};for(const s in n){const a=e[s],o=n[s];/^on[A-Z]/.test(s)?a&&o?r[s]=(...c)=>{const u=o(...c);return a(...c),u}:a&&(r[s]=a):s==="style"?r[s]={...a,...o}:s==="className"&&(r[s]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function moe(e){var s,a;let n=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?e.ref:(n=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const Z4=Gg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#A35C5C]/60 focus-visible:ring-offset-0 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-[#A35C5C] text-[#F3EBDD] hover:bg-[#8F4E4E]",secondary:"bg-white/5 text-[#E0D8C8] border border-white/10 hover:bg-white/10",ghost:"bg-transparent text-[#E0D8C8]/70 hover:bg-white/5",outline:"border border-[#E0D8C8]/20 text-[#E0D8C8] hover:bg-white/5 active:bg-white/10",destructive:"bg-[#E05D5D] text-[#F3EBDD] hover:bg-[#D54A4A] active:bg-[#C94C4C]",link:"text-[#E0D8C8] underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3 text-xs",lg:"h-11 rounded-xl px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ye=C.forwardRef(function({className:n,variant:r,size:s,asChild:a=!1,...o},l){const c=a?coe:"button";return i.jsx(c,{ref:l,className:ut(Z4({variant:r,size:s}),n),...o})});function poe(e){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const goe=e=>{switch(e){case"success":return yoe;case"info":return woe;case"warning":return boe;case"error":return joe;default:return null}},xoe=Array(12).fill(0),voe=({visible:e,className:n})=>ve.createElement("div",{className:["sonner-loading-wrapper",n].filter(Boolean).join(" "),"data-visible":e},ve.createElement("div",{className:"sonner-spinner"},xoe.map((r,s)=>ve.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),yoe=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),boe=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),woe=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),joe=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Noe=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ve.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ve.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),_oe=()=>{const[e,n]=ve.useState(document.hidden);return ve.useEffect(()=>{const r=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e};let xA=1;class Soe{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{const r=this.subscribers.indexOf(n);this.subscribers.splice(r,1)}),this.publish=n=>{this.subscribers.forEach(r=>r(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var r;const{message:s,...a}=n,o=typeof(n==null?void 0:n.id)=="number"||((r=n.id)==null?void 0:r.length)>0?n.id:xA++,l=this.toasts.find(u=>u.id===o),c=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(u=>u.id===o?(this.publish({...u,...n,id:o,title:s}),{...u,...n,id:o,dismissible:c,title:s}):u):this.addToast({title:s,...a,dismissible:c,id:o}),o},this.dismiss=n=>(n?(this.dismissedToasts.add(n),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:n,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(s=>s({id:r.id,dismiss:!0}))}),n),this.message=(n,r)=>this.create({...r,message:n}),this.error=(n,r)=>this.create({...r,message:n,type:"error"}),this.success=(n,r)=>this.create({...r,type:"success",message:n}),this.info=(n,r)=>this.create({...r,type:"info",message:n}),this.warning=(n,r)=>this.create({...r,type:"warning",message:n}),this.loading=(n,r)=>this.create({...r,type:"loading",message:n}),this.promise=(n,r)=>{if(!r)return;let s;r.loading!==void 0&&(s=this.create({...r,promise:n,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(n instanceof Function?n():n);let o=s!==void 0,l;const c=a.then(async d=>{if(l=["resolve",d],ve.isValidElement(d))o=!1,this.create({id:s,type:"default",message:d});else if(Poe(d)&&!d.ok){o=!1;const m=typeof r.error=="function"?await r.error(`HTTP error! status: ${d.status}`):r.error,g=typeof r.description=="function"?await r.description(`HTTP error! status: ${d.status}`):r.description,v=typeof m=="object"&&!ve.isValidElement(m)?m:{message:m};this.create({id:s,type:"error",description:g,...v})}else if(d instanceof Error){o=!1;const m=typeof r.error=="function"?await r.error(d):r.error,g=typeof r.description=="function"?await r.description(d):r.description,v=typeof m=="object"&&!ve.isValidElement(m)?m:{message:m};this.create({id:s,type:"error",description:g,...v})}else if(r.success!==void 0){o=!1;const m=typeof r.success=="function"?await r.success(d):r.success,g=typeof r.description=="function"?await r.description(d):r.description,v=typeof m=="object"&&!ve.isValidElement(m)?m:{message:m};this.create({id:s,type:"success",description:g,...v})}}).catch(async d=>{if(l=["reject",d],r.error!==void 0){o=!1;const f=typeof r.error=="function"?await r.error(d):r.error,m=typeof r.description=="function"?await r.description(d):r.description,x=typeof f=="object"&&!ve.isValidElement(f)?f:{message:f};this.create({id:s,type:"error",description:m,...x})}}).finally(()=>{o&&(this.dismiss(s),s=void 0),r.finally==null||r.finally.call(r)}),u=()=>new Promise((d,f)=>c.then(()=>l[0]==="reject"?f(l[1]):d(l[1])).catch(f));return typeof s!="string"&&typeof s!="number"?{unwrap:u}:Object.assign(s,{unwrap:u})},this.custom=(n,r)=>{const s=(r==null?void 0:r.id)||xA++;return this.create({jsx:n(s),id:s,...r}),s},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ta=new Soe,Coe=(e,n)=>{const r=(n==null?void 0:n.id)||xA++;return Ta.addToast({title:e,...n,id:r}),r},Poe=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Aoe=Coe,koe=()=>Ta.toasts,Eoe=()=>Ta.getActiveToasts(),Ve=Object.assign(Aoe,{success:Ta.success,info:Ta.info,warning:Ta.warning,error:Ta.error,custom:Ta.custom,message:Ta.message,promise:Ta.promise,dismiss:Ta.dismiss,loading:Ta.loading},{getHistory:koe,getToasts:Eoe});poe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function mb(e){return e.label!==void 0}const Toe=3,Ooe="24px",Loe="16px",gL=4e3,Roe=356,Doe=14,Ioe=45,Moe=200;function oc(...e){return e.filter(Boolean).join(" ")}function Foe(e){const[n,r]=e.split("-"),s=[];return n&&s.push(n),r&&s.push(r),s}const Boe=e=>{var n,r,s,a,o,l,c,u,d;const{invert:f,toast:m,unstyled:g,interacting:x,setHeights:v,visibleToasts:y,heights:b,index:N,toasts:j,expanded:S,removeToast:A,defaultRichColors:P,closeButton:L,style:O,cancelButtonStyle:R,actionButtonStyle:q,className:U="",descriptionClassName:D="",duration:M,position:G,gap:Y,expandByDefault:Z,classNames:X,icons:re,closeButtonAriaLabel:z="Close toast"}=e,[te,le]=ve.useState(null),[Q,T]=ve.useState(null),[B,H]=ve.useState(!1),[ee,ce]=ve.useState(!1),[he,W]=ve.useState(!1),[J,pe]=ve.useState(!1),[ue,me]=ve.useState(!1),[je,ze]=ve.useState(0),[Te,xe]=ve.useState(0),ht=ve.useRef(m.duration||M||gL),gt=ve.useRef(null),Ye=ve.useRef(null),dt=N===0,ft=N+1<=y,st=m.type,Ct=m.dismissible!==!1,Vt=m.className||"",Zt=m.descriptionClassName||"",sn=ve.useMemo(()=>b.findIndex(mt=>mt.toastId===m.id)||0,[b,m.id]),yn=ve.useMemo(()=>{var mt;return(mt=m.closeButton)!=null?mt:L},[m.closeButton,L]),Pn=ve.useMemo(()=>m.duration||M||gL,[m.duration,M]),Ut=ve.useRef(0),Qt=ve.useRef(0),yt=ve.useRef(0),Cr=ve.useRef(null),[_n,pi]=G.split("-"),Un=ve.useMemo(()=>b.reduce((mt,Ht,vr)=>vr>=sn?mt:mt+Ht.height,0),[b,sn]),Gn=_oe(),gi=m.invert||f,wn=st==="loading";Qt.current=ve.useMemo(()=>sn*Y+Un,[sn,Un]),ve.useEffect(()=>{ht.current=Pn},[Pn]),ve.useEffect(()=>{H(!0)},[]),ve.useEffect(()=>{const mt=Ye.current;if(mt){const Ht=mt.getBoundingClientRect().height;return xe(Ht),v(vr=>[{toastId:m.id,height:Ht,position:m.position},...vr]),()=>v(vr=>vr.filter(Dn=>Dn.toastId!==m.id))}},[v,m.id]),ve.useLayoutEffect(()=>{if(!B)return;const mt=Ye.current,Ht=mt.style.height;mt.style.height="auto";const vr=mt.getBoundingClientRect().height;mt.style.height=Ht,xe(vr),v(Dn=>Dn.find(Yn=>Yn.toastId===m.id)?Dn.map(Yn=>Yn.toastId===m.id?{...Yn,height:vr}:Yn):[{toastId:m.id,height:vr,position:m.position},...Dn])},[B,m.title,m.description,v,m.id,m.jsx,m.action,m.cancel]);const vs=ve.useCallback(()=>{ce(!0),ze(Qt.current),v(mt=>mt.filter(Ht=>Ht.toastId!==m.id)),setTimeout(()=>{A(m)},Moe)},[m,A,v,Qt]);ve.useEffect(()=>{if(m.promise&&st==="loading"||m.duration===1/0||m.type==="loading")return;let mt;return S||x||Gn?(()=>{if(yt.current<Ut.current){const Dn=new Date().getTime()-Ut.current;ht.current=ht.current-Dn}yt.current=new Date().getTime()})():(()=>{ht.current!==1/0&&(Ut.current=new Date().getTime(),mt=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),vs()},ht.current))})(),()=>clearTimeout(mt)},[S,x,m,st,Gn,vs]),ve.useEffect(()=>{m.delete&&(vs(),m.onDismiss==null||m.onDismiss.call(m,m))},[vs,m.delete]);function dr(){var mt;if(re!=null&&re.loading){var Ht;return ve.createElement("div",{className:oc(X==null?void 0:X.loader,m==null||(Ht=m.classNames)==null?void 0:Ht.loader,"sonner-loader"),"data-visible":st==="loading"},re.loading)}return ve.createElement(voe,{className:oc(X==null?void 0:X.loader,m==null||(mt=m.classNames)==null?void 0:mt.loader),visible:st==="loading"})}const ys=m.icon||(re==null?void 0:re[st])||goe(st);var Ps,hr;return ve.createElement("li",{tabIndex:0,ref:Ye,className:oc(U,Vt,X==null?void 0:X.toast,m==null||(n=m.classNames)==null?void 0:n.toast,X==null?void 0:X.default,X==null?void 0:X[st],m==null||(r=m.classNames)==null?void 0:r[st]),"data-sonner-toast":"","data-rich-colors":(Ps=m.richColors)!=null?Ps:P,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":B,"data-promise":!!m.promise,"data-swiped":ue,"data-removed":ee,"data-visible":ft,"data-y-position":_n,"data-x-position":pi,"data-index":N,"data-front":dt,"data-swiping":he,"data-dismissible":Ct,"data-type":st,"data-invert":gi,"data-swipe-out":J,"data-swipe-direction":Q,"data-expanded":!!(S||Z&&B),"data-testid":m.testId,style:{"--index":N,"--toasts-before":N,"--z-index":j.length-N,"--offset":`${ee?je:Qt.current}px`,"--initial-height":Z?"auto":`${Te}px`,...O,...m.style},onDragEnd:()=>{W(!1),le(null),Cr.current=null},onPointerDown:mt=>{mt.button!==2&&(wn||!Ct||(gt.current=new Date,ze(Qt.current),mt.target.setPointerCapture(mt.pointerId),mt.target.tagName!=="BUTTON"&&(W(!0),Cr.current={x:mt.clientX,y:mt.clientY})))},onPointerUp:()=>{var mt,Ht,vr;if(J||!Ct)return;Cr.current=null;const Dn=Number(((mt=Ye.current)==null?void 0:mt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),As=Number(((Ht=Ye.current)==null?void 0:Ht.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Yn=new Date().getTime()-((vr=gt.current)==null?void 0:vr.getTime()),Pt=te==="x"?Dn:As,bs=Math.abs(Pt)/Yn;if(Math.abs(Pt)>=Ioe||bs>.11){ze(Qt.current),m.onDismiss==null||m.onDismiss.call(m,m),T(te==="x"?Dn>0?"right":"left":As>0?"down":"up"),vs(),pe(!0);return}else{var fr,mr;(fr=Ye.current)==null||fr.style.setProperty("--swipe-amount-x","0px"),(mr=Ye.current)==null||mr.style.setProperty("--swipe-amount-y","0px")}me(!1),W(!1),le(null)},onPointerMove:mt=>{var Ht,vr,Dn;if(!Cr.current||!Ct||((Ht=window.getSelection())==null?void 0:Ht.toString().length)>0)return;const Yn=mt.clientY-Cr.current.y,Pt=mt.clientX-Cr.current.x;var bs;const fr=(bs=e.swipeDirections)!=null?bs:Foe(G);!te&&(Math.abs(Pt)>1||Math.abs(Yn)>1)&&le(Math.abs(Pt)>Math.abs(Yn)?"x":"y");let mr={x:0,y:0};const pr=Fn=>1/(1.5+Math.abs(Fn)/20);if(te==="y"){if(fr.includes("top")||fr.includes("bottom"))if(fr.includes("top")&&Yn<0||fr.includes("bottom")&&Yn>0)mr.y=Yn;else{const Fn=Yn*pr(Yn);mr.y=Math.abs(Fn)<Math.abs(Yn)?Fn:Yn}}else if(te==="x"&&(fr.includes("left")||fr.includes("right")))if(fr.includes("left")&&Pt<0||fr.includes("right")&&Pt>0)mr.x=Pt;else{const Fn=Pt*pr(Pt);mr.x=Math.abs(Fn)<Math.abs(Pt)?Fn:Pt}(Math.abs(mr.x)>0||Math.abs(mr.y)>0)&&me(!0),(vr=Ye.current)==null||vr.style.setProperty("--swipe-amount-x",`${mr.x}px`),(Dn=Ye.current)==null||Dn.style.setProperty("--swipe-amount-y",`${mr.y}px`)}},yn&&!m.jsx&&st!=="loading"?ve.createElement("button",{"aria-label":z,"data-disabled":wn,"data-close-button":!0,onClick:wn||!Ct?()=>{}:()=>{vs(),m.onDismiss==null||m.onDismiss.call(m,m)},className:oc(X==null?void 0:X.closeButton,m==null||(s=m.classNames)==null?void 0:s.closeButton)},(hr=re==null?void 0:re.close)!=null?hr:Noe):null,(st||m.icon||m.promise)&&m.icon!==null&&((re==null?void 0:re[st])!==null||m.icon)?ve.createElement("div",{"data-icon":"",className:oc(X==null?void 0:X.icon,m==null||(a=m.classNames)==null?void 0:a.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||dr():null,m.type!=="loading"?ys:null):null,ve.createElement("div",{"data-content":"",className:oc(X==null?void 0:X.content,m==null||(o=m.classNames)==null?void 0:o.content)},ve.createElement("div",{"data-title":"",className:oc(X==null?void 0:X.title,m==null||(l=m.classNames)==null?void 0:l.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?ve.createElement("div",{"data-description":"",className:oc(D,Zt,X==null?void 0:X.description,m==null||(c=m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),ve.isValidElement(m.cancel)?m.cancel:m.cancel&&mb(m.cancel)?ve.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||R,onClick:mt=>{mb(m.cancel)&&Ct&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,mt),vs())},className:oc(X==null?void 0:X.cancelButton,m==null||(u=m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,ve.isValidElement(m.action)?m.action:m.action&&mb(m.action)?ve.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||q,onClick:mt=>{mb(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,mt),!mt.defaultPrevented&&vs())},className:oc(X==null?void 0:X.actionButton,m==null||(d=m.classNames)==null?void 0:d.actionButton)},m.action.label):null)};function xL(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function $oe(e,n){const r={};return[e,n].forEach((s,a)=>{const o=a===1,l=o?"--mobile-offset":"--offset",c=o?Loe:Ooe;function u(d){["top","right","bottom","left"].forEach(f=>{r[`${l}-${f}`]=typeof d=="number"?`${d}px`:d})}typeof s=="number"||typeof s=="string"?u(s):typeof s=="object"?["top","right","bottom","left"].forEach(d=>{s[d]===void 0?r[`${l}-${d}`]=c:r[`${l}-${d}`]=typeof s[d]=="number"?`${s[d]}px`:s[d]}):u(c)}),r}const qoe=ve.forwardRef(function(n,r){const{id:s,invert:a,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:c,closeButton:u,className:d,offset:f,mobileOffset:m,theme:g="light",richColors:x,duration:v,style:y,visibleToasts:b=Toe,toastOptions:N,dir:j=xL(),gap:S=Doe,icons:A,containerAriaLabel:P="Notifications"}=n,[L,O]=ve.useState([]),R=ve.useMemo(()=>s?L.filter(B=>B.toasterId===s):L.filter(B=>!B.toasterId),[L,s]),q=ve.useMemo(()=>Array.from(new Set([o].concat(R.filter(B=>B.position).map(B=>B.position)))),[R,o]),[U,D]=ve.useState([]),[M,G]=ve.useState(!1),[Y,Z]=ve.useState(!1),[X,re]=ve.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=ve.useRef(null),te=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),le=ve.useRef(null),Q=ve.useRef(!1),T=ve.useCallback(B=>{O(H=>{var ee;return(ee=H.find(ce=>ce.id===B.id))!=null&&ee.delete||Ta.dismiss(B.id),H.filter(({id:ce})=>ce!==B.id)})},[]);return ve.useEffect(()=>Ta.subscribe(B=>{if(B.dismiss){requestAnimationFrame(()=>{O(H=>H.map(ee=>ee.id===B.id?{...ee,delete:!0}:ee))});return}setTimeout(()=>{Qq.flushSync(()=>{O(H=>{const ee=H.findIndex(ce=>ce.id===B.id);return ee!==-1?[...H.slice(0,ee),{...H[ee],...B},...H.slice(ee+1)]:[B,...H]})})})}),[L]),ve.useEffect(()=>{if(g!=="system"){re(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?re("dark"):re("light")),typeof window>"u")return;const B=window.matchMedia("(prefers-color-scheme: dark)");try{B.addEventListener("change",({matches:H})=>{re(H?"dark":"light")})}catch{B.addListener(({matches:ee})=>{try{re(ee?"dark":"light")}catch(ce){console.error(ce)}})}},[g]),ve.useEffect(()=>{L.length<=1&&G(!1)},[L]),ve.useEffect(()=>{const B=H=>{var ee;if(l.every(W=>H[W]||H.code===W)){var he;G(!0),(he=z.current)==null||he.focus()}H.code==="Escape"&&(document.activeElement===z.current||(ee=z.current)!=null&&ee.contains(document.activeElement))&&G(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[l]),ve.useEffect(()=>{if(z.current)return()=>{le.current&&(le.current.focus({preventScroll:!0}),le.current=null,Q.current=!1)}},[z.current]),ve.createElement("section",{ref:r,"aria-label":`${P} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},q.map((B,H)=>{var ee;const[ce,he]=B.split("-");return R.length?ve.createElement("ol",{key:B,dir:j==="auto"?xL():j,tabIndex:-1,ref:z,className:d,"data-sonner-toaster":!0,"data-sonner-theme":X,"data-y-position":ce,"data-x-position":he,style:{"--front-toast-height":`${((ee=U[0])==null?void 0:ee.height)||0}px`,"--width":`${Roe}px`,"--gap":`${S}px`,...y,...$oe(f,m)},onBlur:W=>{Q.current&&!W.currentTarget.contains(W.relatedTarget)&&(Q.current=!1,le.current&&(le.current.focus({preventScroll:!0}),le.current=null))},onFocus:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||Q.current||(Q.current=!0,le.current=W.relatedTarget)},onMouseEnter:()=>G(!0),onMouseMove:()=>G(!0),onMouseLeave:()=>{Y||G(!1)},onDragEnd:()=>G(!1),onPointerDown:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},R.filter(W=>!W.position&&H===0||W.position===B).map((W,J)=>{var pe,ue;return ve.createElement(Boe,{key:W.id,icons:A,index:J,toast:W,defaultRichColors:x,duration:(pe=N==null?void 0:N.duration)!=null?pe:v,className:N==null?void 0:N.className,descriptionClassName:N==null?void 0:N.descriptionClassName,invert:a,visibleToasts:b,closeButton:(ue=N==null?void 0:N.closeButton)!=null?ue:u,interacting:Y,position:B,style:N==null?void 0:N.style,unstyled:N==null?void 0:N.unstyled,classNames:N==null?void 0:N.classNames,cancelButtonStyle:N==null?void 0:N.cancelButtonStyle,actionButtonStyle:N==null?void 0:N.actionButtonStyle,closeButtonAriaLabel:N==null?void 0:N.closeButtonAriaLabel,removeToast:T,toasts:R.filter(me=>me.position==W.position),heights:U.filter(me=>me.position==W.position),setHeights:D,expandByDefault:c,gap:S,expanded:M,swipeDirections:n.swipeDirections})})):null}))});async function xr(e,n,r,s=null){try{const a=String(n),l=/^\d+$/.test(a)?Number(a):null;let c=null;try{c=await Ce.entities[e].get(a)}catch{if(l!==null)try{c=await Ce.entities[e].get(l)}catch{}}if(!c)throw new Error(`${e} with id ${n} not found`);if(s&&c.created_by&&c.created_by!==s)throw new Error(`Permission denied: ${e} belongs to another user`);const{id:u,created_date:d,updated_date:f,...m}=c,g={...m,...r,created_by:c.created_by};return await Ce.entities[e].update(c.id,g)}catch(a){throw console.error(`safeUpdate failed for ${e}:`,a),a}}async function zoe(e,n,r=null){const s=[];for(const{id:a,data:o}of n)try{const l=await xr(e,a,o,r);s.push({success:!0,id:a,data:l})}catch(l){s.push({success:!1,id:a,error:l.message})}return s}function Uoe(){try{if(typeof window>"u")return null;if((new URL(window.location.href).searchParams.get("platform")||"").toLowerCase()==="ios")return"ios";const r=(navigator.userAgent||"").toLowerCase();return r.includes("pipekeeperios")||r.includes("pipekeeper-companion")||r.includes("pipekeepercompanion")?"ios":null}catch{return null}}function mh(){return Uoe()==="ios"}function vA(){return!mh()}function Voe(){return mh()?"Upgrade to Premium via the App Store to unlock this feature.":"Upgrade to Premium to unlock this feature."}function Hoe(){return mh()?"Manage your subscription on the web at pipekeeper.app":"Upgrade to Premium to unlock this feature."}function Woe(e){var n,r;try{const s=(((r=(n=import.meta)==null?void 0:n.env)==null?void 0:r[e])||"").toString().toLowerCase();return s==="true"||s==="1"||s==="yes"}catch{return!1}}const cs=Woe("VITE_APPLE_BUILD")?!0:mh(),Qz={community:!cs,messaging:!cs,ai_tobacconist_chat:!cs,ai_pairing_matrix:!cs,ai_optimizer:!cs,ai_web_autofill:!cs,csv_import_export:!0,pdf_exports:!0,inventory_tools:!0,pipe_photos:!0,pipe_identification:!0},MN=e=>{const n=String(e||"").trim().toLowerCase();return n?n==="pro"?"pro":n==="premium"?"premium":n.includes("pro")?"pro":n.includes("prem")||["paid","plus","subscriber","subscribed"].includes(n)?"premium":"free":"free"};function Rm(e,n){var c;const r=((e==null?void 0:e.role)||"").toLowerCase();if(r==="admin"||r==="owner"||(e==null?void 0:e.is_admin)===!0)return"pro";const s=(e==null?void 0:e.entitlement_tier)??(e==null?void 0:e.entitlementTier)??(e==null?void 0:e.entitlement)??(e==null?void 0:e.tier)??((c=e==null?void 0:e.data)==null?void 0:c.entitlement_tier),a=MN(s);if(a!=="free")return a;const o=(e==null?void 0:e.subscription_tier)??(e==null?void 0:e.subscriptionTier)??(e==null?void 0:e.subscription_level)??(e==null?void 0:e.subscriptionLevel)??(e==null?void 0:e.plan)??(e==null?void 0:e.plan_level),l=MN(o);if(l!=="free")return l;if(n){const u=(n.status||"").toLowerCase(),d=n.current_period_end,f=u==="active"||u==="trialing",m=!d||new Date(d).getTime()>Date.now();if(f&&m){const g=(n==null?void 0:n.tier)??(n==null?void 0:n.subscription_tier)??(n==null?void 0:n.subscription_level)??(n==null?void 0:n.plan)??(n==null?void 0:n.plan_level),x=MN(g);if(x!=="free")return x}}return"free"}function ny(e,n){const r=Rm(e,n);return r==="premium"||r==="pro"}function ry(e,n){return ny(e,n)}function i2(e,n){return Rm(e,n)==="pro"}function eE(e,n){const r=!!(e!=null&&e.trial_active)||!!(e!=null&&e.is_trialing)||!!(e!=null&&e.trialing)||!!(e!=null&&e.trial),s=String((n==null?void 0:n.status)||"").toLowerCase()==="trialing"||!!(n!=null&&n.is_trialing);return r||s}function Xz(e,n){const r=Rm(e,n);return r==="pro"?"Pro":r==="premium"?"Premium":"Free"}function Jz(e=null){return(e==null?void 0:e.isFoundingMember)===!0}const Koe="2026-02-01T00:00:00.000Z";function tE(e=null){if(!e||(e.tier||"").toLowerCase()==="pro")return!1;const r=e.subscriptionStartedAt||e.started_at;if(!r)return!1;try{const s=new Date(Koe);return new Date(r)<s}catch{return!1}}function Goe(e){return e&&e.subscription_provider||null}function Yoe(e){return e&&e.provider||null}const vL=e=>String(e||"").trim().toLowerCase();function Kr(){const{data:e,isLoading:n,error:r,refetch:s}=Dt({queryKey:["current-user"],queryFn:async()=>{var A,P;try{const L=await Ce.auth.me();if(!(L!=null&&L.email))return null;const O=vL(L.email),R=L.id||L.auth_user_id;return{...L,id:R,email:O}}catch(L){throw(P=(A=import.meta)==null?void 0:A.env)!=null&&P.DEV&&console.warn("[useCurrentUser] Error:",L),L}},staleTime:5e3,retry:2}),a=(e==null?void 0:e.id)||(e==null?void 0:e.auth_user_id),o=e!=null&&e.email?vL(e.email):null,{data:l,isLoading:c,refetch:u}=Dt({queryKey:["subscription",a,o],queryFn:async()=>{var A,P;if(!a&&!o)return null;try{let L=[];if(a&&(L=await Ce.entities.Subscription.filter({user_id:a})),L.length===0&&o&&(L=await Ce.entities.Subscription.filter({user_email:o})),!L||L.length===0)return null;const O=L.filter(R=>{const q=R.status||"";return["active","trialing","trial","past_due","incomplete"].includes(q)});return O.length===0?null:(O.sort((R,q)=>{const U=(R.tier||"").toLowerCase()==="pro"?1:0,D=(q.tier||"").toLowerCase()==="pro"?1:0;if(U!==D)return D-U;const M=R.status==="active"?1:0,G=q.status==="active"?1:0;if(M!==G)return G-M;const Y=R.status==="trialing"||R.status==="trial"?1:0,Z=q.status==="trialing"||q.status==="trial"?1:0;if(Y!==Z)return Z-Y;const X=new Date(R.current_period_start||R.created_date||0).getTime();return new Date(q.current_period_start||q.created_date||0).getTime()-X}),O[0])}catch(L){return(P=(A=import.meta)==null?void 0:A.env)!=null&&P.DEV&&console.warn("[useCurrentUser] Subscription query error:",L),null}},enabled:!!(a||o),staleTime:3e4});C.useEffect(()=>{if(n||!(e!=null&&e.email))return;const A=`pk_user_ensured_${e.email}`;if(sessionStorage.getItem(A))return;let P=!1;return(async()=>{var L,O;try{await Ce.functions.invoke("ensureUserRecord",{}),P||(sessionStorage.setItem(A,"true"),await s())}catch(R){P||sessionStorage.setItem(A,"true"),(O=(L=import.meta)==null?void 0:L.env)!=null&&O.DEV&&console.warn("[useCurrentUser] ensureUserRecord failed (non-fatal):",(R==null?void 0:R.message)||R)}})(),()=>{P=!0}},[n,e==null?void 0:e.email,s]),C.useEffect(()=>{if(n||!(e!=null&&e.email))return;const A=`pk_subscription_sync_${e.email}`;if(sessionStorage.getItem(A))return;let P=!1;return(async()=>{var L,O;try{await Ce.functions.invoke("syncSubscriptionForMe",{})}catch(R){(O=(L=import.meta)==null?void 0:L.env)!=null&&O.DEV&&console.warn("[useCurrentUser] syncSubscriptionForMe failed (non-fatal):",(R==null?void 0:R.message)||R)}finally{P||(sessionStorage.setItem(A,"true"),await Promise.all([s(),u()]))}})(),()=>{P=!0}},[n,e==null?void 0:e.email,s,u]);const d=Goe(e)||Yoe(l),f=Rm(e,l),m=ny(e,l),g=ry(e,l),x=i2(e,l),v=eE(e,l),y=Xz(e,l),b=(e==null?void 0:e.role)==="admin",N=Jz(e);return{user:e,subscription:l,provider:d,tier:f,isLoading:n||c,error:r,hasPremium:g,hasPaid:m,hasPro:x,isTrial:v,planLabel:y,isAdmin:b,isFoundingMember:N,refetch:async()=>{await Promise.all([s(),u()])}}}const Qoe="2026-02-01T00:00:00.000Z";function Xoe(e){return e?new Date(e).getTime()<new Date(Qoe).getTime():!1}function yL(e){const n=e.isProSubscriber?"pro":e.isPaidSubscriber||e.isOnTrial?"premium":"free",r=n==="premium"&&Xoe(e.subscriptionStartedAt),s=n==="free"?{pipes:5,tobaccos:10,photosPerItem:3,smokingLogs:50}:{pipes:1/0,tobaccos:1/0,photosPerItem:1/0,smokingLogs:1/0},a=l=>n==="pro"||n==="premium"&&r?!0:n==="premium"?["UNLIMITED_COLLECTION","PAIRING_BASIC","MATCHING_ENGINE","MESSAGING"].includes(l):!1,o=l=>a(l);return{tier:n,isPremiumLegacy:r,isFreeGrandfathered:!!e.isFreeGrandfathered,limits:s,canUse:o}}function n0(){const{user:e,subscription:n,isLoading:r}=Kr();return C.useMemo(()=>{if(r||!e)return yL({isPaidSubscriber:!1,isProSubscriber:!1,subscriptionStartedAt:null,isOnTrial:!1});Rm(e,n);const s=ny(e,n),a=i2(e,n),o=eE(e,n);return yL({isPaidSubscriber:s,isProSubscriber:a,subscriptionStartedAt:(n==null?void 0:n.subscriptionStartedAt)||(n==null?void 0:n.started_at)||(n==null?void 0:n.current_period_start)||(e==null?void 0:e.created_date)||null,isFreeGrandfathered:(e==null?void 0:e.isFreeGrandfathered)||!1,isOnTrial:o})},[e,n,r])}function xt(e){const[n,r]=e.split("?");return r?`/${n}?${r}`:`/${n}`}function $t(){return{t:e=>e,i18n:{language:"en"}}}function Ac({featureName:e,description:n}){const{t:r}=$t();return i.jsxs(Ee,{className:"border-[#A35C5C]/50 bg-[#243548]/70",variant:"default",children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs(et,{className:"flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-xl bg-[#A35C5C]/20 border border-[#A35C5C]/40",children:i.jsx(Ff,{className:"w-5 h-5 text-[#E0D8C8]"})}),i.jsx("span",{className:"text-[#E0D8C8]",children:r("subscription.premiumFeature")})]})}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-[#E0D8C8] mb-2 text-lg",children:e}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/80 leading-relaxed",children:n})]}),vA()?i.jsxs(i.Fragment,{children:[i.jsx("a",{href:xt("Subscription"),children:i.jsxs(ye,{className:"w-full bg-gradient-to-r from-[#A35C5C] to-[#8B4A4A] hover:from-[#8B4A4A] hover:to-[#7A3E3E] text-[#E0D8C8]",children:[i.jsx(yh,{className:"w-4 h-4 mr-2"}),r("subscription.continueWithPremium")]})}),i.jsx("p",{className:"text-xs text-center text-[#E0D8C8]/70 leading-relaxed",children:r("subscription.premiumBenefits")}),i.jsxs("p",{className:"text-xs text-center text-[#E0D8C8]/50",children:[r("subscription.cancelAnytime")," • ",r("subscription.dataNotAffected")]})]}):i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:Voe()})]})]})}function Zz({feature:e,children:n,featureName:r,description:s,requiredTier:a="premium"}){const o=n0();return e&&!o.canUse(e)?i.jsx(Ac,{featureName:r||e,description:s||`This feature requires ${a==="pro"?"Pro":"Premium"} tier.`}):!e&&a&&!(a==="premium"?o.tier!=="free":o.tier==="pro"||o.isPremiumLegacy)?i.jsx(Ac,{featureName:r||`${a} Feature`,description:s||`This feature requires ${a==="pro"?"Pro":"Premium"} tier.`}):i.jsx(i.Fragment,{children:n})}function Qx(e,[n,r]){return Math.min(r,Math.max(n,e))}function Ft(e,n,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return n==null?void 0:n(a)}}function Joe(e,n){const r=C.createContext(n),s=o=>{const{children:l,...c}=o,u=C.useMemo(()=>c,Object.values(c));return i.jsx(r.Provider,{value:u,children:l})};s.displayName=e+"Provider";function a(o){const l=C.useContext(r);if(l)return l;if(n!==void 0)return n;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,a]}function Vi(e,n=[]){let r=[];function s(o,l){const c=C.createContext(l),u=r.length;r=[...r,l];const d=m=>{var N;const{scope:g,children:x,...v}=m,y=((N=g==null?void 0:g[e])==null?void 0:N[u])||c,b=C.useMemo(()=>v,Object.values(v));return i.jsx(y.Provider,{value:b,children:x})};d.displayName=o+"Provider";function f(m,g){var y;const x=((y=g==null?void 0:g[e])==null?void 0:y[u])||c,v=C.useContext(x);if(v)return v;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[d,f]}const a=()=>{const o=r.map(l=>C.createContext(l));return function(c){const u=(c==null?void 0:c[e])||o;return C.useMemo(()=>({[`__scope${e}`]:{...c,[e]:u}}),[c,u])}};return a.scopeName=e,[s,Zoe(a,...n)]}function Zoe(...e){const n=e[0];if(e.length===1)return n;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const l=s.reduce((c,{useScope:u,scopeName:d})=>{const m=u(o)[`__scope${d}`];return{...c,...m}},{});return C.useMemo(()=>({[`__scope${n.scopeName}`]:l}),[l])}};return r.scopeName=n.scopeName,r}function a2(e){const n=e+"CollectionProvider",[r,s]=Vi(n),[a,o]=r(n,{collectionRef:{current:null},itemMap:new Map}),l=y=>{const{scope:b,children:N}=y,j=ve.useRef(null),S=ve.useRef(new Map).current;return i.jsx(a,{scope:b,itemMap:S,collectionRef:j,children:N})};l.displayName=n;const c=e+"CollectionSlot",u=xm(c),d=ve.forwardRef((y,b)=>{const{scope:N,children:j}=y,S=o(c,N),A=un(b,S.collectionRef);return i.jsx(u,{ref:A,children:j})});d.displayName=c;const f=e+"CollectionItemSlot",m="data-radix-collection-item",g=xm(f),x=ve.forwardRef((y,b)=>{const{scope:N,children:j,...S}=y,A=ve.useRef(null),P=un(b,A),L=o(f,N);return ve.useEffect(()=>(L.itemMap.set(A,{ref:A,...S}),()=>void L.itemMap.delete(A))),i.jsx(g,{[m]:"",ref:P,children:j})});x.displayName=f;function v(y){const b=o(e+"CollectionConsumer",y);return ve.useCallback(()=>{const j=b.collectionRef.current;if(!j)return[];const S=Array.from(j.querySelectorAll(`[${m}]`));return Array.from(b.itemMap.values()).sort((L,O)=>S.indexOf(L.ref.current)-S.indexOf(O.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:l,Slot:d,ItemSlot:x},v,s]}var ele=C.createContext(void 0);function r0(e){const n=C.useContext(ele);return e||n||"ltr"}var tle=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],At=tle.reduce((e,n)=>{const r=xm(`Primitive.${n}`),s=C.forwardRef((a,o)=>{const{asChild:l,...c}=a,u=l?r:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...c,ref:o})});return s.displayName=`Primitive.${n}`,{...e,[n]:s}},{});function nle(e,n){e&&Qv.flushSync(()=>e.dispatchEvent(n))}function Fi(e){const n=C.useRef(e);return C.useEffect(()=>{n.current=e}),C.useMemo(()=>(...r)=>{var s;return(s=n.current)==null?void 0:s.call(n,...r)},[])}function rle(e,n=globalThis==null?void 0:globalThis.document){const r=Fi(e);C.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return n.addEventListener("keydown",s,{capture:!0}),()=>n.removeEventListener("keydown",s,{capture:!0})},[r,n])}var sle="DismissableLayer",yA="dismissableLayer.update",ile="dismissableLayer.pointerDownOutside",ale="dismissableLayer.focusOutside",bL,e9=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),o2=C.forwardRef((e,n)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...u}=e,d=C.useContext(e9),[f,m]=C.useState(null),g=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=C.useState({}),v=un(n,O=>m(O)),y=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),N=y.indexOf(b),j=f?y.indexOf(f):-1,S=d.layersWithOutsidePointerEventsDisabled.size>0,A=j>=N,P=cle(O=>{const R=O.target,q=[...d.branches].some(U=>U.contains(R));!A||q||(a==null||a(O),l==null||l(O),O.defaultPrevented||c==null||c())},g),L=ule(O=>{const R=O.target;[...d.branches].some(U=>U.contains(R))||(o==null||o(O),l==null||l(O),O.defaultPrevented||c==null||c())},g);return rle(O=>{j===d.layers.size-1&&(s==null||s(O),!O.defaultPrevented&&c&&(O.preventDefault(),c()))},g),C.useEffect(()=>{if(f)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(bL=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),wL(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=bL)}},[f,g,r,d]),C.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),wL())},[f,d]),C.useEffect(()=>{const O=()=>x({});return document.addEventListener(yA,O),()=>document.removeEventListener(yA,O)},[]),i.jsx(At.div,{...u,ref:v,style:{pointerEvents:S?A?"auto":"none":void 0,...e.style},onFocusCapture:Ft(e.onFocusCapture,L.onFocusCapture),onBlurCapture:Ft(e.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Ft(e.onPointerDownCapture,P.onPointerDownCapture)})});o2.displayName=sle;var ole="DismissableLayerBranch",lle=C.forwardRef((e,n)=>{const r=C.useContext(e9),s=C.useRef(null),a=un(n,s);return C.useEffect(()=>{const o=s.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),i.jsx(At.div,{...e,ref:a})});lle.displayName=ole;function cle(e,n=globalThis==null?void 0:globalThis.document){const r=Fi(e),s=C.useRef(!1),a=C.useRef(()=>{});return C.useEffect(()=>{const o=c=>{if(c.target&&!s.current){let u=function(){t9(ile,r,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(n.removeEventListener("click",a.current),a.current=u,n.addEventListener("click",a.current,{once:!0})):u()}else n.removeEventListener("click",a.current);s.current=!1},l=window.setTimeout(()=>{n.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),n.removeEventListener("pointerdown",o),n.removeEventListener("click",a.current)}},[n,r]),{onPointerDownCapture:()=>s.current=!0}}function ule(e,n=globalThis==null?void 0:globalThis.document){const r=Fi(e),s=C.useRef(!1);return C.useEffect(()=>{const a=o=>{o.target&&!s.current&&t9(ale,r,{originalEvent:o},{discrete:!1})};return n.addEventListener("focusin",a),()=>n.removeEventListener("focusin",a)},[n,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function wL(){const e=new CustomEvent(yA);document.dispatchEvent(e)}function t9(e,n,r,{discrete:s}){const a=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});n&&a.addEventListener(e,n,{once:!0}),s?nle(a,o):a.dispatchEvent(o)}var FN=0;function nE(){C.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??jL()),document.body.insertAdjacentElement("beforeend",e[1]??jL()),FN++,()=>{FN===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),FN--}},[])}function jL(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var BN="focusScope.autoFocusOnMount",$N="focusScope.autoFocusOnUnmount",NL={bubbles:!1,cancelable:!0},dle="FocusScope",l2=C.forwardRef((e,n)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...l}=e,[c,u]=C.useState(null),d=Fi(a),f=Fi(o),m=C.useRef(null),g=un(n,y=>u(y)),x=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(s){let y=function(S){if(x.paused||!c)return;const A=S.target;c.contains(A)?m.current=A:Kd(m.current,{select:!0})},b=function(S){if(x.paused||!c)return;const A=S.relatedTarget;A!==null&&(c.contains(A)||Kd(m.current,{select:!0}))},N=function(S){if(document.activeElement===document.body)for(const P of S)P.removedNodes.length>0&&Kd(c)};document.addEventListener("focusin",y),document.addEventListener("focusout",b);const j=new MutationObserver(N);return c&&j.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",b),j.disconnect()}}},[s,c,x.paused]),C.useEffect(()=>{if(c){SL.add(x);const y=document.activeElement;if(!c.contains(y)){const N=new CustomEvent(BN,NL);c.addEventListener(BN,d),c.dispatchEvent(N),N.defaultPrevented||(hle(xle(n9(c)),{select:!0}),document.activeElement===y&&Kd(c))}return()=>{c.removeEventListener(BN,d),setTimeout(()=>{const N=new CustomEvent($N,NL);c.addEventListener($N,f),c.dispatchEvent(N),N.defaultPrevented||Kd(y??document.body,{select:!0}),c.removeEventListener($N,f),SL.remove(x)},0)}}},[c,d,f,x]);const v=C.useCallback(y=>{if(!r&&!s||x.paused)return;const b=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,N=document.activeElement;if(b&&N){const j=y.currentTarget,[S,A]=fle(j);S&&A?!y.shiftKey&&N===A?(y.preventDefault(),r&&Kd(S,{select:!0})):y.shiftKey&&N===S&&(y.preventDefault(),r&&Kd(A,{select:!0})):N===j&&y.preventDefault()}},[r,s,x.paused]);return i.jsx(At.div,{tabIndex:-1,...l,ref:g,onKeyDown:v})});l2.displayName=dle;function hle(e,{select:n=!1}={}){const r=document.activeElement;for(const s of e)if(Kd(s,{select:n}),document.activeElement!==r)return}function fle(e){const n=n9(e),r=_L(n,e),s=_L(n.reverse(),e);return[r,s]}function n9(e){const n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)n.push(r.currentNode);return n}function _L(e,n){for(const r of e)if(!mle(r,{upTo:n}))return r}function mle(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ple(e){return e instanceof HTMLInputElement&&"select"in e}function Kd(e,{select:n=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&ple(e)&&n&&e.select()}}var SL=gle();function gle(){let e=[];return{add(n){const r=e[0];n!==r&&(r==null||r.pause()),e=CL(e,n),e.unshift(n)},remove(n){var r;e=CL(e,n),(r=e[0])==null||r.resume()}}}function CL(e,n){const r=[...e],s=r.indexOf(n);return s!==-1&&r.splice(s,1),r}function xle(e){return e.filter(n=>n.tagName!=="A")}var xs=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},vle=E4[" useId ".trim().toString()]||(()=>{}),yle=0;function mi(e){const[n,r]=C.useState(vle());return xs(()=>{r(s=>s??String(yle++))},[e]),n?`radix-${n}`:""}const ble=["top","right","bottom","left"],jh=Math.min,no=Math.max,S1=Math.round,pb=Math.floor,wc=e=>({x:e,y:e}),wle={left:"right",right:"left",bottom:"top",top:"bottom"},jle={start:"end",end:"start"};function bA(e,n,r){return no(e,jh(n,r))}function qu(e,n){return typeof e=="function"?e(n):e}function zu(e){return e.split("-")[0]}function s0(e){return e.split("-")[1]}function rE(e){return e==="x"?"y":"x"}function sE(e){return e==="y"?"height":"width"}const Nle=new Set(["top","bottom"]);function mc(e){return Nle.has(zu(e))?"y":"x"}function iE(e){return rE(mc(e))}function _le(e,n,r){r===void 0&&(r=!1);const s=s0(e),a=iE(e),o=sE(a);let l=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return n.reference[o]>n.floating[o]&&(l=C1(l)),[l,C1(l)]}function Sle(e){const n=C1(e);return[wA(e),n,wA(n)]}function wA(e){return e.replace(/start|end/g,n=>jle[n])}const PL=["left","right"],AL=["right","left"],Cle=["top","bottom"],Ple=["bottom","top"];function Ale(e,n,r){switch(e){case"top":case"bottom":return r?n?AL:PL:n?PL:AL;case"left":case"right":return n?Cle:Ple;default:return[]}}function kle(e,n,r,s){const a=s0(e);let o=Ale(zu(e),r==="start",s);return a&&(o=o.map(l=>l+"-"+a),n&&(o=o.concat(o.map(wA)))),o}function C1(e){return e.replace(/left|right|bottom|top/g,n=>wle[n])}function Ele(e){return{top:0,right:0,bottom:0,left:0,...e}}function r9(e){return typeof e!="number"?Ele(e):{top:e,right:e,bottom:e,left:e}}function P1(e){const{x:n,y:r,width:s,height:a}=e;return{width:s,height:a,top:r,left:n,right:n+s,bottom:r+a,x:n,y:r}}function kL(e,n,r){let{reference:s,floating:a}=e;const o=mc(n),l=iE(n),c=sE(l),u=zu(n),d=o==="y",f=s.x+s.width/2-a.width/2,m=s.y+s.height/2-a.height/2,g=s[c]/2-a[c]/2;let x;switch(u){case"top":x={x:f,y:s.y-a.height};break;case"bottom":x={x:f,y:s.y+s.height};break;case"right":x={x:s.x+s.width,y:m};break;case"left":x={x:s.x-a.width,y:m};break;default:x={x:s.x,y:s.y}}switch(s0(n)){case"start":x[l]-=g*(r&&d?-1:1);break;case"end":x[l]+=g*(r&&d?-1:1);break}return x}const Tle=async(e,n,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:o=[],platform:l}=r,c=o.filter(Boolean),u=await(l.isRTL==null?void 0:l.isRTL(n));let d=await l.getElementRects({reference:e,floating:n,strategy:a}),{x:f,y:m}=kL(d,s,u),g=s,x={},v=0;for(let y=0;y<c.length;y++){const{name:b,fn:N}=c[y],{x:j,y:S,data:A,reset:P}=await N({x:f,y:m,initialPlacement:s,placement:g,strategy:a,middlewareData:x,rects:d,platform:l,elements:{reference:e,floating:n}});f=j??f,m=S??m,x={...x,[b]:{...x[b],...A}},P&&v<=50&&(v++,typeof P=="object"&&(P.placement&&(g=P.placement),P.rects&&(d=P.rects===!0?await l.getElementRects({reference:e,floating:n,strategy:a}):P.rects),{x:f,y:m}=kL(d,g,u)),y=-1)}return{x:f,y:m,placement:g,strategy:a,middlewareData:x}};async function Xx(e,n){var r;n===void 0&&(n={});const{x:s,y:a,platform:o,rects:l,elements:c,strategy:u}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:g=!1,padding:x=0}=qu(n,e),v=r9(x),b=c[g?m==="floating"?"reference":"floating":m],N=P1(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(b)))==null||r?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:d,rootBoundary:f,strategy:u})),j=m==="floating"?{x:s,y:a,width:l.floating.width,height:l.floating.height}:l.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),A=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},P=P1(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:j,offsetParent:S,strategy:u}):j);return{top:(N.top-P.top+v.top)/A.y,bottom:(P.bottom-N.bottom+v.bottom)/A.y,left:(N.left-P.left+v.left)/A.x,right:(P.right-N.right+v.right)/A.x}}const Ole=e=>({name:"arrow",options:e,async fn(n){const{x:r,y:s,placement:a,rects:o,platform:l,elements:c,middlewareData:u}=n,{element:d,padding:f=0}=qu(e,n)||{};if(d==null)return{};const m=r9(f),g={x:r,y:s},x=iE(a),v=sE(x),y=await l.getDimensions(d),b=x==="y",N=b?"top":"left",j=b?"bottom":"right",S=b?"clientHeight":"clientWidth",A=o.reference[v]+o.reference[x]-g[x]-o.floating[v],P=g[x]-o.reference[x],L=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let O=L?L[S]:0;(!O||!await(l.isElement==null?void 0:l.isElement(L)))&&(O=c.floating[S]||o.floating[v]);const R=A/2-P/2,q=O/2-y[v]/2-1,U=jh(m[N],q),D=jh(m[j],q),M=U,G=O-y[v]-D,Y=O/2-y[v]/2+R,Z=bA(M,Y,G),X=!u.arrow&&s0(a)!=null&&Y!==Z&&o.reference[v]/2-(Y<M?U:D)-y[v]/2<0,re=X?Y<M?Y-M:Y-G:0;return{[x]:g[x]+re,data:{[x]:Z,centerOffset:Y-Z-re,...X&&{alignmentOffset:re}},reset:X}}}),Lle=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var r,s;const{placement:a,middlewareData:o,rects:l,initialPlacement:c,platform:u,elements:d}=n,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...b}=qu(e,n);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const N=zu(a),j=mc(c),S=zu(c)===c,A=await(u.isRTL==null?void 0:u.isRTL(d.floating)),P=g||(S||!y?[C1(c)]:Sle(c)),L=v!=="none";!g&&L&&P.push(...kle(c,y,v,A));const O=[c,...P],R=await Xx(n,b),q=[];let U=((s=o.flip)==null?void 0:s.overflows)||[];if(f&&q.push(R[N]),m){const Y=_le(a,l,A);q.push(R[Y[0]],R[Y[1]])}if(U=[...U,{placement:a,overflows:q}],!q.every(Y=>Y<=0)){var D,M;const Y=(((D=o.flip)==null?void 0:D.index)||0)+1,Z=O[Y];if(Z&&(!(m==="alignment"?j!==mc(Z):!1)||U.every(z=>mc(z.placement)===j?z.overflows[0]>0:!0)))return{data:{index:Y,overflows:U},reset:{placement:Z}};let X=(M=U.filter(re=>re.overflows[0]<=0).sort((re,z)=>re.overflows[1]-z.overflows[1])[0])==null?void 0:M.placement;if(!X)switch(x){case"bestFit":{var G;const re=(G=U.filter(z=>{if(L){const te=mc(z.placement);return te===j||te==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(te=>te>0).reduce((te,le)=>te+le,0)]).sort((z,te)=>z[1]-te[1])[0])==null?void 0:G[0];re&&(X=re);break}case"initialPlacement":X=c;break}if(a!==X)return{reset:{placement:X}}}return{}}}};function EL(e,n){return{top:e.top-n.height,right:e.right-n.width,bottom:e.bottom-n.height,left:e.left-n.width}}function TL(e){return ble.some(n=>e[n]>=0)}const Rle=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(n){const{rects:r}=n,{strategy:s="referenceHidden",...a}=qu(e,n);switch(s){case"referenceHidden":{const o=await Xx(n,{...a,elementContext:"reference"}),l=EL(o,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:TL(l)}}}case"escaped":{const o=await Xx(n,{...a,altBoundary:!0}),l=EL(o,r.floating);return{data:{escapedOffsets:l,escaped:TL(l)}}}default:return{}}}}},s9=new Set(["left","top"]);async function Dle(e,n){const{placement:r,platform:s,elements:a}=e,o=await(s.isRTL==null?void 0:s.isRTL(a.floating)),l=zu(r),c=s0(r),u=mc(r)==="y",d=s9.has(l)?-1:1,f=o&&u?-1:1,m=qu(n,e);let{mainAxis:g,crossAxis:x,alignmentAxis:v}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof v=="number"&&(x=c==="end"?v*-1:v),u?{x:x*f,y:g*d}:{x:g*d,y:x*f}}const Ile=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var r,s;const{x:a,y:o,placement:l,middlewareData:c}=n,u=await Dle(n,e);return l===((r=c.offset)==null?void 0:r.placement)&&(s=c.arrow)!=null&&s.alignmentOffset?{}:{x:a+u.x,y:o+u.y,data:{...u,placement:l}}}}},Mle=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:r,y:s,placement:a}=n,{mainAxis:o=!0,crossAxis:l=!1,limiter:c={fn:b=>{let{x:N,y:j}=b;return{x:N,y:j}}},...u}=qu(e,n),d={x:r,y:s},f=await Xx(n,u),m=mc(zu(a)),g=rE(m);let x=d[g],v=d[m];if(o){const b=g==="y"?"top":"left",N=g==="y"?"bottom":"right",j=x+f[b],S=x-f[N];x=bA(j,x,S)}if(l){const b=m==="y"?"top":"left",N=m==="y"?"bottom":"right",j=v+f[b],S=v-f[N];v=bA(j,v,S)}const y=c.fn({...n,[g]:x,[m]:v});return{...y,data:{x:y.x-r,y:y.y-s,enabled:{[g]:o,[m]:l}}}}}},Fle=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:r,y:s,placement:a,rects:o,middlewareData:l}=n,{offset:c=0,mainAxis:u=!0,crossAxis:d=!0}=qu(e,n),f={x:r,y:s},m=mc(a),g=rE(m);let x=f[g],v=f[m];const y=qu(c,n),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(u){const S=g==="y"?"height":"width",A=o.reference[g]-o.floating[S]+b.mainAxis,P=o.reference[g]+o.reference[S]-b.mainAxis;x<A?x=A:x>P&&(x=P)}if(d){var N,j;const S=g==="y"?"width":"height",A=s9.has(zu(a)),P=o.reference[m]-o.floating[S]+(A&&((N=l.offset)==null?void 0:N[m])||0)+(A?0:b.crossAxis),L=o.reference[m]+o.reference[S]+(A?0:((j=l.offset)==null?void 0:j[m])||0)-(A?b.crossAxis:0);v<P?v=P:v>L&&(v=L)}return{[g]:x,[m]:v}}}},Ble=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(n){var r,s;const{placement:a,rects:o,platform:l,elements:c}=n,{apply:u=()=>{},...d}=qu(e,n),f=await Xx(n,d),m=zu(a),g=s0(a),x=mc(a)==="y",{width:v,height:y}=o.floating;let b,N;m==="top"||m==="bottom"?(b=m,N=g===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(N=m,b=g==="end"?"top":"bottom");const j=y-f.top-f.bottom,S=v-f.left-f.right,A=jh(y-f[b],j),P=jh(v-f[N],S),L=!n.middlewareData.shift;let O=A,R=P;if((r=n.middlewareData.shift)!=null&&r.enabled.x&&(R=S),(s=n.middlewareData.shift)!=null&&s.enabled.y&&(O=j),L&&!g){const U=no(f.left,0),D=no(f.right,0),M=no(f.top,0),G=no(f.bottom,0);x?R=v-2*(U!==0||D!==0?U+D:no(f.left,f.right)):O=y-2*(M!==0||G!==0?M+G:no(f.top,f.bottom))}await u({...n,availableWidth:R,availableHeight:O});const q=await l.getDimensions(c.floating);return v!==q.width||y!==q.height?{reset:{rects:!0}}:{}}}};function c2(){return typeof window<"u"}function i0(e){return i9(e)?(e.nodeName||"").toLowerCase():"#document"}function ao(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function Rc(e){var n;return(n=(i9(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function i9(e){return c2()?e instanceof Node||e instanceof ao(e).Node:!1}function Al(e){return c2()?e instanceof Element||e instanceof ao(e).Element:!1}function kc(e){return c2()?e instanceof HTMLElement||e instanceof ao(e).HTMLElement:!1}function OL(e){return!c2()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ao(e).ShadowRoot}const $le=new Set(["inline","contents"]);function sy(e){const{overflow:n,overflowX:r,overflowY:s,display:a}=kl(e);return/auto|scroll|overlay|hidden|clip/.test(n+s+r)&&!$le.has(a)}const qle=new Set(["table","td","th"]);function zle(e){return qle.has(i0(e))}const Ule=[":popover-open",":modal"];function u2(e){return Ule.some(n=>{try{return e.matches(n)}catch{return!1}})}const Vle=["transform","translate","scale","rotate","perspective"],Hle=["transform","translate","scale","rotate","perspective","filter"],Wle=["paint","layout","strict","content"];function aE(e){const n=oE(),r=Al(e)?kl(e):e;return Vle.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!n&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!n&&(r.filter?r.filter!=="none":!1)||Hle.some(s=>(r.willChange||"").includes(s))||Wle.some(s=>(r.contain||"").includes(s))}function Kle(e){let n=Nh(e);for(;kc(n)&&!bg(n);){if(aE(n))return n;if(u2(n))return null;n=Nh(n)}return null}function oE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Gle=new Set(["html","body","#document"]);function bg(e){return Gle.has(i0(e))}function kl(e){return ao(e).getComputedStyle(e)}function d2(e){return Al(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Nh(e){if(i0(e)==="html")return e;const n=e.assignedSlot||e.parentNode||OL(e)&&e.host||Rc(e);return OL(n)?n.host:n}function a9(e){const n=Nh(e);return bg(n)?e.ownerDocument?e.ownerDocument.body:e.body:kc(n)&&sy(n)?n:a9(n)}function Jx(e,n,r){var s;n===void 0&&(n=[]),r===void 0&&(r=!0);const a=a9(e),o=a===((s=e.ownerDocument)==null?void 0:s.body),l=ao(a);if(o){const c=jA(l);return n.concat(l,l.visualViewport||[],sy(a)?a:[],c&&r?Jx(c):[])}return n.concat(a,Jx(a,[],r))}function jA(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function o9(e){const n=kl(e);let r=parseFloat(n.width)||0,s=parseFloat(n.height)||0;const a=kc(e),o=a?e.offsetWidth:r,l=a?e.offsetHeight:s,c=S1(r)!==o||S1(s)!==l;return c&&(r=o,s=l),{width:r,height:s,$:c}}function lE(e){return Al(e)?e:e.contextElement}function Gp(e){const n=lE(e);if(!kc(n))return wc(1);const r=n.getBoundingClientRect(),{width:s,height:a,$:o}=o9(n);let l=(o?S1(r.width):r.width)/s,c=(o?S1(r.height):r.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const Yle=wc(0);function l9(e){const n=ao(e);return!oE()||!n.visualViewport?Yle:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function Qle(e,n,r){return n===void 0&&(n=!1),!r||n&&r!==ao(e)?!1:n}function vm(e,n,r,s){n===void 0&&(n=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),o=lE(e);let l=wc(1);n&&(s?Al(s)&&(l=Gp(s)):l=Gp(e));const c=Qle(o,r,s)?l9(o):wc(0);let u=(a.left+c.x)/l.x,d=(a.top+c.y)/l.y,f=a.width/l.x,m=a.height/l.y;if(o){const g=ao(o),x=s&&Al(s)?ao(s):s;let v=g,y=jA(v);for(;y&&s&&x!==v;){const b=Gp(y),N=y.getBoundingClientRect(),j=kl(y),S=N.left+(y.clientLeft+parseFloat(j.paddingLeft))*b.x,A=N.top+(y.clientTop+parseFloat(j.paddingTop))*b.y;u*=b.x,d*=b.y,f*=b.x,m*=b.y,u+=S,d+=A,v=ao(y),y=jA(v)}}return P1({width:f,height:m,x:u,y:d})}function h2(e,n){const r=d2(e).scrollLeft;return n?n.left+r:vm(Rc(e)).left+r}function c9(e,n){const r=e.getBoundingClientRect(),s=r.left+n.scrollLeft-h2(e,r),a=r.top+n.scrollTop;return{x:s,y:a}}function Xle(e){let{elements:n,rect:r,offsetParent:s,strategy:a}=e;const o=a==="fixed",l=Rc(s),c=n?u2(n.floating):!1;if(s===l||c&&o)return r;let u={scrollLeft:0,scrollTop:0},d=wc(1);const f=wc(0),m=kc(s);if((m||!m&&!o)&&((i0(s)!=="body"||sy(l))&&(u=d2(s)),kc(s))){const x=vm(s);d=Gp(s),f.x=x.x+s.clientLeft,f.y=x.y+s.clientTop}const g=l&&!m&&!o?c9(l,u):wc(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-u.scrollLeft*d.x+f.x+g.x,y:r.y*d.y-u.scrollTop*d.y+f.y+g.y}}function Jle(e){return Array.from(e.getClientRects())}function Zle(e){const n=Rc(e),r=d2(e),s=e.ownerDocument.body,a=no(n.scrollWidth,n.clientWidth,s.scrollWidth,s.clientWidth),o=no(n.scrollHeight,n.clientHeight,s.scrollHeight,s.clientHeight);let l=-r.scrollLeft+h2(e);const c=-r.scrollTop;return kl(s).direction==="rtl"&&(l+=no(n.clientWidth,s.clientWidth)-a),{width:a,height:o,x:l,y:c}}const LL=25;function ece(e,n){const r=ao(e),s=Rc(e),a=r.visualViewport;let o=s.clientWidth,l=s.clientHeight,c=0,u=0;if(a){o=a.width,l=a.height;const f=oE();(!f||f&&n==="fixed")&&(c=a.offsetLeft,u=a.offsetTop)}const d=h2(s);if(d<=0){const f=s.ownerDocument,m=f.body,g=getComputedStyle(m),x=f.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,v=Math.abs(s.clientWidth-m.clientWidth-x);v<=LL&&(o-=v)}else d<=LL&&(o+=d);return{width:o,height:l,x:c,y:u}}const tce=new Set(["absolute","fixed"]);function nce(e,n){const r=vm(e,!0,n==="fixed"),s=r.top+e.clientTop,a=r.left+e.clientLeft,o=kc(e)?Gp(e):wc(1),l=e.clientWidth*o.x,c=e.clientHeight*o.y,u=a*o.x,d=s*o.y;return{width:l,height:c,x:u,y:d}}function RL(e,n,r){let s;if(n==="viewport")s=ece(e,r);else if(n==="document")s=Zle(Rc(e));else if(Al(n))s=nce(n,r);else{const a=l9(e);s={x:n.x-a.x,y:n.y-a.y,width:n.width,height:n.height}}return P1(s)}function u9(e,n){const r=Nh(e);return r===n||!Al(r)||bg(r)?!1:kl(r).position==="fixed"||u9(r,n)}function rce(e,n){const r=n.get(e);if(r)return r;let s=Jx(e,[],!1).filter(c=>Al(c)&&i0(c)!=="body"),a=null;const o=kl(e).position==="fixed";let l=o?Nh(e):e;for(;Al(l)&&!bg(l);){const c=kl(l),u=aE(l);!u&&c.position==="fixed"&&(a=null),(o?!u&&!a:!u&&c.position==="static"&&!!a&&tce.has(a.position)||sy(l)&&!u&&u9(e,l))?s=s.filter(f=>f!==l):a=c,l=Nh(l)}return n.set(e,s),s}function sce(e){let{element:n,boundary:r,rootBoundary:s,strategy:a}=e;const l=[...r==="clippingAncestors"?u2(n)?[]:rce(n,this._c):[].concat(r),s],c=l[0],u=l.reduce((d,f)=>{const m=RL(n,f,a);return d.top=no(m.top,d.top),d.right=jh(m.right,d.right),d.bottom=jh(m.bottom,d.bottom),d.left=no(m.left,d.left),d},RL(n,c,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function ice(e){const{width:n,height:r}=o9(e);return{width:n,height:r}}function ace(e,n,r){const s=kc(n),a=Rc(n),o=r==="fixed",l=vm(e,!0,o,n);let c={scrollLeft:0,scrollTop:0};const u=wc(0);function d(){u.x=h2(a)}if(s||!s&&!o)if((i0(n)!=="body"||sy(a))&&(c=d2(n)),s){const x=vm(n,!0,o,n);u.x=x.x+n.clientLeft,u.y=x.y+n.clientTop}else a&&d();o&&!s&&a&&d();const f=a&&!s&&!o?c9(a,c):wc(0),m=l.left+c.scrollLeft-u.x-f.x,g=l.top+c.scrollTop-u.y-f.y;return{x:m,y:g,width:l.width,height:l.height}}function qN(e){return kl(e).position==="static"}function DL(e,n){if(!kc(e)||kl(e).position==="fixed")return null;if(n)return n(e);let r=e.offsetParent;return Rc(e)===r&&(r=r.ownerDocument.body),r}function d9(e,n){const r=ao(e);if(u2(e))return r;if(!kc(e)){let a=Nh(e);for(;a&&!bg(a);){if(Al(a)&&!qN(a))return a;a=Nh(a)}return r}let s=DL(e,n);for(;s&&zle(s)&&qN(s);)s=DL(s,n);return s&&bg(s)&&qN(s)&&!aE(s)?r:s||Kle(e)||r}const oce=async function(e){const n=this.getOffsetParent||d9,r=this.getDimensions,s=await r(e.floating);return{reference:ace(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function lce(e){return kl(e).direction==="rtl"}const cce={convertOffsetParentRelativeRectToViewportRelativeRect:Xle,getDocumentElement:Rc,getClippingRect:sce,getOffsetParent:d9,getElementRects:oce,getClientRects:Jle,getDimensions:ice,getScale:Gp,isElement:Al,isRTL:lce};function h9(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function uce(e,n){let r=null,s;const a=Rc(e);function o(){var c;clearTimeout(s),(c=r)==null||c.disconnect(),r=null}function l(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),o();const d=e.getBoundingClientRect(),{left:f,top:m,width:g,height:x}=d;if(c||n(),!g||!x)return;const v=pb(m),y=pb(a.clientWidth-(f+g)),b=pb(a.clientHeight-(m+x)),N=pb(f),S={rootMargin:-v+"px "+-y+"px "+-b+"px "+-N+"px",threshold:no(0,jh(1,u))||1};let A=!0;function P(L){const O=L[0].intersectionRatio;if(O!==u){if(!A)return l();O?l(!1,O):s=setTimeout(()=>{l(!1,1e-7)},1e3)}O===1&&!h9(d,e.getBoundingClientRect())&&l(),A=!1}try{r=new IntersectionObserver(P,{...S,root:a.ownerDocument})}catch{r=new IntersectionObserver(P,S)}r.observe(e)}return l(!0),o}function dce(e,n,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=s,d=lE(e),f=a||o?[...d?Jx(d):[],...Jx(n)]:[];f.forEach(N=>{a&&N.addEventListener("scroll",r,{passive:!0}),o&&N.addEventListener("resize",r)});const m=d&&c?uce(d,r):null;let g=-1,x=null;l&&(x=new ResizeObserver(N=>{let[j]=N;j&&j.target===d&&x&&(x.unobserve(n),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var S;(S=x)==null||S.observe(n)})),r()}),d&&!u&&x.observe(d),x.observe(n));let v,y=u?vm(e):null;u&&b();function b(){const N=vm(e);y&&!h9(y,N)&&r(),y=N,v=requestAnimationFrame(b)}return r(),()=>{var N;f.forEach(j=>{a&&j.removeEventListener("scroll",r),o&&j.removeEventListener("resize",r)}),m==null||m(),(N=x)==null||N.disconnect(),x=null,u&&cancelAnimationFrame(v)}}const hce=Ile,fce=Mle,mce=Lle,pce=Ble,gce=Rle,IL=Ole,xce=Fle,vce=(e,n,r)=>{const s=new Map,a={platform:cce,...r},o={...a.platform,_c:s};return Tle(e,n,{...a,platform:o})};var yce=typeof document<"u",bce=function(){},s1=yce?C.useLayoutEffect:bce;function A1(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let r,s,a;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==n.length)return!1;for(s=r;s--!==0;)if(!A1(e[s],n[s]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!==0;){const o=a[s];if(!(o==="_owner"&&e.$$typeof)&&!A1(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}function f9(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ML(e,n){const r=f9(e);return Math.round(n*r)/r}function zN(e){const n=C.useRef(e);return s1(()=>{n.current=e}),n}function wce(e){e===void 0&&(e={});const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:o,floating:l}={},transform:c=!0,whileElementsMounted:u,open:d}=e,[f,m]=C.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[g,x]=C.useState(s);A1(g,s)||x(s);const[v,y]=C.useState(null),[b,N]=C.useState(null),j=C.useCallback(z=>{z!==L.current&&(L.current=z,y(z))},[]),S=C.useCallback(z=>{z!==O.current&&(O.current=z,N(z))},[]),A=o||v,P=l||b,L=C.useRef(null),O=C.useRef(null),R=C.useRef(f),q=u!=null,U=zN(u),D=zN(a),M=zN(d),G=C.useCallback(()=>{if(!L.current||!O.current)return;const z={placement:n,strategy:r,middleware:g};D.current&&(z.platform=D.current),vce(L.current,O.current,z).then(te=>{const le={...te,isPositioned:M.current!==!1};Y.current&&!A1(R.current,le)&&(R.current=le,Qv.flushSync(()=>{m(le)}))})},[g,n,r,D,M]);s1(()=>{d===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,m(z=>({...z,isPositioned:!1})))},[d]);const Y=C.useRef(!1);s1(()=>(Y.current=!0,()=>{Y.current=!1}),[]),s1(()=>{if(A&&(L.current=A),P&&(O.current=P),A&&P){if(U.current)return U.current(A,P,G);G()}},[A,P,G,U,q]);const Z=C.useMemo(()=>({reference:L,floating:O,setReference:j,setFloating:S}),[j,S]),X=C.useMemo(()=>({reference:A,floating:P}),[A,P]),re=C.useMemo(()=>{const z={position:r,left:0,top:0};if(!X.floating)return z;const te=ML(X.floating,f.x),le=ML(X.floating,f.y);return c?{...z,transform:"translate("+te+"px, "+le+"px)",...f9(X.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:te,top:le}},[r,c,X.floating,f.x,f.y]);return C.useMemo(()=>({...f,update:G,refs:Z,elements:X,floatingStyles:re}),[f,G,Z,X,re])}const jce=e=>{function n(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:a}=typeof e=="function"?e(r):e;return s&&n(s)?s.current!=null?IL({element:s.current,padding:a}).fn(r):{}:s?IL({element:s,padding:a}).fn(r):{}}}},Nce=(e,n)=>({...hce(e),options:[e,n]}),_ce=(e,n)=>({...fce(e),options:[e,n]}),Sce=(e,n)=>({...xce(e),options:[e,n]}),Cce=(e,n)=>({...mce(e),options:[e,n]}),Pce=(e,n)=>({...pce(e),options:[e,n]}),Ace=(e,n)=>({...gce(e),options:[e,n]}),kce=(e,n)=>({...jce(e),options:[e,n]});var Ece="Arrow",m9=C.forwardRef((e,n)=>{const{children:r,width:s=10,height:a=5,...o}=e;return i.jsx(At.svg,{...o,ref:n,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});m9.displayName=Ece;var Tce=m9;function f2(e){const[n,r]=C.useState(void 0);return xs(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let l,c;if("borderBoxSize"in o){const u=o.borderBoxSize,d=Array.isArray(u)?u[0]:u;l=d.inlineSize,c=d.blockSize}else l=e.offsetWidth,c=e.offsetHeight;r({width:l,height:c})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),n}var cE="Popper",[p9,m2]=Vi(cE),[Oce,g9]=p9(cE),x9=e=>{const{__scopePopper:n,children:r}=e,[s,a]=C.useState(null);return i.jsx(Oce,{scope:n,anchor:s,onAnchorChange:a,children:r})};x9.displayName=cE;var v9="PopperAnchor",y9=C.forwardRef((e,n)=>{const{__scopePopper:r,virtualRef:s,...a}=e,o=g9(v9,r),l=C.useRef(null),c=un(n,l),u=C.useRef(null);return C.useEffect(()=>{const d=u.current;u.current=(s==null?void 0:s.current)||l.current,d!==u.current&&o.onAnchorChange(u.current)}),s?null:i.jsx(At.div,{...a,ref:c})});y9.displayName=v9;var uE="PopperContent",[Lce,Rce]=p9(uE),b9=C.forwardRef((e,n)=>{var he,W,J,pe,ue,me;const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:o="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:g=!1,updatePositionStrategy:x="optimized",onPlaced:v,...y}=e,b=g9(uE,r),[N,j]=C.useState(null),S=un(n,je=>j(je)),[A,P]=C.useState(null),L=f2(A),O=(L==null?void 0:L.width)??0,R=(L==null?void 0:L.height)??0,q=s+(o!=="center"?"-"+o:""),U=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},D=Array.isArray(d)?d:[d],M=D.length>0,G={padding:U,boundary:D.filter(Ice),altBoundary:M},{refs:Y,floatingStyles:Z,placement:X,isPositioned:re,middlewareData:z}=wce({strategy:"fixed",placement:q,whileElementsMounted:(...je)=>dce(...je,{animationFrame:x==="always"}),elements:{reference:b.anchor},middleware:[Nce({mainAxis:a+R,alignmentAxis:l}),u&&_ce({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Sce():void 0,...G}),u&&Cce({...G}),Pce({...G,apply:({elements:je,rects:ze,availableWidth:Te,availableHeight:xe})=>{const{width:ht,height:gt}=ze.reference,Ye=je.floating.style;Ye.setProperty("--radix-popper-available-width",`${Te}px`),Ye.setProperty("--radix-popper-available-height",`${xe}px`),Ye.setProperty("--radix-popper-anchor-width",`${ht}px`),Ye.setProperty("--radix-popper-anchor-height",`${gt}px`)}}),A&&kce({element:A,padding:c}),Mce({arrowWidth:O,arrowHeight:R}),g&&Ace({strategy:"referenceHidden",...G})]}),[te,le]=N9(X),Q=Fi(v);xs(()=>{re&&(Q==null||Q())},[re,Q]);const T=(he=z.arrow)==null?void 0:he.x,B=(W=z.arrow)==null?void 0:W.y,H=((J=z.arrow)==null?void 0:J.centerOffset)!==0,[ee,ce]=C.useState();return xs(()=>{N&&ce(window.getComputedStyle(N).zIndex)},[N]),i.jsx("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:re?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[(pe=z.transformOrigin)==null?void 0:pe.x,(ue=z.transformOrigin)==null?void 0:ue.y].join(" "),...((me=z.hide)==null?void 0:me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(Lce,{scope:r,placedSide:te,onArrowChange:P,arrowX:T,arrowY:B,shouldHideArrow:H,children:i.jsx(At.div,{"data-side":te,"data-align":le,...y,ref:S,style:{...y.style,animation:re?void 0:"none"}})})})});b9.displayName=uE;var w9="PopperArrow",Dce={top:"bottom",right:"left",bottom:"top",left:"right"},j9=C.forwardRef(function(n,r){const{__scopePopper:s,...a}=n,o=Rce(w9,s),l=Dce[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(Tce,{...a,ref:r,style:{...a.style,display:"block"}})})});j9.displayName=w9;function Ice(e){return e!==null}var Mce=e=>({name:"transformOrigin",options:e,fn(n){var b,N,j;const{placement:r,rects:s,middlewareData:a}=n,l=((b=a.arrow)==null?void 0:b.centerOffset)!==0,c=l?0:e.arrowWidth,u=l?0:e.arrowHeight,[d,f]=N9(r),m={start:"0%",center:"50%",end:"100%"}[f],g=(((N=a.arrow)==null?void 0:N.x)??0)+c/2,x=(((j=a.arrow)==null?void 0:j.y)??0)+u/2;let v="",y="";return d==="bottom"?(v=l?m:`${g}px`,y=`${-u}px`):d==="top"?(v=l?m:`${g}px`,y=`${s.floating.height+u}px`):d==="right"?(v=`${-u}px`,y=l?m:`${x}px`):d==="left"&&(v=`${s.floating.width+u}px`,y=l?m:`${x}px`),{data:{x:v,y}}}});function N9(e){const[n,r="center"]=e.split("-");return[n,r]}var _9=x9,dE=y9,S9=b9,C9=j9,Fce="Portal",p2=C.forwardRef((e,n)=>{var c;const{container:r,...s}=e,[a,o]=C.useState(!1);xs(()=>o(!0),[]);const l=r||a&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?Qq.createPortal(i.jsx(At.div,{...s,ref:n}),l):null});p2.displayName=Fce;var Bce=E4[" useInsertionEffect ".trim().toString()]||xs;function qo({prop:e,defaultProp:n,onChange:r=()=>{},caller:s}){const[a,o,l]=$ce({defaultProp:n,onChange:r}),c=e!==void 0,u=c?e:a;{const f=C.useRef(e!==void 0);C.useEffect(()=>{const m=f.current;m!==c&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,s])}const d=C.useCallback(f=>{var m;if(c){const g=qce(f)?f(e):f;g!==e&&((m=l.current)==null||m.call(l,g))}else o(f)},[c,e,o,l]);return[u,d]}function $ce({defaultProp:e,onChange:n}){const[r,s]=C.useState(e),a=C.useRef(r),o=C.useRef(n);return Bce(()=>{o.current=n},[n]),C.useEffect(()=>{var l;a.current!==r&&((l=o.current)==null||l.call(o,r),a.current=r)},[r,a]),[r,s,o]}function qce(e){return typeof e=="function"}function g2(e){const n=C.useRef({value:e,previous:e});return C.useMemo(()=>(n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous),[e])}var P9=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),zce="VisuallyHidden",Uce=C.forwardRef((e,n)=>i.jsx(At.span,{...e,ref:n,style:{...P9,...e.style}}));Uce.displayName=zce;var Vce=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},vp=new WeakMap,gb=new WeakMap,xb={},UN=0,A9=function(e){return e&&(e.host||A9(e.parentNode))},Hce=function(e,n){return n.map(function(r){if(e.contains(r))return r;var s=A9(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Wce=function(e,n,r,s){var a=Hce(n,Array.isArray(e)?e:[e]);xb[r]||(xb[r]=new WeakMap);var o=xb[r],l=[],c=new Set,u=new Set(a),d=function(m){!m||c.has(m)||(c.add(m),d(m.parentNode))};a.forEach(d);var f=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(g){if(c.has(g))f(g);else try{var x=g.getAttribute(s),v=x!==null&&x!=="false",y=(vp.get(g)||0)+1,b=(o.get(g)||0)+1;vp.set(g,y),o.set(g,b),l.push(g),y===1&&v&&gb.set(g,!0),b===1&&g.setAttribute(r,"true"),v||g.setAttribute(s,"true")}catch(N){console.error("aria-hidden: cannot operate on ",g,N)}})};return f(n),c.clear(),UN++,function(){l.forEach(function(m){var g=vp.get(m)-1,x=o.get(m)-1;vp.set(m,g),o.set(m,x),g||(gb.has(m)||m.removeAttribute(s),gb.delete(m)),x||m.removeAttribute(r)}),UN--,UN||(vp=new WeakMap,vp=new WeakMap,gb=new WeakMap,xb={})}},hE=function(e,n,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=Vce(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),Wce(s,a,r,"aria-hidden")):function(){return null}},fc=function(){return fc=Object.assign||function(n){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},fc.apply(this,arguments)};function k9(e,n){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)n.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function Kce(e,n,r){if(r||arguments.length===2)for(var s=0,a=n.length,o;s<a;s++)(o||!(s in n))&&(o||(o=Array.prototype.slice.call(n,0,s)),o[s]=n[s]);return e.concat(o||Array.prototype.slice.call(n))}var i1="right-scroll-bar-position",a1="width-before-scroll-bar",Gce="with-scroll-bars-hidden",Yce="--removed-body-scroll-bar-size";function VN(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function Qce(e,n){var r=C.useState(function(){return{value:e,callback:n,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=n,r.facade}var Xce=typeof window<"u"?C.useLayoutEffect:C.useEffect,FL=new WeakMap;function Jce(e,n){var r=Qce(null,function(s){return e.forEach(function(a){return VN(a,s)})});return Xce(function(){var s=FL.get(r);if(s){var a=new Set(s),o=new Set(e),l=r.current;a.forEach(function(c){o.has(c)||VN(c,null)}),o.forEach(function(c){a.has(c)||VN(c,l)})}FL.set(r,e)},[e]),r}function Zce(e){return e}function eue(e,n){n===void 0&&(n=Zce);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var l=n(o,s);return r.push(l),function(){r=r.filter(function(c){return c!==l})}},assignSyncMedium:function(o){for(s=!0;r.length;){var l=r;r=[],l.forEach(o)}r={push:function(c){return o(c)},filter:function(){return r}}},assignMedium:function(o){s=!0;var l=[];if(r.length){var c=r;r=[],c.forEach(o),l=r}var u=function(){var f=l;l=[],f.forEach(o)},d=function(){return Promise.resolve().then(u)};d(),r={push:function(f){l.push(f),d()},filter:function(f){return l=l.filter(f),r}}}};return a}function tue(e){e===void 0&&(e={});var n=eue(null);return n.options=fc({async:!0,ssr:!1},e),n}var E9=function(e){var n=e.sideCar,r=k9(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=n.read();if(!s)throw new Error("Sidecar medium not found");return C.createElement(s,fc({},r))};E9.isSideCarExport=!0;function nue(e,n){return e.useMedium(n),E9}var T9=tue(),HN=function(){},x2=C.forwardRef(function(e,n){var r=C.useRef(null),s=C.useState({onScrollCapture:HN,onWheelCapture:HN,onTouchMoveCapture:HN}),a=s[0],o=s[1],l=e.forwardProps,c=e.children,u=e.className,d=e.removeScrollBar,f=e.enabled,m=e.shards,g=e.sideCar,x=e.noRelative,v=e.noIsolation,y=e.inert,b=e.allowPinchZoom,N=e.as,j=N===void 0?"div":N,S=e.gapMode,A=k9(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=g,L=Jce([r,n]),O=fc(fc({},A),a);return C.createElement(C.Fragment,null,f&&C.createElement(P,{sideCar:T9,removeScrollBar:d,shards:m,noRelative:x,noIsolation:v,inert:y,setCallbacks:o,allowPinchZoom:!!b,lockRef:r,gapMode:S}),l?C.cloneElement(C.Children.only(c),fc(fc({},O),{ref:L})):C.createElement(j,fc({},O,{className:u,ref:L}),c))});x2.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};x2.classNames={fullWidth:a1,zeroRight:i1};var rue=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function sue(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=rue();return n&&e.setAttribute("nonce",n),e}function iue(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function aue(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var oue=function(){var e=0,n=null;return{add:function(r){e==0&&(n=sue())&&(iue(n,r),aue(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},lue=function(){var e=oue();return function(n,r){C.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&r])}},O9=function(){var e=lue(),n=function(r){var s=r.styles,a=r.dynamic;return e(s,a),null};return n},cue={left:0,top:0,right:0,gap:0},WN=function(e){return parseInt(e||"",10)||0},uue=function(e){var n=window.getComputedStyle(document.body),r=n[e==="padding"?"paddingLeft":"marginLeft"],s=n[e==="padding"?"paddingTop":"marginTop"],a=n[e==="padding"?"paddingRight":"marginRight"];return[WN(r),WN(s),WN(a)]},due=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return cue;var n=uue(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,s-r+n[2]-n[0])}},hue=O9(),Yp="data-scroll-locked",fue=function(e,n,r,s){var a=e.left,o=e.top,l=e.right,c=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Gce,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(c,"px ").concat(s,`;
  }
  body[`).concat(Yp,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(c,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(i1,` {
    right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat(a1,` {
    margin-right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat(i1," .").concat(i1,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(a1," .").concat(a1,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Yp,`] {
    `).concat(Yce,": ").concat(c,`px;
  }
`)},BL=function(){var e=parseInt(document.body.getAttribute(Yp)||"0",10);return isFinite(e)?e:0},mue=function(){C.useEffect(function(){return document.body.setAttribute(Yp,(BL()+1).toString()),function(){var e=BL()-1;e<=0?document.body.removeAttribute(Yp):document.body.setAttribute(Yp,e.toString())}},[])},pue=function(e){var n=e.noRelative,r=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;mue();var o=C.useMemo(function(){return due(a)},[a]);return C.createElement(hue,{styles:fue(o,!n,a,r?"":"!important")})},NA=!1;if(typeof window<"u")try{var vb=Object.defineProperty({},"passive",{get:function(){return NA=!0,!0}});window.addEventListener("test",vb,vb),window.removeEventListener("test",vb,vb)}catch{NA=!1}var yp=NA?{passive:!1}:!1,gue=function(e){return e.tagName==="TEXTAREA"},L9=function(e,n){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[n]!=="hidden"&&!(r.overflowY===r.overflowX&&!gue(e)&&r[n]==="visible")},xue=function(e){return L9(e,"overflowY")},vue=function(e){return L9(e,"overflowX")},$L=function(e,n){var r=n.ownerDocument,s=n;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=R9(e,s);if(a){var o=D9(e,s),l=o[1],c=o[2];if(l>c)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},yue=function(e){var n=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[n,r,s]},bue=function(e){var n=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[n,r,s]},R9=function(e,n){return e==="v"?xue(n):vue(n)},D9=function(e,n){return e==="v"?yue(n):bue(n)},wue=function(e,n){return e==="h"&&n==="rtl"?-1:1},jue=function(e,n,r,s,a){var o=wue(e,window.getComputedStyle(n).direction),l=o*s,c=r.target,u=n.contains(c),d=!1,f=l>0,m=0,g=0;do{if(!c)break;var x=D9(e,c),v=x[0],y=x[1],b=x[2],N=y-b-o*v;(v||N)&&R9(e,c)&&(m+=N,g+=v);var j=c.parentNode;c=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!u&&c!==document.body||u&&(n.contains(c)||n===c));return(f&&Math.abs(m)<1||!f&&Math.abs(g)<1)&&(d=!0),d},yb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},qL=function(e){return[e.deltaX,e.deltaY]},zL=function(e){return e&&"current"in e?e.current:e},Nue=function(e,n){return e[0]===n[0]&&e[1]===n[1]},_ue=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Sue=0,bp=[];function Cue(e){var n=C.useRef([]),r=C.useRef([0,0]),s=C.useRef(),a=C.useState(Sue++)[0],o=C.useState(O9)[0],l=C.useRef(e);C.useEffect(function(){l.current=e},[e]),C.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var y=Kce([e.lockRef.current],(e.shards||[]).map(zL),!0).filter(Boolean);return y.forEach(function(b){return b.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),y.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var c=C.useCallback(function(y,b){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!l.current.allowPinchZoom;var N=yb(y),j=r.current,S="deltaX"in y?y.deltaX:j[0]-N[0],A="deltaY"in y?y.deltaY:j[1]-N[1],P,L=y.target,O=Math.abs(S)>Math.abs(A)?"h":"v";if("touches"in y&&O==="h"&&L.type==="range")return!1;var R=$L(O,L);if(!R)return!0;if(R?P=O:(P=O==="v"?"h":"v",R=$L(O,L)),!R)return!1;if(!s.current&&"changedTouches"in y&&(S||A)&&(s.current=P),!P)return!0;var q=s.current||P;return jue(q,b,y,q==="h"?S:A)},[]),u=C.useCallback(function(y){var b=y;if(!(!bp.length||bp[bp.length-1]!==o)){var N="deltaY"in b?qL(b):yb(b),j=n.current.filter(function(P){return P.name===b.type&&(P.target===b.target||b.target===P.shadowParent)&&Nue(P.delta,N)})[0];if(j&&j.should){b.cancelable&&b.preventDefault();return}if(!j){var S=(l.current.shards||[]).map(zL).filter(Boolean).filter(function(P){return P.contains(b.target)}),A=S.length>0?c(b,S[0]):!l.current.noIsolation;A&&b.cancelable&&b.preventDefault()}}},[]),d=C.useCallback(function(y,b,N,j){var S={name:y,delta:b,target:N,should:j,shadowParent:Pue(N)};n.current.push(S),setTimeout(function(){n.current=n.current.filter(function(A){return A!==S})},1)},[]),f=C.useCallback(function(y){r.current=yb(y),s.current=void 0},[]),m=C.useCallback(function(y){d(y.type,qL(y),y.target,c(y,e.lockRef.current))},[]),g=C.useCallback(function(y){d(y.type,yb(y),y.target,c(y,e.lockRef.current))},[]);C.useEffect(function(){return bp.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",u,yp),document.addEventListener("touchmove",u,yp),document.addEventListener("touchstart",f,yp),function(){bp=bp.filter(function(y){return y!==o}),document.removeEventListener("wheel",u,yp),document.removeEventListener("touchmove",u,yp),document.removeEventListener("touchstart",f,yp)}},[]);var x=e.removeScrollBar,v=e.inert;return C.createElement(C.Fragment,null,v?C.createElement(o,{styles:_ue(a)}):null,x?C.createElement(pue,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Pue(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const Aue=nue(T9,Cue);var v2=C.forwardRef(function(e,n){return C.createElement(x2,fc({},e,{ref:n,sideCar:Aue}))});v2.classNames=x2.classNames;var kue=[" ","Enter","ArrowUp","ArrowDown"],Eue=[" ","Enter"],ym="Select",[y2,b2,Tue]=a2(ym),[a0]=Vi(ym,[Tue,m2]),w2=m2(),[Oue,qh]=a0(ym),[Lue,Rue]=a0(ym),I9=e=>{const{__scopeSelect:n,children:r,open:s,defaultOpen:a,onOpenChange:o,value:l,defaultValue:c,onValueChange:u,dir:d,name:f,autoComplete:m,disabled:g,required:x,form:v}=e,y=w2(n),[b,N]=C.useState(null),[j,S]=C.useState(null),[A,P]=C.useState(!1),L=r0(d),[O,R]=qo({prop:s,defaultProp:a??!1,onChange:o,caller:ym}),[q,U]=qo({prop:l,defaultProp:c,onChange:u,caller:ym}),D=C.useRef(null),M=b?v||!!b.closest("form"):!0,[G,Y]=C.useState(new Set),Z=Array.from(G).map(X=>X.props.value).join(";");return i.jsx(_9,{...y,children:i.jsxs(Oue,{required:x,scope:n,trigger:b,onTriggerChange:N,valueNode:j,onValueNodeChange:S,valueNodeHasChildren:A,onValueNodeHasChildrenChange:P,contentId:mi(),value:q,onValueChange:U,open:O,onOpenChange:R,dir:L,triggerPointerDownPosRef:D,disabled:g,children:[i.jsx(y2.Provider,{scope:n,children:i.jsx(Lue,{scope:e.__scopeSelect,onNativeOptionAdd:C.useCallback(X=>{Y(re=>new Set(re).add(X))},[]),onNativeOptionRemove:C.useCallback(X=>{Y(re=>{const z=new Set(re);return z.delete(X),z})},[]),children:r})}),M?i.jsxs(aU,{"aria-hidden":!0,required:x,tabIndex:-1,name:f,autoComplete:m,value:q,onChange:X=>U(X.target.value),disabled:g,form:v,children:[q===void 0?i.jsx("option",{value:""}):null,Array.from(G)]},Z):null]})})};I9.displayName=ym;var M9="SelectTrigger",F9=C.forwardRef((e,n)=>{const{__scopeSelect:r,disabled:s=!1,...a}=e,o=w2(r),l=qh(M9,r),c=l.disabled||s,u=un(n,l.onTriggerChange),d=b2(r),f=C.useRef("touch"),[m,g,x]=lU(y=>{const b=d().filter(S=>!S.disabled),N=b.find(S=>S.value===l.value),j=cU(b,y,N);j!==void 0&&l.onValueChange(j.value)}),v=y=>{c||(l.onOpenChange(!0),x()),y&&(l.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return i.jsx(dE,{asChild:!0,...o,children:i.jsx(At.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":oU(l.value)?"":void 0,...a,ref:u,onClick:Ft(a.onClick,y=>{y.currentTarget.focus(),f.current!=="mouse"&&v(y)}),onPointerDown:Ft(a.onPointerDown,y=>{f.current=y.pointerType;const b=y.target;b.hasPointerCapture(y.pointerId)&&b.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(v(y),y.preventDefault())}),onKeyDown:Ft(a.onKeyDown,y=>{const b=m.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&g(y.key),!(b&&y.key===" ")&&kue.includes(y.key)&&(v(),y.preventDefault())})})})});F9.displayName=M9;var B9="SelectValue",$9=C.forwardRef((e,n)=>{const{__scopeSelect:r,className:s,style:a,children:o,placeholder:l="",...c}=e,u=qh(B9,r),{onValueNodeHasChildrenChange:d}=u,f=o!==void 0,m=un(n,u.onValueNodeChange);return xs(()=>{d(f)},[d,f]),i.jsx(At.span,{...c,ref:m,style:{pointerEvents:"none"},children:oU(u.value)?i.jsx(i.Fragment,{children:l}):o})});$9.displayName=B9;var Due="SelectIcon",q9=C.forwardRef((e,n)=>{const{__scopeSelect:r,children:s,...a}=e;return i.jsx(At.span,{"aria-hidden":!0,...a,ref:n,children:s||"▼"})});q9.displayName=Due;var Iue="SelectPortal",z9=e=>i.jsx(p2,{asChild:!0,...e});z9.displayName=Iue;var bm="SelectContent",U9=C.forwardRef((e,n)=>{const r=qh(bm,e.__scopeSelect),[s,a]=C.useState();if(xs(()=>{a(new DocumentFragment)},[]),!r.open){const o=s;return o?Qv.createPortal(i.jsx(V9,{scope:e.__scopeSelect,children:i.jsx(y2.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),o):null}return i.jsx(H9,{...e,ref:n})});U9.displayName=bm;var gl=10,[V9,zh]=a0(bm),Mue="SelectContentImpl",Fue=xm("SelectContent.RemoveScroll"),H9=C.forwardRef((e,n)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:l,side:c,sideOffset:u,align:d,alignOffset:f,arrowPadding:m,collisionBoundary:g,collisionPadding:x,sticky:v,hideWhenDetached:y,avoidCollisions:b,...N}=e,j=qh(bm,r),[S,A]=C.useState(null),[P,L]=C.useState(null),O=un(n,he=>A(he)),[R,q]=C.useState(null),[U,D]=C.useState(null),M=b2(r),[G,Y]=C.useState(!1),Z=C.useRef(!1);C.useEffect(()=>{if(S)return hE(S)},[S]),nE();const X=C.useCallback(he=>{const[W,...J]=M().map(me=>me.ref.current),[pe]=J.slice(-1),ue=document.activeElement;for(const me of he)if(me===ue||(me==null||me.scrollIntoView({block:"nearest"}),me===W&&P&&(P.scrollTop=0),me===pe&&P&&(P.scrollTop=P.scrollHeight),me==null||me.focus(),document.activeElement!==ue))return},[M,P]),re=C.useCallback(()=>X([R,S]),[X,R,S]);C.useEffect(()=>{G&&re()},[G,re]);const{onOpenChange:z,triggerPointerDownPosRef:te}=j;C.useEffect(()=>{if(S){let he={x:0,y:0};const W=pe=>{var ue,me;he={x:Math.abs(Math.round(pe.pageX)-(((ue=te.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(pe.pageY)-(((me=te.current)==null?void 0:me.y)??0))}},J=pe=>{he.x<=10&&he.y<=10?pe.preventDefault():S.contains(pe.target)||z(!1),document.removeEventListener("pointermove",W),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",W),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",W),document.removeEventListener("pointerup",J,{capture:!0})}}},[S,z,te]),C.useEffect(()=>{const he=()=>z(!1);return window.addEventListener("blur",he),window.addEventListener("resize",he),()=>{window.removeEventListener("blur",he),window.removeEventListener("resize",he)}},[z]);const[le,Q]=lU(he=>{const W=M().filter(ue=>!ue.disabled),J=W.find(ue=>ue.ref.current===document.activeElement),pe=cU(W,he,J);pe&&setTimeout(()=>pe.ref.current.focus())}),T=C.useCallback((he,W,J)=>{const pe=!Z.current&&!J;(j.value!==void 0&&j.value===W||pe)&&(q(he),pe&&(Z.current=!0))},[j.value]),B=C.useCallback(()=>S==null?void 0:S.focus(),[S]),H=C.useCallback((he,W,J)=>{const pe=!Z.current&&!J;(j.value!==void 0&&j.value===W||pe)&&D(he)},[j.value]),ee=s==="popper"?_A:W9,ce=ee===_A?{side:c,sideOffset:u,align:d,alignOffset:f,arrowPadding:m,collisionBoundary:g,collisionPadding:x,sticky:v,hideWhenDetached:y,avoidCollisions:b}:{};return i.jsx(V9,{scope:r,content:S,viewport:P,onViewportChange:L,itemRefCallback:T,selectedItem:R,onItemLeave:B,itemTextRefCallback:H,focusSelectedItem:re,selectedItemText:U,position:s,isPositioned:G,searchRef:le,children:i.jsx(v2,{as:Fue,allowPinchZoom:!0,children:i.jsx(l2,{asChild:!0,trapped:j.open,onMountAutoFocus:he=>{he.preventDefault()},onUnmountAutoFocus:Ft(a,he=>{var W;(W=j.trigger)==null||W.focus({preventScroll:!0}),he.preventDefault()}),children:i.jsx(o2,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:he=>he.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:i.jsx(ee,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:he=>he.preventDefault(),...N,...ce,onPlaced:()=>Y(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:Ft(N.onKeyDown,he=>{const W=he.ctrlKey||he.altKey||he.metaKey;if(he.key==="Tab"&&he.preventDefault(),!W&&he.key.length===1&&Q(he.key),["ArrowUp","ArrowDown","Home","End"].includes(he.key)){let pe=M().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(he.key)&&(pe=pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(he.key)){const ue=he.target,me=pe.indexOf(ue);pe=pe.slice(me+1)}setTimeout(()=>X(pe)),he.preventDefault()}})})})})})})});H9.displayName=Mue;var Bue="SelectItemAlignedPosition",W9=C.forwardRef((e,n)=>{const{__scopeSelect:r,onPlaced:s,...a}=e,o=qh(bm,r),l=zh(bm,r),[c,u]=C.useState(null),[d,f]=C.useState(null),m=un(n,O=>f(O)),g=b2(r),x=C.useRef(!1),v=C.useRef(!0),{viewport:y,selectedItem:b,selectedItemText:N,focusSelectedItem:j}=l,S=C.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&d&&y&&b&&N){const O=o.trigger.getBoundingClientRect(),R=d.getBoundingClientRect(),q=o.valueNode.getBoundingClientRect(),U=N.getBoundingClientRect();if(o.dir!=="rtl"){const ue=U.left-R.left,me=q.left-ue,je=O.left-me,ze=O.width+je,Te=Math.max(ze,R.width),xe=window.innerWidth-gl,ht=Qx(me,[gl,Math.max(gl,xe-Te)]);c.style.minWidth=ze+"px",c.style.left=ht+"px"}else{const ue=R.right-U.right,me=window.innerWidth-q.right-ue,je=window.innerWidth-O.right-me,ze=O.width+je,Te=Math.max(ze,R.width),xe=window.innerWidth-gl,ht=Qx(me,[gl,Math.max(gl,xe-Te)]);c.style.minWidth=ze+"px",c.style.right=ht+"px"}const D=g(),M=window.innerHeight-gl*2,G=y.scrollHeight,Y=window.getComputedStyle(d),Z=parseInt(Y.borderTopWidth,10),X=parseInt(Y.paddingTop,10),re=parseInt(Y.borderBottomWidth,10),z=parseInt(Y.paddingBottom,10),te=Z+X+G+z+re,le=Math.min(b.offsetHeight*5,te),Q=window.getComputedStyle(y),T=parseInt(Q.paddingTop,10),B=parseInt(Q.paddingBottom,10),H=O.top+O.height/2-gl,ee=M-H,ce=b.offsetHeight/2,he=b.offsetTop+ce,W=Z+X+he,J=te-W;if(W<=H){const ue=D.length>0&&b===D[D.length-1].ref.current;c.style.bottom="0px";const me=d.clientHeight-y.offsetTop-y.offsetHeight,je=Math.max(ee,ce+(ue?B:0)+me+re),ze=W+je;c.style.height=ze+"px"}else{const ue=D.length>0&&b===D[0].ref.current;c.style.top="0px";const je=Math.max(H,Z+y.offsetTop+(ue?T:0)+ce)+J;c.style.height=je+"px",y.scrollTop=W-H+y.offsetTop}c.style.margin=`${gl}px 0`,c.style.minHeight=le+"px",c.style.maxHeight=M+"px",s==null||s(),requestAnimationFrame(()=>x.current=!0)}},[g,o.trigger,o.valueNode,c,d,y,b,N,o.dir,s]);xs(()=>S(),[S]);const[A,P]=C.useState();xs(()=>{d&&P(window.getComputedStyle(d).zIndex)},[d]);const L=C.useCallback(O=>{O&&v.current===!0&&(S(),j==null||j(),v.current=!1)},[S,j]);return i.jsx(que,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:L,children:i.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:i.jsx(At.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});W9.displayName=Bue;var $ue="SelectPopperPosition",_A=C.forwardRef((e,n)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=gl,...o}=e,l=w2(r);return i.jsx(S9,{...l,...o,ref:n,align:s,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});_A.displayName=$ue;var[que,fE]=a0(bm,{}),SA="SelectViewport",K9=C.forwardRef((e,n)=>{const{__scopeSelect:r,nonce:s,...a}=e,o=zh(SA,r),l=fE(SA,r),c=un(n,o.onViewportChange),u=C.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(y2.Slot,{scope:r,children:i.jsx(At.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ft(a.onScroll,d=>{const f=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:g}=l;if(g!=null&&g.current&&m){const x=Math.abs(u.current-f.scrollTop);if(x>0){const v=window.innerHeight-gl*2,y=parseFloat(m.style.minHeight),b=parseFloat(m.style.height),N=Math.max(y,b);if(N<v){const j=N+x,S=Math.min(v,j),A=j-S;m.style.height=S+"px",m.style.bottom==="0px"&&(f.scrollTop=A>0?A:0,m.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});K9.displayName=SA;var G9="SelectGroup",[zue,Uue]=a0(G9),Vue=C.forwardRef((e,n)=>{const{__scopeSelect:r,...s}=e,a=mi();return i.jsx(zue,{scope:r,id:a,children:i.jsx(At.div,{role:"group","aria-labelledby":a,...s,ref:n})})});Vue.displayName=G9;var Y9="SelectLabel",Q9=C.forwardRef((e,n)=>{const{__scopeSelect:r,...s}=e,a=Uue(Y9,r);return i.jsx(At.div,{id:a.id,...s,ref:n})});Q9.displayName=Y9;var k1="SelectItem",[Hue,X9]=a0(k1),J9=C.forwardRef((e,n)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:o,...l}=e,c=qh(k1,r),u=zh(k1,r),d=c.value===s,[f,m]=C.useState(o??""),[g,x]=C.useState(!1),v=un(n,j=>{var S;return(S=u.itemRefCallback)==null?void 0:S.call(u,j,s,a)}),y=mi(),b=C.useRef("touch"),N=()=>{a||(c.onValueChange(s),c.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Hue,{scope:r,value:s,disabled:a,textId:y,isSelected:d,onItemTextChange:C.useCallback(j=>{m(S=>S||((j==null?void 0:j.textContent)??"").trim())},[]),children:i.jsx(y2.ItemSlot,{scope:r,value:s,disabled:a,textValue:f,children:i.jsx(At.div,{role:"option","aria-labelledby":y,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:v,onFocus:Ft(l.onFocus,()=>x(!0)),onBlur:Ft(l.onBlur,()=>x(!1)),onClick:Ft(l.onClick,()=>{b.current!=="mouse"&&N()}),onPointerUp:Ft(l.onPointerUp,()=>{b.current==="mouse"&&N()}),onPointerDown:Ft(l.onPointerDown,j=>{b.current=j.pointerType}),onPointerMove:Ft(l.onPointerMove,j=>{var S;b.current=j.pointerType,a?(S=u.onItemLeave)==null||S.call(u):b.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ft(l.onPointerLeave,j=>{var S;j.currentTarget===document.activeElement&&((S=u.onItemLeave)==null||S.call(u))}),onKeyDown:Ft(l.onKeyDown,j=>{var A;((A=u.searchRef)==null?void 0:A.current)!==""&&j.key===" "||(Eue.includes(j.key)&&N(),j.key===" "&&j.preventDefault())})})})})});J9.displayName=k1;var dx="SelectItemText",Z9=C.forwardRef((e,n)=>{const{__scopeSelect:r,className:s,style:a,...o}=e,l=qh(dx,r),c=zh(dx,r),u=X9(dx,r),d=Rue(dx,r),[f,m]=C.useState(null),g=un(n,N=>m(N),u.onItemTextChange,N=>{var j;return(j=c.itemTextRefCallback)==null?void 0:j.call(c,N,u.value,u.disabled)}),x=f==null?void 0:f.textContent,v=C.useMemo(()=>i.jsx("option",{value:u.value,disabled:u.disabled,children:x},u.value),[u.disabled,u.value,x]),{onNativeOptionAdd:y,onNativeOptionRemove:b}=d;return xs(()=>(y(v),()=>b(v)),[y,b,v]),i.jsxs(i.Fragment,{children:[i.jsx(At.span,{id:u.textId,...o,ref:g}),u.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Qv.createPortal(o.children,l.valueNode):null]})});Z9.displayName=dx;var eU="SelectItemIndicator",tU=C.forwardRef((e,n)=>{const{__scopeSelect:r,...s}=e;return X9(eU,r).isSelected?i.jsx(At.span,{"aria-hidden":!0,...s,ref:n}):null});tU.displayName=eU;var CA="SelectScrollUpButton",nU=C.forwardRef((e,n)=>{const r=zh(CA,e.__scopeSelect),s=fE(CA,e.__scopeSelect),[a,o]=C.useState(!1),l=un(n,s.onScrollButtonChange);return xs(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=u.scrollTop>0;o(d)};const u=r.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?i.jsx(sU,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=r;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});nU.displayName=CA;var PA="SelectScrollDownButton",rU=C.forwardRef((e,n)=>{const r=zh(PA,e.__scopeSelect),s=fE(PA,e.__scopeSelect),[a,o]=C.useState(!1),l=un(n,s.onScrollButtonChange);return xs(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<d;o(f)};const u=r.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?i.jsx(sU,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=r;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});rU.displayName=PA;var sU=C.forwardRef((e,n)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=e,o=zh("SelectScrollButton",r),l=C.useRef(null),c=b2(r),u=C.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return C.useEffect(()=>()=>u(),[u]),xs(()=>{var f;const d=c().find(m=>m.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[c]),i.jsx(At.div,{"aria-hidden":!0,...a,ref:n,style:{flexShrink:0,...a.style},onPointerDown:Ft(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(s,50))}),onPointerMove:Ft(a.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),l.current===null&&(l.current=window.setInterval(s,50))}),onPointerLeave:Ft(a.onPointerLeave,()=>{u()})})}),Wue="SelectSeparator",iU=C.forwardRef((e,n)=>{const{__scopeSelect:r,...s}=e;return i.jsx(At.div,{"aria-hidden":!0,...s,ref:n})});iU.displayName=Wue;var AA="SelectArrow",Kue=C.forwardRef((e,n)=>{const{__scopeSelect:r,...s}=e,a=w2(r),o=qh(AA,r),l=zh(AA,r);return o.open&&l.position==="popper"?i.jsx(C9,{...a,...s,ref:n}):null});Kue.displayName=AA;var Gue="SelectBubbleInput",aU=C.forwardRef(({__scopeSelect:e,value:n,...r},s)=>{const a=C.useRef(null),o=un(s,a),l=g2(n);return C.useEffect(()=>{const c=a.current;if(!c)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(l!==n&&f){const m=new Event("change",{bubbles:!0});f.call(c,n),c.dispatchEvent(m)}},[l,n]),i.jsx(At.select,{...r,style:{...P9,...r.style},ref:o,defaultValue:n})});aU.displayName=Gue;function oU(e){return e===""||e===void 0}function lU(e){const n=Fi(e),r=C.useRef(""),s=C.useRef(0),a=C.useCallback(l=>{const c=r.current+l;n(c),(function u(d){r.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>u(""),1e3))})(c)},[n]),o=C.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,o]}function cU(e,n,r){const a=n.length>1&&Array.from(n).every(d=>d===n[0])?n[0]:n,o=r?e.indexOf(r):-1;let l=Yue(e,Math.max(o,0));a.length===1&&(l=l.filter(d=>d!==r));const u=l.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return u!==r?u:void 0}function Yue(e,n){return e.map((r,s)=>e[(n+s)%e.length])}var Que=I9,uU=F9,Xue=$9,Jue=q9,Zue=z9,dU=U9,ede=K9,hU=Q9,fU=J9,tde=Z9,nde=tU,mU=nU,pU=rU,gU=iU;const pn=Que,gn=Xue,hn=C.forwardRef(({className:e,children:n,...r},s)=>i.jsxs(uU,{ref:s,className:ut("flex h-10 w-full items-center justify-between whitespace-nowrap rounded-md border border-white/10 bg-[#1A2B3A] px-3 py-2 text-sm text-[#E0D8C8] focus:outline-none focus:ring-2 focus:ring-[#A35C5C] disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[n,i.jsx(Jue,{asChild:!0,children:i.jsx(La,{className:"h-4 w-4 opacity-70"})})]}));hn.displayName=uU.displayName;const xU=C.forwardRef(({className:e,...n},r)=>i.jsx(mU,{ref:r,className:ut("flex cursor-default items-center justify-center py-1",e),...n,children:i.jsx(uh,{className:"h-4 w-4"})}));xU.displayName=mU.displayName;const vU=C.forwardRef(({className:e,...n},r)=>i.jsx(pU,{ref:r,className:ut("flex cursor-default items-center justify-center py-1",e),...n,children:i.jsx(La,{className:"h-4 w-4"})}));vU.displayName=pU.displayName;const fn=C.forwardRef(({className:e,children:n,position:r="popper",...s},a)=>i.jsx(Zue,{children:i.jsxs(dU,{ref:a,className:ut("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-lg border border-[#E0D8C8]/15 bg-[#243548]/70 backdrop-blur-md text-[#E0D8C8] shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[i.jsx(xU,{}),i.jsx(ede,{className:ut("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),i.jsx(vU,{})]})}));fn.displayName=dU.displayName;const rde=C.forwardRef(({className:e,...n},r)=>i.jsx(hU,{ref:r,className:ut("px-2 py-1.5 text-sm font-semibold",e),...n}));rde.displayName=hU.displayName;const ot=C.forwardRef(({className:e,children:n,...r},s)=>i.jsxs(fU,{ref:s,className:ut("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm text-[#E0D8C8] outline-none focus:bg-[#A35C5C]/20 focus:text-[#E0D8C8] hover:bg-white/5 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 transition-colors",e),...r,children:[i.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(nde,{children:i.jsx(vh,{className:"h-4 w-4"})})}),i.jsx(tde,{children:n})]}));ot.displayName=fU.displayName;const sde=C.forwardRef(({className:e,...n},r)=>i.jsx(gU,{ref:r,className:ut("-mx-1 my-1 h-px bg-[#E0D8C8]/10",e),...n}));sde.displayName=gU.displayName;const ide=Gg("inline-flex items-center rounded-lg border px-2.5 py-0.5 text-xs font-semibold transition-colors",{variants:{variant:{default:"bg-[#A35C5C]/20 text-[#E0D8C8] border border-[#A35C5C]/40",secondary:"bg-white/10 text-[#E0D8C8]/70 border border-white/10",outline:"border border-white/20 text-[#E0D8C8]",success:"border-[#2EAF6F]/30 bg-[#2EAF6F]/15 text-[#2EAF6F]",warning:"border-[#C77A2B]/30 bg-[#C77A2B]/15 text-[#C77A2B]",destructive:"border-[#E05D5D]/30 bg-[#E05D5D]/15 text-[#E05D5D]"}},defaultVariants:{variant:"default"}});function Ge({className:e,variant:n,...r}){return i.jsx("div",{className:ut(ide({variant:n}),e),...r})}const ade={High:"success",Medium:"warning",Low:"secondary"};function ode({pipes:e,user:n,onComplete:r}){var x,v,y,b;const[s,a]=C.useState(""),[o,l]=C.useState(!1),[c,u]=C.useState(null),d=e.find(N=>String(N.id)===String(s)),f=async()=>{var S;if(!d)return;const N=(((S=d.photos)==null?void 0:S.length)||0)>0,j=d.length_mm||d.bowl_height_mm||d.bowl_width_mm||d.bowl_diameter_mm||d.weight_grams;if(!N&&!j){Ve.error("This pipe needs photos or dimensions to analyze geometry");return}l(!0);try{const A=`You are the "Pipe Measurements" classifier for PipeKeeper. Your job is to infer and propose shape, bowlStyle, shankShape, bend, and sizeClass using photos and dimensions. Output must be enum-safe, explainable, and conservative when uncertain.

**Pipe Information:**
- Name: ${d.name||"Unknown"}
- Maker: ${d.maker||"Unknown"}
${d.length_mm?`- Overall Length: ${d.length_mm}mm`:""}
${d.weight_grams?`- Weight: ${d.weight_grams}g`:""}
${d.bowl_height_mm?`- Bowl Height: ${d.bowl_height_mm}mm`:""}
${d.bowl_width_mm?`- Bowl Width (outer): ${d.bowl_width_mm}mm`:""}
${d.bowl_diameter_mm?`- Chamber Diameter: ${d.bowl_diameter_mm}mm`:""}
${d.bowl_depth_mm?`- Chamber Depth: ${d.bowl_depth_mm}mm`:""}

**Current Values:**
- Shape: ${d.shape||"Unknown"}
- Bowl Style: ${d.bowlStyle||"Unknown"}
- Shank Shape: ${d.shankShape||"Unknown"}
- Bend: ${d.bend||"Unknown"}
- Size Class: ${d.sizeClass||"Standard"}

**Analysis Method:**

STEP 1 - Extract evidence from photos (if provided):
- profileSilhouette: straight/conical/rounded/squat/tall/irregular
- beadlinesPresent: true/false (bulldog/rhodesian indicator)
- shankCrossSection: round/diamond/square/oval/paneled/unclear
- bendAngle: straight/mild/medium/deep/s-curve/unclear
- stemShankProportion: normal/long-shank/short-stem/unclear
- flatBottom: true/false (poker/tankard indicator)

STEP 2 - Compute dimension ratios (if available):
- heightToOuterDia = bowl_height_mm / bowl_width_mm
- Use overallLength for size classification

STEP 3 - Score each field:

**Bend** (from photos):
- Straight: +3 if bendAngle straight
- 1/4 Bent: +3 if mild
- 1/2 Bent: +3 if medium
- 3/4 Bent: +3 if deep
- Full Bent: +3 if very deep/bowl under shank
- S-Bend: +4 if clear s-curve
- High confidence only if clear side profile

**Shank Shape** (from photos):
- Diamond: +4 if sharp corners visible
- Square: +4 if square clear
- Round: +3 if round
- Oval: +3 if flattened round
- Paneled / Faceted: +4 if facets visible
- High confidence requires clear cross-section view

**Bowl Style** (photos + ratios):
- Cylindrical (Straight Wall): +3 if straight; +2 if heightToOuterDia 1.0-1.4
- Conical (Tapered): +4 if flared; +2 if heightToOuterDia > 1.2
- Rounded / Ball: +4 if ball-like
- Squat / Pot: +4 if squat; +3 if heightToOuterDia < 0.9
- Chimney (Tall): +4 if tall; +3 if heightToOuterDia ≥ 1.6
- Paneled/Faceted: +4 if facets on bowl
- Freeform: +3 if irregular artisan

**Shape** (decision-first, then scoring):
Strong ID rules (apply first):
1. If flatBottom + upright: Poker/Tankard/Cherrywood
2. If beadlinesPresent:
   - Diamond shank = Bulldog (High)
   - Otherwise = Rhodesian (High/Med)
3. If very deep bend + tall = Oom Paul (Hungarian)
4. If calabash bowl visible = Calabash (High)
5. If extremely long stem = Churchwarden (High if clear)
6. If irregular artisan = Freehand (Med/High)

Scoring fallback:
- Billiard: +3 if classic straight walls
- Apple: +3 if rounder bowl
- Dublin: +3 if conical/flared
- Brandy: +3 if brandy flare
- Pot: +3 if squat pot
- Prince: +3 if low squat round
- Canadian/Liverpool/Lovat/Lumberman: +4 if long-shank proportion
  (Canadian: oval shank+short stem; Liverpool: round shank+short stem)
- Cutty/Devil Anse: +3 if forward-leaning old-school
- Hawkbill: +3 if tight sweep + rounded

**Size Class** (dimensions first):
Thresholds from overallLength:
- ≤110mm: Vest Pocket
- 111-135mm: Small
- 136-160mm: Standard
- 161-185mm: Large
- ≥186mm: Magnum / XL
- ≥240mm: Churchwarden
- ≥300mm: MacArthur
Default to Standard if uncertain but typical.

**Confidence Rules:**
- High: Strong evidence, clear photos/dimensions, winner leads by ≥2 points
- Medium: Moderate evidence, okay clarity, close scores
- Low: Unclear, conflicting, or insufficient data
- For fields already non-Unknown: only suggest High confidence changes

**Strict Enum Values:**
Shape: Billiard, Bent Billiard, Apple, Bent Apple, Dublin, Bent Dublin, Bulldog, Rhodesian, Canadian, Liverpool, Lovat, Lumberman, Prince, Author, Brandy, Pot, Tomato, Egg, Acorn, Pear, Cutty, Devil Anse, Hawkbill, Diplomat, Poker, Cherrywood, Duke, Don, Tankard, Churchwarden, Nosewarmer, Vest Pocket, MacArthur, Calabash, Reverse Calabash, Cavalier, Freehand, Blowfish, Volcano, Horn, Nautilus, Tomahawk, Bullmoose, Bullcap, Oom Paul (Hungarian), Tyrolean, Unknown, Other

Bowl Style: Cylindrical (Straight Wall), Conical (Tapered), Rounded / Ball, Oval / Egg, Squat / Pot, Chimney (Tall), Paneled, Faceted / Multi-Panel, Horn-Shaped, Freeform, Unknown

Shank Shape: Round, Diamond, Square, Oval, Paneled / Faceted, Military / Army Mount, Freeform, Unknown

Bend: Straight, 1/4 Bent, 1/2 Bent, 3/4 Bent, Full Bent, S-Bend, Unknown

Size Class: Vest Pocket, Small, Standard, Large, Magnum / XL, Churchwarden, MacArthur, Unknown

**Output Format:**
Provide detailed reasoning bullets for each suggestion explaining:
- What visual/dimensional evidence supports this classification
- Which scoring rules triggered
- Why confidence is High/Medium/Low
- What data is missing if Unknown

NEVER invent values outside the strict enums. Default to Unknown with explanation when uncertain.`,P=await Ce.integrations.Core.InvokeLLM({prompt:A,file_urls:d.photos||[],response_json_schema:{type:"object",properties:{proposed:{type:"object",properties:{shape:{type:"string"},bowlStyle:{type:"string"},shankShape:{type:"string"},bend:{type:"string"},sizeClass:{type:"string"}}},confidence:{type:"object",properties:{shape:{type:"string"},bowlStyle:{type:"string"},shankShape:{type:"string"},bend:{type:"string"},sizeClass:{type:"string"}}},reasons:{type:"object",additionalProperties:{type:"array",items:{type:"string"}}},alternatives:{type:"object",additionalProperties:{type:"array",items:{type:"string"}}},warnings:{type:"array",items:{type:"string"}},photos_analyzed:{type:"integer"},dimensions_used:{type:"boolean"}}}}),L=[];["shape","bowlStyle","shankShape","bend","sizeClass"].forEach(q=>{var Y,Z,X,re;const U=(Y=P==null?void 0:P.proposed)==null?void 0:Y[q],D=(Z=P==null?void 0:P.confidence)==null?void 0:Z[q],M=((X=P==null?void 0:P.reasons)==null?void 0:X[q])||[],G=((re=P==null?void 0:P.alternatives)==null?void 0:re[q])||[];U&&U!=="Unknown"&&L.push({field:q,current_value:d[q]||"Unknown",suggested_value:U,confidence:D||"Low",reasoning:M.join(" • "),alternatives:G})});const R={suggestions:L,photos_analyzed:(P==null?void 0:P.photos_analyzed)||0,dimensions_used:(P==null?void 0:P.dimensions_used)||!1,warnings:(P==null?void 0:P.warnings)||[]};u({...R,timestamp:new Date().toISOString(),pipeId:d.id,applied:{}})}catch(A){console.error("Analysis error:",A),Ve.error("Failed to analyze pipe geometry")}finally{l(!1)}},m=async(N,j)=>{if(!(!d||!c))try{const S={[N]:j};await xr("Pipe",d.id,S,n==null?void 0:n.email),u(A=>({...A,applied:{...A.applied,[N]:!0}})),Ve.success(`Updated ${N}`),r==null||r()}catch(S){console.error("Apply error:",S),Ve.error(`Failed to update ${N}`)}},g=async()=>{var N;if(!(!d||!c))try{const j={};if((N=c.suggestions)==null||N.forEach(S=>{S.confidence==="High"&&!c.applied[S.field]&&(j[S.field]=S.suggested_value)}),Object.keys(j).length===0){Ve.info("No high-confidence suggestions to apply");return}await xr("Pipe",d.id,j,n==null?void 0:n.email),u(S=>{const A={...S.applied};return Object.keys(j).forEach(P=>{A[P]=!0}),{...S,applied:A}}),Ve.success(`Applied ${Object.keys(j).length} updates`),r==null||r()}catch(j){console.error("Apply all error:",j),Ve.error("Failed to apply updates")}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:"Select Pipe to Analyze"})}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs(pn,{value:s,onValueChange:a,children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:"Choose a pipe..."})}),i.jsx(fn,{children:e.map(N=>i.jsxs(ot,{value:String(N.id),children:[N.name," ",N.maker?`(${N.maker})`:""]},N.id))})]}),d&&i.jsx("div",{className:"text-sm text-[#e8d5b7]/70 space-y-1",children:i.jsxs("p",{children:["Photos: ",((x=d.photos)==null?void 0:x.length)||0," | Dimensions:"," ",[d.length_mm&&"Length",d.bowl_height_mm&&"Bowl Height",d.bowl_diameter_mm&&"Chamber Diameter",d.weight_grams&&"Weight"].filter(Boolean).join(", ")||"None"]})}),i.jsx(ye,{onClick:f,disabled:!d||o,className:"w-full bg-gradient-to-r from-teal-600 to-teal-700",children:o?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),"Analyzing..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Nr,{className:"w-4 h-4 mr-2"}),"Analyze Pipe Geometry"]})})]})]}),c&&String(c.pipeId)===String(s)&&i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsxs(Ze,{className:"flex flex-row items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(et,{className:"text-[#e8d5b7]",children:"Analysis Results"}),i.jsxs("p",{className:"text-xs text-[#e8d5b7]/70 mt-1",children:["Analyzed ",c.photos_analyzed||0," photos",c.dimensions_used&&" and dimensions"]})]}),i.jsx(ye,{size:"sm",onClick:g,variant:"outline",children:"Apply All High Confidence"})]}),i.jsxs(Oe,{className:"space-y-3",children:[c.warnings&&c.warnings.length>0&&i.jsx("div",{className:"border border-yellow-500/30 bg-yellow-500/10 rounded-lg p-3 mb-3",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(vn,{className:"w-4 h-4 text-yellow-500 mt-0.5 flex-shrink-0"}),i.jsx("div",{className:"text-sm text-[#e8d5b7]/80 space-y-1",children:c.warnings.map((N,j)=>i.jsxs("p",{children:["• ",N]},j))})]})}),((v=c.suggestions)==null?void 0:v.length)===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(bh,{className:"w-12 h-12 mx-auto mb-3 text-[#e8d5b7]/50"}),i.jsx("p",{className:"text-[#e8d5b7]/70",children:((y=c.warnings)==null?void 0:y.length)>0?"Unable to suggest changes due to missing data.":"All geometry fields appear correctly set or insufficient data to suggest changes."})]}),(b=c.suggestions)==null?void 0:b.map((N,j)=>i.jsxs("div",{className:"border border-white/10 rounded-lg p-4 space-y-2 bg-[#1a2c42]/30",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold text-[#e8d5b7] capitalize",children:N.field}),i.jsx(Ge,{variant:ade[N.confidence],children:N.confidence})]}),c.applied[N.field]?i.jsxs(Ge,{variant:"success",children:[i.jsx(Nr,{className:"w-3 h-3 mr-1"}),"Applied"]}):i.jsx(ye,{size:"sm",variant:"outline",onClick:()=>m(N.field,N.suggested_value),children:"Apply"})]}),i.jsxs("div",{className:"text-sm space-y-1",children:[N.current_value&&i.jsxs("p",{className:"text-[#e8d5b7]/60",children:["Current: ",i.jsx("span",{className:"text-[#e8d5b7]/80",children:N.current_value})]}),i.jsxs("p",{className:"text-[#e8d5b7]/80",children:["Suggested: ",i.jsx("span",{className:"font-medium text-teal-400",children:N.suggested_value})]}),N.reasoning&&i.jsx("p",{className:"text-xs text-[#e8d5b7]/60 italic",children:N.reasoning})]})]},j))]})]})]})}var j2="Switch",[lde]=Vi(j2),[cde,ude]=lde(j2),yU=C.forwardRef((e,n)=>{const{__scopeSwitch:r,name:s,checked:a,defaultChecked:o,required:l,disabled:c,value:u="on",onCheckedChange:d,form:f,...m}=e,[g,x]=C.useState(null),v=un(n,S=>x(S)),y=C.useRef(!1),b=g?f||!!g.closest("form"):!0,[N,j]=qo({prop:a,defaultProp:o??!1,onChange:d,caller:j2});return i.jsxs(cde,{scope:r,checked:N,disabled:c,children:[i.jsx(At.button,{type:"button",role:"switch","aria-checked":N,"aria-required":l,"data-state":NU(N),"data-disabled":c?"":void 0,disabled:c,value:u,...m,ref:v,onClick:Ft(e.onClick,S=>{j(A=>!A),b&&(y.current=S.isPropagationStopped(),y.current||S.stopPropagation())})}),b&&i.jsx(jU,{control:g,bubbles:!y.current,name:s,value:u,checked:N,required:l,disabled:c,form:f,style:{transform:"translateX(-100%)"}})]})});yU.displayName=j2;var bU="SwitchThumb",wU=C.forwardRef((e,n)=>{const{__scopeSwitch:r,...s}=e,a=ude(bU,r);return i.jsx(At.span,{"data-state":NU(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:n})});wU.displayName=bU;var dde="SwitchBubbleInput",jU=C.forwardRef(({__scopeSwitch:e,control:n,checked:r,bubbles:s=!0,...a},o)=>{const l=C.useRef(null),c=un(l,o),u=g2(r),d=f2(n);return C.useEffect(()=>{const f=l.current;if(!f)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==r&&x){const v=new Event("click",{bubbles:s});x.call(f,r),f.dispatchEvent(v)}},[u,r,s]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:c,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});jU.displayName=dde;function NU(e){return e?"checked":"unchecked"}var _U=yU,hde=wU;const ua=C.forwardRef(({className:e,...n},r)=>i.jsx(_U,{className:ut("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-[#D1A75D] data-[state=unchecked]:bg-stone-300",e),...n,ref:r,children:i.jsx(hde,{className:ut("pointer-events-none block h-4 w-4 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ua.displayName=_U.displayName;var fde="Label",SU=C.forwardRef((e,n)=>i.jsx(At.label,{...e,ref:n,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));SU.displayName=fde;var CU=SU;const mde=Gg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tt=C.forwardRef(({className:e,...n},r)=>i.jsx(CU,{ref:r,className:ut(mde(),e),...n}));tt.displayName=CU.displayName;const pde=e=>e==null||e==="",gde=e=>typeof e=="string"&&e.trim().toLowerCase()==="unknown",KN=e=>pde(e)||gde(e),UL=e=>new Promise(n=>setTimeout(n,e));async function xde(e){const n=[];let r=0;const s=100;for(;;){const a=await Ce.entities.Pipe.filter({created_by:e},"-updated_date",s,r);if(!a||a.length===0||(n.push(...a),a.length<s))break;r+=s}return n}function vde({user:e,onComplete:n}){const[r,s]=C.useState(!1),[a,o]=C.useState(!1),[l,c]=C.useState(null),[u,d]=C.useState(null),f=async()=>{s(!0),c({current:0,total:0,currentPipe:""}),d(null);try{const m=await xde(e==null?void 0:e.email);if(m.length===0){Ve.info("No pipes in collection"),s(!1);return}const g=["shape","bowlStyle","shankShape","bend","sizeClass"],x=m.filter(N=>g.some(j=>KN(N[j])));if(x.length===0){d({total:m.length,eligible:0,updated:0,skipped:m.length,failed:0,details:[]}),s(!1),Ve.info("All pipes already have complete geometry data");return}c({current:0,total:x.length,currentPipe:""});const v=[];let y=0,b=0;for(let N=0;N<x.length;N++){const j=x[N];c({current:N+1,total:x.length,currentPipe:j.name});try{const S=(j.photos||[]).length>0,A=j.length_mm||j.bowl_height_mm||j.bowl_width_mm||j.bowl_diameter_mm||j.weight_grams;if(!S&&!A){v.push({pipeId:j.id,pipeName:j.name,status:"skipped",message:"No photos or dimensions available"});continue}const P=`Analyze this pipe and propose geometry classifications for ONLY the missing/unknown fields.

**Pipe:** ${j.name} ${j.maker?`(${j.maker})`:""}
**Dimensions:** ${[j.length_mm&&`Length ${j.length_mm}mm`,j.bowl_height_mm&&`Bowl Height ${j.bowl_height_mm}mm`,j.bowl_width_mm&&`Bowl Width ${j.bowl_width_mm}mm`,j.bowl_diameter_mm&&`Chamber Ø ${j.bowl_diameter_mm}mm`,j.weight_grams&&`Weight ${j.weight_grams}g`].filter(Boolean).join(", ")||"None"}

**Current Geometry:**
${g.map(R=>`- ${R}: ${j[R]||"Unknown"} ${KN(j[R])?"← NEEDS UPDATE":""}`).join(`
`)}

Only propose values for fields marked "NEEDS UPDATE". Use strict enums. Return minimal confident suggestions.`,L=await Ce.integrations.Core.InvokeLLM({prompt:P,file_urls:j.photos||[],response_json_schema:{type:"object",properties:{proposed:{type:"object",properties:{shape:{type:"string"},bowlStyle:{type:"string"},shankShape:{type:"string"},bend:{type:"string"},sizeClass:{type:"string"}}},confidence:{type:"object",properties:{shape:{type:"string"},bowlStyle:{type:"string"},shankShape:{type:"string"},bend:{type:"string"},sizeClass:{type:"string"}}}}}}),O={};if(g.forEach(R=>{var M,G;const q=j[R],U=(M=L==null?void 0:L.proposed)==null?void 0:M[R],D=(G=L==null?void 0:L.confidence)==null?void 0:G[R];KN(q)&&U&&U!=="Unknown"&&(D==="High"||D==="Medium")&&(O[R]=U)}),Object.keys(O).length===0)v.push({pipeId:j.id,pipeName:j.name,status:"skipped",message:"No confident suggestions available"});else if(a)v.push({pipeId:j.id,pipeName:j.name,status:"preview",fieldsChanged:Object.keys(O),updates:O});else{let R=0,q=!1;for(;R<3&&!q;)try{await xr("Pipe",j.id,O,e==null?void 0:e.email),q=!0,y++,v.push({pipeId:j.id,pipeName:j.name,status:"updated",fieldsChanged:Object.keys(O),updates:O})}catch(U){if(R++,R<3)await UL(R===1?500:1500);else throw U}}await UL(Math.random()*500+300)}catch(S){console.error(`Failed to process pipe ${j.id}:`,S),b++,v.push({pipeId:j.id,pipeName:j.name,status:"failed",errorMessage:S.message||"Unknown error"})}}d({total:m.length,eligible:x.length,updated:y,skipped:x.length-y-b,failed:b,details:v}),!a&&y>0?(Ve.success(`Updated ${y} pipe(s)`),n==null||n()):a&&Ve.info(`Preview: ${v.filter(N=>N.status==="preview").length} pipe(s) would be updated`)}catch(m){console.error("Batch processing error:",m),Ve.error("Batch processing failed"),d({total:0,eligible:0,updated:0,skipped:0,failed:1,details:[{status:"failed",errorMessage:m.message}]})}finally{s(!1),c(null)}};return i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:"Batch Process All Pipes"})}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-[#e8d5b7]/80",children:'Automatically analyze and update geometry classifications for all pipes with missing or "Unknown" fields.'}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ua,{id:"dry-run",checked:a,onCheckedChange:o,disabled:r}),i.jsx(tt,{htmlFor:"dry-run",className:"text-sm text-[#e8d5b7]/80 cursor-pointer",children:"Preview changes only (dry run)"})]}),i.jsx(ye,{onClick:f,disabled:r,className:"w-full bg-gradient-to-r from-purple-600 to-purple-700",children:r?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):i.jsx(i.Fragment,{children:"Process All Pipes"})}),l&&i.jsxs("div",{className:"border border-[#e8d5b7]/20 rounded-lg p-4 bg-[#1a2c42]/50",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-sm font-semibold text-[#e8d5b7]",children:["Processing: ",l.current," / ",l.total]}),i.jsx(Cn,{className:"w-4 h-4 animate-spin text-purple-400"})]}),i.jsxs("p",{className:"text-xs text-[#e8d5b7]/70",children:["Current: ",l.currentPipe]})]}),u&&i.jsxs("div",{className:"border border-[#e8d5b7]/20 rounded-lg p-4 bg-[#1a2c42]/50 space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-[#e8d5b7]/70",children:"Total Pipes:"}),i.jsx("span",{className:"ml-2 font-semibold text-[#e8d5b7]",children:u.total})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-[#e8d5b7]/70",children:"Eligible:"}),i.jsx("span",{className:"ml-2 font-semibold text-[#e8d5b7]",children:u.eligible})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-[#e8d5b7]/70",children:"Updated:"}),i.jsx("span",{className:"ml-2 font-semibold text-green-400",children:u.updated})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-[#e8d5b7]/70",children:"Skipped:"}),i.jsx("span",{className:"ml-2 font-semibold text-[#e8d5b7]/60",children:u.skipped})]}),u.failed>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-[#e8d5b7]/70",children:"Failed:"}),i.jsx("span",{className:"ml-2 font-semibold text-red-400",children:u.failed})]})]}),u.details&&u.details.length>0&&i.jsxs("div",{className:"border-t border-[#e8d5b7]/10 pt-3 max-h-96 overflow-y-auto space-y-2",children:[i.jsx("h4",{className:"text-sm font-semibold text-[#e8d5b7] mb-2",children:"Details:"}),u.details.map((m,g)=>i.jsxs("div",{className:"text-xs border border-[#e8d5b7]/10 rounded p-2 bg-[#0f1a28]/30",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.status==="updated"&&i.jsx(Nr,{className:"w-3 h-3 text-green-400"}),m.status==="preview"&&i.jsx(bh,{className:"w-3 h-3 text-blue-400"}),m.status==="skipped"&&i.jsx(vn,{className:"w-3 h-3 text-[#e8d5b7]/50"}),m.status==="failed"&&i.jsx(ha,{className:"w-3 h-3 text-red-400"}),i.jsx("span",{className:"font-semibold text-[#e8d5b7]",children:m.pipeName||"Unknown pipe"}),i.jsx(Ge,{variant:m.status==="updated"||m.status==="preview"?"success":m.status==="failed"?"destructive":"secondary",className:"ml-auto",children:m.status})]}),m.fieldsChanged&&i.jsxs("p",{className:"text-[#e8d5b7]/70 mt-1",children:["Fields: ",m.fieldsChanged.join(", ")]}),m.updates&&i.jsx("div",{className:"mt-1 text-[#e8d5b7]/60",children:Object.entries(m.updates).map(([x,v])=>i.jsxs("div",{children:["• ",x,": ",i.jsx("span",{className:"text-teal-400",children:v})]},x))}),m.message&&i.jsx("p",{className:"text-[#e8d5b7]/60 mt-1",children:m.message}),m.errorMessage&&i.jsxs("p",{className:"text-red-400 mt-1",children:["Error: ",m.errorMessage]})]},g))]})]})]})]})}function yde(e,n){return C.useReducer((r,s)=>n[r][s]??r,e)}var uo=e=>{const{present:n,children:r}=e,s=bde(n),a=typeof r=="function"?r({present:s.isPresent}):C.Children.only(r),o=un(s.ref,wde(a));return typeof r=="function"||s.isPresent?C.cloneElement(a,{ref:o}):null};uo.displayName="Presence";function bde(e){const[n,r]=C.useState(),s=C.useRef(null),a=C.useRef(e),o=C.useRef("none"),l=e?"mounted":"unmounted",[c,u]=yde(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const d=bb(s.current);o.current=c==="mounted"?d:"none"},[c]),xs(()=>{const d=s.current,f=a.current;if(f!==e){const g=o.current,x=bb(d);e?u("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(f&&g!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),xs(()=>{if(n){let d;const f=n.ownerDocument.defaultView??window,m=x=>{const y=bb(s.current).includes(CSS.escape(x.animationName));if(x.target===n&&y&&(u("ANIMATION_END"),!a.current)){const b=n.style.animationFillMode;n.style.animationFillMode="forwards",d=f.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=b)})}},g=x=>{x.target===n&&(o.current=bb(s.current))};return n.addEventListener("animationstart",g),n.addEventListener("animationcancel",m),n.addEventListener("animationend",m),()=>{f.clearTimeout(d),n.removeEventListener("animationstart",g),n.removeEventListener("animationcancel",m),n.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[n,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:C.useCallback(d=>{s.current=d?getComputedStyle(d):null,r(d)},[])}}function bb(e){return(e==null?void 0:e.animationName)||"none"}function wde(e){var s,a;let n=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?e.ref:(n=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var N2="Checkbox",[jde]=Vi(N2),[Nde,mE]=jde(N2);function _de(e){const{__scopeCheckbox:n,checked:r,children:s,defaultChecked:a,disabled:o,form:l,name:c,onCheckedChange:u,required:d,value:f="on",internal_do_not_use_render:m}=e,[g,x]=qo({prop:r,defaultProp:a??!1,onChange:u,caller:N2}),[v,y]=C.useState(null),[b,N]=C.useState(null),j=C.useRef(!1),S=v?!!l||!!v.closest("form"):!0,A={checked:g,disabled:o,setChecked:x,control:v,setControl:y,name:c,form:l,value:f,hasConsumerStoppedPropagationRef:j,required:d,defaultChecked:ph(a)?!1:a,isFormControl:S,bubbleInput:b,setBubbleInput:N};return i.jsx(Nde,{scope:n,...A,children:Sde(m)?m(A):s})}var PU="CheckboxTrigger",AU=C.forwardRef(({__scopeCheckbox:e,onKeyDown:n,onClick:r,...s},a)=>{const{control:o,value:l,disabled:c,checked:u,required:d,setControl:f,setChecked:m,hasConsumerStoppedPropagationRef:g,isFormControl:x,bubbleInput:v}=mE(PU,e),y=un(a,f),b=C.useRef(u);return C.useEffect(()=>{const N=o==null?void 0:o.form;if(N){const j=()=>m(b.current);return N.addEventListener("reset",j),()=>N.removeEventListener("reset",j)}},[o,m]),i.jsx(At.button,{type:"button",role:"checkbox","aria-checked":ph(u)?"mixed":u,"aria-required":d,"data-state":LU(u),"data-disabled":c?"":void 0,disabled:c,value:l,...s,ref:y,onKeyDown:Ft(n,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:Ft(r,N=>{m(j=>ph(j)?!0:!j),v&&x&&(g.current=N.isPropagationStopped(),g.current||N.stopPropagation())})})});AU.displayName=PU;var pE=C.forwardRef((e,n)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:o,required:l,disabled:c,value:u,onCheckedChange:d,form:f,...m}=e;return i.jsx(_de,{__scopeCheckbox:r,checked:a,defaultChecked:o,disabled:c,required:l,onCheckedChange:d,name:s,form:f,value:u,internal_do_not_use_render:({isFormControl:g})=>i.jsxs(i.Fragment,{children:[i.jsx(AU,{...m,ref:n,__scopeCheckbox:r}),g&&i.jsx(OU,{__scopeCheckbox:r})]})})});pE.displayName=N2;var kU="CheckboxIndicator",EU=C.forwardRef((e,n)=>{const{__scopeCheckbox:r,forceMount:s,...a}=e,o=mE(kU,r);return i.jsx(uo,{present:s||ph(o.checked)||o.checked===!0,children:i.jsx(At.span,{"data-state":LU(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:n,style:{pointerEvents:"none",...e.style}})})});EU.displayName=kU;var TU="CheckboxBubbleInput",OU=C.forwardRef(({__scopeCheckbox:e,...n},r)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:l,required:c,disabled:u,name:d,value:f,form:m,bubbleInput:g,setBubbleInput:x}=mE(TU,e),v=un(r,x),y=g2(o),b=f2(s);C.useEffect(()=>{const j=g;if(!j)return;const S=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(S,"checked").set,L=!a.current;if(y!==o&&P){const O=new Event("click",{bubbles:L});j.indeterminate=ph(o),P.call(j,ph(o)?!1:o),j.dispatchEvent(O)}},[g,y,o,a]);const N=C.useRef(ph(o)?!1:o);return i.jsx(At.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??N.current,required:c,disabled:u,name:d,value:f,form:m,...n,tabIndex:-1,ref:v,style:{...n.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});OU.displayName=TU;function Sde(e){return typeof e=="function"}function ph(e){return e==="indeterminate"}function LU(e){return ph(e)?"indeterminate":e?"checked":"unchecked"}const E1=C.forwardRef(({className:e,...n},r)=>i.jsx(pE,{ref:r,className:ut("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...n,children:i.jsx(EU,{className:ut("flex items-center justify-center text-current"),children:i.jsx(vh,{className:"h-4 w-4"})})}));E1.displayName=pE.displayName;function Cde({blends:e,user:n,onComplete:r}){var j,S;const{subscription:s,hasPro:a}=Kr(),[o,l]=C.useState([]),[c,u]=C.useState(!1),[d,f]=C.useState(null),m=a||tE(s),g=e.filter(A=>!A.ai_estimated_value),x=A=>{l(P=>P.includes(A)?P.filter(L=>L!==A):[...P,A])},v=()=>{l(g.map(A=>A.id))},y=()=>{l([])},b=async()=>{if(o.length===0){Ve.error("Please select at least one blend");return}u(!0),f(null);try{const P=(await Ce.functions.invoke("estimateTobaccoValues",{blend_ids:o})).data;f(P),Ve.success(`Estimated ${P.processed} blend(s)`),r&&r()}catch(A){console.error("Estimation error:",A),Ve.error("Failed to estimate values"),f({success:!1,error:A.message||"Unknown error"})}finally{u(!1)}},N=!m;return i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsxs(et,{className:"flex items-center gap-2 text-[#e8d5b7]",children:[i.jsx(Tu,{className:"w-5 h-5 text-emerald-400"}),"AI Tobacco Valuation",N&&i.jsx(Ge,{className:"bg-amber-100 text-amber-800 border-amber-300 font-semibold ml-auto",children:"Pro"})]})}),i.jsx(Oe,{className:"space-y-4",children:N?i.jsx("p",{className:"text-sm text-[#e8d5b7]/70",children:"Upgrade to Pro to unlock AI-assisted tobacco valuation with market estimates, value ranges, confidence levels, and predictive projections."}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-[#e8d5b7]/80",children:"Automatically estimate market values for your tobacco blends using AI analysis of public marketplace listings."}),g.length===0?i.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 rounded-lg p-4 text-center",children:[i.jsx(Nr,{className:"w-8 h-8 text-emerald-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-[#e8d5b7]/70",children:"All blends have been valued"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex gap-2 mb-3",children:[i.jsxs(ye,{size:"sm",variant:"outline",onClick:v,children:["Select All (",g.length,")"]}),i.jsx(ye,{size:"sm",variant:"outline",onClick:y,children:"Deselect All"})]}),i.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2 border border-[#e8d5b7]/10 rounded-lg p-3 bg-[#1a2c42]/30",children:g.map(A=>i.jsxs("div",{className:"flex items-center gap-3 p-2 rounded hover:bg-white/5 transition-colors",children:[i.jsx(E1,{checked:o.includes(A.id),onCheckedChange:()=>x(A.id)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm text-[#e8d5b7] truncate",children:A.name}),i.jsxs("p",{className:"text-xs text-[#e8d5b7]/50 truncate",children:[A.manufacturer||"Unknown"," • ",A.blend_type||"Unknown"]})]})]},A.id))}),i.jsx(ye,{onClick:b,disabled:o.length===0||c,className:"w-full bg-gradient-to-r from-emerald-600 to-emerald-700",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),"Estimating ",o.length," blend(s)..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Tu,{className:"w-4 h-4 mr-2"}),"Estimate Values (",o.length," selected)"]})})]}),d&&i.jsx("div",{className:"border border-[#e8d5b7]/20 rounded-lg p-4 bg-[#1a2c42]/50 space-y-3",children:d.success?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 mb-2",children:[i.jsx(Nr,{className:"w-5 h-5"}),i.jsxs("p",{className:"font-semibold",children:["Processed: ",d.processed," | Failed: ",d.failed]})]}),((j=d.results)==null?void 0:j.length)>0&&i.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:d.results.map((A,P)=>{var L;return i.jsxs("div",{className:"flex items-center justify-between text-sm bg-[#243548]/50 rounded p-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-[#e8d5b7] truncate",children:A.blend_name}),i.jsxs("p",{className:"text-xs text-[#e8d5b7]/50",children:["Confidence: ",A.confidence]})]}),i.jsxs("p",{className:"text-emerald-400 font-semibold ml-2",children:["$",(L=A.estimated_value)==null?void 0:L.toFixed(2)]})]},P)})}),((S=d.errors)==null?void 0:S.length)>0&&i.jsxs("div",{className:"space-y-1 text-xs text-rose-400",children:[i.jsx("p",{className:"font-semibold",children:"Errors:"}),d.errors.map((A,P)=>i.jsxs("p",{children:["• ",A.blend_id,": ",A.error]},P))]})]}):i.jsxs("div",{className:"flex items-center gap-2 text-rose-400",children:[i.jsx(ha,{className:"w-5 h-5"}),i.jsx("p",{className:"text-sm",children:d.error||"Processing failed"})]})}),i.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(bh,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),i.jsx("p",{className:"text-xs text-[#e8d5b7]/70",children:"AI estimates are based on public marketplace data. Actual values vary by condition, age, and market demand. Not investment advice."})]})})]})})]})}const RU=e=>e==null||e==="",Pde=e=>typeof e=="string"&&e.trim().toLowerCase()==="unknown",VL=e=>RU(e),HL=e=>RU(e)||Pde(e);function DU(){const e=On(),[n,r]=C.useState(!1),[s,a]=C.useState(!1),[o,l]=C.useState(!1),[c,u]=C.useState({status:"idle",selectedPipeId:null,results:null,message:""});C.useEffect(()=>{new URLSearchParams(window.location.search).get("focus")==="geometry"&&setTimeout(()=>{var v;(v=document.getElementById("geometry-section"))==null||v.scrollIntoView({behavior:"smooth",block:"start"})},100)},[]);const{data:d}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me(),staleTime:5e3}),{data:f=[]}=Dt({queryKey:["blends",d==null?void 0:d.email],queryFn:async()=>await Ce.entities.TobaccoBlend.filter({created_by:d==null?void 0:d.email},"-updated_date",500)||[],enabled:!!(d!=null&&d.email)}),{data:m=[]}=Dt({queryKey:["pipes",d==null?void 0:d.email],queryFn:async()=>await Ce.entities.Pipe.filter({created_by:d==null?void 0:d.email},"-updated_date",500)||[],enabled:!!(d!=null&&d.email)}),g=rn({mutationFn:async()=>{if(!(d!=null&&d.email))return;r(!0);const x=(f||[]).filter(Boolean);if(x.length===0){Ve.info("No items to categorize"),r(!1);return}const y=`You are standardizing inventory metadata in a personal collection manager.

Task: Assign the single best category from this list:
${["American","Aromatic","Balkan","Burley","Burley-based","Cavendish","Codger Blend","Dark Fired Kentucky","English","English Aromatic","English Balkan","Full English/Oriental","Kentucky","Lakeland","Latakia Blend","Navy Flake","Oriental/Turkish","Other","Perique","Shag","Virginia","Virginia/Burley","Virginia/Oriental","Virginia/Perique"].join(", ")}

IMPORTANT:
- Do NOT provide recommendations, pairings, usage advice, or guidance encouraging consumption.
- Return updates ONLY for items that should change categories.

Items:
${x.map(S=>`- ${S.name} (current: ${S.blend_type||"Unknown"})`).join(`
`)}

Return JSON: { "updates": [ { "name": "...", "new_type": "..." } ] }`,b=await Ce.integrations.Core.InvokeLLM({prompt:y,response_json_schema:{type:"object",properties:{updates:{type:"array",items:{type:"object",properties:{name:{type:"string"},new_type:{type:"string"}},required:["name","new_type"]}}}}}),N=Array.isArray(b==null?void 0:b.updates)?b.updates:[];if(N.length===0){Ve.info("All items appear correctly categorized"),r(!1);return}let j=0;for(const S of N){const A=x.find(L=>String(L.name).trim()===String(S.name).trim());if(!A)continue;const P=S.new_type;!P||String(P).trim()===""||String(P)===String(A.blend_type||"")||(await xr("TobaccoBlend",A.id,{blend_type:P},d==null?void 0:d.email),j++)}e.invalidateQueries({queryKey:["blends",d==null?void 0:d.email]}),Ve.success(j>0?`Updated ${j} item(s)`:"No changes applied"),r(!1)},onError:x=>{console.error(x),r(!1),Ve.error("Failed to standardize categories")}});return i.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-[#e8d5b7]",children:cs?"Inventory Tools":"AI Updates"}),i.jsx("p",{className:"text-sm text-[#e8d5b7]/70 mt-2",children:cs?"Tools for cataloging and standardizing collection metadata for easier searching and reporting.":"Review what's out of date and regenerate with approval. You can undo changes and reclassify blends."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsxs(et,{className:"flex items-center gap-2 text-[#e8d5b7]",children:[i.jsx(BP,{className:"w-5 h-5 text-blue-400"}),"Tobacco Blend Classification"]})}),i.jsxs(Oe,{children:[i.jsx("p",{className:"text-sm text-[#e8d5b7]/80 mb-4",children:"Reclassify your existing tobacco blends using the expanded category system with AI-powered analysis."}),i.jsxs(ye,{size:"sm",disabled:n||f.length===0,onClick:()=>g.mutate(),className:"bg-gradient-to-r from-[#8b3a3a] to-[#6d2e2e]",children:[n?i.jsx(Cn,{className:"w-4 h-4 mr-1 animate-spin"}):i.jsx(BP,{className:"w-4 h-4 mr-1"}),"Reclassify Blends (",f.length," total)"]})]})]}),i.jsx(Cde,{blends:f,user:d,onComplete:()=>{e.invalidateQueries({queryKey:["blends",d==null?void 0:d.email]})}}),i.jsxs("div",{id:"geometry-section",children:[i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsxs(et,{className:"flex items-center gap-2 text-[#e8d5b7]",children:[i.jsx(y1,{className:"w-5 h-5 text-blue-400"}),"Analyze Pipe Geometry"]})}),i.jsx(Oe,{children:i.jsx("p",{className:"text-sm text-[#e8d5b7]/80 mb-4",children:"Analyze uploaded pipe photos and existing measurements to determine shape, bowl style, shank shape, bend, and size class."})})]}),i.jsx(ode,{pipes:m,user:d,onComplete:()=>{e.invalidateQueries({queryKey:["pipes",d==null?void 0:d.email]})}})]}),i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsxs(et,{className:"flex items-center gap-2 text-[#e8d5b7]/70 text-base",children:[i.jsx(bh,{className:"w-4 h-4 text-[#e8d5b7]/50"}),"Find Verified Manufacturer Specs (optional)"]})}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-[#e8d5b7]/60",children:"Only works for some production pipes. Searches manufacturer catalogs and databases."}),i.jsx(ye,{size:"sm",variant:"secondary",onClick:()=>l(!o),children:o?"Hide Lookup":"Show Verified Specs Lookup"}),o&&i.jsxs("div",{className:"space-y-3 pt-2 border-t border-[#e8d5b7]/10",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 bg-[#1a2c42] border border-[#e8d5b7]/20 rounded-lg px-3 py-2 text-[#e8d5b7] text-sm",value:c.selectedPipeId||"",onChange:x=>u({...c,selectedPipeId:x.target.value}),disabled:c.status==="running",children:[i.jsx("option",{value:"",children:"Select a pipe..."}),m.map(x=>i.jsxs("option",{value:String(x.id),children:[x.name," ",x.maker?`(${x.maker})`:""]},x.id))]}),i.jsx(ye,{size:"sm",variant:"secondary",onClick:async()=>{if(!c.selectedPipeId){Ve.error("Please select a pipe first");return}const x=m.find(v=>String(v.id)===String(c.selectedPipeId));if(x){u({...c,status:"running",results:null,message:""});try{const v=(x.photos||[]).length,y=["length_mm","weight_grams","bowl_height_mm","bowl_width_mm","bowl_diameter_mm","bowl_depth_mm"],b=y.filter(P=>!VL(x[P])),N=["shape","bowlStyle","shankShape","bend","sizeClass"],j=N.filter(P=>!HL(x[P])),S=`You are searching verified manufacturer specifications and pipe databases to find measurements for a tobacco pipe.

**Pipe Identity:**
- Name: ${x.name||"Unknown"}
- Maker/Brand: ${x.maker||"Unknown"}
- Country: ${x.country_of_origin||"Unknown"}
- Shape: ${x.shape||"Unknown"}
- Year Made: ${x.year_made||"Unknown"}
- Stamping: ${x.stamping||"None"}

**Task:**
Search verified sources (manufacturer catalogs, pipe databases, estate listings with verified specs) to find reliable measurements and geometry classifications for this specific pipe model.

**Fields to Look Up (only if missing):**

Measurements (update only if currently missing):
${y.map(P=>`- ${P}: ${VL(x[P])?"MISSING - search for this":`Current: ${x[P]} - SKIP`}`).join(`
`)}

Geometry (update only if missing or "Unknown"):
${N.map(P=>`- ${P}: ${HL(x[P])?"MISSING/UNKNOWN - search for this":`Current: ${x[P]} - SKIP`}`).join(`
`)}

**Constraints:**
- Only return data from VERIFIED sources (manufacturer specs, authorized dealers, established pipe databases)
- Do NOT estimate or guess
- Use exact enum values for geometry fields

**Output Format:**
Return JSON with:
- found: true/false
- updates: { field: value, ... } (only fields with verified data)
- sources: [domain names of sources used]
- message: explanation of what was/wasn't found`,A=await Ce.integrations.Core.InvokeLLM({prompt:S,add_context_from_internet:!0,response_json_schema:{type:"object",properties:{found:{type:"boolean"},updates:{type:"object",additionalProperties:!0},sources:{type:"array",items:{type:"string"}},message:{type:"string"}}}});if(!A.found||!A.updates||Object.keys(A.updates).length===0){u({...c,status:"none_found",results:{pipe:x,photosCount:v,existingMeasurements:b,existingGeometry:j,sources:A.sources||[]},message:"No published manufacturer specs found for this pipe. This is common for artisan/estate pipes."});return}await xr("Pipe",x.id,A.updates,d==null?void 0:d.email),e.invalidateQueries({queryKey:["pipes",d==null?void 0:d.email]}),Ve.success(`Updated ${Object.keys(A.updates).length} field(s)`),u({...c,status:"completed",results:{pipe:x,photosCount:v,existingMeasurements:b,existingGeometry:j,updates:A.updates,sources:A.sources||[]},message:A.message||`Successfully updated ${Object.keys(A.updates).length} fields`})}catch(v){console.error("Measurement lookup error:",v),u({...c,status:"error",message:v.message||"Failed to search for verified measurements"}),Ve.error("Lookup failed")}}},disabled:!c.selectedPipeId||c.status==="running",children:c.status==="running"?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-1 animate-spin"}),"Searching..."]}):i.jsx(i.Fragment,{children:"Find Specs"})})]}),c.status!=="idle"&&c.results&&i.jsxs("div",{className:"border border-[#e8d5b7]/20 rounded-lg p-4 bg-[#1a2c42]/50 space-y-3",children:[c.status==="completed"&&c.results.updates&&i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-green-400 mb-2",children:["✓ Updated ",Object.keys(c.results.updates).length," field(s)"]}),i.jsx("div",{className:"text-xs text-[#e8d5b7]/80 space-y-1",children:Object.entries(c.results.updates).map(([x,v])=>i.jsxs("p",{children:["• ",x,": ",i.jsx("strong",{children:v})]},x))})]}),c.status==="none_found"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-start gap-2 text-sm text-[#e8d5b7]/70",children:[i.jsx(bh,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-blue-400"}),i.jsx("p",{children:c.message})]}),i.jsx("div",{className:"flex flex-col sm:flex-row gap-2 pt-2 border-t border-[#e8d5b7]/10",children:i.jsx(ye,{size:"sm",variant:"outline",onClick:()=>{const x=c.results.pipe;x&&(window.location.href=`/PipeDetail?id=${x.id}`)},children:"Enter Measurements Manually"})})]}),c.status==="error"&&i.jsxs("p",{className:"text-sm text-red-400",children:["Error: ",c.message]})]})]})]})]}),i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsxs(et,{className:"flex items-center gap-2 text-[#e8d5b7]",children:[i.jsx(v1,{className:"w-5 h-5 text-purple-400"}),"Batch Process All Pipes"]})}),i.jsxs(Oe,{children:[i.jsx("p",{className:"text-sm text-[#e8d5b7]/80 mb-4",children:'Automatically analyze and update geometry for ALL pipes with missing or "Unknown" fields. Processes your entire collection in one batch.'}),i.jsx(ye,{size:"sm",className:"bg-gradient-to-r from-purple-600 to-purple-700",onClick:()=>a(!s),disabled:m.length===0,children:s?i.jsx(i.Fragment,{children:"Hide Batch Processor"}):i.jsxs(i.Fragment,{children:[i.jsx(v1,{className:"w-4 h-4 mr-1"}),"Batch Process (",m.length," total)"]})})]})]}),s&&m.length>0&&i.jsx(vde,{user:d,onComplete:()=>{e.invalidateQueries({queryKey:["pipes",d==null?void 0:d.email]})}})]})]})}var GN="rovingFocusGroup.onEntryFocus",Ade={bubbles:!1,cancelable:!0},iy="RovingFocusGroup",[kA,IU,kde]=a2(iy),[Ede,MU]=Vi(iy,[kde]),[Tde,Ode]=Ede(iy),FU=C.forwardRef((e,n)=>i.jsx(kA.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(kA.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Lde,{...e,ref:n})})}));FU.displayName=iy;var Lde=C.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...m}=e,g=C.useRef(null),x=un(n,g),v=r0(o),[y,b]=qo({prop:l,defaultProp:c??null,onChange:u,caller:iy}),[N,j]=C.useState(!1),S=Fi(d),A=IU(r),P=C.useRef(!1),[L,O]=C.useState(0);return C.useEffect(()=>{const R=g.current;if(R)return R.addEventListener(GN,S),()=>R.removeEventListener(GN,S)},[S]),i.jsx(Tde,{scope:r,orientation:s,dir:v,loop:a,currentTabStopId:y,onItemFocus:C.useCallback(R=>b(R),[b]),onItemShiftTab:C.useCallback(()=>j(!0),[]),onFocusableItemAdd:C.useCallback(()=>O(R=>R+1),[]),onFocusableItemRemove:C.useCallback(()=>O(R=>R-1),[]),children:i.jsx(At.div,{tabIndex:N||L===0?-1:0,"data-orientation":s,...m,ref:x,style:{outline:"none",...e.style},onMouseDown:Ft(e.onMouseDown,()=>{P.current=!0}),onFocus:Ft(e.onFocus,R=>{const q=!P.current;if(R.target===R.currentTarget&&q&&!N){const U=new CustomEvent(GN,Ade);if(R.currentTarget.dispatchEvent(U),!U.defaultPrevented){const D=A().filter(X=>X.focusable),M=D.find(X=>X.active),G=D.find(X=>X.id===y),Z=[M,G,...D].filter(Boolean).map(X=>X.ref.current);qU(Z,f)}}P.current=!1}),onBlur:Ft(e.onBlur,()=>j(!1))})})}),BU="RovingFocusGroupItem",$U=C.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:o,children:l,...c}=e,u=mi(),d=o||u,f=Ode(BU,r),m=f.currentTabStopId===d,g=IU(r),{onFocusableItemAdd:x,onFocusableItemRemove:v,currentTabStopId:y}=f;return C.useEffect(()=>{if(s)return x(),()=>v()},[s,x,v]),i.jsx(kA.ItemSlot,{scope:r,id:d,focusable:s,active:a,children:i.jsx(At.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...c,ref:n,onMouseDown:Ft(e.onMouseDown,b=>{s?f.onItemFocus(d):b.preventDefault()}),onFocus:Ft(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:Ft(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){f.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const N=Ide(b,f.orientation,f.dir);if(N!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let S=g().filter(A=>A.focusable).map(A=>A.ref.current);if(N==="last")S.reverse();else if(N==="prev"||N==="next"){N==="prev"&&S.reverse();const A=S.indexOf(b.currentTarget);S=f.loop?Mde(S,A+1):S.slice(A+1)}setTimeout(()=>qU(S))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:y!=null}):l})})});$U.displayName=BU;var Rde={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Dde(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Ide(e,n,r){const s=Dde(e.key,r);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Rde[s]}function qU(e,n=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:n}),document.activeElement!==r))return}function Mde(e,n){return e.map((r,s)=>e[(n+s)%e.length])}var Fde=FU,Bde=$U,_2="Tabs",[$de]=Vi(_2,[MU]),zU=MU(),[qde,gE]=$de(_2),UU=C.forwardRef((e,n)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:o,orientation:l="horizontal",dir:c,activationMode:u="automatic",...d}=e,f=r0(c),[m,g]=qo({prop:s,onChange:a,defaultProp:o??"",caller:_2});return i.jsx(qde,{scope:r,baseId:mi(),value:m,onValueChange:g,orientation:l,dir:f,activationMode:u,children:i.jsx(At.div,{dir:f,"data-orientation":l,...d,ref:n})})});UU.displayName=_2;var VU="TabsList",HU=C.forwardRef((e,n)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,o=gE(VU,r),l=zU(r);return i.jsx(Fde,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:s,children:i.jsx(At.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:n})})});HU.displayName=VU;var WU="TabsTrigger",KU=C.forwardRef((e,n)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...o}=e,l=gE(WU,r),c=zU(r),u=QU(l.baseId,s),d=XU(l.baseId,s),f=s===l.value;return i.jsx(Bde,{asChild:!0,...c,focusable:!a,active:f,children:i.jsx(At.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...o,ref:n,onMouseDown:Ft(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?l.onValueChange(s):m.preventDefault()}),onKeyDown:Ft(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(s)}),onFocus:Ft(e.onFocus,()=>{const m=l.activationMode!=="manual";!f&&!a&&m&&l.onValueChange(s)})})})});KU.displayName=WU;var GU="TabsContent",YU=C.forwardRef((e,n)=>{const{__scopeTabs:r,value:s,forceMount:a,children:o,...l}=e,c=gE(GU,r),u=QU(c.baseId,s),d=XU(c.baseId,s),f=s===c.value,m=C.useRef(f);return C.useEffect(()=>{const g=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(g)},[]),i.jsx(uo,{present:a||f,children:({present:g})=>i.jsx(At.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!g,id:d,tabIndex:0,...l,ref:n,style:{...e.style,animationDuration:m.current?"0s":void 0},children:g&&o})})});YU.displayName=GU;function QU(e,n){return`${e}-trigger-${n}`}function XU(e,n){return`${e}-content-${n}`}var zde=UU,Ude=HU,Vde=KU,Hde=YU;const Ec=zde,Tc=C.forwardRef(function({className:n,...r},s){return i.jsx(Ude,{ref:s,className:ut("inline-flex h-10 items-center justify-center rounded-xl gap-1 p-1 border border-white/10 bg-[#1a2c42]",n),...r})}),En=C.forwardRef(function({className:n,...r},s){return i.jsx(Vde,{ref:s,className:ut("inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-sm font-medium transition-colors","data-[state=active]:bg-[#A35C5C] data-[state=active]:text-white","data-[state=inactive]:text-[#E0D8C8]/80","hover:bg-white/5","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#A35C5C]/60 focus-visible:ring-offset-0",n),...r})}),Tn=C.forwardRef(function({className:n,...r},s){return i.jsx(Hde,{ref:s,className:ut("mt-4 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#A35C5C]/60 focus-visible:ring-offset-0",n),...r})});function Wde(){const{isAdmin:e}=Kr(),n=On(),[r,s]=C.useState(null),{data:a=[],isLoading:o}=Dt({queryKey:["admin-reports"],queryFn:()=>Ce.entities.AbuseReport.list("-created_date",100),enabled:e}),l=rn({mutationFn:async({reportId:y,status:b})=>{await Ce.entities.AbuseReport.update(y,{status:b})},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reports"]}),Ve.success("Report updated"),s(null)},onError:()=>Ve.error("Failed to update report")}),c=rn({mutationFn:async({commentId:y})=>{await Ce.entities.Comment.update(y,{is_hidden:!0})},onSuccess:()=>{n.invalidateQueries({queryKey:["comments"]}),Ve.success("Content hidden")},onError:()=>Ve.error("Failed to hide content")}),u=rn({mutationFn:async({reportId:y,reportedEmail:b})=>{const N=await Ce.entities.UserProfile.filter({user_email:b});N[0]&&await Ce.entities.UserProfile.update(N[0].id,{blocked_users:[...N[0].blocked_users||[],"SYSTEM_BLOCKED"]}),await Ce.entities.AbuseReport.update(y,{status:"actioned"})},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reports"]}),Ve.success("User blocked"),s(null)},onError:()=>Ve.error("Failed to block user")});if(!e)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A2B3A] via-[#243548] to-[#1A2B3A] p-6 flex items-center justify-center",children:i.jsx(Ee,{className:"max-w-md",children:i.jsxs(Oe,{className:"p-8 text-center",children:[i.jsx(vn,{className:"w-12 h-12 mx-auto mb-4 text-red-500"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),i.jsx("p",{className:"text-stone-500",children:"Only administrators can access this page."})]})})});const d=a.filter(y=>y.status==="pending"),f=a.filter(y=>y.status==="reviewed"),m=a.filter(y=>y.status==="actioned"),g=a.filter(y=>y.status==="dismissed"),x=async(y,b)=>{b==="dismiss"?await l.mutateAsync({reportId:y.id,status:"dismissed"}):b==="hide"&&y.comment_id?(await c.mutateAsync({commentId:y.comment_id}),await l.mutateAsync({reportId:y.id,status:"actioned"})):b==="block"&&y.reported_user_email?await u.mutateAsync({reportId:y.id,reportedEmail:y.reported_user_email}):b==="review"&&await l.mutateAsync({reportId:y.id,status:"reviewed"})},v=({report:y})=>i.jsxs(Ee,{className:"mb-4 border-stone-200 hover:border-stone-300 transition-colors",children:[i.jsx(Ze,{children:i.jsx("div",{className:"flex items-start justify-between",children:i.jsxs("div",{children:[i.jsxs(et,{className:"text-base flex items-center gap-2",children:[i.jsx(Ge,{variant:y.status==="pending"?"destructive":y.status==="actioned"?"default":y.status==="dismissed"?"secondary":"outline",children:y.status}),i.jsx("span",{className:"text-sm text-stone-500",children:y.context_type})]}),i.jsxs("p",{className:"text-xs text-stone-400 mt-1",children:["Reported: ",new Date(y.created_date).toLocaleDateString()]})]})})}),i.jsx(Oe,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-stone-700",children:"Reporter:"}),i.jsx("p",{className:"text-sm text-stone-600",children:y.reporter_email})]}),y.reported_user_email&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-stone-700",children:"Reported User:"}),i.jsx("p",{className:"text-sm text-stone-600",children:y.reported_user_email})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-stone-700",children:"Reason:"}),i.jsx("p",{className:"text-sm text-stone-600",children:y.reason})]}),y.status==="pending"&&i.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t",children:[i.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>x(y,"review"),children:[i.jsx(Yw,{className:"w-4 h-4 mr-1"}),"Review"]}),y.comment_id&&i.jsxs(ye,{size:"sm",variant:"destructive",onClick:()=>x(y,"hide"),children:[i.jsx(x1,{className:"w-4 h-4 mr-1"}),"Hide Content"]}),y.reported_user_email&&i.jsxs(ye,{size:"sm",variant:"destructive",onClick:()=>x(y,"block"),children:[i.jsx(ha,{className:"w-4 h-4 mr-1"}),"Block User"]}),i.jsxs(ye,{size:"sm",variant:"secondary",onClick:()=>x(y,"dismiss"),children:[i.jsx(ei,{className:"w-4 h-4 mr-1"}),"Dismiss"]})]}),y.status==="reviewed"&&i.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t",children:[y.comment_id&&i.jsxs(ye,{size:"sm",variant:"destructive",onClick:()=>x(y,"hide"),children:[i.jsx(x1,{className:"w-4 h-4 mr-1"}),"Hide Content"]}),y.reported_user_email&&i.jsxs(ye,{size:"sm",variant:"destructive",onClick:()=>x(y,"block"),children:[i.jsx(ha,{className:"w-4 h-4 mr-1"}),"Block User"]}),i.jsx(ye,{size:"sm",variant:"secondary",onClick:()=>x(y,"dismiss"),children:"Dismiss"})]})]})})]});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A2B3A] via-[#243548] to-[#1A2B3A] p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-[#E0D8C8] mb-2",children:"Content Moderation"}),i.jsx("p",{className:"text-sm sm:text-base text-[#E0D8C8]/70",children:"Review and manage abuse reports"})]}),i.jsxs(Ec,{defaultValue:"pending",className:"w-full",children:[i.jsxs(Tc,{className:"grid w-full grid-cols-2 sm:grid-cols-4 mb-6",children:[i.jsxs(En,{value:"pending",className:"text-xs sm:text-sm",children:["Pending (",d.length,")"]}),i.jsxs(En,{value:"reviewed",className:"text-xs sm:text-sm",children:["Reviewed (",f.length,")"]}),i.jsxs(En,{value:"actioned",className:"text-xs sm:text-sm",children:["Actioned (",m.length,")"]}),i.jsxs(En,{value:"dismissed",className:"text-xs sm:text-sm",children:["Dismissed (",g.length,")"]})]}),i.jsx(Tn,{value:"pending",children:o?i.jsx("p",{className:"text-[#E0D8C8]/70 text-center py-8",children:"Loading..."}):d.length===0?i.jsx(Ee,{children:i.jsxs(Oe,{className:"p-8 text-center",children:[i.jsx(ei,{className:"w-12 h-12 mx-auto mb-4 text-green-500"}),i.jsx("p",{className:"text-stone-500",children:"No pending reports"})]})}):d.map(y=>i.jsx(v,{report:y},y.id))}),i.jsx(Tn,{value:"reviewed",children:f.length===0?i.jsx(Ee,{children:i.jsx(Oe,{className:"p-8 text-center",children:i.jsx("p",{className:"text-stone-500",children:"No reviewed reports"})})}):f.map(y=>i.jsx(v,{report:y},y.id))}),i.jsx(Tn,{value:"actioned",children:m.length===0?i.jsx(Ee,{children:i.jsx(Oe,{className:"p-8 text-center",children:i.jsx("p",{className:"text-stone-500",children:"No actioned reports"})})}):m.map(y=>i.jsx(v,{report:y},y.id))}),i.jsx(Tn,{value:"dismissed",children:g.length===0?i.jsx(Ee,{children:i.jsx(Oe,{className:"p-8 text-center",children:i.jsx("p",{className:"text-stone-500",children:"No dismissed reports"})})}):g.map(y=>i.jsx(v,{report:y},y.id))})]})]})})}const at=C.forwardRef(function({className:n,type:r,...s},a){return i.jsx("input",{type:r,ref:a,className:ut("flex h-10 w-full rounded-md border border-white/10 bg-[#1A2B3A] px-3 py-2 text-sm text-[#E0D8C8]","placeholder:text-[#E0D8C8]/40","focus:outline-none focus:ring-2 focus:ring-[#A35C5C]","disabled:cursor-not-allowed disabled:opacity-50",n),...s})}),Kde=Gg("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-[#E0D8C8] [&>svg~*]:pl-7",{variants:{variant:{default:"bg-white/5 border-white/10 text-[#E0D8C8]",destructive:"border-[#E05D5D]/50 text-[#E05D5D] [&>svg]:text-[#E05D5D]"}},defaultVariants:{variant:"default"}}),Br=C.forwardRef(({className:e,variant:n,...r},s)=>i.jsx("div",{ref:s,role:"alert",className:ut(Kde({variant:n}),e),...r}));Br.displayName="Alert";const Gde=C.forwardRef(({className:e,...n},r)=>i.jsx("h5",{ref:r,className:ut("mb-1 font-medium leading-none tracking-tight",e),...n}));Gde.displayName="AlertTitle";const $r=C.forwardRef(({className:e,...n},r)=>i.jsx("div",{ref:r,className:ut("text-sm [&_p]:leading-relaxed",e),...n}));$r.displayName="AlertDescription";var S2="Collapsible",[Yde,JU]=Vi(S2),[Qde,xE]=Yde(S2),ZU=C.forwardRef((e,n)=>{const{__scopeCollapsible:r,open:s,defaultOpen:a,disabled:o,onOpenChange:l,...c}=e,[u,d]=qo({prop:s,defaultProp:a??!1,onChange:l,caller:S2});return i.jsx(Qde,{scope:r,disabled:o,contentId:mi(),open:u,onOpenToggle:C.useCallback(()=>d(f=>!f),[d]),children:i.jsx(At.div,{"data-state":wE(u),"data-disabled":o?"":void 0,...c,ref:n})})});ZU.displayName=S2;var eV="CollapsibleTrigger",vE=C.forwardRef((e,n)=>{const{__scopeCollapsible:r,...s}=e,a=xE(eV,r);return i.jsx(At.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":wE(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...s,ref:n,onClick:Ft(e.onClick,a.onOpenToggle)})});vE.displayName=eV;var yE="CollapsibleContent",bE=C.forwardRef((e,n)=>{const{forceMount:r,...s}=e,a=xE(yE,e.__scopeCollapsible);return i.jsx(uo,{present:r||a.open,children:({present:o})=>i.jsx(Xde,{...s,ref:n,present:o})})});bE.displayName=yE;var Xde=C.forwardRef((e,n)=>{const{__scopeCollapsible:r,present:s,children:a,...o}=e,l=xE(yE,r),[c,u]=C.useState(s),d=C.useRef(null),f=un(n,d),m=C.useRef(0),g=m.current,x=C.useRef(0),v=x.current,y=l.open||c,b=C.useRef(y),N=C.useRef(void 0);return C.useEffect(()=>{const j=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(j)},[]),xs(()=>{const j=d.current;if(j){N.current=N.current||{transitionDuration:j.style.transitionDuration,animationName:j.style.animationName},j.style.transitionDuration="0s",j.style.animationName="none";const S=j.getBoundingClientRect();m.current=S.height,x.current=S.width,b.current||(j.style.transitionDuration=N.current.transitionDuration,j.style.animationName=N.current.animationName),u(s)}},[l.open,s]),i.jsx(At.div,{"data-state":wE(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!y,...o,ref:f,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:y&&a})});function wE(e){return e?"open":"closed"}var tV=ZU,Jde=vE,Zde=bE,Ol="Accordion",ehe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[jE,the,nhe]=a2(Ol),[C2]=Vi(Ol,[nhe,JU]),NE=JU(),nV=ve.forwardRef((e,n)=>{const{type:r,...s}=e,a=s,o=s;return i.jsx(jE.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?i.jsx(ahe,{...o,ref:n}):i.jsx(ihe,{...a,ref:n})})});nV.displayName=Ol;var[rV,rhe]=C2(Ol),[sV,she]=C2(Ol,{collapsible:!1}),ihe=ve.forwardRef((e,n)=>{const{value:r,defaultValue:s,onValueChange:a=()=>{},collapsible:o=!1,...l}=e,[c,u]=qo({prop:r,defaultProp:s??"",onChange:a,caller:Ol});return i.jsx(rV,{scope:e.__scopeAccordion,value:ve.useMemo(()=>c?[c]:[],[c]),onItemOpen:u,onItemClose:ve.useCallback(()=>o&&u(""),[o,u]),children:i.jsx(sV,{scope:e.__scopeAccordion,collapsible:o,children:i.jsx(iV,{...l,ref:n})})})}),ahe=ve.forwardRef((e,n)=>{const{value:r,defaultValue:s,onValueChange:a=()=>{},...o}=e,[l,c]=qo({prop:r,defaultProp:s??[],onChange:a,caller:Ol}),u=ve.useCallback(f=>c((m=[])=>[...m,f]),[c]),d=ve.useCallback(f=>c((m=[])=>m.filter(g=>g!==f)),[c]);return i.jsx(rV,{scope:e.__scopeAccordion,value:l,onItemOpen:u,onItemClose:d,children:i.jsx(sV,{scope:e.__scopeAccordion,collapsible:!0,children:i.jsx(iV,{...o,ref:n})})})}),[ohe,P2]=C2(Ol),iV=ve.forwardRef((e,n)=>{const{__scopeAccordion:r,disabled:s,dir:a,orientation:o="vertical",...l}=e,c=ve.useRef(null),u=un(c,n),d=the(r),m=r0(a)==="ltr",g=Ft(e.onKeyDown,x=>{var R;if(!ehe.includes(x.key))return;const v=x.target,y=d().filter(q=>{var U;return!((U=q.ref.current)!=null&&U.disabled)}),b=y.findIndex(q=>q.ref.current===v),N=y.length;if(b===-1)return;x.preventDefault();let j=b;const S=0,A=N-1,P=()=>{j=b+1,j>A&&(j=S)},L=()=>{j=b-1,j<S&&(j=A)};switch(x.key){case"Home":j=S;break;case"End":j=A;break;case"ArrowRight":o==="horizontal"&&(m?P():L());break;case"ArrowDown":o==="vertical"&&P();break;case"ArrowLeft":o==="horizontal"&&(m?L():P());break;case"ArrowUp":o==="vertical"&&L();break}const O=j%N;(R=y[O].ref.current)==null||R.focus()});return i.jsx(ohe,{scope:r,disabled:s,direction:a,orientation:o,children:i.jsx(jE.Slot,{scope:r,children:i.jsx(At.div,{...l,"data-orientation":o,ref:u,onKeyDown:s?void 0:g})})})}),T1="AccordionItem",[lhe,_E]=C2(T1),aV=ve.forwardRef((e,n)=>{const{__scopeAccordion:r,value:s,...a}=e,o=P2(T1,r),l=rhe(T1,r),c=NE(r),u=mi(),d=s&&l.value.includes(s)||!1,f=o.disabled||e.disabled;return i.jsx(lhe,{scope:r,open:d,disabled:f,triggerId:u,children:i.jsx(tV,{"data-orientation":o.orientation,"data-state":hV(d),...c,...a,ref:n,disabled:f,open:d,onOpenChange:m=>{m?l.onItemOpen(s):l.onItemClose(s)}})})});aV.displayName=T1;var oV="AccordionHeader",lV=ve.forwardRef((e,n)=>{const{__scopeAccordion:r,...s}=e,a=P2(Ol,r),o=_E(oV,r);return i.jsx(At.h3,{"data-orientation":a.orientation,"data-state":hV(o.open),"data-disabled":o.disabled?"":void 0,...s,ref:n})});lV.displayName=oV;var EA="AccordionTrigger",cV=ve.forwardRef((e,n)=>{const{__scopeAccordion:r,...s}=e,a=P2(Ol,r),o=_E(EA,r),l=she(EA,r),c=NE(r);return i.jsx(jE.ItemSlot,{scope:r,children:i.jsx(Jde,{"aria-disabled":o.open&&!l.collapsible||void 0,"data-orientation":a.orientation,id:o.triggerId,...c,...s,ref:n})})});cV.displayName=EA;var uV="AccordionContent",dV=ve.forwardRef((e,n)=>{const{__scopeAccordion:r,...s}=e,a=P2(Ol,r),o=_E(uV,r),l=NE(r);return i.jsx(Zde,{role:"region","aria-labelledby":o.triggerId,"data-orientation":a.orientation,...l,...s,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});dV.displayName=uV;function hV(e){return e?"open":"closed"}var che=nV,uhe=aV,dhe=lV,fV=cV,mV=dV;const pV=che,_x=C.forwardRef(({className:e,...n},r)=>i.jsx(uhe,{ref:r,className:ut("border-b",e),...n}));_x.displayName="AccordionItem";const Sx=C.forwardRef(({className:e,children:n,...r},s)=>i.jsx(dhe,{className:"flex",children:i.jsxs(fV,{ref:s,className:ut("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",e),...r,children:[n,i.jsx(La,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));Sx.displayName=fV.displayName;const Cx=C.forwardRef(({className:e,children:n,...r},s)=>i.jsx(mV,{ref:s,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:i.jsx("div",{className:ut("pb-4 pt-0",e),children:n})}));Cx.displayName=mV.displayName;function hhe(){var L,O,R;const e=On(),[n,r]=C.useState(!0),[s,a]=C.useState(500),[o,l]=C.useState(!1),[c,u]=C.useState(!1),[d,f]=C.useState(null),[m,g]=C.useState([]),[x,v]=C.useState(null),y=q=>q?q.scanned<s?!0:(q.usersCreated||0)+(q.subsLinkedToUserId||0)+(q.usersUpdated||0)+(q.normalizedEmails||0)===0:!1,b=async()=>{await e.invalidateQueries({queryKey:["admin-metrics"]}),await e.invalidateQueries({queryKey:["user-subscription-report"]}),await e.invalidateQueries({queryKey:["current-user"]})},N=async()=>{var q,U;v(null);try{const M=(await Ce.functions.invoke("migrateSubscriptionsToUserId",{dryRun:n,limit:s})).data;f(M);const G={ts:new Date().toISOString(),dryRun:n,limit:s,result:M};return g(Y=>[G,...Y].slice(0,20)),n||await b(),M}catch(D){const M=((U=(q=D==null?void 0:D.response)==null?void 0:q.data)==null?void 0:U.error)||(D==null?void 0:D.message)||"Unknown error";throw v(M),D}},j=async()=>{l(!0),u(!1),v(null);try{let q=0;for(;!c;){q++;const U=await N();if(y(U))break;await new Promise(D=>setTimeout(D,500))}}catch{}finally{l(!1),u(!1)}},S=async()=>{l(!0);try{await N()}finally{l(!1)}},A=()=>{u(!0)},P=()=>{g([]),f(null),v(null)};return i.jsxs(Ee,{className:"border-[#A35C5C]/30",children:[i.jsx(Ze,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx(et,{className:"text-[#E0D8C8]",children:"Subscription Migration (Stripe → Account Linked)"}),i.jsx(Tl,{className:"text-[#E0D8C8]/70 mt-2",children:"Links legacy Stripe subscriptions (email-keyed) to PipeKeeper accounts (user_id). Apple IAP is not linked by email."})]}),!n&&i.jsx(Ge,{variant:"destructive",className:"ml-2",children:"APPLIES CHANGES"})]})}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ua,{id:"dryRun",checked:n,onCheckedChange:r,disabled:o}),i.jsxs(tt,{htmlFor:"dryRun",className:"text-[#E0D8C8]",children:["Dry Run ",n?"(Safe Preview)":"(OFF - Will Apply!)"]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(tt,{htmlFor:"batchSize",className:"text-[#E0D8C8] whitespace-nowrap",children:"Batch Size:"}),i.jsx(at,{id:"batchSize",type:"number",min:"1",max:"1000",value:s,onChange:q=>a(parseInt(q.target.value)||500),disabled:o,className:"w-24"})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs(ye,{onClick:S,disabled:o,variant:"outline",size:"sm",children:[i.jsx(vq,{className:"w-4 h-4 mr-2"}),"Run Batch"]}),i.jsxs(ye,{onClick:j,disabled:o,size:"sm",children:[i.jsx(oee,{className:"w-4 h-4 mr-2"}),"Run Until Done"]}),o&&i.jsxs(ye,{onClick:A,variant:"destructive",size:"sm",children:[i.jsx(ha,{className:"w-4 h-4 mr-2"}),"Cancel"]}),i.jsxs(ye,{onClick:P,disabled:o,variant:"secondary",size:"sm",children:[i.jsx(yc,{className:"w-4 h-4 mr-2"}),"Clear Log"]})]}),x&&i.jsxs(Br,{variant:"destructive",children:[i.jsx(vn,{className:"h-4 w-4"}),i.jsx($r,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"font-semibold",children:"Migration Error"}),i.jsx("div",{className:"text-sm break-words",children:x}),(x.includes("STRIPE_AUTH_FAILED")||x.includes("Invalid API Key")||x.includes("mk_"))&&i.jsx("div",{className:"text-sm font-semibold text-yellow-200 mt-2",children:"⚠️ Check STRIPE_SECRET_KEY - must start with sk_ or rk_"})]})})]}),d&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ei,{className:"w-4 h-4 text-green-500"}),i.jsx("h4",{className:"text-sm font-semibold text-[#E0D8C8]",children:"Latest Result"})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[i.jsxs("div",{className:"bg-white/5 rounded p-2",children:[i.jsx("div",{className:"text-[#E0D8C8]/70",children:"Scanned"}),i.jsx("div",{className:"text-xl font-bold text-[#E0D8C8]",children:d.scanned||0})]}),i.jsxs("div",{className:"bg-white/5 rounded p-2",children:[i.jsx("div",{className:"text-[#E0D8C8]/70",children:"Normalized"}),i.jsx("div",{className:"text-xl font-bold text-[#E0D8C8]",children:d.normalizedEmails||0})]}),i.jsxs("div",{className:"bg-white/5 rounded p-2",children:[i.jsx("div",{className:"text-[#E0D8C8]/70",children:"Users Created"}),i.jsx("div",{className:"text-xl font-bold text-[#E0D8C8]",children:d.usersCreated||0})]}),i.jsxs("div",{className:"bg-white/5 rounded p-2",children:[i.jsx("div",{className:"text-[#E0D8C8]/70",children:"Subs Linked"}),i.jsx("div",{className:"text-xl font-bold text-[#E0D8C8]",children:d.subsLinkedToUserId||0})]}),i.jsxs("div",{className:"bg-white/5 rounded p-2",children:[i.jsx("div",{className:"text-[#E0D8C8]/70",children:"Users Updated"}),i.jsx("div",{className:"text-xl font-bold text-[#E0D8C8]",children:d.usersUpdated||0})]}),i.jsxs("div",{className:"bg-white/5 rounded p-2",children:[i.jsx("div",{className:"text-[#E0D8C8]/70",children:"Skipped Apple"}),i.jsx("div",{className:"text-xl font-bold text-[#E0D8C8]",children:d.skippedApple||0})]}),i.jsxs("div",{className:"bg-white/5 rounded p-2",children:[i.jsx("div",{className:"text-[#E0D8C8]/70",children:"Conflicts"}),i.jsx("div",{className:"text-xl font-bold text-[#A35C5C]",children:d.conflicts||0})]})]}),i.jsxs(pV,{type:"single",collapsible:!0,className:"w-full",children:[((L=d.createdUsers)==null?void 0:L.length)>0&&i.jsxs(_x,{value:"created",children:[i.jsxs(Sx,{className:"text-[#E0D8C8] text-sm",children:["Created Users (",d.createdUsers.length,")"]}),i.jsx(Cx,{children:i.jsx("pre",{className:"text-xs bg-black/30 p-3 rounded overflow-auto max-h-48 text-[#E0D8C8]/80",children:JSON.stringify(d.createdUsers,null,2)})})]}),((O=d.linkedSubs)==null?void 0:O.length)>0&&i.jsxs(_x,{value:"linked",children:[i.jsxs(Sx,{className:"text-[#E0D8C8] text-sm",children:["Linked Subscriptions (",d.linkedSubs.length,")"]}),i.jsx(Cx,{children:i.jsx("pre",{className:"text-xs bg-black/30 p-3 rounded overflow-auto max-h-48 text-[#E0D8C8]/80",children:JSON.stringify(d.linkedSubs,null,2)})})]}),((R=d.mismatches)==null?void 0:R.length)>0&&i.jsxs(_x,{value:"mismatches",children:[i.jsxs(Sx,{className:"text-[#A35C5C] text-sm",children:["Conflicts/Mismatches (",d.mismatches.length,")"]}),i.jsx(Cx,{children:i.jsx("pre",{className:"text-xs bg-black/30 p-3 rounded overflow-auto max-h-48 text-[#A35C5C]/80",children:JSON.stringify(d.mismatches,null,2)})})]})]})]}),m.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-semibold text-[#E0D8C8]",children:"Log History"}),i.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:m.map((q,U)=>{var D,M,G,Y;return i.jsxs("div",{className:"text-xs bg-white/5 rounded p-2 space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between text-[#E0D8C8]/70",children:[i.jsx("span",{children:new Date(q.ts).toLocaleString()}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ge,{variant:q.dryRun?"secondary":"destructive",className:"text-xs",children:q.dryRun?"DRY":"APPLY"}),i.jsxs(Ge,{variant:"outline",className:"text-xs",children:["Batch: ",q.limit]})]})]}),i.jsxs("div",{className:"text-[#E0D8C8] font-mono",children:["Scanned: ",((D=q.result)==null?void 0:D.scanned)||0," | Linked: ",((M=q.result)==null?void 0:M.subsLinkedToUserId)||0," | Created: ",((G=q.result)==null?void 0:G.usersCreated)||0," | Conflicts: ",((Y=q.result)==null?void 0:Y.conflicts)||0]})]},U)})})]})]})]})}const SE=()=>{var n;const e=(n=window==null?void 0:window.webkit)==null?void 0:n.messageHandlers;return e?!!(e.pipekeeper||e.pipeKeeper||e.PipeKeeper||e.ios||e.nativeApp):!1},fhe=()=>SE(),o0=e=>{var n;try{const r=(n=window==null?void 0:window.webkit)==null?void 0:n.messageHandlers;if(!r)return!1;const s=[r.pipekeeper,r.pipeKeeper,r.PipeKeeper,r.ios,r.nativeApp];for(const a of s)if(a&&typeof a.postMessage=="function")return a.postMessage(e),!0;return!1}catch{return!1}},CE=()=>o0({action:"showPaywall"}),TA=()=>o0({action:"getSubscriptionStatus"}),O1=()=>o0({action:"openAppleSubscriptions"}),mhe=()=>o0({action:"openAppleSubscriptions"}),Px=e=>o0({action:"showPaywall",tier:e||"premium"}),YN=(e="ping")=>o0({action:"debugToast",label:e}),gV=e=>{if(typeof e!="function")return()=>{};const n=r=>{const s=(r==null?void 0:r.detail)||{};e(s)};return window.addEventListener("pipekeeper_subscription_status",n),()=>window.removeEventListener("pipekeeper_subscription_status",n)};function phe({me:e}){On();const n=fhe(),{data:r,isLoading:s,error:a,refetch:o}=Dt({queryKey:["subscription-summary",e==null?void 0:e.id],enabled:!!(e!=null&&e.id),queryFn:async()=>{var U;const q=await Ce.functions.invoke("getMySubscriptionSummary",{});if(((U=q.data)==null?void 0:U.ok)===!1)throw new Error(q.data.message||q.data.error||"Failed to fetch subscription");return q.data},staleTime:3e4,retry:1}),[l,c]=C.useState(!1),[u,d]=C.useState("premium"),[f,m]=C.useState(!1),[g,x]=C.useState(null),v=()=>{const q=(r==null?void 0:r.manageUrl)||(r==null?void 0:r.manage_url);q?window.open(q,"_blank","noopener,noreferrer"):x("Unable to open Stripe portal. Please contact support.")},y=()=>{mhe()},b=()=>{if(!f){x("Please confirm you understand you may be billed twice if your web subscription is still active.");return}x(null),Px(u)};if(s)return i.jsx(Ee,{className:"border-[#A35C5C]/30",children:i.jsx(Oe,{className:"p-6 flex items-center justify-center",children:i.jsx($s,{className:"w-6 h-6 animate-spin text-[#E0D8C8]"})})});if(a||!(r!=null&&r.ok)&&r!==void 0)return i.jsx(Ee,{className:"border-[#A35C5C]/30",children:i.jsxs(Oe,{className:"p-6 space-y-3",children:[i.jsxs(Br,{variant:"destructive",children:[i.jsx(vn,{className:"h-4 w-4"}),i.jsx($r,{children:(a==null?void 0:a.message)||(r==null?void 0:r.error)||"Failed to load subscription information"})]}),i.jsxs(ye,{onClick:()=>o(),variant:"outline",size:"sm",children:[i.jsx($s,{className:"w-4 h-4 mr-2"}),"Retry"]})]})});const{paid:N,provider:j,tier:S,status:A,can_switch_to_apple:P,warning:L}=r||{},O={stripe:"bg-[#635BFF] text-white",apple:"bg-black text-white",unknown:"bg-gray-600 text-white",none:"bg-gray-400 text-white"},R={active:"bg-green-100 text-green-800",trialing:"bg-blue-100 text-blue-800",canceled:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800",none:"bg-gray-100 text-gray-800"};return i.jsx(Ee,{className:"border-[#A35C5C]/30",children:i.jsxs(Oe,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-[#E0D8C8]",children:"Subscription Management"}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx(Ge,{className:O[j],children:j==="stripe"?"Stripe":j==="apple"?"Apple":j}),i.jsx(Ge,{variant:"outline",className:R[A],children:A}),S&&S!=="premium"&&i.jsx(Ge,{variant:"outline",className:"bg-amber-100 text-amber-800",children:S.toUpperCase()})]})]}),i.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>o(),children:i.jsx($s,{className:"w-4 h-4"})})]}),(g||L)&&i.jsxs(Br,{variant:g?"destructive":"default",children:[i.jsx(vn,{className:"h-4 w-4"}),i.jsx($r,{children:g||L})]}),j==="apple"&&n&&i.jsxs(ye,{onClick:y,className:"w-full",children:[i.jsx(FP,{className:"w-4 h-4 mr-2"}),"Manage in Apple Subscriptions"]}),j==="stripe"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs(ye,{onClick:v,className:"w-full",children:[i.jsx(FP,{className:"w-4 h-4 mr-2"}),"Manage on Web"]}),P&&i.jsxs("div",{className:"border border-white/10 rounded-lg p-4 space-y-3 bg-white/5",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-sm font-semibold text-[#E0D8C8]",children:"Switch to Apple Billing (Optional)"}),i.jsx(ua,{checked:l,onCheckedChange:c})]}),l&&i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs(Br,{children:[i.jsx(vn,{className:"h-4 w-4"}),i.jsx($r,{className:"text-xs",children:"Apple subscriptions are separate from web subscriptions. To avoid double billing, cancel your web subscription first, then purchase through Apple."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-[#E0D8C8]",children:"Tier:"}),i.jsxs("select",{className:"flex-1 border border-white/20 rounded px-3 py-2 bg-[#1A2B3A] text-[#E0D8C8]",value:u,onChange:q=>d(q.target.value),children:[i.jsx("option",{value:"premium",children:"Premium"}),i.jsx("option",{value:"pro",children:"Pro"})]})]}),i.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:f,onChange:q=>m(q.target.checked),className:"mt-1"}),i.jsx("span",{className:"text-xs text-[#E0D8C8]/80",children:"I understand that if my web subscription is still active, starting an Apple subscription may cause double billing."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ye,{variant:"outline",onClick:v,className:"flex-1",children:"Open Web Management"}),i.jsx(ye,{onClick:b,className:"flex-1",children:"Continue to Apple Purchase"})]})]})]})]}),j==="none"&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:"No active subscription found."}),n?i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ye,{onClick:()=>Px("premium"),className:"flex-1",children:"Buy Premium (Apple)"}),i.jsx(ye,{onClick:()=>Px("pro"),className:"flex-1",children:"Buy Pro (Apple)"})]}):i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:"Visit the Subscription page to start a plan."})]}),j==="unknown"&&i.jsxs(Br,{children:[i.jsx(vn,{className:"h-4 w-4"}),i.jsx($r,{className:"text-xs",children:"You have an active subscription, but provider information is unavailable. Please contact support."})]})]})})}const Ax=tV,kx=vE,Ex=bE;function ghe(){var v,y,b,N,j,S,A,P,L;const[e,n]=C.useState(!1),[r,s]=C.useState(200),[a,o]=C.useState(null),[l,c]=C.useState(!1),[u,d]=C.useState(!1),[f,m]=C.useState(!1),g=On(),x=async O=>{n(!0),o(null);try{const R=await Ce.functions.invoke("repairStripeTiers",{dryRun:O,limit:r});o(R.data),R.data.ok?(Ve.success(O?"Dry run complete - no changes made":`Repair complete: ${R.data.updatedSubscriptions} subscriptions updated`),!O&&R.data.updatedSubscriptions>0&&(await g.invalidateQueries({queryKey:["user-report"]}),await g.invalidateQueries({queryKey:["admin-metrics"]}),await g.invalidateQueries({queryKey:["subscription"]}))):Ve.error(R.data.error||"Repair failed")}catch(R){Ve.error(R.message||"Failed to run repair"),o({ok:!1,error:R.message})}finally{n(!1)}};return i.jsxs(Ee,{className:"bg-gradient-to-br from-amber-50 to-orange-50 border-amber-200",children:[i.jsxs(Ze,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yv,{className:"w-5 h-5 text-amber-600"}),i.jsx(et,{className:"text-amber-900",children:"Repair Pro Access"})]}),i.jsx(Tl,{className:"text-amber-800",children:"Recomputes subscription tiers from Stripe and updates local records. Safe to run multiple times."})]}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs(Br,{className:"bg-amber-100 border-amber-300",children:[i.jsx(Ou,{className:"h-4 w-4 text-amber-700"}),i.jsx($r,{className:"text-amber-900 text-sm",children:"This fetches live data from Stripe, resolves pro vs premium tier, and updates Subscription.tier + User.subscription_tier."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"limit",className:"text-amber-900",children:"Subscription Limit"}),i.jsx(at,{id:"limit",type:"number",value:r,onChange:O=>s(parseInt(O.target.value)||200),min:1,max:1e3,className:"w-32",disabled:e})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(ye,{onClick:()=>x(!0),disabled:e,variant:"outline",className:"border-amber-400 text-amber-900 hover:bg-amber-100",children:e?"Running...":"Dry Run"}),i.jsx(ye,{onClick:()=>x(!1),disabled:e,className:"bg-amber-600 hover:bg-amber-700 text-white",children:e?"Running...":"Repair Now"})]}),a&&a.ok&&i.jsxs("div",{className:"space-y-3 pt-4 border-t border-amber-200",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-amber-600 text-xs",children:"Scanned"}),i.jsx("div",{className:"text-amber-900 font-semibold",children:a.scanned})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-amber-600 text-xs",children:"Updated Subscriptions"}),i.jsx("div",{className:"text-amber-900 font-semibold",children:a.updatedSubscriptions})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-amber-600 text-xs",children:"Updated Users"}),i.jsx("div",{className:"text-amber-900 font-semibold",children:a.updatedUsers})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-amber-600 text-xs",children:"Unknown Tier"}),i.jsx("div",{className:"text-amber-900 font-semibold",children:a.unknownTier})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-amber-600 text-xs",children:"Missing Stripe Sub"}),i.jsx("div",{className:"text-amber-900 font-semibold",children:a.missingStripeSubscription})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-amber-600 text-xs",children:"Mode"}),i.jsx("div",{className:"text-amber-900 font-semibold",children:a.dryRun?"Dry Run":"Live"})]})]}),((y=(v=a.samples)==null?void 0:v.updated)==null?void 0:y.length)>0&&i.jsxs(Ax,{open:l,onOpenChange:c,children:[i.jsxs(kx,{className:"flex items-center justify-between w-full bg-white/70 rounded p-2 hover:bg-white/90 transition-colors",children:[i.jsxs("span",{className:"text-sm font-medium text-amber-900",children:["Updated Samples (",a.samples.updated.length,")"]}),l?i.jsx(uh,{className:"w-4 h-4"}):i.jsx(La,{className:"w-4 h-4"})]}),i.jsx(Ex,{className:"mt-2 space-y-2",children:a.samples.updated.map((O,R)=>i.jsxs("div",{className:"bg-white/70 rounded p-2 text-xs space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-amber-600",children:"Email:"})," ",O.user_email]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-amber-600",children:"Stripe Sub:"})," ",O.stripe_sub_id]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-amber-600",children:"Change:"})," ",O.old_tier||"null"," → ",O.new_tier]})]},R))})]}),((N=(b=a.samples)==null?void 0:b.unknown)==null?void 0:N.length)>0&&i.jsxs(Ax,{open:u,onOpenChange:d,children:[i.jsxs(kx,{className:"flex items-center justify-between w-full bg-white/70 rounded p-2 hover:bg-white/90 transition-colors",children:[i.jsxs("span",{className:"text-sm font-medium text-amber-900",children:["Unknown Tier Samples (",a.samples.unknown.length,")"]}),u?i.jsx(uh,{className:"w-4 h-4"}):i.jsx(La,{className:"w-4 h-4"})]}),i.jsx(Ex,{className:"mt-2 space-y-2",children:a.samples.unknown.map((O,R)=>i.jsxs("div",{className:"bg-white/70 rounded p-2 text-xs space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-amber-600",children:"Email:"})," ",O.user_email]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-amber-600",children:"Stripe Sub:"})," ",O.stripe_sub_id]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-amber-600",children:"Reason:"})," ",O.reason]})]},R))})]}),((S=(j=a.samples)==null?void 0:j.missing)==null?void 0:S.length)>0&&i.jsxs(Ax,{open:f,onOpenChange:m,children:[i.jsxs(kx,{className:"flex items-center justify-between w-full bg-white/70 rounded p-2 hover:bg-white/90 transition-colors",children:[i.jsxs("span",{className:"text-sm font-medium text-amber-900",children:["Missing Samples (",a.samples.missing.length,")"]}),f?i.jsx(uh,{className:"w-4 h-4"}):i.jsx(La,{className:"w-4 h-4"})]}),i.jsx(Ex,{className:"mt-2 space-y-2",children:a.samples.missing.map((O,R)=>i.jsxs("div",{className:"bg-white/70 rounded p-2 text-xs space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-amber-600",children:"Email:"})," ",O.user_email]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-amber-600",children:"Reason:"})," ",O.reason]})]},R))})]})]}),a&&!a.ok&&i.jsx(Br,{variant:"destructive",children:i.jsx($r,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"font-semibold",children:"Repair Failed"}),i.jsx("div",{className:"text-sm break-words",children:a.error||a.message}),a.keyPrefix&&i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-semibold",children:"Key Prefix:"})," ",i.jsx("code",{className:"bg-black/30 px-2 py-0.5 rounded font-mono",children:a.keyPrefix})]}),(((A=a.error)==null?void 0:A.includes("STRIPE_AUTH_FAILED"))||((P=a.error)==null?void 0:P.includes("Invalid API Key"))||((L=a.error)==null?void 0:L.includes("mk_"))||a.keyPrefix==="mk"||a.keyPrefix==="pk")&&i.jsx("div",{className:"text-sm font-semibold text-yellow-200 mt-2",children:"⚠️ STRIPE_SECRET_KEY must start with sk_ (secret) or rk_ (restricted)"}),a.details&&i.jsx("div",{className:"text-xs mt-2 font-mono bg-black/20 p-2 rounded break-words",children:a.details})]})})})]})]})}function xhe(){const[e,n]=C.useState(!1),[r,s]=C.useState(""),[a,o]=C.useState(null),l=On(),c=async u=>{if(!r.trim()){Ve.error("Email is required");return}n(!0),o(null);try{const d=await Ce.functions.invoke("repairStripeByEmail",{email:r.trim(),dryRun:u});o(d.data),d.data.ok?(Ve.success(u?"Dry run complete - no changes made":`Subscription ${d.data.action} successfully`),u||(await l.invalidateQueries({queryKey:["user-report"]}),await l.invalidateQueries({queryKey:["admin-metrics"]}),await l.invalidateQueries({queryKey:["subscription"]}))):Ve.error(d.data.error||"Repair failed")}catch(d){Ve.error(d.message||"Failed to run repair"),o({ok:!1,error:d.message})}finally{n(!1)}};return i.jsxs(Ee,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:[i.jsxs(Ze,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Cu,{className:"w-5 h-5 text-blue-600"}),i.jsx(et,{className:"text-blue-900",children:"Repair Stripe Subscription by Email"})]}),i.jsx(Tl,{className:"text-blue-800",children:"Recover and link Stripe subscription for a specific user"})]}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs(Br,{className:"bg-blue-100 border-blue-300",children:[i.jsx(Ou,{className:"h-4 w-4 text-blue-700"}),i.jsx($r,{className:"text-blue-900 text-sm",children:"Finds Stripe customer by email, retrieves active subscription, and updates local records."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"email",className:"text-blue-900",children:"User Email"}),i.jsx(at,{id:"email",type:"email",placeholder:"user@example.com",value:r,onChange:u=>s(u.target.value),disabled:e})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(ye,{onClick:()=>c(!0),disabled:e||!r.trim(),variant:"outline",className:"border-blue-400 text-blue-900 hover:bg-blue-100",children:e?"Running...":"Dry Run"}),i.jsx(ye,{onClick:()=>c(!1),disabled:e||!r.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:e?"Running...":"Repair Now"})]}),a&&a.ok&&i.jsxs("div",{className:"space-y-3 pt-4 border-t border-blue-200",children:[i.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[i.jsx(ei,{className:"w-5 h-5"}),i.jsx("span",{className:"font-semibold",children:"Success"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-blue-600 text-xs",children:"Email"}),i.jsx("div",{className:"text-blue-900 font-mono text-xs truncate",children:a.email})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-blue-600 text-xs",children:"Tier"}),i.jsx("div",{className:"text-blue-900 font-semibold",children:a.tier})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-blue-600 text-xs",children:"Status"}),i.jsx("div",{className:"text-blue-900 font-semibold",children:a.status})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-blue-600 text-xs",children:"Action"}),i.jsx("div",{className:"text-blue-900 font-semibold",children:a.action})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2 col-span-2",children:[i.jsx("div",{className:"text-blue-600 text-xs",children:"Stripe Customer ID"}),i.jsx("div",{className:"text-blue-900 font-mono text-xs truncate",children:a.stripe_customer_id})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2 col-span-2",children:[i.jsx("div",{className:"text-blue-600 text-xs",children:"Stripe Subscription ID"}),i.jsx("div",{className:"text-blue-900 font-mono text-xs truncate",children:a.stripe_subscription_id})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-blue-600 text-xs",children:"Applied"}),i.jsx("div",{className:"text-blue-900 font-semibold",children:a.applied?"Yes":"Dry Run"})]})]})]}),a&&!a.ok&&i.jsx(Br,{variant:"destructive",children:i.jsxs($r,{children:[i.jsx("strong",{children:a.error}),a.message&&i.jsx("div",{className:"text-sm mt-1",children:a.message})]})})]})]})}function vhe(){var b,N,j,S,A,P,L,O,R,q,U,D,M,G,Y,Z,X,re,z,te;const[e,n]=C.useState(!1),[r,s]=C.useState(null),[a,o]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState(!1),[f,m]=C.useState(null),g=async()=>{var le,Q;try{const T=await Ce.functions.invoke("stripeRuntimeKey");o(T.data),(le=T.data)!=null&&le.ok&&T.data.prefix==="sk"?Ve.success("Runtime key check passed"):(Q=T.data)!=null&&Q.looksExpired?Ve.error("WARNING: Key may be expired"):Ve.error("Runtime key issue detected")}catch(T){Ve.error("Runtime key check failed: "+(T.message||"Unknown error")),o({ok:!1,error:T.message})}},x=async()=>{var le,Q;d(!0);try{const T=await Ce.functions.invoke("forceStripeRefresh");(le=T.data)!=null&&le.ok?(Ve.success("Stripe refreshed and validated"),await Promise.all([g(),v()])):Ve.error("Stripe refresh failed: "+(((Q=T.data)==null?void 0:Q.message)||"Unknown"))}catch(T){Ve.error("Refresh failed: "+(T.message||"Unknown error"))}finally{d(!1)}},v=async()=>{var le,Q,T,B,H,ee;try{const he=(await Ce.functions.invoke("stripeDiagnostics")).data,W={ok:he.health==="HEALTHY",environment:he.environment,deployment:{healthy:he.health==="HEALTHY",recommendation:he.health==="UNHEALTHY"?"Fix the failing checks below":"All systems operational"},checks:{secretPresent:{passed:((le=he.checks)==null?void 0:le.secret_present)||!1,keyMasked:((Q=he.details)==null?void 0:Q.secret_key)||"N/A"},stripeInit:{passed:((T=he.checks)==null?void 0:T.stripe_init)||!1,error:((B=he.details)==null?void 0:B.init_error)||null},apiConnect:{passed:((H=he.checks)==null?void 0:H.api_connect)||!1,error:((ee=he.details)==null?void 0:ee.api_error)||null}},instructions:he.health==="UNHEALTHY"?{step1:"Verify STRIPE_SECRET_KEY is set in Dashboard → Settings → Secrets",step2:"Click 'Force Refresh' button",step3:"If issue persists, manually redeploy functions in Base44 Dashboard"}:null};m(W),W.ok?Ve.success("Deployment status: Healthy"):Ve.warning("Deployment issues detected")}catch(ce){Ve.error("Status check failed: "+(ce.message||"Unknown")),m({ok:!1,error:ce.message})}},y=async()=>{var le,Q;try{const T=await Ce.functions.invoke("stripeForbiddenScan");c(T.data),(le=T.data)!=null&&le.ok&&T.data.violationCount===0?Ve.success("No forbidden Stripe patterns found"):((Q=T.data)==null?void 0:Q.violationCount)>0&&Ve.error(`Found ${T.data.violationCount} forbidden Stripe pattern(s)`)}catch(T){Ve.error("Forbidden scan failed: "+(T.message||"Unknown error")),c({ok:!1,error:T.message})}};return i.jsxs(Ee,{className:"bg-gradient-to-br from-purple-50 to-indigo-50 border-purple-200",children:[i.jsxs(Ze,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gb,{className:"w-5 h-5 text-purple-600"}),i.jsx(et,{className:"text-purple-900",children:"Stripe Diagnostics"})]}),i.jsx(Tl,{className:"text-purple-800",children:"Validate Stripe configuration and detect forbidden patterns"})]}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 border-2 border-blue-300 p-4 rounded-lg",children:[i.jsx("div",{className:"font-bold text-blue-900 mb-2",children:"🔄 After Updating STRIPE_SECRET_KEY:"}),i.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[i.jsx("div",{children:'1. Click "Full Status Check" below to verify current state'}),i.jsx("div",{children:'2. Click "Force Refresh" to reload Stripe client'}),i.jsx("div",{children:'3. If key mismatch persists → Manually trigger "Redeploy Functions" in Base44 Dashboard'})]})]}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsx(ye,{onClick:v,className:"bg-blue-600 hover:bg-blue-700 text-white flex-1",children:"Full Status Check"}),i.jsx(ye,{onClick:x,disabled:u,className:"bg-green-600 hover:bg-green-700 text-white flex-1",children:u?"Refreshing...":"Force Refresh"}),i.jsx(ye,{onClick:g,variant:"outline",className:"flex-1",children:"Runtime Key"}),i.jsx(ye,{onClick:y,variant:"outline",className:"flex-1",children:"Scan Code"})]}),f&&i.jsxs(Br,{className:f.ok?"bg-green-50 border-green-400":"bg-red-50 border-red-400",children:[i.jsx(Gb,{className:"h-4 w-4"}),i.jsx($r,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"font-bold text-lg flex items-center gap-2",children:[f.ok?"✅":"❌"," Deployment Status"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Environment:"})," ",i.jsx("code",{className:`font-mono font-semibold ${f.environment==="live"?"text-green-700":"text-yellow-700"}`,children:f.environment||"unknown"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Health:"})," ",i.jsx("span",{className:`font-bold ${(b=f.deployment)!=null&&b.healthy?"text-green-700":"text-red-700"}`,children:(N=f.deployment)!=null&&N.healthy?"HEALTHY":"UNHEALTHY"})]})]}),i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Check Results:"}),i.jsxs("div",{className:"ml-3 space-y-1",children:[i.jsxs("div",{children:[(S=(j=f.checks)==null?void 0:j.secretPresent)!=null&&S.passed?"✅":"❌"," Secret Present",((P=(A=f.checks)==null?void 0:A.secretPresent)==null?void 0:P.keyMasked)&&i.jsx("code",{className:"ml-2 text-xs bg-gray-100 px-1 rounded",children:f.checks.secretPresent.keyMasked})]}),i.jsxs("div",{children:[(O=(L=f.checks)==null?void 0:L.stripeInit)!=null&&O.passed?"✅":"❌"," Stripe Init",!((q=(R=f.checks)==null?void 0:R.stripeInit)!=null&&q.passed)&&((D=(U=f.checks)==null?void 0:U.stripeInit)==null?void 0:D.error)&&i.jsx("span",{className:"ml-2 text-xs text-red-600",children:f.checks.stripeInit.error})]}),i.jsxs("div",{children:[(G=(M=f.checks)==null?void 0:M.apiConnect)!=null&&G.passed?"✅":"❌"," API Connect",!((Z=(Y=f.checks)==null?void 0:Y.apiConnect)!=null&&Z.passed)&&((re=(X=f.checks)==null?void 0:X.apiConnect)==null?void 0:re.error)&&i.jsx("span",{className:"ml-2 text-xs text-red-600",children:f.checks.apiConnect.error})]})]})]}),((z=f.deployment)==null?void 0:z.recommendation)&&i.jsxs("div",{className:"p-3 bg-white border border-gray-300 rounded text-sm",children:[i.jsx("div",{className:"font-bold mb-1",children:"💡 Recommendation:"}),i.jsx("div",{children:f.deployment.recommendation})]}),f.instructions&&i.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-300 rounded text-xs space-y-1",children:[i.jsx("div",{className:"font-bold",children:"🔧 Fix Steps:"}),Object.entries(f.instructions).map(([le,Q])=>i.jsxs("div",{className:"ml-2",children:["• ",Q]},le))]})]})})]}),a&&i.jsxs(Br,{className:a.ok&&a.prefix==="sk"&&a.present?"bg-green-100 border-green-400":"bg-red-100 border-red-400",children:[i.jsx(Gb,{className:"h-4 w-4"}),i.jsx($r,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"font-bold text-lg",children:"🔑 Runtime Stripe Key (LIVE)"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Prefix:"})," ",i.jsx("code",{className:`font-mono font-bold text-lg ${a.prefix==="sk"?"text-green-700":"text-red-700"}`,children:a.prefix||"N/A"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Present:"})," ",i.jsx("code",{className:`font-mono font-semibold ${a.present?"text-green-700":"text-red-700"}`,children:a.present?"YES":"NO"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"text-gray-600",children:"Masked Key:"})," ",i.jsx("code",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:a.masked||"N/A"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Length:"})," ",i.jsxs("span",{className:"font-mono",children:[a.length||0," chars"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Environment:"})," ",i.jsx("code",{className:`font-mono font-semibold ${a.environment==="live"?"text-green-700":"text-yellow-700"}`,children:a.environment||"unknown"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"text-gray-600",children:"Timestamp:"})," ",i.jsx("span",{className:"text-xs",children:a.timestamp?new Date(a.timestamp).toLocaleTimeString():"N/A"})]})]}),a.warning&&i.jsxs("div",{className:"text-xs bg-yellow-50 border border-yellow-300 text-yellow-900 p-2 rounded mt-2",children:["⚠️ ",a.warning]}),(!a.ok||a.prefix!=="sk"||!a.present||a.looksExpired)&&i.jsxs("div",{className:"text-sm font-bold text-red-900 mt-3 bg-red-50 border-2 border-red-400 p-3 rounded",children:[i.jsx("div",{className:"mb-2",children:"❌ BLOCKING ISSUE DETECTED:"}),!a.present&&i.jsxs("div",{children:["• STRIPE_SECRET_KEY is MISSING in ",a.environment||"runtime"," environment"]}),a.present&&a.prefix!=="sk"&&i.jsxs("div",{children:["• Invalid key type: Expected ",i.jsx("code",{className:"bg-red-200 px-1 font-mono",children:"sk_"}),", got: ",i.jsx("code",{className:"bg-red-200 px-1 font-mono",children:a.prefix})]}),a.looksExpired&&i.jsx("div",{children:'• Key appears EXPIRED or REVOKED (contains "expired"/"revoked" in value)'}),i.jsxs("div",{className:"mt-3 text-xs bg-yellow-50 border border-yellow-300 p-2 rounded space-y-2",children:[i.jsxs("div",{className:"font-bold",children:["🔧 IMMEDIATE FIX (",a.environment==="live"?"LIVE":"PREVIEW"," RUNTIME):"]}),i.jsxs("div",{className:"space-y-1 ml-2",children:[i.jsxs("div",{children:["Step 1: Verify Dashboard → Settings → Secrets shows new ",i.jsx("code",{className:"bg-gray-200 px-1",children:"sk_live_…"})," key"]}),i.jsx("div",{children:'Step 2: Click "Force Refresh" button above'}),i.jsx("div",{children:'Step 3: Click "Check Runtime Key" to verify update'}),i.jsx("div",{className:"text-red-700 font-bold mt-1",children:"⚠️ If still failing after Force Refresh:"}),i.jsx("div",{className:"ml-2",children:"→ Base44 backend functions need manual redeploy"}),i.jsx("div",{className:"ml-2",children:"→ Go to Base44 Dashboard → Code → Functions"}),i.jsx("div",{className:"ml-2",children:'→ Trigger "Redeploy All Functions" or publish a code change'})]})]})]}),a.ok&&a.present&&a.prefix==="sk"&&!a.looksExpired&&i.jsxs("div",{className:"text-sm font-bold text-green-900 mt-3 bg-green-50 border-2 border-green-400 p-3 rounded",children:["✅ Runtime key validated - ",a.environment==="live"?"LIVE":"PREVIEW"," environment OK"]}),a.ok&&a.prefix==="sk"&&a.present&&i.jsx("div",{className:"text-sm font-semibold text-green-900 mt-2 bg-green-50 border border-green-400 p-2 rounded",children:"✅ Runtime key is valid and properly loaded"})]})})]}),l&&i.jsxs(Br,{className:l.ok&&l.violationCount===0?"bg-green-100 border-green-400":"bg-red-100 border-red-400",children:[i.jsx(Ou,{className:"h-4 w-4"}),i.jsx($r,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"font-bold",children:"Forbidden Stripe Pattern Scan"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Files Scanned:"})," ",i.jsx("span",{className:"font-semibold",children:l.scannedCount||0})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Violations:"})," ",i.jsx("span",{className:`font-bold ${l.violationCount>0?"text-red-700":"text-green-700"}`,children:l.violationCount||0})]})]}),l.violationCount>0&&i.jsxs("div",{className:"mt-2 max-h-48 overflow-auto",children:[i.jsx("div",{className:"text-xs font-semibold text-red-900 mb-1",children:"Fix Required:"}),l.violations.slice(0,10).map((le,Q)=>i.jsxs("div",{className:"text-xs bg-red-50 p-2 rounded mb-1 border border-red-200",children:[i.jsxs("div",{className:"font-mono text-red-900",children:[le.file,":",le.line]}),i.jsxs("div",{className:"text-red-700",children:["Pattern: ",le.pattern]}),i.jsxs("div",{className:"text-gray-600 truncate",children:["→ ",le.excerpt]})]},Q)),l.violationCount>10&&i.jsxs("div",{className:"text-xs text-red-700 mt-1",children:["... and ",l.violationCount-10," more violations"]})]}),l.ok&&l.violationCount===0&&i.jsx("div",{className:"text-sm font-semibold text-green-900 mt-2 bg-green-50 border border-green-400 p-2 rounded",children:"✅ All Stripe usage goes through helper function"}),l.scanError&&i.jsxs("div",{className:"text-xs text-yellow-800 bg-yellow-50 p-2 rounded border border-yellow-300 mt-2",children:["⚠️ Scan error: ",l.scanError]})]})})]}),r&&r.hardFail&&i.jsxs(Br,{variant:"destructive",className:"bg-red-100 border-red-400",children:[i.jsx(Ou,{className:"h-5 w-5"}),i.jsxs($r,{children:[i.jsx("div",{className:"font-bold text-red-900 mb-2",children:"CRITICAL: Forbidden Stripe Constructors Detected"}),i.jsx("div",{className:"text-red-800 text-sm mb-2",children:r.hardFailHint}),i.jsx("div",{className:"text-red-900 text-xs font-mono bg-red-50 p-2 rounded mt-2 max-h-32 overflow-auto",children:r.forbiddenStripeConstructorsScan.forbidden.map((le,Q)=>i.jsxs("div",{children:["• ",le]},Q))})]})]}),r&&!r.stripeSanityOk&&!r.hardFail&&i.jsxs(Br,{variant:"destructive",className:"bg-red-100 border-red-400",children:[i.jsx(ha,{className:"h-5 w-5"}),i.jsx($r,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"font-bold text-red-900",children:"Stripe Authentication Failed"}),i.jsxs("div",{className:"text-red-800 text-sm",children:[i.jsx("span",{className:"font-semibold",children:"Key Prefix:"})," ",i.jsx("code",{className:"bg-red-200 px-2 py-0.5 rounded font-mono text-red-900",children:r.keyPrefix||r.stripeKeyPrefix||"unknown"})]}),r.stripeSanityError&&i.jsx("div",{className:"text-red-800 text-xs font-mono bg-red-50 p-2 rounded break-words",children:r.stripeSanityError}),(r.keyPrefix==="mk"||r.keyPrefix==="pk"||r.keyPrefix==="missing"||r.keyPrefix==="other"||!r.stripeKeyValid)&&i.jsxs("div",{className:"text-sm font-semibold text-red-900 mt-2 bg-yellow-100 border border-yellow-400 p-2 rounded",children:["⚠️ STRIPE_SECRET_KEY must start with ",i.jsx("code",{className:"font-mono bg-yellow-200 px-1",children:"sk_"})," (secret) or ",i.jsx("code",{className:"font-mono bg-yellow-200 px-1",children:"rk_"})," (restricted)"]})]})})]}),r&&r.stripeSanityOk&&!r.hardFail&&i.jsxs("div",{className:"space-y-3 pt-4 border-t border-purple-200",children:[i.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[i.jsx(ei,{className:"w-5 h-5"}),i.jsx("span",{className:"font-semibold",children:"All Checks Passed"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-purple-600 text-xs",children:"Key Prefix"}),i.jsx("div",{className:"text-purple-900 font-mono font-semibold",children:r.keyPrefix})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-purple-600 text-xs",children:"API Connection"}),i.jsx("div",{className:"text-purple-900 font-semibold",children:r.stripeSanityOk?"OK":"Failed"})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-purple-600 text-xs",children:"Forbidden Constructors"}),i.jsx("div",{className:"text-purple-900 font-semibold",children:(te=r.forbiddenStripeConstructorsScan)!=null&&te.ok?r.forbiddenStripeConstructorsScan.forbidden.length:"N/A"})]})]})]}),r&&r.forbiddenStripeConstructorsScan&&!r.forbiddenStripeConstructorsScan.ok&&i.jsxs(Br,{className:"bg-yellow-100 border-yellow-400",children:[i.jsx(Ou,{className:"h-4 w-4 text-yellow-700"}),i.jsxs($r,{className:"text-yellow-900 text-sm",children:["Could not scan for forbidden constructors: ",r.forbiddenStripeConstructorsScan.error]})]})]})]})}function yhe(){const[e,n]=C.useState(!1),[r,s]=C.useState(""),[a,o]=C.useState(null),l=On(),c=async()=>{if(!r.trim()){Ve.error("Please enter an email address");return}n(!0),o(null);try{const d=(await Ce.functions.invoke("adminReconcileEntitlements",{email:r.trim()})).data;o(d),d.ok?(Ve.success(`Entitlements reconciled for ${r}`),await l.invalidateQueries({queryKey:["user-report"]}),await l.invalidateQueries({queryKey:["admin-metrics"]})):Ve.error(d.message||"Reconciliation failed")}catch(u){Ve.error(u.message||"Failed to reconcile entitlements"),o({ok:!1,error:"REQUEST_FAILED",message:u.message})}finally{n(!1)}};return i.jsxs(Ee,{className:"bg-gradient-to-br from-purple-50 to-indigo-50 border-purple-200",children:[i.jsxs(Ze,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($s,{className:"w-5 h-5 text-purple-600"}),i.jsx(et,{className:"text-purple-900",children:"Reconcile User Entitlements"})]}),i.jsx(Tl,{className:"text-purple-800",children:"Recover subscription data from Stripe/Apple for a specific user by email"})]}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs(Br,{className:"bg-purple-100 border-purple-300",children:[i.jsx(vn,{className:"h-4 w-4 text-purple-700"}),i.jsx($r,{className:"text-purple-900 text-sm",children:"This will check Stripe and Apple subscriptions for the user and update their tier/status accordingly. Safe to run multiple times."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"email",className:"text-purple-900",children:"User Email"}),i.jsx(at,{id:"email",type:"email",value:r,onChange:u=>s(u.target.value),placeholder:"user@example.com",disabled:e})]}),i.jsx(ye,{onClick:c,disabled:e,className:"bg-purple-600 hover:bg-purple-700 text-white w-full",children:e?"Reconciling...":"Reconcile Entitlements"}),a&&a.ok&&i.jsxs("div",{className:"space-y-3 pt-4 border-t border-purple-200",children:[i.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[i.jsx(ei,{className:"w-5 h-5"}),i.jsx("span",{className:"font-semibold",children:"Reconciliation Complete"})]}),i.jsxs("div",{className:"bg-white/70 rounded p-3 space-y-2 text-sm",children:[i.jsxs("div",{className:"font-semibold text-purple-900",children:["Provider Used: ",a.providerUsed]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-purple-700 font-medium",children:"Before:"}),i.jsxs("div",{className:"pl-3 space-y-0.5 text-purple-800",children:[i.jsxs("div",{children:["Tier: ",a.before.subscription_tier||"none"]}),i.jsxs("div",{children:["Level: ",a.before.subscription_level||"none"]}),i.jsxs("div",{children:["Status: ",a.before.subscription_status||"none"]}),a.before.stripe_customer_id&&i.jsxs("div",{children:["Customer ID: ",a.before.stripe_customer_id.slice(0,15),"..."]})]})]}),i.jsx("div",{className:"flex items-center justify-center py-2",children:i.jsx(IP,{className:"w-5 h-5 text-purple-600"})}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-purple-700 font-medium",children:"After:"}),i.jsxs("div",{className:"pl-3 space-y-0.5 text-purple-800",children:[i.jsxs("div",{children:["Tier: ",a.after.subscription_tier||"none"]}),i.jsxs("div",{children:["Level: ",a.after.subscription_level||"none"]}),i.jsxs("div",{children:["Status: ",a.after.subscription_status||"none"]}),a.after.stripe_customer_id&&i.jsxs("div",{children:["Customer ID: ",a.after.stripe_customer_id.slice(0,15),"..."]})]})]}),a.changes&&i.jsxs("div",{className:"pt-2 border-t border-purple-200",children:[i.jsx("div",{className:"text-purple-700 font-medium mb-1",children:"Changes:"}),i.jsxs("div",{className:"pl-3 space-y-0.5 text-xs text-purple-800",children:[i.jsxs("div",{children:["Tier changed: ",a.changes.tierChanged?"✓":"−"]}),i.jsxs("div",{children:["Level changed: ",a.changes.levelChanged?"✓":"−"]}),i.jsxs("div",{children:["Status changed: ",a.changes.statusChanged?"✓":"−"]}),i.jsxs("div",{children:["Customer ID added: ",a.changes.customerIdAdded?"✓":"−"]})]})]})]})]}),a&&!a.ok&&i.jsxs(Br,{variant:"destructive",children:[i.jsx(vn,{className:"h-4 w-4"}),i.jsx($r,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"font-semibold",children:"Reconciliation Failed"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-semibold",children:"Error:"})," ",a.error||"UNKNOWN"]}),a.message&&i.jsxs("div",{className:"text-sm break-words",children:[i.jsx("span",{className:"font-semibold",children:"Message:"})," ",a.message]})]})})]})]})]})}function bhe(){const[e,n]=C.useState(!1),[r,s]=C.useState(100),[a,o]=C.useState(!0),[l,c]=C.useState(null),[u,d]=C.useState(null),f=On(),m=async g=>{var x,v;n(!0);try{const b=(await Ce.functions.invoke("reconcileEntitlementsBatch",{batchSize:r,cursor:g||void 0,dryRun:a})).data;d(b),b.ok?(c(b.nextCursor),Ve.success(`Batch complete: ${b.scanned} scanned, ${b.fixed} fixed, ${b.unchanged} unchanged, ${b.errorsCount} errors`),a||(await f.invalidateQueries({queryKey:["user-report"]}),await f.invalidateQueries({queryKey:["admin-metrics"]}))):Ve.error(b.message||"Batch reconciliation failed")}catch(y){console.error("[ReconcileEntitlementsBatchCard] Error:",y);const b=((v=(x=y==null?void 0:y.response)==null?void 0:x.data)==null?void 0:v.message)||(y==null?void 0:y.message)||"Failed to run batch reconciliation";Ve.error(b),d({ok:!1,error:"REQUEST_FAILED",message:b})}finally{n(!1)}};return i.jsxs(Ee,{className:"bg-gradient-to-br from-teal-50 to-cyan-50 border-teal-200",children:[i.jsxs(Ze,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($s,{className:"w-5 h-5 text-teal-600"}),i.jsx(et,{className:"text-teal-900",children:"Backfill Entitlements (Batch)"})]}),i.jsx(Tl,{className:"text-teal-800",children:"Fix users affected before the entitlement reconciliation patch"})]}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs(Br,{className:"bg-teal-100 border-teal-300",children:[i.jsx(vn,{className:"h-4 w-4 text-teal-700"}),i.jsx($r,{className:"text-teal-900 text-sm",children:"Scans users who may have been downgraded to free incorrectly. Recovers Stripe/Apple subscriptions and updates their tier. Always test with Dry Run first."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"limit",className:"text-teal-900",children:"Batch Size"}),i.jsx(at,{id:"limit",type:"number",value:r,onChange:g=>s(parseInt(g.target.value)||100),min:10,max:200,disabled:e})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-teal-900",children:"Mode"}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx("input",{type:"checkbox",id:"dryRun",checked:a,onChange:g=>o(g.target.checked),className:"w-4 h-4 rounded border-teal-300",disabled:e}),i.jsx(tt,{htmlFor:"dryRun",className:"text-sm text-teal-900 cursor-pointer",children:"Dry Run (preview only)"})]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(ye,{onClick:()=>m(null),disabled:e,className:"bg-teal-600 hover:bg-teal-700 text-white flex-1",children:e?"Running...":i.jsxs(i.Fragment,{children:[i.jsx(vq,{className:"w-4 h-4 mr-2"}),"Start Batch"]})}),(u==null?void 0:u.hasMore)&&(u==null?void 0:u.nextCursor)&&i.jsxs(ye,{onClick:()=>m(u.nextCursor),disabled:e,variant:"outline",className:"border-teal-400 text-teal-900 hover:bg-teal-100",children:[i.jsx(pq,{className:"w-4 h-4 mr-1"}),"Next Batch"]})]}),u&&u.ok&&i.jsxs("div",{className:"space-y-3 pt-4 border-t border-teal-200",children:[i.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[i.jsx(ei,{className:"w-5 h-5"}),i.jsxs("span",{className:"font-semibold",children:["Batch Complete ",u.dryRun&&"(Dry Run)"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-teal-600 text-xs",children:"Scanned"}),i.jsx("div",{className:"text-teal-900 font-semibold",children:u.scanned})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-teal-600 text-xs",children:"Fixed"}),i.jsx("div",{className:"text-teal-900 font-semibold",children:u.fixed})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-teal-600 text-xs",children:"Unchanged"}),i.jsx("div",{className:"text-teal-900 font-semibold",children:u.unchanged})]}),i.jsxs("div",{className:"bg-white/50 rounded p-2",children:[i.jsx("div",{className:"text-teal-600 text-xs",children:"Errors"}),i.jsx("div",{className:"text-teal-900 font-semibold",children:u.errorsCount})]})]}),u.sampleFixes&&u.sampleFixes.length>0&&i.jsxs("div",{className:"bg-white/70 border border-teal-200 rounded p-3",children:[i.jsx("div",{className:"text-teal-800 font-semibold text-sm mb-2",children:"Sample Fixes:"}),i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:u.sampleFixes.map((g,x)=>i.jsxs("div",{className:"text-xs bg-teal-50 rounded p-2 space-y-1",children:[i.jsx("div",{className:"font-medium text-teal-900",children:g.email}),i.jsxs("div",{className:"flex items-center gap-2 text-teal-700",children:[i.jsxs("span",{children:[g.before.tier||"none"," → ",g.after.tier]}),i.jsxs("span",{className:"text-teal-500",children:["(",g.providerUsed,")"]})]})]},x))})]}),u.sampleErrors&&u.sampleErrors.length>0&&i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3",children:[i.jsx("div",{className:"text-yellow-800 font-semibold text-sm mb-2",children:"Sample Errors:"}),i.jsx("div",{className:"space-y-2",children:u.sampleErrors.map((g,x)=>i.jsxs("div",{className:"text-xs bg-white/70 rounded p-2",children:[i.jsx("div",{className:"font-medium",children:g.email}),i.jsx("div",{className:"text-yellow-700",children:g.message})]},x))})]})]}),u&&!u.ok&&i.jsxs(Br,{variant:"destructive",children:[i.jsx(vn,{className:"h-4 w-4"}),i.jsx($r,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"font-semibold",children:"Batch Failed"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-semibold",children:"Error:"})," ",u.error||"UNKNOWN"]}),u.message&&i.jsxs("div",{className:"text-sm break-words",children:[i.jsx("span",{className:"font-semibold",children:"Message:"})," ",u.message]})]})})]})]})]})}function whe(){const{user:e,isAdmin:n}=Kr(),r=On(),[s,a]=C.useState(null),[o,l]=C.useState(!1),{data:c=[],isLoading:u}=Dt({queryKey:["admin-reports"],queryFn:()=>Ce.entities.AbuseReport.list("-created_date",100),enabled:n}),d=rn({mutationFn:async({reportId:S,status:A})=>{await Ce.entities.AbuseReport.update(S,{status:A})},onSuccess:()=>{r.invalidateQueries({queryKey:["admin-reports"]}),Ve.success("Report updated"),a(null)},onError:()=>Ve.error("Failed to update report")}),f=rn({mutationFn:async({commentId:S})=>{await Ce.entities.Comment.update(S,{is_hidden:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["comments"]}),Ve.success("Content hidden")},onError:()=>Ve.error("Failed to hide content")}),m=rn({mutationFn:async({reportId:S,reportedEmail:A})=>{const P=await Ce.entities.UserProfile.filter({user_email:A});P[0]&&await Ce.entities.UserProfile.update(P[0].id,{blocked_users:[...P[0].blocked_users||[],"SYSTEM_BLOCKED"]}),await Ce.entities.AbuseReport.update(S,{status:"actioned"})},onSuccess:()=>{r.invalidateQueries({queryKey:["admin-reports"]}),Ve.success("User blocked"),a(null)},onError:()=>Ve.error("Failed to block user")}),g=async()=>{var S;l(!0);try{const A=await Ce.functions.invoke("syncStripeSubscriptions");Ve.success(((S=A.data)==null?void 0:S.message)||"Stripe backfill completed")}catch(A){Ve.error("Backfill failed: "+(A.message||"Unknown error"))}finally{l(!1)}};if(!n)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A2B3A] via-[#243548] to-[#1A2B3A] p-6 flex items-center justify-center",children:i.jsx(Ee,{className:"max-w-md",children:i.jsxs(Oe,{className:"p-8 text-center",children:[i.jsx(vn,{className:"w-12 h-12 mx-auto mb-4 text-red-500"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),i.jsx("p",{className:"text-stone-500",children:"Only administrators can access this page."})]})})});const x=c.filter(S=>S.status==="pending"),v=c.filter(S=>S.status==="reviewed"),y=c.filter(S=>S.status==="actioned"),b=c.filter(S=>S.status==="dismissed"),N=async(S,A)=>{A==="dismiss"?await d.mutateAsync({reportId:S.id,status:"dismissed"}):A==="hide"&&S.comment_id?(await f.mutateAsync({commentId:S.comment_id}),await d.mutateAsync({reportId:S.id,status:"actioned"})):A==="block"&&S.reported_user_email?await m.mutateAsync({reportId:S.id,reportedEmail:S.reported_user_email}):A==="review"&&await d.mutateAsync({reportId:S.id,status:"reviewed"})},j=({report:S})=>i.jsxs(Ee,{className:"mb-4 border-stone-200 hover:border-stone-300 transition-colors",children:[i.jsx(Ze,{children:i.jsx("div",{className:"flex items-start justify-between",children:i.jsxs("div",{children:[i.jsxs(et,{className:"text-base flex items-center gap-2",children:[i.jsx(Ge,{variant:S.status==="pending"?"destructive":S.status==="actioned"?"default":S.status==="dismissed"?"secondary":"outline",children:S.status}),i.jsx("span",{className:"text-sm text-stone-500",children:S.context_type})]}),i.jsxs("p",{className:"text-xs text-stone-400 mt-1",children:["Reported: ",new Date(S.created_date).toLocaleDateString()]})]})})}),i.jsx(Oe,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-stone-700",children:"Reporter:"}),i.jsx("p",{className:"text-sm text-stone-600",children:S.reporter_email})]}),S.reported_user_email&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-stone-700",children:"Reported User:"}),i.jsx("p",{className:"text-sm text-stone-600",children:S.reported_user_email})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-stone-700",children:"Reason:"}),i.jsx("p",{className:"text-sm text-stone-600",children:S.reason})]}),S.status==="pending"&&i.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t",children:[i.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>N(S,"review"),children:[i.jsx(Yw,{className:"w-4 h-4 mr-1"}),"Review"]}),S.comment_id&&i.jsxs(ye,{size:"sm",variant:"destructive",onClick:()=>N(S,"hide"),children:[i.jsx(x1,{className:"w-4 h-4 mr-1"}),"Hide Content"]}),S.reported_user_email&&i.jsxs(ye,{size:"sm",variant:"destructive",onClick:()=>N(S,"block"),children:[i.jsx(ha,{className:"w-4 h-4 mr-1"}),"Block User"]}),i.jsxs(ye,{size:"sm",variant:"secondary",onClick:()=>N(S,"dismiss"),children:[i.jsx(ei,{className:"w-4 h-4 mr-1"}),"Dismiss"]})]}),S.status==="reviewed"&&i.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t",children:[S.comment_id&&i.jsxs(ye,{size:"sm",variant:"destructive",onClick:()=>N(S,"hide"),children:[i.jsx(x1,{className:"w-4 h-4 mr-1"}),"Hide Content"]}),S.reported_user_email&&i.jsxs(ye,{size:"sm",variant:"destructive",onClick:()=>N(S,"block"),children:[i.jsx(ha,{className:"w-4 h-4 mr-1"}),"Block User"]}),i.jsx(ye,{size:"sm",variant:"secondary",onClick:()=>N(S,"dismiss"),children:"Dismiss"})]})]})})]});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A2B3A] via-[#243548] to-[#1A2B3A] p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-[#E0D8C8] mb-2",children:"Content Moderation"}),i.jsx("p",{className:"text-sm sm:text-base text-[#E0D8C8]/70",children:"Review and manage abuse reports"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[i.jsx(ye,{onClick:()=>window.location.href="/UserReport",variant:"outline",className:"w-full sm:w-auto text-xs sm:text-sm whitespace-nowrap",children:"User Subscription Report"}),i.jsx(ye,{onClick:g,disabled:o,variant:"outline",className:"w-full sm:w-auto text-xs sm:text-sm whitespace-nowrap",children:o?"Syncing...":"Backfill Stripe"})]})]})}),i.jsx("div",{className:"mb-8",children:i.jsxs(Ec,{defaultValue:"pending",className:"w-full",children:[i.jsxs(Tc,{className:"grid w-full grid-cols-2 sm:grid-cols-4 mb-6",children:[i.jsxs(En,{value:"pending",className:"text-xs sm:text-sm",children:["Pending (",x.length,")"]}),i.jsxs(En,{value:"reviewed",className:"text-xs sm:text-sm",children:["Reviewed (",v.length,")"]}),i.jsxs(En,{value:"actioned",className:"text-xs sm:text-sm",children:["Actioned (",y.length,")"]}),i.jsxs(En,{value:"dismissed",className:"text-xs sm:text-sm",children:["Dismissed (",b.length,")"]})]}),i.jsx(Tn,{value:"pending",children:u?i.jsx("p",{className:"text-[#E0D8C8]/70 text-center py-8",children:"Loading..."}):x.length===0?i.jsx(Ee,{children:i.jsxs(Oe,{className:"p-8 text-center",children:[i.jsx(ei,{className:"w-12 h-12 mx-auto mb-4 text-green-500"}),i.jsx("p",{className:"text-[#E0D8C8]/70",children:"No pending reports"})]})}):x.map(S=>i.jsx(j,{report:S},S.id))}),i.jsx(Tn,{value:"reviewed",children:v.length===0?i.jsx(Ee,{children:i.jsx(Oe,{className:"p-8 text-center",children:i.jsx("p",{className:"text-[#E0D8C8]/70",children:"No reviewed reports"})})}):v.map(S=>i.jsx(j,{report:S},S.id))}),i.jsx(Tn,{value:"actioned",children:y.length===0?i.jsx(Ee,{children:i.jsx(Oe,{className:"p-8 text-center",children:i.jsx("p",{className:"text-[#E0D8C8]/70",children:"No actioned reports"})})}):y.map(S=>i.jsx(j,{report:S},S.id))}),i.jsx(Tn,{value:"dismissed",children:b.length===0?i.jsx(Ee,{children:i.jsx(Oe,{className:"p-8 text-center",children:i.jsx("p",{className:"text-[#E0D8C8]/70",children:"No dismissed reports"})})}):b.map(S=>i.jsx(j,{report:S},S.id))})]})}),i.jsx("div",{className:"mb-6",children:i.jsx(phe,{me:e})}),i.jsx("div",{className:"mb-6",children:i.jsx(hhe,{})}),i.jsx("div",{className:"mb-6",children:i.jsx(ghe,{})}),i.jsx("div",{className:"mb-6",children:i.jsx(xhe,{})}),i.jsx("div",{className:"mb-6",children:i.jsx(vhe,{})}),i.jsx("div",{className:"mb-6",children:i.jsx(yhe,{})}),i.jsx("div",{className:"mb-6",children:i.jsx(bhe,{})})]})})}const Ui=C.forwardRef(({className:e,...n},r)=>i.jsx("textarea",{className:ut("flex min-h-[60px] w-full rounded-md border border-white/10 bg-[#1A2B3A] px-3 py-2 text-base text-[#E0D8C8]","placeholder:text-[#E0D8C8]/40","focus:outline-none focus:ring-2 focus:ring-[#A35C5C]","disabled:cursor-not-allowed disabled:opacity-50","md:text-sm",e),ref:r,...n}));Ui.displayName="Textarea";const xV=C.forwardRef(({className:e,...n},r)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:r,className:ut("w-full caption-bottom text-sm",e),...n})}));xV.displayName="Table";const vV=C.forwardRef(({className:e,...n},r)=>i.jsx("thead",{ref:r,className:ut("[&_tr]:border-b",e),...n}));vV.displayName="TableHeader";const yV=C.forwardRef(({className:e,...n},r)=>i.jsx("tbody",{ref:r,className:ut("[&_tr:last-child]:border-0",e),...n}));yV.displayName="TableBody";const jhe=C.forwardRef(({className:e,...n},r)=>i.jsx("tfoot",{ref:r,className:ut("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...n}));jhe.displayName="TableFooter";const hx=C.forwardRef(({className:e,...n},r)=>i.jsx("tr",{ref:r,className:ut("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...n}));hx.displayName="TableRow";const Tp=C.forwardRef(({className:e,...n},r)=>i.jsx("th",{ref:r,className:ut("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n}));Tp.displayName="TableHead";const Gd=C.forwardRef(({className:e,...n},r)=>i.jsx("td",{ref:r,className:ut("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n}));Gd.displayName="TableCell";const Nhe=C.forwardRef(({className:e,...n},r)=>i.jsx("caption",{ref:r,className:ut("mt-4 text-sm text-muted-foreground",e),...n}));Nhe.displayName="TableCaption";const _he={new:"bg-blue-100 text-blue-800",paid_confirmed:"bg-yellow-100 text-yellow-800",access_granted:"bg-green-100 text-green-800",resolved:"bg-gray-100 text-gray-800",rejected:"bg-red-100 text-red-800"},She={new:i.jsx(Gw,{className:"w-3 h-3"}),paid_confirmed:i.jsx(vn,{className:"w-3 h-3"}),access_granted:i.jsx(Nr,{className:"w-3 h-3"}),resolved:i.jsx(Nr,{className:"w-3 h-3"}),rejected:i.jsx(vn,{className:"w-3 h-3"})};function Che(){const{user:e,isLoading:n}=Kr(),[r,s]=C.useState(""),[a,o]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState(""),f=On();if(!n&&(e==null?void 0:e.role)!=="admin")return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0B1320] via-[#112133] to-[#0B1320] flex items-center justify-center",children:i.jsx(Ee,{className:"max-w-md w-full bg-[#1A2B3A] border-[#A35C5C]/50",children:i.jsxs(Oe,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center gap-2 text-red-500 mb-4",children:[i.jsx(vn,{className:"w-5 h-5"}),i.jsx("span",{children:"Admin access required"})]}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:"Only administrators can access this page."})]})})});const{data:m,isLoading:g}=Dt({queryKey:["subscription-requests"],queryFn:async()=>{const N=await Ce.entities.SubscriptionSupportRequest.filter({status:{$in:["new","paid_confirmed"]}},"-created_date",100);return Array.isArray(N)?N:[]},staleTime:5e3,refetchInterval:1e4}),x=rn({mutationFn:async({requestId:N,tier:j})=>{var A,P,L;const S=await Ce.functions.invoke("adminGrantSubscriptionAccess",{email:(A=m.find(O=>O.id===N))==null?void 0:A.user_email,tier:j,status:"active",notes:"Manual grant from admin queue"});if(!((P=S==null?void 0:S.data)!=null&&P.ok))throw new Error(((L=S==null?void 0:S.data)==null?void 0:L.message)||"Failed to grant access");return await Ce.entities.SubscriptionSupportRequest.update(N,{status:"access_granted",granted_by:e.email,granted_at:new Date().toISOString()}),S.data},onSuccess:()=>{f.invalidateQueries({queryKey:["subscription-requests"]}),Ve.success("Access granted and request updated")},onError:N=>{Ve.error(`Error: ${N.message}`)}}),v=rn({mutationFn:async({requestId:N,notes:j})=>{await Ce.entities.SubscriptionSupportRequest.update(N,{status:"rejected",admin_notes:j,granted_by:e.email,granted_at:new Date().toISOString()})},onSuccess:()=>{f.invalidateQueries({queryKey:["subscription-requests"]}),Ve.success("Request rejected"),c(null),d("")},onError:N=>{Ve.error(`Error: ${N.message}`)}}),y=rn({mutationFn:async N=>{await Ce.entities.SubscriptionSupportRequest.update(N,{status:"resolved"})},onSuccess:()=>{f.invalidateQueries({queryKey:["subscription-requests"]}),Ve.success("Request marked as resolved")},onError:N=>{Ve.error(`Error: ${N.message}`)}}),b=(m==null?void 0:m.filter(N=>{var j;return(j=N.user_email)==null?void 0:j.toLowerCase().includes(r.toLowerCase())}))||[];return g?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0B1320] via-[#112133] to-[#0B1320] py-12",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 flex items-center justify-center gap-2",children:[i.jsx(Cn,{className:"w-5 h-5 text-[#A35C5C] animate-spin"}),i.jsx("span",{className:"text-[#E0D8C8]",children:"Loading requests..."})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0B1320] via-[#112133] to-[#0B1320] py-12",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-[#E0D8C8] mb-2",children:"Subscription Support Queue"}),i.jsxs("p",{className:"text-[#E0D8C8]/60",children:[b.length," pending request",b.length!==1?"s":""]})]}),i.jsx(Ee,{className:"mb-6 bg-[#1A2B3A] border-[#A35C5C]/50",children:i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(fs,{className:"absolute left-3 top-3 w-4 h-4 text-[#E0D8C8]/40"}),i.jsx(at,{placeholder:"Search by email...",value:r,onChange:N=>s(N.target.value),className:"pl-10 bg-[#243548] border-[#A35C5C]/30 text-[#E0D8C8]"})]})})}),b.length===0?i.jsx(Ee,{className:"bg-[#1A2B3A] border-[#A35C5C]/50",children:i.jsxs(Oe,{className:"pt-12 pb-12 text-center",children:[i.jsx(Ite,{className:"w-8 h-8 text-[#E0D8C8]/40 mx-auto mb-2"}),i.jsx("p",{className:"text-[#E0D8C8]/70",children:r?"No matching requests found":"No pending requests"})]})}):i.jsx("div",{className:"bg-[#1A2B3A] border border-[#A35C5C]/50 rounded-lg overflow-hidden",children:i.jsxs(xV,{children:[i.jsx(vV,{className:"bg-[#243548]",children:i.jsxs(hx,{className:"border-[#A35C5C]/20",children:[i.jsx(Tp,{className:"text-[#E0D8C8]",children:"Email"}),i.jsx(Tp,{className:"text-[#E0D8C8]",children:"Tier / Term"}),i.jsx(Tp,{className:"text-[#E0D8C8]",children:"Payment Ref"}),i.jsx(Tp,{className:"text-[#E0D8C8]",children:"Status"}),i.jsx(Tp,{className:"text-[#E0D8C8] text-right",children:"Actions"})]})}),i.jsx(yV,{children:b.map(N=>i.jsxs(ve.Fragment,{children:[i.jsxs(hx,{className:"border-[#A35C5C]/20 hover:bg-[#243548]/50 transition-colors",children:[i.jsx(Gd,{className:"text-[#E0D8C8] font-medium",children:N.user_email}),i.jsxs(Gd,{className:"text-[#E0D8C8]/80",children:[N.requested_tier," / ",N.requested_term]}),i.jsx(Gd,{className:"text-[#E0D8C8]/60 text-sm",children:N.payment_reference||"—"}),i.jsx(Gd,{children:i.jsxs(Ge,{className:`${_he[N.status]} flex w-fit gap-1`,children:[She[N.status],N.status.replace("_"," ")]})}),i.jsx(Gd,{className:"text-right",children:i.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>o(a===N.id?null:N.id),className:"text-[#A35C5C] hover:bg-[#A35C5C]/20",children:a===N.id?"Hide":"Show"})})]}),a===N.id&&i.jsx(hx,{className:"bg-[#243548] border-[#A35C5C]/20",children:i.jsx(Gd,{colSpan:"5",className:"p-4",children:i.jsxs("div",{className:"space-y-4",children:[N.user_message&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/50 uppercase tracking-wide mb-1",children:"User Message"}),i.jsx("p",{className:"text-[#E0D8C8] bg-[#1A2B3A] p-2 rounded text-sm",children:N.user_message})]}),N.admin_notes&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/50 uppercase tracking-wide mb-1",children:"Admin Notes"}),i.jsx("p",{className:"text-[#E0D8C8] bg-[#1A2B3A] p-2 rounded text-sm",children:N.admin_notes})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[#E0D8C8]/50 text-xs",children:"Created"}),i.jsx("p",{className:"text-[#E0D8C8]",children:new Date(N.created_date).toLocaleDateString()})]}),N.granted_at&&i.jsxs("div",{children:[i.jsx("p",{className:"text-[#E0D8C8]/50 text-xs",children:"Granted By"}),i.jsx("p",{className:"text-[#E0D8C8] truncate",children:N.granted_by})]})]}),N.status==="new"||N.status==="paid_confirmed"?i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2 border-t border-[#A35C5C]/20",children:[i.jsx(ye,{size:"sm",onClick:()=>x.mutate({requestId:N.id,tier:N.requested_tier}),disabled:x.isPending,className:"bg-green-700 hover:bg-green-800 text-white flex-1",children:x.isPending?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-3 h-3 mr-1 animate-spin"}),"Granting..."]}):`Grant ${N.requested_tier.toUpperCase()}`}),i.jsx(ye,{size:"sm",variant:"outline",onClick:()=>c(N.id),className:"border-[#A35C5C]/30 text-[#E0D8C8] hover:bg-[#A35C5C]/20 flex-1",children:"Reject"})]}):i.jsx("div",{className:"flex gap-2 pt-2 border-t border-[#A35C5C]/20",children:i.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>y.mutate(N.id),disabled:y.isPending,className:"text-[#A35C5C] hover:bg-[#A35C5C]/20 flex-1",children:y.isPending?"Resolving...":"Mark Resolved"})})]})})}),l===N.id&&i.jsx(hx,{className:"bg-red-950/30 border-red-500/30",children:i.jsx(Gd,{colSpan:"5",className:"p-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsx(Ui,{placeholder:"Optional rejection reason...",value:u,onChange:j=>d(j.target.value),className:"bg-[#243548] border-red-500/30 text-[#E0D8C8] min-h-20"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ye,{size:"sm",onClick:()=>v.mutate({requestId:N.id,notes:u}),disabled:v.isPending,className:"bg-red-700 hover:bg-red-800 flex-1",children:"Confirm Rejection"}),i.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>{c(null),d("")},className:"text-[#E0D8C8] flex-1",children:"Cancel"})]})]})})})]},N.id))})]})})]})})}function Phe(){const{user:e,isLoading:n}=Kr(),[r,s]=C.useState(""),[a,o]=C.useState("premium"),[l,c]=C.useState("active"),[u,d]=C.useState(""),[f,m]=C.useState(!1),[g,x]=C.useState(null),[v,y]=C.useState(null);if(!n&&(e==null?void 0:e.role)!=="admin")return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0B1320] via-[#112133] to-[#0B1320] flex items-center justify-center",children:i.jsx(Ee,{className:"max-w-md w-full bg-[#1A2B3A] border-[#A35C5C]/50",children:i.jsxs(Oe,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center gap-2 text-red-500 mb-4",children:[i.jsx(vn,{className:"w-5 h-5"}),i.jsx("span",{children:"Admin access required"})]}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:"Only administrators can access this tool."})]})})});const b=async()=>{var j,S;if(!r.trim()){x({ok:!1,message:"Please enter an email address"});return}try{m(!0),x(null),y(null);const A=await Ce.functions.invoke("adminGrantSubscriptionAccess",{email:r.trim(),tier:a,status:l,notes:u.trim()});(j=A==null?void 0:A.data)!=null&&j.ok?(x({ok:!0,message:"Access granted successfully!"}),y(A.data.user),s(""),o("premium"),c("active"),d("")):x({ok:!1,message:((S=A==null?void 0:A.data)==null?void 0:S.message)||"Failed to grant access"})}catch(A){x({ok:!1,message:`Error: ${(A==null?void 0:A.message)||A}`})}finally{m(!1)}},N=async()=>{var j,S;if(!r.trim()){x({ok:!1,message:"Please enter an email address"});return}try{m(!0),x(null),y(null);const A=await Ce.functions.invoke("adminRevokeSubscriptionAccess",{email:r.trim(),notes:u.trim()});(j=A==null?void 0:A.data)!=null&&j.ok?(x({ok:!0,message:"Access revoked successfully!"}),y(A.data.user),s(""),d("")):x({ok:!1,message:((S=A==null?void 0:A.data)==null?void 0:S.message)||"Failed to revoke access"})}catch(A){x({ok:!1,message:`Error: ${(A==null?void 0:A.message)||A}`})}finally{m(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0B1320] via-[#112133] to-[#0B1320] py-12",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[i.jsx("h1",{className:"text-4xl font-bold text-[#E0D8C8] mb-8",children:"Subscription Admin Tools"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(Ee,{className:"bg-[#1A2B3A] border-[#A35C5C]/50",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#E0D8C8]",children:"Manage User Subscription"})}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-[#E0D8C8] mb-2",children:"Email Address"}),i.jsx(at,{placeholder:"user@example.com",value:r,onChange:j=>s(j.target.value),className:"bg-[#243548] border-[#A35C5C]/30 text-[#E0D8C8]",disabled:f})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-[#E0D8C8] mb-2",children:"Tier"}),i.jsxs(pn,{value:a,onValueChange:o,disabled:f,children:[i.jsx(hn,{className:"bg-[#243548] border-[#A35C5C]/30 text-[#E0D8C8]",children:i.jsx(gn,{})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"premium",children:"Premium"}),i.jsx(ot,{value:"pro",children:"Pro"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-[#E0D8C8] mb-2",children:"Status"}),i.jsxs(pn,{value:l,onValueChange:c,disabled:f,children:[i.jsx(hn,{className:"bg-[#243548] border-[#A35C5C]/30 text-[#E0D8C8]",children:i.jsx(gn,{})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"active",children:"Active"}),i.jsx(ot,{value:"inactive",children:"Inactive"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-[#E0D8C8] mb-2",children:"Notes (optional)"}),i.jsx(Ui,{placeholder:"Admin notes...",value:u,onChange:j=>d(j.target.value),className:"bg-[#243548] border-[#A35C5C]/30 text-[#E0D8C8] min-h-20",disabled:f})]}),g&&i.jsxs("div",{className:`p-3 rounded-lg flex items-start gap-2 ${g.ok?"bg-green-900/20 text-green-200":"bg-red-900/20 text-red-200"}`,children:[g.ok?i.jsx(Nr,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}):i.jsx(vn,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),i.jsx("span",{className:"text-sm",children:g.message})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ye,{onClick:b,disabled:f||!r.trim(),className:"flex-1 bg-green-700 hover:bg-green-800",children:f?"Processing...":"Grant Access"}),i.jsx(ye,{onClick:N,disabled:f||!r.trim(),variant:"destructive",className:"flex-1",children:"Revoke Access"})]})]})]}),v&&i.jsxs(Ee,{className:"bg-[#1A2B3A] border-[#A35C5C]/50",children:[i.jsx(Ze,{children:i.jsxs(et,{className:"text-[#E0D8C8] flex items-center gap-2",children:[i.jsx(Nr,{className:"w-5 h-5 text-green-500"}),"Updated User"]})}),i.jsxs(Oe,{className:"space-y-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[#E0D8C8]/50",children:"Email"}),i.jsx("p",{className:"text-[#E0D8C8] font-medium",children:v.email})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[#E0D8C8]/50",children:"Name"}),i.jsx("p",{className:"text-[#E0D8C8] font-medium",children:v.full_name})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[#E0D8C8]/50",children:"Subscription Level"}),i.jsx("p",{className:"text-[#E0D8C8] font-medium",children:v.subscription_level||"Free"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[#E0D8C8]/50",children:"Subscription Status"}),i.jsx("p",{className:"text-[#E0D8C8] font-medium",children:v.subscription_status||"Inactive"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[#E0D8C8]/50",children:"Subscription Tier"}),i.jsx("p",{className:"text-[#E0D8C8] font-medium",children:v.subscription_tier||"None"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[#E0D8C8]/50",children:"Updated At"}),i.jsx("p",{className:"text-[#E0D8C8] font-medium",children:v.subscriptionUpdatedAt?new Date(v.subscriptionUpdatedAt).toLocaleString():"—"})]})]})]})]})]})})}function bV({onConfirm:e}){const{t:n}=$t();return i.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-b from-[#0d1b2a] to-[#070b10] p-6",children:i.jsxs(Ee,{className:"w-full max-w-md border border-white/10 bg-white/5 backdrop-blur-md shadow-xl",children:[i.jsxs(Ze,{className:"text-center",children:[i.jsx("div",{className:"mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-white/10",children:i.jsx(ate,{className:"h-6 w-6 text-white/80"})}),i.jsx(et,{className:"text-xl text-white",children:n("ageGate.title",{defaultValue:"Adults Only"})})]}),i.jsxs(Oe,{className:"space-y-3 text-center",children:[i.jsx("p",{className:"text-white/80",children:n("ageGate.intendedForAdults",{defaultValue:"PipeKeeper is intended for adult users only."})}),i.jsx("p",{className:"text-white/60 text-sm",children:n("ageGate.disclaimer",{defaultValue:"This app is a collection management tool for pipe smoking enthusiasts. It does not sell or facilitate the purchase of tobacco products."})})]}),i.jsx(loe,{children:i.jsx(ye,{className:"w-full bg-[#8b3a3a] hover:bg-[#9b4343] text-white",onClick:e,children:n("ageGate.confirmAge",{defaultValue:"I confirm I am of legal age"})})})]})})}var PE="Progress",AE=100,[Ahe]=Vi(PE),[khe,Ehe]=Ahe(PE),wV=C.forwardRef((e,n)=>{const{__scopeProgress:r,value:s=null,max:a,getValueLabel:o=The,...l}=e;(a||a===0)&&!WL(a)&&console.error(Ohe(`${a}`,"Progress"));const c=WL(a)?a:AE;s!==null&&!KL(s,c)&&console.error(Lhe(`${s}`,"Progress"));const u=KL(s,c)?s:null,d=L1(u)?o(u,c):void 0;return i.jsx(khe,{scope:r,value:u,max:c,children:i.jsx(At.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":L1(u)?u:void 0,"aria-valuetext":d,role:"progressbar","data-state":_V(u,c),"data-value":u??void 0,"data-max":c,...l,ref:n})})});wV.displayName=PE;var jV="ProgressIndicator",NV=C.forwardRef((e,n)=>{const{__scopeProgress:r,...s}=e,a=Ehe(jV,r);return i.jsx(At.div,{"data-state":_V(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:n})});NV.displayName=jV;function The(e,n){return`${Math.round(e/n*100)}%`}function _V(e,n){return e==null?"indeterminate":e===n?"complete":"loading"}function L1(e){return typeof e=="number"}function WL(e){return L1(e)&&!isNaN(e)&&e>0}function KL(e,n){return L1(e)&&!isNaN(e)&&e<=n&&e>=0}function Ohe(e,n){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${n}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${AE}\`.`}function Lhe(e,n){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${n}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${AE} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var SV=wV,Rhe=NV;const CV=C.forwardRef(({className:e,value:n,...r},s)=>i.jsx(SV,{ref:s,className:ut("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...r,children:i.jsx(Rhe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(n||0)}%)`}})}));CV.displayName=SV.displayName;function PV(){const[e,n]=C.useState([]),[r,s]=C.useState(!1),[a,o]=C.useState([]),[l,c]=C.useState(0),u=g=>{let x=g.replace(/\.(png|jpg|jpeg|webp|svg)$/i,"");return x=x.replace(/[_-]/g," "),x=x.trim(),x},d=g=>{const x=Array.from(g.target.files);n(x),o([]),c(0)},f=async()=>{if(e.length===0)return;s(!0),o([]);const g=[];for(let x=0;x<e.length;x++){const v=e[x],y=u(v.name);try{const{file_url:b}=await Ce.integrations.Core.UploadFile({file:v}),N=await Ce.entities.TobaccoLogoLibrary.filter({brand_name:y});N.length>0?(await xr("TobaccoLogoLibrary",N[0].id,{logo_url:b}),g.push({filename:v.name,manufacturer:y,status:"updated",message:"Logo updated"})):(await Ce.entities.TobaccoLogoLibrary.create({brand_name:y,logo_url:b,is_custom:!0}),g.push({filename:v.name,manufacturer:y,status:"success",message:"Logo added"}))}catch(b){g.push({filename:v.name,manufacturer:y,status:"error",message:b.message||"Upload failed"})}c((x+1)/e.length*100),o([...g])}s(!1)},m=()=>{n([]),o([]),c(0)};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42]",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsxs(Ee,{className:"border-[#e8d5b7]/30 bg-[#243548]/50 backdrop-blur-sm rounded-2xl shadow-xl",children:[i.jsxs(Ze,{children:[i.jsx(et,{className:"text-2xl text-[#e8d5b7]",children:"Bulk Logo Upload"}),i.jsx("p",{className:"text-sm text-[#e8d5b7]/70 mt-2",children:"Upload multiple tobacco brand logos at once. The manufacturer name will be extracted from each filename."}),i.jsx("div",{className:"mt-3 p-4 bg-amber-900/20 rounded-xl border border-amber-600/30",children:i.jsxs("p",{className:"text-xs text-[#e8d5b7]/90",children:[i.jsx("strong",{children:"Filename Format:"}),' Use the manufacturer name as the filename (e.g., "Peterson.png", "Cornell_and_Diehl.png"). Underscores and hyphens will be converted to spaces.']})})]}),i.jsxs(Oe,{className:"space-y-6",children:[i.jsx("div",{children:i.jsxs("label",{className:"block mb-2",children:[i.jsx("div",{className:"flex items-center justify-center w-full h-32 px-4 transition bg-[#1a2c42]/50 border-2 border-[#e8d5b7]/30 border-dashed rounded-2xl hover:border-[#8b3a3a] hover:bg-[#1a2c42]/70 cursor-pointer",children:i.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[i.jsx(Wx,{className:"w-8 h-8 text-[#e8d5b7]/60"}),i.jsxs("div",{className:"text-sm text-[#e8d5b7]/70",children:[i.jsx("span",{className:"font-semibold text-[#e8d5b7]",children:"Click to upload"})," or drag and drop"]}),i.jsx("p",{className:"text-xs text-[#e8d5b7]/50",children:"PNG, JPG, WEBP, SVG (multiple files)"})]})}),i.jsx("input",{type:"file",className:"hidden",multiple:!0,accept:"image/png,image/jpeg,image/jpg,image/webp,image/svg+xml",onChange:d,disabled:r})]})}),e.length>0&&i.jsxs("div",{children:[i.jsxs("h3",{className:"text-sm font-semibold text-[#e8d5b7] mb-3",children:["Selected Files (",e.length,")"]}),i.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-2 rounded-xl",children:[e.slice(0,10).map((g,x)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1a2c42]/50 rounded-xl border border-[#e8d5b7]/20",children:[i.jsx("span",{className:"text-sm text-[#e8d5b7] truncate flex-1",children:g.name}),i.jsxs("span",{className:"text-xs text-[#e8d5b7]/60 ml-2",children:["→ ",u(g.name)]})]},x)),e.length>10&&i.jsxs("p",{className:"text-xs text-[#e8d5b7]/60 text-center py-2",children:["... and ",e.length-10," more"]})]})]}),r&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm text-[#e8d5b7]",children:[i.jsx("span",{children:"Uploading..."}),i.jsxs("span",{children:[Math.round(l),"%"]})]}),i.jsx(CV,{value:l,className:"h-2"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(ye,{onClick:f,disabled:e.length===0||r,className:"flex-1 bg-[#8b3a3a] hover:bg-[#6d2e2e] text-[#e8d5b7] rounded-xl shadow-lg",children:r?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Wx,{className:"w-4 h-4 mr-2"}),"Upload ",e.length," Logo",e.length!==1?"s":""]})}),i.jsx(ye,{onClick:m,variant:"outline",disabled:r,className:"border-[#e8d5b7]/30 text-[#e8d5b7] hover:bg-[#1a2c42]/50 rounded-xl",children:"Clear"})]}),a.length>0&&i.jsxs("div",{children:[i.jsxs("h3",{className:"text-sm font-semibold text-[#e8d5b7] mb-3",children:["Upload Results (",a.filter(g=>g.status==="success"||g.status==="updated").length,"/",a.length," successful)"]}),i.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2 rounded-xl",children:a.map((g,x)=>i.jsx("div",{className:`flex items-center justify-between p-3 rounded-xl ${g.status==="error"?"bg-red-900/20 border border-red-600/40":"bg-green-900/20 border border-green-600/40"}`,children:i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[g.status==="error"?i.jsx(vn,{className:"w-4 h-4 text-red-400 shrink-0"}):i.jsx(Nr,{className:"w-4 h-4 text-green-400 shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm text-[#e8d5b7] truncate",children:g.filename}),i.jsxs("p",{className:"text-xs text-[#e8d5b7]/60",children:[g.manufacturer," • ",g.message]})]})]})},x))})]})]})]})})})}var QN={exports:{}},XN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GL;function Dhe(){if(GL)return XN;GL=1;var e=Kw();function n(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var r=typeof Object.is=="function"?Object.is:n,s=e.useState,a=e.useEffect,o=e.useLayoutEffect,l=e.useDebugValue;function c(m,g){var x=g(),v=s({inst:{value:x,getSnapshot:g}}),y=v[0].inst,b=v[1];return o(function(){y.value=x,y.getSnapshot=g,u(y)&&b({inst:y})},[m,x,g]),a(function(){return u(y)&&b({inst:y}),m(function(){u(y)&&b({inst:y})})},[m]),l(x),x}function u(m){var g=m.getSnapshot;m=m.value;try{var x=g();return!r(m,x)}catch{return!0}}function d(m,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return XN.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,XN}var YL;function Ihe(){return YL||(YL=1,QN.exports=Dhe()),QN.exports}var Mhe=Ihe();function Fhe(){return Mhe.useSyncExternalStore(Bhe,()=>!0,()=>!1)}function Bhe(){return()=>{}}var kE="Avatar",[$he]=Vi(kE),[qhe,AV]=$he(kE),kV=C.forwardRef((e,n)=>{const{__scopeAvatar:r,...s}=e,[a,o]=C.useState("idle");return i.jsx(qhe,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:i.jsx(At.span,{...s,ref:n})})});kV.displayName=kE;var EV="AvatarImage",TV=C.forwardRef((e,n)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...o}=e,l=AV(EV,r),c=zhe(s,o),u=Fi(d=>{a(d),l.onImageLoadingStatusChange(d)});return xs(()=>{c!=="idle"&&u(c)},[c,u]),c==="loaded"?i.jsx(At.img,{...o,ref:n,src:s}):null});TV.displayName=EV;var OV="AvatarFallback",LV=C.forwardRef((e,n)=>{const{__scopeAvatar:r,delayMs:s,...a}=e,o=AV(OV,r),[l,c]=C.useState(s===void 0);return C.useEffect(()=>{if(s!==void 0){const u=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(u)}},[s]),l&&o.imageLoadingStatus!=="loaded"?i.jsx(At.span,{...a,ref:n}):null});LV.displayName=OV;function QL(e,n){return e?n?(e.src!==n&&(e.src=n),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function zhe(e,{referrerPolicy:n,crossOrigin:r}){const s=Fhe(),a=C.useRef(null),o=s?(a.current||(a.current=new window.Image),a.current):null,[l,c]=C.useState(()=>QL(o,e));return xs(()=>{c(QL(o,e))},[o,e]),xs(()=>{const u=m=>()=>{c(m)};if(!o)return;const d=u("loaded"),f=u("error");return o.addEventListener("load",d),o.addEventListener("error",f),n&&(o.referrerPolicy=n),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",d),o.removeEventListener("error",f)}},[o,r,n]),l}var RV=kV,DV=TV,IV=LV;const _l=C.forwardRef(({className:e,...n},r)=>i.jsx(RV,{ref:r,className:ut("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...n}));_l.displayName=RV.displayName;const pc=C.forwardRef(({className:e,...n},r)=>i.jsx(DV,{ref:r,className:ut("aspect-square h-full w-full",e),...n}));pc.displayName=DV.displayName;const Sl=C.forwardRef(({className:e,...n},r)=>i.jsx(IV,{ref:r,className:ut("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...n}));Sl.displayName=IV.displayName;var A2="Dialog",[MV,FV]=Vi(A2),[Uhe,Ll]=MV(A2),BV=e=>{const{__scopeDialog:n,children:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=C.useRef(null),u=C.useRef(null),[d,f]=qo({prop:s,defaultProp:a??!1,onChange:o,caller:A2});return i.jsx(Uhe,{scope:n,triggerRef:c,contentRef:u,contentId:mi(),titleId:mi(),descriptionId:mi(),open:d,onOpenChange:f,onOpenToggle:C.useCallback(()=>f(m=>!m),[f]),modal:l,children:r})};BV.displayName=A2;var $V="DialogTrigger",qV=C.forwardRef((e,n)=>{const{__scopeDialog:r,...s}=e,a=Ll($V,r),o=un(n,a.triggerRef);return i.jsx(At.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":OE(a.open),...s,ref:o,onClick:Ft(e.onClick,a.onOpenToggle)})});qV.displayName=$V;var EE="DialogPortal",[Vhe,zV]=MV(EE,{forceMount:void 0}),UV=e=>{const{__scopeDialog:n,forceMount:r,children:s,container:a}=e,o=Ll(EE,n);return i.jsx(Vhe,{scope:n,forceMount:r,children:C.Children.map(s,l=>i.jsx(uo,{present:r||o.open,children:i.jsx(p2,{asChild:!0,container:a,children:l})}))})};UV.displayName=EE;var R1="DialogOverlay",VV=C.forwardRef((e,n)=>{const r=zV(R1,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,o=Ll(R1,e.__scopeDialog);return o.modal?i.jsx(uo,{present:s||o.open,children:i.jsx(Whe,{...a,ref:n})}):null});VV.displayName=R1;var Hhe=xm("DialogOverlay.RemoveScroll"),Whe=C.forwardRef((e,n)=>{const{__scopeDialog:r,...s}=e,a=Ll(R1,r);return i.jsx(v2,{as:Hhe,allowPinchZoom:!0,shards:[a.contentRef],children:i.jsx(At.div,{"data-state":OE(a.open),...s,ref:n,style:{pointerEvents:"auto",...s.style}})})}),wm="DialogContent",HV=C.forwardRef((e,n)=>{const r=zV(wm,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,o=Ll(wm,e.__scopeDialog);return i.jsx(uo,{present:s||o.open,children:o.modal?i.jsx(Khe,{...a,ref:n}):i.jsx(Ghe,{...a,ref:n})})});HV.displayName=wm;var Khe=C.forwardRef((e,n)=>{const r=Ll(wm,e.__scopeDialog),s=C.useRef(null),a=un(n,r.contentRef,s);return C.useEffect(()=>{const o=s.current;if(o)return hE(o)},[]),i.jsx(WV,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ft(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ft(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&o.preventDefault()}),onFocusOutside:Ft(e.onFocusOutside,o=>o.preventDefault())})}),Ghe=C.forwardRef((e,n)=>{const r=Ll(wm,e.__scopeDialog),s=C.useRef(!1),a=C.useRef(!1);return i.jsx(WV,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l,c;(l=e.onCloseAutoFocus)==null||l.call(e,o),o.defaultPrevented||(s.current||(c=r.triggerRef.current)==null||c.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var u,d;(u=e.onInteractOutside)==null||u.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),WV=C.forwardRef((e,n)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...l}=e,c=Ll(wm,r),u=C.useRef(null),d=un(n,u);return nE(),i.jsxs(i.Fragment,{children:[i.jsx(l2,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:i.jsx(o2,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":OE(c.open),...l,ref:d,onDismiss:()=>c.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Qhe,{titleId:c.titleId}),i.jsx(Jhe,{contentRef:u,descriptionId:c.descriptionId})]})]})}),TE="DialogTitle",KV=C.forwardRef((e,n)=>{const{__scopeDialog:r,...s}=e,a=Ll(TE,r);return i.jsx(At.h2,{id:a.titleId,...s,ref:n})});KV.displayName=TE;var GV="DialogDescription",YV=C.forwardRef((e,n)=>{const{__scopeDialog:r,...s}=e,a=Ll(GV,r);return i.jsx(At.p,{id:a.descriptionId,...s,ref:n})});YV.displayName=GV;var QV="DialogClose",XV=C.forwardRef((e,n)=>{const{__scopeDialog:r,...s}=e,a=Ll(QV,r);return i.jsx(At.button,{type:"button",...s,ref:n,onClick:Ft(e.onClick,()=>a.onOpenChange(!1))})});XV.displayName=QV;function OE(e){return e?"open":"closed"}var JV="DialogTitleWarning",[Yhe,ZV]=Joe(JV,{contentName:wm,titleName:TE,docsSlug:"dialog"}),Qhe=({titleId:e})=>{const n=ZV(JV),r=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return C.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Xhe="DialogDescriptionWarning",Jhe=({contentRef:e,descriptionId:n})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ZV(Xhe).contentName}}.`;return C.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");n&&a&&(document.getElementById(n)||console.warn(s))},[s,e,n]),null},k2=BV,eH=qV,E2=UV,ay=VV,oy=HV,T2=KV,O2=YV,L2=XV;const jm=k2,Zhe=E2,tH=C.forwardRef(({className:e,...n},r)=>i.jsx(ay,{className:ut("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...n,ref:r}));tH.displayName=ay.displayName;const efe=Gg("fixed z-50 gap-4 bg-[#223447] border-white/10 p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),_h=C.forwardRef(({side:e="right",className:n,children:r,...s},a)=>i.jsxs(Zhe,{children:[i.jsx(tH,{}),i.jsxs(oy,{ref:a,className:ut(efe({side:e}),n),...s,children:[i.jsxs(L2,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[i.jsx(zi,{className:"h-4 w-4 text-[#E0D8C8]"}),i.jsx("span",{className:"sr-only",children:"Close"})]}),r]})]}));_h.displayName=oy.displayName;const Sh=({className:e,...n})=>i.jsx("div",{className:ut("flex flex-col space-y-2 text-center sm:text-left",e),...n});Sh.displayName="SheetHeader";const Ch=C.forwardRef(({className:e,...n},r)=>i.jsx(T2,{ref:r,className:ut("text-lg font-semibold text-[#E0D8C8]",e),...n}));Ch.displayName=T2.displayName;const nH=C.forwardRef(({className:e,...n},r)=>i.jsx(O2,{ref:r,className:ut("text-sm text-[#E0D8C8]/70",e),...n}));nH.displayName=O2.displayName;function tfe(e,n){return C.useReducer((r,s)=>n[r][s]??r,e)}var LE="ScrollArea",[rH]=Vi(LE),[nfe,Uo]=rH(LE),sH=C.forwardRef((e,n)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:o=600,...l}=e,[c,u]=C.useState(null),[d,f]=C.useState(null),[m,g]=C.useState(null),[x,v]=C.useState(null),[y,b]=C.useState(null),[N,j]=C.useState(0),[S,A]=C.useState(0),[P,L]=C.useState(!1),[O,R]=C.useState(!1),q=un(n,D=>u(D)),U=r0(a);return i.jsx(nfe,{scope:r,type:s,dir:U,scrollHideDelay:o,scrollArea:c,viewport:d,onViewportChange:f,content:m,onContentChange:g,scrollbarX:x,onScrollbarXChange:v,scrollbarXEnabled:P,onScrollbarXEnabledChange:L,scrollbarY:y,onScrollbarYChange:b,scrollbarYEnabled:O,onScrollbarYEnabledChange:R,onCornerWidthChange:j,onCornerHeightChange:A,children:i.jsx(At.div,{dir:U,...l,ref:q,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":S+"px",...e.style}})})});sH.displayName=LE;var iH="ScrollAreaViewport",aH=C.forwardRef((e,n)=>{const{__scopeScrollArea:r,children:s,nonce:a,...o}=e,l=Uo(iH,r),c=C.useRef(null),u=un(n,c,l.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),i.jsx(At.div,{"data-radix-scroll-area-viewport":"",...o,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});aH.displayName=iH;var Dc="ScrollAreaScrollbar",RE=C.forwardRef((e,n)=>{const{forceMount:r,...s}=e,a=Uo(Dc,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=a,c=e.orientation==="horizontal";return C.useEffect(()=>(c?o(!0):l(!0),()=>{c?o(!1):l(!1)}),[c,o,l]),a.type==="hover"?i.jsx(rfe,{...s,ref:n,forceMount:r}):a.type==="scroll"?i.jsx(sfe,{...s,ref:n,forceMount:r}):a.type==="auto"?i.jsx(oH,{...s,ref:n,forceMount:r}):a.type==="always"?i.jsx(DE,{...s,ref:n}):null});RE.displayName=Dc;var rfe=C.forwardRef((e,n)=>{const{forceMount:r,...s}=e,a=Uo(Dc,e.__scopeScrollArea),[o,l]=C.useState(!1);return C.useEffect(()=>{const c=a.scrollArea;let u=0;if(c){const d=()=>{window.clearTimeout(u),l(!0)},f=()=>{u=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),i.jsx(uo,{present:r||o,children:i.jsx(oH,{"data-state":o?"visible":"hidden",...s,ref:n})})}),sfe=C.forwardRef((e,n)=>{const{forceMount:r,...s}=e,a=Uo(Dc,e.__scopeScrollArea),o=e.orientation==="horizontal",l=D2(()=>u("SCROLL_END"),100),[c,u]=tfe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return C.useEffect(()=>{if(c==="idle"){const d=window.setTimeout(()=>u("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[c,a.scrollHideDelay,u]),C.useEffect(()=>{const d=a.viewport,f=o?"scrollLeft":"scrollTop";if(d){let m=d[f];const g=()=>{const x=d[f];m!==x&&(u("SCROLL"),l()),m=x};return d.addEventListener("scroll",g),()=>d.removeEventListener("scroll",g)}},[a.viewport,o,u,l]),i.jsx(uo,{present:r||c!=="hidden",children:i.jsx(DE,{"data-state":c==="hidden"?"hidden":"visible",...s,ref:n,onPointerEnter:Ft(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Ft(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),oH=C.forwardRef((e,n)=>{const r=Uo(Dc,e.__scopeScrollArea),{forceMount:s,...a}=e,[o,l]=C.useState(!1),c=e.orientation==="horizontal",u=D2(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,f=r.viewport.offsetHeight<r.viewport.scrollHeight;l(c?d:f)}},10);return wg(r.viewport,u),wg(r.content,u),i.jsx(uo,{present:s||o,children:i.jsx(DE,{"data-state":o?"visible":"hidden",...a,ref:n})})}),DE=C.forwardRef((e,n)=>{const{orientation:r="vertical",...s}=e,a=Uo(Dc,e.__scopeScrollArea),o=C.useRef(null),l=C.useRef(0),[c,u]=C.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=hH(c.viewport,c.content),f={...s,sizes:c,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:g=>o.current=g,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:g=>l.current=g};function m(g,x){return ufe(g,l.current,c,x)}return r==="horizontal"?i.jsx(ife,{...f,ref:n,onThumbPositionChange:()=>{if(a.viewport&&o.current){const g=a.viewport.scrollLeft,x=XL(g,c,a.dir);o.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:g=>{a.viewport&&(a.viewport.scrollLeft=g)},onDragScroll:g=>{a.viewport&&(a.viewport.scrollLeft=m(g,a.dir))}}):r==="vertical"?i.jsx(afe,{...f,ref:n,onThumbPositionChange:()=>{if(a.viewport&&o.current){const g=a.viewport.scrollTop,x=XL(g,c);o.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:g=>{a.viewport&&(a.viewport.scrollTop=g)},onDragScroll:g=>{a.viewport&&(a.viewport.scrollTop=m(g))}}):null}),ife=C.forwardRef((e,n)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Uo(Dc,e.__scopeScrollArea),[l,c]=C.useState(),u=C.useRef(null),d=un(n,u,o.onScrollbarXChange);return C.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),i.jsx(cH,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":R2(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(o.viewport){const g=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(g),mH(g,m)&&f.preventDefault()}},onResize:()=>{u.current&&o.viewport&&l&&s({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:I1(l.paddingLeft),paddingEnd:I1(l.paddingRight)}})}})}),afe=C.forwardRef((e,n)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Uo(Dc,e.__scopeScrollArea),[l,c]=C.useState(),u=C.useRef(null),d=un(n,u,o.onScrollbarYChange);return C.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),i.jsx(cH,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":R2(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(o.viewport){const g=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(g),mH(g,m)&&f.preventDefault()}},onResize:()=>{u.current&&o.viewport&&l&&s({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:I1(l.paddingTop),paddingEnd:I1(l.paddingBottom)}})}})}),[ofe,lH]=rH(Dc),cH=C.forwardRef((e,n)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:f,onResize:m,...g}=e,x=Uo(Dc,r),[v,y]=C.useState(null),b=un(n,q=>y(q)),N=C.useRef(null),j=C.useRef(""),S=x.viewport,A=s.content-s.viewport,P=Fi(f),L=Fi(u),O=D2(m,10);function R(q){if(N.current){const U=q.clientX-N.current.left,D=q.clientY-N.current.top;d({x:U,y:D})}}return C.useEffect(()=>{const q=U=>{const D=U.target;(v==null?void 0:v.contains(D))&&P(U,A)};return document.addEventListener("wheel",q,{passive:!1}),()=>document.removeEventListener("wheel",q,{passive:!1})},[S,v,A,P]),C.useEffect(L,[s,L]),wg(v,O),wg(x.content,O),i.jsx(ofe,{scope:r,scrollbar:v,hasThumb:a,onThumbChange:Fi(o),onThumbPointerUp:Fi(l),onThumbPositionChange:L,onThumbPointerDown:Fi(c),children:i.jsx(At.div,{...g,ref:b,style:{position:"absolute",...g.style},onPointerDown:Ft(e.onPointerDown,q=>{q.button===0&&(q.target.setPointerCapture(q.pointerId),N.current=v.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),R(q))}),onPointerMove:Ft(e.onPointerMove,R),onPointerUp:Ft(e.onPointerUp,q=>{const U=q.target;U.hasPointerCapture(q.pointerId)&&U.releasePointerCapture(q.pointerId),document.body.style.webkitUserSelect=j.current,x.viewport&&(x.viewport.style.scrollBehavior=""),N.current=null})})})}),D1="ScrollAreaThumb",uH=C.forwardRef((e,n)=>{const{forceMount:r,...s}=e,a=lH(D1,e.__scopeScrollArea);return i.jsx(uo,{present:r||a.hasThumb,children:i.jsx(lfe,{ref:n,...s})})}),lfe=C.forwardRef((e,n)=>{const{__scopeScrollArea:r,style:s,...a}=e,o=Uo(D1,r),l=lH(D1,r),{onThumbPositionChange:c}=l,u=un(n,m=>l.onThumbChange(m)),d=C.useRef(void 0),f=D2(()=>{d.current&&(d.current(),d.current=void 0)},100);return C.useEffect(()=>{const m=o.viewport;if(m){const g=()=>{if(f(),!d.current){const x=dfe(m,c);d.current=x,c()}};return c(),m.addEventListener("scroll",g),()=>m.removeEventListener("scroll",g)}},[o.viewport,f,c]),i.jsx(At.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Ft(e.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),v=m.clientX-x.left,y=m.clientY-x.top;l.onThumbPointerDown({x:v,y})}),onPointerUp:Ft(e.onPointerUp,l.onThumbPointerUp)})});uH.displayName=D1;var IE="ScrollAreaCorner",dH=C.forwardRef((e,n)=>{const r=Uo(IE,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?i.jsx(cfe,{...e,ref:n}):null});dH.displayName=IE;var cfe=C.forwardRef((e,n)=>{const{__scopeScrollArea:r,...s}=e,a=Uo(IE,r),[o,l]=C.useState(0),[c,u]=C.useState(0),d=!!(o&&c);return wg(a.scrollbarX,()=>{var m;const f=((m=a.scrollbarX)==null?void 0:m.offsetHeight)||0;a.onCornerHeightChange(f),u(f)}),wg(a.scrollbarY,()=>{var m;const f=((m=a.scrollbarY)==null?void 0:m.offsetWidth)||0;a.onCornerWidthChange(f),l(f)}),d?i.jsx(At.div,{...s,ref:n,style:{width:o,height:c,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function I1(e){return e?parseInt(e,10):0}function hH(e,n){const r=e/n;return isNaN(r)?0:r}function R2(e){const n=hH(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*n;return Math.max(s,18)}function ufe(e,n,r,s="ltr"){const a=R2(r),o=a/2,l=n||o,c=a-l,u=r.scrollbar.paddingStart+l,d=r.scrollbar.size-r.scrollbar.paddingEnd-c,f=r.content-r.viewport,m=s==="ltr"?[0,f]:[f*-1,0];return fH([u,d],m)(e)}function XL(e,n,r="ltr"){const s=R2(n),a=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,o=n.scrollbar.size-a,l=n.content-n.viewport,c=o-s,u=r==="ltr"?[0,l]:[l*-1,0],d=Qx(e,u);return fH([0,l],[0,c])(d)}function fH(e,n){return r=>{if(e[0]===e[1]||n[0]===n[1])return n[0];const s=(n[1]-n[0])/(e[1]-e[0]);return n[0]+s*(r-e[0])}}function mH(e,n){return e>0&&e<n}var dfe=(e,n=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return(function a(){const o={left:e.scrollLeft,top:e.scrollTop},l=r.left!==o.left,c=r.top!==o.top;(l||c)&&n(),r=o,s=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(s)};function D2(e,n){const r=Fi(e),s=C.useRef(0);return C.useEffect(()=>()=>window.clearTimeout(s.current),[]),C.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,n)},[r,n])}function wg(e,n){const r=Fi(n);xs(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,r])}var pH=sH,hfe=aH,ffe=dH;const o1=C.forwardRef(({className:e,children:n,...r},s)=>i.jsxs(pH,{ref:s,className:ut("relative overflow-hidden",e),...r,children:[i.jsx(hfe,{className:"h-full w-full rounded-[inherit]",children:n}),i.jsx(gH,{}),i.jsx(ffe,{})]}));o1.displayName=pH.displayName;const gH=C.forwardRef(({className:e,orientation:n="vertical",...r},s)=>i.jsx(RE,{ref:s,orientation:n,className:ut("flex touch-none select-none transition-colors",n==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",n==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:i.jsx(uH,{className:"relative flex-1 rounded-full bg-border"})}));gH.displayName=RE.displayName;function mfe({user:e,friends:n,publicProfiles:r}){var z,te,le,Q,T;const{t:s}=$t(),[a,o]=C.useState(null),[l,c]=C.useState(""),[u,d]=C.useState(!1),[f,m]=C.useState(null),[g,x]=C.useState(""),v=C.useRef(null),y=On(),b=(e==null?void 0:e.email)||null,{data:N}=Dt({queryKey:["my-profile",b],queryFn:async()=>{if(!b)return null;const B=await Ce.entities.UserProfile.filter({user_email:b});return(B==null?void 0:B[0])||null},enabled:!!b,retry:1}),j=Array.isArray(N==null?void 0:N.blocked_users)?N.blocked_users:[];C.useEffect(()=>{if(!b)return;const B=async()=>{try{const ee=await Ce.entities.UserProfile.filter({user_email:b});ee[0]&&await xr("UserProfile",ee[0].id,{last_seen:new Date().toISOString()},b)}catch{}};B();const H=setInterval(B,3e4);return()=>clearInterval(H)},[b]);const{data:S=[]}=Dt({queryKey:["messages",b],queryFn:async()=>{if(!b)return[];try{const B=await Ce.entities.Message.filter({sender_email:b}),H=await Ce.entities.Message.filter({recipient_email:b});return[...B,...H].sort((ee,ce)=>new Date(ee.created_date)-new Date(ce.created_date))}catch{return[]}},enabled:!!b,refetchInterval:5e3,retry:!1}),A=rn({mutationFn:B=>Ce.entities.Message.create(B),onSuccess:()=>{y.invalidateQueries({queryKey:["messages",b]}),c(""),Ve.success(s("messaging.messageSent"))}}),P=rn({mutationFn:B=>xr("Message",B,{is_read:!0})}),L=rn({mutationFn:({messageId:B,saved:H})=>xr("Message",B,{is_saved:H}),onSuccess:()=>{y.invalidateQueries({queryKey:["messages",b]})}}),O=rn({mutationFn:B=>Ce.entities.Message.delete(B),onSuccess:()=>{y.invalidateQueries({queryKey:["messages",b]}),Ve.success(s("messaging.messageDeleted"))}}),R=rn({mutationFn:({messageId:B,content:H})=>xr("Message",B,{content:H,is_edited:!0,edited_date:new Date().toISOString()},b),onSuccess:()=>{y.invalidateQueries({queryKey:["messages",b]}),m(null),x(""),Ve.success(s("messaging.messageEdited"))}}),q=()=>{!l.trim()||!a||!b||A.mutate({sender_email:b,recipient_email:a,content:l.trim()})};C.useEffect(()=>{if(!a||!b)return;const B=S.filter(ee=>ee.sender_email===a&&ee.recipient_email===b&&!ee.is_read);if(B.length===0)return;let H=!1;return(async()=>{try{await Promise.all(B.map(ee=>P.mutateAsync(ee.id))),H||y.invalidateQueries({queryKey:["messages",b]})}catch{}})(),()=>{H=!0}},[a,S,b,P,y]),C.useEffect(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[S,a]);const U=S.filter(B=>!j.includes(B.sender_email)&&!j.includes(B.recipient_email)),D=B=>{const H=r.find(he=>he.user_email===B);if(!(H!=null&&H.last_seen))return!1;const ee=new Date(H.last_seen);return new Date-ee<120*1e3},M=B=>U.filter(H=>H.sender_email===b&&H.recipient_email===B||H.sender_email===B&&H.recipient_email===b),G=B=>U.filter(H=>H.sender_email===B&&H.recipient_email===b&&!H.is_read).length,Y=U.filter(B=>B.recipient_email===b&&!B.is_read),Z=U.filter(B=>B.recipient_email===b&&B.is_saved),X=B=>j.includes(B),re=n.filter(B=>{const H=B.requester_email===b?B.recipient_email:B.requester_email;if(j.includes(H))return!1;const ee=r.find(ce=>ce.user_email===H);return ee==null?void 0:ee.enable_messaging});return!b||re.length===0?null:i.jsxs(i.Fragment,{children:[i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30",children:[i.jsx(Ze,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(et,{className:"text-stone-800 flex items-center gap-2",children:[i.jsx($ee,{className:"w-5 h-5 text-blue-600"}),s("messaging.instantMessaging")]}),i.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>d(!0),className:"relative",children:[s("messaging.inbox"),Y.length>0&&i.jsx(Ge,{className:"absolute -top-2 -right-2 bg-rose-600 text-white text-xs px-1.5",children:Y.length})]})]})}),i.jsx(Oe,{children:i.jsx(o1,{className:"h-96",children:i.jsx("div",{className:"space-y-2",children:re.map(B=>{var W,J;const H=B.requester_email===b?B.recipient_email:B.requester_email,ee=r.find(pe=>pe.user_email===H),ce=D(H),he=G(H);return i.jsxs("button",{onClick:()=>o(H),className:`w-full flex items-center gap-3 p-3 rounded-lg border transition-all ${a===H?"bg-blue-50 border-blue-300":"hover:bg-stone-50 border-stone-200"}`,children:[i.jsxs("div",{className:"relative",children:[i.jsxs(_l,{className:"w-10 h-10",children:[i.jsx(pc,{src:ee==null?void 0:ee.avatar_url}),i.jsx(Sl,{className:"bg-amber-200 text-amber-800",children:((W=ee==null?void 0:ee.display_name)==null?void 0:W[0])||((J=H==null?void 0:H[0])==null?void 0:J.toUpperCase())||"?"})]}),i.jsx(aO,{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 ${ce?"text-emerald-500 fill-emerald-500":"text-stone-400 fill-stone-400"}`})]}),i.jsxs("div",{className:"flex-1 text-left min-w-0",children:[i.jsx("p",{className:"font-medium text-stone-800 truncate",children:(ee==null?void 0:ee.display_name)||H}),i.jsx("p",{className:"text-xs text-stone-500",children:s(ce?"messaging.online":"messaging.offline")})]}),he>0&&i.jsx(Ge,{className:"bg-rose-600 text-white",children:he})]},B.id)})})})})]}),i.jsx(jm,{open:!!a,onOpenChange:()=>o(null),children:i.jsxs(_h,{className:"w-full sm:max-w-lg flex flex-col",style:{paddingTop:"calc(1rem + var(--safe-area-top))"},children:[i.jsx(Sh,{children:i.jsxs(Ch,{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsxs(_l,{className:"w-10 h-10",children:[i.jsx(pc,{src:(z=r.find(B=>B.user_email===a))==null?void 0:z.avatar_url}),i.jsx(Sl,{className:"bg-amber-200 text-amber-800",children:((le=(te=r.find(B=>B.user_email===a))==null?void 0:te.display_name)==null?void 0:le[0])||((Q=a==null?void 0:a[0])==null?void 0:Q.toUpperCase())||"?"})]}),i.jsx(aO,{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 ${D(a)?"text-emerald-500 fill-emerald-500":"text-stone-400 fill-stone-400"}`})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:((T=r.find(B=>B.user_email===a))==null?void 0:T.display_name)||a}),i.jsx("p",{className:"text-xs text-stone-500 font-normal",children:D(a)?s("messaging.online"):s("messaging.offline")})]})]})}),i.jsx(o1,{className:"flex-1 px-4 py-4",ref:v,children:i.jsx("div",{className:"space-y-3",children:M(a).map(B=>{const H=B.sender_email===b,ee=f===B.id;return i.jsx("div",{className:`flex ${H?"justify-end":"justify-start"}`,children:i.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${H?"bg-blue-600 text-white":"bg-stone-100 text-stone-800"}`,children:ee?i.jsxs("div",{className:"space-y-2",children:[i.jsx(at,{value:g,onChange:ce=>x(ce.target.value),className:"text-sm",autoFocus:!0}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(ye,{size:"sm",onClick:()=>R.mutate({messageId:B.id,content:g}),disabled:!g.trim()||R.isPending,children:s("common.save")}),i.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>{m(null),x("")},children:s("common.cancel")})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm break-words",children:B.content}),B.is_edited&&i.jsxs("p",{className:`text-xs italic mt-1 ${H?"text-blue-100":"text-stone-500"}`,children:["(",s("messaging.edited"),")"]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("p",{className:`text-xs ${H?"text-blue-100":"text-stone-500"}`,children:new Date(B.created_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),H?i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>{m(B.id),x(B.content)},className:"hover:opacity-70",children:i.jsx(Hee,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>{window.confirm("Delete this message?")&&O.mutate(B.id)},className:"hover:opacity-70",children:i.jsx(yc,{className:"w-3 h-3"})})]}):i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>L.mutate({messageId:B.id,saved:!B.is_saved}),className:"hover:opacity-70",children:i.jsx(Zee,{className:`w-3 h-3 ${B.is_saved?"fill-current":""}`})}),i.jsx("button",{onClick:()=>{window.confirm(s("messaging.deleteConfirm"))&&O.mutate(B.id)},className:"hover:opacity-70",children:i.jsx(yc,{className:"w-3 h-3"})})]})]})]})})},B.id)})})}),i.jsxs("div",{className:"border-t p-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{placeholder:s("messaging.typeMessage"),value:l,onChange:B=>c(B.target.value),onKeyPress:B=>B.key==="Enter"&&q(),disabled:X(a)}),i.jsx(ye,{onClick:q,disabled:!l.trim()||A.isPending||X(a),className:"bg-blue-600 hover:bg-blue-700",children:i.jsx(I4,{className:"w-4 h-4"})})]}),X(a)?i.jsx("p",{className:"text-xs text-rose-600 mt-2",children:s("messaging.youBlockedUser")}):!D(a)&&i.jsx("p",{className:"text-xs text-emerald-600 mt-2",children:s("messaging.offlineNote")})]})]})}),i.jsx(jm,{open:u,onOpenChange:d,children:i.jsxs(_h,{className:"w-full sm:max-w-lg",style:{paddingTop:"calc(1rem + var(--safe-area-top))"},children:[i.jsx(Sh,{children:i.jsx(Ch,{children:s("messaging.messageInbox")})}),i.jsx(o1,{className:"h-full mt-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold text-stone-800 mb-2",children:[s("messaging.unreadMessages")," (",Y.length,")"]}),Y.length===0?i.jsx("p",{className:"text-sm text-stone-500 py-4",children:s("messaging.noUnread")}):i.jsx("div",{className:"space-y-2",children:Y.map(B=>{var ee,ce,he;const H=r.find(W=>W.user_email===B.sender_email);return i.jsx(Ee,{className:"bg-blue-50 border-blue-200",children:i.jsx(Oe,{className:"p-3",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs(_l,{className:"w-8 h-8",children:[i.jsx(pc,{src:H==null?void 0:H.avatar_url}),i.jsx(Sl,{className:"bg-amber-200 text-amber-800 text-xs",children:((ee=H==null?void 0:H.display_name)==null?void 0:ee[0])||((he=(ce=B.sender_email)==null?void 0:ce[0])==null?void 0:he.toUpperCase())||"?"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm text-stone-800",children:(H==null?void 0:H.display_name)||B.sender_email}),i.jsx("p",{className:"text-sm text-stone-700 break-words",children:B.content}),i.jsx("p",{className:"text-xs text-stone-500 mt-1",children:new Date(B.created_date).toLocaleString()})]}),i.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>{d(!1),o(B.sender_email)},children:s("messaging.reply")})]})})},B.id)})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold text-stone-800 mb-2",children:[s("messaging.savedMessages")," (",Z.length,")"]}),Z.length===0?i.jsx("p",{className:"text-sm text-stone-500 py-4",children:s("messaging.noSaved")}):i.jsx("div",{className:"space-y-2",children:Z.map(B=>{var ee,ce,he;const H=r.find(W=>W.user_email===B.sender_email);return i.jsx(Ee,{className:"border-stone-200",children:i.jsx(Oe,{className:"p-3",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs(_l,{className:"w-8 h-8",children:[i.jsx(pc,{src:H==null?void 0:H.avatar_url}),i.jsx(Sl,{className:"bg-amber-200 text-amber-800 text-xs",children:((ee=H==null?void 0:H.display_name)==null?void 0:ee[0])||((he=(ce=B.sender_email)==null?void 0:ce[0])==null?void 0:he.toUpperCase())||"?"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm text-stone-800",children:(H==null?void 0:H.display_name)||B.sender_email}),i.jsx("p",{className:"text-sm text-stone-700 break-words",children:B.content}),i.jsx("p",{className:"text-xs text-stone-500 mt-1",children:new Date(B.created_date).toLocaleString()})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>L.mutate({messageId:B.id,saved:!1}),children:i.jsx(zi,{className:"w-4 h-4"})}),i.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>{window.confirm(s("messaging.deleteConfirm"))&&O.mutate(B.id)},children:i.jsx(yc,{className:"w-4 h-4"})})]})]})})},B.id)})})]})]})})]})})]})}function JL({children:e,className:n="",truncate:r=!1,lines:s=null,title:a=null,as:o="span",...l}){const c="min-w-0 overflow-wrap-anywhere break-word";let u="";r&&(u=s?`line-clamp-${s}`:"truncate");const d=r&&!a?typeof e=="string"?e:void 0:a;return i.jsx(o,{className:ut(c,u,n),title:d,...l,children:e})}function xH(){if(cs)return null;const{t:e}=$t(),[n,r]=C.useState("discover"),[s,a]=C.useState(""),[o,l]=C.useState(""),[c,u]=C.useState({country:"",city:"",state:"",zipCode:""}),[d,f]=C.useState({country:"",city:"",state:"",zipCode:""}),[m,g]=C.useState(!1),x=On(),{data:v,isLoading:y}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me(),staleTime:1e4,retry:2,refetchOnMount:"always"}),b=ry(v),{data:N}=Dt({queryKey:["user-profile",v==null?void 0:v.email],queryFn:async()=>(await Ce.entities.UserProfile.filter({user_email:v==null?void 0:v.email}))[0],enabled:!!(v!=null&&v.email)}),j=Array.isArray(N==null?void 0:N.blocked_users)?N.blocked_users:[],{data:S=[]}=Dt({queryKey:["connections",v==null?void 0:v.email],queryFn:()=>Ce.entities.UserConnection.filter({follower_email:v==null?void 0:v.email}),enabled:!!(v!=null&&v.email)}),{data:A=[]}=Dt({queryKey:["friendships",v==null?void 0:v.email],queryFn:async()=>{const T=await Ce.entities.Friendship.filter({requester_email:v==null?void 0:v.email}),B=await Ce.entities.Friendship.filter({recipient_email:v==null?void 0:v.email});return[...T,...B]},enabled:!!(v!=null&&v.email)}),{data:P=[]}=Dt({queryKey:["friend-requests",v==null?void 0:v.email],queryFn:()=>Ce.entities.Friendship.filter({recipient_email:v==null?void 0:v.email,status:"pending"}),enabled:!!(v!=null&&v.email)}),{data:L=[]}=Dt({queryKey:["community-unread-messages",v==null?void 0:v.email],queryFn:async()=>v!=null&&v.email?Ce.entities.Message.filter({recipient_email:v.email,is_read:!1}):[],enabled:!!(v!=null&&v.email),refetchInterval:5e3,retry:!1}),{data:O=[]}=Dt({queryKey:["all-public-profiles"],queryFn:()=>Ce.entities.UserProfile.filter({is_public:!0})}),R=ve.useMemo(()=>{let T=[...O].filter(B=>!j.includes(B.user_email));return o.trim()&&(T=T.filter(B=>{var H,ee;return((H=B.display_name)==null?void 0:H.toLowerCase().includes(o.toLowerCase()))||((ee=B.user_email)==null?void 0:ee.toLowerCase().includes(o.toLowerCase()))})),(d.country||d.city||d.state||d.zipCode)&&(T=T.filter(B=>{var ee,ce,he,W;if(!B.show_location)return!1;let H=!0;return d.country&&(H=H&&((ee=B.country)==null?void 0:ee.toLowerCase().includes(d.country.toLowerCase()))),d.city&&(H=H&&((ce=B.city)==null?void 0:ce.toLowerCase().includes(d.city.toLowerCase()))),d.state&&(H=H&&((he=B.state_province)==null?void 0:he.toLowerCase().includes(d.state.toLowerCase()))),d.zipCode&&(H=H&&((W=B.postal_code)==null?void 0:W.toLowerCase().includes(d.zipCode.toLowerCase()))),H})),T},[O,o,d,j]),q=rn({mutationFn:T=>Ce.entities.UserConnection.create({follower_email:v==null?void 0:v.email,following_email:T,status:"active"}),onSuccess:()=>{x.invalidateQueries({queryKey:["connections"]})}}),U=rn({mutationFn:T=>Ce.entities.UserConnection.delete(T),onSuccess:()=>{x.invalidateQueries({queryKey:["connections"]})}}),D=rn({mutationFn:T=>Ce.entities.Friendship.create({requester_email:v==null?void 0:v.email,recipient_email:T,status:"pending"}),onSuccess:()=>{x.invalidateQueries({queryKey:["friendships"]})}}),M=rn({mutationFn:T=>xr("Friendship",T,{status:"accepted"}),onSuccess:()=>{x.invalidateQueries({queryKey:["friendships"]}),x.invalidateQueries({queryKey:["friend-requests"]})}}),G=rn({mutationFn:T=>xr("Friendship",T,{status:"declined"}),onSuccess:()=>{x.invalidateQueries({queryKey:["friend-requests"]})}}),Y=rn({mutationFn:T=>Ce.entities.Friendship.delete(T),onSuccess:()=>{x.invalidateQueries({queryKey:["friendships"]})}}),Z=T=>S.some(B=>B.following_email===T),X=T=>S.find(B=>B.following_email===T),re=T=>A.find(B=>(B.requester_email===T||B.recipient_email===T)&&(B.requester_email===(v==null?void 0:v.email)||B.recipient_email===(v==null?void 0:v.email))),z=T=>{const B=re(T);return(B==null?void 0:B.status)==="accepted"},te=T=>{const B=re(T);return(B==null?void 0:B.status)==="pending"},le=A.filter(T=>T.status==="accepted"),Q=L.length;return b?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42]",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-[#e8d5b7] mb-2",children:e("nav.community")}),i.jsx("p",{className:"text-[#e8d5b7]/70",children:e("communityExtended.connectEnthusiasts")})]}),i.jsxs(Ec,{value:n,onValueChange:r,className:"space-y-6",children:[i.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",children:i.jsxs(Tc,{className:"bg-[#223447]/60 border border-[#E0D8C8]/15 inline-flex min-w-full sm:w-auto",children:[i.jsxs(En,{value:"discover",className:"flex-1 sm:flex-initial text-xs sm:text-sm px-2 sm:px-4",children:[i.jsx(fs,{className:"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline ml-2",children:e("communityExtended.discover")})]}),i.jsxs(En,{value:"friends",className:"flex-1 sm:flex-initial text-xs sm:text-sm px-2 sm:px-4",children:[i.jsx(dO,{className:"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline ml-2",children:e("communityExtended.friends")})]}),i.jsxs(En,{value:"requests",className:"flex-1 sm:flex-initial text-xs sm:text-sm px-2 sm:px-4 relative",children:[i.jsx(Kp,{className:"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline ml-2",children:e("communityExtended.requests")}),P.length>0&&i.jsx(Ge,{className:"absolute -top-1 -right-0 sm:relative sm:top-0 sm:right-0 sm:ml-1 bg-amber-600 text-white text-[10px] sm:text-xs px-1 sm:px-1.5 py-0 min-w-[14px] sm:min-w-[16px]",children:P.length})]}),i.jsxs(En,{value:"inbox",className:"flex-1 sm:flex-initial text-xs sm:text-sm px-2 sm:px-4 relative",children:[i.jsx(jx,{className:"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline ml-2",children:e("communityExtended.inbox")}),Q>0&&i.jsx(Ge,{className:"absolute -top-1 -right-0 sm:relative sm:top-0 sm:right-0 sm:ml-1 bg-rose-600 text-white text-[10px] sm:text-xs px-1 sm:px-1.5 py-0 min-w-[14px] sm:min-w-[16px]",children:Q})]}),i.jsxs(En,{value:"following",className:"flex-1 sm:flex-initial text-xs sm:text-sm px-2 sm:px-4",children:[i.jsx(nm,{className:"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline ml-2",children:e("nav.following")})]}),i.jsxs(En,{value:"myprofile",className:"flex-1 sm:flex-initial text-xs sm:text-sm px-2 sm:px-4",children:[i.jsx(hm,{className:"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline ml-2",children:e("nav.profile")})]}),i.jsxs(En,{value:"invite",className:"flex-1 sm:flex-initial text-xs sm:text-sm px-2 sm:px-4",children:[i.jsx(I4,{className:"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline ml-2",children:e("communityExtended.invite")})]})]})}),i.jsxs(Tn,{value:"discover",className:"space-y-6",children:[!(N!=null&&N.is_public)&&i.jsx(Ee,{className:"bg-[#1E2F43] border-[#E0D8C8]/15",children:i.jsxs(Oe,{className:"p-4",children:[i.jsxs("p",{className:"text-sm text-[#E0D8C8]/70 mb-2",children:[i.jsx("strong",{children:e("communityExtended.profilePrivate")})," ",e("communityExtended.profilePrivateDesc")]}),i.jsx("a",{href:xt("Profile"),children:i.jsx(ye,{size:"sm",variant:"outline",children:e("communityExtended.updateSettings")})})]})}),i.jsxs(Ee,{className:"bg-[#223447] border-[#E0D8C8]/15",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#E0D8C8]",children:e("communityExtended.findUsers")})}),i.jsx(Oe,{children:i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(fs,{className:"absolute left-3 top-3 w-4 h-4 text-[#E0D8C8]/50"}),i.jsx(at,{placeholder:e("communityExtended.searchByName"),value:s,onChange:T=>a(T.target.value),onKeyPress:T=>T.key==="Enter"&&l(s),className:"pl-10"})]}),i.jsxs(ye,{onClick:()=>{l(s),g(!0)},children:[i.jsx(fs,{className:"w-4 h-4 mr-2"}),e("common.search")]})]}),i.jsxs("div",{className:"space-y-3 p-4 bg-[#1E2F43] rounded-lg border border-[#E0D8C8]/15",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(D4,{className:"w-4 h-4 text-[#E0D8C8]/70"}),i.jsx("h4",{className:"font-semibold text-[#E0D8C8] text-sm",children:e("communityExtended.searchByLocation")})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsxs(pn,{value:c.country||"__ALL__",onValueChange:T=>u({...c,country:T==="__ALL__"?"":T}),children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:e("communityExtended.selectCountry")})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"__ALL__",children:e("communityExtended.allCountries")}),i.jsx(ot,{value:"United States",children:e("countries.unitedStates","United States")}),i.jsx(ot,{value:"Canada",children:e("countries.canada","Canada")}),i.jsx(ot,{value:"United Kingdom",children:e("countries.unitedKingdom","United Kingdom")}),i.jsx(ot,{value:"Ireland",children:e("countries.ireland","Ireland")}),i.jsx(ot,{value:"Australia",children:e("countries.australia","Australia")}),i.jsx(ot,{value:"New Zealand",children:e("countries.newZealand","New Zealand")}),i.jsx(ot,{value:"Germany",children:e("countries.germany","Germany")}),i.jsx(ot,{value:"France",children:e("countries.france","France")}),i.jsx(ot,{value:"Italy",children:e("countries.italy","Italy")}),i.jsx(ot,{value:"Spain",children:e("countries.spain","Spain")}),i.jsx(ot,{value:"Netherlands",children:e("countries.netherlands","Netherlands")}),i.jsx(ot,{value:"Belgium",children:e("countries.belgium","Belgium")}),i.jsx(ot,{value:"Switzerland",children:e("countries.switzerland","Switzerland")}),i.jsx(ot,{value:"Austria",children:e("countries.austria","Austria")}),i.jsx(ot,{value:"Denmark",children:e("countries.denmark","Denmark")}),i.jsx(ot,{value:"Sweden",children:e("countries.sweden","Sweden")}),i.jsx(ot,{value:"Norway",children:e("countries.norway","Norway")}),i.jsx(ot,{value:"Finland",children:e("countries.finland","Finland")}),i.jsx(ot,{value:"Japan",children:e("countries.japan","Japan")}),i.jsx(ot,{value:"South Korea",children:e("countries.southKorea","South Korea")})]})]}),i.jsx(at,{placeholder:e("communityExtended.cityPlaceholder"),value:c.city,onChange:T=>u({...c,city:T.target.value})}),i.jsx(at,{placeholder:e("communityExtended.statePlaceholder"),value:c.state,onChange:T=>u({...c,state:T.target.value})}),i.jsx(at,{placeholder:e("communityExtended.zipPlaceholder"),value:c.zipCode,onChange:T=>u({...c,zipCode:T.target.value})})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ye,{onClick:()=>{f(c),g(!0)},className:"flex-1",children:[i.jsx(fs,{className:"w-4 h-4 mr-2"}),e("communityExtended.searchLocation")]}),i.jsx(ye,{variant:"outline",onClick:()=>{u({country:"",city:"",state:"",zipCode:""}),f({country:"",city:"",state:"",zipCode:""})},children:e("communityExtended.clear")})]})]})]})})]}),i.jsx(jm,{open:m,onOpenChange:g,children:i.jsxs(_h,{side:"right",className:"w-full sm:max-w-2xl overflow-y-auto",children:[i.jsxs(Sh,{children:[i.jsx(Ch,{children:e("communityExtended.searchResults")}),i.jsxs(nH,{children:[R.filter(T=>T.user_email!==(v==null?void 0:v.email)).length," ",e("communityExtended.usersFound")]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("a",{href:xt("Home"),className:"flex-1",children:i.jsx(ye,{variant:"outline",className:"w-full",children:e("nav.home")})}),i.jsx(ye,{variant:"outline",className:"flex-1",onClick:()=>g(!1),children:e("communityExtended.returnToSearch")})]})]}),i.jsxs("div",{className:"space-y-2 mt-6",children:[R.filter(T=>T.user_email!==(v==null?void 0:v.email)).map(T=>{var B,H,ee;return i.jsx("div",{className:"p-4 bg-[#223447] border border-[#E0D8C8]/15 rounded-lg hover:border-[#A35C5C]/50 transition-colors",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(_l,{className:"w-12 h-12 flex-shrink-0",children:[i.jsx(pc,{src:T.avatar_url}),i.jsx(Sl,{className:"bg-[#A35C5C] text-[#E0D8C8]",children:((B=T.display_name)==null?void 0:B[0])||((ee=(H=T.user_email)==null?void 0:H[0])==null?void 0:ee.toUpperCase())||"?"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("a",{href:xt(`PublicProfile?email=${encodeURIComponent(T.user_email)}`),children:i.jsx(JL,{as:"h3",className:"font-semibold text-[#E0D8C8] hover:text-[#A35C5C]",truncate:!0,children:T.display_name||T.user_email})}),T.bio&&i.jsx(JL,{as:"p",className:"text-sm text-[#E0D8C8]/70",lines:1,children:T.bio}),T.show_location&&(T.city||T.state_province||T.country)&&i.jsxs("p",{className:"text-xs text-[#E0D8C8]/60 mt-1",children:["📍 ",[T.city,T.state_province,T.country].filter(Boolean).join(", ")]})]}),i.jsxs("div",{className:"flex flex-col gap-2 flex-shrink-0 min-w-0",children:[z(T.user_email)?i.jsxs(Ge,{variant:"outline",className:"text-emerald-700 border-emerald-300 whitespace-nowrap text-center",children:[i.jsx(uO,{className:"w-3 h-3 mr-1"}),e("communityExtended.friendStatus")]}):te(T.user_email)?i.jsxs(Ge,{variant:"outline",className:"text-amber-700 border-amber-300 whitespace-nowrap text-center",children:[i.jsx(Gw,{className:"w-3 h-3 mr-1"}),e("communityExtended.pendingStatus")]}):i.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>D.mutate(T.user_email),disabled:D.isPending,className:"border-emerald-300 text-emerald-700 hover:bg-emerald-50 whitespace-nowrap w-full",children:[i.jsx(Kp,{className:"w-4 h-4 mr-1"}),e("communityExtended.addFriend")]}),Z(T.user_email)?i.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>{var ce;return U.mutate((ce=X(T.user_email))==null?void 0:ce.id)},disabled:U.isPending,className:"whitespace-nowrap w-full",children:[i.jsx(uO,{className:"w-4 h-4 mr-1"}),e("communityExtended.following")]}):i.jsxs(ye,{size:"sm",onClick:()=>q.mutate(T.user_email),disabled:q.isPending,className:"whitespace-nowrap w-full",children:[i.jsx(Kp,{className:"w-4 h-4 mr-1"}),e("communityExtended.follow")]})]})]})},T.id)}),R.filter(T=>T.user_email!==(v==null?void 0:v.email)).length===0&&i.jsxs("div",{className:"text-center py-12 text-[#E0D8C8]/70",children:[i.jsx(nm,{className:"w-12 h-12 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:e("communityExtended.noUsersFound")})]})]})]})})]}),i.jsx(Tn,{value:"inbox",className:"space-y-6",children:N!=null&&N.enable_messaging?le.length>0&&v?i.jsx(mfe,{user:v,friends:le,publicProfiles:O||[]}):i.jsx(Ee,{className:"bg-[#223447] border-[#E0D8C8]/15",children:i.jsxs(Oe,{className:"py-12 text-center text-[#E0D8C8]/70",children:[i.jsx(Cu,{className:"w-12 h-12 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:e("communityExtended.noFriendsToMessage")}),i.jsx("p",{className:"text-sm mt-2",children:e("communityExtended.noFriendsToMessageDesc")})]})}):i.jsx(Ee,{className:"bg-[#1E2F43] border-[#E0D8C8]/15",children:i.jsxs(Oe,{className:"p-6 text-center",children:[i.jsx(Cu,{className:"w-12 h-12 mx-auto mb-4 text-[#E0D8C8]/70"}),i.jsx("h3",{className:"font-semibold text-[#E0D8C8] mb-2",children:e("messaging.messagingDisabled")}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70 mb-4",children:e("messaging.messagingDisabledDesc")}),i.jsx("a",{href:xt("Profile"),children:i.jsxs(ye,{children:[i.jsx(Wp,{className:"w-4 h-4 mr-2"}),e("messaging.goToSettings")]})})]})})}),i.jsx(Tn,{value:"friends",className:"space-y-6",children:le.length===0?i.jsx(Ee,{className:"bg-[#223447] border-[#E0D8C8]/15",children:i.jsxs(Oe,{className:"py-12 text-center text-[#E0D8C8]/70",children:[i.jsx(dO,{className:"w-12 h-12 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:e("communityExtended.noFriendsYet")}),i.jsx("p",{className:"text-sm mt-2",children:e("communityExtended.noFriendsYetDesc")})]})}):i.jsxs(Ee,{className:"bg-[#223447] border-[#E0D8C8]/15",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#E0D8C8]",children:e("communityExtended.yourFriends")})}),i.jsx(Oe,{className:"space-y-3",children:le.map(T=>{var ee,ce;const B=T.requester_email===(v==null?void 0:v.email)?T.recipient_email:T.requester_email,H=R.find(he=>he.user_email===B);return i.jsx(Ee,{className:"bg-[#1E2F43] border-[#E0D8C8]/15",children:i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(_l,{className:"w-12 h-12 flex-shrink-0",children:[i.jsx(pc,{src:H==null?void 0:H.avatar_url}),i.jsx(Sl,{className:"bg-[#A35C5C] text-[#E0D8C8]",children:((ee=H==null?void 0:H.display_name)==null?void 0:ee[0])||((ce=B==null?void 0:B[0])==null?void 0:ce.toUpperCase())||"?"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("a",{href:xt(`PublicProfile?email=${encodeURIComponent(B)}`),children:i.jsx("h3",{className:"font-semibold text-[#E0D8C8] hover:text-[#A35C5C] truncate",children:(H==null?void 0:H.display_name)||B})}),(H==null?void 0:H.bio)&&i.jsx("p",{className:"text-sm text-[#E0D8C8]/70 line-clamp-1",children:H.bio}),(H==null?void 0:H.show_location)&&((H==null?void 0:H.city)||(H==null?void 0:H.state_province)||(H==null?void 0:H.country))&&i.jsxs("p",{className:"text-xs text-[#E0D8C8]/60 mt-1 truncate",children:["📍 ",[H.city,H.state_province,H.country].filter(Boolean).join(", ")]})]}),i.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>{window.confirm(e("communityExtended.removeFriendConfirm"))&&Y.mutate(T.id)},disabled:Y.isPending,className:"text-rose-600 hover:bg-rose-50 flex-shrink-0",children:[i.jsx(b1,{className:"w-4 h-4 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:e("communityExtended.remove")})]})]})})},T.id)})})]})}),i.jsx(Tn,{value:"requests",className:"space-y-6",children:P.length===0?i.jsx(Ee,{className:"bg-[#223447] border-[#E0D8C8]/15",children:i.jsxs(Oe,{className:"py-12 text-center text-[#E0D8C8]/70",children:[i.jsx(Cu,{className:"w-12 h-12 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:e("communityExtended.noPendingRequests")}),i.jsx("p",{className:"text-sm mt-2",children:e("communityExtended.noPendingRequestsDesc")})]})}):i.jsxs(Ee,{className:"bg-[#223447] border-[#E0D8C8]/15",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#E0D8C8]",children:e("communityExtended.pendingFriendRequests")})}),i.jsx(Oe,{className:"space-y-3",children:P.map(T=>{var H,ee,ce;const B=R.find(he=>he.user_email===T.requester_email);return i.jsx(Ee,{className:"bg-[#1E2F43] border-[#E0D8C8]/15",children:i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(_l,{className:"w-12 h-12 flex-shrink-0",children:[i.jsx(pc,{src:B==null?void 0:B.avatar_url}),i.jsx(Sl,{className:"bg-[#A35C5C] text-[#E0D8C8]",children:((H=B==null?void 0:B.display_name)==null?void 0:H[0])||((ce=(ee=T.requester_email)==null?void 0:ee[0])==null?void 0:ce.toUpperCase())||"?"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("a",{href:xt(`PublicProfile?email=${encodeURIComponent(T.requester_email)}`),children:i.jsx("h3",{className:"font-semibold text-[#E0D8C8] hover:text-[#A35C5C] truncate",children:(B==null?void 0:B.display_name)||T.requester_email})}),i.jsx("p",{className:"text-xs text-[#E0D8C8]/60",children:e("communityExtended.wantsToBeFriends")})]}),i.jsxs("div",{className:"flex flex-col gap-2 flex-shrink-0",children:[i.jsxs(ye,{size:"sm",onClick:()=>M.mutate(T.id),disabled:M.isPending,className:"bg-emerald-600 hover:bg-emerald-700 whitespace-nowrap",children:[i.jsx(ei,{className:"w-4 h-4 sm:mr-1"}),i.jsx("span",{className:"hidden sm:inline",children:e("communityExtended.acceptRequest")})]}),i.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>G.mutate(T.id),disabled:G.isPending,className:"text-rose-600 hover:bg-rose-50 whitespace-nowrap",children:[i.jsx(ha,{className:"w-4 h-4 sm:mr-1"}),i.jsx("span",{className:"hidden sm:inline",children:e("communityExtended.declineRequest")})]})]})]})})},T.id)})})]})}),i.jsx(Tn,{value:"following",className:"space-y-4",children:S.length===0?i.jsx(Ee,{className:"bg-[#223447] border-[#E0D8C8]/15",children:i.jsxs(Oe,{className:"py-12 text-center text-[#E0D8C8]/70",children:[i.jsx(nm,{className:"w-12 h-12 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:e("community.notFollowingYet","Not Following Anyone")}),i.jsx("p",{className:"text-sm mt-2",children:e("community.notFollowingYetDesc","Discover and follow pipe enthusiasts in the community to see their collections")}),i.jsx("a",{href:xt("Community"),children:i.jsxs(ye,{className:"mt-4",onClick:()=>r("discover"),children:[i.jsx(fs,{className:"w-4 h-4 mr-2"}),e("community.exploreCommunity","Explore Community")]})})]})}):S.map(T=>{var H,ee,ce;const B=R.find(he=>he.user_email===T.following_email);return i.jsx(Ee,{className:"bg-[#223447] border-[#E0D8C8]/15",children:i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(_l,{className:"w-12 h-12 flex-shrink-0",children:[i.jsx(pc,{src:B==null?void 0:B.avatar_url}),i.jsx(Sl,{className:"bg-[#A35C5C] text-[#E0D8C8]",children:((H=B==null?void 0:B.display_name)==null?void 0:H[0])||((ce=(ee=T.following_email)==null?void 0:ee[0])==null?void 0:ce.toUpperCase())||"?"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("a",{href:xt(`PublicProfile?email=${encodeURIComponent(T.following_email)}`),children:i.jsx("h3",{className:"font-semibold text-[#E0D8C8] hover:text-[#A35C5C] truncate",children:(B==null?void 0:B.display_name)||T.following_email})}),(B==null?void 0:B.bio)&&i.jsx("p",{className:"text-sm text-[#E0D8C8]/70 line-clamp-1",children:B.bio}),(B==null?void 0:B.show_location)&&((B==null?void 0:B.city)||(B==null?void 0:B.state_province)||(B==null?void 0:B.country))&&i.jsxs("p",{className:"text-xs text-[#E0D8C8]/60 mt-1 truncate",children:["📍 ",[B.city,B.state_province,B.country].filter(Boolean).join(", ")]})]}),i.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>U.mutate(T.id),disabled:U.isPending,className:"flex-shrink-0",children:[i.jsx(b1,{className:"w-4 h-4 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:e("communityExtended.remove")})]})]})})},T.id)})}),i.jsx(Tn,{value:"myprofile",children:i.jsxs(Ee,{className:"bg-[#223447] border-[#E0D8C8]/15",children:[i.jsx(Ze,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(et,{className:"text-[#E0D8C8]",children:e("communityExtended.yourPublicProfile")}),(v==null?void 0:v.email)&&i.jsx("a",{href:xt(`PublicProfile?email=${encodeURIComponent(v.email)}${N!=null&&N.is_public?"":"&preview=true"}`),children:i.jsxs(ye,{variant:"outline",size:"sm",children:[i.jsx(Yw,{className:"w-4 h-4 mr-2"}),N!=null&&N.is_public?e("communityExtended.viewProfile"):e("communityExtended.previewProfile")]})})]})}),i.jsx(Oe,{className:"space-y-4",children:N!=null&&N.is_public?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"p-4 bg-[#2EAF6F]/20 border border-[#2EAF6F]/30 rounded-lg",children:i.jsxs("p",{className:"text-sm text-[#2EAF6F]",children:["✅ ",e("communityExtended.profilePublic")]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-semibold text-[#E0D8C8]",children:e("communityExtended.profileSettings")}),i.jsxs("p",{className:"text-sm text-[#E0D8C8]/70",children:[e("communityExtended.displayName"),": ",i.jsx("strong",{children:N.display_name||e("communityExtended.notSet")})]}),N.bio&&i.jsxs("p",{className:"text-sm text-[#E0D8C8]/70",children:[e("communityExtended.bio"),": ",N.bio]}),i.jsxs("p",{className:"text-sm text-[#E0D8C8]/70",children:[e("communityExtended.commentsLabel"),": ",i.jsx("strong",{children:N.allow_comments?e("community.commentsEnabled"):e("community.commentsDisabled")})]})]}),i.jsx("a",{href:xt("Profile"),children:i.jsxs(ye,{variant:"outline",className:"w-full",children:[i.jsx(Wp,{className:"w-4 h-4 mr-2"}),e("communityExtended.editProfileSettings")]})})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"p-4 bg-[#1E2F43] border border-[#E0D8C8]/15 rounded-lg",children:i.jsx("p",{className:"text-sm text-[#E0D8C8]/70 mb-2",children:e("communityExtended.profileCurrentlyPrivate")})}),i.jsx("a",{href:xt("Profile"),children:i.jsxs(ye,{className:"w-full",children:[i.jsx(Wp,{className:"w-4 h-4 mr-2"}),e("communityExtended.makeProfilePublic")]})})]})})]})}),i.jsx(Tn,{value:"invite",children:i.jsxs(Ee,{className:"bg-[#223447] border-[#E0D8C8]/15",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#E0D8C8]",children:e("communityExtended.inviteFriends")})}),i.jsxs(Oe,{children:[i.jsx("p",{className:"text-[#E0D8C8]/70 mb-4",children:e("communityExtended.inviteFriendsDesc")}),i.jsx("a",{href:xt("Invite"),children:i.jsxs(ye,{children:[i.jsx(Cu,{className:"w-4 h-4 mr-2"}),e("communityExtended.sendInvitations")]})})]})]})})]})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42]",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsx(Ac,{featureName:e("communityExtended.communityFeatures"),description:e("communityExtended.upgradePromptDesc")})})})}function vH(){var u,d,f,m,g,x,v,y,b,N,j,S,A,P,L,O,R,q,U,D,M,G,Y,Z,X,re;const{t:e}=$t(),[n,r]=C.useState({}),s=z=>{r(te=>({...te,[z]:!te[z]}))},a=({title:z,children:te})=>i.jsxs("div",{style:{marginBottom:32},children:[i.jsx("h2",{className:"text-2xl font-bold text-[#E0D8C8] mb-4",children:z}),i.jsx("div",{className:"space-y-3",children:te})]}),o=({id:z,q:te,children:le})=>i.jsxs(Ee,{className:"bg-white border-gray-200 overflow-hidden",children:[i.jsxs("button",{onClick:()=>s(z),className:"w-full text-left p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[i.jsx("span",{className:"font-semibold text-gray-900 pr-4",children:te}),i.jsx(La,{className:`w-5 h-5 text-gray-600 flex-shrink-0 transition-transform ${n[z]?"rotate-180":""}`})]}),n[z]&&i.jsx(Oe,{className:"px-4 pb-4 pt-0 text-gray-700 leading-relaxed",children:le})]}),l=e("helpContent.faqFull.sections",{returnObjects:!0}),c=e("helpContent.faqFull.verificationHelp",{returnObjects:!0});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A2B3A] via-[#243548] to-[#1A2B3A]",children:i.jsxs("div",{style:{maxWidth:980,margin:"0 auto",padding:"40px 16px"},children:[i.jsxs("div",{className:"mb-8 text-center",children:[i.jsx("h1",{className:"text-4xl font-bold text-[#E0D8C8] mb-2",children:e("helpContent.faqFull.pageTitle")}),i.jsx("p",{className:"text-[#E0D8C8]/80 mb-4",children:e("helpContent.faqFull.pageSubtitle")}),i.jsxs("div",{className:"flex gap-3 justify-center mt-4 flex-wrap",children:[i.jsx(ca,{to:xt("HowTo"),children:i.jsxs(ye,{variant:"outline",className:"border-gray-300 text-[#1a2c42] bg-white hover:bg-gray-50",children:[i.jsx(T4,{className:"w-4 h-4 mr-2"}),e("helpContent.faqFull.navHowTo")]})}),i.jsx(ca,{to:xt("Troubleshooting"),children:i.jsxs(ye,{variant:"outline",className:"border-gray-300 text-[#1a2c42] bg-white hover:bg-gray-50",children:[i.jsx(Yv,{className:"w-4 h-4 mr-2"}),e("helpContent.faqFull.navTroubleshooting")]})})]})]}),i.jsxs(a,{title:((u=l.general)==null?void 0:u.title)||e("faqFull.general","General"),children:[i.jsxs(Ee,{className:"bg-[#A35C5C]/10 border-[#A35C5C]/40 mb-6",children:[i.jsxs("button",{onClick:()=>s("verification-help"),className:"w-full text-left p-4 flex items-center justify-between hover:bg-[#A35C5C]/5 transition-colors",children:[i.jsx("span",{className:"font-semibold text-[#E0D8C8] pr-4",children:c.q}),i.jsx(La,{className:`w-5 h-5 text-[#E0D8C8]/70 flex-shrink-0 transition-transform ${n["verification-help"]?"rotate-180":""}`})]}),n["verification-help"]&&i.jsxs(Oe,{className:"px-4 pb-4 pt-0 text-[#E0D8C8]/80 leading-relaxed space-y-3",children:[i.jsx("p",{children:c.intro}),i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:(d=c.steps)==null?void 0:d.map((z,te)=>i.jsx("li",{children:z},te))}),i.jsx("p",{className:"text-sm mt-3",children:c.note})]})]}),(m=(f=l.general)==null?void 0:f.items)==null?void 0:m.map(z=>i.jsxs(o,{id:z.id,q:z.q,children:[i.jsx("p",{children:z.a}),z.disclaimer&&i.jsx("div",{className:"mt-2 font-semibold",children:z.disclaimer})]},z.id))]}),i.jsx(a,{title:((g=l.gettingStarted)==null?void 0:g.title)||e("faqFull.gettingStarted","Getting Started"),children:(v=(x=l.gettingStarted)==null?void 0:x.items)==null?void 0:v.map(z=>i.jsxs(o,{id:z.id,q:z.q,children:[z.a,z.cta&&i.jsx("div",{className:"mt-4",children:i.jsx("a",{href:xt("Home?restart_tutorial=true"),className:"inline-block",children:i.jsx("button",{className:"px-4 py-2 bg-[#8b3a3a] text-white rounded-lg hover:bg-[#a94747] transition-colors",children:z.cta})})})]},z.id))}),i.jsx(a,{title:((y=l.fieldDefinitions)==null?void 0:y.title)||e("faqFull.fieldDefinitions","Field Definitions"),children:(N=(b=l.fieldDefinitions)==null?void 0:b.items)==null?void 0:N.map(z=>i.jsx(o,{id:z.id,q:z.q,children:z.a},z.id))}),i.jsx(a,{title:((j=l.tobaccoValuation)==null?void 0:j.title)||e("faqFull.tobaccoValuation","Tobacco Valuation"),children:(A=(S=l.tobaccoValuation)==null?void 0:S.items)==null?void 0:A.map(z=>i.jsx(o,{id:z.id,q:z.q,children:z.a},z.id))}),i.jsxs(a,{title:((P=l.featuresAndTools)==null?void 0:P.title)||e("faqFull.featuresAndTools","Features & Tools"),children:[(O=(L=l.featuresAndTools)==null?void 0:L.items)==null?void 0:O.map(z=>i.jsxs(o,{id:z.id,q:z.q,children:[z.intro&&i.jsx("p",{children:z.intro}),z.points&&i.jsx("ul",{className:"list-disc ml-6 mt-2 space-y-1",children:z.points.map((te,le)=>i.jsx("li",{children:te},le))}),z.a&&i.jsx("p",{children:z.a}),z.conclusion&&i.jsx("p",{className:"mt-2",children:z.conclusion})]},z.id)),i.jsx(o,{id:"subscription-tiers",q:e("faqFull.subscriptionTiersQuestion","What are the subscription tiers and what's included?"),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:e("faqFull.freeTier","Free Tier")}),i.jsxs("ul",{className:"list-disc ml-4 space-y-1 text-gray-700",children:[i.jsx("li",{children:e("faqFull.freeTrial7Days","7-day trial of all premium features")}),i.jsx("li",{children:e("faqFull.upTo5Pipes","Up to 5 pipes")}),i.jsx("li",{children:e("faqFull.upTo10Tobacco","Up to 10 tobacco blends")}),i.jsx("li",{children:e("faqFull.basicCollection","Basic collection management")}),i.jsx("li",{children:e("faqFull.photoUploads","Photo uploads")})]})]}),i.jsxs("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[i.jsx("h4",{className:"font-semibold text-amber-900 mb-2",children:e("faqFull.premiumTier","Premium Tier")}),i.jsxs("ul",{className:"list-disc ml-4 space-y-1 text-gray-700",children:[i.jsx("li",{children:e("faqFull.unlimitedPipesTobacco","Unlimited pipes and tobacco blends")}),i.jsx("li",{children:e("faqFull.aiMatching","AI tobacco matching recommendations")}),i.jsx("li",{children:e("faqFull.pairingMatrix","Pairing matrix and optimization")}),i.jsx("li",{children:e("faqFull.smokingLog","Smoking log and rotation planner")}),i.jsx("li",{children:e("faqFull.collectionInsights","Collection insights and statistics")}),i.jsx("li",{children:e("faqFull.exportReports","Export reports (PDF, CSV, Excel)")}),i.jsx("li",{children:e("faqFull.publicProfile","Public profile and community features")}),i.jsx("li",{children:e("faqFull.breakInSchedules","Break-in schedules")})]})]}),i.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[i.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:e("faqFull.proTier","Pro Tier")}),i.jsxs("ul",{className:"list-disc ml-4 space-y-1 text-gray-700",children:[i.jsx("li",{children:e("faqFull.everythingInPremium","Everything in Premium, plus:")}),i.jsx("li",{children:e("faqFull.aiPipeIdentification","AI pipe identification from photos")}),i.jsx("li",{children:e("faqFull.marketValueLookup","Market value lookup for pipes and tobacco")}),i.jsx("li",{children:e("faqFull.geometryAnalysis","Geometry analysis from photos")}),i.jsx("li",{children:e("faqFull.tobaccoAgingProjections","Tobacco aging projections and cellar trends")}),i.jsx("li",{children:e("faqFull.advancedValuation","Advanced valuation tracking")}),i.jsx("li",{children:e("faqFull.prioritySupport","Priority support")})]})]}),i.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:[e("faqFull.fullFeatureDescription","For a full feature description visit"),":"," ",i.jsx("a",{href:"https://www.pipekeeperapp.com/features",target:"_blank",rel:"noopener noreferrer",className:"text-[#8b3a3a] hover:text-[#a94747] underline",children:"https://www.pipekeeperapp.com/features"})]})]})})]}),i.jsx(a,{title:((R=l.accountsAndData)==null?void 0:R.title)||e("faqFull.accountsAndData","Accounts & Data"),children:(U=(q=l.accountsAndData)==null?void 0:q.items)==null?void 0:U.map(z=>i.jsx(o,{id:z.id,q:z.q,children:z.a},z.id))}),i.jsx(a,{title:((D=l.ai)==null?void 0:D.title)||e("faqFull.ai","AI Features & Accuracy"),children:(G=(M=l.ai)==null?void 0:M.items)==null?void 0:G.map(z=>i.jsx(o,{id:z.id,q:z.q,children:z.a},z.id))}),i.jsx(a,{title:((Y=l.support)==null?void 0:Y.title)||e("common.support","Support"),children:i.jsxs(o,{id:"contact-support",q:((Z=l.support)==null?void 0:Z.contactQ)||e("faqFull.contactSupport","How do I contact support?"),children:[(X=l.support)==null?void 0:X.contactIntro," ",i.jsx("a",{href:"https://pipekeeper.app",target:"_blank",rel:"noreferrer",className:"text-[#8b3a3a] hover:text-[#a94747] underline",children:"pipekeeper.app"}),". ",(re=l.support)==null?void 0:re.contactLinks,i.jsxs("ul",{className:"mt-2 space-y-1",children:[i.jsx("li",{children:i.jsx(ca,{to:xt("TermsOfService"),className:"text-[#8b3a3a] hover:text-[#a94747] underline",children:e("nav.terms")})}),i.jsx("li",{children:i.jsx(ca,{to:xt("PrivacyPolicy"),className:"text-[#8b3a3a] hover:text-[#a94747] underline",children:e("nav.privacy")})})]})]})})]})})}function pfe(){const{t:e}=$t(),n="February 1, 2026";return i.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-4",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("h1",{className:"text-3xl font-bold text-[#e8d5b7]",children:e("faqExtended.appleTitle")}),i.jsx("p",{className:"text-sm text-[#e8d5b7]/70 mt-2",children:e("faqExtended.appleDesc")})]}),i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:e("faqExtended.whatIsApp")})}),i.jsxs(Oe,{className:"text-[#e8d5b7]/80 text-sm space-y-2",children:[i.jsx("p",{children:e("faqExtended.whatIsAppAnswer")}),i.jsx("p",{children:e("faqExtended.notRecommendations")})]})]}),i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:e("faqExtended.whatCanDo")})}),i.jsx(Oe,{className:"text-[#e8d5b7]/80 text-sm space-y-2",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:e("faqExtended.whatCanDoList1")}),i.jsx("li",{children:e("faqExtended.whatCanDoList2")}),i.jsx("li",{children:e("faqExtended.whatCanDoList3")}),i.jsx("li",{children:e("faqExtended.whatCanDoList4")}),i.jsx("li",{children:e("faqExtended.whatCanDoList5")})]})})]}),i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:e("faqExtended.whyMissingFeatures")})}),i.jsx(Oe,{className:"text-[#e8d5b7]/80 text-sm space-y-2",children:i.jsx("p",{children:e("faqExtended.whyMissingFeaturesAnswer")})})]}),i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:e("faqExtended.whatAreTiers")})}),i.jsxs(Oe,{className:"text-[#e8d5b7]/80 text-sm space-y-2",children:[i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsxs("li",{children:[i.jsxs("b",{children:[e("subscription.free"),":"]})," ",e("faqExtended.freeTierDesc")]}),i.jsxs("li",{children:[i.jsxs("b",{children:[e("subscription.premium"),":"]})," ",e("faqExtended.premiumTierDesc")]}),i.jsxs("li",{children:[i.jsxs("b",{children:[e("subscription.pro"),":"]})," ",e("faqExtended.proTierDesc",{date:n})]})]}),i.jsx("p",{className:"text-[#e8d5b7]/70",children:e("faqExtended.earlySubscriberNote",{date:n})})]})]}),i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:e("faqExtended.howGetSupport")})}),i.jsx(Oe,{className:"text-[#e8d5b7]/80 text-sm space-y-2",children:i.jsx("p",{children:e("faqExtended.howGetSupportAnswer")})})]})]})}function yH(){return cs?i.jsx(pfe,{}):i.jsx(vH,{})}function gfe(){const{t:e}=$t(),n=[{title:e("helpCenter.faq"),description:e("helpCenter.faqDesc"),icon:Ux,color:"text-blue-400",bgColor:"bg-blue-400/10",borderColor:"border-blue-400/30",link:xt("FAQ"),topicsKeys:["helpCenter.topicWhatIsPipeKeeper","helpCenter.topicPrivacy","helpCenter.topicSubscription","helpCenter.topicDefinitions","helpCenter.topicCommunity","helpCenter.topicAI"]},{title:e("helpCenter.howTo"),description:e("helpCenter.howToDesc"),icon:T4,color:"text-green-400",bgColor:"bg-green-400/10",borderColor:"border-green-400/30",link:xt("HowTo"),topicsKeys:["helpCenter.topicAddingPipes","helpCenter.topicTobaccoInventory","helpCenter.topicAIFeatures","helpCenter.topicCellaring","helpCenter.topicCommunity","helpCenter.topicExportImport"]},{title:e("helpCenter.troubleshooting"),description:e("helpCenter.troubleshootingDesc"),icon:Yv,color:"text-orange-400",bgColor:"bg-orange-400/10",borderColor:"border-orange-400/30",link:xt("Troubleshooting"),topicsKeys:["helpCenter.topicCaching","helpCenter.topicAIUpdating","helpCenter.topicInventory","helpCenter.topicSearch","helpCenter.topicPhotos","helpCenter.topicTerms"]}];return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A2B3A] via-[#243548] to-[#1A2B3A]",children:i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-[#8b3a3a]/20 mb-6",children:i.jsx(Ux,{className:"w-10 h-10 text-blue-400"})}),i.jsx("h1",{className:"text-5xl font-bold text-[#E0D8C8] mb-4",children:e("helpCenter.helpCenter")}),i.jsx("p",{className:"text-xl text-[#E0D8C8]/80 max-w-2xl mx-auto",children:e("helpCenter.findAnswers")})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:n.map((r,s)=>{const a=r.icon;return i.jsx(ca,{to:r.link,children:i.jsxs(Ee,{className:`h-full border-2 ${r.borderColor} ${r.bgColor} hover:shadow-xl transition-all duration-300 cursor-pointer transform hover:scale-105`,children:[i.jsxs(Ze,{className:"text-center pb-4",children:[i.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-full ${r.bgColor} mx-auto mb-4`,children:i.jsx(a,{className:`w-8 h-8 ${r.color}`})}),i.jsx(et,{className:"text-2xl text-[#E0D8C8] mb-2",children:r.title}),i.jsx(Tl,{className:"text-[#E0D8C8]/80",children:r.description})]}),i.jsx(Oe,{children:i.jsx("ul",{className:"space-y-2",children:r.topicsKeys.map((o,l)=>i.jsxs("li",{className:"flex items-start gap-2 text-sm text-[#E0D8C8]/80",children:[i.jsx("span",{className:"text-[#E0D8C8]/60 mt-1",children:"•"}),i.jsx("span",{children:e(o)})]},l))})})]})},s)})}),i.jsxs(Ee,{className:"border-[#E0D8C8]/20 bg-[#243548]",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#E0D8C8]",children:e("helpCenter.quickLinks")})}),i.jsxs(Oe,{className:"grid sm:grid-cols-2 gap-4",children:[i.jsxs(ca,{to:xt("Support"),className:"text-[#E0D8C8]/80 hover:text-[#E0D8C8] hover:underline",children:["→ ",e("helpCenter.contactSupport")]}),i.jsxs(ca,{to:xt("TermsOfService"),className:"text-[#E0D8C8]/80 hover:text-[#E0D8C8] hover:underline",children:["→ ",e("helpCenter.termsOfService")]}),i.jsxs(ca,{to:xt("PrivacyPolicy"),className:"text-[#E0D8C8]/80 hover:text-[#E0D8C8] hover:underline",children:["→ ",e("helpCenter.privacyPolicy")]}),i.jsxs(ca,{to:xt("Subscription"),className:"text-[#E0D8C8]/80 hover:text-[#E0D8C8] hover:underline",children:["→ ",e("helpCenter.subscriptionBilling")]})]})]}),i.jsxs("div",{className:"mt-12 text-center",children:[i.jsx("p",{className:"text-[#E0D8C8]/80 mb-4",children:e("helpCenter.cantFind")}),i.jsx(ca,{to:xt("Support"),children:i.jsx("button",{className:"px-6 py-3 bg-[#A35C5C] text-white rounded-lg hover:bg-[#8F4E4E] transition-colors font-semibold",children:e("helpCenter.contactSupport")})})]})]})})}function ME(){console.log("🏠 Home component rendering");try{const{t:e}=$t();return console.log("🏠 Home useTranslation hook successful"),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("h1",{className:"text-4xl font-bold",children:e("home.title","Pipe & Tobacco Collection")}),i.jsx("p",{className:"text-lg opacity-80 max-w-3xl mx-auto",children:e("home.subtitle","Manage your pipes and tobacco blends with AI-powered search, photo identification, pairing suggestions, and market valuations.")})]}),i.jsxs(Ee,{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-semibold",children:e("home.pipeCollectionTitle","Pipe Collection")}),i.jsx("p",{className:"opacity-70",children:e("home.pipeCollectionSubtitle","Track and value your pipes")}),i.jsxs("div",{className:"mt-6 space-y-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-3xl font-bold",children:"14"}),i.jsx("div",{className:"opacity-70",children:e("home.pipesInCollection","Pipes in Collection")})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-3xl font-bold",children:"$2,788"}),i.jsx("div",{className:"opacity-70",children:e("home.collectionValue","Collection Value")})]})]}),i.jsx("div",{className:"mt-6",children:i.jsx("a",{href:xt("PipeCollection"),children:e("home.viewCollection","View Collection")})})]}),i.jsxs(Ee,{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-semibold",children:e("home.tobaccoCellarTitle","Tobacco Cellar")}),i.jsx("p",{className:"opacity-70",children:e("home.tobaccoCellarSubtitle","Manage your blends")}),i.jsxs("div",{className:"mt-6 space-y-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-3xl font-bold",children:"24"}),i.jsx("div",{className:"opacity-70",children:e("home.tobaccoBlends","Tobacco Blends")})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-3xl font-bold",children:"8.0 oz"}),i.jsx("div",{className:"opacity-70",children:e("home.cellared","Cellared")})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-3xl font-bold",children:"≈ $312"}),i.jsx("div",{className:"opacity-70",children:e("home.collectionValue","Collection Value")})]})]}),i.jsx("div",{className:"mt-6",children:i.jsx("a",{href:xt("TobaccoCellar"),children:e("home.viewCellar","View Cellar")})})]})]})}catch(e){return console.error("❌ HOME ERROR:",e),i.jsxs("div",{children:["Home Error: ",e.message]})}}function xfe(){const{t:e}=$t(),[n,r]=C.useState({}),s=l=>{r(c=>({...c,[l]:!c[l]}))},a=({title:l,children:c})=>i.jsxs("div",{style:{marginBottom:32},children:[i.jsx("h2",{className:"text-2xl font-bold text-[#E0D8C8] mb-4",children:l}),i.jsx("div",{className:"space-y-3",children:c})]}),o=({id:l,q:c,children:u})=>i.jsxs(Ee,{className:"bg-white border-gray-200 overflow-hidden",children:[i.jsxs("button",{onClick:()=>s(l),className:"w-full text-left p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[i.jsx("span",{className:"font-semibold text-gray-900 pr-4",children:c}),i.jsx(La,{className:`w-5 h-5 text-gray-600 flex-shrink-0 transition-transform ${n[l]?"rotate-180":""}`})]}),n[l]&&i.jsx(Oe,{className:"px-4 pb-4 pt-0 text-gray-700 leading-relaxed space-y-3",children:u})]});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A2B3A] via-[#243548] to-[#1A2B3A]",children:i.jsxs("div",{style:{maxWidth:980,margin:"0 auto",padding:"40px 16px"},children:[i.jsxs(ca,{to:xt("FAQFull"),className:"inline-flex items-center gap-2 text-[#8b3a3a] hover:text-[#a94747] mb-6",children:[i.jsx($i,{className:"w-4 h-4"}),e("howTo.backToFAQ")]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-[#E0D8C8] mb-2",children:e("howTo.pageTitle")}),i.jsx("p",{className:"text-[#E0D8C8]/80",children:e("howTo.pageSubtitle")})]}),i.jsxs(a,{title:e("howTo.addingManagingPipes"),children:[i.jsx(o,{id:"add-pipe-basic",q:e("howTo.addPipeBasicQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.addPipeBasicSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsxs(o,{id:"add-pipe-photos",q:e("howTo.addPipePhotosQ"),children:[i.jsx("p",{children:e("howTo.addPipePhotosIntro")}),i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.addPipePhotosSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})]}),i.jsxs(o,{id:"measure-pipe",q:e("howTo.measurePipeQ"),children:[i.jsx("p",{children:e("howTo.measurePipeIntro")}),i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.measurePipeSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})]}),i.jsx(o,{id:"update-pipe",q:e("howTo.updatePipeQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.updatePipeSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"mark-favorite",q:e("howTo.markFavoriteQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.markFavoriteSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})})]}),i.jsxs(a,{title:e("howTo.managingTobacco"),children:[i.jsx(o,{id:"add-tobacco",q:e("howTo.addTobaccoQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.addTobaccoSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsxs(o,{id:"track-inventory",q:e("howTo.trackInventoryQ"),children:[i.jsx("p",{children:e("howTo.trackInventoryIntro")}),i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.trackInventorySteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})]}),i.jsx(o,{id:"cellar-tobacco",q:e("howTo.cellarTobaccoQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.cellarTobaccoSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"remove-cellar",q:e("howTo.removeCellarQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.removeCellarSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})})]}),i.jsxs(a,{title:e("howTo.loggingSessions"),children:[i.jsx(o,{id:"log-smoking",q:e("howTo.logSmokingQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.logSmokingSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsxs(o,{id:"break-in-tracking",q:e("howTo.breakInTrackingQ"),children:[i.jsx("p",{children:e("howTo.breakInTrackingIntro")}),i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.breakInTrackingSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})]})]}),i.jsxs(a,{title:e("howTo.collectionsImport"),children:[i.jsx(o,{id:"bulk-import",q:e("howTo.bulkImportQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.bulkImportSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsxs(o,{id:"export-collection",q:e("howTo.exportCollectionQ"),children:[i.jsx("p",{children:e("howTo.exportCollectionIntro")}),i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.exportCollectionSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})]})]}),i.jsxs(a,{title:e("howTo.usingAIFeatures"),children:[i.jsx(o,{id:"get-pairing-suggestions",q:e("howTo.getPairingSuggestionsQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.getPairingSuggestionsSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"ask-tobacconist",q:e("howTo.askTobacconistQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.askTobacconistSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"identify-pipe",q:e("howTo.identifyPipeQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.identifyPipeSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})})]}),i.jsxs(a,{title:e("howTo.profileSettings"),children:[i.jsx(o,{id:"update-profile",q:e("howTo.updateProfileQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.updateProfileSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"public-profile",q:e("howTo.publicProfileQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.publicProfileSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"change-language",q:e("howTo.changeLanguageQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("howTo.changeLanguageSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})})]})]})})}function Pu(e,n,r=null){e.invalidateQueries({predicate:s=>s.queryKey[0]===n}),r&&e.invalidateQueries({queryKey:[n,r]})}function jg(e,n=null){Pu(e,"pipes",n),Pu(e,"pipe",n),e.invalidateQueries({predicate:r=>{const s=r.queryKey[0];return s==="pairing-matrix"||s==="collection-optimization"||s==="smoking-logs"}})}function Qp(e,n=null){Pu(e,"blends",n),Pu(e,"tobacco",n),Pu(e,"tobacco-blend",n),Pu(e,"tobacco-blends",n),e.invalidateQueries({predicate:r=>{const s=r.queryKey[0];return s==="pairing-matrix"||s==="tobacco-containers"}})}function vfe(e,n=null){Pu(e,"user-profile",n),Pu(e,"current-user",n),e.invalidateQueries({queryKey:["current-user"]})}function l1(e,n=null){["pairing-matrix","collection-optimization","optimization-batch","saved-pairings","activePairings","saved-optimization","activeOptimization"].forEach(s=>{Pu(e,s,n)})}const yfe=["name","maker","country_of_origin","shape","length_mm","weight_grams","bowl_height_mm","bowl_width_mm","bowl_diameter_mm","bowl_depth_mm","chamber_volume","stem_material","bowl_material","finish","filter_type","year_made","stamping","condition","purchase_price","estimated_value","notes"],bfe=["name","manufacturer","blend_type","cut","strength","room_note","tin_size_oz","tin_total_tins","tin_tins_open","tin_tins_cellared","tin_cellared_date","bulk_total_quantity_oz","bulk_open","bulk_cellared","bulk_cellared_date","pouch_size_oz","pouch_total_pouches","pouch_pouches_open","pouch_pouches_cellared","pouch_cellared_date","production_status","aging_potential","rating","notes"];function bH(){const[e,n]=C.useState(!1),[r,s]=C.useState(!1),[a,o]=C.useState(null),[l,c]=C.useState(null),u=On(),{data:d}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me(),staleTime:5e3,retry:1}),f=ry(d),m=()=>{const b=yfe.join(",")+`
Example Pipe,Peterson,Ireland,Billiard,140,45,40,35,18,35,Medium,Vulcanite,Briar,Smooth,None,2020,System Standard 314,Excellent,120,150,My favorite pipe
`,N=new Blob([b],{type:"text/csv"}),j=window.URL.createObjectURL(N),S=document.createElement("a");S.href=j,S.download="pipe_import_template.csv",S.click(),window.URL.revokeObjectURL(j)},g=()=>{const b=bfe.join(",")+`
Example Blend,Cornell & Diehl,English,Ribbon,Medium,Pleasant,1.75,5,1,4,2025-01-15,16,2,14,2025-01-10,1.5,3,1,2,2025-01-12,Current Production,Excellent,4.5,Great everyday smoke
`,N=new Blob([b],{type:"text/csv"}),j=window.URL.createObjectURL(N),S=document.createElement("a");S.href=j,S.download="tobacco_import_template.csv",S.click(),window.URL.revokeObjectURL(j)},x=b=>{const N=b.split(`
`).filter(A=>A.trim()),j=N[0].split(",").map(A=>A.trim()),S=[];for(let A=1;A<N.length;A++){const P=N[A].split(","),L={};j.forEach((O,R)=>{var U;const q=(U=P[R])==null?void 0:U.trim();q&&q!==""&&(["length_mm","weight_grams","bowl_height_mm","bowl_width_mm","bowl_diameter_mm","bowl_depth_mm","purchase_price","estimated_value","tin_size_oz","tin_total_tins","tin_tins_open","tin_tins_cellared","bulk_total_quantity_oz","bulk_open","bulk_cellared","pouch_size_oz","pouch_total_pouches","pouch_pouches_open","pouch_pouches_cellared","rating"].includes(O)?L[O]=parseFloat(q):L[O]=q)}),Object.keys(L).length>0&&S.push(L)}return S},v=async b=>{const N=b.target.files[0];if(N){n(!0),o(null);try{const j=await N.text(),S=x(j);let A=0,P=0;for(const L of S)try{await Ce.entities.Pipe.create(L),A++}catch{P++}o({success:A,failed:P,total:S.length}),jg(u,d==null?void 0:d.email)}catch{alert(t("import.csvParseFailed"))}finally{n(!1),b.target.value=""}}},y=async b=>{const N=b.target.files[0];if(N){s(!0),c(null);try{const j=await N.text(),S=x(j);let A=0,P=0;for(const L of S)try{await Ce.entities.TobaccoBlend.create(L),A++}catch{P++}c({success:A,failed:P,total:S.length}),Qp(u,d==null?void 0:d.email)}catch{alert(t("import.csvParseFailed"))}finally{s(!1),b.target.value=""}}};return f?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42]",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx("a",{href:xt("Home"),children:i.jsxs(ye,{variant:"ghost",className:"mb-6 text-[#e8d5b7] hover:text-[#e8d5b7]/80",children:[i.jsx($i,{className:"w-4 h-4 mr-2"}),t("nav.backToHome")]})}),i.jsxs(Ee,{className:"border-[#e8d5b7]/30",children:[i.jsxs(Ze,{children:[i.jsxs(et,{className:"text-3xl text-stone-100 flex items-center gap-3",children:[i.jsx(O4,{className:"w-8 h-8 text-[#8b3a3a]"}),t("import.bulkImport")]}),i.jsx(Tl,{className:"text-stone-300",children:t("import.bulkImportDesc")})]}),i.jsx(Oe,{children:i.jsxs(Ec,{defaultValue:"pipes",className:"space-y-6",children:[i.jsxs(Tc,{className:"grid w-full grid-cols-2",children:[i.jsx(En,{value:"pipes",children:t("import.importPipes")}),i.jsx(En,{value:"tobacco",children:t("import.importTobacco")})]}),i.jsxs(Tn,{value:"pipes",className:"space-y-6",children:[i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-amber-900 mb-2",children:t("import.howToImportPipes")}),i.jsxs("ol",{className:"text-sm text-amber-800 space-y-1 list-decimal list-inside mb-3",children:[i.jsx("li",{children:t("import.step1Template")}),i.jsx("li",{children:t("import.step2OpenSpreadsheet")}),i.jsx("li",{children:t("import.step3FillPipes")}),i.jsx("li",{children:t("import.step4SaveCSV")}),i.jsx("li",{children:t("import.step5Upload")})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-amber-300",children:[i.jsxs("p",{className:"text-sm font-semibold text-amber-900 mb-1",children:[t("import.requiredFields"),":"]}),i.jsxs("ul",{className:"text-sm text-amber-800 space-y-1",children:[i.jsxs("li",{children:["• ",i.jsx("strong",{children:"name"})," - ",t("import.pipeNameDesc")]}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"maker"})," - ",t("import.pipeMakerDesc")]})]}),i.jsx("p",{className:"text-xs text-amber-700 mt-2 italic",children:t("import.pipeNoteCustom")})]})]}),i.jsx("div",{className:"flex gap-4",children:i.jsxs(ye,{onClick:m,variant:"outline",className:"flex-1",children:[i.jsx(MP,{className:"w-4 h-4 mr-2"}),t("import.downloadPipeTemplate")]})}),i.jsxs("div",{className:"border-2 border-dashed border-stone-300 rounded-lg p-8 text-center",children:[i.jsx(Wx,{className:"w-12 h-12 text-stone-400 mx-auto mb-4"}),i.jsx("p",{className:"text-stone-600 mb-4",children:t("import.uploadCompletedCSV")}),i.jsx(at,{type:"file",accept:".csv",onChange:v,disabled:e,className:"max-w-xs mx-auto"}),e&&i.jsx("p",{className:"text-sm text-stone-500 mt-2",children:t("import.importingPipes")})]}),a&&i.jsx(Ee,{className:a.failed===0?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200",children:i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[a.failed===0?i.jsx(ei,{className:"w-5 h-5 text-green-600"}):i.jsx(vn,{className:"w-5 h-5 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:t("import.importComplete")}),i.jsxs("p",{className:"text-sm",children:[t("import.pipesImportedSuccess",{count:a.success}),a.failed>0&&`, ${t("import.importFailed",{count:a.failed})}`]})]})]})})})]}),i.jsxs(Tn,{value:"tobacco",className:"space-y-6",children:[i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-amber-900 mb-2",children:t("import.howToImportTobacco")}),i.jsxs("ol",{className:"text-sm text-amber-800 space-y-1 list-decimal list-inside mb-3",children:[i.jsx("li",{children:t("import.step1Template")}),i.jsx("li",{children:t("import.step2OpenSpreadsheet")}),i.jsx("li",{children:t("import.step3FillTobacco")}),i.jsx("li",{children:t("import.step4SaveCSV")}),i.jsx("li",{children:t("import.step5Upload")})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-amber-300",children:[i.jsxs("p",{className:"text-sm font-semibold text-amber-900 mb-1",children:[t("import.requiredFields"),":"]}),i.jsx("ul",{className:"text-sm text-amber-800 space-y-1",children:i.jsxs("li",{children:["• ",i.jsx("strong",{children:"name"})," - ",t("import.tobaccoNameDesc")]})}),i.jsxs("p",{className:"text-sm font-semibold text-amber-900 mt-3 mb-1",children:[t("import.inventoryFields"),":"]}),i.jsxs("ul",{className:"text-xs text-amber-800 space-y-1",children:[i.jsxs("li",{children:["• ",i.jsxs("strong",{children:[t("import.tins"),":"]})," tin_size_oz, tin_total_tins, tin_tins_open, tin_tins_cellared, tin_cellared_date"]}),i.jsxs("li",{children:["• ",i.jsxs("strong",{children:[t("import.bulk"),":"]})," bulk_total_quantity_oz, bulk_open, bulk_cellared, bulk_cellared_date"]}),i.jsxs("li",{children:["• ",i.jsxs("strong",{children:[t("import.pouches"),":"]})," pouch_size_oz, pouch_total_pouches, pouch_pouches_open, pouch_pouches_cellared, pouch_cellared_date"]})]}),i.jsx("p",{className:"text-xs text-amber-700 mt-2 italic",children:t("import.inventoryFieldsNote")})]})]}),i.jsx("div",{className:"flex gap-4",children:i.jsxs(ye,{onClick:g,variant:"outline",className:"flex-1",children:[i.jsx(MP,{className:"w-4 h-4 mr-2"}),t("import.downloadTobaccoTemplate")]})}),i.jsxs("div",{className:"border-2 border-dashed border-stone-300 rounded-lg p-8 text-center",children:[i.jsx(Wx,{className:"w-12 h-12 text-stone-400 mx-auto mb-4"}),i.jsx("p",{className:"text-stone-600 mb-4",children:t("import.uploadCompletedCSV")}),i.jsx(at,{type:"file",accept:".csv",onChange:y,disabled:r,className:"max-w-xs mx-auto"}),r&&i.jsx("p",{className:"text-sm text-stone-500 mt-2",children:t("import.importingTobacco")})]}),l&&i.jsx(Ee,{className:l.failed===0?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200",children:i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[l.failed===0?i.jsx(ei,{className:"w-5 h-5 text-green-600"}):i.jsx(vn,{className:"w-5 h-5 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:t("import.importComplete")}),i.jsxs("p",{className:"text-sm",children:[t("import.blendsImportedSuccess",{count:l.success}),l.failed>0&&`, ${t("import.importFailed",{count:l.failed})}`]})]})]})})})]})]})})]})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42]",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx("a",{href:xt("Home"),children:i.jsxs(ye,{variant:"ghost",className:"mb-6 text-[#e8d5b7] hover:text-[#e8d5b7]/80",children:[i.jsx($i,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),i.jsx(Ac,{featureName:t("import.bulkImport"),description:t("import.upgradeDesc")})]})})}function wH(){const[e,n]=C.useState([""]),[r,s]=C.useState(""),[a,o]=C.useState(!1),[l,c]=C.useState(!1),{data:u}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me()}),d=()=>{n([...e,""])},f=x=>{n(e.filter((v,y)=>y!==x))},m=(x,v)=>{const y=[...e];y[x]=v,n(y)},g=async x=>{x.preventDefault(),o(!0);try{const v=e.filter(y=>y.trim()!=="");for(const y of v){const b=`
Hello!

${(u==null?void 0:u.full_name)||"A friend"} has invited you to join PipeKeeper - the ultimate app for managing your pipe and tobacco collection.

${r?`Personal message:
${r}

`:""}

PipeKeeper helps you:
• Catalog your pipes and tobacco blends
• Track smoking sessions and preferences
• Get AI-powered pairing recommendations
• Identify pipes and estimate values
• Optimize your collection

Invitation link: https://base44.com/invite?ref=pipekeeper

Happy piping!
The PipeKeeper Team
        `;await Ce.integrations.Core.SendEmail({to:y,subject:`${(u==null?void 0:u.full_name)||"Your friend"} invited you to PipeKeeper`,body:b,from_name:"PipeKeeper"})}c(!0),n([""]),s("")}catch{alert("Failed to send invitations. Please try again.")}finally{o(!1)}};return l?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42]",children:i.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx("a",{href:xt("Home"),children:i.jsxs(ye,{variant:"ghost",className:"mb-6 text-[#e8d5b7] hover:text-[#e8d5b7]/80",children:[i.jsx($i,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),i.jsx(Ee,{className:"border-green-200 bg-gradient-to-br from-green-50 to-white",children:i.jsxs(Oe,{className:"p-12 text-center",children:[i.jsx(ei,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-green-900 mb-2",children:"Invitations Sent!"}),i.jsx("p",{className:"text-green-700 mb-6",children:"Your friends will receive their invitation emails shortly."}),i.jsx(ye,{onClick:()=>c(!1),variant:"outline",children:"Invite More Friends"})]})})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42]",children:i.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx("a",{href:xt("Home"),children:i.jsxs(ye,{variant:"ghost",className:"mb-6 text-[#e8d5b7] hover:text-[#e8d5b7]/80",children:[i.jsx($i,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),i.jsxs(Ee,{className:"border-[#e8d5b7]/30",children:[i.jsxs(Ze,{children:[i.jsxs(et,{className:"text-3xl text-stone-900 flex items-center gap-3",children:[i.jsx(Kp,{className:"w-8 h-8 text-[#8b3a3a]"}),"Invite Friends to PipeKeeper"]}),i.jsx(Tl,{className:"text-stone-600",children:"Share PipeKeeper with fellow pipe enthusiasts and build your community."})]}),i.jsx(Oe,{children:i.jsxs("form",{onSubmit:g,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(tt,{className:"text-stone-700 font-medium mb-2 block",children:"Friend's Email Addresses *"}),i.jsx("div",{className:"space-y-3",children:e.map((x,v)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{type:"email",value:x,onChange:y=>m(v,y.target.value),placeholder:"friend@example.com",required:!0}),e.length>1&&i.jsx(ye,{type:"button",variant:"outline",size:"icon",onClick:()=>f(v),children:i.jsx(zi,{className:"w-4 h-4"})})]},v))}),i.jsxs(ye,{type:"button",variant:"outline",size:"sm",onClick:d,className:"mt-3",children:[i.jsx(Kp,{className:"w-4 h-4 mr-2"}),"Add Another Email"]})]}),i.jsxs("div",{children:[i.jsx(tt,{htmlFor:"message",className:"text-stone-700 font-medium",children:"Personal Message (Optional)"}),i.jsx(Ui,{id:"message",value:r,onChange:x=>s(x.target.value),placeholder:"Add a personal note to your invitation...",className:"mt-2 min-h-[100px]"})]}),i.jsxs(ye,{type:"submit",disabled:a||e.every(x=>x.trim()===""),className:"w-full bg-[#8b3a3a] hover:bg-[#6d2e2e]",children:[i.jsx(Cu,{className:"w-4 h-4 mr-2"}),a?"Sending Invitations...":"Send Invitations"]})]})})]})]})})}function wfe(){const{t:e}=$t();return i.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-4",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("h1",{className:"text-3xl font-bold text-[#e8d5b7]",children:e("invite.title")}),i.jsx("p",{className:"text-sm text-[#e8d5b7]/70 mt-2",children:e("invite.apple.description")})]}),i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:e("invite.apple.whatTheyCanDo")})}),i.jsxs(Oe,{className:"text-[#e8d5b7]/80 text-sm space-y-3",children:[i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:e("invite.apple.feature1")}),i.jsx("li",{children:e("invite.apple.feature2")}),i.jsx("li",{children:e("invite.apple.feature3")}),i.jsx("li",{children:e("invite.apple.feature4")})]}),i.jsx("p",{className:"text-[#e8d5b7]/70",children:e("invite.apple.note")}),i.jsx("div",{className:"pt-2",children:i.jsx(ye,{onClick:()=>window.location.replace(xt("Home")),children:e("invite.apple.returnHome")})})]})]})]})}function jH(){return cs?i.jsx(wfe,{}):i.jsx(wH,{})}const ln=e=>typeof e=="string",H0=()=>{let e,n;const r=new Promise((s,a)=>{e=s,n=a});return r.resolve=e,r.reject=n,r},ZL=e=>e==null?"":""+e,jfe=(e,n,r)=>{e.forEach(s=>{n[s]&&(r[s]=n[s])})},Nfe=/###/g,eR=e=>e&&e.indexOf("###")>-1?e.replace(Nfe,"."):e,tR=e=>!e||ln(e),Tx=(e,n,r)=>{const s=ln(n)?n.split("."):n;let a=0;for(;a<s.length-1;){if(tR(e))return{};const o=eR(s[a]);!e[o]&&r&&(e[o]=new r),Object.prototype.hasOwnProperty.call(e,o)?e=e[o]:e={},++a}return tR(e)?{}:{obj:e,k:eR(s[a])}},nR=(e,n,r)=>{const{obj:s,k:a}=Tx(e,n,Object);if(s!==void 0||n.length===1){s[a]=r;return}let o=n[n.length-1],l=n.slice(0,n.length-1),c=Tx(e,l,Object);for(;c.obj===void 0&&l.length;)o=`${l[l.length-1]}.${o}`,l=l.slice(0,l.length-1),c=Tx(e,l,Object),c&&c.obj&&typeof c.obj[`${c.k}.${o}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${o}`]=r},_fe=(e,n,r,s)=>{const{obj:a,k:o}=Tx(e,n,Object);a[o]=a[o]||[],a[o].push(r)},M1=(e,n)=>{const{obj:r,k:s}=Tx(e,n);if(r)return r[s]},Sfe=(e,n,r)=>{const s=M1(e,r);return s!==void 0?s:M1(n,r)},NH=(e,n,r)=>{for(const s in n)s!=="__proto__"&&s!=="constructor"&&(s in e?ln(e[s])||e[s]instanceof String||ln(n[s])||n[s]instanceof String?r&&(e[s]=n[s]):NH(e[s],n[s],r):e[s]=n[s]);return e},wp=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Cfe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Pfe=e=>ln(e)?e.replace(/[&<>"'\/]/g,n=>Cfe[n]):e;class Afe{constructor(n){this.capacity=n,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(n){const r=this.regExpMap.get(n);if(r!==void 0)return r;const s=new RegExp(n);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(n,s),this.regExpQueue.push(n),s}}const kfe=[" ",",","?","!",";"],Efe=new Afe(20),Tfe=(e,n,r)=>{n=n||"",r=r||"";const s=kfe.filter(l=>n.indexOf(l)<0&&r.indexOf(l)<0);if(s.length===0)return!0;const a=Efe.getRegExp(`(${s.map(l=>l==="?"?"\\?":l).join("|")})`);let o=!a.test(e);if(!o){const l=e.indexOf(r);l>0&&!a.test(e.substring(0,l))&&(o=!0)}return o},OA=function(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[n])return e[n];const s=n.split(r);let a=e;for(let o=0;o<s.length;){if(!a||typeof a!="object")return;let l,c="";for(let u=o;u<s.length;++u)if(u!==o&&(c+=r),c+=s[u],l=a[c],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&u<s.length-1)continue;o+=u-o+1;break}a=l}return a},F1=e=>e&&e.replace("_","-"),Ofe={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,n){console&&console[e]&&console[e].apply(console,n)}};class B1{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(n,r)}init(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=n||Ofe,this.options=r,this.debug=r.debug}log(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return this.forward(r,"log","",!0)}warn(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return this.forward(r,"warn","",!0)}error(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return this.forward(r,"error","")}deprecate(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(n,r,s,a){return a&&!this.debug?null:(ln(n[0])&&(n[0]=`${s}${this.prefix} ${n[0]}`),this.logger[r](n))}create(n){return new B1(this.logger,{prefix:`${this.prefix}:${n}:`,...this.options})}clone(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new B1(this.logger,n)}}var gc=new B1;let I2=class{constructor(){this.observers={}}on(n,r){return n.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const a=this.observers[s].get(r)||0;this.observers[s].set(r,a+1)}),this}off(n,r){if(this.observers[n]){if(!r){delete this.observers[n];return}this.observers[n].delete(r)}}emit(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];this.observers[n]&&Array.from(this.observers[n].entries()).forEach(l=>{let[c,u]=l;for(let d=0;d<u;d++)c(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(l=>{let[c,u]=l;for(let d=0;d<u;d++)c.apply(c,[n,...s])})}};class rR extends I2{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=n||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}removeNamespaces(n){const r=this.options.ns.indexOf(n);r>-1&&this.options.ns.splice(r,1)}getResource(n,r,s){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,l=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;n.indexOf(".")>-1?c=n.split("."):(c=[n,r],s&&(Array.isArray(s)?c.push(...s):ln(s)&&o?c.push(...s.split(o)):c.push(s)));const u=M1(this.data,c);return!u&&!r&&!s&&n.indexOf(".")>-1&&(n=c[0],r=c[1],s=c.slice(2).join(".")),u||!l||!ln(s)?u:OA(this.data&&this.data[n]&&this.data[n][r],s,o)}addResource(n,r,s,a){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let c=[n,r];s&&(c=c.concat(l?s.split(l):s)),n.indexOf(".")>-1&&(c=n.split("."),a=r,r=c[1]),this.addNamespaces(r),nR(this.data,c,a),o.silent||this.emit("added",n,r,s,a)}addResources(n,r,s){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in s)(ln(s[o])||Array.isArray(s[o]))&&this.addResource(n,r,o,s[o],{silent:!0});a.silent||this.emit("added",n,r,s)}addResourceBundle(n,r,s,a,o){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},c=[n,r];n.indexOf(".")>-1&&(c=n.split("."),a=s,s=r,r=c[1]),this.addNamespaces(r);let u=M1(this.data,c)||{};l.skipCopy||(s=JSON.parse(JSON.stringify(s))),a?NH(u,s,o):u={...u,...s},nR(this.data,c,u),l.silent||this.emit("added",n,r,s)}removeResourceBundle(n,r){this.hasResourceBundle(n,r)&&delete this.data[n][r],this.removeNamespaces(r),this.emit("removed",n,r)}hasResourceBundle(n,r){return this.getResource(n,r)!==void 0}getResourceBundle(n,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(n,r)}:this.getResource(n,r)}getDataByLanguage(n){return this.data[n]}hasLanguageSomeTranslations(n){const r=this.getDataByLanguage(n);return!!(r&&Object.keys(r)||[]).find(a=>r[a]&&Object.keys(r[a]).length>0)}toJSON(){return this.data}}var _H={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,n,r,s,a){return e.forEach(o=>{this.processors[o]&&(n=this.processors[o].process(n,r,s,a))}),n}};const sR={};class $1 extends I2{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),jfe(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=gc.create("translator")}changeLanguage(n){n&&(this.language=n)}exists(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(n==null)return!1;const s=this.resolve(n,r);return s&&s.res!==void 0}extractFromKey(n,r){let s=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=r.ns||this.options.defaultNS||[];const l=s&&n.indexOf(s)>-1,c=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!Tfe(n,s,a);if(l&&!c){const u=n.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:n,namespaces:ln(o)?[o]:o};const d=n.split(s);(s!==a||s===a&&this.options.ns.indexOf(d[0])>-1)&&(o=d.shift()),n=d.join(a)}return{key:n,namespaces:ln(o)?[o]:o}}translate(n,r,s){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);const a=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(n[n.length-1],r),u=c[c.length-1],d=r.lng||this.language,f=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&d.toLowerCase()==="cimode"){if(f){const A=r.nsSeparator||this.options.nsSeparator;return a?{res:`${u}${A}${l}`,usedKey:l,exactUsedKey:l,usedLng:d,usedNS:u,usedParams:this.getUsedParamsDetails(r)}:`${u}${A}${l}`}return a?{res:l,usedKey:l,exactUsedKey:l,usedLng:d,usedNS:u,usedParams:this.getUsedParamsDetails(r)}:l}const m=this.resolve(n,r);let g=m&&m.res;const x=m&&m.usedKey||l,v=m&&m.exactUsedKey||l,y=Object.prototype.toString.apply(g),b=["[object Number]","[object Function]","[object RegExp]"],N=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,j=!this.i18nFormat||this.i18nFormat.handleAsObject,S=!ln(g)&&typeof g!="boolean"&&typeof g!="number";if(j&&g&&S&&b.indexOf(y)<0&&!(ln(N)&&Array.isArray(g))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const A=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,g,{...r,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return a?(m.res=A,m.usedParams=this.getUsedParamsDetails(r),m):A}if(o){const A=Array.isArray(g),P=A?[]:{},L=A?v:x;for(const O in g)if(Object.prototype.hasOwnProperty.call(g,O)){const R=`${L}${o}${O}`;P[O]=this.translate(R,{...r,joinArrays:!1,ns:c}),P[O]===R&&(P[O]=g[O])}g=P}}else if(j&&ln(N)&&Array.isArray(g))g=g.join(N),g&&(g=this.extendTranslation(g,n,r,s));else{let A=!1,P=!1;const L=r.count!==void 0&&!ln(r.count),O=$1.hasDefaultValue(r),R=L?this.pluralResolver.getSuffix(d,r.count,r):"",q=r.ordinal&&L?this.pluralResolver.getSuffix(d,r.count,{ordinal:!1}):"",U=L&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),D=U&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${R}`]||r[`defaultValue${q}`]||r.defaultValue;!this.isValidLookup(g)&&O&&(A=!0,g=D),this.isValidLookup(g)||(P=!0,g=l);const G=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&P?void 0:g,Y=O&&D!==g&&this.options.updateMissing;if(P||A||Y){if(this.logger.log(Y?"updateKey":"missingKey",d,u,l,Y?D:g),o){const z=this.resolve(l,{...r,keySeparator:!1});z&&z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Z=[];const X=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&X&&X[0])for(let z=0;z<X.length;z++)Z.push(X[z]);else this.options.saveMissingTo==="all"?Z=this.languageUtils.toResolveHierarchy(r.lng||this.language):Z.push(r.lng||this.language);const re=(z,te,le)=>{const Q=O&&le!==g?le:G;this.options.missingKeyHandler?this.options.missingKeyHandler(z,u,te,Q,Y,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(z,u,te,Q,Y,r),this.emit("missingKey",z,u,te,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&L?Z.forEach(z=>{const te=this.pluralResolver.getSuffixes(z,r);U&&r[`defaultValue${this.options.pluralSeparator}zero`]&&te.indexOf(`${this.options.pluralSeparator}zero`)<0&&te.push(`${this.options.pluralSeparator}zero`),te.forEach(le=>{re([z],l+le,r[`defaultValue${le}`]||D)})}):re(Z,l,D))}g=this.extendTranslation(g,n,r,m,s),P&&g===l&&this.options.appendNamespaceToMissingKey&&(g=`${u}:${l}`),(P||A)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}:${l}`:l,A?g:void 0):g=this.options.parseMissingKeyHandler(g))}return a?(m.res=g,m.usedParams=this.getUsedParamsDetails(r),m):g}extendTranslation(n,r,s,a,o){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)n=this.i18nFormat.parse(n,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const d=ln(n)&&(s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(d){const g=n.match(this.interpolator.nestingRegexp);f=g&&g.length}let m=s.replace&&!ln(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),n=this.interpolator.interpolate(n,m,s.lng||this.language||a.usedLng,s),d){const g=n.match(this.interpolator.nestingRegexp),x=g&&g.length;f<x&&(s.nest=!1)}!s.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(s.lng=this.language||a.usedLng),s.nest!==!1&&(n=this.interpolator.nest(n,function(){for(var g=arguments.length,x=new Array(g),v=0;v<g;v++)x[v]=arguments[v];return o&&o[0]===x[0]&&!s.context?(l.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${r[0]}`),null):l.translate(...x,r)},s)),s.interpolation&&this.interpolator.reset()}const c=s.postProcess||this.options.postProcess,u=ln(c)?[c]:c;return n!=null&&u&&u.length&&s.applyPostProcessor!==!1&&(n=_H.handle(u,n,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),n}resolve(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,a,o,l,c;return ln(n)&&(n=[n]),n.forEach(u=>{if(this.isValidLookup(s))return;const d=this.extractFromKey(u,r),f=d.key;a=f;let m=d.namespaces;this.options.fallbackNS&&(m=m.concat(this.options.fallbackNS));const g=r.count!==void 0&&!ln(r.count),x=g&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),v=r.context!==void 0&&(ln(r.context)||typeof r.context=="number")&&r.context!=="",y=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);m.forEach(b=>{this.isValidLookup(s)||(c=b,!sR[`${y[0]}-${b}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(c)&&(sR[`${y[0]}-${b}`]=!0,this.logger.warn(`key "${a}" for languages "${y.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(N=>{if(this.isValidLookup(s))return;l=N;const j=[f];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(j,f,N,b,r);else{let A;g&&(A=this.pluralResolver.getSuffix(N,r.count,r));const P=`${this.options.pluralSeparator}zero`,L=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(g&&(j.push(f+A),r.ordinal&&A.indexOf(L)===0&&j.push(f+A.replace(L,this.options.pluralSeparator)),x&&j.push(f+P)),v){const O=`${f}${this.options.contextSeparator}${r.context}`;j.push(O),g&&(j.push(O+A),r.ordinal&&A.indexOf(L)===0&&j.push(O+A.replace(L,this.options.pluralSeparator)),x&&j.push(O+P))}}let S;for(;S=j.pop();)this.isValidLookup(s)||(o=S,s=this.getResource(N,b,S,r))}))})}),{res:s,usedKey:a,exactUsedKey:o,usedLng:l,usedNS:c}}isValidLookup(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")}getResource(n,r,s){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(n,r,s,a):this.resourceStore.getResource(n,r,s,a)}getUsedParamsDetails(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=n.replace&&!ln(n.replace);let a=s?n.replace:n;if(s&&typeof n.count<"u"&&(a.count=n.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!s){a={...a};for(const o of r)delete a[o]}return a}static hasDefaultValue(n){const r="defaultValue";for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&r===s.substring(0,r.length)&&n[s]!==void 0)return!0;return!1}}const JN=e=>e.charAt(0).toUpperCase()+e.slice(1);class iR{constructor(n){this.options=n,this.supportedLngs=this.options.supportedLngs||!1,this.logger=gc.create("languageUtils")}getScriptPartFromCode(n){if(n=F1(n),!n||n.indexOf("-")<0)return null;const r=n.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(n){if(n=F1(n),!n||n.indexOf("-")<0)return n;const r=n.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(n){if(ln(n)&&n.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let a=Intl.getCanonicalLocales(n)[0];if(a&&this.options.lowerCaseLng&&(a=a.toLowerCase()),a)return a}catch{}const r=["hans","hant","latn","cyrl","cans","mong","arab"];let s=n.split("-");return this.options.lowerCaseLng?s=s.map(a=>a.toLowerCase()):s.length===2?(s[0]=s[0].toLowerCase(),s[1]=s[1].toUpperCase(),r.indexOf(s[1].toLowerCase())>-1&&(s[1]=JN(s[1].toLowerCase()))):s.length===3&&(s[0]=s[0].toLowerCase(),s[1].length===2&&(s[1]=s[1].toUpperCase()),s[0]!=="sgn"&&s[2].length===2&&(s[2]=s[2].toUpperCase()),r.indexOf(s[1].toLowerCase())>-1&&(s[1]=JN(s[1].toLowerCase())),r.indexOf(s[2].toLowerCase())>-1&&(s[2]=JN(s[2].toLowerCase()))),s.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}isSupportedCode(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}getBestMatchFromCodes(n){if(!n)return null;let r;return n.forEach(s=>{if(r)return;const a=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(a))&&(r=a)}),!r&&this.options.supportedLngs&&n.forEach(s=>{if(r)return;const a=this.getLanguagePartFromCode(s);if(this.isSupportedCode(a))return r=a;r=this.options.supportedLngs.find(o=>{if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&(o.indexOf("-")>0&&a.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===a||o.indexOf(a)===0&&a.length>1))return o})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(n,r){if(!n)return[];if(typeof n=="function"&&(n=n(r)),ln(n)&&(n=[n]),Array.isArray(n))return n;if(!r)return n.default||[];let s=n[r];return s||(s=n[this.getScriptPartFromCode(r)]),s||(s=n[this.formatLanguageCode(r)]),s||(s=n[this.getLanguagePartFromCode(r)]),s||(s=n.default),s||[]}toResolveHierarchy(n,r){const s=this.getFallbackCodes(r||this.options.fallbackLng||[],n),a=[],o=l=>{l&&(this.isSupportedCode(l)?a.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return ln(n)&&(n.indexOf("-")>-1||n.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(n))):ln(n)&&o(this.formatLanguageCode(n)),s.forEach(l=>{a.indexOf(l)<0&&o(this.formatLanguageCode(l))}),a}}let Lfe=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Rfe={1:e=>+(e>1),2:e=>+(e!=1),3:e=>0,4:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,5:e=>e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5,6:e=>e==1?0:e>=2&&e<=4?1:2,7:e=>e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,8:e=>e==1?0:e==2?1:e!=8&&e!=11?2:3,9:e=>+(e>=2),10:e=>e==1?0:e==2?1:e<7?2:e<11?3:4,11:e=>e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3,12:e=>+(e%10!=1||e%100==11),13:e=>+(e!==0),14:e=>e==1?0:e==2?1:e==3?2:3,15:e=>e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2,16:e=>e%10==1&&e%100!=11?0:e!==0?1:2,17:e=>e==1||e%10==1&&e%100!=11?0:1,18:e=>e==0?0:e==1?1:2,19:e=>e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3,20:e=>e==1?0:e==0||e%100>0&&e%100<20?1:2,21:e=>e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0,22:e=>e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3};const Dfe=["v1","v2","v3"],Ife=["v4"],aR={zero:0,one:1,two:2,few:3,many:4,other:5},Mfe=()=>{const e={};return Lfe.forEach(n=>{n.lngs.forEach(r=>{e[r]={numbers:n.nr,plurals:Rfe[n.fc]}})}),e};class Ffe{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=n,this.options=r,this.logger=gc.create("pluralResolver"),(!this.options.compatibilityJSON||Ife.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Mfe(),this.pluralRulesCache={}}addRule(n,r){this.rules[n]=r}clearCache(){this.pluralRulesCache={}}getRule(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const s=F1(n==="dev"?"en":n),a=r.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:s,type:a});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let l;try{l=new Intl.PluralRules(s,{type:a})}catch{if(!n.match(/-|_/))return;const u=this.languageUtils.getLanguagePartFromCode(n);l=this.getRule(u,r)}return this.pluralRulesCache[o]=l,l}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}needsPlural(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(n,r);return this.shouldUseIntlApi()?s&&s.resolvedOptions().pluralCategories.length>1:s&&s.numbers.length>1}getPluralFormsOfKey(n,r){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,s).map(a=>`${r}${a}`)}getSuffixes(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(n,r);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort((a,o)=>aR[a]-aR[o]).map(a=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a}`):s.numbers.map(a=>this.getSuffix(n,a,r)):[]}getSuffix(n,r){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(n,s);return a?this.shouldUseIntlApi()?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${a.select(r)}`:this.getSuffixRetroCompatible(a,r):(this.logger.warn(`no plural rule found for: ${n}`),"")}getSuffixRetroCompatible(n,r){const s=n.noAbs?n.plurals(r):n.plurals(Math.abs(r));let a=n.numbers[s];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const o=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?o():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}shouldUseIntlApi(){return!Dfe.includes(this.options.compatibilityJSON)}}const oR=function(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=Sfe(e,n,r);return!o&&a&&ln(r)&&(o=OA(e,r,s),o===void 0&&(o=OA(n,r,s))),o},ZN=e=>e.replace(/\$/g,"$$$$");class Bfe{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=gc.create("interpolator"),this.options=n,this.format=n.interpolation&&n.interpolation.format||(r=>r),this.init(n)}init(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});const{escape:r,escapeValue:s,useRawValueToEscape:a,prefix:o,prefixEscaped:l,suffix:c,suffixEscaped:u,formatSeparator:d,unescapeSuffix:f,unescapePrefix:m,nestingPrefix:g,nestingPrefixEscaped:x,nestingSuffix:v,nestingSuffixEscaped:y,nestingOptionsSeparator:b,maxReplaces:N,alwaysFormat:j}=n.interpolation;this.escape=r!==void 0?r:Pfe,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=o?wp(o):l||"{{",this.suffix=c?wp(c):u||"}}",this.formatSeparator=d||",",this.unescapePrefix=f?"":m||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=g?wp(g):x||wp("$t("),this.nestingSuffix=v?wp(v):y||wp(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=N||1e3,this.alwaysFormat=j!==void 0?j:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const n=(r,s)=>r&&r.source===s?(r.lastIndex=0,r):new RegExp(s,"g");this.regexp=n(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=n(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=n(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(n,r,s,a){let o,l,c;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=x=>{if(x.indexOf(this.formatSeparator)<0){const N=oR(r,u,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(N,void 0,s,{...a,...r,interpolationkey:x}):N}const v=x.split(this.formatSeparator),y=v.shift().trim(),b=v.join(this.formatSeparator).trim();return this.format(oR(r,u,y,this.options.keySeparator,this.options.ignoreJSONStructure),b,s,{...a,...r,interpolationkey:y})};this.resetRegExp();const f=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,m=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>ZN(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?ZN(this.escape(x)):ZN(x)}].forEach(x=>{for(c=0;o=x.regex.exec(n);){const v=o[1].trim();if(l=d(v),l===void 0)if(typeof f=="function"){const b=f(n,o,a);l=ln(b)?b:""}else if(a&&Object.prototype.hasOwnProperty.call(a,v))l="";else if(m){l=o[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${n}`),l="";else!ln(l)&&!this.useRawValueToEscape&&(l=ZL(l));const y=x.safeValue(l);if(n=n.replace(o[0],y),m?(x.regex.lastIndex+=l.length,x.regex.lastIndex-=o[0].length):x.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),n}nest(n,r){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,o,l;const c=(u,d)=>{const f=this.nestingOptionsSeparator;if(u.indexOf(f)<0)return u;const m=u.split(new RegExp(`${f}[ ]*{`));let g=`{${m[1]}`;u=m[0],g=this.interpolate(g,l);const x=g.match(/'/g),v=g.match(/"/g);(x&&x.length%2===0&&!v||v.length%2!==0)&&(g=g.replace(/'/g,'"'));try{l=JSON.parse(g),d&&(l={...d,...l})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,y),`${u}${f}${g}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,u};for(;a=this.nestingRegexp.exec(n);){let u=[];l={...s},l=l.replace&&!ln(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;let d=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const f=a[1].split(this.formatSeparator).map(m=>m.trim());a[1]=f.shift(),u=f,d=!0}if(o=r(c.call(this,a[1].trim(),l),l),o&&a[0]===n&&!ln(o))return o;ln(o)||(o=ZL(o)),o||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${n}`),o=""),d&&(o=u.reduce((f,m)=>this.format(f,m,s.lng,{...s,interpolationkey:a[1].trim()}),o.trim())),n=n.replace(a[0],o),this.regexp.lastIndex=0}return n}}const $fe=e=>{let n=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const s=e.split("(");n=s[0].toLowerCase().trim();const a=s[1].substring(0,s[1].length-1);n==="currency"&&a.indexOf(":")<0?r.currency||(r.currency=a.trim()):n==="relativetime"&&a.indexOf(":")<0?r.range||(r.range=a.trim()):a.split(";").forEach(l=>{if(l){const[c,...u]=l.split(":"),d=u.join(":").trim().replace(/^'+|'+$/g,""),f=c.trim();r[f]||(r[f]=d),d==="false"&&(r[f]=!1),d==="true"&&(r[f]=!0),isNaN(d)||(r[f]=parseInt(d,10))}})}return{formatName:n,formatOptions:r}},jp=e=>{const n={};return(r,s,a)=>{let o=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(o={...o,[a.interpolationkey]:void 0});const l=s+JSON.stringify(o);let c=n[l];return c||(c=e(F1(s),a),n[l]=c),c(r)}};class qfe{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=gc.create("formatter"),this.options=n,this.formats={number:jp((r,s)=>{const a=new Intl.NumberFormat(r,{...s});return o=>a.format(o)}),currency:jp((r,s)=>{const a=new Intl.NumberFormat(r,{...s,style:"currency"});return o=>a.format(o)}),datetime:jp((r,s)=>{const a=new Intl.DateTimeFormat(r,{...s});return o=>a.format(o)}),relativetime:jp((r,s)=>{const a=new Intl.RelativeTimeFormat(r,{...s});return o=>a.format(o,s.range||"day")}),list:jp((r,s)=>{const a=new Intl.ListFormat(r,{...s});return o=>a.format(o)})},this.init(n)}init(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=r.interpolation.formatSeparator||","}add(n,r){this.formats[n.toLowerCase().trim()]=r}addCached(n,r){this.formats[n.toLowerCase().trim()]=jp(r)}format(n,r,s){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=r.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(c=>c.indexOf(")")>-1)){const c=o.findIndex(u=>u.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,c)].join(this.formatSeparator)}return o.reduce((c,u)=>{const{formatName:d,formatOptions:f}=$fe(u);if(this.formats[d]){let m=c;try{const g=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},x=g.locale||g.lng||a.locale||a.lng||s;m=this.formats[d](c,x,{...f,...a,...g})}catch(g){this.logger.warn(g)}return m}else this.logger.warn(`there was no format function for ${d}`);return c},n)}}const zfe=(e,n)=>{e.pending[n]!==void 0&&(delete e.pending[n],e.pendingCount--)};class Ufe extends I2{constructor(n,r,s){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=n,this.store=r,this.services=s,this.languageUtils=s.languageUtils,this.options=a,this.logger=gc.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(s,a.backend,a)}queueLoad(n,r,s,a){const o={},l={},c={},u={};return n.forEach(d=>{let f=!0;r.forEach(m=>{const g=`${d}|${m}`;!s.reload&&this.store.hasResourceBundle(d,m)?this.state[g]=2:this.state[g]<0||(this.state[g]===1?l[g]===void 0&&(l[g]=!0):(this.state[g]=1,f=!1,l[g]===void 0&&(l[g]=!0),o[g]===void 0&&(o[g]=!0),u[m]===void 0&&(u[m]=!0)))}),f||(c[d]=!0)}),(Object.keys(o).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(o),pending:Object.keys(l),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(u)}}loaded(n,r,s){const a=n.split("|"),o=a[0],l=a[1];r&&this.emit("failedLoading",o,l,r),!r&&s&&this.store.addResourceBundle(o,l,s,void 0,void 0,{skipCopy:!0}),this.state[n]=r?-1:2,r&&s&&(this.state[n]=0);const c={};this.queue.forEach(u=>{_fe(u.loaded,[o],l),zfe(u,n),r&&u.errors.push(r),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(d=>{c[d]||(c[d]={});const f=u.loaded[d];f.length&&f.forEach(m=>{c[d][m]===void 0&&(c[d][m]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(u=>!u.done)}read(n,r,s){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!n.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:n,ns:r,fcName:s,tried:a,wait:o,callback:l});return}this.readingCalls++;const c=(d,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const m=this.waitingReads.shift();this.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(d&&f&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,n,r,s,a+1,o*2,l)},o);return}l(d,f)},u=this.backend[s].bind(this.backend);if(u.length===2){try{const d=u(n,r);d&&typeof d.then=="function"?d.then(f=>c(null,f)).catch(c):c(null,d)}catch(d){c(d)}return}return u(n,r,c)}prepareLoading(n,r){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();ln(n)&&(n=this.languageUtils.toResolveHierarchy(n)),ln(r)&&(r=[r]);const o=this.queueLoad(n,r,s,a);if(!o.toLoad.length)return o.pending.length||a(),null;o.toLoad.forEach(l=>{this.loadOne(l)})}load(n,r,s){this.prepareLoading(n,r,{},s)}reload(n,r,s){this.prepareLoading(n,r,{reload:!0},s)}loadOne(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=n.split("|"),a=s[0],o=s[1];this.read(a,o,"read",void 0,void 0,(l,c)=>{l&&this.logger.warn(`${r}loading namespace ${o} for language ${a} failed`,l),!l&&c&&this.logger.log(`${r}loaded namespace ${o} for language ${a}`,c),this.loaded(n,l,c)})}saveMissing(n,r,s,a,o){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${s}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend&&this.backend.create){const u={...l,isUpdate:o},d=this.backend.create.bind(this.backend);if(d.length<6)try{let f;d.length===5?f=d(n,r,s,a,u):f=d(n,r,s,a),f&&typeof f.then=="function"?f.then(m=>c(null,m)).catch(c):c(null,f)}catch(f){c(f)}else d(n,r,s,a,c,u)}!n||!n[0]||this.store.addResource(n[0],r,s,a)}}}const lR=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let n={};if(typeof e[1]=="object"&&(n=e[1]),ln(e[1])&&(n.defaultValue=e[1]),ln(e[2])&&(n.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(s=>{n[s]=r[s]})}return n},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),cR=e=>(ln(e.ns)&&(e.ns=[e.ns]),ln(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ln(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),wb=()=>{},Vfe=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})};class Zx extends I2{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=cR(n),this.services={},this.logger=gc,this.modules={external:[]},Vfe(this),r&&!this.isInitialized&&!n.isClone){if(!this.options.initImmediate)return this.init(n,r),this;setTimeout(()=>{this.init(n,r)},0)}}init(){var n=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof r=="function"&&(s=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(ln(r.ns)?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const a=lR();this.options={...a,...this.options,...cR(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);const o=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?gc.init(o(this.modules.logger),this.options):gc.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:typeof Intl<"u"&&(f=qfe);const m=new iR(this.options);this.store=new rR(this.options.resources,this.options);const g=this.services;g.logger=gc,g.resourceStore=this.store,g.languageUtils=m,g.pluralResolver=new Ffe(m,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(g.formatter=o(f),g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new Bfe(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new Ufe(o(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",function(x){for(var v=arguments.length,y=new Array(v>1?v-1:0),b=1;b<v;b++)y[b-1]=arguments[b];n.emit(x,...y)}),this.modules.languageDetector&&(g.languageDetector=o(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=o(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new $1(this.services,this.options),this.translator.on("*",function(x){for(var v=arguments.length,y=new Array(v>1?v-1:0),b=1;b<v;b++)y[b-1]=arguments[b];n.emit(x,...y)}),this.modules.external.forEach(x=>{x.init&&x.init(this)})}if(this.format=this.options.interpolation.format,s||(s=wb),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=function(){return n.store[f](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=function(){return n.store[f](...arguments),n}});const u=H0(),d=()=>{const f=(m,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(g),s(m,g)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),u}loadResources(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wb;const a=ln(n)?n:this.language;if(typeof n=="function"&&(s=n),!this.options.resources||this.options.partialBundledLanguages){if(a&&a.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const o=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(d=>{d!=="cimode"&&o.indexOf(d)<0&&o.push(d)})};a?l(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>l(u)),this.options.preload&&this.options.preload.forEach(c=>l(c)),this.services.backendConnector.load(o,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(c)})}else s(null)}reloadResources(n,r,s){const a=H0();return typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=void 0),n||(n=this.languages),r||(r=this.options.ns),s||(s=wb),this.services.backendConnector.reload(n,r,o=>{a.resolve(),s(o)}),a}use(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&_H.addPostProcessor(n),n.type==="formatter"&&(this.modules.formatter=n),n.type==="3rdParty"&&this.modules.external.push(n),this}setResolvedLanguage(n){if(!(!n||!this.languages)&&!(["cimode","dev"].indexOf(n)>-1))for(let r=0;r<this.languages.length;r++){const s=this.languages[r];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}}changeLanguage(n,r){var s=this;this.isLanguageChangingTo=n;const a=H0();this.emit("languageChanging",n);const o=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},l=(u,d)=>{d?(o(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,a.resolve(function(){return s.t(...arguments)}),r&&r(u,function(){return s.t(...arguments)})},c=u=>{!n&&!u&&this.services.languageDetector&&(u=[]);const d=ln(u)?u:this.services.languageUtils.getBestMatchFromCodes(u);d&&(this.language||o(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(d)),this.loadResources(d,f=>{l(f,d)})};return!n&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(n),a}getFixedT(n,r,s){var a=this;const o=function(l,c){let u;if(typeof c!="object"){for(var d=arguments.length,f=new Array(d>2?d-2:0),m=2;m<d;m++)f[m-2]=arguments[m];u=a.options.overloadTranslationOptionHandler([l,c].concat(f))}else u={...c};u.lng=u.lng||o.lng,u.lngs=u.lngs||o.lngs,u.ns=u.ns||o.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||s||o.keyPrefix);const g=a.options.keySeparator||".";let x;return u.keyPrefix&&Array.isArray(l)?x=l.map(v=>`${u.keyPrefix}${g}${v}`):x=u.keyPrefix?`${u.keyPrefix}${g}${l}`:l,a.t(x,u)};return ln(n)?o.lng=n:o.lngs=n,o.ns=r,o.keyPrefix=s,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(n){this.options.defaultNS=n}hasLoadedNamespace(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=r.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const l=(c,u)=>{const d=this.services.backendConnector.state[`${c}|${u}`];return d===-1||d===0||d===2};if(r.precheck){const c=r.precheck(this,l);if(c!==void 0)return c}return!!(this.hasResourceBundle(s,n)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(s,n)&&(!a||l(o,n)))}loadNamespaces(n,r){const s=H0();return this.options.ns?(ln(n)&&(n=[n]),n.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{s.resolve(),r&&r(a)}),s):(r&&r(),Promise.resolve())}loadLanguages(n,r){const s=H0();ln(n)&&(n=[n]);const a=this.options.preload||[],o=n.filter(l=>a.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return o.length?(this.options.preload=a.concat(o),this.loadResources(l=>{s.resolve(),r&&r(l)}),s):(r&&r(),Promise.resolve())}dir(n){if(n||(n=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!n)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services&&this.services.languageUtils||new iR(lR());return r.indexOf(s.getLanguagePartFromCode(n))>-1||n.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new Zx(n,r)}cloneInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wb;const s=n.forkResourceStore;s&&delete n.forkResourceStore;const a={...this.options,...n,isClone:!0},o=new Zx(a);return(n.debug!==void 0||n.prefix!==void 0)&&(o.logger=o.logger.clone(n)),["store","services","language"].forEach(c=>{o[c]=this[c]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},s&&(o.store=new rR(this.store.data,a),o.services.resourceStore=o.store),o.translator=new $1(o.services,a),o.translator.on("*",function(c){for(var u=arguments.length,d=new Array(u>1?u-1:0),f=1;f<u;f++)d[f-1]=arguments[f];o.emit(c,...d)}),o.init(a,r),o.translator.options=a,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Hi=Zx.createInstance();Hi.createInstance=Zx.createInstance;Hi.createInstance;Hi.dir;Hi.init;Hi.loadResources;Hi.reloadResources;Hi.use;Hi.changeLanguage;Hi.getFixedT;Hi.t;Hi.exists;Hi.setDefaultNamespace;Hi.hasLoadedNamespace;Hi.loadNamespaces;Hi.loadLanguages;function SH(){const e=Hi.language||"en";return{en:"en-US",es:"es-ES",fr:"fr-FR",de:"de-DE",it:"it-IT","pt-BR":"pt-BR",nl:"nl-NL",pl:"pl-PL",ja:"ja-JP","zh-Hans":"zh-CN"}[e]||"en-US"}function Hfe(e,n=0){return e==null||isNaN(e)?"—":new Intl.NumberFormat(SH(),{minimumFractionDigits:n,maximumFractionDigits:n}).format(e)}function ro(e,n="USD"){return e==null||isNaN(e)?"—":new Intl.NumberFormat(SH(),{style:"currency",currency:n,minimumFractionDigits:0,maximumFractionDigits:2}).format(e)}function aa(e,n="oz"){return e==null||isNaN(e)?"—":`${Hfe(e,1)} ${n}`}const M2=C.createContext(null);function FE(e){const n=C.useRef(null);return n.current===null&&(n.current=e()),n.current}const BE=C.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Wfe extends C.Component{getSnapshotBeforeUpdate(n){const r=this.props.childRef.current;if(r&&n.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Kfe({children:e,isPresent:n}){const r=C.useId(),s=C.useRef(null),a=C.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=C.useContext(BE);return C.useInsertionEffect(()=>{const{width:l,height:c,top:u,left:d}=a.current;if(n||!s.current||!l||!c)return;s.current.dataset.motionPopId=r;const f=document.createElement("style");return o&&(f.nonce=o),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${u}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[n]),i.jsx(Wfe,{isPresent:n,childRef:s,sizeRef:a,children:C.cloneElement(e,{ref:s})})}const Gfe=({children:e,initial:n,isPresent:r,onExitComplete:s,custom:a,presenceAffectsLayout:o,mode:l})=>{const c=FE(Yfe),u=C.useId(),d=C.useCallback(m=>{c.set(m,!0);for(const g of c.values())if(!g)return;s&&s()},[c,s]),f=C.useMemo(()=>({id:u,initial:n,isPresent:r,custom:a,onExitComplete:d,register:m=>(c.set(m,!1),()=>c.delete(m))}),o?[Math.random(),d]:[r,d]);return C.useMemo(()=>{c.forEach((m,g)=>c.set(g,!1))},[r]),C.useEffect(()=>{!r&&!c.size&&s&&s()},[r]),l==="popLayout"&&(e=i.jsx(Kfe,{isPresent:r,children:e})),i.jsx(M2.Provider,{value:f,children:e})};function Yfe(){return new Map}const $E=C.createContext({}),oo=e=>e;let CH=oo;function qE(e){let n;return()=>(n===void 0&&(n=e()),n)}const Ng=(e,n,r)=>{const s=n-e;return s===0?1:(r-e)/s},Lu=e=>e*1e3,Ru=e=>e/1e3,jb=e=>e.key||"";function uR(e){const n=[];return C.Children.forEach(e,r=>{C.isValidElement(r)&&n.push(r)}),n}const zE=typeof window<"u",PH=zE?C.useLayoutEffect:C.useEffect,l0=({children:e,exitBeforeEnter:n,custom:r,initial:s=!0,onExitComplete:a,presenceAffectsLayout:o=!0,mode:l="sync"})=>{const c=C.useMemo(()=>uR(e),[e]),u=c.map(jb),d=C.useRef(!0),f=C.useRef(c),m=FE(()=>new Map),[g,x]=C.useState(c),[v,y]=C.useState(c);PH(()=>{d.current=!1,f.current=c;for(let j=0;j<v.length;j++){const S=jb(v[j]);u.includes(S)?m.delete(S):m.get(S)!==!0&&m.set(S,!1)}},[v,u.length,u.join("-")]);const b=[];if(c!==g){let j=[...c];for(let S=0;S<v.length;S++){const A=v[S],P=jb(A);u.includes(P)||(j.splice(S,0,A),b.push(A))}l==="wait"&&b.length&&(j=b),y(uR(j)),x(c);return}const{forceRender:N}=C.useContext($E);return i.jsx(i.Fragment,{children:v.map(j=>{const S=jb(j),A=c===v||u.includes(S),P=()=>{if(m.has(S))m.set(S,!0);else return;let L=!0;m.forEach(O=>{O||(L=!1)}),L&&(N==null||N(),y(f.current),a&&a())};return i.jsx(Gfe,{isPresent:A,initial:!d.current||s?void 0:!1,custom:A?void 0:r,presenceAffectsLayout:o,mode:l,onExitComplete:A?void 0:P,children:j},S)})})},Qfe={useManualTiming:!1};function Xfe(e){let n=new Set,r=new Set,s=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,f=!1,m=!1)=>{const x=m&&s?n:r;return f&&o.add(d),x.has(d)||x.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(l=d,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const Nb=["read","resolveKeyframes","update","preRender","render","postRender"],Jfe=40;function AH(e,n){let r=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>r=!0,l=Nb.reduce((N,j)=>(N[j]=Xfe(o),N),{}),{read:c,resolveKeyframes:u,update:d,preRender:f,render:m,postRender:g}=l,x=()=>{const N=performance.now();r=!1,a.delta=s?1e3/60:Math.max(Math.min(N-a.timestamp,Jfe),1),a.timestamp=N,a.isProcessing=!0,c.process(a),u.process(a),d.process(a),f.process(a),m.process(a),g.process(a),a.isProcessing=!1,r&&n&&(s=!1,e(x))},v=()=>{r=!0,s=!0,a.isProcessing||e(x)};return{schedule:Nb.reduce((N,j)=>{const S=l[j];return N[j]=(A,P=!1,L=!1)=>(r||v(),S.schedule(A,P,L)),N},{}),cancel:N=>{for(let j=0;j<Nb.length;j++)l[Nb[j]].cancel(N)},state:a,steps:l}}const{schedule:Dr,cancel:Ph,state:hi,steps:e5}=AH(typeof requestAnimationFrame<"u"?requestAnimationFrame:oo,!0),kH=C.createContext({strict:!1}),dR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_g={};for(const e in dR)_g[e]={isEnabled:n=>dR[e].some(r=>!!n[r])};function Zfe(e){for(const n in e)_g[n]={..._g[n],...e[n]}}const eme=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function q1(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||eme.has(e)}let EH=e=>!q1(e);function tme(e){e&&(EH=n=>n.startsWith("on")?!q1(n):e(n))}try{tme(require("@emotion/is-prop-valid").default)}catch{}function nme(e,n,r){const s={};for(const a in e)a==="values"&&typeof e.values=="object"||(EH(a)||r===!0&&q1(a)||!n&&!q1(a)||e.draggable&&a.startsWith("onDrag"))&&(s[a]=e[a]);return s}function rme(e){if(typeof Proxy>"u")return e;const n=new Map,r=(...s)=>e(...s);return new Proxy(r,{get:(s,a)=>a==="create"?e:(n.has(a)||n.set(a,e(a)),n.get(a))})}const F2=C.createContext({});function ev(e){return typeof e=="string"||Array.isArray(e)}function B2(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const UE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],VE=["initial",...UE];function $2(e){return B2(e.animate)||VE.some(n=>ev(e[n]))}function TH(e){return!!($2(e)||e.variants)}function sme(e,n){if($2(e)){const{initial:r,animate:s}=e;return{initial:r===!1||ev(r)?r:void 0,animate:ev(s)?s:void 0}}return e.inherit!==!1?n:{}}function ime(e){const{initial:n,animate:r}=sme(e,C.useContext(F2));return C.useMemo(()=>({initial:n,animate:r}),[hR(n),hR(r)])}function hR(e){return Array.isArray(e)?e.join(" "):e}const ame=Symbol.for("motionComponentSymbol");function Ip(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function ome(e,n,r){return C.useCallback(s=>{s&&e.mount&&e.mount(s),n&&(s?n.mount(s):n.unmount()),r&&(typeof r=="function"?r(s):Ip(r)&&(r.current=s))},[n])}const HE=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),lme="framerAppearId",OH="data-"+HE(lme),{schedule:WE}=AH(queueMicrotask,!1),LH=C.createContext({});function cme(e,n,r,s,a){var o,l;const{visualElement:c}=C.useContext(F2),u=C.useContext(kH),d=C.useContext(M2),f=C.useContext(BE).reducedMotion,m=C.useRef(null);s=s||u.renderer,!m.current&&s&&(m.current=s(e,{visualState:n,parent:c,props:r,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:f}));const g=m.current,x=C.useContext(LH);g&&!g.projection&&a&&(g.type==="html"||g.type==="svg")&&ume(m.current,r,a,x);const v=C.useRef(!1);C.useInsertionEffect(()=>{g&&v.current&&g.update(r,d)});const y=r[OH],b=C.useRef(!!y&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,y))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,y)));return PH(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),WE.render(g.render),b.current&&g.animationState&&g.animationState.animateChanges())}),C.useEffect(()=>{g&&(!b.current&&g.animationState&&g.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var N;(N=window.MotionHandoffMarkAsComplete)===null||N===void 0||N.call(window,y)}),b.current=!1))}),g}function ume(e,n,r,s){const{layoutId:a,layout:o,drag:l,dragConstraints:c,layoutScroll:u,layoutRoot:d}=n;e.projection=new r(e.latestValues,n["data-framer-portal-id"]?void 0:RH(e.parent)),e.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!l||c&&Ip(c),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,layoutScroll:u,layoutRoot:d})}function RH(e){if(e)return e.options.allowProjection!==!1?e.projection:RH(e.parent)}function dme({preloadedFeatures:e,createVisualElement:n,useRender:r,useVisualState:s,Component:a}){var o,l;e&&Zfe(e);function c(d,f){let m;const g={...C.useContext(BE),...d,layoutId:hme(d)},{isStatic:x}=g,v=ime(d),y=s(d,x);if(!x&&zE){fme();const b=mme(g);m=b.MeasureLayout,v.visualElement=cme(a,y,g,n,b.ProjectionNode)}return i.jsxs(F2.Provider,{value:v,children:[m&&v.visualElement?i.jsx(m,{visualElement:v.visualElement,...g}):null,r(a,d,ome(y,v.visualElement,f),y,x,v.visualElement)]})}c.displayName=`motion.${typeof a=="string"?a:`create(${(l=(o=a.displayName)!==null&&o!==void 0?o:a.name)!==null&&l!==void 0?l:""})`}`;const u=C.forwardRef(c);return u[ame]=a,u}function hme({layoutId:e}){const n=C.useContext($E).id;return n&&e!==void 0?n+"-"+e:e}function fme(e,n){C.useContext(kH).strict}function mme(e){const{drag:n,layout:r}=_g;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(e)||r!=null&&r.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const pme=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function KE(e){return typeof e!="string"||e.includes("-")?!1:!!(pme.indexOf(e)>-1||/[A-Z]/u.test(e))}function DH(e,{style:n,vars:r},s,a){Object.assign(e.style,n,a&&a.getProjectionStyles(s));for(const o in r)e.style.setProperty(o,r[o])}const IH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function MH(e,n,r,s){DH(e,n,void 0,s);for(const a in n.attrs)e.setAttribute(IH.has(a)?a:HE(a),n.attrs[a])}const qi=e=>!!(e&&e.getVelocity),z1={};function gme(e){Object.assign(z1,e)}const ly=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Dm=new Set(ly);function FH(e,{layout:n,layoutId:r}){return Dm.has(e)||e.startsWith("origin")||(n||r!==void 0)&&(!!z1[e]||e==="opacity")}function GE(e,n,r){var s;const{style:a}=e,o={};for(const l in a)(qi(a[l])||n.style&&qi(n.style[l])||FH(l,e)||((s=r==null?void 0:r.getValue(l))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(o[l]=a[l]);return o}function BH(e,n,r){const s=GE(e,n,r);for(const a in e)if(qi(e[a])||qi(n[a])){const o=ly.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[o]=e[a]}return s}function fR(e){const n=[{},{}];return e==null||e.values.forEach((r,s)=>{n[0][s]=r.get(),n[1][s]=r.getVelocity()}),n}function YE(e,n,r,s){if(typeof n=="function"){const[a,o]=fR(s);n=n(r!==void 0?r:e.custom,a,o)}if(typeof n=="string"&&(n=e.variants&&e.variants[n]),typeof n=="function"){const[a,o]=fR(s);n=n(r!==void 0?r:e.custom,a,o)}return n}const LA=e=>Array.isArray(e),xme=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),vme=e=>LA(e)?e[e.length-1]||0:e;function c1(e){const n=qi(e)?e.get():e;return xme(n)?n.toValue():n}function yme({scrapeMotionValuesFromProps:e,createRenderState:n,onMount:r},s,a,o){const l={latestValues:bme(s,a,o,e),renderState:n()};return r&&(l.mount=c=>r(s,c,l)),l}const $H=e=>(n,r)=>{const s=C.useContext(F2),a=C.useContext(M2),o=()=>yme(e,n,s,a);return r?o():FE(o)};function bme(e,n,r,s){const a={},o=s(e,{});for(const g in o)a[g]=c1(o[g]);let{initial:l,animate:c}=e;const u=$2(e),d=TH(e);n&&d&&!u&&e.inherit!==!1&&(l===void 0&&(l=n.initial),c===void 0&&(c=n.animate));let f=r?r.initial===!1:!1;f=f||l===!1;const m=f?c:l;if(m&&typeof m!="boolean"&&!B2(m)){const g=Array.isArray(m)?m:[m];for(let x=0;x<g.length;x++){const v=YE(e,g[x]);if(v){const{transitionEnd:y,transition:b,...N}=v;for(const j in N){let S=N[j];if(Array.isArray(S)){const A=f?S.length-1:0;S=S[A]}S!==null&&(a[j]=S)}for(const j in y)a[j]=y[j]}}}return a}const QE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),qH=()=>({...QE(),attrs:{}}),zH=(e,n)=>n&&typeof e=="number"?n.transform(e):e,Uu=(e,n,r)=>r>n?n:r<e?e:r,c0={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},tv={...c0,transform:e=>Uu(0,1,e)},_b={...c0,default:1},cy=e=>({test:n=>typeof n=="string"&&n.endsWith(e)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${e}`}),Yd=cy("deg"),jc=cy("%"),Jt=cy("px"),wme=cy("vh"),jme=cy("vw"),mR={...jc,parse:e=>jc.parse(e)/100,transform:e=>jc.transform(e*100)},Nme={borderWidth:Jt,borderTopWidth:Jt,borderRightWidth:Jt,borderBottomWidth:Jt,borderLeftWidth:Jt,borderRadius:Jt,radius:Jt,borderTopLeftRadius:Jt,borderTopRightRadius:Jt,borderBottomRightRadius:Jt,borderBottomLeftRadius:Jt,width:Jt,maxWidth:Jt,height:Jt,maxHeight:Jt,top:Jt,right:Jt,bottom:Jt,left:Jt,padding:Jt,paddingTop:Jt,paddingRight:Jt,paddingBottom:Jt,paddingLeft:Jt,margin:Jt,marginTop:Jt,marginRight:Jt,marginBottom:Jt,marginLeft:Jt,backgroundPositionX:Jt,backgroundPositionY:Jt},_me={rotate:Yd,rotateX:Yd,rotateY:Yd,rotateZ:Yd,scale:_b,scaleX:_b,scaleY:_b,scaleZ:_b,skew:Yd,skewX:Yd,skewY:Yd,distance:Jt,translateX:Jt,translateY:Jt,translateZ:Jt,x:Jt,y:Jt,z:Jt,perspective:Jt,transformPerspective:Jt,opacity:tv,originX:mR,originY:mR,originZ:Jt},pR={...c0,transform:Math.round},XE={...Nme,..._me,zIndex:pR,size:Jt,fillOpacity:tv,strokeOpacity:tv,numOctaves:pR},Sme={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Cme=ly.length;function Pme(e,n,r){let s="",a=!0;for(let o=0;o<Cme;o++){const l=ly[o],c=e[l];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(l.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||r){const d=zH(c,XE[l]);if(!u){a=!1;const f=Sme[l]||l;s+=`${f}(${d}) `}r&&(n[l]=d)}}return s=s.trim(),r?s=r(n,a?"":s):a&&(s="none"),s}const UH=e=>n=>typeof n=="string"&&n.startsWith(e),VH=UH("--"),Ame=UH("var(--"),JE=e=>Ame(e)?kme.test(e.split("/*")[0].trim()):!1,kme=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function ZE(e,n,r){const{style:s,vars:a,transformOrigin:o}=e;let l=!1,c=!1;for(const u in n){const d=n[u];if(Dm.has(u)){l=!0;continue}else if(VH(u)){a[u]=d;continue}else{const f=zH(d,XE[u]);u.startsWith("origin")?(c=!0,o[u]=f):s[u]=f}}if(n.transform||(l||r?s.transform=Pme(n,e.transform,r):s.transform&&(s.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:f=0}=o;s.transformOrigin=`${u} ${d} ${f}`}}function gR(e,n,r){return typeof e=="string"?e:Jt.transform(n+r*e)}function Eme(e,n,r){const s=gR(n,e.x,e.width),a=gR(r,e.y,e.height);return`${s} ${a}`}const Tme={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ome={offset:"strokeDashoffset",array:"strokeDasharray"};function Lme(e,n,r=1,s=0,a=!0){e.pathLength=1;const o=a?Tme:Ome;e[o.offset]=Jt.transform(-s);const l=Jt.transform(n),c=Jt.transform(r);e[o.array]=`${l} ${c}`}function e3(e,{attrX:n,attrY:r,attrScale:s,originX:a,originY:o,pathLength:l,pathSpacing:c=1,pathOffset:u=0,...d},f,m){if(ZE(e,d,m),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:g,style:x,dimensions:v}=e;g.transform&&(v&&(x.transform=g.transform),delete g.transform),v&&(a!==void 0||o!==void 0||x.transform)&&(x.transformOrigin=Eme(v,a!==void 0?a:.5,o!==void 0?o:.5)),n!==void 0&&(g.x=n),r!==void 0&&(g.y=r),s!==void 0&&(g.scale=s),l!==void 0&&Lme(g,l,c,u,!1)}const t3=e=>typeof e=="string"&&e.toLowerCase()==="svg",Rme={useVisualState:$H({scrapeMotionValuesFromProps:BH,createRenderState:qH,onMount:(e,n,{renderState:r,latestValues:s})=>{Dr.read(()=>{try{r.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Dr.render(()=>{e3(r,s,t3(n.tagName),e.transformTemplate),MH(n,r)})}})},Dme={useVisualState:$H({scrapeMotionValuesFromProps:GE,createRenderState:QE})};function HH(e,n,r){for(const s in n)!qi(n[s])&&!FH(s,r)&&(e[s]=n[s])}function Ime({transformTemplate:e},n){return C.useMemo(()=>{const r=QE();return ZE(r,n,e),Object.assign({},r.vars,r.style)},[n])}function Mme(e,n){const r=e.style||{},s={};return HH(s,r,e),Object.assign(s,Ime(e,n)),s}function Fme(e,n){const r={},s=Mme(e,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}function Bme(e,n,r,s){const a=C.useMemo(()=>{const o=qH();return e3(o,n,t3(s),e.transformTemplate),{...o.attrs,style:{...o.style}}},[n]);if(e.style){const o={};HH(o,e.style,e),a.style={...o,...a.style}}return a}function $me(e=!1){return(r,s,a,{latestValues:o},l)=>{const u=(KE(r)?Bme:Fme)(s,o,l,r),d=nme(s,typeof r=="string",e),f=r!==C.Fragment?{...d,...u,ref:a}:{},{children:m}=s,g=C.useMemo(()=>qi(m)?m.get():m,[m]);return C.createElement(r,{...f,children:g})}}function qme(e,n){return function(s,{forwardMotionProps:a}={forwardMotionProps:!1}){const l={...KE(s)?Rme:Dme,preloadedFeatures:e,useRender:$me(a),createVisualElement:n,Component:s};return dme(l)}}function WH(e,n){if(!Array.isArray(n))return!1;const r=n.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(n[s]!==e[s])return!1;return!0}function q2(e,n,r){const s=e.getProps();return YE(s,n,r!==void 0?r:s.custom,e)}const zme=qE(()=>window.ScrollTimeline!==void 0);class Ume{constructor(n){this.stop=()=>this.runAll("stop"),this.animations=n.filter(Boolean)}get finished(){return Promise.all(this.animations.map(n=>"finished"in n?n.finished:n))}getAll(n){return this.animations[0][n]}setAll(n,r){for(let s=0;s<this.animations.length;s++)this.animations[s][n]=r}attachTimeline(n,r){const s=this.animations.map(a=>{if(zme()&&a.attachTimeline)return a.attachTimeline(n);if(typeof r=="function")return r(a)});return()=>{s.forEach((a,o)=>{a&&a(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(n){this.setAll("time",n)}get speed(){return this.getAll("speed")}set speed(n){this.setAll("speed",n)}get startTime(){return this.getAll("startTime")}get duration(){let n=0;for(let r=0;r<this.animations.length;r++)n=Math.max(n,this.animations[r].duration);return n}runAll(n){this.animations.forEach(r=>r[n]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Vme extends Ume{then(n,r){return Promise.all(this.animations).then(n).catch(r)}}function n3(e,n){return e?e[n]||e.default||e:void 0}const RA=2e4;function KH(e){let n=0;const r=50;let s=e.next(n);for(;!s.done&&n<RA;)n+=r,s=e.next(n);return n>=RA?1/0:n}function r3(e){return typeof e=="function"}function xR(e,n){e.timeline=n,e.onfinish=null}const s3=e=>Array.isArray(e)&&typeof e[0]=="number",Hme={linearEasing:void 0};function Wme(e,n){const r=qE(e);return()=>{var s;return(s=Hme[n])!==null&&s!==void 0?s:r()}}const U1=Wme(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),GH=(e,n,r=10)=>{let s="";const a=Math.max(Math.round(n/r),2);for(let o=0;o<a;o++)s+=e(Ng(0,a-1,o))+", ";return`linear(${s.substring(0,s.length-2)})`};function YH(e){return!!(typeof e=="function"&&U1()||!e||typeof e=="string"&&(e in DA||U1())||s3(e)||Array.isArray(e)&&e.every(YH))}const fx=([e,n,r,s])=>`cubic-bezier(${e}, ${n}, ${r}, ${s})`,DA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fx([0,.65,.55,1]),circOut:fx([.55,0,1,.45]),backIn:fx([.31,.01,.66,-.59]),backOut:fx([.33,1.53,.69,.99])};function QH(e,n){if(e)return typeof e=="function"&&U1()?GH(e,n):s3(e)?fx(e):Array.isArray(e)?e.map(r=>QH(r,n)||DA.easeOut):DA[e]}const xl={x:!1,y:!1};function XH(){return xl.x||xl.y}function Kme(e,n,r){var s;if(e instanceof Element)return[e];if(typeof e=="string"){let a=document;const o=(s=void 0)!==null&&s!==void 0?s:a.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}function JH(e,n){const r=Kme(e),s=new AbortController,a={passive:!0,...n,signal:s.signal};return[r,a,()=>s.abort()]}function vR(e){return n=>{n.pointerType==="touch"||XH()||e(n)}}function Gme(e,n,r={}){const[s,a,o]=JH(e,r),l=vR(c=>{const{target:u}=c,d=n(c);if(typeof d!="function"||!u)return;const f=vR(m=>{d(m),u.removeEventListener("pointerleave",f)});u.addEventListener("pointerleave",f,a)});return s.forEach(c=>{c.addEventListener("pointerenter",l,a)}),o}const ZH=(e,n)=>n?e===n?!0:ZH(e,n.parentElement):!1,i3=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Yme=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Qme(e){return Yme.has(e.tagName)||e.tabIndex!==-1}const mx=new WeakSet;function yR(e){return n=>{n.key==="Enter"&&e(n)}}function t5(e,n){e.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const Xme=(e,n)=>{const r=e.currentTarget;if(!r)return;const s=yR(()=>{if(mx.has(r))return;t5(r,"down");const a=yR(()=>{t5(r,"up")}),o=()=>t5(r,"cancel");r.addEventListener("keyup",a,n),r.addEventListener("blur",o,n)});r.addEventListener("keydown",s,n),r.addEventListener("blur",()=>r.removeEventListener("keydown",s),n)};function bR(e){return i3(e)&&!XH()}function Jme(e,n,r={}){const[s,a,o]=JH(e,r),l=c=>{const u=c.currentTarget;if(!bR(c)||mx.has(u))return;mx.add(u);const d=n(c),f=(x,v)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",g),!(!bR(x)||!mx.has(u))&&(mx.delete(u),typeof d=="function"&&d(x,{success:v}))},m=x=>{f(x,r.useGlobalTarget||ZH(u,x.target))},g=x=>{f(x,!1)};window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",g,a)};return s.forEach(c=>{!Qme(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(r.useGlobalTarget?window:c).addEventListener("pointerdown",l,a),c.addEventListener("focus",d=>Xme(d,a),a)}),o}function Zme(e){return e==="x"||e==="y"?xl[e]?null:(xl[e]=!0,()=>{xl[e]=!1}):xl.x||xl.y?null:(xl.x=xl.y=!0,()=>{xl.x=xl.y=!1})}let u1;function epe(){u1=void 0}const Nc={now:()=>(u1===void 0&&Nc.set(hi.isProcessing||Qfe.useManualTiming?hi.timestamp:performance.now()),u1),set:e=>{u1=e,queueMicrotask(epe)}};function a3(e,n){e.indexOf(n)===-1&&e.push(n)}function o3(e,n){const r=e.indexOf(n);r>-1&&e.splice(r,1)}class l3{constructor(){this.subscriptions=[]}add(n){return a3(this.subscriptions,n),()=>o3(this.subscriptions,n)}notify(n,r,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](n,r,s);else for(let o=0;o<a;o++){const l=this.subscriptions[o];l&&l(n,r,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function eW(e,n){return n?e*(1e3/n):0}const wR=30,tpe=e=>!isNaN(parseFloat(e));class npe{constructor(n,r={}){this.version="11.16.4",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,a=!0)=>{const o=Nc.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(n),this.owner=r.owner}setCurrent(n){this.current=n,this.updatedAt=Nc.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=tpe(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,r){this.events[n]||(this.events[n]=new l3);const s=this.events[n].add(r);return n==="change"?()=>{s(),Dr.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,r){this.passiveEffect=n,this.stopPassiveEffect=r}set(n,r=!0){!r||!this.passiveEffect?this.updateAndNotify(n,r):this.passiveEffect(n,this.updateAndNotify)}setWithVelocity(n,r,s){this.set(r),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-s}jump(n,r=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=Nc.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>wR)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,wR);return eW(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(n){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=n(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function nv(e,n){return new npe(e,n)}function rpe(e,n,r){e.hasValue(n)?e.getValue(n).set(r):e.addValue(n,nv(r))}function spe(e,n){const r=q2(e,n);let{transitionEnd:s={},transition:a={},...o}=r||{};o={...o,...s};for(const l in o){const c=vme(o[l]);rpe(e,l,c)}}function ipe(e){return!!(qi(e)&&e.add)}function IA(e,n){const r=e.getValue("willChange");if(ipe(r))return r.add(n)}function tW(e){return e.props[OH]}const nW=(e,n,r)=>(((1-3*r+3*n)*e+(3*r-6*n))*e+3*n)*e,ape=1e-7,ope=12;function lpe(e,n,r,s,a){let o,l,c=0;do l=n+(r-n)/2,o=nW(l,s,a)-e,o>0?r=l:n=l;while(Math.abs(o)>ape&&++c<ope);return l}function uy(e,n,r,s){if(e===n&&r===s)return oo;const a=o=>lpe(o,0,1,e,r);return o=>o===0||o===1?o:nW(a(o),n,s)}const rW=e=>n=>n<=.5?e(2*n)/2:(2-e(2*(1-n)))/2,sW=e=>n=>1-e(1-n),iW=uy(.33,1.53,.69,.99),c3=sW(iW),aW=rW(c3),oW=e=>(e*=2)<1?.5*c3(e):.5*(2-Math.pow(2,-10*(e-1))),u3=e=>1-Math.sin(Math.acos(e)),lW=sW(u3),cW=rW(u3),uW=e=>/^0[^.\s]+$/u.test(e);function cpe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||uW(e):!0}const dW=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),upe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function dpe(e){const n=upe.exec(e);if(!n)return[,];const[,r,s,a]=n;return[`--${r??s}`,a]}function hW(e,n,r=1){const[s,a]=dpe(e);if(!s)return;const o=window.getComputedStyle(n).getPropertyValue(s);if(o){const l=o.trim();return dW(l)?parseFloat(l):l}return JE(a)?hW(a,n,r+1):a}const hpe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),jR=e=>e===c0||e===Jt,NR=(e,n)=>parseFloat(e.split(", ")[n]),_R=(e,n)=>(r,{transform:s})=>{if(s==="none"||!s)return 0;const a=s.match(/^matrix3d\((.+)\)$/u);if(a)return NR(a[1],n);{const o=s.match(/^matrix\((.+)\)$/u);return o?NR(o[1],e):0}},fpe=new Set(["x","y","z"]),mpe=ly.filter(e=>!fpe.has(e));function ppe(e){const n=[];return mpe.forEach(r=>{const s=e.getValue(r);s!==void 0&&(n.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),n}const Sg={width:({x:e},{paddingLeft:n="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(n)-parseFloat(r),height:({y:e},{paddingTop:n="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(n)-parseFloat(r),top:(e,{top:n})=>parseFloat(n),left:(e,{left:n})=>parseFloat(n),bottom:({y:e},{top:n})=>parseFloat(n)+(e.max-e.min),right:({x:e},{left:n})=>parseFloat(n)+(e.max-e.min),x:_R(4,13),y:_R(5,14)};Sg.translateX=Sg.x;Sg.translateY=Sg.y;const fW=e=>n=>n.test(e),gpe={test:e=>e==="auto",parse:e=>e},mW=[c0,Jt,jc,Yd,jme,wme,gpe],SR=e=>mW.find(fW(e)),sm=new Set;let MA=!1,FA=!1;function pW(){if(FA){const e=Array.from(sm).filter(s=>s.needsMeasurement),n=new Set(e.map(s=>s.element)),r=new Map;n.forEach(s=>{const a=ppe(s);a.length&&(r.set(s,a),s.render())}),e.forEach(s=>s.measureInitialState()),n.forEach(s=>{s.render();const a=r.get(s);a&&a.forEach(([o,l])=>{var c;(c=s.getValue(o))===null||c===void 0||c.set(l)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}FA=!1,MA=!1,sm.forEach(e=>e.complete()),sm.clear()}function gW(){sm.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(FA=!0)})}function xpe(){gW(),pW()}class d3{constructor(n,r,s,a,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...n],this.onComplete=r,this.name=s,this.motionValue=a,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(sm.add(this),MA||(MA=!0,Dr.read(gW),Dr.resolveKeyframes(pW))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:r,element:s,motionValue:a}=this;for(let o=0;o<n.length;o++)if(n[o]===null)if(o===0){const l=a==null?void 0:a.get(),c=n[n.length-1];if(l!==void 0)n[0]=l;else if(s&&r){const u=s.readValue(r,c);u!=null&&(n[0]=u)}n[0]===void 0&&(n[0]=c),a&&l===void 0&&a.set(n[0])}else n[o]=n[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),sm.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,sm.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ox=e=>Math.round(e*1e5)/1e5,h3=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function vpe(e){return e==null}const ype=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,f3=(e,n)=>r=>!!(typeof r=="string"&&ype.test(r)&&r.startsWith(e)||n&&!vpe(r)&&Object.prototype.hasOwnProperty.call(r,n)),xW=(e,n,r)=>s=>{if(typeof s!="string")return s;const[a,o,l,c]=s.match(h3);return{[e]:parseFloat(a),[n]:parseFloat(o),[r]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},bpe=e=>Uu(0,255,e),n5={...c0,transform:e=>Math.round(bpe(e))},zf={test:f3("rgb","red"),parse:xW("red","green","blue"),transform:({red:e,green:n,blue:r,alpha:s=1})=>"rgba("+n5.transform(e)+", "+n5.transform(n)+", "+n5.transform(r)+", "+Ox(tv.transform(s))+")"};function wpe(e){let n="",r="",s="",a="";return e.length>5?(n=e.substring(1,3),r=e.substring(3,5),s=e.substring(5,7),a=e.substring(7,9)):(n=e.substring(1,2),r=e.substring(2,3),s=e.substring(3,4),a=e.substring(4,5),n+=n,r+=r,s+=s,a+=a),{red:parseInt(n,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const BA={test:f3("#"),parse:wpe,transform:zf.transform},Mp={test:f3("hsl","hue"),parse:xW("hue","saturation","lightness"),transform:({hue:e,saturation:n,lightness:r,alpha:s=1})=>"hsla("+Math.round(e)+", "+jc.transform(Ox(n))+", "+jc.transform(Ox(r))+", "+Ox(tv.transform(s))+")"},Li={test:e=>zf.test(e)||BA.test(e)||Mp.test(e),parse:e=>zf.test(e)?zf.parse(e):Mp.test(e)?Mp.parse(e):BA.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?zf.transform(e):Mp.transform(e)},jpe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Npe(e){var n,r;return isNaN(e)&&typeof e=="string"&&(((n=e.match(h3))===null||n===void 0?void 0:n.length)||0)+(((r=e.match(jpe))===null||r===void 0?void 0:r.length)||0)>0}const vW="number",yW="color",_pe="var",Spe="var(",CR="${}",Cpe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rv(e){const n=e.toString(),r=[],s={color:[],number:[],var:[]},a=[];let o=0;const c=n.replace(Cpe,u=>(Li.test(u)?(s.color.push(o),a.push(yW),r.push(Li.parse(u))):u.startsWith(Spe)?(s.var.push(o),a.push(_pe),r.push(u)):(s.number.push(o),a.push(vW),r.push(parseFloat(u))),++o,CR)).split(CR);return{values:r,split:c,indexes:s,types:a}}function bW(e){return rv(e).values}function wW(e){const{split:n,types:r}=rv(e),s=n.length;return a=>{let o="";for(let l=0;l<s;l++)if(o+=n[l],a[l]!==void 0){const c=r[l];c===vW?o+=Ox(a[l]):c===yW?o+=Li.transform(a[l]):o+=a[l]}return o}}const Ppe=e=>typeof e=="number"?0:e;function Ape(e){const n=bW(e);return wW(e)(n.map(Ppe))}const Ah={test:Npe,parse:bW,createTransformer:wW,getAnimatableNone:Ape},kpe=new Set(["brightness","contrast","saturate","opacity"]);function Epe(e){const[n,r]=e.slice(0,-1).split("(");if(n==="drop-shadow")return e;const[s]=r.match(h3)||[];if(!s)return e;const a=r.replace(s,"");let o=kpe.has(n)?1:0;return s!==r&&(o*=100),n+"("+o+a+")"}const Tpe=/\b([a-z-]*)\(.*?\)/gu,$A={...Ah,getAnimatableNone:e=>{const n=e.match(Tpe);return n?n.map(Epe).join(" "):e}},Ope={...XE,color:Li,backgroundColor:Li,outlineColor:Li,fill:Li,stroke:Li,borderColor:Li,borderTopColor:Li,borderRightColor:Li,borderBottomColor:Li,borderLeftColor:Li,filter:$A,WebkitFilter:$A},m3=e=>Ope[e];function jW(e,n){let r=m3(e);return r!==$A&&(r=Ah),r.getAnimatableNone?r.getAnimatableNone(n):void 0}const Lpe=new Set(["auto","none","0"]);function Rpe(e,n,r){let s=0,a;for(;s<e.length&&!a;){const o=e[s];typeof o=="string"&&!Lpe.has(o)&&rv(o).values.length&&(a=e[s]),s++}if(a&&r)for(const o of n)e[o]=jW(r,a)}class NW extends d3{constructor(n,r,s,a,o){super(n,r,s,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:r,name:s}=this;if(!r||!r.current)return;super.readKeyframes();for(let u=0;u<n.length;u++){let d=n[u];if(typeof d=="string"&&(d=d.trim(),JE(d))){const f=hW(d,r.current);f!==void 0&&(n[u]=f),u===n.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!hpe.has(s)||n.length!==2)return;const[a,o]=n,l=SR(a),c=SR(o);if(l!==c)if(jR(l)&&jR(c))for(let u=0;u<n.length;u++){const d=n[u];typeof d=="string"&&(n[u]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:r}=this,s=[];for(let a=0;a<n.length;a++)cpe(n[a])&&s.push(a);s.length&&Rpe(n,s,r)}measureInitialState(){const{element:n,unresolvedKeyframes:r,name:s}=this;if(!n||!n.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sg[s](n.measureViewportBox(),window.getComputedStyle(n.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&n.getValue(s,a).jump(a,!1)}measureEndState(){var n;const{element:r,name:s,unresolvedKeyframes:a}=this;if(!r||!r.current)return;const o=r.getValue(s);o&&o.jump(this.measuredOrigin,!1);const l=a.length-1,c=a[l];a[l]=Sg[s](r.measureViewportBox(),window.getComputedStyle(r.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((n=this.removedTransforms)===null||n===void 0)&&n.length&&this.removedTransforms.forEach(([u,d])=>{r.getValue(u).set(d)}),this.resolveNoneKeyframes()}}const PR=(e,n)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ah.test(e)||e==="0")&&!e.startsWith("url("));function Dpe(e){const n=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}function Ipe(e,n,r,s){const a=e[0];if(a===null)return!1;if(n==="display"||n==="visibility")return!0;const o=e[e.length-1],l=PR(a,n),c=PR(o,n);return!l||!c?!1:Dpe(e)||(r==="spring"||r3(r))&&s}const Mpe=e=>e!==null;function z2(e,{repeat:n,repeatType:r="loop"},s){const a=e.filter(Mpe),o=n&&r!=="loop"&&n%2===1?0:a.length-1;return!o||s===void 0?a[o]:s}const Fpe=40;class _W{constructor({autoplay:n=!0,delay:r=0,type:s="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Nc.now(),this.options={autoplay:n,delay:r,type:s,repeat:a,repeatDelay:o,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Fpe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&xpe(),this._resolved}onKeyframesResolved(n,r){this.resolvedAt=Nc.now(),this.hasAttemptedResolve=!0;const{name:s,type:a,velocity:o,delay:l,onComplete:c,onUpdate:u,isGenerator:d}=this.options;if(!d&&!Ipe(n,s,a,o))if(l)this.options.duration=0;else{u==null||u(z2(n,this.options,r)),c==null||c(),this.resolveFinishedPromise();return}const f=this.initPlayback(n,r);f!==!1&&(this._resolved={keyframes:n,finalKeyframe:r,...f},this.onPostResolved())}onPostResolved(){}then(n,r){return this.currentFinishedPromise.then(n,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(n=>{this.resolveFinishedPromise=n})}}const Wr=(e,n,r)=>e+(n-e)*r;function r5(e,n,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(n-e)*6*r:r<1/2?n:r<2/3?e+(n-e)*(2/3-r)*6:e}function Bpe({hue:e,saturation:n,lightness:r,alpha:s}){e/=360,n/=100,r/=100;let a=0,o=0,l=0;if(!n)a=o=l=r;else{const c=r<.5?r*(1+n):r+n-r*n,u=2*r-c;a=r5(u,c,e+1/3),o=r5(u,c,e),l=r5(u,c,e-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:s}}function V1(e,n){return r=>r>0?n:e}const s5=(e,n,r)=>{const s=e*e,a=r*(n*n-s)+s;return a<0?0:Math.sqrt(a)},$pe=[BA,zf,Mp],qpe=e=>$pe.find(n=>n.test(e));function AR(e){const n=qpe(e);if(!n)return!1;let r=n.parse(e);return n===Mp&&(r=Bpe(r)),r}const kR=(e,n)=>{const r=AR(e),s=AR(n);if(!r||!s)return V1(e,n);const a={...r};return o=>(a.red=s5(r.red,s.red,o),a.green=s5(r.green,s.green,o),a.blue=s5(r.blue,s.blue,o),a.alpha=Wr(r.alpha,s.alpha,o),zf.transform(a))},zpe=(e,n)=>r=>n(e(r)),dy=(...e)=>e.reduce(zpe),qA=new Set(["none","hidden"]);function Upe(e,n){return qA.has(e)?r=>r<=0?e:n:r=>r>=1?n:e}function Vpe(e,n){return r=>Wr(e,n,r)}function p3(e){return typeof e=="number"?Vpe:typeof e=="string"?JE(e)?V1:Li.test(e)?kR:Kpe:Array.isArray(e)?SW:typeof e=="object"?Li.test(e)?kR:Hpe:V1}function SW(e,n){const r=[...e],s=r.length,a=e.map((o,l)=>p3(o)(o,n[l]));return o=>{for(let l=0;l<s;l++)r[l]=a[l](o);return r}}function Hpe(e,n){const r={...e,...n},s={};for(const a in r)e[a]!==void 0&&n[a]!==void 0&&(s[a]=p3(e[a])(e[a],n[a]));return a=>{for(const o in s)r[o]=s[o](a);return r}}function Wpe(e,n){var r;const s=[],a={color:0,var:0,number:0};for(let o=0;o<n.values.length;o++){const l=n.types[o],c=e.indexes[l][a[l]],u=(r=e.values[c])!==null&&r!==void 0?r:0;s[o]=u,a[l]++}return s}const Kpe=(e,n)=>{const r=Ah.createTransformer(n),s=rv(e),a=rv(n);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?qA.has(e)&&!a.values.length||qA.has(n)&&!s.values.length?Upe(e,n):dy(SW(Wpe(s,a),a.values),r):V1(e,n)};function CW(e,n,r){return typeof e=="number"&&typeof n=="number"&&typeof r=="number"?Wr(e,n,r):p3(e)(e,n)}const Gpe=5;function PW(e,n,r){const s=Math.max(n-Gpe,0);return eW(r-e(s),n-s)}const ts={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},i5=.001;function Ype({duration:e=ts.duration,bounce:n=ts.bounce,velocity:r=ts.velocity,mass:s=ts.mass}){let a,o,l=1-n;l=Uu(ts.minDamping,ts.maxDamping,l),e=Uu(ts.minDuration,ts.maxDuration,Ru(e)),l<1?(a=d=>{const f=d*l,m=f*e,g=f-r,x=zA(d,l),v=Math.exp(-m);return i5-g/x*v},o=d=>{const m=d*l*e,g=m*r+r,x=Math.pow(l,2)*Math.pow(d,2)*e,v=Math.exp(-m),y=zA(Math.pow(d,2),l);return(-a(d)+i5>0?-1:1)*((g-x)*v)/y}):(a=d=>{const f=Math.exp(-d*e),m=(d-r)*e+1;return-i5+f*m},o=d=>{const f=Math.exp(-d*e),m=(r-d)*(e*e);return f*m});const c=5/e,u=Xpe(a,o,c);if(e=Lu(e),isNaN(u))return{stiffness:ts.stiffness,damping:ts.damping,duration:e};{const d=Math.pow(u,2)*s;return{stiffness:d,damping:l*2*Math.sqrt(s*d),duration:e}}}const Qpe=12;function Xpe(e,n,r){let s=r;for(let a=1;a<Qpe;a++)s=s-e(s)/n(s);return s}function zA(e,n){return e*Math.sqrt(1-n*n)}const Jpe=["duration","bounce"],Zpe=["stiffness","damping","mass"];function ER(e,n){return n.some(r=>e[r]!==void 0)}function ege(e){let n={velocity:ts.velocity,stiffness:ts.stiffness,damping:ts.damping,mass:ts.mass,isResolvedFromDuration:!1,...e};if(!ER(e,Zpe)&&ER(e,Jpe))if(e.visualDuration){const r=e.visualDuration,s=2*Math.PI/(r*1.2),a=s*s,o=2*Uu(.05,1,1-(e.bounce||0))*Math.sqrt(a);n={...n,mass:ts.mass,stiffness:a,damping:o}}else{const r=Ype(e);n={...n,...r,mass:ts.mass},n.isResolvedFromDuration=!0}return n}function AW(e=ts.visualDuration,n=ts.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:n}:e;let{restSpeed:s,restDelta:a}=r;const o=r.keyframes[0],l=r.keyframes[r.keyframes.length-1],c={done:!1,value:o},{stiffness:u,damping:d,mass:f,duration:m,velocity:g,isResolvedFromDuration:x}=ege({...r,velocity:-Ru(r.velocity||0)}),v=g||0,y=d/(2*Math.sqrt(u*f)),b=l-o,N=Ru(Math.sqrt(u/f)),j=Math.abs(b)<5;s||(s=j?ts.restSpeed.granular:ts.restSpeed.default),a||(a=j?ts.restDelta.granular:ts.restDelta.default);let S;if(y<1){const P=zA(N,y);S=L=>{const O=Math.exp(-y*N*L);return l-O*((v+y*N*b)/P*Math.sin(P*L)+b*Math.cos(P*L))}}else if(y===1)S=P=>l-Math.exp(-N*P)*(b+(v+N*b)*P);else{const P=N*Math.sqrt(y*y-1);S=L=>{const O=Math.exp(-y*N*L),R=Math.min(P*L,300);return l-O*((v+y*N*b)*Math.sinh(R)+P*b*Math.cosh(R))/P}}const A={calculatedDuration:x&&m||null,next:P=>{const L=S(P);if(x)c.done=P>=m;else{let O=0;y<1&&(O=P===0?Lu(v):PW(S,P,L));const R=Math.abs(O)<=s,q=Math.abs(l-L)<=a;c.done=R&&q}return c.value=c.done?l:L,c},toString:()=>{const P=Math.min(KH(A),RA),L=GH(O=>A.next(P*O).value,P,30);return P+"ms "+L}};return A}function TR({keyframes:e,velocity:n=0,power:r=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:u,restDelta:d=.5,restSpeed:f}){const m=e[0],g={done:!1,value:m},x=R=>c!==void 0&&R<c||u!==void 0&&R>u,v=R=>c===void 0?u:u===void 0||Math.abs(c-R)<Math.abs(u-R)?c:u;let y=r*n;const b=m+y,N=l===void 0?b:l(b);N!==b&&(y=N-m);const j=R=>-y*Math.exp(-R/s),S=R=>N+j(R),A=R=>{const q=j(R),U=S(R);g.done=Math.abs(q)<=d,g.value=g.done?N:U};let P,L;const O=R=>{x(g.value)&&(P=R,L=AW({keyframes:[g.value,v(g.value)],velocity:PW(S,R,g.value),damping:a,stiffness:o,restDelta:d,restSpeed:f}))};return O(0),{calculatedDuration:null,next:R=>{let q=!1;return!L&&P===void 0&&(q=!0,A(R),O(R)),P!==void 0&&R>=P?L.next(R-P):(!q&&A(R),g)}}}const tge=uy(.42,0,1,1),nge=uy(0,0,.58,1),kW=uy(.42,0,.58,1),rge=e=>Array.isArray(e)&&typeof e[0]!="number",sge={linear:oo,easeIn:tge,easeInOut:kW,easeOut:nge,circIn:u3,circInOut:cW,circOut:lW,backIn:c3,backInOut:aW,backOut:iW,anticipate:oW},OR=e=>{if(s3(e)){CH(e.length===4);const[n,r,s,a]=e;return uy(n,r,s,a)}else if(typeof e=="string")return sge[e];return e};function ige(e,n,r){const s=[],a=r||CW,o=e.length-1;for(let l=0;l<o;l++){let c=a(e[l],e[l+1]);if(n){const u=Array.isArray(n)?n[l]||oo:n;c=dy(u,c)}s.push(c)}return s}function age(e,n,{clamp:r=!0,ease:s,mixer:a}={}){const o=e.length;if(CH(o===n.length),o===1)return()=>n[0];if(o===2&&e[0]===e[1])return()=>n[1];e[0]>e[o-1]&&(e=[...e].reverse(),n=[...n].reverse());const l=ige(n,s,a),c=l.length,u=d=>{let f=0;if(c>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const m=Ng(e[f],e[f+1],d);return l[f](m)};return r?d=>u(Uu(e[0],e[o-1],d)):u}function oge(e,n){const r=e[e.length-1];for(let s=1;s<=n;s++){const a=Ng(0,n,s);e.push(Wr(r,1,a))}}function lge(e){const n=[0];return oge(n,e.length-1),n}function cge(e,n){return e.map(r=>r*n)}function uge(e,n){return e.map(()=>n||kW).splice(0,e.length-1)}function H1({duration:e=300,keyframes:n,times:r,ease:s="easeInOut"}){const a=rge(s)?s.map(OR):OR(s),o={done:!1,value:n[0]},l=cge(r&&r.length===n.length?r:lge(n),e),c=age(l,n,{ease:Array.isArray(a)?a:uge(n,a)});return{calculatedDuration:e,next:u=>(o.value=c(u),o.done=u>=e,o)}}const dge=e=>{const n=({timestamp:r})=>e(r);return{start:()=>Dr.update(n,!0),stop:()=>Ph(n),now:()=>hi.isProcessing?hi.timestamp:Nc.now()}},hge={decay:TR,inertia:TR,tween:H1,keyframes:H1,spring:AW},fge=e=>e/100;class g3 extends _W{constructor(n){super(n),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:r,motionValue:s,element:a,keyframes:o}=this.options,l=(a==null?void 0:a.KeyframeResolver)||d3,c=(u,d)=>this.onKeyframesResolved(u,d);this.resolver=new l(o,c,r,s,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(n){const{type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o,velocity:l=0}=this.options,c=r3(r)?r:hge[r]||H1;let u,d;c!==H1&&typeof n[0]!="number"&&(u=dy(fge,CW(n[0],n[1])),n=[0,100]);const f=c({...this.options,keyframes:n});o==="mirror"&&(d=c({...this.options,keyframes:[...n].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=KH(f));const{calculatedDuration:m}=f,g=m+a,x=g*(s+1)-a;return{generator:f,mirroredGenerator:d,mapPercentToKeyframes:u,calculatedDuration:m,resolvedDuration:g,totalDuration:x}}onPostResolved(){const{autoplay:n=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!n?this.pause():this.state=this.pendingPlayState}tick(n,r=!1){const{resolved:s}=this;if(!s){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:a,generator:o,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:u,calculatedDuration:d,totalDuration:f,resolvedDuration:m}=s;if(this.startTime===null)return o.next(0);const{delay:g,repeat:x,repeatType:v,repeatDelay:y,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-f/this.speed,this.startTime)),r?this.currentTime=n:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(n-this.startTime)*this.speed;const N=this.currentTime-g*(this.speed>=0?1:-1),j=this.speed>=0?N<0:N>f;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let S=this.currentTime,A=o;if(x){const R=Math.min(this.currentTime,f)/m;let q=Math.floor(R),U=R%1;!U&&R>=1&&(U=1),U===1&&q--,q=Math.min(q,x+1),!!(q%2)&&(v==="reverse"?(U=1-U,y&&(U-=y/m)):v==="mirror"&&(A=l)),S=Uu(0,1,U)*m}const P=j?{done:!1,value:u[0]}:A.next(S);c&&(P.value=c(P.value));let{done:L}=P;!j&&d!==null&&(L=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return O&&a!==void 0&&(P.value=z2(u,this.options,a)),b&&b(P.value),O&&this.finish(),P}get duration(){const{resolved:n}=this;return n?Ru(n.calculatedDuration):0}get time(){return Ru(this.currentTime)}set time(n){n=Lu(n),this.currentTime=n,this.holdTime!==null||this.speed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.speed)}get speed(){return this.playbackSpeed}set speed(n){const r=this.playbackSpeed!==n;this.playbackSpeed=n,r&&(this.time=Ru(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:n=dge,onPlay:r,startTime:s}=this.options;this.driver||(this.driver=n(o=>this.tick(o))),r&&r();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var n;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(n=this.currentTime)!==null&&n!==void 0?n:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:n}=this.options;n&&n()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}}const mge=new Set(["opacity","clipPath","filter","transform"]);function pge(e,n,r,{delay:s=0,duration:a=300,repeat:o=0,repeatType:l="loop",ease:c="easeInOut",times:u}={}){const d={[n]:r};u&&(d.offset=u);const f=QH(c,a);return Array.isArray(f)&&(d.easing=f),e.animate(d,{delay:s,duration:a,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const gge=qE(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),W1=10,xge=2e4;function vge(e){return r3(e.type)||e.type==="spring"||!YH(e.ease)}function yge(e,n){const r=new g3({...n,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const a=[];let o=0;for(;!s.done&&o<xge;)s=r.sample(o),a.push(s.value),o+=W1;return{times:void 0,keyframes:a,duration:o-W1,ease:"linear"}}const EW={anticipate:oW,backInOut:aW,circInOut:cW};function bge(e){return e in EW}class LR extends _W{constructor(n){super(n);const{name:r,motionValue:s,element:a,keyframes:o}=this.options;this.resolver=new NW(o,(l,c)=>this.onKeyframesResolved(l,c),r,s,a),this.resolver.scheduleResolve()}initPlayback(n,r){var s;let{duration:a=300,times:o,ease:l,type:c,motionValue:u,name:d,startTime:f}=this.options;if(!(!((s=u.owner)===null||s===void 0)&&s.current))return!1;if(typeof l=="string"&&U1()&&bge(l)&&(l=EW[l]),vge(this.options)){const{onComplete:g,onUpdate:x,motionValue:v,element:y,...b}=this.options,N=yge(n,b);n=N.keyframes,n.length===1&&(n[1]=n[0]),a=N.duration,o=N.times,l=N.ease,c="keyframes"}const m=pge(u.owner.current,d,n,{...this.options,duration:a,times:o,ease:l});return m.startTime=f??this.calcStartTime(),this.pendingTimeline?(xR(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;u.set(z2(n,this.options,r)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:a,times:o,type:c,ease:l,keyframes:n}}get duration(){const{resolved:n}=this;if(!n)return 0;const{duration:r}=n;return Ru(r)}get time(){const{resolved:n}=this;if(!n)return 0;const{animation:r}=n;return Ru(r.currentTime||0)}set time(n){const{resolved:r}=this;if(!r)return;const{animation:s}=r;s.currentTime=Lu(n)}get speed(){const{resolved:n}=this;if(!n)return 1;const{animation:r}=n;return r.playbackRate}set speed(n){const{resolved:r}=this;if(!r)return;const{animation:s}=r;s.playbackRate=n}get state(){const{resolved:n}=this;if(!n)return"idle";const{animation:r}=n;return r.playState}get startTime(){const{resolved:n}=this;if(!n)return null;const{animation:r}=n;return r.startTime}attachTimeline(n){if(!this._resolved)this.pendingTimeline=n;else{const{resolved:r}=this;if(!r)return oo;const{animation:s}=r;xR(s,n)}return oo}play(){if(this.isStopped)return;const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:n}=this;if(!n)return;const{animation:r,keyframes:s,duration:a,type:o,ease:l,times:c}=n;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:f,onComplete:m,element:g,...x}=this.options,v=new g3({...x,keyframes:s,duration:a,type:o,ease:l,times:c,isGenerator:!0}),y=Lu(this.time);d.setWithVelocity(v.sample(y-W1).value,v.sample(y).value,W1)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:n}=this;n&&n.animation.finish()}cancel(){const{resolved:n}=this;n&&n.animation.cancel()}static supports(n){const{motionValue:r,name:s,repeatDelay:a,repeatType:o,damping:l,type:c}=n;return gge()&&s&&mge.has(s)&&r&&r.owner&&r.owner.current instanceof HTMLElement&&!r.owner.getProps().onUpdate&&!a&&o!=="mirror"&&l!==0&&c!=="inertia"}}const wge={type:"spring",stiffness:500,damping:25,restSpeed:10},jge=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Nge={type:"keyframes",duration:.8},_ge={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Sge=(e,{keyframes:n})=>n.length>2?Nge:Dm.has(e)?e.startsWith("scale")?jge(n[1]):wge:_ge;function Cge({when:e,delay:n,delayChildren:r,staggerChildren:s,staggerDirection:a,repeat:o,repeatType:l,repeatDelay:c,from:u,elapsed:d,...f}){return!!Object.keys(f).length}const x3=(e,n,r,s={},a,o)=>l=>{const c=n3(s,e)||{},u=c.delay||s.delay||0;let{elapsed:d=0}=s;d=d-Lu(u);let f={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:n.getVelocity(),...c,delay:-d,onUpdate:g=>{n.set(g),c.onUpdate&&c.onUpdate(g)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:e,motionValue:n,element:o?void 0:a};Cge(c)||(f={...f,...Sge(e,f)}),f.duration&&(f.duration=Lu(f.duration)),f.repeatDelay&&(f.repeatDelay=Lu(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let m=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(m=!0)),m&&!o&&n.get()!==void 0){const g=z2(f.keyframes,c);if(g!==void 0)return Dr.update(()=>{f.onUpdate(g),f.onComplete()}),new Vme([])}return!o&&LR.supports(f)?new LR(f):new g3(f)};function Pge({protectedKeys:e,needsAnimating:n},r){const s=e.hasOwnProperty(r)&&n[r]!==!0;return n[r]=!1,s}function TW(e,n,{delay:r=0,transitionOverride:s,type:a}={}){var o;let{transition:l=e.getDefaultTransition(),transitionEnd:c,...u}=n;s&&(l=s);const d=[],f=a&&e.animationState&&e.animationState.getState()[a];for(const m in u){const g=e.getValue(m,(o=e.latestValues[m])!==null&&o!==void 0?o:null),x=u[m];if(x===void 0||f&&Pge(f,m))continue;const v={delay:r,...n3(l||{},m)};let y=!1;if(window.MotionHandoffAnimation){const N=tW(e);if(N){const j=window.MotionHandoffAnimation(N,m,Dr);j!==null&&(v.startTime=j,y=!0)}}IA(e,m),g.start(x3(m,g,x,e.shouldReduceMotion&&Dm.has(m)?{type:!1}:v,e,y));const b=g.animation;b&&d.push(b)}return c&&Promise.all(d).then(()=>{Dr.update(()=>{c&&spe(e,c)})}),d}function UA(e,n,r={}){var s;const a=q2(e,n,r.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(o=r.transitionOverride);const l=a?()=>Promise.all(TW(e,a,r)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=o;return Age(e,n,f+d,m,g,r)}:()=>Promise.resolve(),{when:u}=o;if(u){const[d,f]=u==="beforeChildren"?[l,c]:[c,l];return d().then(()=>f())}else return Promise.all([l(),c(r.delay)])}function Age(e,n,r=0,s=0,a=1,o){const l=[],c=(e.variantChildren.size-1)*s,u=a===1?(d=0)=>d*s:(d=0)=>c-d*s;return Array.from(e.variantChildren).sort(kge).forEach((d,f)=>{d.notify("AnimationStart",n),l.push(UA(d,n,{...o,delay:r+u(f)}).then(()=>d.notify("AnimationComplete",n)))}),Promise.all(l)}function kge(e,n){return e.sortNodePosition(n)}function Ege(e,n,r={}){e.notify("AnimationStart",n);let s;if(Array.isArray(n)){const a=n.map(o=>UA(e,o,r));s=Promise.all(a)}else if(typeof n=="string")s=UA(e,n,r);else{const a=typeof n=="function"?q2(e,n,r.custom):n;s=Promise.all(TW(e,a,r))}return s.then(()=>{e.notify("AnimationComplete",n)})}const Tge=VE.length;function OW(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?OW(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const n={};for(let r=0;r<Tge;r++){const s=VE[r],a=e.props[s];(ev(a)||a===!1)&&(n[s]=a)}return n}const Oge=[...UE].reverse(),Lge=UE.length;function Rge(e){return n=>Promise.all(n.map(({animation:r,options:s})=>Ege(e,r,s)))}function Dge(e){let n=Rge(e),r=RR(),s=!0;const a=u=>(d,f)=>{var m;const g=q2(e,f,u==="exit"?(m=e.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(g){const{transition:x,transitionEnd:v,...y}=g;d={...d,...y,...v}}return d};function o(u){n=u(e)}function l(u){const{props:d}=e,f=OW(e.parent)||{},m=[],g=new Set;let x={},v=1/0;for(let b=0;b<Lge;b++){const N=Oge[b],j=r[N],S=d[N]!==void 0?d[N]:f[N],A=ev(S),P=N===u?j.isActive:null;P===!1&&(v=b);let L=S===f[N]&&S!==d[N]&&A;if(L&&s&&e.manuallyAnimateOnMount&&(L=!1),j.protectedKeys={...x},!j.isActive&&P===null||!S&&!j.prevProp||B2(S)||typeof S=="boolean")continue;const O=Ige(j.prevProp,S);let R=O||N===u&&j.isActive&&!L&&A||b>v&&A,q=!1;const U=Array.isArray(S)?S:[S];let D=U.reduce(a(N),{});P===!1&&(D={});const{prevResolvedValues:M={}}=j,G={...M,...D},Y=re=>{R=!0,g.has(re)&&(q=!0,g.delete(re)),j.needsAnimating[re]=!0;const z=e.getValue(re);z&&(z.liveStyle=!1)};for(const re in G){const z=D[re],te=M[re];if(x.hasOwnProperty(re))continue;let le=!1;LA(z)&&LA(te)?le=!WH(z,te):le=z!==te,le?z!=null?Y(re):g.add(re):z!==void 0&&g.has(re)?Y(re):j.protectedKeys[re]=!0}j.prevProp=S,j.prevResolvedValues=D,j.isActive&&(x={...x,...D}),s&&e.blockInitialAnimation&&(R=!1),R&&(!(L&&O)||q)&&m.push(...U.map(re=>({animation:re,options:{type:N}})))}if(g.size){const b={};g.forEach(N=>{const j=e.getBaseTarget(N),S=e.getValue(N);S&&(S.liveStyle=!0),b[N]=j??null}),m.push({animation:b})}let y=!!m.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(y=!1),s=!1,y?n(m):Promise.resolve()}function c(u,d){var f;if(r[u].isActive===d)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(g=>{var x;return(x=g.animationState)===null||x===void 0?void 0:x.setActive(u,d)}),r[u].isActive=d;const m=l(u);for(const g in r)r[g].protectedKeys={};return m}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>r,reset:()=>{r=RR(),s=!0}}}function Ige(e,n){return typeof n=="string"?n!==e:Array.isArray(n)?!WH(n,e):!1}function Ef(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function RR(){return{animate:Ef(!0),whileInView:Ef(),whileHover:Ef(),whileTap:Ef(),whileDrag:Ef(),whileFocus:Ef(),exit:Ef()}}class Uh{constructor(n){this.isMounted=!1,this.node=n}update(){}}class Mge extends Uh{constructor(n){super(n),n.animationState||(n.animationState=Dge(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();B2(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:r}=this.node.prevProps||{};n!==r&&this.updateAnimationControlsSubscription()}unmount(){var n;this.node.animationState.reset(),(n=this.unmountControls)===null||n===void 0||n.call(this)}}let Fge=0;class Bge extends Uh{constructor(){super(...arguments),this.id=Fge++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===s)return;const a=this.node.animationState.setActive("exit",!n);r&&!n&&a.then(()=>r(this.id))}mount(){const{register:n}=this.node.presenceContext||{};n&&(this.unmount=n(this.id))}unmount(){}}const $ge={animation:{Feature:Mge},exit:{Feature:Bge}};function sv(e,n,r,s={passive:!0}){return e.addEventListener(n,r,s),()=>e.removeEventListener(n,r)}function hy(e){return{point:{x:e.pageX,y:e.pageY}}}const qge=e=>n=>i3(n)&&e(n,hy(n));function Lx(e,n,r,s){return sv(e,n,qge(r),s)}const DR=(e,n)=>Math.abs(e-n);function zge(e,n){const r=DR(e.x,n.x),s=DR(e.y,n.y);return Math.sqrt(r**2+s**2)}class LW{constructor(n,r,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=o5(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=zge(m.offset,{x:0,y:0})>=3;if(!g&&!x)return;const{point:v}=m,{timestamp:y}=hi;this.history.push({...v,timestamp:y});const{onStart:b,onMove:N}=this.handlers;g||(b&&b(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=a5(g,this.transformPagePoint),Dr.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:x,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=o5(m.type==="pointercancel"?this.lastMoveEventInfo:a5(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,b),v&&v(m,b)},!i3(n))return;this.dragSnapToOrigin=o,this.handlers=r,this.transformPagePoint=s,this.contextWindow=a||window;const l=hy(n),c=a5(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=hi;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=r;f&&f(n,o5(c,this.history)),this.removeListeners=dy(Lx(this.contextWindow,"pointermove",this.handlePointerMove),Lx(this.contextWindow,"pointerup",this.handlePointerUp),Lx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),Ph(this.updatePoint)}}function a5(e,n){return n?{point:n(e.point)}:e}function IR(e,n){return{x:e.x-n.x,y:e.y-n.y}}function o5({point:e},n){return{point:e,delta:IR(e,RW(n)),offset:IR(e,Uge(n)),velocity:Vge(n,.1)}}function Uge(e){return e[0]}function RW(e){return e[e.length-1]}function Vge(e,n){if(e.length<2)return{x:0,y:0};let r=e.length-1,s=null;const a=RW(e);for(;r>=0&&(s=e[r],!(a.timestamp-s.timestamp>Lu(n)));)r--;if(!s)return{x:0,y:0};const o=Ru(a.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const l={x:(a.x-s.x)/o,y:(a.y-s.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const DW=1e-4,Hge=1-DW,Wge=1+DW,IW=.01,Kge=0-IW,Gge=0+IW;function lo(e){return e.max-e.min}function Yge(e,n,r){return Math.abs(e-n)<=r}function MR(e,n,r,s=.5){e.origin=s,e.originPoint=Wr(n.min,n.max,e.origin),e.scale=lo(r)/lo(n),e.translate=Wr(r.min,r.max,e.origin)-e.originPoint,(e.scale>=Hge&&e.scale<=Wge||isNaN(e.scale))&&(e.scale=1),(e.translate>=Kge&&e.translate<=Gge||isNaN(e.translate))&&(e.translate=0)}function Rx(e,n,r,s){MR(e.x,n.x,r.x,s?s.originX:void 0),MR(e.y,n.y,r.y,s?s.originY:void 0)}function FR(e,n,r){e.min=r.min+n.min,e.max=e.min+lo(n)}function Qge(e,n,r){FR(e.x,n.x,r.x),FR(e.y,n.y,r.y)}function BR(e,n,r){e.min=n.min-r.min,e.max=e.min+lo(n)}function Dx(e,n,r){BR(e.x,n.x,r.x),BR(e.y,n.y,r.y)}function Xge(e,{min:n,max:r},s){return n!==void 0&&e<n?e=s?Wr(n,e,s.min):Math.max(e,n):r!==void 0&&e>r&&(e=s?Wr(r,e,s.max):Math.min(e,r)),e}function $R(e,n,r){return{min:n!==void 0?e.min+n:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Jge(e,{top:n,left:r,bottom:s,right:a}){return{x:$R(e.x,r,a),y:$R(e.y,n,s)}}function qR(e,n){let r=n.min-e.min,s=n.max-e.max;return n.max-n.min<e.max-e.min&&([r,s]=[s,r]),{min:r,max:s}}function Zge(e,n){return{x:qR(e.x,n.x),y:qR(e.y,n.y)}}function e0e(e,n){let r=.5;const s=lo(e),a=lo(n);return a>s?r=Ng(n.min,n.max-s,e.min):s>a&&(r=Ng(e.min,e.max-a,n.min)),Uu(0,1,r)}function t0e(e,n){const r={};return n.min!==void 0&&(r.min=n.min-e.min),n.max!==void 0&&(r.max=n.max-e.min),r}const VA=.35;function n0e(e=VA){return e===!1?e=0:e===!0&&(e=VA),{x:zR(e,"left","right"),y:zR(e,"top","bottom")}}function zR(e,n,r){return{min:UR(e,n),max:UR(e,r)}}function UR(e,n){return typeof e=="number"?e:e[n]||0}const VR=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fp=()=>({x:VR(),y:VR()}),HR=()=>({min:0,max:0}),ls=()=>({x:HR(),y:HR()});function Do(e){return[e("x"),e("y")]}function MW({top:e,left:n,right:r,bottom:s}){return{x:{min:n,max:r},y:{min:e,max:s}}}function r0e({x:e,y:n}){return{top:n.min,right:e.max,bottom:n.max,left:e.min}}function s0e(e,n){if(!n)return e;const r=n({x:e.left,y:e.top}),s=n({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}function l5(e){return e===void 0||e===1}function HA({scale:e,scaleX:n,scaleY:r}){return!l5(e)||!l5(n)||!l5(r)}function Of(e){return HA(e)||FW(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function FW(e){return WR(e.x)||WR(e.y)}function WR(e){return e&&e!=="0%"}function K1(e,n,r){const s=e-r,a=n*s;return r+a}function KR(e,n,r,s,a){return a!==void 0&&(e=K1(e,a,s)),K1(e,r,s)+n}function WA(e,n=0,r=1,s,a){e.min=KR(e.min,n,r,s,a),e.max=KR(e.max,n,r,s,a)}function BW(e,{x:n,y:r}){WA(e.x,n.translate,n.scale,n.originPoint),WA(e.y,r.translate,r.scale,r.originPoint)}const GR=.999999999999,YR=1.0000000000001;function i0e(e,n,r,s=!1){const a=r.length;if(!a)return;n.x=n.y=1;let o,l;for(let c=0;c<a;c++){o=r[c],l=o.projectionDelta;const{visualElement:u}=o.options;u&&u.props.style&&u.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&$p(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(n.x*=l.x.scale,n.y*=l.y.scale,BW(e,l)),s&&Of(o.latestValues)&&$p(e,o.latestValues))}n.x<YR&&n.x>GR&&(n.x=1),n.y<YR&&n.y>GR&&(n.y=1)}function Bp(e,n){e.min=e.min+n,e.max=e.max+n}function QR(e,n,r,s,a=.5){const o=Wr(e.min,e.max,a);WA(e,n,r,o,s)}function $p(e,n){QR(e.x,n.x,n.scaleX,n.scale,n.originX),QR(e.y,n.y,n.scaleY,n.scale,n.originY)}function $W(e,n){return MW(s0e(e.getBoundingClientRect(),n))}function a0e(e,n,r){const s=$W(e,r),{scroll:a}=n;return a&&(Bp(s.x,a.offset.x),Bp(s.y,a.offset.y)),s}const qW=({current:e})=>e?e.ownerDocument.defaultView:null,o0e=new WeakMap;class l0e{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ls(),this.visualElement=n}start(n,{snapToCursor:r=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(hy(f).point)},o=(f,m)=>{const{drag:g,dragPropagation:x,onDragStart:v}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Zme(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Do(b=>{let N=this.getAxisMotionValue(b).get()||0;if(jc.test(N)){const{projection:j}=this.visualElement;if(j&&j.layout){const S=j.layout.layoutBox[b];S&&(N=lo(S)*(parseFloat(N)/100))}}this.originPoint[b]=N}),v&&Dr.postRender(()=>v(f,m)),IA(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},l=(f,m)=>{const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:v,onDrag:y}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:b}=m;if(x&&this.currentDirection===null){this.currentDirection=c0e(b),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,b),this.updateAxis("y",m.point,b),this.visualElement.render(),y&&y(f,m)},c=(f,m)=>this.stop(f,m),u=()=>Do(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new LW(n,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:qW(this.visualElement)})}stop(n,r){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&Dr.postRender(()=>o(n,r))}cancel(){this.isDragging=!1;const{projection:n,animationState:r}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(n,r,s){const{drag:a}=this.getProps();if(!s||!Sb(n,a,this.currentDirection))return;const o=this.getAxisMotionValue(n);let l=this.originPoint[n]+s[n];this.constraints&&this.constraints[n]&&(l=Xge(l,this.constraints[n],this.elastic[n])),o.set(l)}resolveConstraints(){var n;const{dragConstraints:r,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(n=this.visualElement.projection)===null||n===void 0?void 0:n.layout,o=this.constraints;r&&Ip(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=Jge(a.layoutBox,r):this.constraints=!1,this.elastic=n0e(s),o!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Do(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=t0e(a.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:r}=this.getProps();if(!n||!Ip(n))return!1;const s=n.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=a0e(s,a.root,this.visualElement.getTransformPagePoint());let l=Zge(a.layout.layoutBox,o);if(r){const c=r(r0e(l));this.hasMutatedConstraints=!!c,c&&(l=MW(c))}return l}startAnimation(n){const{drag:r,dragMomentum:s,dragElastic:a,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=Do(f=>{if(!Sb(f,r,this.currentDirection))return;let m=u&&u[f]||{};l&&(m={min:0,max:0});const g=a?200:1e6,x=a?40:1e7,v={type:"inertia",velocity:s?n[f]:0,bounceStiffness:g,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(f,v)});return Promise.all(d).then(c)}startAxisValueAnimation(n,r){const s=this.getAxisMotionValue(n);return IA(this.visualElement,n),s.start(x3(n,s,0,r,this.visualElement,!1))}stopAnimation(){Do(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){Do(n=>{var r;return(r=this.getAxisMotionValue(n).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(n){var r;return(r=this.getAxisMotionValue(n).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(n){const r=`_drag${n.toUpperCase()}`,s=this.visualElement.getProps(),a=s[r];return a||this.visualElement.getValue(n,(s.initial?s.initial[n]:void 0)||0)}snapToCursor(n){Do(r=>{const{drag:s}=this.getProps();if(!Sb(r,s,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(r);if(a&&a.layout){const{min:l,max:c}=a.layout.layoutBox[r];o.set(n[r]-Wr(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:r}=this.getProps(),{projection:s}=this.visualElement;if(!Ip(r)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Do(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const u=c.get();a[l]=e0e({min:u,max:u},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Do(l=>{if(!Sb(l,n,null))return;const c=this.getAxisMotionValue(l),{min:u,max:d}=this.constraints[l];c.set(Wr(u,d,a[l]))})}addListeners(){if(!this.visualElement.current)return;o0e.set(this.visualElement,this);const n=this.visualElement.current,r=Lx(n,"pointerdown",u=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(u)}),s=()=>{const{dragConstraints:u}=this.getProps();Ip(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Dr.read(s);const l=sv(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Do(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=u[f].translate,m.set(m.get()+u[f].translate))}),this.visualElement.render())}));return()=>{l(),r(),o(),c&&c()}}getProps(){const n=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:l=VA,dragMomentum:c=!0}=n;return{...n,drag:r,dragDirectionLock:s,dragPropagation:a,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Sb(e,n,r){return(n===!0||n===e)&&(r===null||r===e)}function c0e(e,n=10){let r=null;return Math.abs(e.y)>n?r="y":Math.abs(e.x)>n&&(r="x"),r}class u0e extends Uh{constructor(n){super(n),this.removeGroupControls=oo,this.removeListeners=oo,this.controls=new l0e(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||oo}unmount(){this.removeGroupControls(),this.removeListeners()}}const XR=e=>(n,r)=>{e&&Dr.postRender(()=>e(n,r))};class d0e extends Uh{constructor(){super(...arguments),this.removePointerDownListener=oo}onPointerDown(n){this.session=new LW(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qW(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:r,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:XR(n),onStart:XR(r),onMove:s,onEnd:(o,l)=>{delete this.session,a&&Dr.postRender(()=>a(o,l))}}}mount(){this.removePointerDownListener=Lx(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function h0e(){const e=C.useContext(M2);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=C.useId();C.useEffect(()=>s(a),[]);const o=C.useCallback(()=>r&&r(a),[a,r]);return!n&&r?[!1,o]:[!0]}const d1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function JR(e,n){return n.max===n.min?0:e/(n.max-n.min)*100}const W0={correct:(e,n)=>{if(!n.target)return e;if(typeof e=="string")if(Jt.test(e))e=parseFloat(e);else return e;const r=JR(e,n.target.x),s=JR(e,n.target.y);return`${r}% ${s}%`}},f0e={correct:(e,{treeScale:n,projectionDelta:r})=>{const s=e,a=Ah.parse(e);if(a.length>5)return s;const o=Ah.createTransformer(e),l=typeof a[0]!="number"?1:0,c=r.x.scale*n.x,u=r.y.scale*n.y;a[0+l]/=c,a[1+l]/=u;const d=Wr(c,u,.5);return typeof a[2+l]=="number"&&(a[2+l]/=d),typeof a[3+l]=="number"&&(a[3+l]/=d),o(a)}};class m0e extends C.Component{componentDidMount(){const{visualElement:n,layoutGroup:r,switchLayoutGroup:s,layoutId:a}=this.props,{projection:o}=n;gme(p0e),o&&(r.group&&r.group.add(o),s&&s.register&&a&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),d1.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:r,visualElement:s,drag:a,isPresent:o}=this.props,l=s.projection;return l&&(l.isPresent=o,a||n.layoutDependency!==r||r===void 0?l.willUpdate():this.safeToRemove(),n.isPresent!==o&&(o?l.promote():l.relegate()||Dr.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),WE.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:r,switchLayoutGroup:s}=this.props,{projection:a}=n;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function zW(e){const[n,r]=h0e(),s=C.useContext($E);return i.jsx(m0e,{...e,layoutGroup:s,switchLayoutGroup:C.useContext(LH),isPresent:n,safeToRemove:r})}const p0e={borderRadius:{...W0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:W0,borderTopRightRadius:W0,borderBottomLeftRadius:W0,borderBottomRightRadius:W0,boxShadow:f0e};function g0e(e,n,r){const s=qi(e)?e:nv(e);return s.start(x3("",s,n,r)),s.animation}function x0e(e){return e instanceof SVGElement&&e.tagName!=="svg"}const v0e=(e,n)=>e.depth-n.depth;class y0e{constructor(){this.children=[],this.isDirty=!1}add(n){a3(this.children,n),this.isDirty=!0}remove(n){o3(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(v0e),this.isDirty=!1,this.children.forEach(n)}}function b0e(e,n){const r=Nc.now(),s=({timestamp:a})=>{const o=a-r;o>=n&&(Ph(s),e(o-n))};return Dr.read(s,!0),()=>Ph(s)}const UW=["TopLeft","TopRight","BottomLeft","BottomRight"],w0e=UW.length,ZR=e=>typeof e=="string"?parseFloat(e):e,e6=e=>typeof e=="number"||Jt.test(e);function j0e(e,n,r,s,a,o){a?(e.opacity=Wr(0,r.opacity!==void 0?r.opacity:1,N0e(s)),e.opacityExit=Wr(n.opacity!==void 0?n.opacity:1,0,_0e(s))):o&&(e.opacity=Wr(n.opacity!==void 0?n.opacity:1,r.opacity!==void 0?r.opacity:1,s));for(let l=0;l<w0e;l++){const c=`border${UW[l]}Radius`;let u=t6(n,c),d=t6(r,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||e6(u)===e6(d)?(e[c]=Math.max(Wr(ZR(u),ZR(d),s),0),(jc.test(d)||jc.test(u))&&(e[c]+="%")):e[c]=d}(n.rotate||r.rotate)&&(e.rotate=Wr(n.rotate||0,r.rotate||0,s))}function t6(e,n){return e[n]!==void 0?e[n]:e.borderRadius}const N0e=VW(0,.5,lW),_0e=VW(.5,.95,oo);function VW(e,n,r){return s=>s<e?0:s>n?1:r(Ng(e,n,s))}function n6(e,n){e.min=n.min,e.max=n.max}function To(e,n){n6(e.x,n.x),n6(e.y,n.y)}function r6(e,n){e.translate=n.translate,e.scale=n.scale,e.originPoint=n.originPoint,e.origin=n.origin}function s6(e,n,r,s,a){return e-=n,e=K1(e,1/r,s),a!==void 0&&(e=K1(e,1/a,s)),e}function S0e(e,n=0,r=1,s=.5,a,o=e,l=e){if(jc.test(n)&&(n=parseFloat(n),n=Wr(l.min,l.max,n/100)-l.min),typeof n!="number")return;let c=Wr(o.min,o.max,s);e===o&&(c-=n),e.min=s6(e.min,n,r,c,a),e.max=s6(e.max,n,r,c,a)}function i6(e,n,[r,s,a],o,l){S0e(e,n[r],n[s],n[a],n.scale,o,l)}const C0e=["x","scaleX","originX"],P0e=["y","scaleY","originY"];function a6(e,n,r,s){i6(e.x,n,C0e,r?r.x:void 0,s?s.x:void 0),i6(e.y,n,P0e,r?r.y:void 0,s?s.y:void 0)}function o6(e){return e.translate===0&&e.scale===1}function HW(e){return o6(e.x)&&o6(e.y)}function l6(e,n){return e.min===n.min&&e.max===n.max}function A0e(e,n){return l6(e.x,n.x)&&l6(e.y,n.y)}function c6(e,n){return Math.round(e.min)===Math.round(n.min)&&Math.round(e.max)===Math.round(n.max)}function WW(e,n){return c6(e.x,n.x)&&c6(e.y,n.y)}function u6(e){return lo(e.x)/lo(e.y)}function d6(e,n){return e.translate===n.translate&&e.scale===n.scale&&e.originPoint===n.originPoint}class k0e{constructor(){this.members=[]}add(n){a3(this.members,n),n.scheduleRender()}remove(n){if(o3(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(n){const r=this.members.findIndex(a=>n===a);if(r===0)return!1;let s;for(let a=r;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(n,r){const s=this.lead;if(n!==s&&(this.prevLead=s,this.lead=n,n.show(),s)){s.instance&&s.scheduleRender(),n.scheduleRender(),n.resumeFrom=s,r&&(n.resumeFrom.preserveOpacity=!0),s.snapshot&&(n.snapshot=s.snapshot,n.snapshot.latestValues=s.animationValues||s.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:a}=n.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:r,resumingFrom:s}=n;r.onExitComplete&&r.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function E0e(e,n,r){let s="";const a=e.x.translate/n.x,o=e.y.translate/n.y,l=(r==null?void 0:r.z)||0;if((a||o||l)&&(s=`translate3d(${a}px, ${o}px, ${l}px) `),(n.x!==1||n.y!==1)&&(s+=`scale(${1/n.x}, ${1/n.y}) `),r){const{transformPerspective:d,rotate:f,rotateX:m,rotateY:g,skewX:x,skewY:v}=r;d&&(s=`perspective(${d}px) ${s}`),f&&(s+=`rotate(${f}deg) `),m&&(s+=`rotateX(${m}deg) `),g&&(s+=`rotateY(${g}deg) `),x&&(s+=`skewX(${x}deg) `),v&&(s+=`skewY(${v}deg) `)}const c=e.x.scale*n.x,u=e.y.scale*n.y;return(c!==1||u!==1)&&(s+=`scale(${c}, ${u})`),s||"none"}const Lf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},px=typeof window<"u"&&window.MotionDebug!==void 0,c5=["","X","Y","Z"],T0e={visibility:"hidden"},h6=1e3;let O0e=0;function u5(e,n,r,s){const{latestValues:a}=n;a[e]&&(r[e]=a[e],n.setStaticValue(e,0),s&&(s[e]=0))}function KW(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:n}=e.options;if(!n)return;const r=tW(n);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Dr,!(a||o))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&KW(s)}function GW({attachResizeListener:e,defaultParent:n,measureScroll:r,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(l={},c=n==null?void 0:n()){this.id=O0e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,px&&(Lf.totalNodes=Lf.resolvedTargetDeltas=Lf.recalculatedProjection=0),this.nodes.forEach(D0e),this.nodes.forEach($0e),this.nodes.forEach(q0e),this.nodes.forEach(I0e),px&&window.MotionDebug.record(Lf)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new y0e)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new l3),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const u=this.eventHandlers.get(l);u&&u.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=x0e(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(d||u)&&(this.isLayoutDirty=!0),e){let m;const g=()=>this.root.updateBlockedByResize=!1;e(l,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=b0e(g,250),d1.hasAnimatedSinceResize&&(d1.hasAnimatedSinceResize=!1,this.nodes.forEach(m6))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g,hasRelativeTargetChanged:x,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||f.getDefaultTransition()||W0e,{onLayoutAnimationStart:b,onLayoutAnimationComplete:N}=f.getProps(),j=!this.targetLayout||!WW(this.targetLayout,v)||x,S=!g&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||g&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,S);const A={...n3(y,"layout"),onPlay:b,onComplete:N};(f.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else g||m6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ph(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(z0e),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&KW(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(f6);return}this.isUpdating||this.nodes.forEach(F0e),this.isUpdating=!1,this.nodes.forEach(B0e),this.nodes.forEach(L0e),this.nodes.forEach(R0e),this.clearAllSnapshots();const c=Nc.now();hi.delta=Uu(0,1e3/60,c-hi.timestamp),hi.timestamp=c,hi.isProcessing=!0,e5.update.process(hi),e5.preRender.process(hi),e5.render.process(hi),hi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,WE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(M0e),this.sharedNodes.forEach(U0e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Dr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Dr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ls(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const u=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!HW(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;l&&(c||Of(this.latestValues)||f)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return l&&(u=this.removeTransform(u)),K0e(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return ls();const u=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(G0e))){const{scroll:f}=this.root;f&&(Bp(u.x,f.offset.x),Bp(u.y,f.offset.y))}return u}removeElementScroll(l){var c;const u=ls();if(To(u,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:m,options:g}=f;f!==this.root&&m&&g.layoutScroll&&(m.wasRoot&&To(u,l),Bp(u.x,m.offset.x),Bp(u.y,m.offset.y))}return u}applyTransform(l,c=!1){const u=ls();To(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&$p(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Of(f.latestValues)&&$p(u,f.latestValues)}return Of(this.latestValues)&&$p(u,this.latestValues),u}removeTransform(l){const c=ls();To(c,l);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Of(d.latestValues))continue;HA(d.latestValues)&&d.updateSnapshot();const f=ls(),m=d.measurePageBox();To(f,m),a6(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return Of(this.latestValues)&&a6(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==hi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:g}=this.options;if(!(!this.layout||!(m||g))){if(this.resolvedRelativeTargetAt=hi.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ls(),this.relativeTargetOrigin=ls(),Dx(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),To(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ls(),this.targetWithTransforms=ls()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qge(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):To(this.target,this.layout.layoutBox),BW(this.target,this.targetDelta)):To(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ls(),this.relativeTargetOrigin=ls(),Dx(this.relativeTargetOrigin,this.target,x.target),To(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}px&&Lf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||HA(this.parent.latestValues)||FW(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===hi.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;To(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,x=this.treeScale.y;i0e(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=ls());const{target:v}=c;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(r6(this.prevProjectionDelta.x,this.projectionDelta.x),r6(this.prevProjectionDelta.y,this.projectionDelta.y)),Rx(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==x||!d6(this.projectionDelta.x,this.prevProjectionDelta.x)||!d6(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),px&&Lf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fp(),this.projectionDelta=Fp(),this.projectionDeltaWithTransform=Fp()}setAnimationOrigin(l,c=!1){const u=this.snapshot,d=u?u.latestValues:{},f={...this.latestValues},m=Fp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const g=ls(),x=u?u.source:void 0,v=this.layout?this.layout.source:void 0,y=x!==v,b=this.getStack(),N=!b||b.members.length<=1,j=!!(y&&!N&&this.options.crossfade===!0&&!this.path.some(H0e));this.animationProgress=0;let S;this.mixTargetDelta=A=>{const P=A/1e3;p6(m.x,l.x,P),p6(m.y,l.y,P),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Dx(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),V0e(this.relativeTarget,this.relativeTargetOrigin,g,P),S&&A0e(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=ls()),To(S,this.relativeTarget)),y&&(this.animationValues=f,j0e(f,d,this.latestValues,P,j,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ph(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Dr.update(()=>{d1.hasAnimatedSinceResize=!0,this.currentAnimation=g0e(0,h6,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(h6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:f}=l;if(!(!c||!u||!d)){if(this!==l&&this.layout&&d&&YW(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||ls();const m=lo(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+m;const g=lo(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+g}To(c,u),$p(c,f),Rx(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new k0e),this.sharedNodes.get(l).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const d={};u.z&&u5("z",l,d,this.animationValues);for(let f=0;f<c5.length;f++)u5(`rotate${c5[f]}`,l,d,this.animationValues),u5(`skew${c5[f]}`,l,d,this.animationValues);l.render();for(const f in d)l.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);l.scheduleRender()}getProjectionStyles(l){var c,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return T0e;const d={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=c1(l==null?void 0:l.pointerEvents)||"",d.transform=f?f(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=c1(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Of(this.latestValues)&&(y.transform=f?f({},""):"none",this.hasProjected=!1),y}const g=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=E0e(this.projectionDeltaWithTransform,this.treeScale,g),f&&(d.transform=f(g,d.transform));const{x,y:v}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${v.origin*100}% 0`,m.animationValues?d.opacity=m===this?(u=(c=g.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:d.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const y in z1){if(g[y]===void 0)continue;const{correct:b,applyTo:N}=z1[y],j=d.transform==="none"?g[y]:b(g[y],m);if(N){const S=N.length;for(let A=0;A<S;A++)d[N[A]]=j}else d[y]=j}return this.options.layoutId&&(d.pointerEvents=m===this?c1(l==null?void 0:l.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(f6),this.root.sharedNodes.clear()}}}function L0e(e){e.updateLayout()}function R0e(e){var n;const r=((n=e.resumeFrom)===null||n===void 0?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=e.layout,{animationType:o}=e.options,l=r.source!==e.layout.source;o==="size"?Do(m=>{const g=l?r.measuredBox[m]:r.layoutBox[m],x=lo(g);g.min=s[m].min,g.max=g.min+x}):YW(o,r.layoutBox,s)&&Do(m=>{const g=l?r.measuredBox[m]:r.layoutBox[m],x=lo(s[m]);g.max=g.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+x)});const c=Fp();Rx(c,s,r.layoutBox);const u=Fp();l?Rx(u,e.applyTransform(a,!0),r.measuredBox):Rx(u,s,r.layoutBox);const d=!HW(c);let f=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:g,layout:x}=m;if(g&&x){const v=ls();Dx(v,r.layoutBox,g.layoutBox);const y=ls();Dx(y,s,x.layoutBox),WW(v,y)||(f=!0),m.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=v,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:r,delta:u,layoutDelta:c,hasLayoutChanged:d,hasRelativeTargetChanged:f})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function D0e(e){px&&Lf.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function I0e(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function M0e(e){e.clearSnapshot()}function f6(e){e.clearMeasurements()}function F0e(e){e.isLayoutDirty=!1}function B0e(e){const{visualElement:n}=e.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),e.resetTransform()}function m6(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function $0e(e){e.resolveTargetDelta()}function q0e(e){e.calcProjection()}function z0e(e){e.resetSkewAndRotation()}function U0e(e){e.removeLeadSnapshot()}function p6(e,n,r){e.translate=Wr(n.translate,0,r),e.scale=Wr(n.scale,1,r),e.origin=n.origin,e.originPoint=n.originPoint}function g6(e,n,r,s){e.min=Wr(n.min,r.min,s),e.max=Wr(n.max,r.max,s)}function V0e(e,n,r,s){g6(e.x,n.x,r.x,s),g6(e.y,n.y,r.y,s)}function H0e(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const W0e={duration:.45,ease:[.4,0,.1,1]},x6=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),v6=x6("applewebkit/")&&!x6("chrome/")?Math.round:oo;function y6(e){e.min=v6(e.min),e.max=v6(e.max)}function K0e(e){y6(e.x),y6(e.y)}function YW(e,n,r){return e==="position"||e==="preserve-aspect"&&!Yge(u6(n),u6(r),.2)}function G0e(e){var n;return e!==e.root&&((n=e.scroll)===null||n===void 0?void 0:n.wasRoot)}const Y0e=GW({attachResizeListener:(e,n)=>sv(e,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),d5={current:void 0},QW=GW({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!d5.current){const e=new Y0e({});e.mount(window),e.setOptions({layoutScroll:!0}),d5.current=e}return d5.current},resetTransform:(e,n)=>{e.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Q0e={pan:{Feature:d0e},drag:{Feature:u0e,ProjectionNode:QW,MeasureLayout:zW}};function b6(e,n,r){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,o=s[a];o&&Dr.postRender(()=>o(n,hy(n)))}class X0e extends Uh{mount(){const{current:n}=this.node;n&&(this.unmount=Gme(n,r=>(b6(this.node,r,"Start"),s=>b6(this.node,s,"End"))))}unmount(){}}class J0e extends Uh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dy(sv(this.node.current,"focus",()=>this.onFocus()),sv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function w6(e,n,r){const{props:s}=e;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),o=s[a];o&&Dr.postRender(()=>o(n,hy(n)))}class Z0e extends Uh{mount(){const{current:n}=this.node;n&&(this.unmount=Jme(n,r=>(w6(this.node,r,"Start"),(s,{success:a})=>w6(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const KA=new WeakMap,h5=new WeakMap,exe=e=>{const n=KA.get(e.target);n&&n(e)},txe=e=>{e.forEach(exe)};function nxe({root:e,...n}){const r=e||document;h5.has(r)||h5.set(r,{});const s=h5.get(r),a=JSON.stringify(n);return s[a]||(s[a]=new IntersectionObserver(txe,{root:e,...n})),s[a]}function rxe(e,n,r){const s=nxe(n);return KA.set(e,r),s.observe(e),()=>{KA.delete(e),s.unobserve(e)}}const sxe={some:0,all:1};class ixe extends Uh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:r,margin:s,amount:a="some",once:o}=n,l={root:r?r.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:sxe[a]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),g=d?f:m;g&&g(u)};return rxe(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:r}=this.node;["amount","margin","root"].some(axe(n,r))&&this.startObserver()}unmount(){}}function axe({viewport:e={}},{viewport:n={}}={}){return r=>e[r]!==n[r]}const oxe={inView:{Feature:ixe},tap:{Feature:Z0e},focus:{Feature:J0e},hover:{Feature:X0e}},lxe={layout:{ProjectionNode:QW,MeasureLayout:zW}},GA={current:null},XW={current:!1};function cxe(){if(XW.current=!0,!!zE)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),n=()=>GA.current=e.matches;e.addListener(n),n()}else GA.current=!1}function uxe(e,n,r){for(const s in n){const a=n[s],o=r[s];if(qi(a))e.addValue(s,a);else if(qi(o))e.addValue(s,nv(a,{owner:e}));else if(o!==a)if(e.hasValue(s)){const l=e.getValue(s);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=e.getStaticValue(s);e.addValue(s,nv(l!==void 0?l:a,{owner:e}))}}for(const s in r)n[s]===void 0&&e.removeValue(s);return n}const j6=new WeakMap,dxe=[...mW,Li,Ah],hxe=e=>dxe.find(fW(e)),N6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fxe{scrapeMotionValuesFromProps(n,r,s){return{}}constructor({parent:n,props:r,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=d3,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Nc.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Dr.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=r.initial?{...u}:{},this.renderState=d,this.parent=n,this.props=r,this.presenceContext=s,this.depth=n?n.depth+1:0,this.reducedMotionConfig=a,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=$2(r),this.isVariantNode=TH(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(r,{},this);for(const g in m){const x=m[g];u[g]!==void 0&&qi(x)&&x.set(u[g],!1)}}mount(n){this.current=n,j6.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),XW.current||cxe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:GA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){j6.delete(this.current),this.projection&&this.projection.unmount(),Ph(this.notifyUpdate),Ph(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(n,r){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const s=Dm.has(n),a=r.on("change",c=>{this.latestValues[n]=c,this.props.onUpdate&&Dr.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=r.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,n,r)),this.valueSubscriptions.set(n,()=>{a(),o(),l&&l(),r.owner&&r.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in _g){const r=_g[n];if(!r)continue;const{isEnabled:s,Feature:a}=r;if(!this.features[n]&&a&&s(this.props)&&(this.features[n]=new a(this)),this.features[n]){const o=this.features[n];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ls()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,r){this.latestValues[n]=r}update(n,r){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let s=0;s<N6.length;s++){const a=N6[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,l=n[o];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=uxe(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(n),()=>r.variantChildren.delete(n)}addValue(n,r){const s=this.values.get(n);r!==s&&(s&&this.removeValue(n),this.bindToMotionValue(n,r),this.values.set(n,r),this.latestValues[n]=r.get())}removeValue(n){this.values.delete(n);const r=this.valueSubscriptions.get(n);r&&(r(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,r){if(this.props.values&&this.props.values[n])return this.props.values[n];let s=this.values.get(n);return s===void 0&&r!==void 0&&(s=nv(r===null?void 0:r,{owner:this}),this.addValue(n,s)),s}readValue(n,r){var s;let a=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:(s=this.getBaseTargetFromProps(this.props,n))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,n,this.options);return a!=null&&(typeof a=="string"&&(dW(a)||uW(a))?a=parseFloat(a):!hxe(a)&&Ah.test(r)&&(a=jW(n,r)),this.setBaseTarget(n,qi(a)?a.get():a)),qi(a)?a.get():a}setBaseTarget(n,r){this.baseTarget[n]=r}getBaseTarget(n){var r;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const l=YE(this.props,s,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);l&&(a=l[n])}if(s&&a!==void 0)return a;const o=this.getBaseTargetFromProps(this.props,n);return o!==void 0&&!qi(o)?o:this.initialValues[n]!==void 0&&a===void 0?void 0:this.baseTarget[n]}on(n,r){return this.events[n]||(this.events[n]=new l3),this.events[n].add(r)}notify(n,...r){this.events[n]&&this.events[n].notify(...r)}}class JW extends fxe{constructor(){super(...arguments),this.KeyframeResolver=NW}sortInstanceNodePosition(n,r){return n.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(n,r){return n.style?n.style[r]:void 0}removeValueFromRenderState(n,{vars:r,style:s}){delete r[n],delete s[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;qi(n)&&(this.childSubscription=n.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function mxe(e){return window.getComputedStyle(e)}class pxe extends JW{constructor(){super(...arguments),this.type="html",this.renderInstance=DH}readValueFromInstance(n,r){if(Dm.has(r)){const s=m3(r);return s&&s.default||0}else{const s=mxe(n),a=(VH(r)?s.getPropertyValue(r):s[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(n,{transformPagePoint:r}){return $W(n,r)}build(n,r,s){ZE(n,r,s.transformTemplate)}scrapeMotionValuesFromProps(n,r,s){return GE(n,r,s)}}class gxe extends JW{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ls}getBaseTargetFromProps(n,r){return n[r]}readValueFromInstance(n,r){if(Dm.has(r)){const s=m3(r);return s&&s.default||0}return r=IH.has(r)?r:HE(r),n.getAttribute(r)}scrapeMotionValuesFromProps(n,r,s){return BH(n,r,s)}build(n,r,s){e3(n,r,this.isSVGTag,s.transformTemplate)}renderInstance(n,r,s,a){MH(n,r,s,a)}mount(n){this.isSVGTag=t3(n.tagName),super.mount(n)}}const xxe=(e,n)=>KE(e)?new gxe(n):new pxe(n,{allowProjection:e!==C.Fragment}),vxe=qme({...$ge,...oxe,...Q0e,...lxe},xxe),ms=rme(vxe),yxe=1/25.4,bxe=1/28.35,ZW=C.createContext({useImperial:!1,setUseImperial:()=>{},convertLength:e=>e,convertWeight:e=>e,getLengthUnit:()=>"mm",getWeightUnit:()=>"g",formatLength:e=>"",formatWeight:e=>""});function wxe({children:e}){const{user:n}=Kr(),[r,s]=C.useState(!1),[a,o]=C.useState(!1);C.useEffect(()=>{!(n!=null&&n.email)||a||(async()=>{try{const v=await Ce.entities.UserProfile.filter({user_email:n.email}),y=v==null?void 0:v[0];y!=null&&y.measurement_preference&&s(y.measurement_preference==="imperial"),o(!0)}catch(v){console.warn("Could not load measurement preference:",v),o(!0)}})()},[n==null?void 0:n.email,a]);const l=rn({mutationFn:async v=>{if(!(n!=null&&n.email))return;const y=await Ce.entities.UserProfile.filter({user_email:n.email}),b=y==null?void 0:y[0];b?await Ce.entities.UserProfile.update(b.id,{measurement_preference:v}):await Ce.entities.UserProfile.create({user_email:n.email,measurement_preference:v})}}),c=v=>{s(v),l.mutate(v?"imperial":"metric")},u=v=>!v||isNaN(v)?null:r?v*yxe:v,d=v=>!v||isNaN(v)?null:r?v*bxe:v,f=()=>r?"in":"mm",m=()=>r?"oz":"g",g=v=>{const y=u(v);return y===null?"":`${Math.round(y*100)/100} ${f()}`},x=v=>{const y=d(v);return y===null?"":`${Math.round(y*100)/100} ${m()}`};return i.jsx(ZW.Provider,{value:{useImperial:r,setUseImperial:c,convertLength:u,convertWeight:d,getLengthUnit:f,getWeightUnit:m,formatLength:g,formatWeight:x},children:e})}function eK(){return C.useContext(ZW)}function Np(e,n){return!e||isNaN(e)?null:n==="length"?e*25.4:n==="weight"?e*28.35:e}function f5(e){return e&&(e.usage_characteristics||e.smoking_characteristics)||""}function jxe(e){const n=e.usage_characteristics||e.smoking_characteristics||"",r={...e};return n&&(r.usage_characteristics=n,r.smoking_characteristics=""),r}var tK="AlertDialog",[Nxe]=Vi(tK,[FV]),Ku=FV(),nK=e=>{const{__scopeAlertDialog:n,...r}=e,s=Ku(n);return i.jsx(k2,{...s,...r,modal:!0})};nK.displayName=tK;var _xe="AlertDialogTrigger",Sxe=C.forwardRef((e,n)=>{const{__scopeAlertDialog:r,...s}=e,a=Ku(r);return i.jsx(eH,{...a,...s,ref:n})});Sxe.displayName=_xe;var Cxe="AlertDialogPortal",rK=e=>{const{__scopeAlertDialog:n,...r}=e,s=Ku(n);return i.jsx(E2,{...s,...r})};rK.displayName=Cxe;var Pxe="AlertDialogOverlay",sK=C.forwardRef((e,n)=>{const{__scopeAlertDialog:r,...s}=e,a=Ku(r);return i.jsx(ay,{...a,...s,ref:n})});sK.displayName=Pxe;var Xp="AlertDialogContent",[Axe,kxe]=Nxe(Xp),Exe=doe("AlertDialogContent"),iK=C.forwardRef((e,n)=>{const{__scopeAlertDialog:r,children:s,...a}=e,o=Ku(r),l=C.useRef(null),c=un(n,l),u=C.useRef(null);return i.jsx(Yhe,{contentName:Xp,titleName:aK,docsSlug:"alert-dialog",children:i.jsx(Axe,{scope:r,cancelRef:u,children:i.jsxs(oy,{role:"alertdialog",...o,...a,ref:c,onOpenAutoFocus:Ft(a.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=u.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[i.jsx(Exe,{children:s}),i.jsx(Oxe,{contentRef:l})]})})})});iK.displayName=Xp;var aK="AlertDialogTitle",oK=C.forwardRef((e,n)=>{const{__scopeAlertDialog:r,...s}=e,a=Ku(r);return i.jsx(T2,{...a,...s,ref:n})});oK.displayName=aK;var lK="AlertDialogDescription",cK=C.forwardRef((e,n)=>{const{__scopeAlertDialog:r,...s}=e,a=Ku(r);return i.jsx(O2,{...a,...s,ref:n})});cK.displayName=lK;var Txe="AlertDialogAction",uK=C.forwardRef((e,n)=>{const{__scopeAlertDialog:r,...s}=e,a=Ku(r);return i.jsx(L2,{...a,...s,ref:n})});uK.displayName=Txe;var dK="AlertDialogCancel",hK=C.forwardRef((e,n)=>{const{__scopeAlertDialog:r,...s}=e,{cancelRef:a}=kxe(dK,r),o=Ku(r),l=un(n,a);return i.jsx(L2,{...o,...s,ref:l})});hK.displayName=dK;var Oxe=({contentRef:e})=>{const n=`\`${Xp}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Xp}\` by passing a \`${lK}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Xp}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return C.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(n)},[n,e]),null},Lxe=nK,Rxe=rK,fK=sK,mK=iK,pK=uK,gK=hK,xK=oK,vK=cK;const Nm=Lxe,Dxe=Rxe,yK=C.forwardRef(({className:e,...n},r)=>i.jsx(fK,{className:ut("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...n,ref:r}));yK.displayName=fK.displayName;const kh=C.forwardRef(({className:e,...n},r)=>i.jsxs(Dxe,{children:[i.jsx(yK,{}),i.jsx(mK,{ref:r,className:ut("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n})]}));kh.displayName=mK.displayName;const Eh=({className:e,...n})=>i.jsx("div",{className:ut("flex flex-col space-y-2 text-center sm:text-left",e),...n});Eh.displayName="AlertDialogHeader";const Th=({className:e,...n})=>i.jsx("div",{className:ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...n});Th.displayName="AlertDialogFooter";const Oh=C.forwardRef(({className:e,...n},r)=>i.jsx(xK,{ref:r,className:ut("text-lg font-semibold",e),...n}));Oh.displayName=xK.displayName;const Lh=C.forwardRef(({className:e,...n},r)=>i.jsx(vK,{ref:r,className:ut("text-sm text-muted-foreground",e),...n}));Lh.displayName=vK.displayName;const Rh=C.forwardRef(({className:e,...n},r)=>i.jsx(pK,{ref:r,className:ut(Z4(),e),...n}));Rh.displayName=pK.displayName;const Dh=C.forwardRef(({className:e,...n},r)=>i.jsx(gK,{ref:r,className:ut(Z4({variant:"outline"}),"mt-2 sm:mt-0",e),...n}));Dh.displayName=gK.displayName;function Ixe({onSelect:e}){const[n,r]=C.useState(""),[s,a]=C.useState(!1),[o,l]=C.useState([]),[c,u]=C.useState(!1),d=g=>{var v,y,b;if(Array.isArray(g==null?void 0:g.pipes))return g.pipes;if(Array.isArray((v=g==null?void 0:g.data)==null?void 0:v.pipes))return g.data.pipes;if(Array.isArray((y=g==null?void 0:g.response)==null?void 0:y.pipes))return g.response.pipes;if(Array.isArray((b=g==null?void 0:g.output)==null?void 0:b.pipes))return g.output.pipes;const x=(g==null?void 0:g.text)||(g==null?void 0:g.output_text)||(g==null?void 0:g.content);if(typeof x=="string")try{const N=JSON.parse(x);if(Array.isArray(N==null?void 0:N.pipes))return N.pipes}catch{}return[]},f=async()=>{if(!(!n.trim()||s)){a(!0),u(!0),l([]);try{const g=await Ce.integrations.Core.InvokeLLM({prompt:`Search for information about this pipe: "${n}"

Search the web for detailed information about this specific pipe maker, model, or brand. Include:
- Exact maker/brand name and country of origin
- Common pipe shapes/models they make
- Materials used (briar, meerschaum, etc.)
- Typical finish styles
- Historical information and production years
- Typical price ranges and current market value
- Any notable characteristics

If this is a specific model or line, provide details about that model.

IMPORTANT PRICING GUIDELINES - Use realistic market values:
- Estate quality makers: $100-$500+
- Artisan pipes: $200-$2000+ 
- Factory pipes: $75-$300
- Premium brands (Dunhill, Charatan, Peterson, Savinelli): $150-$800+
- Budget/basket pipes: $25-$75
- High-end artisans can exceed $2000

Base prices on actual current market data from estate dealers and auction results.

CRITICAL DIMENSION RULES:
- Only provide dimensions (length_mm, weight_grams, bowl_height_mm, bowl_width_mm, bowl_depth_mm, bowl_diameter_mm) if explicitly stated in manufacturer specifications or reputable retailer listings for the same model/shape
- Do NOT estimate or infer dimensions
- If dimensions are not found in listings, return null for each dimension field
- Include dimensions_source (string) describing where dimensions were found
- Include dimensions_found (boolean) indicating if any dimensions were sourced

CRITICAL: Do NOT include any URLs, links, sources, citations, or website names in your response. Provide only descriptions and analysis.

Return an array of relevant pipe matches with detailed information.`,add_context_from_internet:!0,response_json_schema:{type:"object",properties:{pipes:{type:"array",items:{type:"object",properties:{name:{type:"string"},maker:{type:"string"},country_of_origin:{type:"string"},typical_shapes:{type:"array",items:{type:"string"}},typical_materials:{type:"array",items:{type:"string"}},typical_finishes:{type:"array",items:{type:"string"}},era:{type:"string"},price_range_low:{type:"number"},price_range_high:{type:"number"},description:{type:"string"},length_mm:{type:["number","null"]},weight_grams:{type:["number","null"]},bowl_height_mm:{type:["number","null"]},bowl_width_mm:{type:["number","null"]},bowl_diameter_mm:{type:["number","null"]},bowl_depth_mm:{type:["number","null"]},dimensions_source:{type:["string","null"]},dimensions_found:{type:"boolean"}}}}}}});l(d(g))}catch(g){console.error("Search error:",g)}finally{a(!1)}}},m=(g,x)=>{var b,N,j;x.preventDefault(),x.stopPropagation();const v={name:g.name||"",maker:g.maker||"",country_of_origin:g.country_of_origin||"",shape:((b=g.typical_shapes)==null?void 0:b[0])||"",bowl_material:((N=g.typical_materials)==null?void 0:N[0])||"",finish:((j=g.typical_finishes)==null?void 0:j[0])||"",year_made:g.era||"",estimated_value:g.price_range_low||null,notes:g.description||""},y=["length_mm","weight_grams","bowl_height_mm","bowl_width_mm","bowl_diameter_mm","bowl_depth_mm"];for(const S of y)g[S]!=null&&(v[S]=g[S]);g.dimensions_source&&(v.notes=[v.notes,`Dimensions source: ${g.dimensions_source}`].filter(Boolean).join(`

`)),e(v),l([]),r("")};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{value:n,onChange:g=>r(g.target.value),onKeyDown:g=>{g.key==="Enter"&&(g.preventDefault(),g.stopPropagation(),f())},placeholder:"Search by maker, model, or brand (e.g., 'Peterson System 314')",className:"border-stone-200"}),i.jsx(ye,{type:"button",onClick:f,disabled:s||!n.trim(),className:"bg-amber-700 hover:bg-amber-800 shrink-0",children:s?i.jsx(Cn,{className:"w-4 h-4 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(fs,{className:"w-4 h-4 mr-2"}),"Search"]})})]}),i.jsx(l0,{children:o.length>0&&i.jsx(ms.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-2",children:o.map((g,x)=>{var v,y,b,N;return i.jsx(Ee,{className:"cursor-pointer hover:bg-amber-50 transition-colors border-stone-200",onClick:j=>m(g,j),children:i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h4",{className:"font-semibold text-stone-800",children:g.name}),i.jsx(pq,{className:"w-4 h-4 text-stone-400"})]}),i.jsx("p",{className:"text-sm text-stone-600",children:g.maker}),g.country_of_origin&&i.jsx("p",{className:"text-xs text-stone-500 mt-1",children:g.country_of_origin}),g.description&&i.jsx("p",{className:"text-sm text-stone-600 mt-2 line-clamp-2",children:g.description}),i.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-3",children:[(v=g.typical_shapes)==null?void 0:v.slice(0,2).map((j,S)=>i.jsx(Ge,{variant:"secondary",className:"bg-amber-100 text-amber-800 border-amber-200 text-xs",children:j},S)),(y=g.typical_materials)==null?void 0:y.slice(0,2).map((j,S)=>i.jsx(Ge,{variant:"secondary",className:"bg-stone-100 text-stone-700 border-stone-200 text-xs",children:j},S))]})]}),(g.price_range_low||g.price_range_high)&&i.jsxs("div",{className:"text-right shrink-0",children:[i.jsx("p",{className:"text-xs text-stone-500",children:"Typical Value"}),i.jsxs("p",{className:"font-semibold text-emerald-700",children:["$",(b=g.price_range_low)==null?void 0:b.toLocaleString(),g.price_range_high&&` - $${(N=g.price_range_high)==null?void 0:N.toLocaleString()}`]})]})]})})},x)})})}),!s&&c&&o.length===0&&n&&i.jsx("p",{className:"text-sm text-stone-500 text-center py-4",children:"No results found. Try searching for a maker or model name."})]})}function Mxe({onIdentify:e}){const[n,r]=C.useState(!1),[s,a]=C.useState(!1),[o,l]=C.useState([]),c=async d=>{const f=Array.from(d.target.files);if(f.length!==0){r(!0);try{const m=f.map(v=>Ce.integrations.Core.UploadFile({file:v})),x=(await Promise.all(m)).map(v=>v.file_url);l(v=>[...v,...x])}catch(m){console.error("Upload error:",m)}finally{r(!1)}}},u=async()=>{if(o.length!==0){a(!0);try{const d=await Ce.integrations.Core.InvokeLLM({prompt:`Analyze these pipe images to identify and extract all possible details including geometry.

Look for:
1. Maker stamps, hallmarks, or brand markings
2. Pipe shape classification (Billiard, Dublin, Bent, etc.)
3. Bowl style (Cylindrical, Conical, Rounded, etc.)
4. Shank shape (Round, Diamond, Square, Oval, etc.)
5. Bend degree (Straight, 1/4 Bent, 1/2 Bent, 3/4 Bent, Full Bent, S-Bend)
6. Size class (Vest Pocket, Small, Standard, Large, Magnum/XL, etc.)
7. Materials (briar, meerschaum, etc.)
8. Finish type (smooth, sandblast, rusticated)
9. Stem material
10. Overall condition
11. Any visible dimensions or size indicators
12. Era/age indicators
13. Country of origin clues
14. Model numbers or series names

Search the web for information about any stamps or hallmarks you can identify.

Provide detailed identification results including geometry fields that can be used to fill out a pipe inventory form.`,add_context_from_internet:!0,file_urls:o,response_json_schema:{type:"object",properties:{identified_maker:{type:"string"},model_or_series:{type:"string"},country_of_origin:{type:"string"},shape:{type:"string"},bowlStyle:{type:"string"},shankShape:{type:"string"},bend:{type:"string"},sizeClass:{type:"string"},bowl_material:{type:"string"},stem_material:{type:"string"},finish:{type:"string"},stamping_text:{type:"string"},estimated_era:{type:"string"},condition:{type:"string"},confidence:{type:"string"},estimated_value_range:{type:"string"},identification_notes:{type:"string"},chamber_volume:{type:"string"}}}}),f={maker:d.identified_maker||"",name:d.model_or_series?`${d.identified_maker||""} ${d.model_or_series}`.trim():"",country_of_origin:d.country_of_origin||"",shape:d.shape||"",bowlStyle:d.bowlStyle||"",shankShape:d.shankShape||"",bend:d.bend||"",sizeClass:d.sizeClass||"",bowl_material:d.bowl_material||"",stem_material:d.stem_material||"",finish:d.finish||"",stamping:d.stamping_text||"",year_made:d.estimated_era||"",condition:d.condition||"",chamber_volume:d.chamber_volume||"",notes:d.identification_notes||"",photos:o};e(f),l([])}catch(d){console.error("Analysis error:",d)}finally{a(!1)}}};return i.jsx(Zz,{feature:"AI_IDENTIFY",featureName:"AI Photo Identification",description:"Upload photos of your pipe's stampings to instantly identify the maker, model, and approximate value using advanced AI. Available in Pro tier or for grandfathered Premium users.",children:i.jsxs(Ee,{className:"border-violet-200 bg-gradient-to-br from-violet-50 to-white",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsxs(et,{className:"text-lg flex items-center gap-2 text-violet-800",children:[i.jsx(g1,{className:"w-5 h-5"}),"Identify from Photos"]}),i.jsx("p",{className:"text-sm text-stone-600",children:"Upload photos of your pipe (including stamps) to auto-fill details"})]}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.map((d,f)=>i.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border border-stone-200",children:i.jsx("img",{src:d,alt:"",className:"w-full h-full object-cover"})},f)),i.jsxs("label",{className:"aspect-square rounded-lg border-2 border-dashed border-violet-300 hover:border-violet-400 transition-colors cursor-pointer flex flex-col items-center justify-center gap-1 text-violet-400 hover:text-violet-600",children:[n?i.jsx(Cn,{className:"w-6 h-6 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(g1,{className:"w-6 h-6"}),i.jsx("span",{className:"text-xs",children:"Add"})]}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:c,disabled:n})]})]}),o.length>0&&i.jsx(ye,{onClick:u,disabled:s,className:"w-full bg-gradient-to-r from-violet-600 to-violet-700 hover:from-violet-700 hover:to-violet-800",children:s?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),"Analyzing Photos..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Da,{className:"w-4 h-4 mr-2"}),"Identify & Fill Details"]})}),o.length===0&&i.jsx("p",{className:"text-xs text-stone-500 text-center",children:"Upload clear photos of the pipe and any visible stamps or markings"})]})]})})}var bK=["PageUp","PageDown"],wK=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],jK={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},u0="Slider",[YA,Fxe,Bxe]=a2(u0),[NK]=Vi(u0,[Bxe]),[$xe,U2]=NK(u0),_K=C.forwardRef((e,n)=>{const{name:r,min:s=0,max:a=100,step:o=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:d=[s],value:f,onValueChange:m=()=>{},onValueCommit:g=()=>{},inverted:x=!1,form:v,...y}=e,b=C.useRef(new Set),N=C.useRef(0),S=l==="horizontal"?qxe:zxe,[A=[],P]=qo({prop:f,defaultProp:d,onChange:D=>{var G;(G=[...b.current][N.current])==null||G.focus(),m(D)}}),L=C.useRef(A);function O(D){const M=Kxe(A,D);U(D,M)}function R(D){U(D,N.current)}function q(){const D=L.current[N.current];A[N.current]!==D&&g(A)}function U(D,M,{commit:G}={commit:!1}){const Y=Xxe(o),Z=Jxe(Math.round((D-s)/o)*o+s,Y),X=Qx(Z,[s,a]);P((re=[])=>{const z=Hxe(re,X,M);if(Qxe(z,u*o)){N.current=z.indexOf(X);const te=String(z)!==String(re);return te&&G&&g(z),te?z:re}else return re})}return i.jsx($xe,{scope:e.__scopeSlider,name:r,disabled:c,min:s,max:a,valueIndexToChangeRef:N,thumbs:b.current,values:A,orientation:l,form:v,children:i.jsx(YA.Provider,{scope:e.__scopeSlider,children:i.jsx(YA.Slot,{scope:e.__scopeSlider,children:i.jsx(S,{"aria-disabled":c,"data-disabled":c?"":void 0,...y,ref:n,onPointerDown:Ft(y.onPointerDown,()=>{c||(L.current=A)}),min:s,max:a,inverted:x,onSlideStart:c?void 0:O,onSlideMove:c?void 0:R,onSlideEnd:c?void 0:q,onHomeKeyDown:()=>!c&&U(s,0,{commit:!0}),onEndKeyDown:()=>!c&&U(a,A.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:M})=>{if(!c){const Z=bK.includes(D.key)||D.shiftKey&&wK.includes(D.key)?10:1,X=N.current,re=A[X],z=o*Z*M;U(re+z,X,{commit:!0})}}})})})})});_K.displayName=u0;var[SK,CK]=NK(u0,{startEdge:"left",endEdge:"right",size:"width",direction:1}),qxe=C.forwardRef((e,n)=>{const{min:r,max:s,dir:a,inverted:o,onSlideStart:l,onSlideMove:c,onSlideEnd:u,onStepKeyDown:d,...f}=e,[m,g]=C.useState(null),x=un(n,S=>g(S)),v=C.useRef(void 0),y=r0(a),b=y==="ltr",N=b&&!o||!b&&o;function j(S){const A=v.current||m.getBoundingClientRect(),P=[0,A.width],O=v3(P,N?[r,s]:[s,r]);return v.current=A,O(S-A.left)}return i.jsx(SK,{scope:e.__scopeSlider,startEdge:N?"left":"right",endEdge:N?"right":"left",direction:N?1:-1,size:"width",children:i.jsx(PK,{dir:y,"data-orientation":"horizontal",...f,ref:x,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const A=j(S.clientX);l==null||l(A)},onSlideMove:S=>{const A=j(S.clientX);c==null||c(A)},onSlideEnd:()=>{v.current=void 0,u==null||u()},onStepKeyDown:S=>{const P=jK[N?"from-left":"from-right"].includes(S.key);d==null||d({event:S,direction:P?-1:1})}})})}),zxe=C.forwardRef((e,n)=>{const{min:r,max:s,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=e,f=C.useRef(null),m=un(n,f),g=C.useRef(void 0),x=!a;function v(y){const b=g.current||f.current.getBoundingClientRect(),N=[0,b.height],S=v3(N,x?[s,r]:[r,s]);return g.current=b,S(y-b.top)}return i.jsx(SK,{scope:e.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:i.jsx(PK,{"data-orientation":"vertical",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const b=v(y.clientY);o==null||o(b)},onSlideMove:y=>{const b=v(y.clientY);l==null||l(b)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:y=>{const N=jK[x?"from-bottom":"from-top"].includes(y.key);u==null||u({event:y,direction:N?-1:1})}})})}),PK=C.forwardRef((e,n)=>{const{__scopeSlider:r,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:u,...d}=e,f=U2(u0,r);return i.jsx(At.span,{...d,ref:n,onKeyDown:Ft(e.onKeyDown,m=>{m.key==="Home"?(l(m),m.preventDefault()):m.key==="End"?(c(m),m.preventDefault()):bK.concat(wK).includes(m.key)&&(u(m),m.preventDefault())}),onPointerDown:Ft(e.onPointerDown,m=>{const g=m.target;g.setPointerCapture(m.pointerId),m.preventDefault(),f.thumbs.has(g)?g.focus():s(m)}),onPointerMove:Ft(e.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&a(m)}),onPointerUp:Ft(e.onPointerUp,m=>{const g=m.target;g.hasPointerCapture(m.pointerId)&&(g.releasePointerCapture(m.pointerId),o(m))})})}),AK="SliderTrack",kK=C.forwardRef((e,n)=>{const{__scopeSlider:r,...s}=e,a=U2(AK,r);return i.jsx(At.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:n})});kK.displayName=AK;var QA="SliderRange",EK=C.forwardRef((e,n)=>{const{__scopeSlider:r,...s}=e,a=U2(QA,r),o=CK(QA,r),l=C.useRef(null),c=un(n,l),u=a.values.length,d=a.values.map(g=>LK(g,a.min,a.max)),f=u>1?Math.min(...d):0,m=100-Math.max(...d);return i.jsx(At.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:c,style:{...e.style,[o.startEdge]:f+"%",[o.endEdge]:m+"%"}})});EK.displayName=QA;var XA="SliderThumb",TK=C.forwardRef((e,n)=>{const r=Fxe(e.__scopeSlider),[s,a]=C.useState(null),o=un(n,c=>a(c)),l=C.useMemo(()=>s?r().findIndex(c=>c.ref.current===s):-1,[r,s]);return i.jsx(Uxe,{...e,ref:o,index:l})}),Uxe=C.forwardRef((e,n)=>{const{__scopeSlider:r,index:s,name:a,...o}=e,l=U2(XA,r),c=CK(XA,r),[u,d]=C.useState(null),f=un(n,j=>d(j)),m=u?l.form||!!u.closest("form"):!0,g=f2(u),x=l.values[s],v=x===void 0?0:LK(x,l.min,l.max),y=Wxe(s,l.values.length),b=g==null?void 0:g[c.size],N=b?Gxe(b,v,c.direction):0;return C.useEffect(()=>{if(u)return l.thumbs.add(u),()=>{l.thumbs.delete(u)}},[u,l.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${v}% + ${N}px)`},children:[i.jsx(YA.ItemSlot,{scope:e.__scopeSlider,children:i.jsx(At.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":l.min,"aria-valuenow":x,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...o,ref:f,style:x===void 0?{display:"none"}:e.style,onFocus:Ft(e.onFocus,()=>{l.valueIndexToChangeRef.current=s})})}),m&&i.jsx(OK,{name:a??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:x},s)]})});TK.displayName=XA;var Vxe="RadioBubbleInput",OK=C.forwardRef(({__scopeSlider:e,value:n,...r},s)=>{const a=C.useRef(null),o=un(a,s),l=g2(n);return C.useEffect(()=>{const c=a.current;if(!c)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(l!==n&&f){const m=new Event("input",{bubbles:!0});f.call(c,n),c.dispatchEvent(m)}},[l,n]),i.jsx(At.input,{style:{display:"none"},...r,ref:o,defaultValue:n})});OK.displayName=Vxe;function Hxe(e=[],n,r){const s=[...e];return s[r]=n,s.sort((a,o)=>a-o)}function LK(e,n,r){const o=100/(r-n)*(e-n);return Qx(o,[0,100])}function Wxe(e,n){return n>2?`Value ${e+1} of ${n}`:n===2?["Minimum","Maximum"][e]:void 0}function Kxe(e,n){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-n)),s=Math.min(...r);return r.indexOf(s)}function Gxe(e,n,r){const s=e/2,o=v3([0,50],[0,s]);return(s-o(n)*r)*r}function Yxe(e){return e.slice(0,-1).map((n,r)=>e[r+1]-n)}function Qxe(e,n){if(n>0){const r=Yxe(e);return Math.min(...r)>=n}return!0}function v3(e,n){return r=>{if(e[0]===e[1]||n[0]===n[1])return n[0];const s=(n[1]-n[0])/(e[1]-e[0]);return n[0]+s*(r-e[0])}}function Xxe(e){return(String(e).split(".")[1]||"").length}function Jxe(e,n){const r=Math.pow(10,n);return Math.round(e*r)/r}var RK=_K,Zxe=kK,eve=EK,tve=TK;const Jp=C.forwardRef(({className:e,...n},r)=>i.jsxs(RK,{ref:r,className:ut("relative flex w-full touch-none select-none items-center",e),...n,children:[i.jsx(Zxe,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:i.jsx(eve,{className:"absolute h-full bg-primary"})}),i.jsx(tve,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Jp.displayName=RK.displayName;const fa=k2,DK=eH,nve=E2,rve=C.forwardRef(function({className:n,...r},s){return i.jsx(ay,{ref:s,className:ut("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",n),...r})}),ma=C.forwardRef(function({className:n,children:r,...s},a){return i.jsxs(nve,{children:[i.jsx(rve,{}),i.jsxs(oy,{ref:a,className:ut("fixed left-[50%] top-[50%] z-50 w-full max-w-lg translate-x-[-50%] translate-y-[-50%]","rounded-2xl border border-[#E0D8C8]/15 bg-[#243548]/95 text-[#E0D8C8] shadow-2xl backdrop-blur-md","p-6",n),...s,children:[r,i.jsxs(L2,{className:ut("absolute right-4 top-4 rounded-lg p-2 text-[#E0D8C8]/70 hover:text-[#E0D8C8] hover:bg-white/5","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#A35C5C]/60"),children:[i.jsx(zi,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}),ho=({className:e,...n})=>i.jsx("div",{className:ut("flex flex-col space-y-1.5 text-left",e),...n}),y3=({className:e,...n})=>i.jsx("div",{className:ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...n}),fo=C.forwardRef(function({className:n,...r},s){return i.jsx(T2,{ref:s,className:ut("text-lg font-semibold text-[#E0D8C8]",n),...r})}),Vh=C.forwardRef(function({className:n,...r},s){return i.jsx(O2,{ref:s,className:ut("text-sm text-[#E0D8C8]/70",n),...r})});function IK({imageUrl:e,onSave:n,onCancel:r}){const[s,a]=C.useState({x:0,y:0,width:100,height:100}),[o,l]=C.useState(1),[c,u]=C.useState(0),[d,f]=C.useState(!0),[m,g]=C.useState(!0),x=C.useRef(null),v=C.useRef(null),y=C.useRef(null),[b,N]=C.useState(!1),[j,S]=C.useState(!1),[A,P]=C.useState(null),[L,O]=C.useState({x:0,y:0}),[R,q]=C.useState(!1),U=C.useRef(null);C.useEffect(()=>{const Q=new Image;Q.crossOrigin="anonymous",Q.src=e,Q.onload=()=>{v.current=Q,q(!0);const T=16/9;let B,H;Q.width/Q.height>T?(H=Q.height*.9,B=H*T):(B=Q.width*.9,H=B/T);const ee={x:(Q.width-B)/2,y:(Q.height-H)/2,width:B,height:H};a(ee),U.current=ee,D()}},[e]),C.useEffect(()=>{R&&D()},[s,o,c,R]);const D=()=>{const Q=x.current,T=Q.getContext("2d"),B=v.current;if(!Q||!T||!B)return;const H=600,ee=B.width/B.height;ee>1?(Q.width=H,Q.height=H/ee):(Q.height=H,Q.width=H*ee),T.fillStyle="#f5f5f5",T.fillRect(0,0,Q.width,Q.height),T.save();const ce=Math.min(Q.width/B.width,Q.height/B.height)*o,he=(Q.width-B.width*ce)/2,W=(Q.height-B.height*ce)/2;T.translate(Q.width/2,Q.height/2),T.rotate(c*Math.PI/180),T.translate(-Q.width/2,-Q.height/2),T.drawImage(B,he,W,B.width*ce,B.height*ce),T.fillStyle="rgba(0, 0, 0, 0.5)",T.fillRect(0,0,Q.width,Q.height);const J=s.x/B.width*B.width*ce+he,pe=s.y/B.height*B.height*ce+W,ue=s.width/B.width*B.width*ce,me=s.height/B.height*B.height*ce;T.clearRect(J,pe,ue,me),T.save(),T.beginPath(),T.rect(J,pe,ue,me),T.clip(),T.drawImage(B,he,W,B.width*ce,B.height*ce),T.restore(),T.strokeStyle="#fbbf24",T.lineWidth=3,T.strokeRect(J,pe,ue,me);const je=12;if(T.fillStyle="#fbbf24",T.strokeStyle="#fff",T.lineWidth=2,[[J,pe],[J+ue,pe],[J,pe+me],[J+ue,pe+me]].forEach(([Te,xe])=>{T.fillRect(Te-je/2,xe-je/2,je,je),T.strokeRect(Te-je/2,xe-je/2,je,je)}),m){T.strokeStyle="rgba(255, 255, 255, 0.4)",T.lineWidth=1;for(let Te=1;Te<3;Te++)T.beginPath(),T.moveTo(J+ue/3*Te,pe),T.lineTo(J+ue/3*Te,pe+me),T.stroke(),T.beginPath(),T.moveTo(J,pe+me/3*Te),T.lineTo(J+ue,pe+me/3*Te),T.stroke()}T.fillStyle="#fbbf24",T.strokeStyle="#fff",T.lineWidth=2;const ze=10;[[J+ue/2,pe],[J+ue/2,pe+me],[J,pe+me/2],[J+ue,pe+me/2]].forEach(([Te,xe])=>{T.fillRect(Te-ze/2,xe-ze/2,ze,ze),T.strokeRect(Te-ze/2,xe-ze/2,ze,ze)}),T.restore()},M=Q=>{var J,pe;const T=x.current.getBoundingClientRect(),B=x.current.width/T.width,H=x.current.height/T.height,ee=Q.clientX||Q.touches&&((J=Q.touches[0])==null?void 0:J.clientX),ce=Q.clientY||Q.touches&&((pe=Q.touches[0])==null?void 0:pe.clientY),he=(ee-T.left)*B,W=(ce-T.top)*H;return{mouseX:he,mouseY:W}},G=Q=>{const{mouseX:T,mouseY:B}=M(Q),H=v.current,ee=x.current,ce=Math.min(ee.width/H.width,ee.height/H.height)*o,he=(ee.width-H.width*ce)/2,W=(ee.height-H.height*ce)/2,J=s.x/H.width*H.width*ce+he,pe=s.y/H.height*H.height*ce+W,ue=s.width/H.width*H.width*ce,me=s.height/H.height*H.height*ce,je=20;Math.abs(T-J)<je&&Math.abs(B-pe)<je?(S(!0),P("nw")):Math.abs(T-(J+ue))<je&&Math.abs(B-pe)<je?(S(!0),P("ne")):Math.abs(T-J)<je&&Math.abs(B-(pe+me))<je?(S(!0),P("sw")):Math.abs(T-(J+ue))<je&&Math.abs(B-(pe+me))<je?(S(!0),P("se")):Math.abs(T-(J+ue/2))<je&&Math.abs(B-pe)<je?(S(!0),P("n")):Math.abs(T-(J+ue/2))<je&&Math.abs(B-(pe+me))<je?(S(!0),P("s")):Math.abs(T-J)<je&&Math.abs(B-(pe+me/2))<je?(S(!0),P("w")):Math.abs(T-(J+ue))<je&&Math.abs(B-(pe+me/2))<je?(S(!0),P("e")):T>=J&&T<=J+ue&&B>=pe&&B<=pe+me&&N(!0),O({x:T,y:B})},Y=Q=>{if(!b&&!j)return;Q.preventDefault();const{mouseX:T,mouseY:B}=M(Q),H=v.current,ee=x.current,ce=Math.min(ee.width/H.width,ee.height/H.height)*o,he=(T-L.x)/ce,W=(B-L.y)/ce;j?(a(J=>{let pe={...J};const ue=J.width/J.height;if(A==="nw"||A==="ne"||A==="sw"||A==="se"){if(A.includes("n")){const me=Math.max(0,Math.min(J.y+W,J.y+J.height-50));pe.height=J.height+(J.y-me),pe.y=me,d&&(pe.width=pe.height*ue,A.includes("e")||(pe.x=J.x+J.width-pe.width))}if(A.includes("s")&&!A.includes("n")&&(pe.height=Math.max(50,Math.min(H.height-J.y,J.height+W)),d&&(pe.width=pe.height*ue,A.includes("e")||(pe.x=J.x+J.width-pe.width))),A.includes("w")&&!d){const me=Math.max(0,Math.min(J.x+he,J.x+J.width-50));pe.width=J.width+(J.x-me),pe.x=me}A.includes("e")&&!d&&(pe.width=Math.max(50,Math.min(H.width-J.x,J.width+he)))}else if(A==="n"){const me=Math.max(0,Math.min(J.y+W,J.y+J.height-50));pe.height=J.height+(J.y-me),pe.y=me,d&&(pe.width=pe.height*ue,pe.x=J.x+(J.width-pe.width)/2)}else if(A==="s")pe.height=Math.max(50,Math.min(H.height-J.y,J.height+W)),d&&(pe.width=pe.height*ue,pe.x=J.x+(J.width-pe.width)/2);else if(A==="w"){const me=Math.max(0,Math.min(J.x+he,J.x+J.width-50));pe.width=J.width+(J.x-me),pe.x=me,d&&(pe.height=pe.width/ue,pe.y=J.y+(J.height-pe.height)/2)}else A==="e"&&(pe.width=Math.max(50,Math.min(H.width-J.x,J.width+he)),d&&(pe.height=pe.width/ue,pe.y=J.y+(J.height-pe.height)/2));return pe}),O({x:T,y:B})):b&&(a(J=>({...J,x:Math.max(0,Math.min(H.width-J.width,J.x+he)),y:Math.max(0,Math.min(H.height-J.height,J.y+W))})),O({x:T,y:B}))},Z=()=>{N(!1),S(!1),P(null)},X=()=>{const Q=v.current,T=document.createElement("canvas"),B=T.getContext("2d");if(T.width=s.width,T.height=s.height,c!==0){const H=document.createElement("canvas"),ee=H.getContext("2d"),ce=c*Math.PI/180,he=Math.abs(Math.sin(ce)),W=Math.abs(Math.cos(ce));H.width=Q.width*W+Q.height*he,H.height=Q.width*he+Q.height*W,ee.translate(H.width/2,H.height/2),ee.rotate(ce),ee.drawImage(Q,-Q.width/2,-Q.height/2),B.drawImage(H,s.x,s.y,s.width,s.height,0,0,s.width,s.height)}else B.drawImage(Q,s.x,s.y,s.width,s.height,0,0,s.width,s.height);return T.toDataURL("image/jpeg",.95)},re=()=>{const Q=X();n(Q)},z=Q=>{const T=s.x+s.width/2,B=s.y+s.height/2,H=Math.min(s.width,v.current.width*.8),ee=H/Q;a({x:Math.max(0,T-H/2),y:Math.max(0,B-ee/2),width:H,height:ee})},te=()=>{U.current&&a(U.current)},le=()=>{const Q=v.current;if(!Q)return;const T=Q.width*.95,B=Q.height*.95;a({x:(Q.width-T)/2,y:(Q.height-B)/2,width:T,height:B})};return i.jsx(fa,{open:!0,onOpenChange:r,children:i.jsxs(ma,{className:"max-w-[95vw] sm:max-w-3xl max-h-[100vh] overflow-hidden flex flex-col p-3 sm:p-6",children:[i.jsxs(ho,{className:"flex-shrink-0",children:[i.jsx(fo,{children:"Crop & Adjust Image"}),i.jsx("p",{className:"text-xs sm:text-sm text-stone-500",children:"Drag to move • Drag corners to resize • Use sliders to zoom and rotate"})]}),i.jsxs("div",{className:"space-y-3 sm:space-y-4 overflow-y-auto flex-1 min-h-0",children:[i.jsxs("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-lg p-3 sm:p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs sm:text-sm font-semibold text-amber-900",children:"Final Result Preview (16:9 ratio)"})]}),i.jsxs("div",{className:"relative bg-white rounded-lg border-2 border-dashed border-amber-400 aspect-video flex items-center justify-center overflow-hidden",children:[R&&i.jsx("canvas",{ref:Q=>{if(!Q)return;const T=Q.getContext("2d"),B=v.current;if(!B)return;Q.width=320,Q.height=180;const H=document.createElement("canvas"),ee=H.getContext("2d");H.width=s.width,H.height=s.height,ee.drawImage(B,s.x,s.y,s.width,s.height,0,0,s.width,s.height),T.fillStyle="#f5f5f5",T.fillRect(0,0,Q.width,Q.height);const ce=Math.min(Q.width/s.width,Q.height/s.height),he=(Q.width-s.width*ce)/2,W=(Q.height-s.height*ce)/2;T.drawImage(H,he,W,s.width*ce,s.height*ce)},className:"w-full h-auto"}),i.jsxs("div",{className:"absolute bottom-1 right-1 bg-black/60 text-white text-[10px] px-2 py-0.5 rounded",children:[s.width,"×",s.height,"px"]})]}),i.jsx("p",{className:"text-xs text-amber-700 mt-2 text-center",children:"This is how your cropped image will appear in the app"})]}),i.jsx("div",{ref:y,className:"relative bg-stone-900 rounded-lg overflow-hidden touch-none",onMouseDown:G,onMouseMove:Y,onMouseUp:Z,onMouseLeave:Z,onTouchStart:G,onTouchMove:Y,onTouchEnd:Z,children:i.jsx("canvas",{ref:x,className:"w-full h-auto cursor-move max-h-[40vh] sm:max-h-[500px]"})}),i.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-2 justify-center",children:[i.jsx(ye,{type:"button",variant:"outline",size:"sm",onClick:()=>z(16/9),className:"bg-amber-50 text-xs sm:text-sm px-2 sm:px-3",children:"16:9"}),i.jsx(ye,{type:"button",variant:"outline",size:"sm",onClick:()=>z(4/3),className:"text-xs sm:text-sm px-2 sm:px-3",children:"4:3"}),i.jsx(ye,{type:"button",variant:"outline",size:"sm",onClick:()=>z(1),className:"text-xs sm:text-sm px-2 sm:px-3",children:"Square"}),i.jsxs(ye,{type:"button",variant:"outline",size:"sm",onClick:le,className:"text-xs sm:text-sm px-2 sm:px-3",children:[i.jsx(Iee,{className:"w-3 h-3 mr-1"}),"Max"]}),i.jsxs(ye,{type:"button",variant:"outline",size:"sm",onClick:te,className:"text-xs sm:text-sm px-2 sm:px-3",children:[i.jsx($s,{className:"w-3 h-3 mr-1"}),"Reset"]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Rte,{className:"w-4 h-4 text-amber-600"}),"Zoom"]}),i.jsxs("span",{className:"text-sm font-mono text-stone-600",children:[o.toFixed(1),"x"]})]}),i.jsx(Jp,{value:[o],onValueChange:([Q])=>l(Q),min:.3,max:4,step:.05,className:"w-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Qee,{className:"w-4 h-4 text-amber-600"}),"Rotation"]}),i.jsxs("span",{className:"text-sm font-mono text-stone-600",children:[c,"°"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Jp,{value:[c],onValueChange:([Q])=>u(Q),min:0,max:360,step:1,className:"flex-1"}),i.jsx(ye,{type:"button",variant:"outline",size:"sm",onClick:()=>u((c+90)%360),className:"shrink-0",children:"90°"})]})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 p-2 sm:p-3 bg-stone-50 rounded-lg text-xs sm:text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ua,{checked:d,onCheckedChange:f}),i.jsxs("label",{className:"font-medium flex items-center gap-1 cursor-pointer",onClick:()=>f(!d),children:[d?i.jsx(Ff,{className:"w-3 h-3 sm:w-4 sm:h-4 text-amber-600"}):i.jsx(kee,{className:"w-3 h-3 sm:w-4 sm:h-4 text-stone-400"}),i.jsx("span",{className:"hidden sm:inline",children:"Lock Ratio"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ua,{checked:m,onCheckedChange:g}),i.jsxs("label",{className:"font-medium flex items-center gap-1 cursor-pointer",onClick:()=>g(!m),children:[i.jsx(R4,{className:"w-3 h-3 sm:w-4 sm:h-4 text-amber-600"}),i.jsx("span",{className:"hidden sm:inline",children:"Grid"})]})]})]}),i.jsxs("div",{className:"hidden sm:flex items-center justify-center gap-2 text-xs text-stone-500",children:[i.jsx(ZZ,{className:"w-4 h-4"}),i.jsxs("span",{children:["Drag to move • Drag handles to resize • ",d?"Aspect locked":"Free-form"]})]})]}),i.jsxs(y3,{className:"flex-shrink-0 border-t mt-4 pt-4 gap-2",children:[i.jsxs(ye,{variant:"outline",onClick:r,children:[i.jsx(zi,{className:"w-4 h-4 mr-2"}),"Cancel"]}),i.jsxs(ye,{onClick:re,className:"bg-amber-700 hover:bg-amber-800",children:[i.jsx(vh,{className:"w-4 h-4 mr-2"}),"Apply Crop"]})]})]})})}var V2="Popover",[MK]=Vi(V2,[m2]),fy=m2(),[sve,Hh]=MK(V2),FK=e=>{const{__scopePopover:n,children:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!1}=e,c=fy(n),u=C.useRef(null),[d,f]=C.useState(!1),[m,g]=qo({prop:s,defaultProp:a??!1,onChange:o,caller:V2});return i.jsx(_9,{...c,children:i.jsx(sve,{scope:n,contentId:mi(),triggerRef:u,open:m,onOpenChange:g,onOpenToggle:C.useCallback(()=>g(x=>!x),[g]),hasCustomAnchor:d,onCustomAnchorAdd:C.useCallback(()=>f(!0),[]),onCustomAnchorRemove:C.useCallback(()=>f(!1),[]),modal:l,children:r})})};FK.displayName=V2;var BK="PopoverAnchor",ive=C.forwardRef((e,n)=>{const{__scopePopover:r,...s}=e,a=Hh(BK,r),o=fy(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:c}=a;return C.useEffect(()=>(l(),()=>c()),[l,c]),i.jsx(dE,{...o,...s,ref:n})});ive.displayName=BK;var $K="PopoverTrigger",qK=C.forwardRef((e,n)=>{const{__scopePopover:r,...s}=e,a=Hh($K,r),o=fy(r),l=un(n,a.triggerRef),c=i.jsx(At.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":WK(a.open),...s,ref:l,onClick:Ft(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?c:i.jsx(dE,{asChild:!0,...o,children:c})});qK.displayName=$K;var b3="PopoverPortal",[ave,ove]=MK(b3,{forceMount:void 0}),zK=e=>{const{__scopePopover:n,forceMount:r,children:s,container:a}=e,o=Hh(b3,n);return i.jsx(ave,{scope:n,forceMount:r,children:i.jsx(uo,{present:r||o.open,children:i.jsx(p2,{asChild:!0,container:a,children:s})})})};zK.displayName=b3;var Cg="PopoverContent",UK=C.forwardRef((e,n)=>{const r=ove(Cg,e.__scopePopover),{forceMount:s=r.forceMount,...a}=e,o=Hh(Cg,e.__scopePopover);return i.jsx(uo,{present:s||o.open,children:o.modal?i.jsx(cve,{...a,ref:n}):i.jsx(uve,{...a,ref:n})})});UK.displayName=Cg;var lve=xm("PopoverContent.RemoveScroll"),cve=C.forwardRef((e,n)=>{const r=Hh(Cg,e.__scopePopover),s=C.useRef(null),a=un(n,s),o=C.useRef(!1);return C.useEffect(()=>{const l=s.current;if(l)return hE(l)},[]),i.jsx(v2,{as:lve,allowPinchZoom:!0,children:i.jsx(VK,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ft(e.onCloseAutoFocus,l=>{var c;l.preventDefault(),o.current||(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Ft(e.onPointerDownOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Ft(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),uve=C.forwardRef((e,n)=>{const r=Hh(Cg,e.__scopePopover),s=C.useRef(!1),a=C.useRef(!1);return i.jsx(VK,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l,c;(l=e.onCloseAutoFocus)==null||l.call(e,o),o.defaultPrevented||(s.current||(c=r.triggerRef.current)==null||c.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var u,d;(u=e.onInteractOutside)==null||u.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),VK=C.forwardRef((e,n)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,...m}=e,g=Hh(Cg,r),x=fy(r);return nE(),i.jsx(l2,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:i.jsx(o2,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:f,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>g.onOpenChange(!1),children:i.jsx(S9,{"data-state":WK(g.open),role:"dialog",id:g.contentId,...x,...m,ref:n,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),HK="PopoverClose",dve=C.forwardRef((e,n)=>{const{__scopePopover:r,...s}=e,a=Hh(HK,r);return i.jsx(At.button,{type:"button",...s,ref:n,onClick:Ft(e.onClick,()=>a.onOpenChange(!1))})});dve.displayName=HK;var hve="PopoverArrow",fve=C.forwardRef((e,n)=>{const{__scopePopover:r,...s}=e,a=fy(r);return i.jsx(C9,{...a,...s,ref:n})});fve.displayName=hve;function WK(e){return e?"open":"closed"}var mve=FK,pve=qK,gve=zK,KK=UK;const GK=mve,YK=pve,w3=C.forwardRef(({className:e,align:n="center",sideOffset:r=4,...s},a)=>i.jsx(gve,{children:i.jsx(KK,{ref:a,align:n,sideOffset:r,className:ut("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));w3.displayName=KK.displayName;function Hr({label:e,required:n,helpText:r,children:s}){return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(tt,{children:[e," ",n&&"*"]}),r&&i.jsxs(GK,{children:[i.jsx(YK,{asChild:!0,children:i.jsx("button",{type:"button",className:"text-stone-400 hover:text-amber-600 transition-colors",children:i.jsx(Ux,{className:"w-4 h-4"})})}),i.jsx(w3,{className:"w-80 text-sm text-stone-600",children:r})]})]}),s]})}const xve=["Briar","Meerschaum","Corn Cob","Clay","Olive Wood","Cherry Wood","Morta","Other"],vve=["Small","Medium","Large","Extra Large"],yve=["Billiard","Bulldog","Dublin","Apple","Author","Bent","Canadian","Churchwarden","Freehand","Lovat","Poker","Prince","Rhodesian","Zulu","Calabash","Other"];function Cb(e){if(e===""||e==null)return null;const n=Number(e);return Number.isFinite(n)?n:null}function QK({pipe:e,onUpdate:n}){var A;const{t:r}=$t(),[s,a]=C.useState(!1),[o,l]=C.useState(null),[c,u]=C.useState(!0),[d,f]=C.useState({bowl_variant_id:"",name:"",shape:"",bowl_material:"",bowl_height_mm:"",bowl_width_mm:"",bowl_diameter_mm:"",bowl_depth_mm:"",chamber_volume:"",focus:[],notes:"",photo:""}),[m,g]=C.useState(!1),x=P=>P?(P/25.4).toFixed(2):null,v=(P,L)=>P?c?`${L} ${P}mm`:`${L} ${x(P)}"`:null,y=Array.isArray(e==null?void 0:e.interchangeable_bowls)?e.interchangeable_bowls:[],b=async P=>{var O;const L=(O=P.target.files)==null?void 0:O[0];if(L)try{g(!0);const{file_url:R}=await Ce.integrations.Core.UploadFile({file:L});f({...d,photo:R})}catch(R){console.error("Error uploading photo:",R),alert(r("bowls.photoUploadError","Failed to upload photo. Please try again."))}finally{g(!1)}},N=(P=null,L=null)=>{P?(f({bowl_variant_id:P.bowl_variant_id||`bowl_${L}`,name:P.name||"",shape:P.shape||"",bowl_material:P.bowl_material||"",bowl_height_mm:P.bowl_height_mm??"",bowl_width_mm:P.bowl_width_mm??"",bowl_diameter_mm:P.bowl_diameter_mm??"",bowl_depth_mm:P.bowl_depth_mm??"",chamber_volume:P.chamber_volume||"",focus:Array.isArray(P.focus)?P.focus:[],notes:P.notes||"",photo:P.photo||""}),l(L)):(f({bowl_variant_id:`bowl_${y.length}`,name:"",shape:"",bowl_material:"",bowl_height_mm:"",bowl_width_mm:"",bowl_diameter_mm:"",bowl_depth_mm:"",chamber_volume:"",focus:[],notes:"",photo:""}),l(null)),a(!0)},j=()=>{const P=[...y],L={...d,bowl_variant_id:d.bowl_variant_id||(o!=null?`bowl_${o}`:`bowl_${P.length}`),bowl_height_mm:Cb(d.bowl_height_mm),bowl_width_mm:Cb(d.bowl_width_mm),bowl_diameter_mm:Cb(d.bowl_diameter_mm),bowl_depth_mm:Cb(d.bowl_depth_mm),focus:Array.isArray(d.focus)?d.focus:[]};o!==null?P[o]=L:P.push(L),n({interchangeable_bowls:P}),a(!1)},S=P=>{if(!window.confirm(r("bowls.removeBowlConfirm","Remove this bowl from the list?")))return;const O=y.filter((R,q)=>q!==P).map((R,q)=>({...R,bowl_variant_id:R.bowl_variant_id||`bowl_${q}`}));n({interchangeable_bowls:O})};return i.jsxs(Ee,{className:"border-amber-200 bg-gradient-to-br from-amber-50 to-white",children:[i.jsx(Ze,{children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[i.jsxs(et,{className:"flex items-center gap-2 text-amber-800",children:[i.jsx(v1,{className:"w-5 h-5"}),r("formsExtended.interchangeableBowls")]}),i.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[i.jsx(ye,{variant:"outline",size:"sm",onClick:()=>u(!c),className:"text-xs",children:c?"mm":"in"}),i.jsxs(fa,{open:s,onOpenChange:a,children:[i.jsx(DK,{asChild:!0,children:i.jsxs(ye,{size:"sm",className:"bg-amber-600 hover:bg-amber-700 flex-1 sm:flex-none",onClick:()=>N(),children:[i.jsx(Ra,{className:"w-4 h-4 mr-1"}),r("bowls.addBowl","Add Bowl")]})}),i.jsxs(ma,{className:"max-w-xl max-h-[90vh] overflow-y-auto",children:[i.jsx(ho,{children:i.jsx(fo,{children:o!==null?r("bowls.editBowl","Edit Bowl"):r("bowls.addInterchangeableBowl","Add Interchangeable Bowl")})}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:r("bowls.bowlName","Bowl Name")}),i.jsx(at,{value:d.name,onChange:P=>f({...d,name:P.target.value}),placeholder:r("bowls.bowlNamePlaceholder","e.g., Standard Bowl, Meerschaum Bowl")})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:r("formsExtended.shape")}),i.jsxs(pn,{value:d.shape,onValueChange:P=>f({...d,shape:P}),children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:r("formsExtended.selectShape")})}),i.jsx(fn,{children:yve.map(P=>i.jsx(ot,{value:P,children:P},P))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:r("formsExtended.material","Material")}),i.jsxs(pn,{value:d.bowl_material,onValueChange:P=>f({...d,bowl_material:P}),children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:r("formsExtended.selectMaterial")})}),i.jsx(fn,{children:xve.map(P=>i.jsx(ot,{value:P,children:P},P))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:r("formsExtended.chamberVolume")}),i.jsxs(pn,{value:d.chamber_volume,onValueChange:P=>f({...d,chamber_volume:P}),children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:r("formsExtended.selectVolume")})}),i.jsx(fn,{children:vve.map(P=>i.jsx(ot,{value:P,children:P},P))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{children:[r("formsExtended.bowlHeight")," (",r(c?"units.mm":"units.in"),")"]}),i.jsx(at,{type:"number",step:"0.01",value:d.bowl_height_mm?c?d.bowl_height_mm:x(d.bowl_height_mm):"",onChange:P=>{const L=P.target.value;if(L==="")f({...d,bowl_height_mm:""});else{const O=c?L:(parseFloat(L)*25.4).toFixed(1);f({...d,bowl_height_mm:O})}},placeholder:c?"e.g., 50":"e.g., 2.0"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{children:[r("formsExtended.bowlWidth")," (",r(c?"units.mm":"units.in"),")"]}),i.jsx(at,{type:"number",step:"0.01",value:d.bowl_width_mm?c?d.bowl_width_mm:x(d.bowl_width_mm):"",onChange:P=>{const L=P.target.value;if(L==="")f({...d,bowl_width_mm:""});else{const O=c?L:(parseFloat(L)*25.4).toFixed(1);f({...d,bowl_width_mm:O})}},placeholder:c?"e.g., 38":"e.g., 1.5"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{children:[r("formsExtended.chamberDiameter")," (",r(c?"units.mm":"units.in"),")"]}),i.jsx(at,{type:"number",step:"0.01",value:d.bowl_diameter_mm?c?d.bowl_diameter_mm:x(d.bowl_diameter_mm):"",onChange:P=>{const L=P.target.value;if(L==="")f({...d,bowl_diameter_mm:""});else{const O=c?L:(parseFloat(L)*25.4).toFixed(1);f({...d,bowl_diameter_mm:O})}},placeholder:c?"e.g., 20":"e.g., 0.8"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{children:[r("formsExtended.chamberDepth")," (",r(c?"units.mm":"units.in"),")"]}),i.jsx(at,{type:"number",step:"0.01",value:d.bowl_depth_mm?c?d.bowl_depth_mm:x(d.bowl_depth_mm):"",onChange:P=>{const L=P.target.value;if(L==="")f({...d,bowl_depth_mm:""});else{const O=c?L:(parseFloat(L)*25.4).toFixed(1);f({...d,bowl_depth_mm:O})}},placeholder:c?"e.g., 40":"e.g., 1.6"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:r("bowls.bowlSpecialization","Bowl Specialization (Focus)")}),i.jsx(at,{value:((A=d.focus)==null?void 0:A.join(", "))||"",onChange:P=>{const L=P.target.value.split(",").map(O=>O.trim()).filter(Boolean);f({...d,focus:L})},placeholder:r("bowls.specializationPlaceholder","e.g., English, Virginia/Perique")}),i.jsx("p",{className:"text-xs text-stone-500",children:r("bowls.separateCommas","Separate multiple types with commas")})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:r("bowls.bowlPhoto","Bowl Photo")}),d.photo&&i.jsxs("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-lg p-3 mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full"}),i.jsx("span",{className:"text-xs font-semibold text-amber-900",children:r("bowls.preview","Preview")})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("img",{src:d.photo,alt:"Bowl preview",className:"w-24 h-24 object-cover rounded-lg border-2 border-amber-400"})})]}),i.jsxs("div",{className:"flex gap-3 items-start",children:[d.photo?i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:d.photo,alt:"Bowl",className:"w-20 h-20 object-cover rounded-lg border border-amber-200"}),i.jsx("button",{type:"button",onClick:()=>f({...d,photo:""}),className:"absolute -top-2 -right-2 bg-rose-500 text-white rounded-full p-1 hover:bg-rose-600 transition-colors",children:i.jsx(zi,{className:"w-3 h-3"})})]}):null,i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:b,className:"hidden",id:"bowl-photo-camera"}),i.jsx("label",{htmlFor:"bowl-photo-camera",children:i.jsx(ye,{type:"button",variant:"outline",size:"sm",disabled:m,asChild:!0,children:i.jsxs("span",{className:"cursor-pointer",children:[i.jsx(g1,{className:"w-4 h-4 mr-2"}),m?r("photos.uploading","Uploading..."):r("photos.camera")]})})}),i.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"hidden",id:"bowl-photo-gallery"}),i.jsx("label",{htmlFor:"bowl-photo-gallery",children:i.jsx(ye,{type:"button",variant:"outline",size:"sm",disabled:m,asChild:!0,children:i.jsxs("span",{className:"cursor-pointer",children:["📷 ",r("photos.gallery")]})})})]}),i.jsx("p",{className:"text-xs text-stone-500 mt-1",children:r("bowls.squarePhotosNote","Square photos work best")})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:r("formsExtended.notes")}),i.jsx(at,{value:d.notes,onChange:P=>f({...d,notes:P.target.value}),placeholder:r("bowls.notesPlaceholder","Any additional notes about this bowl...")})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(ye,{variant:"outline",onClick:()=>a(!1),children:r("common.cancel")}),i.jsxs(ye,{onClick:j,className:"bg-amber-600 hover:bg-amber-700",children:[r(o!==null?"common.update":"common.add")," ",r("bowls.bowl","Bowl")]})]})]})]})]})]})]})}),i.jsx(Oe,{children:y.length===0?i.jsxs("div",{className:"text-center py-6 text-stone-500",children:[i.jsx(v1,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),i.jsx("p",{className:"text-sm",children:r("bowls.noBowlsYet","No additional bowls added yet")}),i.jsx("p",{className:"text-xs mt-1",children:r("bowls.trackBowlOptions","Track different bowl options for this pipe system")})]}):i.jsx("div",{className:"space-y-3",children:y.map((P,L)=>i.jsxs("div",{className:"flex items-start justify-between p-4 bg-white rounded-lg border border-amber-200 hover:border-amber-300 transition-colors",children:[i.jsxs("div",{className:"flex gap-3 flex-1",children:[P.photo?i.jsx("img",{src:P.photo,alt:P.name||"Bowl",className:"w-16 h-16 object-cover rounded-lg border border-amber-200 flex-shrink-0"}):null,i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h4",{className:"font-semibold text-stone-800",children:P.name||`Bowl ${L+1}`}),P.shape?i.jsx(Ge,{variant:"outline",className:"text-xs",children:P.shape}):null]}),i.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[P.bowl_material?i.jsx(Ge,{className:"bg-stone-100 text-stone-700",children:P.bowl_material}):null,P.chamber_volume?i.jsx(Ge,{className:"bg-amber-100 text-amber-800",children:P.chamber_volume}):null,v(P.bowl_height_mm,"H")?i.jsx("span",{className:"text-stone-600",children:v(P.bowl_height_mm,"H")}):null,v(P.bowl_width_mm,"W")?i.jsx("span",{className:"text-stone-600",children:v(P.bowl_width_mm,"W")}):null,v(P.bowl_diameter_mm,"Ø")?i.jsx("span",{className:"text-stone-600",children:v(P.bowl_diameter_mm,"Ø")}):null,v(P.bowl_depth_mm,"D")?i.jsx("span",{className:"text-stone-600",children:v(P.bowl_depth_mm,"D")}):null,Array.isArray(P.focus)&&P.focus.length>0?i.jsxs("span",{className:"text-amber-700 font-medium",children:["🎯 ",P.focus.join(", ")]}):null]}),P.notes?i.jsx("p",{className:"text-xs text-stone-600 mt-2",children:P.notes}):null]})]}),i.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[i.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>N(P,L),children:i.jsx(dm,{className:"w-4 h-4"})}),i.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>S(L),className:"text-rose-600 hover:text-rose-700",children:i.jsx(yc,{className:"w-4 h-4"})})]})]},P.bowl_variant_id||L))})})]})}function G1({onPhotosSelected:e,existingPhotos:n=[],maxPhotos:r=10}){const{t:s}=$t(),a=C.useRef(null),o=C.useRef(null),l=(d,f)=>{const m=Array.from(d.target.files);m.length>0&&e(m),f==="file"&&a.current&&(a.current.value=""),f==="camera"&&o.current&&(o.current.value="")},u=r-n.length>0;return i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"flex gap-2 w-full",children:[i.jsxs(ye,{type:"button",variant:"outline",size:"sm",onClick:()=>{var d;return(d=a.current)==null?void 0:d.click()},disabled:!u,className:"flex-1 bg-stone-700 border-stone-600 text-white hover:bg-stone-800",children:[i.jsx(yee,{className:"w-4 h-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:s("photos.fromGallery")}),i.jsx("span",{className:"sm:hidden",children:s("photos.gallery")})]}),i.jsxs(ye,{type:"button",variant:"outline",size:"sm",onClick:()=>{var d;return(d=o.current)==null?void 0:d.click()},disabled:!u,className:"flex-1 bg-stone-700 border-stone-600 text-white hover:bg-stone-800",children:[i.jsx(g1,{className:"w-4 h-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:s("aiIdentifier.takePhoto")}),i.jsx("span",{className:"sm:hidden",children:s("photos.camera")})]})]}),i.jsx("input",{ref:a,type:"file",accept:"image/*",multiple:!0,onChange:d=>l(d,"file"),className:"hidden"}),i.jsx("input",{ref:o,type:"file",accept:"image/*",capture:"environment",onChange:d=>l(d,"camera"),className:"hidden"}),n.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:n.map((d,f)=>i.jsx("div",{className:"relative",children:i.jsx("img",{src:d,alt:"",className:"w-20 h-20 object-cover rounded border"})},f))}),!u&&i.jsx("p",{className:"text-xs text-[#E0D8C8]/70 mt-2",children:s("photos.maxReached")})]})}const la={PIPES:5,TOBACCO_BLENDS:10,PHOTOS_PER_ITEM:3,SMOKING_LOGS:50},bve=new Date("2026-02-01T00:00:00Z");function XK(){return new Date>=bve}async function iv(e,n,r){try{if(console.log("[canCreatePipe]",{userEmail:e,hasPaidAccess:n,isTrialing:r}),n)return{canCreate:!0,currentCount:0,limit:null};const s=await Ce.entities.Pipe.filter({created_by:e}),a=(s==null?void 0:s.length)||0;if(r&&XK()){const l=a<la.PIPES;return{canCreate:l,currentCount:a,limit:la.PIPES,reason:l?null:`Free trial is limited to ${la.PIPES} pipes. Upgrade to add unlimited pipes.`}}const o=a<la.PIPES;return{canCreate:o,currentCount:a,limit:la.PIPES,reason:o?null:`Free accounts are limited to ${la.PIPES} pipes. Upgrade for unlimited access.`}}catch(s){return console.warn("Failed to check pipe limit:",s),{canCreate:!1,currentCount:0,limit:la.PIPES,reason:"Unable to verify limits"}}}async function av(e,n,r){try{if(console.log("[canCreateTobacco]",{userEmail:e,hasPaidAccess:n,isTrialing:r}),n)return{canCreate:!0,currentCount:0,limit:null};const s=await Ce.entities.TobaccoBlend.filter({created_by:e}),a=(s==null?void 0:s.length)||0;if(r&&XK()){const l=a<la.TOBACCO_BLENDS;return{canCreate:l,currentCount:a,limit:la.TOBACCO_BLENDS,reason:l?null:`Free trial is limited to ${la.TOBACCO_BLENDS} blends. Upgrade to add unlimited blends.`}}const o=a<la.TOBACCO_BLENDS;return{canCreate:o,currentCount:a,limit:la.TOBACCO_BLENDS,reason:o?null:`Free accounts are limited to ${la.TOBACCO_BLENDS} blends. Upgrade for unlimited access.`}}catch(s){return console.warn("Failed to check tobacco limit:",s),{canCreate:!1,currentCount:0,limit:la.TOBACCO_BLENDS,reason:"Unable to verify limits"}}}function gx(e,n,r=10){return Dt({queryKey:["recent-values",e,n],queryFn:async()=>{try{const a=(await Ce.entities[e].list("-created_date",100)).map(l=>l[n]).filter(l=>l&&typeof l=="string"&&l.trim()!==""),o={};return a.forEach(l=>{const c=l.trim();o[c]=(o[c]||0)+1}),Object.entries(o).sort((l,c)=>c[1]-l[1]||l[0].localeCompare(c[0])).slice(0,r).map(([l])=>l)}catch(s){return console.error("Failed to fetch recent values:",s),[]}},staleTime:300*1e3,enabled:!!e&&!!n})}var _6=1,wve=.9,jve=.8,Nve=.17,m5=.1,p5=.999,_ve=.9999,Sve=.99,Cve=/[\\\/_+.#"@\[\(\{&]/,Pve=/[\\\/_+.#"@\[\(\{&]/g,Ave=/[\s-]/,JK=/[\s-]/g;function JA(e,n,r,s,a,o,l){if(o===n.length)return a===e.length?_6:Sve;var c=`${a},${o}`;if(l[c]!==void 0)return l[c];for(var u=s.charAt(o),d=r.indexOf(u,a),f=0,m,g,x,v;d>=0;)m=JA(e,n,r,s,d+1,o+1,l),m>f&&(d===a?m*=_6:Cve.test(e.charAt(d-1))?(m*=jve,x=e.slice(a,d-1).match(Pve),x&&a>0&&(m*=Math.pow(p5,x.length))):Ave.test(e.charAt(d-1))?(m*=wve,v=e.slice(a,d-1).match(JK),v&&a>0&&(m*=Math.pow(p5,v.length))):(m*=Nve,a>0&&(m*=Math.pow(p5,d-a))),e.charAt(d)!==n.charAt(o)&&(m*=_ve)),(m<m5&&r.charAt(d-1)===s.charAt(o+1)||s.charAt(o+1)===s.charAt(o)&&r.charAt(d-1)!==s.charAt(o))&&(g=JA(e,n,r,s,d+1,o+2,l),g*m5>m&&(m=g*m5)),m>f&&(f=m),d=r.indexOf(u,d+1);return l[c]=f,f}function S6(e){return e.toLowerCase().replace(JK," ")}function kve(e,n,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,JA(e,n,S6(e),S6(n),0,0,{})}var K0='[cmdk-group=""]',g5='[cmdk-group-items=""]',Eve='[cmdk-group-heading=""]',ZK='[cmdk-item=""]',C6=`${ZK}:not([aria-disabled="true"])`,ZA="cmdk-item-select",Op="data-value",Tve=(e,n,r)=>kve(e,n,r),eG=C.createContext(void 0),my=()=>C.useContext(eG),tG=C.createContext(void 0),j3=()=>C.useContext(tG),nG=C.createContext(void 0),rG=C.forwardRef((e,n)=>{let r=Lp(()=>{var T,B;return{search:"",value:(B=(T=e.value)!=null?T:e.defaultValue)!=null?B:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=Lp(()=>new Set),a=Lp(()=>new Map),o=Lp(()=>new Map),l=Lp(()=>new Set),c=sG(e),{label:u,children:d,value:f,onValueChange:m,filter:g,shouldFilter:x,loop:v,disablePointerSelection:y=!1,vimBindings:b=!0,...N}=e,j=mi(),S=mi(),A=mi(),P=C.useRef(null),L=zve();_m(()=>{if(f!==void 0){let T=f.trim();r.current.value=T,O.emit()}},[f]),_m(()=>{L(6,G)},[]);let O=C.useMemo(()=>({subscribe:T=>(l.current.add(T),()=>l.current.delete(T)),snapshot:()=>r.current,setState:(T,B,H)=>{var ee,ce,he,W;if(!Object.is(r.current[T],B)){if(r.current[T]=B,T==="search")M(),U(),L(1,D);else if(T==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let J=document.getElementById(A);J?J.focus():(ee=document.getElementById(j))==null||ee.focus()}if(L(7,()=>{var J;r.current.selectedItemId=(J=Y())==null?void 0:J.id,O.emit()}),H||L(5,G),((ce=c.current)==null?void 0:ce.value)!==void 0){let J=B??"";(W=(he=c.current).onValueChange)==null||W.call(he,J);return}}O.emit()}},emit:()=>{l.current.forEach(T=>T())}}),[]),R=C.useMemo(()=>({value:(T,B,H)=>{var ee;B!==((ee=o.current.get(T))==null?void 0:ee.value)&&(o.current.set(T,{value:B,keywords:H}),r.current.filtered.items.set(T,q(B,H)),L(2,()=>{U(),O.emit()}))},item:(T,B)=>(s.current.add(T),B&&(a.current.has(B)?a.current.get(B).add(T):a.current.set(B,new Set([T]))),L(3,()=>{M(),U(),r.current.value||D(),O.emit()}),()=>{o.current.delete(T),s.current.delete(T),r.current.filtered.items.delete(T);let H=Y();L(4,()=>{M(),(H==null?void 0:H.getAttribute("id"))===T&&D(),O.emit()})}),group:T=>(a.current.has(T)||a.current.set(T,new Set),()=>{o.current.delete(T),a.current.delete(T)}),filter:()=>c.current.shouldFilter,label:u||e["aria-label"],getDisablePointerSelection:()=>c.current.disablePointerSelection,listId:j,inputId:A,labelId:S,listInnerRef:P}),[]);function q(T,B){var H,ee;let ce=(ee=(H=c.current)==null?void 0:H.filter)!=null?ee:Tve;return T?ce(T,r.current.search,B):0}function U(){if(!r.current.search||c.current.shouldFilter===!1)return;let T=r.current.filtered.items,B=[];r.current.filtered.groups.forEach(ee=>{let ce=a.current.get(ee),he=0;ce.forEach(W=>{let J=T.get(W);he=Math.max(J,he)}),B.push([ee,he])});let H=P.current;Z().sort((ee,ce)=>{var he,W;let J=ee.getAttribute("id"),pe=ce.getAttribute("id");return((he=T.get(pe))!=null?he:0)-((W=T.get(J))!=null?W:0)}).forEach(ee=>{let ce=ee.closest(g5);ce?ce.appendChild(ee.parentElement===ce?ee:ee.closest(`${g5} > *`)):H.appendChild(ee.parentElement===H?ee:ee.closest(`${g5} > *`))}),B.sort((ee,ce)=>ce[1]-ee[1]).forEach(ee=>{var ce;let he=(ce=P.current)==null?void 0:ce.querySelector(`${K0}[${Op}="${encodeURIComponent(ee[0])}"]`);he==null||he.parentElement.appendChild(he)})}function D(){let T=Z().find(H=>H.getAttribute("aria-disabled")!=="true"),B=T==null?void 0:T.getAttribute(Op);O.setState("value",B||void 0)}function M(){var T,B,H,ee;if(!r.current.search||c.current.shouldFilter===!1){r.current.filtered.count=s.current.size;return}r.current.filtered.groups=new Set;let ce=0;for(let he of s.current){let W=(B=(T=o.current.get(he))==null?void 0:T.value)!=null?B:"",J=(ee=(H=o.current.get(he))==null?void 0:H.keywords)!=null?ee:[],pe=q(W,J);r.current.filtered.items.set(he,pe),pe>0&&ce++}for(let[he,W]of a.current)for(let J of W)if(r.current.filtered.items.get(J)>0){r.current.filtered.groups.add(he);break}r.current.filtered.count=ce}function G(){var T,B,H;let ee=Y();ee&&(((T=ee.parentElement)==null?void 0:T.firstChild)===ee&&((H=(B=ee.closest(K0))==null?void 0:B.querySelector(Eve))==null||H.scrollIntoView({block:"nearest"})),ee.scrollIntoView({block:"nearest"}))}function Y(){var T;return(T=P.current)==null?void 0:T.querySelector(`${ZK}[aria-selected="true"]`)}function Z(){var T;return Array.from(((T=P.current)==null?void 0:T.querySelectorAll(C6))||[])}function X(T){let B=Z()[T];B&&O.setState("value",B.getAttribute(Op))}function re(T){var B;let H=Y(),ee=Z(),ce=ee.findIndex(W=>W===H),he=ee[ce+T];(B=c.current)!=null&&B.loop&&(he=ce+T<0?ee[ee.length-1]:ce+T===ee.length?ee[0]:ee[ce+T]),he&&O.setState("value",he.getAttribute(Op))}function z(T){let B=Y(),H=B==null?void 0:B.closest(K0),ee;for(;H&&!ee;)H=T>0?$ve(H,K0):qve(H,K0),ee=H==null?void 0:H.querySelector(C6);ee?O.setState("value",ee.getAttribute(Op)):re(T)}let te=()=>X(Z().length-1),le=T=>{T.preventDefault(),T.metaKey?te():T.altKey?z(1):re(1)},Q=T=>{T.preventDefault(),T.metaKey?X(0):T.altKey?z(-1):re(-1)};return C.createElement(At.div,{ref:n,tabIndex:-1,...N,"cmdk-root":"",onKeyDown:T=>{var B;(B=N.onKeyDown)==null||B.call(N,T);let H=T.nativeEvent.isComposing||T.keyCode===229;if(!(T.defaultPrevented||H))switch(T.key){case"n":case"j":{b&&T.ctrlKey&&le(T);break}case"ArrowDown":{le(T);break}case"p":case"k":{b&&T.ctrlKey&&Q(T);break}case"ArrowUp":{Q(T);break}case"Home":{T.preventDefault(),X(0);break}case"End":{T.preventDefault(),te();break}case"Enter":{T.preventDefault();let ee=Y();if(ee){let ce=new Event(ZA);ee.dispatchEvent(ce)}}}}},C.createElement("label",{"cmdk-label":"",htmlFor:R.inputId,id:R.labelId,style:Vve},u),H2(e,T=>C.createElement(tG.Provider,{value:O},C.createElement(eG.Provider,{value:R},T))))}),Ove=C.forwardRef((e,n)=>{var r,s;let a=mi(),o=C.useRef(null),l=C.useContext(nG),c=my(),u=sG(e),d=(s=(r=u.current)==null?void 0:r.forceMount)!=null?s:l==null?void 0:l.forceMount;_m(()=>{if(!d)return c.item(a,l==null?void 0:l.id)},[d]);let f=iG(a,o,[e.value,e.children,o],e.keywords),m=j3(),g=Ih(L=>L.value&&L.value===f.current),x=Ih(L=>d||c.filter()===!1?!0:L.search?L.filtered.items.get(a)>0:!0);C.useEffect(()=>{let L=o.current;if(!(!L||e.disabled))return L.addEventListener(ZA,v),()=>L.removeEventListener(ZA,v)},[x,e.onSelect,e.disabled]);function v(){var L,O;y(),(O=(L=u.current).onSelect)==null||O.call(L,f.current)}function y(){m.setState("value",f.current,!0)}if(!x)return null;let{disabled:b,value:N,onSelect:j,forceMount:S,keywords:A,...P}=e;return C.createElement(At.div,{ref:gm(o,n),...P,id:a,"cmdk-item":"",role:"option","aria-disabled":!!b,"aria-selected":!!g,"data-disabled":!!b,"data-selected":!!g,onPointerMove:b||c.getDisablePointerSelection()?void 0:y,onClick:b?void 0:v},e.children)}),Lve=C.forwardRef((e,n)=>{let{heading:r,children:s,forceMount:a,...o}=e,l=mi(),c=C.useRef(null),u=C.useRef(null),d=mi(),f=my(),m=Ih(x=>a||f.filter()===!1?!0:x.search?x.filtered.groups.has(l):!0);_m(()=>f.group(l),[]),iG(l,c,[e.value,e.heading,u]);let g=C.useMemo(()=>({id:l,forceMount:a}),[a]);return C.createElement(At.div,{ref:gm(c,n),...o,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},r&&C.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),H2(e,x=>C.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},C.createElement(nG.Provider,{value:g},x))))}),Rve=C.forwardRef((e,n)=>{let{alwaysRender:r,...s}=e,a=C.useRef(null),o=Ih(l=>!l.search);return!r&&!o?null:C.createElement(At.div,{ref:gm(a,n),...s,"cmdk-separator":"",role:"separator"})}),Dve=C.forwardRef((e,n)=>{let{onValueChange:r,...s}=e,a=e.value!=null,o=j3(),l=Ih(d=>d.search),c=Ih(d=>d.selectedItemId),u=my();return C.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),C.createElement(At.input,{ref:n,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":c,id:u.inputId,type:"text",value:a?e.value:l,onChange:d=>{a||o.setState("search",d.target.value),r==null||r(d.target.value)}})}),Ive=C.forwardRef((e,n)=>{let{children:r,label:s="Suggestions",...a}=e,o=C.useRef(null),l=C.useRef(null),c=Ih(d=>d.selectedItemId),u=my();return C.useEffect(()=>{if(l.current&&o.current){let d=l.current,f=o.current,m,g=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let x=d.offsetHeight;f.style.setProperty("--cmdk-list-height",x.toFixed(1)+"px")})});return g.observe(d),()=>{cancelAnimationFrame(m),g.unobserve(d)}}},[]),C.createElement(At.div,{ref:gm(o,n),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":c,"aria-label":s,id:u.listId},H2(e,d=>C.createElement("div",{ref:gm(l,u.listInnerRef),"cmdk-list-sizer":""},d)))}),Mve=C.forwardRef((e,n)=>{let{open:r,onOpenChange:s,overlayClassName:a,contentClassName:o,container:l,...c}=e;return C.createElement(k2,{open:r,onOpenChange:s},C.createElement(E2,{container:l},C.createElement(ay,{"cmdk-overlay":"",className:a}),C.createElement(oy,{"aria-label":e.label,"cmdk-dialog":"",className:o},C.createElement(rG,{ref:n,...c}))))}),Fve=C.forwardRef((e,n)=>Ih(r=>r.filtered.count===0)?C.createElement(At.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),Bve=C.forwardRef((e,n)=>{let{progress:r,children:s,label:a="Loading...",...o}=e;return C.createElement(At.div,{ref:n,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},H2(e,l=>C.createElement("div",{"aria-hidden":!0},l)))}),Fa=Object.assign(rG,{List:Ive,Item:Ove,Input:Dve,Group:Lve,Separator:Rve,Dialog:Mve,Empty:Fve,Loading:Bve});function $ve(e,n){let r=e.nextElementSibling;for(;r;){if(r.matches(n))return r;r=r.nextElementSibling}}function qve(e,n){let r=e.previousElementSibling;for(;r;){if(r.matches(n))return r;r=r.previousElementSibling}}function sG(e){let n=C.useRef(e);return _m(()=>{n.current=e}),n}var _m=typeof window>"u"?C.useEffect:C.useLayoutEffect;function Lp(e){let n=C.useRef();return n.current===void 0&&(n.current=e()),n}function Ih(e){let n=j3(),r=()=>e(n.snapshot());return C.useSyncExternalStore(n.subscribe,r,r)}function iG(e,n,r,s=[]){let a=C.useRef(),o=my();return _m(()=>{var l;let c=(()=>{var d;for(let f of r){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(d=f.current.textContent)==null?void 0:d.trim():a.current}})(),u=s.map(d=>d.trim());o.value(e,c,u),(l=n.current)==null||l.setAttribute(Op,c),a.current=c}),a}var zve=()=>{let[e,n]=C.useState(),r=Lp(()=>new Map);return _m(()=>{r.current.forEach(s=>s()),r.current=new Map},[e]),(s,a)=>{r.current.set(s,a),n({})}};function Uve(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function H2({asChild:e,children:n},r){return e&&C.isValidElement(n)?C.cloneElement(Uve(n),{ref:n.ref},r(n.props.children)):r(n)}var Vve={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const N3=C.forwardRef(({className:e,...n},r)=>i.jsx(Fa,{ref:r,className:ut("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...n}));N3.displayName=Fa.displayName;const Hve=({children:e,...n})=>i.jsx(fa,{...n,children:i.jsx(ma,{className:"overflow-hidden p-0",children:i.jsx(N3,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:e})})}),_3=C.forwardRef(({className:e,...n},r)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(fs,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(Fa.Input,{ref:r,className:ut("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...n})]}));_3.displayName=Fa.Input.displayName;const aG=C.forwardRef(({className:e,...n},r)=>i.jsx(Fa.List,{ref:r,className:ut("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...n}));aG.displayName=Fa.List.displayName;const S3=C.forwardRef((e,n)=>i.jsx(Fa.Empty,{ref:n,className:"py-6 text-center text-sm",...e}));S3.displayName=Fa.Empty.displayName;const C3=C.forwardRef(({className:e,...n},r)=>i.jsx(Fa.Group,{ref:r,className:ut("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...n}));C3.displayName=Fa.Group.displayName;const Wve=C.forwardRef(({className:e,...n},r)=>i.jsx(Fa.Separator,{ref:r,className:ut("-mx-1 h-px bg-border",e),...n}));Wve.displayName=Fa.Separator.displayName;const P3=C.forwardRef(({className:e,...n},r)=>i.jsx(Fa.Item,{ref:r,className:ut("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...n}));P3.displayName=Fa.Item.displayName;function xx({value:e,onValueChange:n,options:r=[],placeholder:s="Select...",searchPlaceholder:a="Search...",emptyText:o="No results found.",allowCustom:l=!0,className:c}){const[u,d]=C.useState(!1),[f,m]=C.useState(""),g=v=>{n(v===e?"":v),d(!1),m("")},x=()=>{f.trim()&&l&&!r.includes(f.trim())&&(n(f.trim()),d(!1),m(""))};return i.jsxs(GK,{open:u,onOpenChange:d,children:[i.jsx(YK,{asChild:!0,children:i.jsxs(ye,{variant:"outline",role:"combobox","aria-expanded":u,className:ut("w-full justify-between",c),children:[e||s,i.jsx($Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(w3,{className:"w-full p-0",align:"start",children:i.jsxs(N3,{children:[i.jsx(_3,{placeholder:a,value:f,onValueChange:m,onKeyDown:v=>{v.key==="Enter"&&l&&(v.preventDefault(),x())}}),i.jsx(S3,{children:l&&f.trim()?i.jsx("div",{className:"p-2",children:i.jsxs(ye,{variant:"ghost",size:"sm",className:"w-full justify-start text-xs",onClick:x,children:['Use "',f.trim(),'"']})}):i.jsx("div",{className:"p-2 text-xs text-center text-muted-foreground",children:o})}),i.jsx(C3,{className:"max-h-64 overflow-auto",children:r.map(v=>i.jsxs(P3,{value:v,onSelect:g,children:[i.jsx(vh,{className:ut("mr-2 h-4 w-4",e===v?"opacity-100":"opacity-0")}),v]},v))})]})})]})}const Kve=["Billiard","Bent Billiard","Apple","Bent Apple","Dublin","Bent Dublin","Bulldog","Rhodesian","Canadian","Liverpool","Lovat","Lumberman","Prince","Author","Brandy","Pot","Tomato","Egg","Acorn","Pear","Cutty","Devil Anse","Hawkbill","Diplomat","Poker","Cherrywood","Duke","Don","Tankard","Churchwarden","Nosewarmer","Vest Pocket","MacArthur","Calabash","Reverse Calabash","Cavalier","Freehand","Blowfish","Volcano","Horn","Nautilus","Tomahawk","Bullmoose","Bullcap","Oom Paul (Hungarian)","Tyrolean","Unknown","Other"],Gve=["Cylindrical (Straight Wall)","Conical (Tapered)","Rounded / Ball","Oval / Egg","Squat / Pot","Chimney (Tall)","Paneled","Faceted / Multi-Panel","Horn-Shaped","Freeform","Unknown"],Yve=["Round","Diamond","Square","Oval","Paneled / Faceted","Military / Army Mount","Freeform","Unknown"],Qve=["Straight","1/4 Bent","1/2 Bent","3/4 Bent","Full Bent","S-Bend","Unknown"],Xve=["Vest Pocket","Small","Standard","Large","Magnum / XL","Churchwarden","MacArthur","Unknown"],Jve=["Briar","Meerschaum","Corn Cob","Clay","Olive Wood","Cherry Wood","Morta","Other"],Zve=["Acrylic","Amber","Bone","Cumberland","Ebonite","Horn","Lucite","Metal","Other","Vulcanite"],eye=["Smooth","Sandblast","Rusticated","Partially Rusticated","Carved","Natural","Other"],tye=["Small","Medium","Large","Extra Large"],nye=["Mint","Excellent","Very Good","Good","Fair","Poor","Estate - Unrestored"],rye=["None","6mm","9mm","Stinger","Other"];function oG({pipe:e,onSave:n,onCancel:r,isLoading:s}){var he,W,J,pe;const{t:a}=$t(),[o,l]=C.useState(e||{name:"",maker:"",country_of_origin:"",shape:"",bowlStyle:"",shankShape:"",bend:"",sizeClass:"",length_mm:"",weight_grams:"",bowl_height_mm:"",bowl_width_mm:"",bowl_diameter_mm:"",bowl_depth_mm:"",chamber_volume:"",stem_material:"",bowl_material:"",finish:"",filter_type:"",year_made:"",purchase_date:"",stamping:"",condition:"",purchase_price:"",estimated_value:"",notes:"",usage_characteristics:"",smoking_characteristics:"",photos:[],stamping_photos:[],is_favorite:!1,interchangeable_bowls:[]}),[c,u]=C.useState(((he=e==null?void 0:e.interchangeable_bowls)==null?void 0:he.length)>0||!1),[d,f]=C.useState(!1),[m,g]=C.useState(!1),[x,v]=C.useState(null),[y,b]=C.useState(null),[N,j]=C.useState(null),{user:S,hasPaid:A}=Kr(),P=n0(),L=A,O=Number.isFinite((W=P==null?void 0:P.limits)==null?void 0:W.photosPerItem)?P.limits.photosPerItem:la.PHOTOS_PER_ITEM,{useImperial:R,setUseImperial:q,convertLength:U,convertWeight:D,getLengthUnit:M,getWeightUnit:G}=eK(),{data:Y=[]}=gx("Pipe","maker"),{data:Z=[]}=gx("Pipe","country_of_origin"),{data:X=[]}=gx("Pipe","bowl_material"),{data:re=[]}=gx("Pipe","stem_material"),z=(ue,me)=>{l(je=>({...je,[ue]:me}))},[te,le]=C.useState(null),Q=ue=>{l(me=>{const{photos:je,stamping_photos:ze,...Te}=ue;return{...me,...Te}}),le("Web Search")},T=ue=>{l(me=>{const{photos:je,stamping_photos:ze,...Te}=ue;return{...me,...Te}}),le("AI Photo Identification")},B=async ue=>{const me=y==="stamping";me?g(!0):f(!0);try{const ze=await(await fetch(ue)).blob(),Te=new File([ze],"cropped-image.jpg",{type:"image/jpeg"}),xe=await Ce.integrations.Core.UploadFile({file:Te});if(N!==null){if(me){const ht=[...o.stamping_photos||[]];ht[N]=xe.file_url,z("stamping_photos",ht)}else{const ht=[...o.photos||[]];ht[N]=xe.file_url,z("photos",ht)}j(null)}else me?z("stamping_photos",[...o.stamping_photos||[],xe.file_url]):z("photos",[...o.photos||[],xe.file_url])}catch(je){console.error("Upload error:",je)}finally{v(null),b(null),me?g(!1):f(!1)}},H=(ue,me=!1)=>{me?z("stamping_photos",o.stamping_photos.filter((je,ze)=>ze!==ue)):z("photos",o.photos.filter((je,ze)=>ze!==ue))},ee=(ue,me=!1)=>{j(ue);const je=me?o.stamping_photos[ue]:o.photos[ue];v(je),b(me?"stamping":"photo")},ce=async ue=>{var ze,Te;if(ue.preventDefault(),!e&&!L){const xe=await iv(S==null?void 0:S.email,L,!1);if(!xe.canCreate){Ve.error(xe.reason||a("limits.pipesLimit",{limit:xe.limit}));return}}if((((ze=o.photos)==null?void 0:ze.length)||0)+(((Te=o.stamping_photos)==null?void 0:Te.length)||0)>O){Ve.error(a("limits.photosLimit",{limit:O}));return}const je={...o,length_mm:o.length_mm?Number(o.length_mm):null,weight_grams:o.weight_grams?Number(o.weight_grams):null,bowl_height_mm:o.bowl_height_mm?Number(o.bowl_height_mm):null,bowl_width_mm:o.bowl_width_mm?Number(o.bowl_width_mm):null,bowl_diameter_mm:o.bowl_diameter_mm?Number(o.bowl_diameter_mm):null,bowl_depth_mm:o.bowl_depth_mm?Number(o.bowl_depth_mm):null,purchase_price:o.purchase_price?Number(o.purchase_price):null,estimated_value:o.estimated_value?Number(o.estimated_value):null,interchangeable_bowls:c?o.interchangeable_bowls:[]};n(jxe(je))};return i.jsxs(i.Fragment,{children:[x&&i.jsx(IK,{imageUrl:x,onSave:B,onCancel:()=>{v(null),b(null),j(null)}}),i.jsxs("form",{onSubmit:ce,className:"space-y-6",children:[!e&&i.jsxs(i.Fragment,{children:[i.jsxs(Ee,{className:"border-[#A35C5C]/50",variant:"elevated",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsxs(et,{className:"text-lg text-[#E0D8C8] flex items-center gap-2",children:[i.jsx(fs,{className:"w-5 h-5"}),a("pipesExtended.searchForPipe")]}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:a("pipesExtended.searchDesc")})]}),i.jsx(Oe,{children:i.jsx(Ixe,{onSelect:Q})})]}),i.jsx(Mxe,{onIdentify:T}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-white/10"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-[#243548] px-2 text-[#E0D8C8]/70",children:a("formsExtended.orEnterManually")})})]})]}),i.jsxs(Ee,{className:"border-[#E0D8C8]/15",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-lg text-[#E0D8C8]",children:a("pipesExtended.pipePhotos")})}),i.jsx(Oe,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[(J=o.photos)==null?void 0:J.map((ue,me)=>i.jsxs("div",{className:"relative aspect-[16/9] rounded-lg overflow-hidden border border-[#E0D8C8]/15 group",children:[i.jsx("img",{src:ue,alt:"",className:"w-full h-full object-cover"}),i.jsxs("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100",children:[i.jsx("button",{type:"button",onClick:()=>ee(me,!1),className:"bg-[#A35C5C]/80 rounded-full p-1.5 hover:bg-[#A35C5C]",children:i.jsx(dm,{className:"w-3.5 h-3.5 text-[#E0D8C8]"})}),i.jsx("button",{type:"button",onClick:()=>H(me),className:"bg-[#E05D5D]/80 rounded-full p-1.5 hover:bg-[#E05D5D]",children:i.jsx(zi,{className:"w-3.5 h-3.5 text-[#E0D8C8]"})})]})]},me)),i.jsx("div",{className:"aspect-[16/9] rounded-lg border-2 border-dashed border-[#E0D8C8]/20 hover:border-[#A35C5C]/50 transition-colors flex items-center justify-center p-3",children:i.jsx(G1,{onPhotosSelected:ue=>{const me=ue==null?void 0:ue[0];if(me)try{const je=new FileReader;je.onload=ze=>{v(ze.target.result),b("photo")},je.readAsDataURL(me)}catch(je){console.error("Error reading file:",je)}},existingPhotos:[],hideExisting:!0})})]})})]}),i.jsxs(Ee,{className:"border-[#E0D8C8]/15",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsx(et,{className:"text-lg text-[#E0D8C8]",children:a("pipesExtended.stampingPhotos")}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:a("pipesExtended.stampingPhotosDesc")})]}),i.jsx(Oe,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[(pe=o.stamping_photos)==null?void 0:pe.map((ue,me)=>i.jsxs("div",{className:"relative aspect-[16/9] rounded-lg overflow-hidden border border-[#E0D8C8]/15 group",children:[i.jsx("img",{src:ue,alt:"",className:"w-full h-full object-cover"}),i.jsxs("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100",children:[i.jsx("button",{type:"button",onClick:()=>ee(me,!0),className:"bg-[#A35C5C]/80 rounded-full p-1.5 hover:bg-[#A35C5C]",children:i.jsx(dm,{className:"w-3.5 h-3.5 text-[#E0D8C8]"})}),i.jsx("button",{type:"button",onClick:()=>H(me,!0),className:"bg-[#E05D5D]/80 rounded-full p-1.5 hover:bg-[#E05D5D]",children:i.jsx(zi,{className:"w-3.5 h-3.5 text-[#E0D8C8]"})})]})]},me)),i.jsx("div",{className:"aspect-[16/9] rounded-lg border-2 border-dashed border-[#E0D8C8]/20 hover:border-[#A35C5C]/50 transition-colors flex items-center justify-center p-3",children:i.jsx(G1,{onPhotosSelected:ue=>{const me=ue==null?void 0:ue[0];if(me)try{const je=new FileReader;je.onload=ze=>{v(ze.target.result),b("stamping")},je.readAsDataURL(me)}catch(je){console.error("Error reading file:",je)}},existingPhotos:[],hideExisting:!0})})]})})]}),i.jsxs(Ee,{className:"border-[#E0D8C8]/15",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-lg text-[#E0D8C8]",children:a("formsExtended.basicInfo")})}),i.jsxs(Oe,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Hr,{label:a("pipesExtended.name"),required:!0,helpText:a("pipesExtended.nameHelp"),children:i.jsx(at,{value:o.name,onChange:ue=>z("name",ue.target.value),placeholder:a("pipesExtended.namePlaceholder"),required:!0})}),i.jsx(Hr,{label:a("pipesExtended.maker"),helpText:a("pipesExtended.makerHelp"),children:i.jsx(xx,{value:o.maker,onValueChange:ue=>z("maker",ue),options:Y,placeholder:a("pipesExtended.makerPlaceholder"),searchPlaceholder:a("common.searchPlaceholder"),allowCustom:!0})}),i.jsx(Hr,{label:a("pipesExtended.country"),helpText:a("pipesExtended.countryHelp"),children:i.jsx(xx,{value:o.country_of_origin,onValueChange:ue=>z("country_of_origin",ue),options:Z,placeholder:a("pipesExtended.countryPlaceholder"),searchPlaceholder:a("common.searchPlaceholder"),allowCustom:!0})}),i.jsx(Hr,{label:a("pipesExtended.yearMade"),helpText:a("pipesExtended.yearMadeHelp"),children:i.jsx(at,{value:o.year_made,onChange:ue=>z("year_made",ue.target.value),placeholder:a("pipesExtended.yearMadePlaceholder")})}),i.jsx(Hr,{label:a("pipesExtended.purchaseDate"),helpText:a("pipesExtended.purchaseDateHelp"),children:i.jsx(at,{type:"date",value:o.purchase_date,onChange:ue=>z("purchase_date",ue.target.value)})}),i.jsx(Hr,{label:a("pipesExtended.stamping"),helpText:a("pipesExtended.stampingHelp"),children:i.jsx(at,{value:o.stamping,onChange:ue=>z("stamping",ue.target.value),placeholder:a("pipesExtended.stampingPlaceholder")})}),i.jsx(Hr,{label:a("pipesExtended.condition"),helpText:a("pipesExtended.conditionHelp"),children:i.jsxs(pn,{value:o.condition,onValueChange:ue=>z("condition",ue),children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:nye.map(ue=>i.jsx(ot,{value:ue,children:ue},ue))})]})})]})]}),i.jsxs(Ee,{className:"border-[#E0D8C8]/15",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsx(et,{className:"text-lg text-[#E0D8C8]",children:a("pipesExtended.pipeGeometry")}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:a("pipesExtended.pipeGeometryDesc")})]}),i.jsxs(Oe,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Hr,{label:a("pipesExtended.shape"),required:!0,helpText:a("pipesExtended.shapeHelp"),children:i.jsxs(pn,{value:o.shape||"Unknown",onValueChange:ue=>z("shape",ue),children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:Kve.map(ue=>i.jsx(ot,{value:ue,children:ue},ue))})]})}),i.jsx(Hr,{label:a("pipesExtended.bowlStyle"),helpText:a("pipesExtended.bowlStyleHelp"),children:i.jsxs(pn,{value:o.bowlStyle||"Unknown",onValueChange:ue=>z("bowlStyle",ue),children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:Gve.map(ue=>i.jsx(ot,{value:ue,children:ue},ue))})]})}),i.jsx(Hr,{label:a("pipesExtended.shankShape"),helpText:a("pipesExtended.shankShapeHelp"),children:i.jsxs(pn,{value:o.shankShape||"Unknown",onValueChange:ue=>z("shankShape",ue),children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:Yve.map(ue=>i.jsx(ot,{value:ue,children:ue},ue))})]})}),i.jsx(Hr,{label:a("pipesExtended.bend"),helpText:a("pipesExtended.bendHelp"),children:i.jsxs(pn,{value:o.bend||"Unknown",onValueChange:ue=>z("bend",ue),children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:Qve.map(ue=>i.jsx(ot,{value:ue,children:ue},ue))})]})}),i.jsx(Hr,{label:a("pipesExtended.sizeClass"),helpText:a("pipesExtended.sizeClassHelp"),children:i.jsxs(pn,{value:o.sizeClass||"Standard",onValueChange:ue=>z("sizeClass",ue),children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:Xve.map(ue=>i.jsx(ot,{value:ue,children:ue},ue))})]})})]})]}),i.jsxs(Ee,{className:"border-[#E0D8C8]/15",children:[i.jsxs(Ze,{className:"pb-3 flex flex-row items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(et,{className:"text-lg text-[#E0D8C8]",children:a("formsExtended.physicalCharacteristics")}),te&&i.jsxs("p",{className:"text-xs text-[#E0D8C8]/70 mt-1",children:[a("formsExtended.dataSource"),": ",te]})]}),i.jsxs(ye,{type:"button",variant:"outline",size:"sm",onClick:()=>q(!R),className:"whitespace-nowrap",children:[i.jsx(DP,{className:"w-4 h-4 mr-2"}),a(R?"pipesExtended.showMetric":"pipesExtended.showImperial")]})]}),i.jsxs(Oe,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsx(Hr,{label:a("pipesExtended.bowlMaterial"),helpText:a("pipesExtended.bowlMaterialHelp"),children:i.jsx(xx,{value:o.bowl_material,onValueChange:ue=>z("bowl_material",ue),options:[...new Set([...Jve,...X])],placeholder:a("common.selectPlaceholder"),searchPlaceholder:a("common.searchPlaceholder"),allowCustom:!1})}),i.jsx(Hr,{label:a("pipesExtended.stemMaterial"),helpText:a("pipesExtended.stemMaterialHelp"),children:i.jsx(xx,{value:o.stem_material,onValueChange:ue=>z("stem_material",ue),options:[...new Set([...Zve,...re])],placeholder:a("common.selectPlaceholder"),searchPlaceholder:a("common.searchPlaceholder"),allowCustom:!1})}),i.jsx(Hr,{label:a("pipesExtended.finish"),helpText:a("pipesExtended.finishHelp"),children:i.jsxs(pn,{value:o.finish,onValueChange:ue=>z("finish",ue),children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:eye.map(ue=>i.jsx(ot,{value:ue,children:ue},ue))})]})}),i.jsx(Hr,{label:a("pipesExtended.chamberVolume"),helpText:a("pipesExtended.chamberVolumeHelp"),children:i.jsxs(pn,{value:o.chamber_volume,onValueChange:ue=>z("chamber_volume",ue),children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:tye.map(ue=>i.jsx(ot,{value:ue,children:ue},ue))})]})}),i.jsx(Hr,{label:a("pipesExtended.filterType"),helpText:a("pipesExtended.filterTypeHelp"),children:i.jsxs(pn,{value:o.filter_type,onValueChange:ue=>z("filter_type",ue),children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:rye.map(ue=>i.jsx(ot,{value:ue,children:ue},ue))})]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{children:[a("pipesExtended.length")," (",M(),")"]}),i.jsx(at,{type:"number",step:"0.01",value:o.length_mm?Math.round(U(parseFloat(o.length_mm))*100)/100:"",onChange:ue=>{const me=ue.target.value;if(me==="")z("length_mm","");else{const je=R?Np(parseFloat(me),"length"):parseFloat(me);z("length_mm",String(Math.round(je*100)/100))}},placeholder:R?"e.g., 5.5":"e.g., 140"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{children:[a("pipesExtended.weight")," (",G(),")"]}),i.jsx(at,{type:"number",step:"0.01",value:o.weight_grams?Math.round(D(parseFloat(o.weight_grams))*100)/100:"",onChange:ue=>{const me=ue.target.value;if(me==="")z("weight_grams","");else{const je=R?Np(parseFloat(me),"weight"):parseFloat(me);z("weight_grams",String(Math.round(je*100)/100))}},placeholder:R?"e.g., 1.5":"e.g., 42"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{children:[a("pipesExtended.bowlHeight")," (",M(),")"]}),i.jsx(at,{type:"number",step:"0.01",value:o.bowl_height_mm?Math.round(U(parseFloat(o.bowl_height_mm))*100)/100:"",onChange:ue=>{const me=ue.target.value;if(me==="")z("bowl_height_mm","");else{const je=R?Np(parseFloat(me),"length"):parseFloat(me);z("bowl_height_mm",String(Math.round(je*100)/100))}},placeholder:R?"e.g., 2.0":"e.g., 50"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{children:[a("pipesExtended.bowlWidth")," (",M(),")"]}),i.jsx(at,{type:"number",step:"0.01",value:o.bowl_width_mm?Math.round(U(parseFloat(o.bowl_width_mm))*100)/100:"",onChange:ue=>{const me=ue.target.value;if(me==="")z("bowl_width_mm","");else{const je=R?Np(parseFloat(me),"length"):parseFloat(me);z("bowl_width_mm",String(Math.round(je*100)/100))}},placeholder:R?"e.g., 1.5":"e.g., 38"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{children:[a("pipesExtended.chamberDiameter")," (",M(),")"]}),i.jsx(at,{type:"number",step:"0.01",value:o.bowl_diameter_mm?Math.round(U(parseFloat(o.bowl_diameter_mm))*100)/100:"",onChange:ue=>{const me=ue.target.value;if(me==="")z("bowl_diameter_mm","");else{const je=R?Np(parseFloat(me),"length"):parseFloat(me);z("bowl_diameter_mm",String(Math.round(je*100)/100))}},placeholder:R?"e.g., 0.8":"e.g., 20"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{children:[a("pipesExtended.chamberDepth")," (",M(),")"]}),i.jsx(at,{type:"number",step:"0.01",value:o.bowl_depth_mm?Math.round(U(parseFloat(o.bowl_depth_mm))*100)/100:"",onChange:ue=>{const me=ue.target.value;if(me==="")z("bowl_depth_mm","");else{const je=R?Np(parseFloat(me),"length"):parseFloat(me);z("bowl_depth_mm",String(Math.round(je*100)/100))}},placeholder:R?"e.g., 1.6":"e.g., 40"})]})]})]}),i.jsxs(Ee,{className:"border-[#E0D8C8]/15",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-lg text-[#E0D8C8]",children:a("formsExtended.valueNotes")})}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("pipesExtended.purchasePrice")}),i.jsx(at,{type:"number",value:o.purchase_price,onChange:ue=>z("purchase_price",ue.target.value),placeholder:a("pipesExtended.purchasePricePlaceholder")})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("pipesExtended.estimatedValue")}),i.jsx(at,{type:"number",value:o.estimated_value,onChange:ue=>z("estimated_value",ue.target.value),placeholder:a("pipesExtended.estimatedValuePlaceholder")})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("pipesExtended.usageCharacteristics")}),i.jsx(Ui,{value:o.usage_characteristics||o.smoking_characteristics,onChange:ue=>{z("usage_characteristics",ue.target.value),z("smoking_characteristics","")},placeholder:a("pipesExtended.usageCharacteristicsPlaceholder"),rows:2})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("common.notes")}),i.jsx(Ui,{value:o.notes,onChange:ue=>z("notes",ue.target.value),placeholder:a("pipesExtended.notesPlaceholder"),rows:3})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ua,{checked:o.is_favorite,onCheckedChange:ue=>z("is_favorite",ue)}),i.jsx(tt,{children:a("formsExtended.markAsFavorite")})]})]})]}),i.jsxs(Ee,{className:"border-[#E0D8C8]/15",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsxs(et,{className:"text-lg text-[#E0D8C8] flex items-center gap-2",children:[i.jsx(DP,{className:"w-5 h-5"}),a("formsExtended.interchangeableBowls")]}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:a("formsExtended.interchangeableBowlsDesc")})]}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ua,{checked:c,onCheckedChange:ue=>{u(ue),ue||z("interchangeable_bowls",[])}}),i.jsx(tt,{children:a("pipesExtended.hasInterchangeableBowls")})]}),c&&i.jsx("div",{className:"pt-2",children:i.jsx(QK,{pipe:o,onUpdate:ue=>l({...o,...ue})})})]})]}),i.jsxs("div",{className:"sticky bottom-0 bg-gradient-to-t from-[#243548] to-[#243548]/80 backdrop-blur-sm border-t border-[#E0D8C8]/15 p-4 sm:p-6 flex gap-3 justify-end -mx-6 sm:-mx-8 px-6 sm:px-8",children:[i.jsx(ye,{type:"button",variant:"outline",onClick:r,className:"bg-white/10 border-white/30 text-[#E0D8C8] hover:bg-white/20",children:a("common.cancel")}),i.jsxs(ye,{type:"submit",disabled:s,className:"bg-[#A35C5C] hover:bg-[#8F4E4E] text-white",children:[s?i.jsx(Cn,{className:"w-4 h-4 animate-spin mr-2"}):null,a(e?"pipesExtended.updatePipe":"pipesExtended.addPipe")]})]})]})]})}function sye(e,n){return`${e||"unknown"}::${n||"main"}`}const iye=(e,n,r)=>Math.max(n,Math.min(r,e));function aye(e){return String((e==null?void 0:e.blend_type)||(e==null?void 0:e.type)||"").toLowerCase().includes("aromatic")?"aromatic":"non_aromatic"}function lG(e){return aye(e)==="aromatic"}function cG(e){const n=e==null?void 0:e.aromatic_intensity;if(n==="light"||n==="Light")return"light";if(n==="medium"||n==="Medium")return"medium";if(n==="heavy"||n==="Heavy")return"heavy";const r=String((e==null?void 0:e.flavor_notes)||"").toLowerCase();if(/(goopy|very sweet|strong topping|heavy topping|syrup|intense)/.test(r))return"heavy";if(/(light topping|subtle|hint of|mild casing)/.test(r))return"light";const s=String((e==null?void 0:e.strength)||"").toLowerCase();return s.includes("full")?"heavy":s.includes("mild")?"light":s.includes("medium")?"medium":null}function oye(e){const n=(Array.isArray(e)?e:[]).map(d=>String(d||"").trim()).filter(Boolean),r=n.map(d=>d.toLowerCase()),s=r.some(d=>["utility","versatile","multi","multiple","any","general"].some(f=>d.includes(f))),a=r.some(d=>d.includes("heavy arom")),o=r.some(d=>d.includes("light arom")),l=r.some(d=>d.includes("medium arom"))||r.some(d=>d.includes("arom"))&&!a&&!o,c=!s&&r.some(d=>/(aromatic(s)?\s*only|aromatic[-\s]*dedicated|dedicated\s*to\s*aromatic)/.test(d)),u=!s&&r.some(d=>/(non[-\s]?aromatic(s)?\s*only|non[-\s]?aromatic[-\s]*dedicated|dedicated\s*to\s*non)/.test(d));return{focus:n,lower:r,aromaticOnly:c,nonAromaticOnly:u,wantsHeavyAromatics:a,wantsLightAromatics:o,wantsMediumAromatics:l}}function x5(e,n){const r=String(n||"").toLowerCase();let s=0;for(const a of e)a&&(["aromatic","aromatics","non-aromatic","non aromatic"].includes(a)||r.includes(a)&&(s+=1));return s}function lye(e,n,r){const s=oye(e==null?void 0:e.focus),a=lG(n);if(s.aromaticOnly&&!a)return{score:0,why:"Pipe is dedicated to aromatics only."};if(s.nonAromaticOnly&&a)return{score:0,why:"Pipe is dedicated to non-aromatics only."};let o=4;const l=[],c=String((n==null?void 0:n.tobacco_name)||(n==null?void 0:n.name)||"").toLowerCase();if(c&&s.lower.includes(c))return{score:10,why:"Exact blend match to pipe focus."};const u=(n==null?void 0:n.blend_type)||"",d=(n==null?void 0:n.flavor_notes)||"",f=(n==null?void 0:n.tobacco_components)||"",m=x5(s.lower,u)+x5(s.lower,d)+x5(s.lower,f);if(m>=2?(o+=4,l.push("Strong match to pipe focus keywords.")):m===1&&(o+=2,l.push("Partial match to pipe focus keywords.")),a){o+=2;const y=cG(n);s.wantsHeavyAromatics?(y==="heavy"?o+=2:y==="medium"?o+=1:y==="light"&&(o-=.5),l.push("Pipe prefers heavier aromatics.")):s.wantsLightAromatics?(y==="light"?o+=2:y==="medium"?o+=1:y==="heavy"&&(o-=.5),l.push("Pipe prefers lighter aromatics.")):s.wantsMediumAromatics&&(y==="medium"?o+=2:(y==="light"||y==="heavy")&&(o+=.5),l.push("Pipe prefers medium aromatics."))}const g=r||{},x=Array.isArray(g.preferred_blend_types)?g.preferred_blend_types:[],v=g.strength_preference||null;return x.some(y=>String(y).toLowerCase()===String(u).toLowerCase())&&(o+=1.5,l.push("Matches your preferred blend types.")),v&&String(v).toLowerCase()===String((n==null?void 0:n.strength)||"").toLowerCase()&&(o+=.5,l.push("Matches your preferred strength.")),o=iye(o,0,10),{score:o,why:l.join(" ")||"General compatibility based on focus and blend characteristics."}}function cye(e,n,r){return(e||[]).map(s=>{const a=(n||[]).map(l=>{const{score:c,why:u}=lye(s,l,r);return{tobacco_id:String(l.tobacco_id??l.id),tobacco_name:String(l.tobacco_name??l.name),score:c,reasoning:u}});a.sort((l,c)=>(c.score||0)-(l.score||0));const o=a.slice(0,10);return{pipe_id:String(s.pipe_id),pipe_name:String(s.pipe_name),bowl_variant_id:s.bowl_variant_id??null,recommendations:o}})}async function uye({pipes:e,blends:n,profile:r}){function s(u){const d=Array.isArray(u)?u:[],f=d.join(" ").toLowerCase(),m=new Set(d);return f.includes("aromatic")&&m.add("Aromatic"),(f.includes("non-aromatic")||f.includes("non aromatic"))&&m.add("Non-Aromatic"),f.includes("heavy")&&m.add("Heavy Aromatics"),f.includes("light")&&m.add("Light Aromatics"),f.includes("medium")&&m.add("Medium Aromatics"),[...m]}const a=[];for(const u of e||[]){const d=String(u.id);Array.isArray(u.interchangeable_bowls)&&u.interchangeable_bowls.length>0?u.interchangeable_bowls.forEach((f,m)=>{const g=(f==null?void 0:f.bowl_variant_id)||`bowl_${m}`;a.push({pipe_id:d,pipe_name:`${u.name} - ${f.name||`Bowl ${m+1}`}`,bowl_variant_id:g,maker:u.maker||null,shape:f.shape||u.shape||null,bowlStyle:f.bowlStyle||u.bowlStyle||null,shankShape:f.shankShape||u.shankShape||null,bend:f.bend||u.bend||null,sizeClass:f.sizeClass||u.sizeClass||null,bowl_material:f.bowl_material??u.bowl_material??null,chamber_volume:f.chamber_volume??u.chamber_volume??null,bowl_diameter_mm:f.bowl_diameter_mm??u.bowl_diameter_mm??null,bowl_depth_mm:f.bowl_depth_mm??u.bowl_depth_mm??null,bowl_height_mm:f.bowl_height_mm??null,bowl_width_mm:f.bowl_width_mm??null,focus:s(Array.isArray(f.focus)?f.focus:[]),notes:f.notes||""})}):a.push({pipe_id:d,pipe_name:u.name,bowl_variant_id:null,maker:u.maker||null,shape:u.shape||null,bowlStyle:u.bowlStyle||null,shankShape:u.shankShape||null,bend:u.bend||null,sizeClass:u.sizeClass||null,bowl_material:u.bowl_material??null,chamber_volume:u.chamber_volume??null,bowl_diameter_mm:u.bowl_diameter_mm??null,bowl_depth_mm:u.bowl_depth_mm??null,focus:s(Array.isArray(u.focus)?u.focus:[]),notes:u.notes||""})}const o=(n||[]).map(u=>{const d=lG(u),f=d?cG(u):null;return{tobacco_id:String(u.id),tobacco_name:u.name,manufacturer:u.manufacturer||null,blend_type:u.blend_type||null,strength:u.strength||null,cut:u.cut||null,flavor_notes:u.flavor_notes||null,tobacco_components:u.tobacco_components||null,category:d?"aromatic":"non_aromatic",aromatic_intensity:f}}),l=r?{preferred_blend_types:r.preferred_blend_types||[],strength_preference:r.strength_preference||null,pipe_size_preference:r.pipe_size_preference||null,clenching_preference:r.clenching_preference||null,smoke_duration_preference:r.smoke_duration_preference||null,notes:r.notes||null}:null,c=cye(a,o,l);if(!c.length)throw new Error("No pairings produced (pipes list empty?)");return{pairings:c}}async function dye({pipe:e,blends:n,profile:r}){const s=(n||[]).map(c=>({id:c.id,name:c.name,manufacturer:c.manufacturer,blend_type:c.blend_type,strength:c.strength,cut:c.cut})),a=r?{preferred_blend_types:r.preferred_blend_types||[],preferred_shapes:r.preferred_shapes||[],strength_preference:r.strength_preference||null,pipe_size_preference:r.pipe_size_preference||null,clenching_preference:r.clenching_preference||null,smoke_duration_preference:r.smoke_duration_preference||null,notes:r.notes||null}:null,o={id:e==null?void 0:e.id,name:e==null?void 0:e.name,maker:e==null?void 0:e.maker,shape:e==null?void 0:e.shape,bowlStyle:e==null?void 0:e.bowlStyle,shankShape:e==null?void 0:e.shankShape,bend:e==null?void 0:e.bend,sizeClass:e==null?void 0:e.sizeClass,bowl_material:e==null?void 0:e.bowl_material,focus:(e==null?void 0:e.focus)||[],chamber_volume:(e==null?void 0:e.chamber_volume)??null,bowl_diameter_mm:(e==null?void 0:e.bowl_diameter_mm)??null,bowl_depth_mm:(e==null?void 0:e.bowl_depth_mm)??null},l=await Ce.integrations.Core.InvokeLLM({prompt:`Create a break-in schedule for this pipe.

Rules:
- Stage 1 may include "conditioning bowls" even outside the final focus (mild, forgiving blends).
- Stages 2+ should trend toward the pipe's focus and user preferences.
- Only use blends from the provided list.
- Return JSON only.

PIPE:
${JSON.stringify(o,null,2)}

BLENDS:
${JSON.stringify(s,null,2)}

USER_PREFERENCES:
${JSON.stringify(a,null,2)}

Return JSON:
{ schedule: [{ blend_id, blend_name, suggested_bowls, bowls_completed, reasoning }] }`,response_json_schema:{type:"object",properties:{schedule:{type:"array",items:{type:"object",properties:{blend_id:{type:"string"},blend_name:{type:"string"},suggested_bowls:{type:"number"},bowls_completed:{type:"number"},reasoning:{type:"string"}},required:["blend_id","blend_name","suggested_bowls","bowls_completed","reasoning"]}}},required:["schedule"]}});return{schedule:(l==null?void 0:l.schedule)||[]}}function hye(e){const n=[];return JSON.stringify(e,(r,s)=>(n.push(r),s)),n.sort(),JSON.stringify(e,n)}function fye(e){let n=2166136261;for(let r=0;r<e.length;r++)n^=e.charCodeAt(r),n=Math.imul(n,16777619);return(n>>>0).toString(16)}function v5(e){const n=(e==null?void 0:e.updated_timestamp)??(e==null?void 0:e.updated_date)??(e==null?void 0:e.updated_at)??(e==null?void 0:e.modified_date);return n?new Date(n).toISOString().split("T")[0]:null}function uG({pipes:e=[],blends:n=[],profile:r=null}){const s={pipes:e.map(a=>({id:a.id,u:v5(a),focus:a.focus||[],dims:{length_mm:a.length_mm??null,bowl_diameter_mm:a.bowl_diameter_mm??null,bowl_depth_mm:a.bowl_depth_mm??null,chamber_volume:a.chamber_volume??null}})),blends:n.map(a=>({id:a.id,u:v5(a),blend_type:a.blend_type??null,strength:a.strength??null})),profile:r?{id:r.id??null,u:v5(r),prefs:{preferred_blend_types:r.preferred_blend_types||[],preferred_shapes:r.preferred_shapes||[],strength_preference:r.strength_preference||null,pipe_size_preference:r.pipe_size_preference||null,clenching_preference:r.clenching_preference||null,smoke_duration_preference:r.smoke_duration_preference||null,notes:r.notes||null}}:null};return fye(hye(s))}async function mye({pipes:e,blends:n,profile:r,user:s,queryClient:a,activePairings:o,skipIfUpToDate:l=!0}){if(!(s!=null&&s.email))throw new Error("Missing user.email");const c=uG({pipes:e,blends:n,profile:r});if(l&&(o!=null&&o.is_active)&&(o!=null&&o.input_fingerprint)&&o.input_fingerprint===c)return{skipped:!0,fingerprint:c};const{pairings:u}=await uye({pipes:e,blends:n,profile:r});if(!u||u.length===0)throw new Error("No pairings generated.");o!=null&&o.id&&await xr("PairingMatrix",o.id,{is_active:!1},s.email);const d=await Ce.entities.PairingMatrix.filter({created_by:s.email,is_active:!0},"-created_date",25);for(const f of d||[])String(f.id)!==String(o==null?void 0:o.id)&&await xr("PairingMatrix",f.id,{is_active:!1},s.email);return await Ce.entities.PairingMatrix.create({created_by:s.email,is_active:!0,previous_active_id:(o==null?void 0:o.id)??null,input_fingerprint:c,pairings:u,generated_date:new Date().toISOString()}),await a.invalidateQueries({queryKey:["activePairings",s==null?void 0:s.email]}),l1(a,s==null?void 0:s.email),{skipped:!1,fingerprint:c}}function pye({pipe:e,blends:n=[],isPaidUser:r}){const{t:s}=$t(),[a,o]=C.useState(!1),l=On(),{data:c}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me(),staleTime:1e4}),{data:u}=Dt({queryKey:["user-profile",c==null?void 0:c.email],queryFn:async()=>(await Ce.entities.UserProfile.filter({user_email:c==null?void 0:c.email}))[0],enabled:!!(c!=null&&c.email)}),{data:d,isLoading:f}=Dt({queryKey:["activePairings",c==null?void 0:c.email],enabled:!!(c!=null&&c.email),queryFn:async()=>{const R=await Ce.entities.PairingMatrix.filter({created_by:c.email,is_active:!0},"-created_date",1);return(R==null?void 0:R[0])||null}}),m=C.useMemo(()=>(Array.isArray(e==null?void 0:e.interchangeable_bowls)?e.interchangeable_bowls:[]).map((q,U)=>({id:q.bowl_variant_id||`bowl_${U}`,name:q.name||`Bowl ${U+1}`})),[e]),g=m.length>0,[x,v]=C.useState(()=>g&&m.length>0?m[0].id:null),y=C.useMemo(()=>{var M;const R=(d==null?void 0:d.pairings)||((M=d==null?void 0:d.data)==null?void 0:M.pairings)||[],q=String((e==null?void 0:e.id)??""),U=!x||x==="main"||x==="null"?null:x;let D=R.find(G=>String(G.pipe_id)===q&&(G.bowl_variant_id||null)===U)||null;if(!D&&!U&&(D=R.find(G=>String(G.pipe_id)===q&&(!G.bowl_variant_id||G.bowl_variant_id==="main"||G.bowl_variant_id==="null"))||null),!D){const G=e==null?void 0:e.name;D=R.find(Y=>Y.pipe_name===G)||null}return D},[d,e==null?void 0:e.id,e==null?void 0:e.name,x]),b=C.useMemo(()=>[...(y==null?void 0:y.recommendations)||(y==null?void 0:y.blend_matches)||[]].filter(q=>(q.score??0)>0).sort((q,U)=>(U.score??0)-(q.score??0)).slice(0,3),[y]),[N,j]=C.useState(""),S=C.useMemo(()=>n.find(R=>String(R.id)===String(N))||null,[n,N]),A=C.useMemo(()=>{if(!S||!y)return null;const R=y.recommendations||y.blend_matches||[],q=String(S.id),U=R.find(D=>String(D.tobacco_id??"")===q||String(D.blend_id??"")===q||String(D.id??"")===q);return(U==null?void 0:U.score)??null},[y,S]);if(!r)return i.jsx(Ac,{featureName:s("matching.aiTobaccoMatching"),description:s("matching.upgradeDesc")});if(f)return i.jsxs("div",{className:"flex items-center justify-center py-10 text-stone-600",children:[i.jsx(Cn,{className:"h-5 w-5 animate-spin mr-2"}),s("common.loading")]});if(!(e!=null&&e.id))return i.jsx("div",{className:"text-sm text-[#E0D8C8]/60",children:s("errors.pipeNotAvailable")});const P=!x||x==="main"?null:x,L=sye(e.id,P),O=async()=>{o(!0);try{await mye({pipes:[e],blends:n,profile:u,user:c,queryClient:l,activePairings:d,skipIfUpToDate:!0}),Ve.success(s("matching.regenerateSuccess"))}catch{Ve.error(s("errors.regenerateFailed"))}finally{o(!1)}};return i.jsx(Ee,{className:"border-stone-200",children:i.jsxs(Oe,{className:"p-0",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3 p-4 border-b bg-[#243548]",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-sm font-semibold text-white",children:s("matching.recommendationsFor",{defaultValue:"Recommendations for"})}),i.jsx("div",{className:"text-xs text-[#E0D8C8]",children:e.name})]}),i.jsx("div",{className:"flex gap-2 items-start",children:i.jsxs(ye,{variant:"outline",size:"sm",onClick:O,disabled:a,className:"shrink-0 text-[#E0D8C8]",children:[a?i.jsx(Cn,{className:"h-3 w-3 animate-spin mr-1"}):i.jsx($s,{className:"h-3 w-3 mr-1"}),s("matching.regenerate")]})}),i.jsxs("div",{className:"w-full md:w-64",children:[i.jsx("div",{className:"text-xs font-semibold text-[#E0D8C8]/70 mb-1",children:s("matching.bowlVariant")}),i.jsxs(pn,{value:x||"",onValueChange:v,disabled:!g,children:[i.jsx(hn,{children:i.jsx(gn,{placeholder:s("matching.selectBowl")})}),i.jsx(fn,{children:m.map(R=>i.jsx(ot,{value:R.id,children:R.name},R.id))})]})]})]}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-bold text-white mb-2",children:s("matching.top3Matches",{defaultValue:"Top 3 Matches"})}),b.length?i.jsx("div",{className:"flex flex-col gap-2",children:b.map((R,q)=>i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("span",{className:"text-sm text-[#E0D8C8] truncate font-medium",children:R.tobacco_name}),i.jsx(Ge,{className:"bg-[#E0D8C8]/20 text-white font-semibold",children:R.score??"—"})]},`${L}-top-${q}`))}):i.jsx("div",{className:"text-sm text-[#E0D8C8]/60",children:s("matching.noDataYet")})]}),i.jsxs("div",{className:"pt-3 border-t border-[#E0D8C8]/20",children:[i.jsx("div",{className:"text-xs font-semibold text-white mb-2",children:s("matching.checkAnyBlend",{defaultValue:"Check Any Blend"})}),i.jsxs(pn,{value:N,onValueChange:j,children:[i.jsx(hn,{className:"text-sm",children:i.jsx(gn,{placeholder:s("matching.selectBlend")})}),i.jsx(fn,{children:n.map(R=>i.jsx(ot,{value:String(R.id),children:R.name},R.id))})]}),S?i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-[#E0D8C8] truncate font-medium",children:S.name}),i.jsx("span",{className:"text-sm text-white font-semibold",children:A??s("matching.noScore",{defaultValue:"—"})})]}):null]})]})]})})}function gye({pipe:e,onUpdateValue:n}){var x;const{t:r}=$t(),[s,a]=C.useState(!1),[o,l]=C.useState(null),[c,u]=C.useState(!1),d=async()=>{a(!0);try{const v=`
        Pipe: ${e.name}
        Maker: ${e.maker||"Unknown"}
        Country of Origin: ${e.country_of_origin||"Unknown"}
        Shape: ${e.shape||"Unknown"}
        Bowl Material: ${e.bowl_material||"Unknown"}
        Stem Material: ${e.stem_material||"Unknown"}
        Finish: ${e.finish||"Unknown"}
        Year Made: ${e.year_made||"Unknown"}
        Condition: ${e.condition||"Unknown"}
        Stamping: ${e.stamping||"Not specified"}
      `,y=await Ce.integrations.Core.InvokeLLM({prompt:`You are an expert pipe appraiser with extensive knowledge of the estate pipe market. Research and estimate the current market value of this pipe based on recent sales data, collector interest, and market trends.

${v}

Search for:
1. Recent eBay sold listings for similar pipes
2. Estate pipe dealer prices (smokingpipes.com, cupojoes.com, 4noggins.com, etc.)
3. Auction results for this maker/style
4. Collector forum discussions on value

IMPORTANT VALUATION GUIDELINES:
- Estate pipes from quality makers typically range from $100-$500+
- Artisan pipes often start at $200-$300 and can exceed $1000
- Factory pipes in good condition: $75-$300 depending on maker
- Premium makers (Dunhill, Charatan, Peterson, Savinelli): $150-$800+
- Modern artisans: $250-$2000+
- Vintage collectibles can command significant premiums
- Condition heavily impacts value - excellent condition adds 30-50%

BE REALISTIC with valuations based on actual market prices, not theoretical values.

CRITICAL: Do NOT include any URLs, links, sources, citations, or website names in your response. Provide only descriptions and analysis.

Provide a detailed valuation in JSON format with:
- estimated_value_low: low end of value range in USD
- estimated_value_high: high end of value range in USD
- estimated_value_mid: most likely value in USD
- confidence: "high", "medium", or "low" based on data availability
- market_factors: array of factors affecting value (positive and negative, no sources)
- comparable_sales: brief description of similar pipes and their prices (no sources or links)
- notes: any important considerations for this specific pipe (no sources or links)
- value_trend: "rising", "stable", or "declining"`,add_context_from_internet:!0,response_json_schema:{type:"object",properties:{estimated_value_low:{type:"number"},estimated_value_high:{type:"number"},estimated_value_mid:{type:"number"},confidence:{type:"string"},market_factors:{type:"array",items:{type:"string"}},comparable_sales:{type:"string"},notes:{type:"string"},value_trend:{type:"string"}}}});l(y)}catch(v){console.error("Error looking up value:",v)}finally{a(!1)}},f=()=>{o!=null&&o.estimated_value_mid&&n(Math.round(o.estimated_value_mid))},m={high:"bg-emerald-100 text-emerald-800 border-emerald-200",medium:"bg-amber-100 text-amber-800 border-amber-200",low:"bg-rose-100 text-rose-800 border-rose-200"},g={rising:i.jsx(Hx,{className:"w-4 h-4 text-emerald-600"}),stable:i.jsx("div",{className:"w-4 h-4 border-t-2 border-stone-400"}),declining:i.jsx(Hx,{className:"w-4 h-4 text-rose-600 rotate-180"})};return i.jsxs("div",{className:"space-y-6",children:[!o&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-emerald-100 to-emerald-200 flex items-center justify-center",children:i.jsx(Tu,{className:"w-8 h-8 text-emerald-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-stone-800 mb-2",children:r("matching.marketValueLookup",{defaultValue:"Market Value Lookup"})}),i.jsx("p",{className:"text-stone-600 mb-6 max-w-md mx-auto",children:r("matching.searchMarketDesc",{defaultValue:"Search recent market data, auctions, and estate pipe sales to estimate current value"})}),i.jsx(ye,{onClick:d,disabled:s,className:"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800",children:s?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),r("matching.searchingMarkets")]}):i.jsxs(i.Fragment,{children:[i.jsx(fs,{className:"w-4 h-4 mr-2"}),r("matching.lookupCurrentValue")]})})]}),i.jsx(l0,{children:o&&i.jsxs(ms.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-semibold text-stone-800",children:r("matching.results")}),i.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>u(!c),children:r(c?"common.show":"common.hide")})]}),!c&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Ee,{className:"border-emerald-200 bg-gradient-to-br from-emerald-50 to-white overflow-hidden",children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(et,{className:"text-lg flex items-center gap-2",children:[i.jsx(Tu,{className:"w-5 h-5 text-emerald-600"}),r("matching.estimatedValue")]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Ge,{className:m[o.confidence],children:[o.confidence," ",r("matching.confidence")]}),o.value_trend&&i.jsxs("div",{className:"flex items-center gap-1 text-sm text-stone-600",children:[g[o.value_trend],i.jsx("span",{className:"capitalize",children:o.value_trend})]})]})]})}),i.jsxs(Oe,{children:[i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"text-4xl font-bold text-emerald-700 mb-2",children:ro(o.estimated_value_mid)}),i.jsxs("div",{className:"text-sm text-stone-500",children:[r("matching.range")," ",ro(o.estimated_value_low)," - ",ro(o.estimated_value_high)]})]}),i.jsx(ye,{onClick:f,className:"w-full mt-4 bg-emerald-600 hover:bg-emerald-700",children:r("matching.applyThisValue")})]})]}),i.jsxs(Ee,{className:"border-stone-200",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-lg",children:r("matching.marketFactors")})}),i.jsx(Oe,{children:i.jsx("ul",{className:"space-y-2",children:(x=o.market_factors)==null?void 0:x.map((v,y)=>i.jsxs("li",{className:"flex items-start gap-2 text-stone-600",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 mt-2 shrink-0"}),v]},y))})})]}),i.jsxs(Ee,{className:"border-stone-200",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-lg",children:r("matching.comparableSales")})}),i.jsx(Oe,{children:i.jsx("p",{className:"text-stone-600",children:o.comparable_sales})})]}),o.notes&&i.jsxs(Ee,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-white",children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs(et,{className:"text-lg flex items-center gap-2",children:[i.jsx(vn,{className:"w-5 h-5 text-blue-600"}),r("matching.importantNotes")]})}),i.jsx(Oe,{children:i.jsx("p",{className:"text-stone-600",children:o.notes})})]}),i.jsx("div",{className:"text-center",children:i.jsx(ye,{variant:"outline",onClick:()=>l(null),children:r("matching.searchAgain")})})]})]})})]})}function xye(){if(console&&console.warn){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];im(n[0])&&(n[0]=`react-i18next:: ${n[0]}`),console.warn(...n)}}const P6={};function ek(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];im(n[0])&&P6[n[0]]||(im(n[0])&&(P6[n[0]]=new Date),xye(...n))}const dG=(e,n)=>()=>{if(e.isInitialized)n();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),n()};e.on("initialized",r)}},A6=(e,n,r)=>{e.loadNamespaces(n,dG(e,r))},k6=(e,n,r,s)=>{im(r)&&(r=[r]),r.forEach(a=>{e.options.ns.indexOf(a)<0&&e.options.ns.push(a)}),e.loadLanguages(n,dG(e,s))},vye=function(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=n.languages[0],a=n.options?n.options.fallbackLng:!1,o=n.languages[n.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const l=(c,u)=>{const d=n.services.backendConnector.state[`${c}|${u}`];return d===-1||d===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!l(n.isLanguageChangingTo,e)?!1:!!(n.hasResourceBundle(s,e)||!n.services.backendConnector.backend||n.options.resources&&!n.options.partialBundledLanguages||l(s,e)&&(!a||l(o,e)))},yye=function(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!n.languages||!n.languages.length?(ek("i18n.languages were undefined or empty",n.languages),!0):n.options.ignoreJSONStructure!==void 0?n.hasLoadedNamespace(e,{lng:r.lng,precheck:(a,o)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!o(a.isLanguageChangingTo,e))return!1}}):vye(e,n,r)},im=e=>typeof e=="string",bye=e=>typeof e=="object"&&e!==null,wye=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,jye={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Nye=e=>jye[e],_ye=e=>e.replace(wye,Nye);let Sye={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:_ye};const Cye=()=>Sye;let Pye;const Aye=()=>Pye,kye=C.createContext();class Eye{constructor(){z8(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(n){n.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}}const Tye=(e,n)=>{const r=C.useRef();return C.useEffect(()=>{r.current=e},[e,n]),r.current},hG=(e,n,r,s)=>e.getFixedT(n,r,s),Oye=(e,n,r,s)=>C.useCallback(hG(e,n,r,s),[e,n,r,s]),Lye=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:r}=n,{i18n:s,defaultNS:a}=C.useContext(kye)||{},o=r||s||Aye();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new Eye),!o){ek("You will need to pass in an i18next instance by using initReactI18next");const A=(L,O)=>im(O)?O:bye(O)&&im(O.defaultValue)?O.defaultValue:Array.isArray(L)?L[L.length-1]:L,P=[A,{},!1];return P.t=A,P.i18n={},P.ready=!1,P}o.options.react&&o.options.react.wait!==void 0&&ek("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...Cye(),...o.options.react,...n},{useSuspense:c,keyPrefix:u}=l;let d=a||o.options&&o.options.defaultNS;d=im(d)?[d]:d||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(d);const f=(o.isInitialized||o.initializedStoreOnce)&&d.every(A=>yye(A,o,l)),m=Oye(o,n.lng||null,l.nsMode==="fallback"?d:d[0],u),g=()=>m,x=()=>hG(o,n.lng||null,l.nsMode==="fallback"?d:d[0],u),[v,y]=C.useState(g);let b=d.join();n.lng&&(b=`${n.lng}${b}`);const N=Tye(b),j=C.useRef(!0);C.useEffect(()=>{const{bindI18n:A,bindI18nStore:P}=l;j.current=!0,!f&&!c&&(n.lng?k6(o,n.lng,d,()=>{j.current&&y(x)}):A6(o,d,()=>{j.current&&y(x)})),f&&N&&N!==b&&j.current&&y(x);const L=()=>{j.current&&y(x)};return A&&o&&o.on(A,L),P&&o&&o.store.on(P,L),()=>{j.current=!1,A&&o&&A.split(" ").forEach(O=>o.off(O,L)),P&&o&&P.split(" ").forEach(O=>o.store.off(O,L))}},[o,b]),C.useEffect(()=>{j.current&&f&&y(g)},[o,u,f]);const S=[v,o,f];if(S.t=v,S.i18n=o,S.ready=f,f||!f&&!c)return S;throw new Promise(A=>{n.lng?k6(o,n.lng,d,()=>A()):A6(o,d,()=>A())})};function Rye(){const{t:e}=Lye();return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:e("tobacconist.identificationTitle","AI Pipe Identifier")}),i.jsx("p",{className:"opacity-70",children:e("tobacconist.identificationSubtitle","Upload photos to identify and add pipes instantly")}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{className:"btn",children:e("common.uploadPhotos","Upload Photos")}),i.jsx("button",{className:"btn",children:e("common.takePhoto","Take Photo")})]})]})}const Dye="https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/694956e18d119cc497192525/dd0287dd6_pipe_no_bg.png";function py({shape:e,className:n="w-16 h-16"}){return i.jsx("img",{src:Dye,alt:e||"Pipe",className:`object-contain ${n}`,style:{filter:"brightness(0) saturate(100%) invert(62%) sepia(16%) saturate(598%) hue-rotate(330deg) brightness(92%) contrast(88%)",opacity:.3},onError:r=>{r.target.style.display="none",r.target.parentElement.innerHTML="🪈"}})}function fG({pipe:e,onApplyRecommendation:n}){var x;const{t:r}=$t(),[s,a]=C.useState(!1),[o,l]=C.useState(null),[c,u]=C.useState(!1),f=n0().canUse("PAIRING_ADVANCED"),m=async()=>{u(!0);try{const{data:v}=await Ce.functions.invoke("getSpecializationRecommendation",{pipeId:e.id});v.success?(l(v.recommendation),a(!0)):Ve.error(r("errors.recommendationFailed"))}catch(v){console.error("Error getting recommendation:",v),Ve.error(r("errors.recommendationFailed"))}finally{u(!1)}},g=()=>{o!=null&&o.recommended_specializations&&(n({focus:o.recommended_specializations}),Ve.success(r("specializationRec.applied"),{description:r("specializationRec.appliedDesc")}),a(!1))};return f?i.jsxs(i.Fragment,{children:[i.jsxs(ye,{size:"sm",variant:"outline",onClick:m,disabled:c,className:"border-purple-300 text-purple-700 hover:bg-purple-50 w-full sm:w-auto",children:[i.jsx(Da,{className:"w-4 h-4 mr-1"}),i.jsx("span",{className:"truncate",children:r(c?"specializationRec.analyzing":"pipeDetailTabs.getAIRecommendation")})]}),i.jsx(fa,{open:s,onOpenChange:a,children:i.jsxs(ma,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(ho,{children:[i.jsxs(fo,{className:"flex items-center gap-2",children:[i.jsx(Vx,{className:"w-5 h-5 text-purple-600"}),r("specializationRec.specializationRecommendation")]}),i.jsxs(Vh,{children:[r("specializationRec.aiAnalysisFor")," ",e.name]})]}),o&&i.jsxs("div",{className:"space-y-4 mt-4",children:[i.jsx(Ee,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-white",children:i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[i.jsx(Nr,{className:"w-5 h-5 text-purple-600 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-purple-900",children:r("specializationRec.recommendedSpecializations")}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(x=o.recommended_specializations)==null?void 0:x.map((v,y)=>i.jsx(Ge,{className:"bg-purple-100 text-purple-800 border-purple-300",children:v},y))})]})]})})}),o.reasoning&&i.jsx(Ee,{children:i.jsxs(Oe,{className:"p-4",children:[i.jsxs("h3",{className:"font-semibold text-amber-700 mb-2 flex items-center gap-2",children:[i.jsx(See,{className:"w-4 h-4 text-amber-600"}),r("specializationRec.whyThisWorks")]}),i.jsx("p",{className:"text-sm text-stone-300 leading-relaxed",children:o.reasoning})]})}),o.collection_fit&&i.jsx(Ee,{children:i.jsxs(Oe,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-stone-300 mb-2",children:r("specializationRec.collectionFit")}),i.jsx("p",{className:"text-sm text-stone-400 leading-relaxed",children:o.collection_fit})]})}),o.specific_blends&&o.specific_blends.length>0&&i.jsx(Ee,{className:"border-emerald-200 bg-emerald-50/30",children:i.jsxs(Oe,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-emerald-900 mb-2",children:r("specializationRec.recommendedBlendsFromCollection")}),i.jsx("div",{className:"flex flex-wrap gap-2",children:o.specific_blends.map((v,y)=>i.jsx(Ge,{variant:"outline",className:"border-emerald-300 text-emerald-800",children:v},y))})]})}),o.considerations&&i.jsx(Ee,{className:"border-amber-700 bg-amber-950/40",children:i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(vn,{className:"w-4 h-4 text-amber-500 mt-0.5 shrink-0"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-amber-400 mb-1",children:r("specializationRec.importantConsiderations")}),i.jsx("p",{className:"text-sm text-amber-300 leading-relaxed",children:o.considerations})]})]})})}),o.alternative_uses&&i.jsx(Ee,{children:i.jsxs(Oe,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-stone-300 mb-2",children:r("specializationRec.alternativeUses")}),i.jsx("p",{className:"text-sm text-stone-400 leading-relaxed",children:o.alternative_uses})]})}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsxs(ye,{onClick:g,className:"flex-1 bg-purple-600 hover:bg-purple-700",children:[i.jsx(Nr,{className:"w-4 h-4 mr-2"}),r("specializationRec.applySpecializations")]}),i.jsx(ye,{variant:"outline",onClick:()=>a(!1),className:"flex-1",children:r("specializationRec.close")})]})]})]})})]}):i.jsx("div",{className:"w-full",children:i.jsx(Ac,{featureName:r("pipeDetailTabs.pipeSpecialization"),description:r("specializationRec.upgradeDesc")})})}function Iye({pipe:e,blends:n,onUpdate:r,isPaidUser:s}){const{t:a}=$t(),o=On(),[l,c]=C.useState(!1),[u,d]=C.useState(""),[f,m]=C.useState(e.focus||[]),[g,x]=C.useState(!1),v=["Aromatic","Non-Aromatic","English","Virginia","Virginia/Perique","Balkan","Latakia Blend","Burley"],y=()=>{if(u.trim()){const A=[...f,u.trim()];m(A),d(""),r({focus:A}),l1(o,e.created_by),Ve.success("Focus updated - AI recommendations will refresh",{description:"Regenerate pairings and optimizations to see updated scores"})}},b=A=>{const P=f.filter((L,O)=>O!==A);m(P),r({focus:P}),l1(o,e.created_by),Ve.success(a("pipeDetailTabs.focusUpdated"),{description:a("pipeDetailTabs.regenerateToSeeUpdates")})},N=f.some(A=>A.toLowerCase().includes("non-aromatic")||A.toLowerCase().includes("non aromatic")),j=f.some(A=>A.toLowerCase()==="aromatic"&&!A.toLowerCase().includes("non")),S=n.filter(A=>{var L;const P=((L=A.blend_type)==null?void 0:L.toLowerCase())==="aromatic";return N&&P||j&&!P?!1:f.some(O=>{var R,q;return((R=A.blend_type)==null?void 0:R.toLowerCase().includes(O.toLowerCase()))||O.toLowerCase().includes((q=A.blend_type)==null?void 0:q.toLowerCase())})});return s?!l&&(!f||f.length===0)?i.jsx(Ee,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-white",children:i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vx,{className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"text-sm text-stone-600",children:a("pipeDetailTabs.noSpecializationSet")})]}),i.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>c(!0),className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[i.jsx(Ra,{className:"w-4 h-4 mr-1"}),a("pipeDetailTabs.addSpecialization")]})]})})}):i.jsx(Ee,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-white",children:i.jsxs(Oe,{className:"p-4 space-y-3",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vx,{className:"w-5 h-5 text-blue-600"}),i.jsx("span",{className:"font-semibold text-blue-800",children:a("pipeDetailTabs.pipeSpecialization")})]}),i.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[i.jsx(fG,{pipe:e,onApplyRecommendation:A=>{m(A.focus),r(A),l1(o,e.created_by)}}),i.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>c(!l),className:"shrink-0 text-blue-900 hover:text-blue-950",children:a(l?"pipeDetailTabs.done":"common.edit")})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:f.map((A,P)=>i.jsxs(Ge,{className:"bg-blue-100 text-blue-800 border-blue-200 pr-1",children:[A,l&&i.jsx("button",{onClick:()=>b(P),className:"ml-1 hover:bg-blue-200 rounded-full p-0.5",children:i.jsx(zi,{className:"w-3 h-3"})})]},P))}),l&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{placeholder:a("pipeDetailTabs.addDesignationPlaceholder"),value:u,onChange:A=>d(A.target.value),onKeyPress:A=>A.key==="Enter"&&y(),className:"text-sm"}),i.jsx(ye,{size:"sm",onClick:y,className:"bg-blue-600 hover:bg-blue-700",children:i.jsx(Ra,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[i.jsx("p",{className:"text-xs text-stone-500 w-full mb-1",children:a("pipeDetailTabs.quickAdd")}),v.map(A=>i.jsx(Ge,{variant:"outline",className:"cursor-pointer hover:bg-blue-100 text-xs border-blue-200",onClick:()=>{d(A)},children:A},A))]})]}),S.length>0&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-medium text-blue-700 mb-2",children:a("pipeDetailTabs.matchingBlends")}),i.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[S.slice(0,5).map(A=>i.jsx("a",{href:xt(`TobaccoDetail?id=${encodeURIComponent(A.id)}`),children:i.jsx(Ge,{variant:"outline",className:"cursor-pointer hover:bg-blue-50 border-blue-200 text-blue-700",children:A.name})},A.id)),S.length>5&&i.jsxs(Ge,{variant:"outline",className:"border-blue-200 text-blue-600",children:["+",S.length-5," ",a("pipeDetailTabs.more")]})]})]})]})}):i.jsx(Ac,{featureName:a("pipeDetailTabs.pipeSpecialization"),description:a("pipeDetailTabs.specializationUpgradeDesc")})}function Ix({entityType:e,entityId:n,entityOwnerEmail:r}){const[s,a]=C.useState(!1),[o,l]=C.useState(""),[c,u]=C.useState(null),[d,f]=C.useState(""),m=On(),{data:g}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me()}),{data:x=[]}=Dt({queryKey:["comments",e,n],queryFn:()=>Ce.entities.Comment.filter({entity_type:e,entity_id:n,is_hidden:!1},"-created_date"),enabled:s}),v=rn({mutationFn:P=>Ce.entities.Comment.create(P),onSuccess:()=>{m.invalidateQueries({queryKey:["comments",e,n]}),l("")}}),y=rn({mutationFn:P=>Ce.entities.Comment.delete(P),onSuccess:()=>{m.invalidateQueries({queryKey:["comments",e,n]})}}),b=rn({mutationFn:P=>Ce.entities.AbuseReport.create(P),onSuccess:()=>{u(null),f(""),alert("Report submitted. Thank you for helping keep our community safe.")}}),N=()=>{o.trim()&&v.mutate({entity_type:e,entity_id:n,entity_owner_email:r,commenter_email:g==null?void 0:g.email,commenter_name:(g==null?void 0:g.full_name)||(g==null?void 0:g.email),content:o})},j=()=>{d.trim()&&b.mutate({comment_id:c,reporter_email:g==null?void 0:g.email,reason:d})},S=(g==null?void 0:g.email)===r,A=g&&g.email!==r;return i.jsxs("div",{children:[i.jsxs(ye,{variant:"ghost",size:"sm",onClick:()=>a(!s),className:"text-stone-600 hover:text-stone-800",children:[i.jsx(jx,{className:"w-4 h-4 mr-1"}),s?"Hide":"Show"," Comments (",x.length,")"]}),s&&i.jsxs("div",{className:"mt-4 space-y-4",children:[A&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ui,{placeholder:"Leave a comment...",value:o,onChange:P=>l(P.target.value),className:"min-h-[80px]"}),i.jsxs(ye,{size:"sm",onClick:N,disabled:v.isPending||!o.trim(),className:"bg-amber-700 hover:bg-amber-800",children:[i.jsx(I4,{className:"w-4 h-4 mr-2"}),"Post Comment"]})]}),i.jsxs("div",{className:"space-y-3",children:[x.map(P=>{var L;return i.jsxs("div",{className:"flex gap-3 p-3 bg-stone-50 rounded-lg",children:[i.jsx(_l,{className:"w-8 h-8",children:i.jsx(Sl,{className:"bg-amber-200 text-amber-800 text-xs",children:((L=P.commenter_name)==null?void 0:L[0])||"U"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm text-stone-800",children:P.commenter_name}),i.jsx("p",{className:"text-xs text-stone-500",children:new Date(P.created_date).toLocaleDateString()})]}),i.jsxs("div",{className:"flex gap-1",children:[g&&P.commenter_email!==g.email&&i.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>u(P.id),className:"h-7 px-2 text-stone-500 hover:text-rose-600",children:i.jsx(gq,{className:"w-3 h-3"})}),(S||P.commenter_email===(g==null?void 0:g.email))&&i.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>y.mutate(P.id),disabled:y.isPending,className:"h-7 px-2 text-stone-500 hover:text-rose-600",children:i.jsx(yc,{className:"w-3 h-3"})})]})]}),i.jsx("p",{className:"text-sm text-stone-700 mt-1",children:P.content})]})]},P.id)}),x.length===0&&i.jsx("p",{className:"text-sm text-stone-500 text-center py-4",children:"No comments yet. Be the first to comment!"})]})]}),i.jsx(Nm,{open:!!c,onOpenChange:()=>u(null),children:i.jsxs(kh,{children:[i.jsxs(Eh,{children:[i.jsx(Oh,{children:"Report Inappropriate Comment"}),i.jsx(Lh,{children:"Please describe why this comment violates community guidelines. Reports are reviewed by administrators."})]}),i.jsx(Ui,{placeholder:"Explain why this comment is inappropriate...",value:d,onChange:P=>f(P.target.value),className:"min-h-[100px]"}),i.jsxs(Th,{children:[i.jsx(Dh,{onClick:()=>u(null),children:"Cancel"}),i.jsx(Rh,{onClick:j,disabled:!d.trim()||b.isPending,className:"bg-rose-600 hover:bg-rose-700",children:"Submit Report"})]})]})})]})}function A3({imageUrl:e,isOpen:n,onClose:r,alt:s="Image"}){return i.jsx(fa,{open:n,onOpenChange:r,children:i.jsxs(ma,{className:"max-w-7xl w-full p-0 bg-black/95 border-none",children:[i.jsx(ye,{variant:"ghost",size:"icon",onClick:r,className:"absolute top-4 right-4 z-50 text-white hover:bg-white/20 rounded-full",children:i.jsx(zi,{className:"w-6 h-6"})}),i.jsx("div",{className:"flex items-center justify-center p-4 min-h-[300px] max-h-[90vh]",children:i.jsx("img",{src:e,alt:s,className:"max-w-full max-h-[85vh] object-contain"})})]})})}const tk={card:"rounded-2xl border border-white/10 bg-[#223447] text-[#F5F1E7] shadow-sm",h2:"text-lg md:text-xl font-semibold text-[#F5F1E7]",sub:"text-sm text-[#E0D8C8]/70"};function gy({className:e,children:n,...r}){return i.jsx("div",{className:ut(tk.card,e),...r,children:n})}function Mye({title:e,subtitle:n,right:r,className:s,...a}){return i.jsxs("div",{className:ut("flex items-start justify-between gap-4",s),...a,children:[i.jsxs("div",{className:"min-w-0",children:[e?i.jsx("div",{className:tk.h2,children:e}):null,n?i.jsx("div",{className:tk.sub,children:n}):null]}),r?i.jsx("div",{className:"shrink-0",children:r}):null]})}function Fye({pipe:e,blends:n}){var O;if(cs)return null;const{t:r}=$t(),[s,a]=C.useState(!1),[o,l]=C.useState(e.break_in_schedule||[]),[c,u]=C.useState(!0),[d,f]=C.useState(!1),m=On(),{data:g}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me()}),{data:x}=Dt({queryKey:["user-profile",g==null?void 0:g.email],queryFn:async()=>(await Ce.entities.UserProfile.filter({user_email:g==null?void 0:g.email}))[0],enabled:!!(g!=null&&g.email)});C.useEffect(()=>{l(Array.isArray(e.break_in_schedule)?e.break_in_schedule:[])},[e.id,e.break_in_schedule]);const v=ve.useMemo(()=>uG({pipes:[e],blends:n,profile:x}),[e,n,x]);ve.useMemo(()=>{var R;return!!((R=e==null?void 0:e.break_in_schedule)!=null&&R.length)&&(!e.break_in_schedule_input_fingerprint||e.break_in_schedule_input_fingerprint!==v)},[e,v]);const y=rn({mutationFn:R=>xr("Pipe",e.id,R,g==null?void 0:g.email),onSuccess:()=>{jg(m,g==null?void 0:g.email)}}),b=async()=>{a(!0);try{const R=await dye({pipe:e,blends:n,profile:x});if(R!=null&&R.schedule){const q=Y=>(Y||"").trim().toLowerCase(),U=Y=>{if(!Y)return null;const Z=n.find(re=>q(re.name)===q(Y));return Z||n.find(re=>q(re.name).includes(q(Y))||q(Y).includes(q(re.name)))||null},D=R.schedule.map(Y=>{const Z=U(Y.blend_name);return{...Y,blend_id:(Z==null?void 0:Z.id)||Y.blend_id||"",blend_name:(Z==null?void 0:Z.name)||Y.blend_name,bowls_completed:0}});l(D);const M=Array.isArray(e.break_in_schedule_history)?e.break_in_schedule_history:[],G=[{at:new Date().toISOString(),schedule:Array.isArray(e.break_in_schedule)?e.break_in_schedule:[],reason:"User regenerated schedule"},...M].slice(0,3);await y.mutateAsync({break_in_schedule:D,break_in_schedule_history:G,break_in_schedule_input_fingerprint:v}),f(!1)}}catch(R){console.error("Error generating schedule:",R)}finally{a(!1)}},N=async(R,q)=>{const U=[...o];U[R].bowls_completed=Math.max(0,parseInt(q)||0),l(U),await y.mutateAsync({break_in_schedule:U})},j=async R=>{await Ce.entities.SmokingLog.create({pipe_id:e.id,pipe_name:e.name,blend_id:R.blend_id,blend_name:R.blend_name,bowls_smoked:1,is_break_in:!0,date:new Date().toISOString()});const q=o.findIndex(U=>U.blend_id===R.blend_id);q>=0&&await N(q,(o[q].bowls_completed||0)+1),m.invalidateQueries({queryKey:["smoking-logs"]})},S=rn({mutationFn:async()=>{const R=Array.isArray(e.break_in_schedule_history)?e.break_in_schedule_history:[],q=R[0];if(q!=null&&q.schedule)return await xr("Pipe",e.id,{break_in_schedule:q.schedule,break_in_schedule_history:R.slice(1),break_in_schedule_input_fingerprint:null},g==null?void 0:g.email)},onSuccess:()=>{jg(m,g==null?void 0:g.email),f(!1)}}),A=o.reduce((R,q)=>R+q.suggested_bowls,0),P=o.reduce((R,q)=>R+(q.bowls_completed||0),0),L=A>0?Math.round(P/A*100):0;return i.jsxs(Zz,{feature:"BREAK_IN_SCHEDULE",featureName:"Break-In Schedules",description:"Get AI-generated break-in schedules tailored to your pipe's characteristics with Pro or legacy Premium access. Track your progress with recommended tobacco blends and bowl counts for optimal pipe conditioning.",children:[i.jsx(fa,{open:d,onOpenChange:f,children:i.jsxs(ma,{children:[i.jsxs(ho,{children:[i.jsxs(fo,{className:"flex items-center gap-2",children:[i.jsx(Ou,{className:"w-5 h-5 text-amber-600"}),r("breakInSchedule.outOfDate")]}),i.jsx(Vh,{children:r("breakInSchedule.outOfDateDesc")})]}),i.jsxs(y3,{children:[i.jsx(ye,{variant:"outline",onClick:()=>{f(!1),setDismissedFingerprint(v)},children:r("breakInSchedule.notNow")}),((O=e==null?void 0:e.break_in_schedule_history)==null?void 0:O[0])&&i.jsxs(ye,{variant:"outline",onClick:()=>S.mutate(),disabled:S.isPending,children:[i.jsx(wte,{className:"w-4 h-4 mr-2"}),r("breakInSchedule.undoLast")]}),i.jsx(ye,{onClick:()=>{f(!1),b()},disabled:s,className:"bg-amber-700 hover:bg-amber-800",children:s?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),r("breakInSchedule.regenerating")]}):r("optimizer.regenerate")})]})]})}),i.jsxs(gy,{children:[i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx(Mye,{title:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Da,{className:"w-5 h-5"}),r("breakInSchedule.breakInSchedule")]})}),o.length>0&&i.jsxs("p",{className:"text-sm text-[#E0D8C8]/60 mt-1",children:[P," / ",A," ",r("breakInSchedule.bowlsCompleted")," (",L,"%)"]})]}),o.length===0?i.jsx(ye,{onClick:b,disabled:s||n.length===0,className:"bg-[#A35C5C] hover:bg-[#8B4A4A]",children:s?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),r("breakInSchedule.generating")]}):i.jsxs(i.Fragment,{children:[i.jsx(Da,{className:"w-4 h-4 mr-2"}),r("breakInSchedule.generateSchedule")]})}):i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ye,{variant:"outline",size:"sm",onClick:()=>u(!c),className:"bg-[#223447]/5 text-[#E0D8C8] border border-white/10 hover:bg-[#223447]/10",children:r(c?"breakInSchedule.show":"breakInSchedule.hide")}),i.jsx(ye,{size:"sm",onClick:b,disabled:s,className:"bg-[#A35C5C] text-[#FFF7ED] hover:bg-[#8B4A4A]",children:r("optimizer.regenerate")})]})]})}),o.length>0&&!c&&i.jsxs("div",{className:"px-6 pb-6",children:[L<100&&i.jsx("div",{className:"mb-4 bg-[#223447]/10 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:"bg-[#A35C5C] h-full transition-all duration-500",style:{width:`${L}%`}})}),i.jsx("div",{className:"space-y-3",children:o.map((R,q)=>{const U=R.bowls_completed>=R.suggested_bowls;return i.jsx("div",{className:`p-4 rounded-lg border transition-all ${U?"bg-green-500/15 border-green-500/30":"bg-[#223447]/5 border-white/10"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("p",{className:"font-semibold text-[#E0D8C8]",children:R.blend_name}),U&&i.jsxs(Ge,{className:"bg-green-600/80 text-white",children:[i.jsx(vh,{className:"w-3 h-3 mr-1"}),r("breakInSchedule.complete")]})]}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70 mb-2",children:R.reasoning}),i.jsxs("p",{className:"text-xs text-[#E0D8C8]/50",children:[r("breakInSchedule.suggested")," ",R.suggested_bowls," ",r("breakInSchedule.bowls")]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(at,{type:"number",min:"0",value:R.bowls_completed||0,onChange:D=>N(q,D.target.value),className:"w-16 h-9 text-center"}),i.jsxs("span",{className:"text-sm text-[#E0D8C8]/60",children:["/ ",R.suggested_bowls]})]}),i.jsx(ye,{size:"sm",variant:"outline",onClick:()=>j(R),className:"shrink-0",children:i.jsx(Ra,{className:"w-4 h-4"})})]})]})},q)})})]}),n.length===0&&i.jsx("div",{className:"px-6 pb-6",children:i.jsx("p",{className:"text-sm text-[#E0D8C8]/60 text-center py-4",children:r("breakInSchedule.addBlendPrompt")})})]})]})}function Bye({pipe:e,onUpdate:n}){const[r,s]=C.useState(!1),a=e.length_mm||e.weight_grams||e.bowl_diameter_mm||e.bowl_depth_mm,o=async()=>{s(!0);try{const l=`You are analyzing a pipe to calculate missing measurements and geometry details.

Pipe Information:
- Maker: ${e.maker||"Unknown"}
- Name: ${e.name||"Unknown"}
- Shape: ${e.shape||"Unknown"}
- Bowl Style: ${e.bowlStyle||"Unknown"}
- Shank Shape: ${e.shankShape||"Unknown"}
- Bend: ${e.bend||"Unknown"}
- Size Class: ${e.sizeClass||"Unknown"}
- Existing measurements:
  ${e.length_mm?`Length: ${e.length_mm}mm`:""}
  ${e.weight_grams?`Weight: ${e.weight_grams}g`:""}
  ${e.bowl_height_mm?`Bowl Height: ${e.bowl_height_mm}mm`:""}
  ${e.bowl_width_mm?`Bowl Width: ${e.bowl_width_mm}mm`:""}
  ${e.bowl_diameter_mm?`Chamber Diameter: ${e.bowl_diameter_mm}mm`:""}
  ${e.bowl_depth_mm?`Chamber Depth: ${e.bowl_depth_mm}mm`:""}
  ${e.chamber_volume?`Chamber Volume: ${e.chamber_volume}`:""}

CRITICAL RULES:
1. ONLY provide measurements if you find VERIFIED manufacturer or retailer specifications
2. Search for exact specifications from official sources (manufacturer catalogs, authorized retailers)
3. DO NOT estimate, guess, or calculate based on similar pipes
4. If no verified data exists, return null for that measurement
5. Only include measurements AND geometry fields that are explicitly missing or marked as "Unknown"
6. For geometry fields (shape, bowlStyle, shankShape, bend, sizeClass), provide classification if identifiable from verified sources

Return JSON with ONLY the missing measurements and geometry details you found verified data for. Include dimensions_found=true and dimensions_source if you found any verified measurements.`,c=await Ce.integrations.Core.InvokeLLM({prompt:l,add_context_from_internet:!0,response_json_schema:{type:"object",properties:{length_mm:{type:["number","null"]},weight_grams:{type:["number","null"]},bowl_height_mm:{type:["number","null"]},bowl_width_mm:{type:["number","null"]},bowl_diameter_mm:{type:["number","null"]},bowl_depth_mm:{type:["number","null"]},chamber_volume:{type:["string","null"],enum:["Small","Medium","Large","Extra Large",null]},shape:{type:["string","null"]},bowlStyle:{type:["string","null"]},shankShape:{type:["string","null"]},bend:{type:["string","null"]},sizeClass:{type:["string","null"]},dimensions_found:{type:"boolean"},dimensions_source:{type:["string","null"]},notes:{type:["string","null"]}}}}),u={};let d=!1;Object.keys(c).forEach(g=>{c[g]!==null&&c[g]!==void 0&&!e[g]&&(u[g]=c[g],g!=="dimensions_found"&&g!=="dimensions_source"&&g!=="notes"&&(d=!0))});const f=u.bowl_diameter_mm||e.bowl_diameter_mm,m=u.bowl_depth_mm||e.bowl_depth_mm;if(f&&m&&!u.chamber_volume&&!e.chamber_volume){const g=f/2,x=Math.PI*Math.pow(g/10,2)*(m/10);x<1.5?u.chamber_volume="Small":x<2.5?u.chamber_volume="Medium":x<3.5?u.chamber_volume="Large":u.chamber_volume="Extra Large"}d?(await n(u),Ve.success(`Found ${Object.keys(u).filter(g=>g!=="dimensions_found"&&g!=="dimensions_source"&&g!=="notes").length} verified measurements`)):Ve.info("No verified measurements found for this pipe")}catch(l){console.error("Measurement calculation error:",l),Ve.error("Failed to calculate measurements")}finally{s(!1)}};return i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(y1,{className:"w-5 h-5 text-stone-400 mt-1"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-medium text-stone-800 mb-1",children:"Calculate Missing Measurements"}),i.jsxs("p",{className:"text-sm text-stone-600 mb-3",children:["AI will search for verified manufacturer specifications to fill in missing dimensions.",a&&" Only missing measurements will be added."]}),i.jsx(ye,{size:"sm",onClick:o,disabled:r,className:"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800",children:r?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),"Searching..."]}):i.jsxs(i.Fragment,{children:[i.jsx(y1,{className:"w-4 h-4 mr-2"}),"Find Measurements"]})})]})]})})}function $ye({pipe:e,onUpdate:n}){const{t:r}=$t(),s=e.condition_tracking||{overall_condition:e.condition||"Good",cake_level:50,stem_oxidation:0,wear_level:20,last_cleaned:null,last_maintenance:null},a=(d,f)=>{n({condition_tracking:{...s,[d]:f}})},o=()=>s.cake_level<30?{label:r("conditionTracker.thin"),color:"text-yellow-600",icon:vn}:s.cake_level>70?{label:r("conditionTracker.thick"),color:"text-orange-600",icon:vn}:{label:r("conditionTracker.good"),color:"text-green-600",icon:ei},l=()=>s.stem_oxidation>60?{label:r("conditionTracker.heavyOxidation"),color:"text-red-600",icon:vn}:s.stem_oxidation>30?{label:r("conditionTracker.moderateOxidation"),color:"text-yellow-600",icon:vn}:{label:r("conditionTracker.good"),color:"text-green-600",icon:ei},c=o(),u=l();return i.jsxs(Ee,{children:[i.jsx(Ze,{children:i.jsxs(et,{className:"flex items-center gap-2",children:[i.jsx(Gw,{className:"w-5 h-5"}),r("conditionTracker.conditionTracking")]})}),i.jsxs(Oe,{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(tt,{children:r("conditionTracker.overallCondition")}),i.jsxs(pn,{value:s.overall_condition,onValueChange:d=>a("overall_condition",d),children:[i.jsx(hn,{children:i.jsx(gn,{})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"Mint",children:"Mint"}),i.jsx(ot,{value:"Excellent",children:"Excellent"}),i.jsx(ot,{value:"Very Good",children:"Very Good"}),i.jsx(ot,{value:"Good",children:"Good"}),i.jsx(ot,{value:"Fair",children:"Fair"}),i.jsx(ot,{value:"Poor",children:"Poor"}),i.jsx(ot,{value:"Estate - Unrestored",children:"Estate - Unrestored"})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(tt,{children:r("conditionTracker.cakeLevel")}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(c.icon,{className:`w-4 h-4 ${c.color}`}),i.jsx(Ge,{variant:"outline",className:c.color,children:c.label})]})]}),i.jsx(Jp,{value:[s.cake_level],onValueChange:([d])=>a("cake_level",d),max:100,step:5,className:"mb-2"}),i.jsxs("p",{className:"text-xs text-stone-500",children:[s.cake_level,"% - ",r("conditionTracker.optimalRange")]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(tt,{children:r("conditionTracker.stemOxidation")}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(u.icon,{className:`w-4 h-4 ${u.color}`}),i.jsx(Ge,{variant:"outline",className:u.color,children:u.label})]})]}),i.jsx(Jp,{value:[s.stem_oxidation],onValueChange:([d])=>a("stem_oxidation",d),max:100,step:5,className:"mb-2"}),i.jsxs("p",{className:"text-xs text-stone-500",children:[s.stem_oxidation,"% ",r("conditionTracker.oxidation")]})]}),i.jsxs("div",{children:[i.jsx(tt,{className:"mb-2 block",children:r("conditionTracker.generalWear")}),i.jsx(Jp,{value:[s.wear_level],onValueChange:([d])=>a("wear_level",d),max:100,step:5,className:"mb-2"}),i.jsxs("p",{className:"text-xs text-stone-500",children:[s.wear_level,"% ",r("conditionTracker.wear")," - ",s.wear_level<20?r("conditionTracker.minimalWear"):s.wear_level<50?r("conditionTracker.lightWear"):s.wear_level<75?r("conditionTracker.moderateWear"):r("conditionTracker.heavyWear")]})]})]})]})}function qye({pipeId:e,pipeName:n}){const{t:r}=$t(),[s,a]=C.useState(!1),[o,l]=C.useState({maintenance_type:"cleaning",date:new Date().toISOString().split("T")[0],description:"",cost:"",performed_by:"Self"}),c=On(),{data:u=[]}=Dt({queryKey:["maintenance-logs",e],queryFn:()=>Ce.entities.PipeMaintenanceLog.filter({pipe_id:e},"-date")}),d=rn({mutationFn:async x=>{await Ce.entities.PipeMaintenanceLog.create({...x,pipe_id:e,pipe_name:n})},onSuccess:()=>{c.invalidateQueries({queryKey:["maintenance-logs",e]}),c.invalidateQueries({queryKey:["pipe",e]}),a(!1),l({maintenance_type:"cleaning",date:new Date().toISOString().split("T")[0],description:"",cost:"",performed_by:"Self"}),Ve.success(r("maintenanceLog.logAdded"))},onError:()=>Ve.error(r("maintenanceLog.logAddFailed"))}),f=rn({mutationFn:async x=>{await Ce.entities.PipeMaintenanceLog.delete(x)},onSuccess:()=>{c.invalidateQueries({queryKey:["maintenance-logs",e]}),Ve.success(r("maintenanceLog.logDeleted"))},onError:()=>Ve.error(r("maintenanceLog.logDeleteFailed"))}),m=x=>{x.preventDefault();const v={...o,cost:o.cost?parseFloat(o.cost):null};d.mutate(v)},g={cleaning:r("maintenanceLog.cleaning"),restoration:r("maintenanceLog.restoration"),repair:r("maintenanceLog.repair"),reaming:r("maintenanceLog.reaming"),polishing:r("maintenanceLog.polishing"),stem_work:r("maintenanceLog.stemWork"),other:r("maintenanceLog.other")};return i.jsxs(Ee,{children:[i.jsx(Ze,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(et,{className:"flex items-center gap-2",children:[i.jsx(Yv,{className:"w-5 h-5"}),r("maintenanceLog.maintenanceLog")]}),i.jsxs(ye,{onClick:()=>a(!0),size:"sm",children:[i.jsx(Ra,{className:"w-4 h-4 mr-1"}),r("maintenanceLog.addEntry")]})]})}),i.jsx(Oe,{children:u.length===0?i.jsx("p",{className:"text-center text-stone-500 py-8",children:r("maintenanceLog.noRecordsYet")}):i.jsx("div",{className:"space-y-3",children:u.map(x=>i.jsxs("div",{className:"border border-stone-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"font-medium",children:g[x.maintenance_type]}),i.jsx("span",{className:"text-xs text-stone-500",children:new Date(x.date).toLocaleDateString()})]}),x.description&&i.jsx("p",{className:"text-sm text-stone-600",children:x.description})]}),i.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>f.mutate(x.id),children:i.jsx(yc,{className:"w-4 h-4 text-red-500"})})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-stone-500",children:[x.performed_by&&i.jsxs("span",{children:[r("maintenanceLog.by")," ",x.performed_by]}),x.cost&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Tu,{className:"w-3 h-3"}),x.cost.toFixed(2)]})]})]},x.id))})}),i.jsx(fa,{open:s,onOpenChange:a,children:i.jsxs(ma,{children:[i.jsx(ho,{children:i.jsx(fo,{children:r("maintenanceLog.addMaintenanceEntry")})}),i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(tt,{children:r("maintenanceLog.type")}),i.jsxs(pn,{value:o.maintenance_type,onValueChange:x=>l({...o,maintenance_type:x}),children:[i.jsx(hn,{children:i.jsx(gn,{})}),i.jsx(fn,{children:Object.entries(g).map(([x,v])=>i.jsx(ot,{value:x,children:v},x))})]})]}),i.jsxs("div",{children:[i.jsx(tt,{children:r("maintenanceLog.date")}),i.jsx(at,{type:"date",value:o.date,onChange:x=>l({...o,date:x.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(tt,{children:r("maintenanceLog.description")}),i.jsx(Ui,{value:o.description,onChange:x=>l({...o,description:x.target.value}),placeholder:r("maintenanceLog.descriptionPlaceholder"),rows:3})]}),i.jsxs("div",{children:[i.jsx(tt,{children:r("maintenanceLog.performedBy")}),i.jsx(at,{value:o.performed_by,onChange:x=>l({...o,performed_by:x.target.value}),placeholder:r("maintenanceLog.performedByPlaceholder")})]}),i.jsxs("div",{children:[i.jsx(tt,{children:r("maintenanceLog.costOptional")}),i.jsx(at,{type:"number",step:"0.01",value:o.cost,onChange:x=>l({...o,cost:x.target.value}),placeholder:"0.00"})]}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx(ye,{type:"button",variant:"outline",onClick:()=>a(!1),children:r("forms.cancel")}),i.jsx(ye,{type:"submit",children:r("maintenanceLog.saveEntry")})]})]})]})})]})}function mG(){var X;const{t:e}=$t();co();const r=(X=new URLSearchParams(window.location.search).get("id"))==null?void 0:X.trim(),[s,a]=C.useState(!1),[o,l]=C.useState(!1),[c,u]=C.useState(0),[d,f]=C.useState(null),m=On(),{useImperial:g,setUseImperial:x}=eK(),{user:v,hasPaid:y,isLoading:b,error:N}=Kr(),{data:j,isLoading:S,error:A}=Dt({queryKey:["pipe",r,v==null?void 0:v.email],enabled:!!r&&!!(v!=null&&v.email)&&!b,retry:!1,queryFn:async()=>{if(!r)throw new Error("Missing pipe ID");const z=/^\d+$/.test(r)?Number(r):null;try{const te=await Ce.entities.Pipe.get(r);if(te)return te}catch(te){console.warn("Pipe.get(string) failed",{pipeId:r,message:te==null?void 0:te.message,status:te==null?void 0:te.status,response:te==null?void 0:te.response,e:te})}if(z!==null)try{const te=await Ce.entities.Pipe.get(z);if(te)return te}catch(te){console.warn("Pipe.get(number) failed",{numericId:z,message:te==null?void 0:te.message,status:te==null?void 0:te.status,response:te==null?void 0:te.response,e:te})}try{const te=await Ce.entities.Pipe.filter({id:r,created_by:v.email});if(Array.isArray(te)&&te.length)return te[0]}catch(te){console.warn("Pipe.filter({id: string}) failed",{pipeId:r,message:te==null?void 0:te.message,status:te==null?void 0:te.status,response:te==null?void 0:te.response,e:te})}if(z!==null)try{const te=await Ce.entities.Pipe.filter({id:z,created_by:v.email});if(Array.isArray(te)&&te.length)return te[0]}catch(te){console.warn("Pipe.filter({id: number}) failed",{numericId:z,message:te==null?void 0:te.message,status:te==null?void 0:te.status,response:te==null?void 0:te.response,e:te})}throw new Error("Pipe not found")}}),P=b||S,L=N||A,{data:O=[]}=Dt({queryKey:["blends",v==null?void 0:v.email],queryFn:async()=>{try{const re=await Ce.entities.TobaccoBlend.filter({created_by:v==null?void 0:v.email});return Array.isArray(re)?re:[]}catch(re){return console.error("Blends load error:",re),[]}},enabled:!!(v!=null&&v.email),retry:2,staleTime:1e4}),{data:R}=Dt({queryKey:["user-profile",v==null?void 0:v.email],queryFn:async()=>(await Ce.entities.UserProfile.filter({user_email:v==null?void 0:v.email}))[0],enabled:!!(v!=null&&v.email)}),q=y,U=rn({mutationFn:re=>xr("Pipe",r,re,v==null?void 0:v.email),onSuccess:()=>{jg(m,v==null?void 0:v.email),a(!1)}}),D=rn({mutationFn:()=>Ce.entities.Pipe.delete(r),onSuccess:()=>{jg(m,v==null?void 0:v.email),window.location.href=xt("Pipes")}}),M=()=>{if(!j)return;const re=!j.is_favorite;m.setQueryData(["pipe",r,v==null?void 0:v.email],z=>({...z||{},is_favorite:re})),U.mutate({is_favorite:re})},G=re=>{U.mutate({estimated_value:re})},Y=re=>{if(!j)return;const{id:z,created_date:te,updated_date:le,...Q}=j;U.mutate({...Q,...re,created_by:j.created_by||(v==null?void 0:v.email)})};if(P)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42] p-8",children:i.jsx("div",{className:"max-w-6xl mx-auto",children:i.jsxs("div",{className:"animate-pulse space-y-6",children:[i.jsx("div",{className:"h-8 w-48 bg-stone-200 rounded"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{className:"aspect-square bg-stone-200 rounded-2xl"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"h-10 w-64 bg-stone-200 rounded"}),i.jsx("div",{className:"h-6 w-48 bg-stone-200 rounded"})]})]})]})})});if(!j||L)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42] flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("img",{src:"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/694956e18d119cc497192525/021ed482a_smoking-pipe-silhouette-vintage-accessories-icon-sign-and-symbol-tobacco-pipe-illustration-vector.jpg",alt:e("pipesExtended.pipeNotFound"),className:"w-24 h-24 mx-auto mb-4 object-contain opacity-50",style:{filter:"brightness(0) saturate(100%) invert(91%) sepia(13%) saturate(485%) hue-rotate(330deg) brightness(100%) contrast(91%)"}}),i.jsx("h2",{className:"text-2xl font-semibold text-[#e8d5b7] mb-2",children:e("pipesExtended.pipeNotFound")}),i.jsx("a",{href:xt("Pipes"),children:i.jsx(ye,{variant:"outline",className:"border-[#e8d5b7]/30 text-[#e8d5b7]",children:e("pipesExtended.backToPipes")})})]})});const Z=j?[...j.photos||[],...j.stamping_photos||[]]:[];return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42]",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx("a",{href:xt("Pipes"),children:i.jsxs(ye,{variant:"ghost",className:"mb-6 text-[#e8d5b7] hover:text-[#e8d5b7]/80",children:[i.jsx($i,{className:"w-4 h-4 mr-2"}),e("pipesExtended.backToPipes")]})}),O.length>0&&(!j.focus||j.focus.length===0)&&i.jsxs(Ee,{className:"mb-6 border-[#A35C5C]/50",variant:"elevated",children:[i.jsx(Ze,{children:i.jsxs(et,{className:"flex items-center gap-2 text-[#E0D8C8]",children:[i.jsx(Da,{className:"w-5 h-5"}),e("pipeDetailTabs.aiSpecializationSuggestion","AI Specialization Suggestion")]})}),i.jsxs(Oe,{children:[i.jsx("p",{className:"text-sm text-[#E0D8C8]/70 mb-4",children:e("pipeDetailTabs.aiSpecializationDesc","Get personalized recommendations on what tobacco types this pipe would be best suited for based on its characteristics and your collection.")}),i.jsx(fG,{pipe:j,onApplyRecommendation:re=>U.mutate(re)})]})]}),O.length>0&&i.jsx(Ee,{className:"mb-6",children:i.jsx(Oe,{className:"p-6",children:i.jsxs(Ec,{defaultValue:"specialization",children:[i.jsxs(Tc,{className:"grid grid-cols-4 w-full mb-6",children:[i.jsxs(En,{value:"specialization",className:"flex items-center gap-1.5",children:[i.jsx(Vx,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:e("pipeDetailTabs.specialization")}),i.jsx("span",{className:"sm:hidden",children:e("pipeDetailTabs.focus")})]}),i.jsxs(En,{value:"condition",className:"flex items-center gap-1.5",children:[i.jsx(Gb,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:e("pipeDetailTabs.condition")}),i.jsx("span",{className:"sm:hidden",children:e("pipeDetailTabs.status")})]}),i.jsxs(En,{value:"maintenance",className:"flex items-center gap-1.5",children:[i.jsx(Yv,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:e("pipeDetailTabs.maintenance")}),i.jsx("span",{className:"sm:hidden",children:e("pipeDetailTabs.care")})]}),i.jsxs(En,{value:"breakin",className:"flex items-center gap-1.5",children:[i.jsx(hee,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:e("pipeDetailTabs.breakIn")}),i.jsx("span",{className:"sm:hidden",children:e("common.hide").slice(0,5)})]})]}),i.jsx(Tn,{value:"specialization",className:"mt-0",children:i.jsx(Iye,{pipe:j,blends:O,onUpdate:re=>U.mutate(re),isPaidUser:q})}),i.jsx(Tn,{value:"condition",className:"mt-0",children:i.jsx($ye,{pipe:j,onUpdate:re=>U.mutate(re)})}),i.jsx(Tn,{value:"maintenance",className:"mt-0",children:i.jsx(qye,{pipeId:r,pipeName:j.name})}),i.jsx(Tn,{value:"breakin",className:"mt-0",children:i.jsx(Fye,{pipe:j,blends:O})})]})})}),j.interchangeable_bowls&&j.interchangeable_bowls.length>0&&i.jsx("div",{className:"mb-6",children:i.jsx(QK,{pipe:j,onUpdate:re=>U.mutate(re)})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx(ms.div,{className:"aspect-[16/9] rounded-2xl overflow-hidden bg-gradient-to-br from-stone-100 to-stone-200 shadow-xl cursor-pointer",layoutId:`pipe-${j.id}`,onClick:()=>Z.length>0&&f(Z[c]),children:Z.length>0?i.jsx("img",{src:Z[c],alt:j.name,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-stone-400 text-center",children:[i.jsx(py,{shape:j.shape,className:"text-9xl mb-4"}),i.jsx("p",{children:j.shape||e("pipesExtended.noPhoto")})]})})}),Z.length>1&&i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:Z.map((re,z)=>i.jsx("button",{onClick:()=>u(z),className:`w-20 h-12 rounded-lg overflow-hidden shrink-0 transition-all ${c===z?"ring-2 ring-amber-600 ring-offset-2":"opacity-70 hover:opacity-100"}`,children:i.jsx("img",{src:re,alt:"",className:"w-full h-full object-cover"})},z))})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-[#e8d5b7]",children:j.name}),i.jsx("p",{className:"text-lg text-[#e8d5b7]/70",children:j.maker||e("pipesExtended.unknownMaker")})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ye,{variant:"outline",size:"icon",onClick:M,className:j.is_favorite?"text-rose-500":"text-stone-400",children:i.jsx(Tm,{className:`w-5 h-5 ${j.is_favorite?"fill-current":""}`})}),i.jsx(ye,{variant:"outline",size:"icon",onClick:()=>a(!0),children:i.jsx(dm,{className:"w-5 h-5"})}),i.jsx(ye,{variant:"outline",size:"icon",className:"text-rose-500 hover:text-rose-600",onClick:()=>l(!0),children:i.jsx(yc,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[j.estimated_value&&i.jsx(Ee,{className:"border-emerald-500/30 bg-emerald-500/15",children:i.jsxs(Oe,{className:"p-4 flex items-center gap-3",children:[i.jsx(Tu,{className:"w-5 h-5 text-emerald-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/70",children:e("pipesExtended.estValue")}),i.jsx("p",{className:"font-semibold text-emerald-200",children:ro(+j.estimated_value)})]})]})}),j.purchase_price&&i.jsx(Ee,{className:"border-amber-500/30 bg-amber-500/15",children:i.jsxs(Oe,{className:"p-4 flex items-center gap-3",children:[i.jsx(Tu,{className:"w-5 h-5 text-amber-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/70",children:e("pipesExtended.paid")}),i.jsx("p",{className:"font-semibold text-amber-200",children:ro(+j.purchase_price)})]})]})})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[j.shape&&j.shape!=="Unknown"&&i.jsx(Ge,{className:"bg-amber-700 text-amber-100 border-amber-600/50",children:j.shape}),j.bowlStyle&&j.bowlStyle!=="Unknown"&&i.jsx(Ge,{className:"bg-purple-700 text-purple-100 border-purple-600/50",children:j.bowlStyle}),j.shankShape&&j.shankShape!=="Unknown"&&i.jsxs(Ge,{className:"bg-teal-700 text-teal-100 border-teal-600/50",children:[e("pipesExtended.shank")," ",j.shankShape]}),j.bend&&j.bend!=="Unknown"&&i.jsx(Ge,{className:"bg-indigo-700 text-indigo-100 border-indigo-600/50",children:j.bend}),j.sizeClass&&j.sizeClass!=="Unknown"&&j.sizeClass!=="Standard"&&i.jsx(Ge,{className:"bg-orange-700 text-orange-100 border-orange-600/50",children:j.sizeClass}),j.bowl_material&&i.jsx(Ge,{className:"bg-slate-700 text-slate-100 border-slate-600/50",children:j.bowl_material}),j.chamber_volume&&i.jsxs(Ge,{className:"bg-amber-700 text-amber-100 border-amber-600/50",children:[e(`sizes.${j.chamber_volume}`,j.chamber_volume)," ",e("pipesExtended.chamber")]}),j.condition&&i.jsx(Ge,{className:"bg-blue-700 text-blue-100 border-blue-600/50",children:j.condition})]}),i.jsx(Ee,{className:"border-white/10",children:i.jsxs(Oe,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-sm font-semibold text-[#E0D8C8]",children:e("pipesExtended.detailsMeasurements")}),i.jsxs(ye,{variant:"ghost",size:"sm",onClick:()=>x(!g),children:[i.jsx(DP,{className:"w-3 h-3 mr-2"}),e(g?"units.mm":"units.inches")]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[j.length_mm&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(y1,{className:"w-4 h-4 text-[#E0D8C8]/60"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/60",children:e("formsExtended.length")}),i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:g?`${(j.length_mm/25.4).toFixed(2)}"`:`${j.length_mm.toFixed(0)} mm`})]})]}),j.weight_grams&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ete,{className:"w-4 h-4 text-[#E0D8C8]/60"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/60",children:e("formsExtended.weight")}),i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:g?`${(j.weight_grams/28.35).toFixed(2)} oz`:`${j.weight_grams.toFixed(0)} g`})]})]}),j.bowl_height_mm&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/60",children:e("formsExtended.bowlHeight")}),i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:g?`${(j.bowl_height_mm/25.4).toFixed(2)}"`:`${j.bowl_height_mm.toFixed(0)} mm`})]}),j.bowl_width_mm&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/60",children:e("formsExtended.bowlWidth")}),i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:g?`${(j.bowl_width_mm/25.4).toFixed(2)}"`:`${j.bowl_width_mm.toFixed(0)} mm`})]}),j.bowl_diameter_mm&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/60",children:e("formsExtended.chamberDiameter")}),i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:g?`${(j.bowl_diameter_mm/25.4).toFixed(2)}"`:`${j.bowl_diameter_mm.toFixed(2)}mm`})]}),j.bowl_depth_mm&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/60",children:e("formsExtended.chamberDepth")}),i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:g?`${(j.bowl_depth_mm/25.4).toFixed(2)}"`:`${j.bowl_depth_mm.toFixed(2)}mm`})]}),j.country_of_origin&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(D4,{className:"w-4 h-4 text-[#E0D8C8]/60"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/60",children:e("pipesExtended.origin")}),i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:j.country_of_origin})]})]}),j.year_made&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zx,{className:"w-4 h-4 text-[#E0D8C8]/60"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/60",children:e("pipesExtended.year")}),i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:j.year_made})]})]}),j.stem_material&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/60",children:e("pipesExtended.stem")}),i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:j.stem_material})]}),j.finish&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/60",children:e("formsExtended.finish")}),i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:j.finish})]}),j.filter_type&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/60",children:e("pipesExtended.filter")}),i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:j.filter_type})]})]}),((j==null?void 0:j.dimensions_found)||(j==null?void 0:j.dimensions_source))&&i.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-500/30 bg-emerald-500/15 px-3 py-1 text-xs",children:[i.jsx(Nr,{className:"w-3 h-3 text-emerald-400"}),i.jsx("span",{className:"font-medium text-emerald-200",children:e("pipesExtended.verifiedMeasurements")}),(j==null?void 0:j.dimensions_source)&&i.jsxs("span",{className:"text-emerald-300",children:[e("pipesExtended.source")," ",j.dimensions_source]})]})})]})}),j.stamping&&i.jsx(Ee,{className:"border-white/10",children:i.jsxs(Oe,{className:"p-6",children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/60 mb-1",children:e("pipesExtended.stamping")}),i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:j.stamping})]})}),(f5(j)||j.notes)&&i.jsx(Ee,{className:"border-white/10",children:i.jsxs(Oe,{className:"p-6 space-y-4",children:[f5(j)&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/70 mb-1",children:e("formsExtended.usageCharacteristics")}),i.jsx("p",{className:"text-[#E0D8C8]/80",children:f5(j)})]}),j.notes&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/70 mb-1",children:e("formsExtended.notes")}),i.jsx("p",{className:"text-[#E0D8C8]/80",children:j.notes})]})]})})]})]}),i.jsxs(Ec,{defaultValue:"match",className:"space-y-6",children:[i.jsxs(Tc,{className:"bg-transparent border border-white/10 p-1 overflow-x-auto flex-nowrap w-full",children:[i.jsxs(En,{value:"match",className:"data-[state=active]:bg-[#A35C5C] data-[state=active]:text-[#E0D8C8] text-[#E0D8C8]/70 shrink-0",children:[i.jsx(Da,{className:"w-4 h-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:e("pipesExtended.tobaccoMatching")}),i.jsx("span",{className:"sm:hidden",children:e("pipesExtended.matching")})]}),i.jsxs(En,{value:"value",className:"data-[state=active]:bg-[#A35C5C] data-[state=active]:text-[#E0D8C8] text-[#E0D8C8]/70 shrink-0",children:[i.jsx(Tu,{className:"w-4 h-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:e("pipesExtended.valueLookup")}),i.jsx("span",{className:"sm:hidden",children:e("pipesExtended.value")})]}),i.jsxs(En,{value:"identify",className:"data-[state=active]:bg-[#A35C5C] data-[state=active]:text-[#E0D8C8] text-[#E0D8C8]/70 shrink-0",children:[i.jsx(tte,{className:"w-4 h-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:e("pipesExtended.identifyPipe")}),i.jsx("span",{className:"sm:hidden",children:e("pipesExtended.identify")})]})]}),i.jsx(Tn,{value:"match",children:i.jsx(Ee,{className:"bg-[#182838] border-[#465C6E]",children:i.jsx(Oe,{className:"p-6",children:i.jsx(pye,{pipe:j,blends:O,isPaidUser:q})})})}),i.jsx(Tn,{value:"value",children:i.jsx(Ee,{className:"bg-[#182838] border-[#465C6E]",children:i.jsx(Oe,{className:"p-6",children:q?i.jsx(gye,{pipe:j,onUpdateValue:G}):i.jsx(Ac,{featureName:e("pipesExtended.valueLookup"),description:e("pipeDetailTabs.valueLookupDesc","Get instant market value estimates for your pipes based on maker, model, condition, and current market trends.")})})})}),i.jsx(Tn,{value:"identify",children:i.jsx(Ee,{className:"bg-[#182838] border-[#465C6E]",children:i.jsx(Oe,{className:"p-6",children:q?i.jsxs(i.Fragment,{children:[i.jsx(Rye,{pipe:j,onUpdatePipe:Y}),i.jsx("div",{className:"mt-6 pt-6 border-t border-[#465C6E]",children:i.jsx(Bye,{pipe:j,onUpdate:Y})})]}):i.jsx(Ac,{featureName:e("pipesExtended.identifyPipe"),description:e("pipeDetailTabs.identifyPipeDesc","Use advanced AI to identify your pipe's maker, model, year, and other details from photos of stampings and characteristics.")})})})})]}),(R==null?void 0:R.allow_comments)&&i.jsx(Ee,{className:"border-white/10 mt-8",children:i.jsx(Oe,{className:"p-6",children:i.jsx(Ix,{entityType:"pipe",entityId:r,entityOwnerEmail:j.created_by})})}),i.jsx(jm,{open:s,onOpenChange:a,children:i.jsxs(_h,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[i.jsx(Sh,{className:"mb-6",children:i.jsx(Ch,{children:e("pipesPage.editPipe")})}),i.jsx(oG,{pipe:j,onSave:re=>U.mutate(re),onCancel:()=>a(!1),isLoading:U.isPending})]})}),i.jsx(Nm,{open:o,onOpenChange:l,children:i.jsxs(kh,{children:[i.jsxs(Eh,{children:[i.jsx(Oh,{children:e("pipesExtended.deletePipeConfirm")}),i.jsx(Lh,{children:e("pipesExtended.deletePipeDesc",{name:j.name})})]}),i.jsxs(Th,{children:[i.jsx(Dh,{children:e("common.cancel")}),i.jsx(Rh,{onClick:()=>D.mutate(),className:"bg-rose-600 hover:bg-rose-700",children:e("common.delete")})]})]})}),i.jsx(A3,{imageUrl:d,isOpen:!!d,onClose:()=>f(null),alt:j.name})]})})}function pG({icon:e,title:n,description:r,actionLabel:s,onAction:a,secondaryActionLabel:o,onSecondaryAction:l}){return i.jsxs(ms.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16 px-4",children:[i.jsx(ms.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1,type:"spring",stiffness:200},className:"w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-[#7D90A5]/20 to-[#A35C5C]/20 flex items-center justify-center",children:e&&i.jsx(e,{className:"w-12 h-12 text-[#7D90A5]",strokeWidth:1.5})}),i.jsx(ms.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-2xl font-semibold text-[#E0D8C8] mb-3",children:n}),i.jsx(ms.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-[#E0D8C8]/70 mb-8 max-w-md mx-auto",children:r}),i.jsxs(ms.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s&&a&&i.jsx(ye,{onClick:a,className:"bg-gradient-to-r from-[#A35C5C] to-[#8B4A4A] hover:from-[#8B4A4A] hover:to-[#A35C5C] shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all",size:"lg",children:s}),o&&l&&i.jsx(ye,{onClick:l,variant:"outline",className:"border-[#E0D8C8]/30 text-[#E0D8C8] hover:bg-[#E0D8C8]/10",size:"lg",children:o})]})]})}function zye({pipe:e,onClick:n,onToggleFavorite:r}){var o;const{t:s}=$t(),a=(o=e.photos)==null?void 0:o[0];return i.jsx(ms.div,{whileHover:{y:-4},transition:{duration:.2},children:i.jsxs(gy,{className:"overflow-hidden cursor-pointer hover:shadow-xl transition-all duration-300",onClick:n,children:[i.jsxs("div",{className:"relative aspect-[16/9] bg-gradient-to-br from-[#1A2B3A] to-[#243548] overflow-hidden",children:[a?i.jsx("img",{src:a,alt:e.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-[#E0D8C8]/50 text-center",children:[i.jsx(py,{shape:e.shape,className:"text-5xl mb-2"}),i.jsx("p",{className:"text-xs",children:e.shape||s("pipesExtended.noPhoto")})]})}),i.jsx("div",{className:"absolute top-3 right-3",children:i.jsx(ye,{variant:"ghost",size:"icon",className:"h-8 w-8 bg-[#223447]/90 hover:bg-[#223447] shadow-md",onClick:l=>{l.preventDefault(),l.stopPropagation(),r==null||r(e)},children:i.jsx(Tm,{className:`w-4 h-4 ${e.is_favorite?"fill-rose-500 text-rose-500":"text-stone-400"}`})})}),e.estimated_value&&i.jsx("div",{className:"absolute bottom-3 left-3",children:i.jsx(Ge,{className:"bg-emerald-600/90 text-white border-0 backdrop-blur-sm font-semibold shadow-sm text-sm",children:ro(+e.estimated_value)})})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-[#E0D8C8] truncate text-base",children:e.name}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70 truncate",children:e.maker||s("pipesExtended.unknownMaker")}),i.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-3",children:[e.shape&&i.jsx(Ge,{variant:"secondary",className:"bg-amber-700/40 text-amber-100 border-amber-600/50 text-xs",children:s(`shapes.${e.shape}`,e.shape)}),e.bowl_material&&i.jsx(Ge,{variant:"secondary",className:"bg-slate-700/40 text-slate-100 border-slate-600/50 text-xs",children:s(`materials.${e.bowl_material}`,e.bowl_material)}),e.chamber_volume&&i.jsx(Ge,{variant:"secondary",className:"bg-amber-700/40 text-amber-100 border-amber-600/50 text-xs",children:s(`sizes.${e.chamber_volume}`,e.chamber_volume)})]})]})]})})}function Uye({pipe:e,onClick:n,onToggleFavorite:r}){var o;const{t:s}=$t(),a=(o=e.photos)==null?void 0:o[0];return i.jsx(gy,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-all duration-300",onClick:n,children:i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"relative w-32 h-20 rounded-lg bg-[#1A2B3A] overflow-hidden shrink-0",children:[a?i.jsx("img",{src:a,alt:e.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx(py,{shape:e.shape,className:"text-3xl text-[#E0D8C8]/50"})}),i.jsx("div",{className:"absolute top-1 right-1",children:i.jsx(ye,{variant:"ghost",size:"icon",className:"h-7 w-7 bg-white/90 hover:bg-white shadow-md",onClick:l=>{l.preventDefault(),l.stopPropagation(),r==null||r(e)},children:i.jsx(Tm,{className:`w-3.5 h-3.5 ${e.is_favorite?"fill-rose-500 text-rose-500":"text-[#E0D8C8]/50"}`})})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-semibold text-[#E0D8C8] text-lg truncate",children:e.name}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/60",children:e.maker||s("pipesExtended.unknownMaker")})]}),e.estimated_value&&i.jsxs("div",{className:"text-right shrink-0",children:[i.jsx("p",{className:"text-xs text-emerald-400",children:s("forms.value")}),i.jsx("p",{className:"font-semibold text-emerald-300",children:ro(+e.estimated_value)})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.shape&&i.jsx(Ge,{variant:"secondary",className:"bg-amber-700 text-amber-100 border-amber-600/50 text-xs",children:s(`shapes.${e.shape}`,e.shape)}),e.bowl_material&&i.jsx(Ge,{variant:"secondary",className:"bg-slate-700 text-slate-100 border-slate-600/50 text-xs",children:s(`materials.${e.bowl_material}`,e.bowl_material)}),e.chamber_volume&&i.jsx(Ge,{variant:"secondary",className:"bg-amber-700 text-amber-100 border-amber-600/50 text-xs",children:s(`sizes.${e.chamber_volume}`,e.chamber_volume)})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-[#E0D8C8]/60",children:[e.country_of_origin&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(D4,{className:"w-3 h-3"}),e.country_of_origin]}),e.year_made&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(zx,{className:"w-3 h-3"}),e.year_made]})]})]})]})})})}function Vye({open:e,onOpenChange:n,onAdd:r}){const{t:s}=$t(),[a,o]=C.useState(""),[l,c]=C.useState(!1),[u,d]=C.useState([]),[f,m]=C.useState(null),g=async v=>{if(v.preventDefault(),!!a.trim()){c(!0);try{const y=await Ce.integrations.Core.InvokeLLM({prompt:`Search for information about this pipe: "${a}"

Search the web for detailed information about this specific pipe maker, model, or brand. Include:
- Exact maker/brand name and country of origin
- Common pipe shapes/models they make
- Materials used (briar, meerschaum, etc.)
- Typical finish styles
- Historical information and production years
- Typical price ranges and current market value
- Any notable characteristics
- Typical bowl dimensions if available

If this is a specific model or line, provide details about that model.

Return an array of relevant pipe matches with detailed information. Include 3-5 results if possible.`,add_context_from_internet:!0,response_json_schema:{type:"object",properties:{pipes:{type:"array",items:{type:"object",properties:{name:{type:"string"},maker:{type:"string"},country_of_origin:{type:"string"},typical_shapes:{type:"array",items:{type:"string"}},typical_materials:{type:"array",items:{type:"string"}},typical_finishes:{type:"array",items:{type:"string"}},stem_materials:{type:"array",items:{type:"string"}},era:{type:"string"},price_range_low:{type:"number"},price_range_high:{type:"number"},typical_chamber_volume:{type:"string"},bowl_diameter_mm:{type:"number"},bowl_depth_mm:{type:"number"},description:{type:"string"}}}}}}});d(y.pipes||[])}catch(y){console.error("Search error:",y)}finally{c(!1)}}},x=async v=>{var y,b,N,j;m(v.name);try{const S={name:v.name||"",maker:v.maker||"",country_of_origin:v.country_of_origin||"",shape:((y=v.typical_shapes)==null?void 0:y[0])||"",bowl_material:((b=v.typical_materials)==null?void 0:b[0])||"Briar",stem_material:((N=v.stem_materials)==null?void 0:N[0])||"",finish:((j=v.typical_finishes)==null?void 0:j[0])||"",year_made:v.era||"",chamber_volume:v.typical_chamber_volume||"",bowl_diameter_mm:v.bowl_diameter_mm||null,bowl_depth_mm:v.bowl_depth_mm||null,estimated_value:v.price_range_low?Math.round((v.price_range_low+(v.price_range_high||v.price_range_low))/2):null,notes:v.description||"",photos:[],stamping_photos:[]},A=await Ce.entities.Pipe.create(S);r(A),o(""),d([]),n(!1)}catch(S){console.error("Add error:",S)}finally{m(null)}};return i.jsx(fa,{open:e,onOpenChange:n,children:i.jsxs(ma,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[i.jsxs(ho,{children:[i.jsxs(fo,{className:"flex items-center gap-2",children:[i.jsx(fs,{className:"w-5 h-5 text-amber-600"}),s("quickSearch.quickSearchAddPipe")]}),i.jsx(Vh,{children:s("quickSearch.searchPipeDesc")})]}),i.jsxs("div",{className:"space-y-4 mt-4",children:[i.jsxs("form",{onSubmit:g,className:"flex gap-2",children:[i.jsx(at,{value:a,onChange:v=>o(v.target.value),placeholder:s("quickSearch.pipePlaceholder"),className:"border-stone-200",autoFocus:!0}),i.jsx(ye,{type:"submit",disabled:l||!a.trim(),className:"bg-amber-700 hover:bg-amber-800 shrink-0",children:l?i.jsx(Cn,{className:"w-4 h-4 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(fs,{className:"w-4 h-4 mr-2"}),s("common.search")]})})]}),i.jsx(l0,{children:u.length>0&&i.jsxs(ms.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-3",children:[i.jsx("p",{className:"text-sm font-medium text-stone-700",children:s("quickSearch.foundResults",{count:u.length})}),u.map((v,y)=>{var b,N,j,S,A;return i.jsx(Ee,{className:"border-stone-300 bg-stone-50/70 hover:border-amber-400 transition-colors",children:i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1 font-sans",children:[i.jsx("div",{className:"flex items-center gap-2 mb-2",children:i.jsx("h4",{className:"font-semibold text-stone-950 text-[1.05rem] leading-snug tracking-[0.01em]",children:v.name})}),i.jsx("p",{className:"text-sm text-stone-800 font-semibold",children:v.maker}),v.country_of_origin&&i.jsx("p",{className:"text-xs font-medium text-stone-600 mt-1",children:s("quickSearch.madeIn",{country:v.country_of_origin})}),v.era&&i.jsxs("p",{className:"text-xs font-medium text-stone-600",children:[s("quickSearch.era"),": ",v.era]}),v.description&&i.jsx("p",{className:"text-sm font-medium text-stone-700 mt-2 leading-relaxed",children:v.description}),i.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-3",children:[(b=v.typical_shapes)==null?void 0:b.slice(0,3).map((P,L)=>i.jsx(Ge,{variant:"secondary",className:"bg-amber-100 text-amber-900 border-amber-300 text-xs font-medium",children:P},L)),(N=v.typical_materials)==null?void 0:N.slice(0,2).map((P,L)=>i.jsx(Ge,{variant:"secondary",className:"bg-stone-200 text-stone-800 border-stone-300 text-xs font-medium",children:P},L)),(j=v.typical_finishes)==null?void 0:j.slice(0,2).map((P,L)=>i.jsx(Ge,{variant:"secondary",className:"bg-amber-50 text-amber-800 border-amber-300 text-xs font-medium",children:P},L))]}),(v.bowl_diameter_mm||v.bowl_depth_mm)&&i.jsxs("p",{className:"text-xs font-medium text-stone-600 mt-2",children:[s("quickSearch.bowl"),": ",v.bowl_diameter_mm&&`${v.bowl_diameter_mm}mm ⌀`,v.bowl_diameter_mm&&v.bowl_depth_mm&&" × ",v.bowl_depth_mm&&`${v.bowl_depth_mm}mm ${s("quickSearch.deep")}`]})]}),i.jsxs("div",{className:"shrink-0 text-right space-y-3",children:[(v.price_range_low||v.price_range_high)&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-medium text-stone-600",children:s("quickSearch.typicalValue")}),i.jsxs("p",{className:"font-semibold text-emerald-800 text-sm",children:["$",(S=v.price_range_low)==null?void 0:S.toLocaleString(),v.price_range_high&&v.price_range_high!==v.price_range_low&&` - $${(A=v.price_range_high)==null?void 0:A.toLocaleString()}`]})]}),i.jsx(ye,{onClick:()=>x(v),disabled:f!==null,className:"bg-emerald-600 hover:bg-emerald-700 w-full",children:f===v.name?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),s("quickSearch.adding")]}):i.jsxs(i.Fragment,{children:[i.jsx(Ra,{className:"w-4 h-4 mr-2"}),s("quickSearch.addToCollection")]})})]})]})})},y)})]})}),!l&&u.length===0&&a&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-stone-500",children:s("quickSearch.noResults")})}),!a&&!l&&u.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"text-4xl mb-3",children:"🔍"}),i.jsx("p",{className:"text-stone-500",children:s("quickSearch.enterPipeName")}),i.jsx("p",{className:"text-xs text-stone-400 mt-2",children:s("quickSearch.pipeExamples")})]})]})]})})}const Hye="modulepreload",Wye=function(e){return"/pipekeeper/"+e},E6={},Y1=function(n,r,s){let a=Promise.resolve();if(r&&r.length>0){let l=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=l(r.map(d=>{if(d=Wye(d),d in E6)return;E6[d]=!0;const f=d.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":Hye,f||(g.as="script"),g.crossOrigin="",g.href=d,u&&g.setAttribute("nonce",u),document.head.appendChild(g),f)return new Promise((x,v)=>{g.addEventListener("load",x),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return a.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return n().catch(o)})};function cr(e){"@babel/helpers - typeof";return cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},cr(e)}var Bi=Uint8Array,io=Uint16Array,k3=Int32Array,W2=new Bi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),K2=new Bi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nk=new Bi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gG=function(e,n){for(var r=new io(31),s=0;s<31;++s)r[s]=n+=1<<e[s-1];for(var a=new k3(r[30]),s=1;s<30;++s)for(var o=r[s];o<r[s+1];++o)a[o]=o-r[s]<<5|s;return{b:r,r:a}},xG=gG(W2,2),vG=xG.b,rk=xG.r;vG[28]=258,rk[258]=28;var yG=gG(K2,0),Kye=yG.b,T6=yG.r,sk=new io(32768);for(var Rr=0;Rr<32768;++Rr){var Ud=(Rr&43690)>>1|(Rr&21845)<<1;Ud=(Ud&52428)>>2|(Ud&13107)<<2,Ud=(Ud&61680)>>4|(Ud&3855)<<4,sk[Rr]=((Ud&65280)>>8|(Ud&255)<<8)>>1}var _c=(function(e,n,r){for(var s=e.length,a=0,o=new io(n);a<s;++a)e[a]&&++o[e[a]-1];var l=new io(n);for(a=1;a<n;++a)l[a]=l[a-1]+o[a-1]<<1;var c;if(r){c=new io(1<<n);var u=15-n;for(a=0;a<s;++a)if(e[a])for(var d=a<<4|e[a],f=n-e[a],m=l[e[a]-1]++<<f,g=m|(1<<f)-1;m<=g;++m)c[sk[m]>>u]=d}else for(c=new io(s),a=0;a<s;++a)e[a]&&(c[a]=sk[l[e[a]-1]++]>>15-e[a]);return c}),Mh=new Bi(288);for(var Rr=0;Rr<144;++Rr)Mh[Rr]=8;for(var Rr=144;Rr<256;++Rr)Mh[Rr]=9;for(var Rr=256;Rr<280;++Rr)Mh[Rr]=7;for(var Rr=280;Rr<288;++Rr)Mh[Rr]=8;var ov=new Bi(32);for(var Rr=0;Rr<32;++Rr)ov[Rr]=5;var Gye=_c(Mh,9,0),Yye=_c(Mh,9,1),Qye=_c(ov,5,0),Xye=_c(ov,5,1),y5=function(e){for(var n=e[0],r=1;r<e.length;++r)e[r]>n&&(n=e[r]);return n},fl=function(e,n,r){var s=n/8|0;return(e[s]|e[s+1]<<8)>>(n&7)&r},b5=function(e,n){var r=n/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(n&7)},E3=function(e){return(e+7)/8|0},bG=function(e,n,r){return(r==null||r>e.length)&&(r=e.length),new Bi(e.subarray(n,r))},Jye=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],vl=function(e,n,r){var s=new Error(n||Jye[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,vl),!r)throw s;return s},Zye=function(e,n,r,s){var a=e.length,o=0;if(!a||n.f&&!n.l)return r||new Bi(0);var l=!r,c=l||n.i!=2,u=n.i;l&&(r=new Bi(a*3));var d=function(ue){var me=r.length;if(ue>me){var je=new Bi(Math.max(me*2,ue));je.set(r),r=je}},f=n.f||0,m=n.p||0,g=n.b||0,x=n.l,v=n.d,y=n.m,b=n.n,N=a*8;do{if(!x){f=fl(e,m,1);var j=fl(e,m+1,3);if(m+=3,j)if(j==1)x=Yye,v=Xye,y=9,b=5;else if(j==2){var L=fl(e,m,31)+257,O=fl(e,m+10,15)+4,R=L+fl(e,m+5,31)+1;m+=14;for(var q=new Bi(R),U=new Bi(19),D=0;D<O;++D)U[nk[D]]=fl(e,m+D*3,7);m+=O*3;for(var M=y5(U),G=(1<<M)-1,Y=_c(U,M,1),D=0;D<R;){var Z=Y[fl(e,m,G)];m+=Z&15;var S=Z>>4;if(S<16)q[D++]=S;else{var X=0,re=0;for(S==16?(re=3+fl(e,m,3),m+=2,X=q[D-1]):S==17?(re=3+fl(e,m,7),m+=3):S==18&&(re=11+fl(e,m,127),m+=7);re--;)q[D++]=X}}var z=q.subarray(0,L),te=q.subarray(L);y=y5(z),b=y5(te),x=_c(z,y,1),v=_c(te,b,1)}else vl(1);else{var S=E3(m)+4,A=e[S-4]|e[S-3]<<8,P=S+A;if(P>a){u&&vl(0);break}c&&d(g+A),r.set(e.subarray(S,P),g),n.b=g+=A,n.p=m=P*8,n.f=f;continue}if(m>N){u&&vl(0);break}}c&&d(g+131072);for(var le=(1<<y)-1,Q=(1<<b)-1,T=m;;T=m){var X=x[b5(e,m)&le],B=X>>4;if(m+=X&15,m>N){u&&vl(0);break}if(X||vl(2),B<256)r[g++]=B;else if(B==256){T=m,x=null;break}else{var H=B-254;if(B>264){var D=B-257,ee=W2[D];H=fl(e,m,(1<<ee)-1)+vG[D],m+=ee}var ce=v[b5(e,m)&Q],he=ce>>4;ce||vl(3),m+=ce&15;var te=Kye[he];if(he>3){var ee=K2[he];te+=b5(e,m)&(1<<ee)-1,m+=ee}if(m>N){u&&vl(0);break}c&&d(g+131072);var W=g+H;if(g<te){var J=o-te,pe=Math.min(te,W);for(J+g<0&&vl(3);g<pe;++g)r[g]=s[J+g]}for(;g<W;++g)r[g]=r[g-te]}}n.l=x,n.p=T,n.b=g,n.f=f,x&&(f=1,n.m=y,n.d=v,n.n=b)}while(!f);return g!=r.length&&l?bG(r,0,g):r.subarray(0,g)},vu=function(e,n,r){r<<=n&7;var s=n/8|0;e[s]|=r,e[s+1]|=r>>8},G0=function(e,n,r){r<<=n&7;var s=n/8|0;e[s]|=r,e[s+1]|=r>>8,e[s+2]|=r>>16},w5=function(e,n){for(var r=[],s=0;s<e.length;++s)e[s]&&r.push({s,f:e[s]});var a=r.length,o=r.slice();if(!a)return{t:jG,l:0};if(a==1){var l=new Bi(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(P,L){return P.f-L.f}),r.push({s:-1,f:25001});var c=r[0],u=r[1],d=0,f=1,m=2;for(r[0]={s:-1,f:c.f+u.f,l:c,r:u};f!=a-1;)c=r[r[d].f<r[m].f?d++:m++],u=r[d!=f&&r[d].f<r[m].f?d++:m++],r[f++]={s:-1,f:c.f+u.f,l:c,r:u};for(var g=o[0].s,s=1;s<a;++s)o[s].s>g&&(g=o[s].s);var x=new io(g+1),v=ik(r[f-1],x,0);if(v>n){var s=0,y=0,b=v-n,N=1<<b;for(o.sort(function(L,O){return x[O.s]-x[L.s]||L.f-O.f});s<a;++s){var j=o[s].s;if(x[j]>n)y+=N-(1<<v-x[j]),x[j]=n;else break}for(y>>=b;y>0;){var S=o[s].s;x[S]<n?y-=1<<n-x[S]++-1:++s}for(;s>=0&&y;--s){var A=o[s].s;x[A]==n&&(--x[A],++y)}v=n}return{t:new Bi(x),l:v}},ik=function(e,n,r){return e.s==-1?Math.max(ik(e.l,n,r+1),ik(e.r,n,r+1)):n[e.s]=r},O6=function(e){for(var n=e.length;n&&!e[--n];);for(var r=new io(++n),s=0,a=e[0],o=1,l=function(u){r[s++]=u},c=1;c<=n;++c)if(e[c]==a&&c!=n)++o;else{if(!a&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(a),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(a);o=1,a=e[c]}return{c:r.subarray(0,s),n}},Y0=function(e,n){for(var r=0,s=0;s<n.length;++s)r+=e[s]*n[s];return r},wG=function(e,n,r){var s=r.length,a=E3(n+2);e[a]=s&255,e[a+1]=s>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var o=0;o<s;++o)e[a+o+4]=r[o];return(a+4+s)*8},L6=function(e,n,r,s,a,o,l,c,u,d,f){vu(n,f++,r),++a[256];for(var m=w5(a,15),g=m.t,x=m.l,v=w5(o,15),y=v.t,b=v.l,N=O6(g),j=N.c,S=N.n,A=O6(y),P=A.c,L=A.n,O=new io(19),R=0;R<j.length;++R)++O[j[R]&31];for(var R=0;R<P.length;++R)++O[P[R]&31];for(var q=w5(O,7),U=q.t,D=q.l,M=19;M>4&&!U[nk[M-1]];--M);var G=d+5<<3,Y=Y0(a,Mh)+Y0(o,ov)+l,Z=Y0(a,g)+Y0(o,y)+l+14+3*M+Y0(O,U)+2*O[16]+3*O[17]+7*O[18];if(u>=0&&G<=Y&&G<=Z)return wG(n,f,e.subarray(u,u+d));var X,re,z,te;if(vu(n,f,1+(Z<Y)),f+=2,Z<Y){X=_c(g,x,0),re=g,z=_c(y,b,0),te=y;var le=_c(U,D,0);vu(n,f,S-257),vu(n,f+5,L-1),vu(n,f+10,M-4),f+=14;for(var R=0;R<M;++R)vu(n,f+3*R,U[nk[R]]);f+=3*M;for(var Q=[j,P],T=0;T<2;++T)for(var B=Q[T],R=0;R<B.length;++R){var H=B[R]&31;vu(n,f,le[H]),f+=U[H],H>15&&(vu(n,f,B[R]>>5&127),f+=B[R]>>12)}}else X=Gye,re=Mh,z=Qye,te=ov;for(var R=0;R<c;++R){var ee=s[R];if(ee>255){var H=ee>>18&31;G0(n,f,X[H+257]),f+=re[H+257],H>7&&(vu(n,f,ee>>23&31),f+=W2[H]);var ce=ee&31;G0(n,f,z[ce]),f+=te[ce],ce>3&&(G0(n,f,ee>>5&8191),f+=K2[ce])}else G0(n,f,X[ee]),f+=re[ee]}return G0(n,f,X[256]),f+re[256]},ebe=new k3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),jG=new Bi(0),tbe=function(e,n,r,s,a,o){var l=o.z||e.length,c=new Bi(s+l+5*(1+Math.ceil(l/7e3))+a),u=c.subarray(s,c.length-a),d=o.l,f=(o.r||0)&7;if(n){f&&(u[0]=o.r>>3);for(var m=ebe[n-1],g=m>>13,x=m&8191,v=(1<<r)-1,y=o.p||new io(32768),b=o.h||new io(v+1),N=Math.ceil(r/3),j=2*N,S=function(ze){return(e[ze]^e[ze+1]<<N^e[ze+2]<<j)&v},A=new k3(25e3),P=new io(288),L=new io(32),O=0,R=0,q=o.i||0,U=0,D=o.w||0,M=0;q+2<l;++q){var G=S(q),Y=q&32767,Z=b[G];if(y[Y]=Z,b[G]=Y,D<=q){var X=l-q;if((O>7e3||U>24576)&&(X>423||!d)){f=L6(e,u,0,A,P,L,R,U,M,q-M,f),U=O=R=0,M=q;for(var re=0;re<286;++re)P[re]=0;for(var re=0;re<30;++re)L[re]=0}var z=2,te=0,le=x,Q=Y-Z&32767;if(X>2&&G==S(q-Q))for(var T=Math.min(g,X)-1,B=Math.min(32767,q),H=Math.min(258,X);Q<=B&&--le&&Y!=Z;){if(e[q+z]==e[q+z-Q]){for(var ee=0;ee<H&&e[q+ee]==e[q+ee-Q];++ee);if(ee>z){if(z=ee,te=Q,ee>T)break;for(var ce=Math.min(Q,ee-2),he=0,re=0;re<ce;++re){var W=q-Q+re&32767,J=y[W],pe=W-J&32767;pe>he&&(he=pe,Z=W)}}}Y=Z,Z=y[Y],Q+=Y-Z&32767}if(te){A[U++]=268435456|rk[z]<<18|T6[te];var ue=rk[z]&31,me=T6[te]&31;R+=W2[ue]+K2[me],++P[257+ue],++L[me],D=q+z,++O}else A[U++]=e[q],++P[e[q]]}}for(q=Math.max(q,D);q<l;++q)A[U++]=e[q],++P[e[q]];f=L6(e,u,d,A,P,L,R,U,M,q-M,f),d||(o.r=f&7|u[f/8|0]<<3,f-=7,o.h=b,o.p=y,o.i=q,o.w=D)}else{for(var q=o.w||0;q<l+d;q+=65535){var je=q+65535;je>=l&&(u[f/8|0]=d,je=l),f=wG(u,f+1,e.subarray(q,je))}o.i=l}return bG(c,0,s+E3(f)+a)},NG=function(){var e=1,n=0;return{p:function(r){for(var s=e,a=n,o=r.length|0,l=0;l!=o;){for(var c=Math.min(l+2655,o);l<c;++l)a+=s+=r[l];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}e=s,n=a},d:function(){return e%=65521,n%=65521,(e&255)<<24|(e&65280)<<8|(n&255)<<8|n>>8}}},nbe=function(e,n,r,s,a){if(!a&&(a={l:1},n.dictionary)){var o=n.dictionary.subarray(-32768),l=new Bi(o.length+e.length);l.set(o),l.set(e,o.length),e=l,a.w=o.length}return tbe(e,n.level==null?6:n.level,n.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+n.mem,r,s,a)},_G=function(e,n,r){for(;r;++n)e[n]=r,r>>>=8},rbe=function(e,n){var r=n.level,s=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=s<<6|(n.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,n.dictionary){var a=NG();a.p(n.dictionary),_G(e,2,a.d())}},sbe=function(e,n){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&vl(6,"invalid zlib data"),(e[1]>>5&1)==1&&vl(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function ak(e,n){n||(n={});var r=NG();r.p(e);var s=nbe(e,n,n.dictionary?6:2,4);return rbe(s,n),_G(s,s.length-4,r.d()),s}function ibe(e,n){return Zye(e.subarray(sbe(e),-4),{i:2},n,n)}var abe=typeof TextDecoder<"u"&&new TextDecoder,obe=0;try{abe.decode(jG,{stream:!0}),obe=1}catch{}var en=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function j5(){en.console&&typeof en.console.log=="function"&&en.console.log.apply(en.console,arguments)}var br={log:j5,warn:function(e){en.console&&(typeof en.console.warn=="function"?en.console.warn.apply(en.console,arguments):j5.call(null,arguments))},error:function(e){en.console&&(typeof en.console.error=="function"?en.console.error.apply(en.console,arguments):j5(e))}};function N5(e,n,r){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){Rf(s.response,n,r)},s.onerror=function(){br.error("could not download file")},s.send()}function R6(e){var n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function Pb(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var Mx,ok,Rf=en.saveAs||((typeof window>"u"?"undefined":cr(window))!=="object"||window!==en?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,n,r){var s=en.URL||en.webkitURL,a=document.createElement("a");n=n||e.name||"download",a.download=n,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?R6(a.href)?N5(e,n,r):Pb(a,a.target="_blank"):Pb(a)):(a.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(a.href)}),4e4),setTimeout((function(){Pb(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,r){if(n=n||e.name||"download",typeof e=="string")if(R6(e))N5(e,n,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){Pb(s)}))}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:cr(o)!=="object"&&(br.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(e,r),n)}:function(e,n,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return N5(e,n,r);var a=e.type==="application/octet-stream",o=/constructor/i.test(en.HTMLElement)||en.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&o)&&(typeof FileReader>"u"?"undefined":cr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var f=c.result;f=l?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=f:location=f,s=null},c.readAsDataURL(e)}else{var u=en.URL||en.webkitURL,d=u.createObjectURL(e);s?s.location=d:location.href=d,s=null,setTimeout((function(){u.revokeObjectURL(d)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function SG(e){var n;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],s=0;s<r.length;s++){var a=r[s].re,o=r[s].process,l=a.exec(e);l&&(n=o(l),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),u=this.g.toString(16),d=this.b.toString(16);return c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),"#"+c+u+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function _5(e,n){var r=e[0],s=e[1],a=e[2],o=e[3];r=Ai(r,s,a,o,n[0],7,-680876936),o=Ai(o,r,s,a,n[1],12,-389564586),a=Ai(a,o,r,s,n[2],17,606105819),s=Ai(s,a,o,r,n[3],22,-1044525330),r=Ai(r,s,a,o,n[4],7,-176418897),o=Ai(o,r,s,a,n[5],12,1200080426),a=Ai(a,o,r,s,n[6],17,-1473231341),s=Ai(s,a,o,r,n[7],22,-45705983),r=Ai(r,s,a,o,n[8],7,1770035416),o=Ai(o,r,s,a,n[9],12,-1958414417),a=Ai(a,o,r,s,n[10],17,-42063),s=Ai(s,a,o,r,n[11],22,-1990404162),r=Ai(r,s,a,o,n[12],7,1804603682),o=Ai(o,r,s,a,n[13],12,-40341101),a=Ai(a,o,r,s,n[14],17,-1502002290),r=ki(r,s=Ai(s,a,o,r,n[15],22,1236535329),a,o,n[1],5,-165796510),o=ki(o,r,s,a,n[6],9,-1069501632),a=ki(a,o,r,s,n[11],14,643717713),s=ki(s,a,o,r,n[0],20,-373897302),r=ki(r,s,a,o,n[5],5,-701558691),o=ki(o,r,s,a,n[10],9,38016083),a=ki(a,o,r,s,n[15],14,-660478335),s=ki(s,a,o,r,n[4],20,-405537848),r=ki(r,s,a,o,n[9],5,568446438),o=ki(o,r,s,a,n[14],9,-1019803690),a=ki(a,o,r,s,n[3],14,-187363961),s=ki(s,a,o,r,n[8],20,1163531501),r=ki(r,s,a,o,n[13],5,-1444681467),o=ki(o,r,s,a,n[2],9,-51403784),a=ki(a,o,r,s,n[7],14,1735328473),r=Ei(r,s=ki(s,a,o,r,n[12],20,-1926607734),a,o,n[5],4,-378558),o=Ei(o,r,s,a,n[8],11,-2022574463),a=Ei(a,o,r,s,n[11],16,1839030562),s=Ei(s,a,o,r,n[14],23,-35309556),r=Ei(r,s,a,o,n[1],4,-1530992060),o=Ei(o,r,s,a,n[4],11,1272893353),a=Ei(a,o,r,s,n[7],16,-155497632),s=Ei(s,a,o,r,n[10],23,-1094730640),r=Ei(r,s,a,o,n[13],4,681279174),o=Ei(o,r,s,a,n[0],11,-358537222),a=Ei(a,o,r,s,n[3],16,-722521979),s=Ei(s,a,o,r,n[6],23,76029189),r=Ei(r,s,a,o,n[9],4,-640364487),o=Ei(o,r,s,a,n[12],11,-421815835),a=Ei(a,o,r,s,n[15],16,530742520),r=Ti(r,s=Ei(s,a,o,r,n[2],23,-995338651),a,o,n[0],6,-198630844),o=Ti(o,r,s,a,n[7],10,1126891415),a=Ti(a,o,r,s,n[14],15,-1416354905),s=Ti(s,a,o,r,n[5],21,-57434055),r=Ti(r,s,a,o,n[12],6,1700485571),o=Ti(o,r,s,a,n[3],10,-1894986606),a=Ti(a,o,r,s,n[10],15,-1051523),s=Ti(s,a,o,r,n[1],21,-2054922799),r=Ti(r,s,a,o,n[8],6,1873313359),o=Ti(o,r,s,a,n[15],10,-30611744),a=Ti(a,o,r,s,n[6],15,-1560198380),s=Ti(s,a,o,r,n[13],21,1309151649),r=Ti(r,s,a,o,n[4],6,-145523070),o=Ti(o,r,s,a,n[11],10,-1120210379),a=Ti(a,o,r,s,n[2],15,718787259),s=Ti(s,a,o,r,n[9],21,-343485551),e[0]=lh(r,e[0]),e[1]=lh(s,e[1]),e[2]=lh(a,e[2]),e[3]=lh(o,e[3])}function G2(e,n,r,s,a,o){return n=lh(lh(n,e),lh(s,o)),lh(n<<a|n>>>32-a,r)}function Ai(e,n,r,s,a,o,l){return G2(n&r|~n&s,e,n,a,o,l)}function ki(e,n,r,s,a,o,l){return G2(n&s|r&~s,e,n,a,o,l)}function Ei(e,n,r,s,a,o,l){return G2(n^r^s,e,n,a,o,l)}function Ti(e,n,r,s,a,o,l){return G2(r^(n|~s),e,n,a,o,l)}function CG(e){var n,r=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)_5(s,lbe(e.substring(n-64,n)));e=e.substring(n-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)a[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(a[n>>2]|=128<<(n%4<<3),n>55)for(_5(s,a),n=0;n<16;n++)a[n]=0;return a[14]=8*r,_5(s,a),s}function lbe(e){var n,r=[];for(n=0;n<64;n+=4)r[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return r}Mx=en.atob.bind(en),ok=en.btoa.bind(en);var D6="0123456789abcdef".split("");function cbe(e){for(var n="",r=0;r<4;r++)n+=D6[e>>8*r+4&15]+D6[e>>8*r&15];return n}function ube(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function lk(e){return CG(e).map(ube).join("")}var dbe=(function(e){for(var n=0;n<e.length;n++)e[n]=cbe(e[n]);return e.join("")})(CG("hello"))!="5d41402abc4b2a76b9719d911017c592";function lh(e,n){if(dbe){var r=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(r>>16)<<16|65535&r}return e+n&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ck(e,n){var r,s,a,o;if(e!==r){for(var l=(a=e,o=1+(256/e.length>>0),new Array(o+1).join(a)),c=[],u=0;u<256;u++)c[u]=u;var d=0;for(u=0;u<256;u++){var f=c[u];d=(d+f+l.charCodeAt(u))%256,c[u]=c[d],c[d]=f}r=e,s=c}else c=s;var m=n.length,g=0,x=0,v="";for(u=0;u<m;u++)x=(x+(f=c[g=(g+1)%256]))%256,c[g]=c[x],c[x]=f,l=c[(c[g]+c[x])%256],v+=String.fromCharCode(n.charCodeAt(u)^l);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var I6={print:4,modify:8,copy:16,"annot-forms":32};function Rp(e,n,r,s){this.v=1,this.r=2;var a=192;e.forEach((function(c){if(I6.perm!==void 0)throw new Error("Invalid permission: "+c);a+=I6[c]})),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var o=(n+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^a)),this.encryptionKey=lk(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=ck(this.encryptionKey,this.padding)}function Dp(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var n="",r=e.length,s=0;s<r;s++){var a=e.charCodeAt(s);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?n+="#"+("0"+a.toString(16)).slice(-2):n+=e[s]}return n}function M6(e){if(cr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(r,s,a){if(a=a||!1,typeof r!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(r)||(n[r]={});var o=Math.random().toString(35);return n[r][o]=[s,!!a],o},this.unsubscribe=function(r){for(var s in n)if(n[s][r])return delete n[s][r],Object.keys(n[s]).length===0&&delete n[s],!0;return!1},this.publish=function(r){if(n.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var o in n[r]){var l=n[r][o];try{l[0].apply(e,s)}catch(c){en.console&&br.error("jsPDF PubSub Error",c.message,c)}l[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function Q1(e){if(!(this instanceof Q1))return new Q1(e);var n="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&n.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function PG(e,n){this.gState=e,this.matrix=n,this.id="",this.objectNumber=-1}function Bf(e,n,r,s,a){if(!(this instanceof Bf))return new Bf(e,n,r,s,a);this.type=e==="axial"?2:3,this.coords=n,this.colors=r,PG.call(this,s,a)}function qp(e,n,r,s,a){if(!(this instanceof qp))return new qp(e,n,r,s,a);this.boundingBox=e,this.xStep=n,this.yStep=r,this.stream="",this.cloneIndex=0,PG.call(this,s,a)}function Yt(e){var n,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],o=arguments[3],l=[],c=1,u=16,d="S",f=null;cr(e=e||{})==="object"&&(r=e.orientation,s=e.unit||s,a=e.format||a,o=e.compress||e.compressPdf||o,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),c=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(n=e.precision),e.floatPrecision!==void 0&&(u=e.floatPrecision),d=e.defaultPathOperation||"S"),l=e.filters||(o===!0?["FlateEncode"]:l),s=s||"mm",r=(""+(r||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,g={},x={internal:{},__private__:{}};x.__private__.PubSub=M6;var v="1.3",y=x.__private__.getPdfVersion=function(){return v};x.__private__.setPdfVersion=function(I){v=I};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return b};var N=x.__private__.getPageFormat=function(I){return b[I]};a=a||"a4";var j={COMPAT:"compat",ADVANCED:"advanced"},S=j.COMPAT;function A(){this.saveGraphicsState(),xe(new Pt(yt,0,0,-yt,0,Gl()*yt).toString()+" cm"),this.setFontSize(this.getFontSize()/yt),d="n",S=j.ADVANCED}function P(){this.restoreGraphicsState(),d="S",S=j.COMPAT}var L=x.__private__.combineFontStyleAndFontWeight=function(I,se){if(I=="bold"&&se=="normal"||I=="bold"&&se==400||I=="normal"&&se=="italic"||I=="bold"&&se=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return se&&(I=se==400||se==="normal"?I==="italic"?"italic":"normal":se!=700&&se!=="bold"||I!=="normal"?(se==700?"bold":se)+""+I:"bold"),I};x.advancedAPI=function(I){var se=S===j.COMPAT;return se&&A.call(this),typeof I!="function"||(I(this),se&&P.call(this)),this},x.compatAPI=function(I){var se=S===j.ADVANCED;return se&&P.call(this),typeof I!="function"||(I(this),se&&A.call(this)),this},x.isAdvancedAPI=function(){return S===j.ADVANCED};var O,R=function(I){if(S!==j.ADVANCED)throw new Error(I+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},q=x.roundToPrecision=x.__private__.roundToPrecision=function(I,se){var be=n||se;if(isNaN(I)||isNaN(be))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return I.toFixed(be).replace(/0+$/,"")};O=x.hpf=x.__private__.hpf=typeof u=="number"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return q(I,u)}:u==="smart"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return q(I,I>-1&&I<1?16:5)}:function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return q(I,16)};var U=x.f2=x.__private__.f2=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f2");return q(I,2)},D=x.__private__.f3=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f3");return q(I,3)},M=x.scale=x.__private__.scale=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.scale");return S===j.COMPAT?I*yt:S===j.ADVANCED?I:void 0},G=function(I){return S===j.COMPAT?Gl()-I:S===j.ADVANCED?I:void 0},Y=function(I){return M(G(I))};x.__private__.setPrecision=x.setPrecision=function(I){typeof parseInt(I,10)=="number"&&(n=parseInt(I,10))};var Z,X="00000000000000000000000000000000",re=x.__private__.getFileId=function(){return X},z=x.__private__.setFileId=function(I){return X=I!==void 0&&/^[a-fA-F0-9]{32}$/.test(I)?I.toUpperCase():X.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),f!==null&&(Ar=new Rp(f.userPermissions,f.userPassword,f.ownerPassword,X)),X};x.setFileId=function(I){return z(I),this},x.getFileId=function(){return re()};var te=x.__private__.convertDateToPDFDate=function(I){var se=I.getTimezoneOffset(),be=se<0?"+":"-",_e=Math.floor(Math.abs(se/60)),De=Math.abs(se%60),He=[be,H(_e),"'",H(De),"'"].join("");return["D:",I.getFullYear(),H(I.getMonth()+1),H(I.getDate()),H(I.getHours()),H(I.getMinutes()),H(I.getSeconds()),He].join("")},le=x.__private__.convertPDFDateToDate=function(I){var se=parseInt(I.substr(2,4),10),be=parseInt(I.substr(6,2),10)-1,_e=parseInt(I.substr(8,2),10),De=parseInt(I.substr(10,2),10),He=parseInt(I.substr(12,2),10),nt=parseInt(I.substr(14,2),10);return new Date(se,be,_e,De,He,nt,0)},Q=x.__private__.setCreationDate=function(I){var se;if(I===void 0&&(I=new Date),I instanceof Date)se=te(I);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(I))throw new Error("Invalid argument passed to jsPDF.setCreationDate");se=I}return Z=se},T=x.__private__.getCreationDate=function(I){var se=Z;return I==="jsDate"&&(se=le(Z)),se};x.setCreationDate=function(I){return Q(I),this},x.getCreationDate=function(I){return T(I)};var B,H=x.__private__.padd2=function(I){return("0"+parseInt(I)).slice(-2)},ee=x.__private__.padd2Hex=function(I){return("00"+(I=I.toString())).substr(I.length)},ce=0,he=[],W=[],J=0,pe=[],ue=[],me=!1,je=W,ze=function(){ce=0,J=0,W=[],he=[],pe=[],Ho=Fn(),qa=Fn()};x.__private__.setCustomOutputDestination=function(I){me=!0,je=I};var Te=function(I){me||(je=I)};x.__private__.resetCustomOutputDestination=function(){me=!1,je=W};var xe=x.__private__.out=function(I){return I=I.toString(),J+=I.length+1,je.push(I),je},ht=x.__private__.write=function(I){return xe(arguments.length===1?I.toString():Array.prototype.join.call(arguments," "))},gt=x.__private__.getArrayBuffer=function(I){for(var se=I.length,be=new ArrayBuffer(se),_e=new Uint8Array(be);se--;)_e[se]=I.charCodeAt(se);return be},Ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Ye};var dt=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(I){return dt=S===j.ADVANCED?I/yt:I,this};var ft,st=x.__private__.getFontSize=x.getFontSize=function(){return S===j.COMPAT?dt:dt*yt},Ct=e.R2L||!1;x.__private__.setR2L=x.setR2L=function(I){return Ct=I,this},x.__private__.getR2L=x.getR2L=function(){return Ct};var Vt,Zt=x.__private__.setZoomMode=function(I){var se=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(I))ft=I;else if(isNaN(I)){if(se.indexOf(I)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+I+'" is not recognized.');ft=I}else ft=parseInt(I,10)};x.__private__.getZoomMode=function(){return ft};var sn,yn=x.__private__.setPageMode=function(I){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(I)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+I+'" is not recognized.');Vt=I};x.__private__.getPageMode=function(){return Vt};var Pn=x.__private__.setLayoutMode=function(I){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(I)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+I+'" is not recognized.');sn=I};x.__private__.getLayoutMode=function(){return sn},x.__private__.setDisplayMode=x.setDisplayMode=function(I,se,be){return Zt(I),Pn(se),yn(be),this};var Ut={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(I){if(Object.keys(Ut).indexOf(I)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ut[I]},x.__private__.getDocumentProperties=function(){return Ut},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(I){for(var se in Ut)Ut.hasOwnProperty(se)&&I[se]&&(Ut[se]=I[se]);return this},x.__private__.setDocumentProperty=function(I,se){if(Object.keys(Ut).indexOf(I)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ut[I]=se};var Qt,yt,Cr,_n,pi,Un={},Gn={},gi=[],wn={},vs={},dr={},ys={},Ps=null,hr=0,mt=[],Ht=new M6(x),vr=e.hotfixes||[],Dn={},As={},Yn=[],Pt=function I(se,be,_e,De,He,nt){if(!(this instanceof I))return new I(se,be,_e,De,He,nt);isNaN(se)&&(se=1),isNaN(be)&&(be=0),isNaN(_e)&&(_e=0),isNaN(De)&&(De=1),isNaN(He)&&(He=0),isNaN(nt)&&(nt=0),this._matrix=[se,be,_e,De,He,nt]};Object.defineProperty(Pt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(Pt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(Pt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(Pt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(Pt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(Pt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(Pt.prototype,"a",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(Pt.prototype,"b",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(Pt.prototype,"c",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(Pt.prototype,"d",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(Pt.prototype,"e",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(Pt.prototype,"f",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(Pt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Pt.prototype.join=function(I){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(O).join(I)},Pt.prototype.multiply=function(I){var se=I.sx*this.sx+I.shy*this.shx,be=I.sx*this.shy+I.shy*this.sy,_e=I.shx*this.sx+I.sy*this.shx,De=I.shx*this.shy+I.sy*this.sy,He=I.tx*this.sx+I.ty*this.shx+this.tx,nt=I.tx*this.shy+I.ty*this.sy+this.ty;return new Pt(se,be,_e,De,He,nt)},Pt.prototype.decompose=function(){var I=this.sx,se=this.shy,be=this.shx,_e=this.sy,De=this.tx,He=this.ty,nt=Math.sqrt(I*I+se*se),jt=(I/=nt)*be+(se/=nt)*_e;be-=I*jt,_e-=se*jt;var Bt=Math.sqrt(be*be+_e*_e);return jt/=Bt,I*(_e/=Bt)<se*(be/=Bt)&&(I=-I,se=-se,jt=-jt,nt=-nt),{scale:new Pt(nt,0,0,Bt,0,0),translate:new Pt(1,0,0,1,De,He),rotate:new Pt(I,se,-se,I,0,0),skew:new Pt(1,0,jt,1,0,0)}},Pt.prototype.toString=function(I){return this.join(" ")},Pt.prototype.inversed=function(){var I=this.sx,se=this.shy,be=this.shx,_e=this.sy,De=this.tx,He=this.ty,nt=1/(I*_e-se*be),jt=_e*nt,Bt=-se*nt,on=-be*nt,an=I*nt;return new Pt(jt,Bt,on,an,-jt*De-on*He,-Bt*De-an*He)},Pt.prototype.applyToPoint=function(I){var se=I.x*this.sx+I.y*this.shx+this.tx,be=I.x*this.shy+I.y*this.sy+this.ty;return new yo(se,be)},Pt.prototype.applyToRectangle=function(I){var se=this.applyToPoint(I),be=this.applyToPoint(new yo(I.x+I.w,I.y+I.h));return new Kl(se.x,se.y,be.x-se.x,be.y-se.y)},Pt.prototype.clone=function(){var I=this.sx,se=this.shy,be=this.shx,_e=this.sy,De=this.tx,He=this.ty;return new Pt(I,se,be,_e,De,He)},x.Matrix=Pt;var bs=x.matrixMult=function(I,se){return se.multiply(I)},fr=new Pt(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=fr;var mr=function(I,se){if(!vs[I]){var be=(se instanceof Bf?"Sh":"P")+(Object.keys(wn).length+1).toString(10);se.id=be,vs[I]=be,wn[be]=se,Ht.publish("addPattern",se)}};x.ShadingPattern=Bf,x.TilingPattern=qp,x.addShadingPattern=function(I,se){return R("addShadingPattern()"),mr(I,se),this},x.beginTilingPattern=function(I){R("beginTilingPattern()"),Ym(I.boundingBox[0],I.boundingBox[1],I.boundingBox[2]-I.boundingBox[0],I.boundingBox[3]-I.boundingBox[1],I.matrix)},x.endTilingPattern=function(I,se){R("endTilingPattern()"),se.stream=ue[B].join(`
`),mr(I,se),Ht.publish("endTilingPattern",se),Yn.pop().restore()};var pr=x.__private__.newObject=function(){var I=Fn();return ks(I,!0),I},Fn=x.__private__.newObjectDeferred=function(){return ce++,he[ce]=function(){return J},ce},ks=function(I,se){return se=typeof se=="boolean"&&se,he[I]=J,se&&xe(I+" 0 obj"),I},Ml=x.__private__.newAdditionalObject=function(){var I={objId:Fn(),content:""};return pe.push(I),I},Ho=Fn(),qa=Fn(),za=x.__private__.decodeColorString=function(I){var se=I.split(" ");if(se.length!==2||se[1]!=="g"&&se[1]!=="G")se.length===5&&(se[4]==="k"||se[4]==="K")&&(se=[(1-se[0])*(1-se[3]),(1-se[1])*(1-se[3]),(1-se[2])*(1-se[3]),"r"]);else{var be=parseFloat(se[0]);se=[be,be,be,"r"]}for(var _e="#",De=0;De<3;De++)_e+=("0"+Math.floor(255*parseFloat(se[De])).toString(16)).slice(-2);return _e},Es=x.__private__.encodeColorString=function(I){var se;typeof I=="string"&&(I={ch1:I});var be=I.ch1,_e=I.ch2,De=I.ch3,He=I.ch4,nt=I.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof be=="string"&&be.charAt(0)!=="#"){var jt=new SG(be);if(jt.ok)be=jt.toHex();else if(!/^\d*\.?\d*$/.test(be))throw new Error('Invalid color "'+be+'" passed to jsPDF.encodeColorString.')}if(typeof be=="string"&&/^#[0-9A-Fa-f]{3}$/.test(be)&&(be="#"+be[1]+be[1]+be[2]+be[2]+be[3]+be[3]),typeof be=="string"&&/^#[0-9A-Fa-f]{6}$/.test(be)){var Bt=parseInt(be.substr(1),16);be=Bt>>16&255,_e=Bt>>8&255,De=255&Bt}if(_e===void 0||He===void 0&&be===_e&&_e===De)if(typeof be=="string")se=be+" "+nt[0];else switch(I.precision){case 2:se=U(be/255)+" "+nt[0];break;case 3:default:se=D(be/255)+" "+nt[0]}else if(He===void 0||cr(He)==="object"){if(He&&!isNaN(He.a)&&He.a===0)return se=["1.","1.","1.",nt[1]].join(" ");if(typeof be=="string")se=[be,_e,De,nt[1]].join(" ");else switch(I.precision){case 2:se=[U(be/255),U(_e/255),U(De/255),nt[1]].join(" ");break;default:case 3:se=[D(be/255),D(_e/255),D(De/255),nt[1]].join(" ")}}else if(typeof be=="string")se=[be,_e,De,He,nt[2]].join(" ");else switch(I.precision){case 2:se=[U(be),U(_e),U(De),U(He),nt[2]].join(" ");break;case 3:default:se=[D(be),D(_e),D(De),D(He),nt[2]].join(" ")}return se},Ua=x.__private__.getFilters=function(){return l},Wi=x.__private__.putStream=function(I){var se=(I=I||{}).data||"",be=I.filters||Ua(),_e=I.alreadyAppliedFilters||[],De=I.addLength1||!1,He=se.length,nt=I.objectId,jt=function(zs){return zs};if(f!==null&&nt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(jt=Ar.encryptor(nt,0));var Bt={};be===!0&&(be=["FlateEncode"]);var on=I.additionalKeyValues||[],an=(Bt=Yt.API.processDataByFilters!==void 0?Yt.API.processDataByFilters(se,be):{data:se,reverseChain:[]}).reverseChain+(Array.isArray(_e)?_e.join(" "):_e.toString());if(Bt.data.length!==0&&(on.push({key:"Length",value:Bt.data.length}),De===!0&&on.push({key:"Length1",value:He})),an.length!=0)if(an.split("/").length-1==1)on.push({key:"Filter",value:an});else{on.push({key:"Filter",value:"["+an+"]"});for(var Sn=0;Sn<on.length;Sn+=1)if(on[Sn].key==="DecodeParms"){for(var kr=[],Ir=0;Ir<Bt.reverseChain.split("/").length-1;Ir+=1)kr.push("null");kr.push(on[Sn].value),on[Sn].value="["+kr.join(" ")+"]"}}xe("<<");for(var Gr=0;Gr<on.length;Gr++)xe("/"+on[Gr].key+" "+on[Gr].value);xe(">>"),Bt.data.length!==0&&(xe("stream"),xe(jt(Bt.data)),xe("endstream"))},mo=x.__private__.putPage=function(I){var se=I.number,be=I.data,_e=I.objId,De=I.contentsObjId;ks(_e,!0),xe("<</Type /Page"),xe("/Parent "+I.rootDictionaryObjId+" 0 R"),xe("/Resources "+I.resourceDictionaryObjId+" 0 R"),xe("/MediaBox ["+parseFloat(O(I.mediaBox.bottomLeftX))+" "+parseFloat(O(I.mediaBox.bottomLeftY))+" "+O(I.mediaBox.topRightX)+" "+O(I.mediaBox.topRightY)+"]"),I.cropBox!==null&&xe("/CropBox ["+O(I.cropBox.bottomLeftX)+" "+O(I.cropBox.bottomLeftY)+" "+O(I.cropBox.topRightX)+" "+O(I.cropBox.topRightY)+"]"),I.bleedBox!==null&&xe("/BleedBox ["+O(I.bleedBox.bottomLeftX)+" "+O(I.bleedBox.bottomLeftY)+" "+O(I.bleedBox.topRightX)+" "+O(I.bleedBox.topRightY)+"]"),I.trimBox!==null&&xe("/TrimBox ["+O(I.trimBox.bottomLeftX)+" "+O(I.trimBox.bottomLeftY)+" "+O(I.trimBox.topRightX)+" "+O(I.trimBox.topRightY)+"]"),I.artBox!==null&&xe("/ArtBox ["+O(I.artBox.bottomLeftX)+" "+O(I.artBox.bottomLeftY)+" "+O(I.artBox.topRightX)+" "+O(I.artBox.topRightY)+"]"),typeof I.userUnit=="number"&&I.userUnit!==1&&xe("/UserUnit "+I.userUnit),Ht.publish("putPage",{objId:_e,pageContext:mt[se],pageNumber:se,page:be}),xe("/Contents "+De+" 0 R"),xe(">>"),xe("endobj");var He=be.join(`
`);return S===j.ADVANCED&&(He+=`
Q`),ks(De,!0),Wi({data:He,filters:Ua(),objectId:De}),xe("endobj"),_e},Fl=x.__private__.putPages=function(){var I,se,be=[];for(I=1;I<=hr;I++)mt[I].objId=Fn(),mt[I].contentsObjId=Fn();for(I=1;I<=hr;I++)be.push(mo({number:I,data:ue[I],objId:mt[I].objId,contentsObjId:mt[I].contentsObjId,mediaBox:mt[I].mediaBox,cropBox:mt[I].cropBox,bleedBox:mt[I].bleedBox,trimBox:mt[I].trimBox,artBox:mt[I].artBox,userUnit:mt[I].userUnit,rootDictionaryObjId:Ho,resourceDictionaryObjId:qa}));ks(Ho,!0),xe("<</Type /Pages");var _e="/Kids [";for(se=0;se<hr;se++)_e+=be[se]+" 0 R ";xe(_e+"]"),xe("/Count "+hr),xe(">>"),xe("endobj"),Ht.publish("postPutPages")},Fc=function(I){Ht.publish("putFont",{font:I,out:xe,newObject:pr,putStream:Wi}),I.isAlreadyPutted!==!0&&(I.objectNumber=pr(),xe("<<"),xe("/Type /Font"),xe("/BaseFont /"+Dp(I.postScriptName)),xe("/Subtype /Type1"),typeof I.encoding=="string"&&xe("/Encoding /"+I.encoding),xe("/FirstChar 32"),xe("/LastChar 255"),xe(">>"),xe("endobj"))},Bc=function(){for(var I in Un)Un.hasOwnProperty(I)&&(m===!1||m===!0&&g.hasOwnProperty(I))&&Fc(Un[I])},$c=function(I){I.objectNumber=pr();var se=[];se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Form"}),se.push({key:"BBox",value:"["+[O(I.x),O(I.y),O(I.x+I.width),O(I.y+I.height)].join(" ")+"]"}),se.push({key:"Matrix",value:"["+I.matrix.toString()+"]"});var be=I.pages[1].join(`
`);Wi({data:be,additionalKeyValues:se,objectId:I.objectNumber}),xe("endobj")},Xu=function(){for(var I in Dn)Dn.hasOwnProperty(I)&&$c(Dn[I])},qm=function(I,se){var be,_e=[],De=1/(se-1);for(be=0;be<1;be+=De)_e.push(be);if(_e.push(1),I[0].offset!=0){var He={offset:0,color:I[0].color};I.unshift(He)}if(I[I.length-1].offset!=1){var nt={offset:1,color:I[I.length-1].color};I.push(nt)}for(var jt="",Bt=0,on=0;on<_e.length;on++){for(be=_e[on];be>I[Bt+1].offset;)Bt++;var an=I[Bt].offset,Sn=(be-an)/(I[Bt+1].offset-an),kr=I[Bt].color,Ir=I[Bt+1].color;jt+=ee(Math.round((1-Sn)*kr[0]+Sn*Ir[0]).toString(16))+ee(Math.round((1-Sn)*kr[1]+Sn*Ir[1]).toString(16))+ee(Math.round((1-Sn)*kr[2]+Sn*Ir[2]).toString(16))}return jt.trim()},Pr=function(I,se){se||(se=21);var be=pr(),_e=qm(I.colors,se),De=[];De.push({key:"FunctionType",value:"0"}),De.push({key:"Domain",value:"[0.0 1.0]"}),De.push({key:"Size",value:"["+se+"]"}),De.push({key:"BitsPerSample",value:"8"}),De.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),De.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Wi({data:_e,additionalKeyValues:De,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:be}),xe("endobj"),I.objectNumber=pr(),xe("<< /ShadingType "+I.type),xe("/ColorSpace /DeviceRGB");var He="/Coords ["+O(parseFloat(I.coords[0]))+" "+O(parseFloat(I.coords[1]))+" ";I.type===2?He+=O(parseFloat(I.coords[2]))+" "+O(parseFloat(I.coords[3])):He+=O(parseFloat(I.coords[2]))+" "+O(parseFloat(I.coords[3]))+" "+O(parseFloat(I.coords[4]))+" "+O(parseFloat(I.coords[5])),xe(He+="]"),I.matrix&&xe("/Matrix ["+I.matrix.toString()+"]"),xe("/Function "+be+" 0 R"),xe("/Extend [true true]"),xe(">>"),xe("endobj")},v0=function(I,se){var be=Fn(),_e=pr();se.push({resourcesOid:be,objectOid:_e}),I.objectNumber=_e;var De=[];De.push({key:"Type",value:"/Pattern"}),De.push({key:"PatternType",value:"1"}),De.push({key:"PaintType",value:"1"}),De.push({key:"TilingType",value:"1"}),De.push({key:"BBox",value:"["+I.boundingBox.map(O).join(" ")+"]"}),De.push({key:"XStep",value:O(I.xStep)}),De.push({key:"YStep",value:O(I.yStep)}),De.push({key:"Resources",value:be+" 0 R"}),I.matrix&&De.push({key:"Matrix",value:"["+I.matrix.toString()+"]"}),Wi({data:I.stream,additionalKeyValues:De,objectId:I.objectNumber}),xe("endobj")},Bl=function(I){var se;for(se in wn)wn.hasOwnProperty(se)&&(wn[se]instanceof Bf?Pr(wn[se]):wn[se]instanceof qp&&v0(wn[se],I))},Xh=function(I){for(var se in I.objectNumber=pr(),xe("<<"),I)switch(se){case"opacity":xe("/ca "+U(I[se]));break;case"stroke-opacity":xe("/CA "+U(I[se]))}xe(">>"),xe("endobj")},Ju=function(){var I;for(I in dr)dr.hasOwnProperty(I)&&Xh(dr[I])},Jh=function(){for(var I in xe("/XObject <<"),Dn)Dn.hasOwnProperty(I)&&Dn[I].objectNumber>=0&&xe("/"+I+" "+Dn[I].objectNumber+" 0 R");Ht.publish("putXobjectDict"),xe(">>")},zm=function(){Ar.oid=pr(),xe("<<"),xe("/Filter /Standard"),xe("/V "+Ar.v),xe("/R "+Ar.r),xe("/U <"+Ar.toHexString(Ar.U)+">"),xe("/O <"+Ar.toHexString(Ar.O)+">"),xe("/P "+Ar.P),xe(">>"),xe("endobj")},qc=function(){for(var I in xe("/Font <<"),Un)Un.hasOwnProperty(I)&&(m===!1||m===!0&&g.hasOwnProperty(I))&&xe("/"+I+" "+Un[I].objectNumber+" 0 R");xe(">>")},pa=function(){if(Object.keys(wn).length>0){for(var I in xe("/Shading <<"),wn)wn.hasOwnProperty(I)&&wn[I]instanceof Bf&&wn[I].objectNumber>=0&&xe("/"+I+" "+wn[I].objectNumber+" 0 R");Ht.publish("putShadingPatternDict"),xe(">>")}},Zu=function(I){if(Object.keys(wn).length>0){for(var se in xe("/Pattern <<"),wn)wn.hasOwnProperty(se)&&wn[se]instanceof x.TilingPattern&&wn[se].objectNumber>=0&&wn[se].objectNumber<I&&xe("/"+se+" "+wn[se].objectNumber+" 0 R");Ht.publish("putTilingPatternDict"),xe(">>")}},Ki=function(){if(Object.keys(dr).length>0){var I;for(I in xe("/ExtGState <<"),dr)dr.hasOwnProperty(I)&&dr[I].objectNumber>=0&&xe("/"+I+" "+dr[I].objectNumber+" 0 R");Ht.publish("putGStateDict"),xe(">>")}},zr=function(I){ks(I.resourcesOid,!0),xe("<<"),xe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),qc(),pa(),Zu(I.objectOid),Ki(),Jh(),xe(">>"),xe("endobj")},Um=function(){var I=[];Bc(),Ju(),Xu(),Bl(I),Ht.publish("putResources"),I.forEach(zr),zr({resourcesOid:qa,objectOid:Number.MAX_SAFE_INTEGER}),Ht.publish("postPutResources")},Vm=function(){Ht.publish("putAdditionalObjects");for(var I=0;I<pe.length;I++){var se=pe[I];ks(se.objId,!0),xe(se.content),xe("endobj")}Ht.publish("postPutAdditionalObjects")},zc=function(I){Gn[I.fontName]=Gn[I.fontName]||{},Gn[I.fontName][I.fontStyle]=I.id},$l=function(I,se,be,_e,De){var He={id:"F"+(Object.keys(Un).length+1).toString(10),postScriptName:I,fontName:se,fontStyle:be,encoding:_e,isStandardFont:De||!1,metadata:{}};return Ht.publish("addFont",{font:He,instance:this}),Un[He.id]=He,zc(He),He.id},Uc=function(I){for(var se=0,be=Ye.length;se<be;se++){var _e=$l.call(this,I[se][0],I[se][1],I[se][2],Ye[se][3],!0);m===!1&&(g[_e]=!0);var De=I[se][0].split("-");zc({id:_e,fontName:De[0],fontStyle:De[1]||""})}Ht.publish("addFonts",{fonts:Un,dictionary:Gn})},xi=function(I){return I.foo=function(){try{return I.apply(this,arguments)}catch(_e){var se=_e.stack||"";~se.indexOf(" at ")&&(se=se.split(" at ")[1]);var be="Error in function "+se.split(`
`)[0].split("<")[0]+": "+_e.message;if(!en.console)throw new Error(be);en.console.error(be,_e),en.alert&&alert(be)}},I.foo.bar=I,I.foo},ed=function(I,se){var be,_e,De,He,nt,jt,Bt,on,an;if(De=(se=se||{}).sourceEncoding||"Unicode",nt=se.outputEncoding,(se.autoencode||nt)&&Un[Qt].metadata&&Un[Qt].metadata[De]&&Un[Qt].metadata[De].encoding&&(He=Un[Qt].metadata[De].encoding,!nt&&Un[Qt].encoding&&(nt=Un[Qt].encoding),!nt&&He.codePages&&(nt=He.codePages[0]),typeof nt=="string"&&(nt=He[nt]),nt)){for(Bt=!1,jt=[],be=0,_e=I.length;be<_e;be++)(on=nt[I.charCodeAt(be)])?jt.push(String.fromCharCode(on)):jt.push(I[be]),jt[be].charCodeAt(0)>>8&&(Bt=!0);I=jt.join("")}for(be=I.length;Bt===void 0&&be!==0;)I.charCodeAt(be-1)>>8&&(Bt=!0),be--;if(!Bt)return I;for(jt=se.noBOM?[]:[254,255],be=0,_e=I.length;be<_e;be++){if((an=(on=I.charCodeAt(be))>>8)>>8)throw new Error("Character at position "+be+" of string '"+I+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jt.push(an),jt.push(on-(an<<8))}return String.fromCharCode.apply(void 0,jt)},vi=x.__private__.pdfEscape=x.pdfEscape=function(I,se){return ed(I,se).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vc=x.__private__.beginPage=function(I){ue[++hr]=[],mt[hr]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(I[0]),topRightY:Number(I[1])}},ql(hr),Te(ue[B])},Zh=function(I,se){var be,_e,De;switch(r=se||r,typeof I=="string"&&(be=N(I.toLowerCase()),Array.isArray(be)&&(_e=be[0],De=be[1])),Array.isArray(I)&&(_e=I[0]*yt,De=I[1]*yt),isNaN(_e)&&(_e=a[0],De=a[1]),(_e>14400||De>14400)&&(br.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),_e=Math.min(14400,_e),De=Math.min(14400,De)),a=[_e,De],r.substr(0,1)){case"l":De>_e&&(a=[De,_e]);break;case"p":_e>De&&(a=[De,_e])}Vc(a),Yc(rf),xe(yi),af!==0&&xe(af+" J"),Xc!==0&&xe(Xc+" j"),Ht.publish("addPage",{pageNumber:hr})},ef=function(I){I>0&&I<=hr&&(ue.splice(I,1),mt.splice(I,1),hr--,B>hr&&(B=hr),this.setPage(B))},ql=function(I){I>0&&I<=hr&&(B=I)},y0=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return ue.length-1},td=function(I,se,be){var _e,De=void 0;return be=be||{},I=I!==void 0?I:Un[Qt].fontName,se=se!==void 0?se:Un[Qt].fontStyle,_e=I.toLowerCase(),Gn[_e]!==void 0&&Gn[_e][se]!==void 0?De=Gn[_e][se]:Gn[I]!==void 0&&Gn[I][se]!==void 0?De=Gn[I][se]:be.disableWarning===!1&&br.warn("Unable to look up font label for font '"+I+"', '"+se+"'. Refer to getFontList() for available fonts."),De||be.noFallback||(De=Gn.times[se])==null&&(De=Gn.times.normal),De},Bn=x.__private__.putInfo=function(){var I=pr(),se=function(_e){return _e};for(var be in f!==null&&(se=Ar.encryptor(I,0)),xe("<<"),xe("/Producer ("+vi(se("jsPDF "+Yt.version))+")"),Ut)Ut.hasOwnProperty(be)&&Ut[be]&&xe("/"+be.substr(0,1).toUpperCase()+be.substr(1)+" ("+vi(se(Ut[be]))+")");xe("/CreationDate ("+vi(se(Z))+")"),xe(">>"),xe("endobj")},nd=x.__private__.putCatalog=function(I){var se=(I=I||{}).rootDictionaryObjId||Ho;switch(pr(),xe("<<"),xe("/Type /Catalog"),xe("/Pages "+se+" 0 R"),ft||(ft="fullwidth"),ft){case"fullwidth":xe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":xe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":xe("/OpenAction [3 0 R /Fit]");break;case"original":xe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var be=""+ft;be.substr(be.length-1)==="%"&&(ft=parseInt(ft)/100),typeof ft=="number"&&xe("/OpenAction [3 0 R /XYZ null null "+U(ft)+"]")}switch(sn||(sn="continuous"),sn){case"continuous":xe("/PageLayout /OneColumn");break;case"single":xe("/PageLayout /SinglePage");break;case"two":case"twoleft":xe("/PageLayout /TwoColumnLeft");break;case"tworight":xe("/PageLayout /TwoColumnRight")}Vt&&xe("/PageMode /"+Vt),Ht.publish("putCatalog"),xe(">>"),xe("endobj")},Hm=x.__private__.putTrailer=function(){xe("trailer"),xe("<<"),xe("/Size "+(ce+1)),xe("/Root "+ce+" 0 R"),xe("/Info "+(ce-1)+" 0 R"),f!==null&&xe("/Encrypt "+Ar.oid+" 0 R"),xe("/ID [ <"+X+"> <"+X+"> ]"),xe(">>")},tf=x.__private__.putHeader=function(){xe("%PDF-"+v),xe("%ºß¬à")},Wm=x.__private__.putXRef=function(){var I="0000000000";xe("xref"),xe("0 "+(ce+1)),xe("0000000000 65535 f ");for(var se=1;se<=ce;se++)typeof he[se]=="function"?xe((I+he[se]()).slice(-10)+" 00000 n "):he[se]!==void 0?xe((I+he[se]).slice(-10)+" 00000 n "):xe("0000000000 00000 n ")},po=x.__private__.buildDocument=function(){ze(),Te(W),Ht.publish("buildDocument"),tf(),Fl(),Vm(),Um(),f!==null&&zm(),Bn(),nd();var I=J;return Wm(),Hm(),xe("startxref"),xe(""+I),xe("%%EOF"),Te(ue[B]),W.join(`
`)},Hc=x.__private__.getBlob=function(I){return new Blob([gt(I)],{type:"application/pdf"})},zl=x.output=x.__private__.output=xi((function(I,se){switch(typeof(se=se||{})=="string"?se={filename:se}:se.filename=se.filename||"generated.pdf",I){case void 0:return po();case"save":x.save(se.filename);break;case"arraybuffer":return gt(po());case"blob":return Hc(po());case"bloburi":case"bloburl":if(en.URL!==void 0&&typeof en.URL.createObjectURL=="function")return en.URL&&en.URL.createObjectURL(Hc(po()))||void 0;br.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var be="",_e=po();try{be=ok(_e)}catch{be=ok(unescape(encodeURIComponent(_e)))}return"data:application/pdf;filename="+se.filename+";base64,"+be;case"pdfobjectnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var De="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",He=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';se.pdfObjectUrl&&(De=se.pdfObjectUrl,He="");var nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+De+'"'+He+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(se)+");<\/script></body></html>",jt=en.open();return jt!==null&&jt.document.write(nt),jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var Bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(se.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+se.filename+'" width="500px" height="400px" /></body></html>',on=en.open();if(on!==null){on.document.write(Bt);var an=this;on.document.documentElement.querySelector("#pdfViewer").onload=function(){on.document.title=se.filename,on.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(an.output("bloburl"))}}return on}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(en)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Sn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",se)+'"></iframe></body></html>',kr=en.open();if(kr!==null&&(kr.document.write(Sn),kr.document.title=se.filename),kr||typeof safari>"u")return kr;break;case"datauri":case"dataurl":return en.document.location.href=this.output("datauristring",se);default:return null}})),Wc=function(I){return Array.isArray(vr)===!0&&vr.indexOf(I)>-1};switch(s){case"pt":yt=1;break;case"mm":yt=72/25.4;break;case"cm":yt=72/2.54;break;case"in":yt=72;break;case"px":yt=Wc("px_scaling")==1?.75:96/72;break;case"pc":case"em":yt=12;break;case"ex":yt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);yt=s}var Ar=null;Q(),z();var go=function(I){return f!==null?Ar.encryptor(I,0):function(se){return se}},Va=x.__private__.getPageInfo=x.getPageInfo=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mt[I].objId,pageNumber:I,pageContext:mt[I]}},Gt=x.__private__.getPageInfoByObjId=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var se in mt)if(mt[se].objId===I)break;return Va(se)},Kc=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:mt[B].objId,pageNumber:B,pageContext:mt[B]}};x.addPage=function(){return Zh.apply(this,arguments),this},x.setPage=function(){return ql.apply(this,arguments),Te.call(this,ue[B]),this},x.insertPage=function(I){return this.addPage(),this.movePage(B,I),this},x.movePage=function(I,se){var be,_e;if(I>se){be=ue[I],_e=mt[I];for(var De=I;De>se;De--)ue[De]=ue[De-1],mt[De]=mt[De-1];ue[se]=be,mt[se]=_e,this.setPage(se)}else if(I<se){be=ue[I],_e=mt[I];for(var He=I;He<se;He++)ue[He]=ue[He+1],mt[He]=mt[He+1];ue[se]=be,mt[se]=_e,this.setPage(se)}return this},x.deletePage=function(){return ef.apply(this,arguments),this},x.__private__.text=x.text=function(I,se,be,_e,De){var He,nt,jt,Bt,on,an,Sn,kr,Ir,Gr=(_e=_e||{}).scope||this;if(typeof I=="number"&&typeof se=="number"&&(typeof be=="string"||Array.isArray(be))){var zs=be;be=se,se=I,I=zs}if(arguments[3]instanceof Pt?(R("The transform parameter of text() with a Matrix value"),Ir=De):(jt=arguments[4],Bt=arguments[5],cr(Sn=arguments[3])==="object"&&Sn!==null||(typeof jt=="string"&&(Bt=jt,jt=null),typeof Sn=="string"&&(Bt=Sn,Sn=null),typeof Sn=="number"&&(jt=Sn,Sn=null),_e={flags:Sn,angle:jt,align:Bt})),isNaN(se)||isNaN(be)||I==null)throw new Error("Invalid arguments passed to jsPDF.text");if(I.length===0)return Gr;var ws="",Ga=!1,Yi=typeof _e.lineHeightFactor=="number"?_e.lineHeightFactor:Gc,va=Gr.internal.scaleFactor;function Yl(ar){return ar=ar.split("	").join(Array(_e.TabLen||9).join(" ")),vi(ar,Sn)}function cf(ar){for(var Qn,Fr=ar.concat(),Yr=[],jo=Fr.length;jo--;)typeof(Qn=Fr.shift())=="string"?Yr.push(Qn):Array.isArray(ar)&&(Qn.length===1||Qn[1]===void 0&&Qn[2]===void 0)?Yr.push(Qn[0]):Yr.push([Qn[0],Qn[1],Qn[2]]);return Yr}function hd(ar,Qn){var Fr;if(typeof ar=="string")Fr=Qn(ar)[0];else if(Array.isArray(ar)){for(var Yr,jo,jd=ar.concat(),iu=[],hf=jd.length;hf--;)typeof(Yr=jd.shift())=="string"?iu.push(Qn(Yr)[0]):Array.isArray(Yr)&&typeof Yr[0]=="string"&&(jo=Qn(Yr[0],Yr[1],Yr[2]),iu.push([jo[0],jo[1],jo[2]]));Fr=iu}return Fr}var Jc=!1,fd=!0;if(typeof I=="string")Jc=!0;else if(Array.isArray(I)){var md=I.concat();nt=[];for(var Zc,Mr=md.length;Mr--;)(typeof(Zc=md.shift())!="string"||Array.isArray(Zc)&&typeof Zc[0]!="string")&&(fd=!1);Jc=fd}if(Jc===!1)throw new Error('Type of text must be string or Array. "'+I+'" is not recognized.');typeof I=="string"&&(I=I.match(/[\r?\n]/)?I.split(/\r\n|\r|\n/g):[I]);var pd=dt/Gr.internal.scaleFactor,gd=pd*(Yi-1);switch(_e.baseline){case"bottom":be-=gd;break;case"top":be+=pd-gd;break;case"hanging":be+=pd-2*gd;break;case"middle":be+=pd/2-gd}if((an=_e.maxWidth||0)>0&&(typeof I=="string"?I=Gr.splitTextToSize(I,an):Object.prototype.toString.call(I)==="[object Array]"&&(I=I.reduce((function(ar,Qn){return ar.concat(Gr.splitTextToSize(Qn,an))}),[]))),He={text:I,x:se,y:be,options:_e,mutex:{pdfEscape:vi,activeFontKey:Qt,fonts:Un,activeFontSize:dt}},Ht.publish("preProcessText",He),I=He.text,jt=(_e=He.options).angle,!(Ir instanceof Pt)&&jt&&typeof jt=="number"){jt*=Math.PI/180,_e.rotationDirection===0&&(jt=-jt),S===j.ADVANCED&&(jt=-jt);var xd=Math.cos(jt),vd=Math.sin(jt);Ir=new Pt(xd,vd,-vd,xd,0,0)}else jt&&jt instanceof Pt&&(Ir=jt);S!==j.ADVANCED||Ir||(Ir=fr),(on=_e.charSpace||Wl)!==void 0&&(ws+=O(M(on))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(kr=_e.horizontalScale)!==void 0&&(ws+=O(100*kr)+` Tz
`),_e.lang;var ni=-1,eu=_e.renderingMode!==void 0?_e.renderingMode:_e.stroke,Go=Gr.internal.getCurrentPageInfo().pageContext;switch(eu){case 0:case!1:case"fill":ni=0;break;case 1:case!0:case"stroke":ni=1;break;case 2:case"fillThenStroke":ni=2;break;case 3:case"invisible":ni=3;break;case 4:case"fillAndAddForClipping":ni=4;break;case 5:case"strokeAndAddPathForClipping":ni=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ni=6;break;case 7:case"addToPathForClipping":ni=7}var Qm=Go.usedRenderingMode!==void 0?Go.usedRenderingMode:-1;ni!==-1?ws+=ni+` Tr
`:Qm!==-1&&(ws+=`0 Tr
`),ni!==-1&&(Go.usedRenderingMode=ni),Bt=_e.align||"left";var ri,yd=dt*Yi,uf=Gr.internal.pageSize.getWidth(),bd=Un[Qt];on=_e.charSpace||Wl,an=_e.maxWidth||0,Sn=Object.assign({autoencode:!0,noBOM:!0},_e.flags);var bo=[],Ql=function(ar){return Gr.getStringUnitWidth(ar,{font:bd,charSpace:on,fontSize:dt,doKerning:!1})*dt/va};if(Object.prototype.toString.call(I)==="[object Array]"){var si;nt=cf(I),Bt!=="left"&&(ri=nt.map(Ql));var Us,Xl=0;if(Bt==="right"){se-=ri[0],I=[],Mr=nt.length;for(var Yo=0;Yo<Mr;Yo++)Yo===0?(Us=ga(se),si=xa(be)):(Us=M(Xl-ri[Yo]),si=-yd),I.push([nt[Yo],Us,si]),Xl=ri[Yo]}else if(Bt==="center"){se-=ri[0]/2,I=[],Mr=nt.length;for(var Qo=0;Qo<Mr;Qo++)Qo===0?(Us=ga(se),si=xa(be)):(Us=M((Xl-ri[Qo])/2),si=-yd),I.push([nt[Qo],Us,si]),Xl=ri[Qo]}else if(Bt==="left"){I=[],Mr=nt.length;for(var wd=0;wd<Mr;wd++)I.push(nt[wd])}else if(Bt==="justify"&&bd.encoding==="Identity-H"){I=[],Mr=nt.length,an=an!==0?an:uf;for(var Xo=0,$n=0;$n<Mr;$n++)if(si=$n===0?xa(be):-yd,Us=$n===0?ga(se):Xo,$n<Mr-1){var Jo=M((an-ri[$n])/(nt[$n].split(" ").length-1)),Vs=nt[$n].split(" ");I.push([Vs[0]+" ",Us,si]),Xo=0;for(var Qi=1;Qi<Vs.length;Qi++){var tu=(Ql(Vs[Qi-1]+" "+Vs[Qi])-Ql(Vs[Qi]))*va+Jo;Qi==Vs.length-1?I.push([Vs[Qi],tu,0]):I.push([Vs[Qi]+" ",tu,0]),Xo-=tu}}else I.push([nt[$n],Us,si]);I.push(["",Xo,0])}else{if(Bt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(I=[],Mr=nt.length,an=an!==0?an:uf,$n=0;$n<Mr;$n++)si=$n===0?xa(be):-yd,Us=$n===0?ga(se):0,$n<Mr-1?bo.push(O(M((an-ri[$n])/(nt[$n].split(" ").length-1)))):bo.push(0),I.push([nt[$n],Us,si])}}var df=typeof _e.R2L=="boolean"?_e.R2L:Ct;df===!0&&(I=hd(I,(function(ar,Qn,Fr){return[ar.split("").reverse().join(""),Qn,Fr]}))),He={text:I,x:se,y:be,options:_e,mutex:{pdfEscape:vi,activeFontKey:Qt,fonts:Un,activeFontSize:dt}},Ht.publish("postProcessText",He),I=He.text,Ga=He.mutex.isHex||!1;var nu=Un[Qt].encoding;nu!=="WinAnsiEncoding"&&nu!=="StandardEncoding"||(I=hd(I,(function(ar,Qn,Fr){return[Yl(ar),Qn,Fr]}))),nt=cf(I),I=[];for(var ru,su,Xi,Zo=0,wo=1,el=Array.isArray(nt[0])?wo:Zo,tl="",Jl=function(ar,Qn,Fr){var Yr="";return Fr instanceof Pt?(Fr=typeof _e.angle=="number"?bs(Fr,new Pt(1,0,0,1,ar,Qn)):bs(new Pt(1,0,0,1,ar,Qn),Fr),S===j.ADVANCED&&(Fr=bs(new Pt(1,0,0,-1,0,0),Fr)),Yr=Fr.join(" ")+` Tm
`):Yr=O(ar)+" "+O(Qn)+` Td
`,Yr},Ts=0;Ts<nt.length;Ts++){switch(tl="",el){case wo:Xi=(Ga?"<":"(")+nt[Ts][0]+(Ga?">":")"),ru=parseFloat(nt[Ts][1]),su=parseFloat(nt[Ts][2]);break;case Zo:Xi=(Ga?"<":"(")+nt[Ts]+(Ga?">":")"),ru=ga(se),su=xa(be)}bo!==void 0&&bo[Ts]!==void 0&&(tl=bo[Ts]+` Tw
`),Ts===0?I.push(tl+Jl(ru,su,Ir)+Xi):el===Zo?I.push(tl+Xi):el===wo&&I.push(tl+Jl(ru,su,Ir)+Xi)}I=el===Zo?I.join(` Tj
T* `):I.join(` Tj
`),I+=` Tj
`;var bi=`BT
/`;return bi+=Qt+" "+dt+` Tf
`,bi+=O(dt*Yi)+` TL
`,bi+=rs+`
`,bi+=ws,bi+=I,xe(bi+="ET"),g[Qt]=!0,Gr};var xo=x.__private__.clip=x.clip=function(I){return xe(I==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return xo("evenodd")},x.__private__.discardPath=x.discardPath=function(){return xe("n"),this};var vo=x.__private__.isValidStyle=function(I){var se=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(I)!==-1&&(se=!0),se};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(I){return vo(I)&&(d=I),this};var nf=x.__private__.getStyle=x.getStyle=function(I){var se=d;switch(I){case"D":case"S":se="S";break;case"F":se="f";break;case"FD":case"DF":se="B";break;case"f":case"f*":case"B":case"B*":se=I}return se},Ul=x.close=function(){return xe("h"),this};x.stroke=function(){return xe("S"),this},x.fill=function(I){return rd("f",I),this},x.fillEvenOdd=function(I){return rd("f*",I),this},x.fillStroke=function(I){return rd("B",I),this},x.fillStrokeEvenOdd=function(I){return rd("B*",I),this};var rd=function(I,se){cr(se)==="object"?Km(se,I):xe(I)},sd=function(I){I===null||S===j.ADVANCED&&I===void 0||(I=nf(I),xe(I))};function id(I,se,be,_e,De){var He=new qp(se||this.boundingBox,be||this.xStep,_e||this.yStep,this.gState,De||this.matrix);He.stream=this.stream;var nt=I+"$$"+this.cloneIndex+++"$$";return mr(nt,He),He}var Km=function(I,se){var be=vs[I.key],_e=wn[be];if(_e instanceof Bf)xe("q"),xe(b0(se)),_e.gState&&x.setGState(_e.gState),xe(I.matrix.toString()+" cm"),xe("/"+be+" sh"),xe("Q");else if(_e instanceof qp){var De=new Pt(1,0,0,-1,0,Gl());I.matrix&&(De=De.multiply(I.matrix||fr),be=id.call(_e,I.key,I.boundingBox,I.xStep,I.yStep,De).id),xe("q"),xe("/Pattern cs"),xe("/"+be+" scn"),_e.gState&&x.setGState(_e.gState),xe(se),xe("Q")}},b0=function(I){switch(I){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Wo=x.moveTo=function(I,se){return xe(O(M(I))+" "+O(Y(se))+" m"),this},Ha=x.lineTo=function(I,se){return xe(O(M(I))+" "+O(Y(se))+" l"),this},Gi=x.curveTo=function(I,se,be,_e,De,He){return xe([O(M(I)),O(Y(se)),O(M(be)),O(Y(_e)),O(M(De)),O(Y(He)),"c"].join(" ")),this};x.__private__.line=x.line=function(I,se,be,_e,De){if(isNaN(I)||isNaN(se)||isNaN(be)||isNaN(_e)||!vo(De))throw new Error("Invalid arguments passed to jsPDF.line");return S===j.COMPAT?this.lines([[be-I,_e-se]],I,se,[1,1],De||"S"):this.lines([[be-I,_e-se]],I,se,[1,1]).stroke()},x.__private__.lines=x.lines=function(I,se,be,_e,De,He){var nt,jt,Bt,on,an,Sn,kr,Ir,Gr,zs,ws,Ga;if(typeof I=="number"&&(Ga=be,be=se,se=I,I=Ga),_e=_e||[1,1],He=He||!1,isNaN(se)||isNaN(be)||!Array.isArray(I)||!Array.isArray(_e)||!vo(De)||typeof He!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Wo(se,be),nt=_e[0],jt=_e[1],on=I.length,zs=se,ws=be,Bt=0;Bt<on;Bt++)(an=I[Bt]).length===2?(zs=an[0]*nt+zs,ws=an[1]*jt+ws,Ha(zs,ws)):(Sn=an[0]*nt+zs,kr=an[1]*jt+ws,Ir=an[2]*nt+zs,Gr=an[3]*jt+ws,zs=an[4]*nt+zs,ws=an[5]*jt+ws,Gi(Sn,kr,Ir,Gr,zs,ws));return He&&Ul(),sd(De),this},x.path=function(I){for(var se=0;se<I.length;se++){var be=I[se],_e=be.c;switch(be.op){case"m":Wo(_e[0],_e[1]);break;case"l":Ha(_e[0],_e[1]);break;case"c":Gi.apply(this,_e);break;case"h":Ul()}}return this},x.__private__.rect=x.rect=function(I,se,be,_e,De){if(isNaN(I)||isNaN(se)||isNaN(be)||isNaN(_e)||!vo(De))throw new Error("Invalid arguments passed to jsPDF.rect");return S===j.COMPAT&&(_e=-_e),xe([O(M(I)),O(Y(se)),O(M(be)),O(M(_e)),"re"].join(" ")),sd(De),this},x.__private__.triangle=x.triangle=function(I,se,be,_e,De,He,nt){if(isNaN(I)||isNaN(se)||isNaN(be)||isNaN(_e)||isNaN(De)||isNaN(He)||!vo(nt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[be-I,_e-se],[De-be,He-_e],[I-De,se-He]],I,se,[1,1],nt,!0),this},x.__private__.roundedRect=x.roundedRect=function(I,se,be,_e,De,He,nt){if(isNaN(I)||isNaN(se)||isNaN(be)||isNaN(_e)||isNaN(De)||isNaN(He)||!vo(nt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var jt=4/3*(Math.SQRT2-1);return De=Math.min(De,.5*be),He=Math.min(He,.5*_e),this.lines([[be-2*De,0],[De*jt,0,De,He-He*jt,De,He],[0,_e-2*He],[0,He*jt,-De*jt,He,-De,He],[2*De-be,0],[-De*jt,0,-De,-He*jt,-De,-He],[0,2*He-_e],[0,-He*jt,De*jt,-He,De,-He]],I+De,se,[1,1],nt,!0),this},x.__private__.ellipse=x.ellipse=function(I,se,be,_e,De){if(isNaN(I)||isNaN(se)||isNaN(be)||isNaN(_e)||!vo(De))throw new Error("Invalid arguments passed to jsPDF.ellipse");var He=4/3*(Math.SQRT2-1)*be,nt=4/3*(Math.SQRT2-1)*_e;return Wo(I+be,se),Gi(I+be,se-nt,I+He,se-_e,I,se-_e),Gi(I-He,se-_e,I-be,se-nt,I-be,se),Gi(I-be,se+nt,I-He,se+_e,I,se+_e),Gi(I+He,se+_e,I+be,se+nt,I+be,se),sd(De),this},x.__private__.circle=x.circle=function(I,se,be,_e){if(isNaN(I)||isNaN(se)||isNaN(be)||!vo(_e))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(I,se,be,be,_e)},x.setFont=function(I,se,be){return be&&(se=L(se,be)),Qt=td(I,se,{disableWarning:!1}),this};var ad=x.__private__.getFont=x.getFont=function(){return Un[td.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var I,se,be={};for(I in Gn)if(Gn.hasOwnProperty(I))for(se in be[I]=[],Gn[I])Gn[I].hasOwnProperty(se)&&be[I].push(se);return be},x.addFont=function(I,se,be,_e,De){var He=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&He.indexOf(arguments[3])!==-1?De=arguments[3]:arguments[3]&&He.indexOf(arguments[3])==-1&&(be=L(be,_e)),De=De||"Identity-H",$l.call(this,I,se,be,De)};var Gc,rf=e.lineWidth||.200025,Vl=x.__private__.getLineWidth=x.getLineWidth=function(){return rf},Yc=x.__private__.setLineWidth=x.setLineWidth=function(I){return rf=I,xe(O(M(I))+" w"),this};x.__private__.setLineDash=Yt.API.setLineDash=Yt.API.setLineDashPattern=function(I,se){if(I=I||[],se=se||0,isNaN(se)||!Array.isArray(I))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return I=I.map((function(be){return O(M(be))})).join(" "),se=O(M(se)),xe("["+I+"] "+se+" d"),this};var od=x.__private__.getLineHeight=x.getLineHeight=function(){return dt*Gc};x.__private__.getLineHeight=x.getLineHeight=function(){return dt*Gc};var sf=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(I){return typeof(I=I||1.15)=="number"&&(Gc=I),this},Wa=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Gc};sf(e.lineHeight);var ga=x.__private__.getHorizontalCoordinate=function(I){return M(I)},xa=x.__private__.getVerticalCoordinate=function(I){return S===j.ADVANCED?I:mt[B].mediaBox.topRightY-mt[B].mediaBox.bottomLeftY-M(I)},Gm=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(I){return O(ga(I))},Ka=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(I){return O(xa(I))},yi=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return za(yi)},x.__private__.setStrokeColor=x.setDrawColor=function(I,se,be,_e){return yi=Es({ch1:I,ch2:se,ch3:be,ch4:_e,pdfColorType:"draw",precision:2}),xe(yi),this};var ld=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return za(ld)},x.__private__.setFillColor=x.setFillColor=function(I,se,be,_e){return ld=Es({ch1:I,ch2:se,ch3:be,ch4:_e,pdfColorType:"fill",precision:2}),xe(ld),this};var rs=e.textColor||"0 g",Hl=x.__private__.getTextColor=x.getTextColor=function(){return za(rs)};x.__private__.setTextColor=x.setTextColor=function(I,se,be,_e){return rs=Es({ch1:I,ch2:se,ch3:be,ch4:_e,pdfColorType:"text",precision:3}),this};var Wl=e.charSpace,Qc=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(Wl||0)};x.__private__.setCharSpace=x.setCharSpace=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Wl=I,this};var af=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(I){var se=x.CapJoinStyles[I];if(se===void 0)throw new Error("Line cap style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return af=se,xe(se+" J"),this};var Xc=0;x.__private__.setLineJoin=x.setLineJoin=function(I){var se=x.CapJoinStyles[I];if(se===void 0)throw new Error("Line join style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xc=se,xe(se+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(I){if(I=I||0,isNaN(I))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return xe(O(M(I))+" M"),this},x.GState=Q1,x.setGState=function(I){(I=typeof I=="string"?dr[ys[I]]:cd(null,I)).equals(Ps)||(xe("/"+I.id+" gs"),Ps=I)};var cd=function(I,se){if(!I||!ys[I]){var be=!1;for(var _e in dr)if(dr.hasOwnProperty(_e)&&dr[_e].equals(se)){be=!0;break}if(be)se=dr[_e];else{var De="GS"+(Object.keys(dr).length+1).toString(10);dr[De]=se,se.id=De}return I&&(ys[I]=se.id),Ht.publish("addGState",se),se}};x.addGState=function(I,se){return cd(I,se),this},x.saveGraphicsState=function(){return xe("q"),gi.push({key:Qt,size:dt,color:rs}),this},x.restoreGraphicsState=function(){xe("Q");var I=gi.pop();return Qt=I.key,dt=I.size,rs=I.color,Ps=null,this},x.setCurrentTransformationMatrix=function(I){return xe(I.toString()+" cm"),this},x.comment=function(I){return xe("#"+I),this};var yo=function(I,se){var be=I||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return be},set:function(He){isNaN(He)||(be=parseFloat(He))}});var _e=se||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _e},set:function(He){isNaN(He)||(_e=parseFloat(He))}});var De="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return De},set:function(He){De=He.toString()}}),this},Kl=function(I,se,be,_e){yo.call(this,I,se),this.type="rect";var De=be||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return De},set:function(nt){isNaN(nt)||(De=parseFloat(nt))}});var He=_e||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return He},set:function(nt){isNaN(nt)||(He=parseFloat(nt))}}),this},ud=function(){this.page=hr,this.currentPage=B,this.pages=ue.slice(0),this.pagesContext=mt.slice(0),this.x=Cr,this.y=_n,this.matrix=pi,this.width=Ko(B),this.height=Gl(B),this.outputDestination=je,this.id="",this.objectNumber=-1};ud.prototype.restore=function(){hr=this.page,B=this.currentPage,mt=this.pagesContext,ue=this.pages,Cr=this.x,_n=this.y,pi=this.matrix,of(B,this.width),lf(B,this.height),je=this.outputDestination};var Ym=function(I,se,be,_e,De){Yn.push(new ud),hr=B=0,ue=[],Cr=I,_n=se,pi=De,Vc([be,_e])},w0=function(I){if(As[I])Yn.pop().restore();else{var se=new ud,be="Xo"+(Object.keys(Dn).length+1).toString(10);se.id=be,As[I]=be,Dn[be]=se,Ht.publish("addFormObject",se),Yn.pop().restore()}};for(var dd in x.beginFormObject=function(I,se,be,_e,De){return Ym(I,se,be,_e,De),this},x.endFormObject=function(I){return w0(I),this},x.doFormObject=function(I,se){var be=Dn[As[I]];return xe("q"),xe(se.toString()+" cm"),xe("/"+be.id+" Do"),xe("Q"),this},x.getFormObject=function(I){var se=Dn[As[I]];return{x:se.x,y:se.y,width:se.width,height:se.height,matrix:se.matrix}},x.save=function(I,se){return I=I||"generated.pdf",(se=se||{}).returnPromise=se.returnPromise||!1,se.returnPromise===!1?(Rf(Hc(po()),I),typeof Rf.unload=="function"&&en.setTimeout&&setTimeout(Rf.unload,911),this):new Promise((function(be,_e){try{var De=Rf(Hc(po()),I);typeof Rf.unload=="function"&&en.setTimeout&&setTimeout(Rf.unload,911),be(De)}catch(He){_e(He.message)}}))},Yt.API)Yt.API.hasOwnProperty(dd)&&(dd==="events"&&Yt.API.events.length?(function(I,se){var be,_e,De;for(De=se.length-1;De!==-1;De--)be=se[De][0],_e=se[De][1],I.subscribe.apply(I,[be].concat(typeof _e=="function"?[_e]:_e))})(Ht,Yt.API.events):x[dd]=Yt.API[dd]);var Ko=x.getPageWidth=function(I){return(mt[I=I||B].mediaBox.topRightX-mt[I].mediaBox.bottomLeftX)/yt},of=x.setPageWidth=function(I,se){mt[I].mediaBox.topRightX=se*yt+mt[I].mediaBox.bottomLeftX},Gl=x.getPageHeight=function(I){return(mt[I=I||B].mediaBox.topRightY-mt[I].mediaBox.bottomLeftY)/yt},lf=x.setPageHeight=function(I,se){mt[I].mediaBox.topRightY=se*yt+mt[I].mediaBox.bottomLeftY};return x.internal={pdfEscape:vi,getStyle:nf,getFont:ad,getFontSize:st,getCharSpace:Qc,getTextColor:Hl,getLineHeight:od,getLineHeightFactor:Wa,getLineWidth:Vl,write:ht,getHorizontalCoordinate:ga,getVerticalCoordinate:xa,getCoordinateString:Gm,getVerticalCoordinateString:Ka,collections:{},newObject:pr,newAdditionalObject:Ml,newObjectDeferred:Fn,newObjectDeferredBegin:ks,getFilters:Ua,putStream:Wi,events:Ht,scaleFactor:yt,pageSize:{getWidth:function(){return Ko(B)},setWidth:function(I){of(B,I)},getHeight:function(){return Gl(B)},setHeight:function(I){lf(B,I)}},encryptionOptions:f,encryption:Ar,getEncryptor:go,output:zl,getNumberOfPages:y0,pages:ue,out:xe,f2:U,f3:D,getPageInfo:Va,getPageInfoByObjId:Gt,getCurrentPageInfo:Kc,getPDFVersion:y,Point:yo,Rectangle:Kl,Matrix:Pt,hasHotfix:Wc},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return Ko(B)},set:function(I){of(B,I)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return Gl(B)},set:function(I){lf(B,I)},enumerable:!0,configurable:!0}),Uc.call(x,Ye),Qt="F1",Zh(a,r),Ht.publish("initialized"),x}Rp.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Rp.prototype.toHexString=function(e){return e.split("").map((function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Rp.prototype.hexToBytes=function(e){for(var n=[],r=0;r<e.length;r+=2)n.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return n.join("")},Rp.prototype.processOwnerPassword=function(e,n){return ck(lk(n).substr(0,5),e)},Rp.prototype.encryptor=function(e,n){var r=lk(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&n,n>>8&255)).substr(0,10);return function(s){return ck(r,s)}},Q1.prototype.equals=function(e){var n,r="id,objectNumber,equals";if(!e||cr(e)!==cr(this))return!1;var s=0;for(n in this)if(!(r.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!e.hasOwnProperty(n)||this[n]!==e[n])return!1;s++}for(n in e)e.hasOwnProperty(n)&&r.indexOf(n)<0&&s--;return s===0},Yt.API={events:[]},Yt.version="2.5.2";var es=Yt.API,T3=1,Im=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_p=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},cn=function(e){return e.toFixed(2)},Vd=function(e){return e.toFixed(5)};es.__acroform__={};var Ba=function(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e},F6=function(e){return e*T3},lc=function(e){var n=new kG,r=Rt.internal.getHeight(e)||0,s=Rt.internal.getWidth(e)||0;return n.BBox=[0,0,Number(cn(s)),Number(cn(r))],n},hbe=es.__acroform__.setBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<n},fbe=es.__acroform__.clearBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<n)},mbe=es.__acroform__.getBit=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<n)==0?0:1},us=es.__acroform__.getBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return mbe(e,n-1)},ds=es.__acroform__.setBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return hbe(e,n-1)},hs=es.__acroform__.clearBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fbe(e,n-1)},pbe=es.__acroform__.calculateCoordinates=function(e,n){var r=n.internal.getHorizontalCoordinate,s=n.internal.getVerticalCoordinate,a=e[0],o=e[1],l=e[2],c=e[3],u={};return u.lowerLeft_X=r(a)||0,u.lowerLeft_Y=s(o+c)||0,u.upperRight_X=r(a+l)||0,u.upperRight_Y=s(o)||0,[Number(cn(u.lowerLeft_X)),Number(cn(u.lowerLeft_Y)),Number(cn(u.upperRight_X)),Number(cn(u.upperRight_Y))]},gbe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var n=[],r=e._V||e.DV,s=uk(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(e.scope.__private__.encodeColorString(e.color)),n.push("/"+a+" "+cn(s.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC");var o=lc(e);return o.scope=e.scope,o.stream=n.join(`
`),o}},uk=function(e,n){var r=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},a=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");a=e.multiline?a.map((function(D){return D.split(`
`)})):a.map((function(D){return[D]}));var o=r,l=Rt.internal.getHeight(e)||0;l=l<0?-l:l;var c=Rt.internal.getWidth(e)||0;c=c<0?-c:c;var u=function(D,M,G){if(D+1<a.length){var Y=M+" "+a[D+1][0];return Ab(Y,e,G).width<=c-4}return!1};o++;e:for(;o>0;){n="",o--;var d,f,m=Ab("3",e,o).height,g=e.multiline?l-o:(l-m)/2,x=g+=2,v=0,y=0,b=0;if(o<=0){n=`(...) Tj
`,n+="% Width of Text: "+Ab(n,e,o=12).width+", FieldWidth:"+c+`
`;break}for(var N="",j=0,S=0;S<a.length;S++)if(a.hasOwnProperty(S)){var A=!1;if(a[S].length!==1&&b!==a[S].length-1){if((m+2)*(j+2)+2>l)continue e;N+=a[S][b],A=!0,y=S,S--}else{N=(N+=a[S][b]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var P=parseInt(S),L=u(P,N,o),O=S>=a.length-1;if(L&&!O){N+=" ",b=0;continue}if(L||O){if(O)y=P;else if(e.multiline&&(m+2)*(j+2)+2>l)continue e}else{if(!e.multiline||(m+2)*(j+2)+2>l)continue e;y=P}}for(var R="",q=v;q<=y;q++){var U=a[q];if(e.multiline){if(q===y){R+=U[b]+" ",b=(b+1)%U.length;continue}if(q===v){R+=U[U.length-1]+" ";continue}}R+=U[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,f=Ab(R,e,o).width,e.textAlign){case"right":d=c-f-2;break;case"center":d=(c-f)/2;break;case"left":default:d=2}n+=cn(d)+" "+cn(x)+` Td
`,n+="("+Im(R)+`) Tj
`,n+=-cn(d)+` 0 Td
`,x=-(o+2),f=0,v=A?y:y+1,j++,N=""}break}return s.text=n,s.fontSize=o,s},Ab=function(e,n,r){var s=n.scope.internal.getFont(n.fontName,n.fontStyle),a=n.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:n.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},xbe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vbe=function(e,n){var r={type:"reference",object:e};n.internal.getPageInfo(e.page).pageContext.annotations.find((function(s){return s.type===r.type&&s.object===r.object}))===void 0&&n.internal.getPageInfo(e.page).pageContext.annotations.push(r)},ybe=function(e,n){for(var r in e)if(e.hasOwnProperty(r)){var s=r,a=e[r];n.internal.newObjectDeferredBegin(a.objId,!0),cr(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[s]}},bbe=function(e,n){if(n.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Rl.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(xbe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");T3=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new EG,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)})),e.internal.events.subscribe("buildDocument",(function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.objId=void 0,o.hasAnnotation&&vbe(o,r)}})(e)})),e.internal.events.subscribe("putCatalog",(function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)})),e.internal.events.subscribe("postPutPages",(function(r){(function(s,a){var o=!s;for(var l in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(l)){var c=s[l],u=[],d=c.Rect;if(c.Rect&&(c.Rect=pbe(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Rt.createDefaultAppearanceStream(c),cr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(u=c.getKeyValueListForStream()),c.Rect=d,c.hasAppearanceStream&&!c.appearanceStreamContent){var f=gbe(c);u.push({key:"AP",value:"<</N "+f+">>"}),a.internal.acroformPlugin.xForms.push(f)}if(c.appearanceStreamContent){var m="";for(var g in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(g)){var x=c.appearanceStreamContent[g];if(m+="/"+g+" ",m+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var l in x)if(x.hasOwnProperty(l)){var v=x[l];typeof v=="function"&&(v=v.call(a,c)),m+="/"+l+" "+v+" ",a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v)}}else typeof(v=x)=="function"&&(v=v.call(a,c)),m+="/"+l+" "+v,a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v);m+=">>"}u.push({key:"AP",value:`<<
`+m+">>"})}a.internal.putStream({additionalKeyValues:u,objectId:c.objId}),a.internal.out("endobj")}o&&ybe(a.internal.acroformPlugin.xForms,a)})(r,e)})),e.internal.acroformPlugin.isInitialized=!0}},AG=es.__acroform__.arrayToPdfArray=function(e,n,r){var s=function(l){return l};if(Array.isArray(e)){for(var a="[",o=0;o<e.length;o++)switch(o!==0&&(a+=" "),cr(e[o])){case"boolean":case"number":case"object":a+=e[o].toString();break;case"string":e[o].substr(0,1)!=="/"?(n!==void 0&&r&&(s=r.internal.getEncryptor(n)),a+="("+Im(s(e[o].toString()))+")"):a+=e[o].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},S5=function(e,n,r){var s=function(a){return a};return n!==void 0&&r&&(s=r.internal.getEncryptor(n)),(e=e||"").toString(),e="("+Im(s(e))+")"},xc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};xc.prototype.toString=function(){return this.objId+" 0 R"},xc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},xc.prototype.getKeyValueListForStream=function(){var e=[],n=Object.getOwnPropertyNames(this).filter((function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"}));for(var r in n)if(Object.getOwnPropertyDescriptor(this,n[r]).configurable===!1){var s=n[r],a=this[s];a&&(Array.isArray(a)?e.push({key:s,value:AG(a,this.objId,this.scope)}):a instanceof xc?(a.scope=this.scope,e.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:s,value:a}))}return e};var kG=function(){xc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Ba(kG,xc);var EG=function(){xc.call(this);var e,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Im(r(e))+")"}},set:function(r){e=r}})};Ba(EG,xc);var Rl=function e(){xc.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');n=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!us(n,3)},set:function(N){N?this.F=ds(n,3):this.F=hs(n,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');r=N}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(N){s=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(N){s[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(N){s[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(N){s[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(N){s[3]=N}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof X1)return;o="FieldObject"+e.FieldNum++}var N=function(j){return j};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+Im(N(o))+")"},set:function(N){o=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(N){o=N}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(N){c=N}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(N){u=N}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/T3:d},set:function(N){d=N}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(N){f=N}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof X1||this instanceof am))return S5(m,this.objId,this.scope)},set:function(N){N=N.toString(),m=N}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Js?g:S5(g,this.objId,this.scope)},set:function(N){N=N.toString(),g=this instanceof Js?N:N.substr(0,1)==="("?_p(N.substr(1,N.length-2)):_p(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Js?_p(g.substr(1,g.length-1)):g},set:function(N){N=N.toString(),g=this instanceof Js?"/"+N:N}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Js?x:S5(x,this.objId,this.scope)},set:function(N){N=N.toString(),x=this instanceof Js?N:N.substr(0,1)==="("?_p(N.substr(1,N.length-2)):_p(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Js?_p(x.substr(1,x.length-1)):x},set:function(N){N=N.toString(),x=this instanceof Js?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(N){N=!!N,y=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(N){v=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,1)},set:function(N){N?this.Ff=ds(this.Ff,1):this.Ff=hs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,2)},set:function(N){N?this.Ff=ds(this.Ff,2):this.Ff=hs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,3)},set:function(N){N?this.Ff=ds(this.Ff,3):this.Ff=hs(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');b=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(b){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};Ba(Rl,xc);var Zp=function(){Rl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return AG(n,this.objId,this.scope)},set:function(r){var s,a;a=[],typeof(s=r)=="string"&&(a=(function(o,l,c){c||(c=1);for(var u,d=[];u=l.exec(o);)d.push(u[c]);return d})(s,/\((.*?)\)/g)),n=a}}),this.getOptions=function(){return n},this.setOptions=function(r){n=r,this.sort&&n.sort()},this.addOption=function(r){r=(r=r||"").toString(),n.push(r),this.sort&&n.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();n.indexOf(r)!==-1&&(n.splice(n.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,18)},set:function(r){r?this.Ff=ds(this.Ff,18):this.Ff=hs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ds(this.Ff,19):this.Ff=hs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,20)},set:function(r){r?(this.Ff=ds(this.Ff,20),n.sort()):this.Ff=hs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,22)},set:function(r){r?this.Ff=ds(this.Ff,22):this.Ff=hs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,23)},set:function(r){r?this.Ff=ds(this.Ff,23):this.Ff=hs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,27)},set:function(r){r?this.Ff=ds(this.Ff,27):this.Ff=hs(this.Ff,27)}}),this.hasAppearanceStream=!1};Ba(Zp,Rl);var eg=function(){Zp.call(this),this.fontName="helvetica",this.combo=!1};Ba(eg,Zp);var tg=function(){eg.call(this),this.combo=!0};Ba(tg,eg);var h1=function(){tg.call(this),this.edit=!0};Ba(h1,tg);var Js=function(){Rl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,15)},set:function(r){r?this.Ff=ds(this.Ff,15):this.Ff=hs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,16)},set:function(r){r?this.Ff=ds(this.Ff,16):this.Ff=hs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,17)},set:function(r){r?this.Ff=ds(this.Ff,17):this.Ff=hs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,26)},set:function(r){r?this.Ff=ds(this.Ff,26):this.Ff=hs(this.Ff,26)}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+Im(r(n[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){cr(r)==="object"&&(n=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(r){typeof r=="string"&&(n.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Ba(Js,Rl);var f1=function(){Js.call(this),this.pushButton=!0};Ba(f1,Js);var ng=function(){Js.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n!==void 0?n:[]}})};Ba(ng,Js);var X1=function(){var e,n;Rl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(a){n=a}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),s)l.push("/"+o+" ("+Im(a(s[o]))+")");return l.push(">>"),l.join(`
`)},set:function(a){cr(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Rt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ba(X1,Rl),ng.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var r=this.Kids[n];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},ng.prototype.createOption=function(e){var n=new X1;return n.Parent=this,n.optionName=e,this.Kids.push(n),wbe.call(this.scope,n),n};var m1=function(){Js.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Rt.CheckBox.createAppearanceStream()};Ba(m1,Js);var am=function(){Rl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,13)},set:function(n){n?this.Ff=ds(this.Ff,13):this.Ff=hs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,21)},set:function(n){n?this.Ff=ds(this.Ff,21):this.Ff=hs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,23)},set:function(n){n?this.Ff=ds(this.Ff,23):this.Ff=hs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,24)},set:function(n){n?this.Ff=ds(this.Ff,24):this.Ff=hs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,25)},set:function(n){n?this.Ff=ds(this.Ff,25):this.Ff=hs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,26)},set:function(n){n?this.Ff=ds(this.Ff,26):this.Ff=hs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){Number.isInteger(n)&&(e=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ba(am,Rl);var p1=function(){am.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,14)},set:function(e){e?this.Ff=ds(this.Ff,14):this.Ff=hs(this.Ff,14)}}),this.password=!0};Ba(p1,am);var Rt={CheckBox:{createAppearanceStream:function(){return{N:{On:Rt.CheckBox.YesNormal},D:{On:Rt.CheckBox.YesPushDown,Off:Rt.CheckBox.OffPushDown}}},YesPushDown:function(e){var n=lc(e);n.scope=e.scope;var r=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),o=uk(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+cn(Rt.internal.getWidth(e))+" "+cn(Rt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+cn(o.fontSize)+" Tf "+a),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),n.stream=r.join(`
`),n},YesNormal:function(e){var n=lc(e);n.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),a=[],o=Rt.internal.getHeight(e),l=Rt.internal.getWidth(e),c=uk(e,e.caption);return a.push("1 g"),a.push("0 0 "+cn(l)+" "+cn(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+cn(l-1)+" "+cn(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+cn(c.fontSize)+" Tf "+s),a.push(c.text),a.push("ET"),a.push("Q"),n.stream=a.join(`
`),n},OffPushDown:function(e){var n=lc(e);n.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+cn(Rt.internal.getWidth(e))+" "+cn(Rt.internal.getHeight(e))+" re"),r.push("f"),n.stream=r.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(e){var n={D:{Off:Rt.RadioButton.Circle.OffPushDown},N:{}};return n.N[e]=Rt.RadioButton.Circle.YesNormal,n.D[e]=Rt.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(e){var n=lc(e);n.scope=e.scope;var r=[],s=Rt.internal.getWidth(e)<=Rt.internal.getHeight(e)?Rt.internal.getWidth(e)/4:Rt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Rt.internal.Bezier_C,o=Number((s*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Vd(Rt.internal.getWidth(e)/2)+" "+Vd(Rt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),n.stream=r.join(`
`),n},YesPushDown:function(e){var n=lc(e);n.scope=e.scope;var r=[],s=Rt.internal.getWidth(e)<=Rt.internal.getHeight(e)?Rt.internal.getWidth(e)/4:Rt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*Rt.internal.Bezier_C).toFixed(5)),l=Number((s*Rt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Vd(Rt.internal.getWidth(e)/2)+" "+Vd(Rt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Vd(Rt.internal.getWidth(e)/2)+" "+Vd(Rt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+l+" "+l+" "+s+" 0 "+s+" c"),r.push("-"+l+" "+s+" -"+s+" "+l+" -"+s+" 0 c"),r.push("-"+s+" -"+l+" -"+l+" -"+s+" 0 -"+s+" c"),r.push(l+" -"+s+" "+s+" -"+l+" "+s+" 0 c"),r.push("f"),r.push("Q"),n.stream=r.join(`
`),n},OffPushDown:function(e){var n=lc(e);n.scope=e.scope;var r=[],s=Rt.internal.getWidth(e)<=Rt.internal.getHeight(e)?Rt.internal.getWidth(e)/4:Rt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*Rt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Vd(Rt.internal.getWidth(e)/2)+" "+Vd(Rt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),n.stream=r.join(`
`),n}},Cross:{createAppearanceStream:function(e){var n={D:{Off:Rt.RadioButton.Cross.OffPushDown},N:{}};return n.N[e]=Rt.RadioButton.Cross.YesNormal,n.D[e]=Rt.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(e){var n=lc(e);n.scope=e.scope;var r=[],s=Rt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+cn(Rt.internal.getWidth(e)-2)+" "+cn(Rt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(cn(s.x1.x)+" "+cn(s.x1.y)+" m"),r.push(cn(s.x2.x)+" "+cn(s.x2.y)+" l"),r.push(cn(s.x4.x)+" "+cn(s.x4.y)+" m"),r.push(cn(s.x3.x)+" "+cn(s.x3.y)+" l"),r.push("s"),r.push("Q"),n.stream=r.join(`
`),n},YesPushDown:function(e){var n=lc(e);n.scope=e.scope;var r=Rt.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+cn(Rt.internal.getWidth(e))+" "+cn(Rt.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+cn(Rt.internal.getWidth(e)-2)+" "+cn(Rt.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(cn(r.x1.x)+" "+cn(r.x1.y)+" m"),s.push(cn(r.x2.x)+" "+cn(r.x2.y)+" l"),s.push(cn(r.x4.x)+" "+cn(r.x4.y)+" m"),s.push(cn(r.x3.x)+" "+cn(r.x3.y)+" l"),s.push("s"),s.push("Q"),n.stream=s.join(`
`),n},OffPushDown:function(e){var n=lc(e);n.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+cn(Rt.internal.getWidth(e))+" "+cn(Rt.internal.getHeight(e))+" re"),r.push("f"),n.stream=r.join(`
`),n}}},createDefaultAppearanceStream:function(e){var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+n+" "+e.fontSize+" Tf "+r}};Rt.internal={Bezier_C:.551915024494,calculateCross:function(e){var n=Rt.internal.getWidth(e),r=Rt.internal.getHeight(e),s=Math.min(n,r);return{x1:{x:(n-s)/2,y:(r-s)/2+s},x2:{x:(n-s)/2+s,y:(r-s)/2},x3:{x:(n-s)/2,y:(r-s)/2},x4:{x:(n-s)/2+s,y:(r-s)/2+s}}}},Rt.internal.getWidth=function(e){var n=0;return cr(e)==="object"&&(n=F6(e.Rect[2])),n},Rt.internal.getHeight=function(e){var n=0;return cr(e)==="object"&&(n=F6(e.Rect[3])),n};var wbe=es.addField=function(e){if(bbe(this,e),!(e instanceof Rl))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=e).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};es.AcroFormChoiceField=Zp,es.AcroFormListBox=eg,es.AcroFormComboBox=tg,es.AcroFormEditBox=h1,es.AcroFormButton=Js,es.AcroFormPushButton=f1,es.AcroFormRadioButton=ng,es.AcroFormCheckBox=m1,es.AcroFormTextField=am,es.AcroFormPasswordField=p1,es.AcroFormAppearance=Rt,es.AcroForm={ChoiceField:Zp,ListBox:eg,ComboBox:tg,EditBox:h1,Button:Js,PushButton:f1,RadioButton:ng,CheckBox:m1,TextField:am,PasswordField:p1,Appearance:Rt},Yt.AcroForm={ChoiceField:Zp,ListBox:eg,ComboBox:tg,EditBox:h1,Button:Js,PushButton:f1,RadioButton:ng,CheckBox:m1,TextField:am,PasswordField:p1,Appearance:Rt};Yt.AcroForm;function TG(e){return e.reduce((function(n,r,s){return n[r]=s,n}),{})}(function(e){e.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(D,M){var G,Y,Z,X,re,z=n;if((M=M||n)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(L(D))for(re in r)for(Z=r[re],G=0;G<Z.length;G+=1){for(X=!0,Y=0;Y<Z[G].length;Y+=1)if(Z[G][Y]!==void 0&&Z[G][Y]!==D[Y]){X=!1;break}if(X===!0){z=re;break}}else for(re in r)for(Z=r[re],G=0;G<Z.length;G+=1){for(X=!0,Y=0;Y<Z[G].length;Y+=1)if(Z[G][Y]!==void 0&&Z[G][Y]!==D.charCodeAt(Y)){X=!1;break}if(X===!0){z=re;break}}return z===n&&M!==n&&(z=M),z},a=function D(M){for(var G=this.internal.write,Y=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);M.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:M.width}),X.push({key:"Height",value:M.height}),M.colorSpace===b.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(M.palette.length/3-1)+" "+("sMask"in M&&M.sMask!==void 0?M.objectId+2:M.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+M.colorSpace}),M.colorSpace===b.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:M.bitsPerComponent}),"decodeParameters"in M&&M.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+M.decodeParameters+">>"}),"transparency"in M&&Array.isArray(M.transparency)){for(var re="",z=0,te=M.transparency.length;z<te;z++)re+=M.transparency[z]+" "+M.transparency[z]+" ";X.push({key:"Mask",value:"["+re+"]"})}M.sMask!==void 0&&X.push({key:"SMask",value:M.objectId+1+" 0 R"});var le=M.filter!==void 0?["/"+M.filter]:void 0;if(Y({data:M.data,additionalKeyValues:X,alreadyAppliedFilters:le,objectId:M.objectId}),G("endobj"),"sMask"in M&&M.sMask!==void 0){var Q="/Predictor "+M.predictor+" /Colors 1 /BitsPerComponent "+M.bitsPerComponent+" /Columns "+M.width,T={width:M.width,height:M.height,colorSpace:"DeviceGray",bitsPerComponent:M.bitsPerComponent,decodeParameters:Q,data:M.sMask};"filter"in M&&(T.filter=M.filter),D.call(this,T)}if(M.colorSpace===b.INDEXED){var B=this.internal.newObject();Y({data:R(new Uint8Array(M.palette)),objectId:B}),G("endobj")}},o=function(){var D=this.internal.collections.addImage_images;for(var M in D)a.call(this,D[M])},l=function(){var D,M=this.internal.collections.addImage_images,G=this.internal.write;for(var Y in M)G("/I"+(D=M[Y]).index,D.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var D=this.internal.collections.addImage_images;return c.call(this),D},d=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(D){return typeof e["process"+D.toUpperCase()]=="function"},m=function(D){return cr(D)==="object"&&D.nodeType===1},g=function(D,M){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var G=""+D.getAttribute("src");if(G.indexOf("data:image/")===0)return Mx(unescape(G).split("base64,").pop());var Y=e.loadFile(G,!0);if(Y!==void 0)return Y}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var Z;switch(M){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;case"JPEG":case"JPG":default:Z="image/jpeg"}return Mx(D.toDataURL(Z,1).split("base64,").pop())}},x=function(D){var M=this.internal.collections.addImage_images;if(M){for(var G in M)if(D===M[G].alias)return M[G]}},v=function(D,M,G){return D||M||(D=-96,M=-96),D<0&&(D=-1*G.width*72/D/this.internal.scaleFactor),M<0&&(M=-1*G.height*72/M/this.internal.scaleFactor),D===0&&(D=M*G.width/G.height),M===0&&(M=D*G.height/G.width),[D,M]},y=function(D,M,G,Y,Z,X){var re=v.call(this,G,Y,Z),z=this.internal.getCoordinateString,te=this.internal.getVerticalCoordinateString,le=u.call(this);if(G=re[0],Y=re[1],le[Z.index]=Z,X){X*=Math.PI/180;var Q=Math.cos(X),T=Math.sin(X),B=function(ee){return ee.toFixed(4)},H=[B(Q),B(T),B(-1*T),B(Q),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,z(D),te(M+Y),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([z(G),"0","0",z(Y),"0","0","cm"].join(" "))):this.internal.write([z(G),"0","0",z(Y),z(D),te(M+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=e.__addimage__.sHashCode=function(D){var M,G,Y=0;if(typeof D=="string")for(G=D.length,M=0;M<G;M++)Y=(Y<<5)-Y+D.charCodeAt(M),Y|=0;else if(L(D))for(G=D.byteLength/2,M=0;M<G;M++)Y=(Y<<5)-Y+D[M],Y|=0;return Y},S=e.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var M=!0;return D.length===0&&(M=!1),D.length%4!=0&&(M=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(M=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(M=!1),M},A=e.__addimage__.extractImageFromDataUrl=function(D){var M=(D=D||"").split("base64,"),G=null;if(M.length===2){var Y=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(M[0]);Array.isArray(Y)&&(G={mimeType:Y[1],charset:Y[2],data:M[1]})}return G},P=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(D){return P()&&D instanceof ArrayBuffer};var L=e.__addimage__.isArrayBufferView=function(D){return P()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},O=e.__addimage__.binaryStringToUint8Array=function(D){for(var M=D.length,G=new Uint8Array(M),Y=0;Y<M;Y++)G[Y]=D.charCodeAt(Y);return G},R=e.__addimage__.arrayBufferToBinaryString=function(D){for(var M="",G=L(D)?D:new Uint8Array(D),Y=0;Y<G.length;Y+=8192)M+=String.fromCharCode.apply(null,G.subarray(Y,Y+8192));return M};e.addImage=function(){var D,M,G,Y,Z,X,re,z,te;if(typeof arguments[1]=="number"?(M=n,G=arguments[1],Y=arguments[2],Z=arguments[3],X=arguments[4],re=arguments[5],z=arguments[6],te=arguments[7]):(M=arguments[1],G=arguments[2],Y=arguments[3],Z=arguments[4],X=arguments[5],re=arguments[6],z=arguments[7],te=arguments[8]),cr(D=arguments[0])==="object"&&!m(D)&&"imageData"in D){var le=D;D=le.imageData,M=le.format||M||n,G=le.x||G||0,Y=le.y||Y||0,Z=le.w||le.width||Z,X=le.h||le.height||X,re=le.alias||re,z=le.compression||z,te=le.rotation||le.angle||te}var Q=this.internal.getFilters();if(z===void 0&&Q.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(G)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var T=q.call(this,D,M,re,z);return y.call(this,G,Y,Z,X,T,te),this};var q=function(D,M,G,Y){var Z,X,re;if(typeof D=="string"&&s(D)===n){D=unescape(D);var z=U(D,!1);(z!==""||(z=e.loadFile(D,!0))!==void 0)&&(D=z)}if(m(D)&&(D=g(D,M)),M=s(D,M),!f(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(((re=G)==null||re.length===0)&&(G=(function(te){return typeof te=="string"||L(te)?j(te):L(te.data)?j(te.data):null})(D)),(Z=x.call(this,G))||(P()&&(D instanceof Uint8Array||M==="RGBA"||(X=D,D=O(D))),Z=this["process"+M.toUpperCase()](D,d.call(this),G,(function(te){return te&&typeof te=="string"&&(te=te.toUpperCase()),te in e.image_compression?te:N.NONE})(Y),X)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},U=e.__addimage__.convertBase64ToBinaryString=function(D,M){var G;M=typeof M!="boolean"||M;var Y,Z="";if(typeof D=="string"){Y=(G=A(D))!==null?G.data:D;try{Z=Mx(Y)}catch(X){if(M)throw S(Y)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};e.getImageProperties=function(D){var M,G,Y="";if(m(D)&&(D=g(D)),typeof D=="string"&&s(D)===n&&((Y=U(D,!1))===""&&(Y=e.loadFile(D)||""),D=Y),G=s(D),!f(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(!P()||D instanceof Uint8Array||(D=O(D)),!(M=this["process"+G.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return M.fileType=G,M}})(Yt.API),(function(e){var n=function(r){if(r!==void 0&&r!="")return!0};Yt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var s,a,o,l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,f=!1,m=0;m<d.length&&!f;m++)switch((s=d[m]).type){case"link":(n(s.options.url)||n(s.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var g=0;g<d.length;g++){s=d[g];var x=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(y.objId),j=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+l(s.bounds.x)+" "+c(s.bounds.y+s.bounds.h)+" "+l(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y)+"] ")+"/Contents ("+x(N(s.contents))+")",o+=" /Popup "+b.objId+" 0 R",o+=" /P "+u.objId+" 0 R",o+=" /T ("+x(N(j))+") >>",y.content=o;var S=y.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+l(s.bounds.x+30)+" "+c(s.bounds.y+s.bounds.h)+" "+l(s.bounds.x+s.bounds.w+30)+" "+c(s.bounds.y)+"] ")+" /Parent "+S,s.open&&(o+=" /Open true"),o+=" >>",b.content=o,this.internal.write(y.objId,"0 R",b.objId,"0 R");break;case"freetext":a="/Rect ["+l(s.bounds.x)+" "+c(s.bounds.y)+" "+l(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y+s.bounds.h)+"] ";var A=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+x(v(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+A+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var P=this.annotations._nameMap[s.options.name];s.options.pageNumber=P.page,s.options.top=P.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+x(v(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var L=c(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+L+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},e.link=function(r,s,a,o,l){var c=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:u(r),y:d(s),w:u(r+a),h:d(s+o)},options:l,type:"link"})},e.textWithLink=function(r,s,a,o){var l,c,u=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var f=this.splitTextToSize(r,c).length;l=Math.ceil(d*f)}else c=u,l=d;return this.text(r,s,a,o),a+=.2*d,o.align==="center"&&(s-=u/2),o.align==="right"&&(s-=u),this.link(s,a-d,c,l,o),u},e.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}})(Yt.API),(function(e){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(y){return n[y.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},c=e.__arabicParser__.isArabicEndLetter=function(y){return l(y)&&o(y)&&n[y.charCodeAt(0)].length<=2},u=e.__arabicParser__.isArabicAlfLetter=function(y){return l(y)&&a.indexOf(y.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return l(y)&&o(y)&&n[y.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(y){return l(y)&&o(y)&&n[y.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(y){return l(y)&&o(y)&&n[y.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(y){return l(y)&&o(y)&&n[y.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(y){var b=0,N=r,j="",S=0;for(b=0;b<y.length;b+=1)N[y.charCodeAt(b)]!==void 0?(S++,typeof(N=N[y.charCodeAt(b)])=="number"&&(j+=String.fromCharCode(N),N=r,S=0),b===y.length-1&&(N=r,j+=y.charAt(b-(S-1)),b-=S-1,S=0)):(N=r,j+=y.charAt(b-S),b-=S,S=0);return j};e.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&s[y.charCodeAt(0)]!==void 0};var g=e.__arabicParser__.getCorrectForm=function(y,b,N){return l(y)?o(y)===!1?-1:!d(y)||!l(b)&&!l(N)||!l(N)&&c(b)||c(y)&&!l(b)||c(y)&&u(b)||c(y)&&c(b)?0:f(y)&&l(b)&&!c(b)&&l(N)&&d(N)?3:c(y)||!l(N)?1:2:-1},x=function(y){var b=0,N=0,j=0,S="",A="",P="",L=(y=y||"").split("\\s+"),O=[];for(b=0;b<L.length;b+=1){for(O.push(""),N=0;N<L[b].length;N+=1)S=L[b][N],A=L[b][N-1],P=L[b][N+1],l(S)?(j=g(S,A,P),O[b]+=j!==-1?String.fromCharCode(n[S.charCodeAt(0)][j]):S):O[b]+=S;O[b]=m(O[b])}return O.join(" ")},v=e.__arabicParser__.processArabic=e.processArabic=function(){var y,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(b)){var j=0;for(N=[],j=0;j<b.length;j+=1)Array.isArray(b[j])?N.push([x(b[j][0]),b[j][1],b[j][2]]):N.push([x(b[j])]);y=N}else y=x(b);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};e.events.push(["preProcessText",v])})(Yt.API),Yt.API.autoPrint=function(e){var n;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+n+" 0 R")}))}return this},(function(e){var n=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(c){r=c}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(c){l=c}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(r,s){var a;if((r=r||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])})(Yt.API),(function(e){var n={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(y){x=y}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(y){v=y}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(u){return s.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},e.getTextDimensions=function(u,d){s.call(this);var f=(d=d||{}).fontSize||this.getFontSize(),m=d.font||this.getFont(),g=d.scaleFactor||this.internal.scaleFactor,x=0,v=0,y=0,b=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var N=d.maxWidth;N>0?typeof u=="string"?u=this.splitTextToSize(u,N):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce((function(S,A){return S.concat(b.splitTextToSize(A,N))}),[])):u=Array.isArray(u)?u:[u];for(var j=0;j<u.length;j++)x<(y=this.getStringUnitWidth(u[j],{font:m})*f)&&(x=y);return x!==0&&(v=u.length),{w:x/=g,h:Math.max((v*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/g,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var u=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new o(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var u;u=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var d=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,m=this.internal.__cell__.margins||n,g=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===u.lineNumber?(u.x=(d.x||0)+(d.width||0),u.y=d.y||0):d.y+d.height+u.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=m.top,x&&g&&(this.printHeaderRow(u.lineNumber,!0),u.y+=g[0].height)):u.y=d.y+d.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,r===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-f,u.y+f,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+f,{align:"center",baseline:"top",maxWidth:u.width-f-f}):this.text(u.text,u.x+f,u.y+f,{align:"left",baseline:"top",maxWidth:u.width-f-f})),this.internal.__cell__.lastCell=u,this};e.table=function(u,d,f,m,g){if(s.call(this),!f)throw new Error("No data for PDF table.");var x,v,y,b,N=[],j=[],S=[],A={},P={},L=[],O=[],R=(g=g||{}).autoSize||!1,q=g.printHeaders!==!1,U=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,D=g.margins||Object.assign({width:this.getPageWidth()},n),M=typeof g.padding=="number"?g.padding:3,G=g.headerBackgroundColor||"#c8c8c8",Y=g.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=q,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=M,this.internal.__cell__.headerBackgroundColor=G,this.internal.__cell__.headerTextColor=Y,this.setFontSize(U),m==null)j=N=Object.keys(f[0]),S=N.map((function(){return"left"}));else if(Array.isArray(m)&&cr(m[0])==="object")for(N=m.map((function(le){return le.name})),j=m.map((function(le){return le.prompt||le.name||""})),S=m.map((function(le){return le.align||"left"})),x=0;x<m.length;x+=1)P[m[x].name]=m[x].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(j=N=m,S=N.map((function(){return"left"})));if(R||Array.isArray(m)&&typeof m[0]=="string")for(x=0;x<N.length;x+=1){for(A[b=N[x]]=f.map((function(le){return le[b]})),this.setFont(void 0,"bold"),L.push(this.getTextDimensions(j[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=A[b],this.setFont(void 0,"normal"),y=0;y<v.length;y+=1)L.push(this.getTextDimensions(v[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[b]=Math.max.apply(null,L)+M+M,L=[]}if(q){var Z={};for(x=0;x<N.length;x+=1)Z[N[x]]={},Z[N[x]].text=j[x],Z[N[x]].align=S[x];var X=c.call(this,Z,P);O=N.map((function(le){return new o(u,d,P[le],X,Z[le].text,void 0,Z[le].align)})),this.setTableHeaderRow(O),this.printHeaderRow(1,!1)}var re=m.reduce((function(le,Q){return le[Q.name]=Q.align,le}),{});for(x=0;x<f.length;x+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:x,data:f[x]},this);var z=c.call(this,f[x],P);for(y=0;y<N.length;y+=1){var te=f[x][N[y]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:x,col:y,data:te},this),l.call(this,new o(u,d,P[N[y]],z,te,x+2,re[N[y]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=d,this};var c=function(u,d){var f=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(u).map((function(x){var v=u[x];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,d[x]-f-f)}),this).map((function(x){return this.getLineHeightFactor()*x.length*m/g+f+f}),this).reduce((function(x,v){return Math.max(x,v)}),0)};e.setTableHeaderRow=function(u){s.call(this),this.internal.__cell__.tableHeaderRow=u},e.printHeaderRow=function(u,d){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){f=this.internal.__cell__.tableHeaderRow[x].clone(),d&&(f.y=this.internal.__cell__.margins.top||0,g.push(f)),f.lineNumber=u;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,f),this.setTextColor(v)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),r=!1}})(Yt.API);var OG={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},LG=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],dk=TG(LG),RG=[100,200,300,400,500,600,700,800,900],jbe=TG(RG);function hk(e){var n=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(o){return OG[o=o||"normal"]?o:"normal"})(e.style),s=(function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}})(e.weight),a=(function(o){return typeof dk[o=o||"normal"]=="number"?o:"normal"})(e.stretch);return{family:n,style:r,weight:s,stretch:a,src:e.src||[],ref:e.ref||{name:n,style:[a,r,s].join(" ")}}}function B6(e,n,r,s){var a;for(a=r;a>=0&&a<n.length;a+=s)if(e[n[a]])return e[n[a]];for(a=r;a>=0&&a<n.length;a-=s)if(e[n[a]])return e[n[a]]}var Nbe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$6={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function q6(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function _be(e,n,r){for(var s=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},Nbe,r.genericFontFamilies||{}),o=null,l=null,c=0;c<n.length;++c)if(a[(o=hk(n[c])).family]&&(o.family=a[o.family]),e.hasOwnProperty(o.family)){l=e[o.family];break}if(!(l=l||e[s]))throw new Error("Could not find a font-family for the rule '"+q6(o)+"' and default family '"+s+"'.");if(l=(function(u,d){if(d[u])return d[u];var f=dk[u],m=f<=dk.normal?-1:1,g=B6(d,LG,f,m);if(!g)throw new Error("Could not find a matching font-stretch value for "+u);return g})(o.stretch,l),l=(function(u,d){if(d[u])return d[u];for(var f=OG[u],m=0;m<f.length;++m)if(d[f[m]])return d[f[m]];throw new Error("Could not find a matching font-style for "+u)})(o.style,l),!(l=(function(u,d){if(d[u])return d[u];if(u===400&&d[500])return d[500];if(u===500&&d[400])return d[400];var f=jbe[u],m=B6(d,RG,f,u<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+u);return m})(o.weight,l)))throw new Error("Failed to resolve a font for the rule '"+q6(o)+"'.");return l}function z6(e){return e.trimLeft()}function Sbe(e,n){for(var r=0;r<e.length;){if(e.charAt(r)===n)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Cbe(e){var n=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],e.substring(n[0].length)]}var kb,U6,V6,C5=["times"];(function(e){var n,r,s,a,o,l,c,u,d,f=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new u,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new l,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new l,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),n=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,c=this.internal.Rectangle,u=this.internal.Matrix,d=new f}]);var m=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var B=T;Object.defineProperty(this,"pdf",{get:function(){return B}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(Te){H=!!Te}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(Te){ee=!!Te}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(Te){isNaN(Te)||(ce=Te)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(Te){isNaN(Te)||(he=Te)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Te){var xe;typeof Te=="number"?xe=[Te,Te,Te,Te]:((xe=new Array(4))[0]=Te[0],xe[1]=Te.length>=2?Te[1]:xe[0],xe[2]=Te.length>=3?Te[2]:xe[0],xe[3]=Te.length>=4?Te[3]:xe[1]),d.margin=xe}});var W=!1;Object.defineProperty(this,"autoPaging",{get:function(){return W},set:function(Te){W=Te}});var J=0;Object.defineProperty(this,"lastBreak",{get:function(){return J},set:function(Te){J=Te}});var pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pe},set:function(Te){pe=Te}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Te){Te instanceof f&&(d=Te)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Te){d.path=Te}});var ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return ue},set:function(Te){ue=Te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Te){var xe;xe=g(Te),this.ctx.fillStyle=xe.style,this.ctx.isFillTransparent=xe.a===0,this.ctx.fillOpacity=xe.a,this.pdf.setFillColor(xe.r,xe.g,xe.b,{a:xe.a}),this.pdf.setTextColor(xe.r,xe.g,xe.b,{a:xe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Te){var xe=g(Te);this.ctx.strokeStyle=xe.style,this.ctx.isStrokeTransparent=xe.a===0,this.ctx.strokeOpacity=xe.a,xe.a===0?this.pdf.setDrawColor(255,255,255):(xe.a,this.pdf.setDrawColor(xe.r,xe.g,xe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Te){["butt","round","square"].indexOf(Te)!==-1&&(this.ctx.lineCap=Te,this.pdf.setLineCap(Te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Te){isNaN(Te)||(this.ctx.lineWidth=Te,this.pdf.setLineWidth(Te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Te){["bevel","round","miter"].indexOf(Te)!==-1&&(this.ctx.lineJoin=Te,this.pdf.setLineJoin(Te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Te){isNaN(Te)||(this.ctx.miterLimit=Te,this.pdf.setMiterLimit(Te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Te){this.ctx.textBaseline=Te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Te){["right","end","center","left","start"].indexOf(Te)!==-1&&(this.ctx.textAlign=Te)}});var me=null;function je(Te,xe){if(me===null){var ht=(function(gt){var Ye=[];return Object.keys(gt).forEach((function(dt){gt[dt].forEach((function(ft){var st=null;switch(ft){case"bold":st={family:dt,weight:"bold"};break;case"italic":st={family:dt,style:"italic"};break;case"bolditalic":st={family:dt,weight:"bold",style:"italic"};break;case"":case"normal":st={family:dt}}st!==null&&(st.ref={name:dt,style:ft},Ye.push(st))}))})),Ye})(Te.getFontList());me=(function(gt){for(var Ye={},dt=0;dt<gt.length;++dt){var ft=hk(gt[dt]),st=ft.family,Ct=ft.stretch,Vt=ft.style,Zt=ft.weight;Ye[st]=Ye[st]||{},Ye[st][Ct]=Ye[st][Ct]||{},Ye[st][Ct][Vt]=Ye[st][Ct][Vt]||{},Ye[st][Ct][Vt][Zt]=ft}return Ye})(ht.concat(xe))}return me}var ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return ze},set:function(Te){me=null,ze=Te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Te){var xe;if(this.ctx.font=Te,(xe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Te))!==null){var ht=xe[1],gt=(xe[2],xe[3]),Ye=xe[4],dt=(xe[5],xe[6]),ft=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ye)[2];Ye=Math.floor(ft==="px"?parseFloat(Ye)*this.pdf.internal.scaleFactor:ft==="em"?parseFloat(Ye)*this.pdf.getFontSize():parseFloat(Ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ye);var st=(function(Ut){var Qt,yt,Cr=[],_n=Ut.trim();if(_n==="")return C5;if(_n in $6)return[$6[_n]];for(;_n!=="";){switch(yt=null,Qt=(_n=z6(_n)).charAt(0)){case'"':case"'":yt=Sbe(_n.substring(1),Qt);break;default:yt=Cbe(_n)}if(yt===null||(Cr.push(yt[0]),(_n=z6(yt[1]))!==""&&_n.charAt(0)!==","))return C5;_n=_n.replace(/^,/,"")}return Cr})(dt);if(this.fontFaces){var Ct=_be(je(this.pdf,this.fontFaces),st.map((function(Ut){return{family:Ut,stretch:"normal",weight:gt,style:ht}})));this.pdf.setFont(Ct.ref.name,Ct.ref.style)}else{var Vt="";(gt==="bold"||parseInt(gt,10)>=700||ht==="bold")&&(Vt="bold"),ht==="italic"&&(Vt+="italic"),Vt.length===0&&(Vt="normal");for(var Zt="",sn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},yn=0;yn<st.length;yn++){if(this.pdf.internal.getFont(st[yn],Vt,{noFallback:!0,disableWarning:!0})!==void 0){Zt=st[yn];break}if(Vt==="bolditalic"&&this.pdf.internal.getFont(st[yn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Zt=st[yn],Vt="bold";else if(this.pdf.internal.getFont(st[yn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Zt=st[yn],Vt="normal";break}}if(Zt===""){for(var Pn=0;Pn<st.length;Pn++)if(sn[st[Pn]]){Zt=sn[st[Pn]];break}}Zt=Zt===""?"Times":Zt,this.pdf.setFont(Zt,Vt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Te){this.ctx.globalCompositeOperation=Te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Te){this.ctx.globalAlpha=Te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Te){this.ctx.lineDashOffset=Te,Q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Te){this.ctx.lineDash=Te,Q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Te){this.ctx.ignoreClearRect=!!Te}})};m.prototype.setLineDash=function(T){this.lineDash=T},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){A.call(this,"fill",!1)},m.prototype.stroke=function(){A.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(T,B){if(isNaN(T)||isNaN(B))throw br.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new l(T,B));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new l(T,B)},m.prototype.closePath=function(){var T=new l(0,0),B=0;for(B=this.path.length-1;B!==-1;B--)if(this.path[B].type==="begin"&&cr(this.path[B+1])==="object"&&typeof this.path[B+1].x=="number"){T=new l(this.path[B+1].x,this.path[B+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(T.x,T.y)},m.prototype.lineTo=function(T,B){if(isNaN(T)||isNaN(B))throw br.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new l(T,B));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new l(H.x,H.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},m.prototype.quadraticCurveTo=function(T,B,H,ee){if(isNaN(H)||isNaN(ee)||isNaN(T)||isNaN(B))throw br.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new l(H,ee)),he=this.ctx.transform.applyToPoint(new l(T,B));this.path.push({type:"qct",x1:he.x,y1:he.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new l(ce.x,ce.y)},m.prototype.bezierCurveTo=function(T,B,H,ee,ce,he){if(isNaN(ce)||isNaN(he)||isNaN(T)||isNaN(B)||isNaN(H)||isNaN(ee))throw br.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var W=this.ctx.transform.applyToPoint(new l(ce,he)),J=this.ctx.transform.applyToPoint(new l(T,B)),pe=this.ctx.transform.applyToPoint(new l(H,ee));this.path.push({type:"bct",x1:J.x,y1:J.y,x2:pe.x,y2:pe.y,x:W.x,y:W.y}),this.ctx.lastPoint=new l(W.x,W.y)},m.prototype.arc=function(T,B,H,ee,ce,he){if(isNaN(T)||isNaN(B)||isNaN(H)||isNaN(ee)||isNaN(ce))throw br.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var W=this.ctx.transform.applyToPoint(new l(T,B));T=W.x,B=W.y;var J=this.ctx.transform.applyToPoint(new l(0,H)),pe=this.ctx.transform.applyToPoint(new l(0,0));H=Math.sqrt(Math.pow(J.x-pe.x,2)+Math.pow(J.y-pe.y,2))}Math.abs(ce-ee)>=2*Math.PI&&(ee=0,ce=2*Math.PI),this.path.push({type:"arc",x:T,y:B,radius:H,startAngle:ee,endAngle:ce,counterclockwise:he})},m.prototype.arcTo=function(T,B,H,ee,ce){throw new Error("arcTo not implemented.")},m.prototype.rect=function(T,B,H,ee){if(isNaN(T)||isNaN(B)||isNaN(H)||isNaN(ee))throw br.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,B),this.lineTo(T+H,B),this.lineTo(T+H,B+ee),this.lineTo(T,B+ee),this.lineTo(T,B),this.lineTo(T+H,B),this.lineTo(T,B)},m.prototype.fillRect=function(T,B,H,ee){if(isNaN(T)||isNaN(B)||isNaN(H)||isNaN(ee))throw br.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,B,H,ee),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},m.prototype.strokeRect=function(T,B,H,ee){if(isNaN(T)||isNaN(B)||isNaN(H)||isNaN(ee))throw br.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(T,B,H,ee),this.stroke())},m.prototype.clearRect=function(T,B,H,ee){if(isNaN(T)||isNaN(B)||isNaN(H)||isNaN(ee))throw br.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,B,H,ee))},m.prototype.save=function(T){T=typeof T!="boolean"||T;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(B),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},m.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(B),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(T){var B,H,ee,ce;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))B=0,H=0,ee=0,ce=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(he!==null)B=parseInt(he[1]),H=parseInt(he[2]),ee=parseInt(he[3]),ce=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)B=parseInt(he[1]),H=parseInt(he[2]),ee=parseInt(he[3]),ce=parseFloat(he[4]);else{if(ce=1,typeof T=="string"&&T.charAt(0)!=="#"){var W=new SG(T);T=W.ok?W.toHex():"#000000"}T.length===4?(B=T.substring(1,2),B+=B,H=T.substring(2,3),H+=H,ee=T.substring(3,4),ee+=ee):(B=T.substring(1,3),H=T.substring(3,5),ee=T.substring(5,7)),B=parseInt(B,16),H=parseInt(H,16),ee=parseInt(ee,16)}}return{r:B,g:H,b:ee,a:ce,style:T}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(T,B,H,ee){if(isNaN(B)||isNaN(H)||typeof T!="string")throw br.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!x.call(this)){var ce=z(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;M.call(this,{text:T,x:B,y:H,scale:he,angle:ce,align:this.textAlign,maxWidth:ee})}},m.prototype.strokeText=function(T,B,H,ee){if(isNaN(B)||isNaN(H)||typeof T!="string")throw br.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){ee=isNaN(ee)?void 0:ee;var ce=z(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;M.call(this,{text:T,x:B,y:H,scale:he,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:ee})}},m.prototype.measureText=function(T){if(typeof T!="string")throw br.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var B=this.pdf,H=this.pdf.internal.scaleFactor,ee=B.internal.getFontSize(),ce=B.getStringUnitWidth(T)*ee/B.internal.scaleFactor,he=function(W){var J=(W=W||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return J}}),this};return new he({width:ce*=Math.round(96*H/72*1e4)/1e4})},m.prototype.scale=function(T,B){if(isNaN(T)||isNaN(B))throw br.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new u(T,0,0,B,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},m.prototype.rotate=function(T){if(isNaN(T))throw br.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var B=new u(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(B)},m.prototype.translate=function(T,B){if(isNaN(T)||isNaN(B))throw br.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new u(1,0,0,1,T,B);this.ctx.transform=this.ctx.transform.multiply(H)},m.prototype.transform=function(T,B,H,ee,ce,he){if(isNaN(T)||isNaN(B)||isNaN(H)||isNaN(ee)||isNaN(ce)||isNaN(he))throw br.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var W=new u(T,B,H,ee,ce,he);this.ctx.transform=this.ctx.transform.multiply(W)},m.prototype.setTransform=function(T,B,H,ee,ce,he){T=isNaN(T)?1:T,B=isNaN(B)?0:B,H=isNaN(H)?0:H,ee=isNaN(ee)?1:ee,ce=isNaN(ce)?0:ce,he=isNaN(he)?0:he,this.ctx.transform=new u(T,B,H,ee,ce,he)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(T,B,H,ee,ce,he,W,J,pe){var ue=this.pdf.getImageProperties(T),me=1,je=1,ze=1,Te=1;ee!==void 0&&J!==void 0&&(ze=J/ee,Te=pe/ce,me=ue.width/ee*J/ee,je=ue.height/ce*pe/ce),he===void 0&&(he=B,W=H,B=0,H=0),ee!==void 0&&J===void 0&&(J=ee,pe=ce),ee===void 0&&J===void 0&&(J=ue.width,pe=ue.height);for(var xe,ht=this.ctx.transform.decompose(),gt=z(ht.rotate.shx),Ye=new u,dt=(Ye=(Ye=(Ye=Ye.multiply(ht.translate)).multiply(ht.skew)).multiply(ht.scale)).applyToRectangle(new c(he-B*ze,W-H*Te,ee*me,ce*je)),ft=b.call(this,dt),st=[],Ct=0;Ct<ft.length;Ct+=1)st.indexOf(ft[Ct])===-1&&st.push(ft[Ct]);if(S(st),this.autoPaging)for(var Vt=st[0],Zt=st[st.length-1],sn=Vt;sn<Zt+1;sn++){this.pdf.setPage(sn);var yn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pn=sn===1?this.posY+this.margin[0]:this.margin[0],Ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yt=sn===1?0:Ut+(sn-2)*Qt;if(this.ctx.clip_path.length!==0){var Cr=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(xe,this.posX+this.margin[3],-yt+Pn+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=Cr}var _n=JSON.parse(JSON.stringify(dt));_n=j([_n],this.posX+this.margin[3],-yt+Pn+this.ctx.prevPageLastElemOffset)[0];var pi=(sn>Vt||sn<Zt)&&y.call(this);pi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yn,Qt,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",_n.x,_n.y,_n.w,_n.h,null,null,gt),pi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",dt.x,dt.y,dt.w,dt.h,null,null,gt)};var b=function(T,B,H){var ee=[];B=B||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":ee.push(Math.floor((T.y+ce)/H)+1);break;case"arc":ee.push(Math.floor((T.y+ce-T.radius)/H)+1),ee.push(Math.floor((T.y+ce+T.radius)/H)+1);break;case"qct":var he=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);ee.push(Math.floor((he.y+ce)/H)+1),ee.push(Math.floor((he.y+he.h+ce)/H)+1);break;case"bct":var W=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);ee.push(Math.floor((W.y+ce)/H)+1),ee.push(Math.floor((W.y+W.h+ce)/H)+1);break;case"rect":ee.push(Math.floor((T.y+ce)/H)+1),ee.push(Math.floor((T.y+T.h+ce)/H)+1)}for(var J=0;J<ee.length;J+=1)for(;this.pdf.internal.getNumberOfPages()<ee[J];)N.call(this);return ee},N=function(){var T=this.fillStyle,B=this.strokeStyle,H=this.font,ee=this.lineCap,ce=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=B,this.font=H,this.lineCap=ee,this.lineWidth=ce,this.lineJoin=he},j=function(T,B,H){for(var ee=0;ee<T.length;ee++)switch(T[ee].type){case"bct":T[ee].x2+=B,T[ee].y2+=H;case"qct":T[ee].x1+=B,T[ee].y1+=H;case"mt":case"lt":case"arc":default:T[ee].x+=B,T[ee].y+=H}return T},S=function(T){return T.sort((function(B,H){return B-H}))},A=function(T,B){for(var H,ee,ce=this.fillStyle,he=this.strokeStyle,W=this.lineCap,J=this.lineWidth,pe=Math.abs(J*this.ctx.transform.scaleX),ue=this.lineJoin,me=JSON.parse(JSON.stringify(this.path)),je=JSON.parse(JSON.stringify(this.path)),ze=[],Te=0;Te<je.length;Te++)if(je[Te].x!==void 0)for(var xe=b.call(this,je[Te]),ht=0;ht<xe.length;ht+=1)ze.indexOf(xe[ht])===-1&&ze.push(xe[ht]);for(var gt=0;gt<ze.length;gt++)for(;this.pdf.internal.getNumberOfPages()<ze[gt];)N.call(this);if(S(ze),this.autoPaging)for(var Ye=ze[0],dt=ze[ze.length-1],ft=Ye;ft<dt+1;ft++){this.pdf.setPage(ft),this.fillStyle=ce,this.strokeStyle=he,this.lineCap=W,this.lineWidth=pe,this.lineJoin=ue;var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ct=ft===1?this.posY+this.margin[0]:this.margin[0],Vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],sn=ft===1?0:Vt+(ft-2)*Zt;if(this.ctx.clip_path.length!==0){var yn=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(H,this.posX+this.margin[3],-sn+Ct+this.ctx.prevPageLastElemOffset),P.call(this,T,!0),this.path=yn}if(ee=JSON.parse(JSON.stringify(me)),this.path=j(ee,this.posX+this.margin[3],-sn+Ct+this.ctx.prevPageLastElemOffset),B===!1||ft===0){var Pn=(ft>Ye||ft<dt)&&y.call(this);Pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,Zt,null).clip().discardPath()),P.call(this,T,B),Pn&&this.pdf.restoreGraphicsState()}this.lineWidth=J}else this.lineWidth=pe,P.call(this,T,B),this.lineWidth=J;this.path=me},P=function(T,B){if((T!=="stroke"||B||!v.call(this))&&(T==="stroke"||B||!x.call(this))){for(var H,ee,ce=[],he=this.path,W=0;W<he.length;W++){var J=he[W];switch(J.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:J,deltas:[],abs:[]});break;case"lt":var pe=ce.length;if(he[W-1]&&!isNaN(he[W-1].x)&&(H=[J.x-he[W-1].x,J.y-he[W-1].y],pe>0)){for(;pe>=0;pe--)if(ce[pe-1].close!==!0&&ce[pe-1].begin!==!0){ce[pe-1].deltas.push(H),ce[pe-1].abs.push(J);break}}break;case"bct":H=[J.x1-he[W-1].x,J.y1-he[W-1].y,J.x2-he[W-1].x,J.y2-he[W-1].y,J.x-he[W-1].x,J.y-he[W-1].y],ce[ce.length-1].deltas.push(H);break;case"qct":var ue=he[W-1].x+2/3*(J.x1-he[W-1].x),me=he[W-1].y+2/3*(J.y1-he[W-1].y),je=J.x+2/3*(J.x1-J.x),ze=J.y+2/3*(J.y1-J.y),Te=J.x,xe=J.y;H=[ue-he[W-1].x,me-he[W-1].y,je-he[W-1].x,ze-he[W-1].y,Te-he[W-1].x,xe-he[W-1].y],ce[ce.length-1].deltas.push(H);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(J)}}ee=B?null:T==="stroke"?"stroke":"fill";for(var ht=!1,gt=0;gt<ce.length;gt++)if(ce[gt].arc)for(var Ye=ce[gt].abs,dt=0;dt<Ye.length;dt++){var ft=Ye[dt];ft.type==="arc"?R.call(this,ft.x,ft.y,ft.radius,ft.startAngle,ft.endAngle,ft.counterclockwise,void 0,B,!ht):G.call(this,ft.x,ft.y),ht=!0}else if(ce[gt].close===!0)this.pdf.internal.out("h"),ht=!1;else if(ce[gt].begin!==!0){var st=ce[gt].start.x,Ct=ce[gt].start.y;Y.call(this,ce[gt].deltas,st,Ct),ht=!0}ee&&q.call(this,ee),B&&U.call(this)}},L=function(T){var B=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=B*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-H;case"top":return T+B-H;case"hanging":return T+B-2*H;case"middle":return T+B/2-H;case"ideographic":return T;case"alphabetic":default:return T}},O=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(B,H){this.colorStops.push([B,H])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(T,B,H,ee,ce,he,W,J,pe){for(var ue=X.call(this,H,ee,ce,he),me=0;me<ue.length;me++){var je=ue[me];me===0&&(pe?D.call(this,je.x1+T,je.y1+B):G.call(this,je.x1+T,je.y1+B)),Z.call(this,T,B,je.x2,je.y2,je.x3,je.y3,je.x4,je.y4)}J?U.call(this):q.call(this,W)},q=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(T,B){this.pdf.internal.out(r(T)+" "+s(B)+" m")},M=function(T){var B;switch(T.align){case"right":case"end":B="right";break;case"center":B="center";break;case"left":case"start":default:B="left"}var H=this.pdf.getTextDimensions(T.text),ee=L.call(this,T.y),ce=O.call(this,ee)-H.h,he=this.ctx.transform.applyToPoint(new l(T.x,ee)),W=this.ctx.transform.decompose(),J=new u;J=(J=(J=J.multiply(W.translate)).multiply(W.skew)).multiply(W.scale);for(var pe,ue,me,je=this.ctx.transform.applyToRectangle(new c(T.x,ee,H.w,H.h)),ze=J.applyToRectangle(new c(T.x,ce,H.w,H.h)),Te=b.call(this,ze),xe=[],ht=0;ht<Te.length;ht+=1)xe.indexOf(Te[ht])===-1&&xe.push(Te[ht]);if(S(xe),this.autoPaging)for(var gt=xe[0],Ye=xe[xe.length-1],dt=gt;dt<Ye+1;dt++){this.pdf.setPage(dt);var ft=dt===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[2],Vt=Ct-this.margin[0],Zt=this.pdf.internal.pageSize.width-this.margin[1],sn=Zt-this.margin[3],yn=dt===1?0:st+(dt-2)*Vt;if(this.ctx.clip_path.length!==0){var Pn=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(pe,this.posX+this.margin[3],-1*yn+ft),P.call(this,"fill",!0),this.path=Pn}var Ut=j([JSON.parse(JSON.stringify(ze))],this.posX+this.margin[3],-yn+ft+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*T.scale),me=this.lineWidth,this.lineWidth=me*T.scale);var Qt=this.autoPaging!=="text";if(Qt||Ut.y+Ut.h<=Ct){if(Qt||Ut.y>=ft&&Ut.x<=Zt){var yt=Qt?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||Zt-Ut.x)[0],Cr=j([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-yn+ft+this.ctx.prevPageLastElemOffset)[0],_n=Qt&&(dt>gt||dt<Ye)&&y.call(this);_n&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],sn,Vt,null).clip().discardPath()),this.pdf.text(yt,Cr.x,Cr.y,{angle:T.angle,align:B,renderingMode:T.renderingMode}),_n&&this.pdf.restoreGraphicsState()}}else Ut.y<Ct&&(this.ctx.prevPageLastElemOffset+=Ct-Ut.y);T.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=me)}else T.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*T.scale),me=this.lineWidth,this.lineWidth=me*T.scale),this.pdf.text(T.text,he.x+this.posX,he.y+this.posY,{angle:T.angle,align:B,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=me)},G=function(T,B,H,ee){H=H||0,ee=ee||0,this.pdf.internal.out(r(T+H)+" "+s(B+ee)+" l")},Y=function(T,B,H){return this.pdf.lines(T,B,H,null,null)},Z=function(T,B,H,ee,ce,he,W,J){this.pdf.internal.out([n(a(H+T)),n(o(ee+B)),n(a(ce+T)),n(o(he+B)),n(a(W+T)),n(o(J+B)),"c"].join(" "))},X=function(T,B,H,ee){for(var ce=2*Math.PI,he=Math.PI/2;B>H;)B-=ce;var W=Math.abs(H-B);W<ce&&ee&&(W=ce-W);for(var J=[],pe=ee?-1:1,ue=B;W>1e-5;){var me=ue+pe*Math.min(W,he);J.push(re.call(this,T,ue,me)),W-=Math.abs(me-ue),ue=me}return J},re=function(T,B,H){var ee=(H-B)/2,ce=T*Math.cos(ee),he=T*Math.sin(ee),W=ce,J=-he,pe=W*W+J*J,ue=pe+W*ce+J*he,me=4/3*(Math.sqrt(2*pe*ue)-ue)/(W*he-J*ce),je=W-me*J,ze=J+me*W,Te=je,xe=-ze,ht=ee+B,gt=Math.cos(ht),Ye=Math.sin(ht);return{x1:T*Math.cos(B),y1:T*Math.sin(B),x2:je*gt-ze*Ye,y2:je*Ye+ze*gt,x3:Te*gt-xe*Ye,y3:Te*Ye+xe*gt,x4:T*Math.cos(H),y4:T*Math.sin(H)}},z=function(T){return 180*T/Math.PI},te=function(T,B,H,ee,ce,he){var W=T+.5*(H-T),J=B+.5*(ee-B),pe=ce+.5*(H-ce),ue=he+.5*(ee-he),me=Math.min(T,ce,W,pe),je=Math.max(T,ce,W,pe),ze=Math.min(B,he,J,ue),Te=Math.max(B,he,J,ue);return new c(me,ze,je-me,Te-ze)},le=function(T,B,H,ee,ce,he,W,J){var pe,ue,me,je,ze,Te,xe,ht,gt,Ye,dt,ft,st,Ct,Vt=H-T,Zt=ee-B,sn=ce-H,yn=he-ee,Pn=W-ce,Ut=J-he;for(ue=0;ue<41;ue++)gt=(xe=(me=T+(pe=ue/40)*Vt)+pe*((ze=H+pe*sn)-me))+pe*(ze+pe*(ce+pe*Pn-ze)-xe),Ye=(ht=(je=B+pe*Zt)+pe*((Te=ee+pe*yn)-je))+pe*(Te+pe*(he+pe*Ut-Te)-ht),ue==0?(dt=gt,ft=Ye,st=gt,Ct=Ye):(dt=Math.min(dt,gt),ft=Math.min(ft,Ye),st=Math.max(st,gt),Ct=Math.max(Ct,Ye));return new c(Math.round(dt),Math.round(ft),Math.round(st-dt),Math.round(Ct-ft))},Q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,B,H=(T=this.ctx.lineDash,B=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:B}));this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})(Yt.API),(function(e){var n=function(o){var l,c,u,d,f,m,g,x,v,y;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(f=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(m=(f=((f=((f=((f=(f-(y=f%85))/85)-(v=f%85))/85)-(x=f%85))/85)-(g=f%85))/85)%85,c.push(m+33,g+33,x+33,v+33,y+33)):c.push(122);return(function(b,N){for(var j=N;j>0;j--)b.pop()})(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,f,m=String,g="length",x=255,v="charCodeAt",y="slice",b="replace";for(o[y](-2),o=o[y](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),u=[],d=0,f=(o+=l="uuuuu"[y](o[g]%5||5))[g];f>d;d+=5)c=52200625*(o[v](d)-33)+614125*(o[v](d+1)-33)+7225*(o[v](d+2)-33)+85*(o[v](d+3)-33)+(o[v](d+4)-33),u.push(x&c>>24,x&c>>16,x&c>>8,x&c);return(function(N,j){for(var S=j;S>0;S--)N.pop()})(u,l[g]),m.fromCharCode.apply(m,u)},s=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},a=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return o=(l=ak(l)).reduce((function(u,d){return u+String.fromCharCode(d)}),"")};e.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=n(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=s(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map((function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)})).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=a(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}})(Yt.API),(function(e){e.loadFile=function(n,r,s){return(function(a,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var c=void 0;try{c=(function(u,d,f){var m=new XMLHttpRequest,g=0,x=function(v){var y=v.length,b=[],N=String.fromCharCode;for(g=0;g<y;g+=1)b.push(N(255&v.charCodeAt(g)));return b.join("")};if(m.open("GET",u,!d),m.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(m.onload=function(){m.status===200?f(x(this.responseText)):f(void 0)}),m.send(null),d&&m.status===200)return x(m.responseText)})(a,o,l)}catch{}return c})(n,r,s)},e.loadImageFile=e.loadFile})(Yt.API),(function(e){function n(){return(en.html2canvas?Promise.resolve(en.html2canvas):Y1(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))})).then((function(l){return l.default?l.default:l}))}function r(){return(en.DOMPurify?Promise.resolve(en.DOMPurify):Y1(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(l){return Promise.reject(new Error("Could not load dompurify: "+l))})).then((function(l){return l.default?l.default:l}))}var s=function(l){var c=cr(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return d=(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then((function(){switch(c=c||(function(u){switch(s(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l)){case"string":return this.then(r).then((function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})}));case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=(function u(d,f){for(var m=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),g=d.firstChild;g;g=g.nextSibling)f!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||m.appendChild(u(g,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(m.width=d.width,m.height=d.height,m.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(m.value=d.value),m.addEventListener("load",(function(){m.scrollTop=d.scrollTop,m.scrollLeft=d.scrollLeft}),!0)),m})(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(n).then((function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)})).then((function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(n).then((function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var g=0;g<d.length;++g){var x=d[g],v=x.src.find((function(y){return y.format==="truetype"}));v&&u.addFont(v.url,x.ref.name,x.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,u.context2d.save(!0),c(this.prop.container,m)})).then((function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(l,c)}))},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}}))},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(l){if(s(l)!=="object")return this;var c=Object.keys(l||{}).map((function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}}),this);return this.then((function(){return this.thenList(c)}))},o.prototype.get=function(l,c){return this.then((function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u}))},o.prototype.setMargin=function(l){return this.then((function(){switch(s(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l})).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then((function(){(l=l||Yt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l}))},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,(function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,(function(m){return u.updateProgress(null,d),m})).then(d,f).then((function(m){return u.updateProgress(1),m}))}))},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then,l&&(l=l.bind(this)),c&&(c=c.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),f=u.call(d,l,c);return o.convert(f,this.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach((function(u){c=c.thenCore(u)})),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then((function(){throw new Error(l)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Yt.getPageSize=function(l,c,u){if(cr(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,m=(""+u).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var x,v=0,y=0;if(g.hasOwnProperty(m))v=g[m][1]/f,y=g[m][0]/f;else try{v=u[1],y=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",y>v&&(x=y,y=v,v=x);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",v>y&&(x=y,y=v,v=x)}return{width:y,height:v,unit:c,k:f,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(hk):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}})(Yt.API),Yt.API.addJS=function(e){return V6=e,this.internal.events.subscribe("postPutResources",(function(){kb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(kb+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),U6=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+V6+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){kb!==void 0&&U6!==void 0&&this.internal.out("/Names <</JavaScript "+kb+" 0 R>>")})),this},(function(e){var n;e.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),o=0;o<a.length;o++){var l=a[o],c=s.exec(l);if(c!=null){var u=c[1];r.internal.newObjectDeferredBegin(u,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,f=[];for(o=0;o<d;o++){var m=r.internal.newObject();f.push(m);var g=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<f.length;o++)r.internal.write("(page_"+(o+1)+")"+f[o]+" 0 R");r.internal.write(" ] >>","endobj"),n=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+n+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,a,o){var l={title:a,options:o,children:[]};return s==null&&(s=this.root),s.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var l=s.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var c=this.count=this.count_r({count:0},l);if(c>0&&this.line("/Count "+c),l.options&&l.options.pageNumber){var u=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<s.children.length;d++)this.renderItems(s.children[d])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,a){for(var o=0;o<a.children.length;o++)s.count++,this.count_r(s,a.children[o]);return s.count}}])})(Yt.API),(function(e){var n=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,s,a,o,l,c){var u,d=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(u=(function(m){for(var g,x=256*m.charCodeAt(4)+m.charCodeAt(5),v=m.length,y={width:0,height:0,numcomponents:1},b=4;b<v;b+=2){if(b+=x,n.indexOf(m.charCodeAt(b+1))!==-1){g=256*m.charCodeAt(b+5)+m.charCodeAt(b+6),y={width:256*m.charCodeAt(b+7)+m.charCodeAt(b+8),height:g,numcomponents:m.charCodeAt(b+9)};break}x=256*m.charCodeAt(b+2)+m.charCodeAt(b+3)}return y})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}f={data:r,width:u.width,height:u.height,colorSpace:c,bitsPerComponent:8,filter:d,index:s,alias:a}}return f}})(Yt.API);var Sp,Eb,H6,W6,K6,Pbe=(function(){var e,n,r;function s(o){var l,c,u,d,f,m,g,x,v,y,b,N,j,S;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(l=this.readUInt32(),v=(function(){var A,P;for(P=[],A=0;A<4;++A)P.push(String.fromCharCode(this.data[this.pos++]));return P}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),d=this.readUInt16()||100,m.delay=1e3*f/d,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,l-=4),o=(m!=null?m.data:void 0)||this.imgData,N=0;0<=l?N<l:N>l;0<=l?++N:--N)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((y=u-this.transparency.indexed.length)>0)for(j=0;0<=y?j<y:j>y;0<=y?++j:--j)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":g=(b=this.read(l)).indexOf(0),x=String.fromCharCode.apply(String,b.slice(0,g)),this.text[x]=String.fromCharCode.apply(String,b.slice(g+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(o){var l,c;for(c=[],l=0;0<=o?l<o:l>o;0<=o?++l:--l)c.push(this.data[this.pos++]);return c},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(o){var l=this.pixelBitlength/8,c=new Uint8Array(this.width*this.height*l),u=0,d=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function f(m,g,x,v){var y,b,N,j,S,A,P,L,O,R,q,U,D,M,G,Y,Z,X,re,z,te,le=Math.ceil((d.width-m)/x),Q=Math.ceil((d.height-g)/v),T=d.width==le&&d.height==Q;for(M=l*le,U=T?c:new Uint8Array(M*Q),A=o.length,D=0,b=0;D<Q&&u<A;){switch(o[u++]){case 0:for(j=Z=0;Z<M;j=Z+=1)U[b++]=o[u++];break;case 1:for(j=X=0;X<M;j=X+=1)y=o[u++],S=j<l?0:U[b-l],U[b++]=(y+S)%256;break;case 2:for(j=re=0;re<M;j=re+=1)y=o[u++],N=(j-j%l)/l,G=D&&U[(D-1)*M+N*l+j%l],U[b++]=(G+y)%256;break;case 3:for(j=z=0;z<M;j=z+=1)y=o[u++],N=(j-j%l)/l,S=j<l?0:U[b-l],G=D&&U[(D-1)*M+N*l+j%l],U[b++]=(y+Math.floor((S+G)/2))%256;break;case 4:for(j=te=0;te<M;j=te+=1)y=o[u++],N=(j-j%l)/l,S=j<l?0:U[b-l],D===0?G=Y=0:(G=U[(D-1)*M+N*l+j%l],Y=N&&U[(D-1)*M+(N-1)*l+j%l]),P=S+G-Y,L=Math.abs(P-S),R=Math.abs(P-G),q=Math.abs(P-Y),O=L<=R&&L<=q?S:R<=q?G:Y,U[b++]=(y+O)%256;break;default:throw new Error("Invalid filter algorithm: "+o[u-1])}if(!T){var B=((g+D*v)*d.width+m)*l,H=D*M;for(j=0;j<le;j+=1){for(var ee=0;ee<l;ee+=1)c[B++]=U[H++];B+=(x-1)*l}}D++}}return o=ibe(o),d.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),c},s.prototype.decodePalette=function(){var o,l,c,u,d,f,m,g,x;for(c=this.palette,f=this.transparency.indexed||[],d=new Uint8Array((f.length||0)+c.length),u=0,o=0,l=m=0,g=c.length;m<g;l=m+=3)d[u++]=c[l],d[u++]=c[l+1],d[u++]=c[l+2],d[u++]=(x=f[o++])!=null?x:255;return d},s.prototype.copyToImageData=function(o,l){var c,u,d,f,m,g,x,v,y,b,N;if(u=this.colors,y=null,c=this.hasAlphaChannel,this.palette.length&&(y=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),u=4,c=!0),v=(d=o.data||o).length,m=y||l,f=g=0,u===1)for(;f<v;)x=y?4*l[f/4]:g,b=m[x++],d[f++]=b,d[f++]=b,d[f++]=b,d[f++]=c?m[x++]:255,g=x;else for(;f<v;)x=y?4*l[f/4]:g,d[f++]=m[x++],d[f++]=m[x++],d[f++]=m[x++],d[f++]=c?m[x++]:255,g=x},s.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var a=function(){if(Object.prototype.toString.call(en)==="[object Window]"){try{n=en.document.createElement("canvas"),r=n.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(o){var l;if(a()===!0)return r.width=o.width,r.height=o.height,r.clearRect(0,0,o.width,o.height),r.putImageData(o,0,0),(l=new Image).src=n.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(o){var l,c,u,d,f,m,g,x;if(this.animation){for(x=[],c=f=0,m=(g=this.animation.frames).length;f<m;c=++f)l=g[c],u=o.createImageData(l.width,l.height),d=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(u,d),l.imageData=u,x.push(l.image=e(u));return x}},s.prototype.renderFrame=function(o,l){var c,u,d;return c=(u=this.animation.frames)[l],d=u[l-1],l===0&&o.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?o.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&o.putImageData(d.imageData,d.xOffset,d.yOffset),c.blendOp===0&&o.clearRect(c.xOffset,c.yOffset,c.width,c.height),o.drawImage(c.image,c.xOffset,c.yOffset)},s.prototype.animate=function(o){var l,c,u,d,f,m,g=this;return c=0,m=this.animation,d=m.numFrames,u=m.frames,f=m.numPlays,(l=function(){var x,v;if(x=c++%d,v=u[x],g.renderFrame(o,x),d>1&&c/d<f)return g.animation._timeout=setTimeout(l,v.delay)})()},s.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},s.prototype.render=function(o){var l,c;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,l=o.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(c=l.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),l.putImageData(c,0,0))},s})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Abe(e){var n=0;if(e[n++]!==71||e[n++]!==73||e[n++]!==70||e[n++]!==56||(e[n++]+1&253)!=56||e[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[n++]|e[n++]<<8,s=e[n++]|e[n++]<<8,a=e[n++],o=a>>7,l=1<<(7&a)+1;e[n++],e[n++];var c=null,u=null;o&&(c=n,u=l,n+=3*l);var d=!0,f=[],m=0,g=null,x=0,v=null;for(this.width=r,this.height=s;d&&n<e.length;)switch(e[n++]){case 33:switch(e[n++]){case 255:if(e[n]!==11||e[n+1]==78&&e[n+2]==69&&e[n+3]==84&&e[n+4]==83&&e[n+5]==67&&e[n+6]==65&&e[n+7]==80&&e[n+8]==69&&e[n+9]==50&&e[n+10]==46&&e[n+11]==48&&e[n+12]==3&&e[n+13]==1&&e[n+16]==0)n+=14,v=e[n++]|e[n++]<<8,n++;else for(n+=12;;){if(!((D=e[n++])>=0))throw Error("Invalid block size");if(D===0)break;n+=D}break;case 249:if(e[n++]!==4||e[n+4]!==0)throw new Error("Invalid graphics extension block.");var y=e[n++];m=e[n++]|e[n++]<<8,g=e[n++],(1&y)==0&&(g=null),x=y>>2&7,n++;break;case 254:for(;;){if(!((D=e[n++])>=0))throw Error("Invalid block size");if(D===0)break;n+=D}break;default:throw new Error("Unknown graphic control label: 0x"+e[n-1].toString(16))}break;case 44:var b=e[n++]|e[n++]<<8,N=e[n++]|e[n++]<<8,j=e[n++]|e[n++]<<8,S=e[n++]|e[n++]<<8,A=e[n++],P=A>>6&1,L=1<<(7&A)+1,O=c,R=u,q=!1;A>>7&&(q=!0,O=n,R=L,n+=3*L);var U=n;for(n++;;){var D;if(!((D=e[n++])>=0))throw Error("Invalid block size");if(D===0)break;n+=D}f.push({x:b,y:N,width:j,height:S,has_local_palette:q,palette_offset:O,palette_size:R,data_offset:U,data_length:n-U,transparent_index:g,interlaced:!!P,delay:m,disposal:x});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[n-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return v},this.frameInfo=function(M){if(M<0||M>=f.length)throw new Error("Frame index out of range.");return f[M]},this.decodeAndBlitFrameBGRA=function(M,G){var Y=this.frameInfo(M),Z=Y.width*Y.height,X=new Uint8Array(Z);G6(e,Y.data_offset,X,Z);var re=Y.palette_offset,z=Y.transparent_index;z===null&&(z=256);var te=Y.width,le=r-te,Q=te,T=4*(Y.y*r+Y.x),B=4*((Y.y+Y.height)*r+Y.x),H=T,ee=4*le;Y.interlaced===!0&&(ee+=4*r*7);for(var ce=8,he=0,W=X.length;he<W;++he){var J=X[he];if(Q===0&&(Q=te,(H+=ee)>=B&&(ee=4*le+4*r*(ce-1),H=T+(te+le)*(ce<<1),ce>>=1)),J===z)H+=4;else{var pe=e[re+3*J],ue=e[re+3*J+1],me=e[re+3*J+2];G[H++]=me,G[H++]=ue,G[H++]=pe,G[H++]=255}--Q}},this.decodeAndBlitFrameRGBA=function(M,G){var Y=this.frameInfo(M),Z=Y.width*Y.height,X=new Uint8Array(Z);G6(e,Y.data_offset,X,Z);var re=Y.palette_offset,z=Y.transparent_index;z===null&&(z=256);var te=Y.width,le=r-te,Q=te,T=4*(Y.y*r+Y.x),B=4*((Y.y+Y.height)*r+Y.x),H=T,ee=4*le;Y.interlaced===!0&&(ee+=4*r*7);for(var ce=8,he=0,W=X.length;he<W;++he){var J=X[he];if(Q===0&&(Q=te,(H+=ee)>=B&&(ee=4*le+4*r*(ce-1),H=T+(te+le)*(ce<<1),ce>>=1)),J===z)H+=4;else{var pe=e[re+3*J],ue=e[re+3*J+1],me=e[re+3*J+2];G[H++]=pe,G[H++]=ue,G[H++]=me,G[H++]=255}--Q}}}function G6(e,n,r,s){for(var a=e[n++],o=1<<a,l=o+1,c=l+1,u=a+1,d=(1<<u)-1,f=0,m=0,g=0,x=e[n++],v=new Int32Array(4096),y=null;;){for(;f<16&&x!==0;)m|=e[n++]<<f,f+=8,x===1?x=e[n++]:--x;if(f<u)break;var b=m&d;if(m>>=u,f-=u,b!==o){if(b===l)break;for(var N=b<c?b:y,j=0,S=N;S>o;)S=v[S]>>8,++j;var A=S;if(g+j+(N!==b?1:0)>s)return void br.log("Warning, gif stream longer than expected.");r[g++]=A;var P=g+=j;for(N!==b&&(r[g++]=A),S=N;j--;)S=v[S],r[--P]=255&S,S>>=8;y!==null&&c<4096&&(v[c++]=y<<8|A,c>=d+1&&u<12&&(++u,d=d<<1|1)),y=b}else c=l+1,d=(1<<(u=a+1))-1,y=null}return g!==s&&br.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function P5(e){var n,r,s,a,o,l=Math.floor,c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(64),m=new Array(65535),g=new Array(65535),x=new Array(64),v=new Array(64),y=[],b=0,N=7,j=new Array(64),S=new Array(64),A=new Array(64),P=new Array(256),L=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(T,B){for(var H=0,ee=0,ce=new Array,he=1;he<=16;he++){for(var W=1;W<=T[he];W++)ce[B[ee]]=[],ce[B[ee]][0]=H,ce[B[ee]][1]=he,ee++,H++;H*=2}return ce}function re(T){for(var B=T[0],H=T[1]-1;H>=0;)B&1<<H&&(b|=1<<N),H--,--N<0&&(b==255?(z(255),z(0)):z(b),N=7,b=0)}function z(T){y.push(T)}function te(T){z(T>>8&255),z(255&T)}function le(T,B,H,ee,ce){for(var he,W=ce[0],J=ce[240],pe=(function(Ye,dt){var ft,st,Ct,Vt,Zt,sn,yn,Pn,Ut,Qt,yt=0;for(Ut=0;Ut<8;++Ut){ft=Ye[yt],st=Ye[yt+1],Ct=Ye[yt+2],Vt=Ye[yt+3],Zt=Ye[yt+4],sn=Ye[yt+5],yn=Ye[yt+6];var Cr=ft+(Pn=Ye[yt+7]),_n=ft-Pn,pi=st+yn,Un=st-yn,Gn=Ct+sn,gi=Ct-sn,wn=Vt+Zt,vs=Vt-Zt,dr=Cr+wn,ys=Cr-wn,Ps=pi+Gn,hr=pi-Gn;Ye[yt]=dr+Ps,Ye[yt+4]=dr-Ps;var mt=.707106781*(hr+ys);Ye[yt+2]=ys+mt,Ye[yt+6]=ys-mt;var Ht=.382683433*((dr=vs+gi)-(hr=Un+_n)),vr=.5411961*dr+Ht,Dn=1.306562965*hr+Ht,As=.707106781*(Ps=gi+Un),Yn=_n+As,Pt=_n-As;Ye[yt+5]=Pt+vr,Ye[yt+3]=Pt-vr,Ye[yt+1]=Yn+Dn,Ye[yt+7]=Yn-Dn,yt+=8}for(yt=0,Ut=0;Ut<8;++Ut){ft=Ye[yt],st=Ye[yt+8],Ct=Ye[yt+16],Vt=Ye[yt+24],Zt=Ye[yt+32],sn=Ye[yt+40],yn=Ye[yt+48];var bs=ft+(Pn=Ye[yt+56]),fr=ft-Pn,mr=st+yn,pr=st-yn,Fn=Ct+sn,ks=Ct-sn,Ml=Vt+Zt,Ho=Vt-Zt,qa=bs+Ml,za=bs-Ml,Es=mr+Fn,Ua=mr-Fn;Ye[yt]=qa+Es,Ye[yt+32]=qa-Es;var Wi=.707106781*(Ua+za);Ye[yt+16]=za+Wi,Ye[yt+48]=za-Wi;var mo=.382683433*((qa=Ho+ks)-(Ua=pr+fr)),Fl=.5411961*qa+mo,Fc=1.306562965*Ua+mo,Bc=.707106781*(Es=ks+pr),$c=fr+Bc,Xu=fr-Bc;Ye[yt+40]=Xu+Fl,Ye[yt+24]=Xu-Fl,Ye[yt+8]=$c+Fc,Ye[yt+56]=$c-Fc,yt++}for(Ut=0;Ut<64;++Ut)Qt=Ye[Ut]*dt[Ut],x[Ut]=Qt>0?Qt+.5|0:Qt-.5|0;return x})(T,B),ue=0;ue<64;++ue)v[O[ue]]=pe[ue];var me=v[0]-H;H=v[0],me==0?re(ee[0]):(re(ee[g[he=32767+me]]),re(m[he]));for(var je=63;je>0&&v[je]==0;)je--;if(je==0)return re(W),H;for(var ze,Te=1;Te<=je;){for(var xe=Te;v[Te]==0&&Te<=je;)++Te;var ht=Te-xe;if(ht>=16){ze=ht>>4;for(var gt=1;gt<=ze;++gt)re(J);ht&=15}he=32767+v[Te],re(ce[(ht<<4)+g[he]]),re(m[he]),Te++}return je!=63&&re(W),H}function Q(T){T=Math.min(Math.max(T,1),100),o!=T&&((function(B){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var ce=l((H[ee]*B+50)/100);ce=Math.min(Math.max(ce,1),255),c[O[ee]]=ce}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],W=0;W<64;W++){var J=l((he[W]*B+50)/100);J=Math.min(Math.max(J,1),255),u[O[W]]=J}for(var pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ue=0,me=0;me<8;me++)for(var je=0;je<8;je++)d[ue]=1/(c[O[ue]]*pe[me]*pe[je]*8),f[ue]=1/(u[O[ue]]*pe[me]*pe[je]*8),ue++})(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),o=T)}this.encode=function(T,B){B&&Q(B),y=new Array,b=0,N=7,te(65496),te(65504),te(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),te(1),te(1),z(0),z(0),(function(){te(65499),te(132),z(0);for(var st=0;st<64;st++)z(c[st]);z(1);for(var Ct=0;Ct<64;Ct++)z(u[Ct])})(),(function(st,Ct){te(65472),te(17),z(8),te(Ct),te(st),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)})(T.width,T.height),(function(){te(65476),te(418),z(0);for(var st=0;st<16;st++)z(R[st+1]);for(var Ct=0;Ct<=11;Ct++)z(q[Ct]);z(16);for(var Vt=0;Vt<16;Vt++)z(U[Vt+1]);for(var Zt=0;Zt<=161;Zt++)z(D[Zt]);z(1);for(var sn=0;sn<16;sn++)z(M[sn+1]);for(var yn=0;yn<=11;yn++)z(G[yn]);z(17);for(var Pn=0;Pn<16;Pn++)z(Y[Pn+1]);for(var Ut=0;Ut<=161;Ut++)z(Z[Ut])})(),te(65498),te(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var H=0,ee=0,ce=0;b=0,N=7,this.encode.displayName="_encode_";for(var he,W,J,pe,ue,me,je,ze,Te,xe=T.data,ht=T.width,gt=T.height,Ye=4*ht,dt=0;dt<gt;){for(he=0;he<Ye;){for(ue=Ye*dt+he,je=-1,ze=0,Te=0;Te<64;Te++)me=ue+(ze=Te>>3)*Ye+(je=4*(7&Te)),dt+ze>=gt&&(me-=Ye*(dt+1+ze-gt)),he+je>=Ye&&(me-=he+je-Ye+4),W=xe[me++],J=xe[me++],pe=xe[me++],j[Te]=(L[W]+L[J+256>>0]+L[pe+512>>0]>>16)-128,S[Te]=(L[W+768>>0]+L[J+1024>>0]+L[pe+1280>>0]>>16)-128,A[Te]=(L[W+1280>>0]+L[J+1536>>0]+L[pe+1792>>0]>>16)-128;H=le(j,d,H,n,s),ee=le(S,f,ee,r,a),ce=le(A,f,ce,r,a),he+=32}dt+=8}if(N>=0){var ft=[];ft[1]=N+1,ft[0]=(1<<N+1)-1,re(ft)}return te(65497),new Uint8Array(y)},e=e||50,(function(){for(var T=String.fromCharCode,B=0;B<256;B++)P[B]=T(B)})(),n=X(R,q),r=X(M,G),s=X(U,D),a=X(Y,Z),(function(){for(var T=1,B=2,H=1;H<=15;H++){for(var ee=T;ee<B;ee++)g[32767+ee]=H,m[32767+ee]=[],m[32767+ee][1]=H,m[32767+ee][0]=ee;for(var ce=-(B-1);ce<=-T;ce++)g[32767+ce]=H,m[32767+ce]=[],m[32767+ce][1]=H,m[32767+ce][0]=B-1+ce;T<<=1,B<<=1}})(),(function(){for(var T=0;T<256;T++)L[T]=19595*T,L[T+256>>0]=38470*T,L[T+512>>0]=7471*T+32768,L[T+768>>0]=-11059*T,L[T+1024>>0]=-21709*T,L[T+1280>>0]=32768*T+8421375,L[T+1536>>0]=-27439*T,L[T+1792>>0]=-5329*T})(),Q(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ml(e,n){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Y6(e){function n(R){if(!R)throw Error("assert :P")}function r(R,q,U){for(var D=0;4>D;D++)if(R[q+D]!=U.charCodeAt(D))return!0;return!1}function s(R,q,U,D,M){for(var G=0;G<M;G++)R[q+G]=U[D+G]}function a(R,q,U,D){for(var M=0;M<D;M++)R[q+M]=U}function o(R){return new Int32Array(R)}function l(R,q){for(var U=[],D=0;D<R;D++)U.push(new q);return U}function c(R,q){var U=[];return(function D(M,G,Y){for(var Z=Y[G],X=0;X<Z&&(M.push(Y.length>G+1?[]:new q),!(Y.length<G+1));X++)D(M[X],G+1,Y)})(U,0,R),U}var u=function(){var R=this;function q(_,E){for(var $=1<<E-1>>>0;_&$;)$>>>=1;return $?(_&$-1)+$:_}function U(_,E,$,K,ne){n(!(K%$));do _[E+(K-=$)]=ne;while(0<K)}function D(_,E,$,K,ne){if(n(2328>=ne),512>=ne)var ie=o(512);else if((ie=o(ne))==null)return 0;return(function(oe,de,fe,ge,Se,Ie){var Me,Re,Je=de,Ue=1<<fe,Ae=o(16),ke=o(16);for(n(Se!=0),n(ge!=null),n(oe!=null),n(0<fe),Re=0;Re<Se;++Re){if(15<ge[Re])return 0;++Ae[ge[Re]]}if(Ae[0]==Se)return 0;for(ke[1]=0,Me=1;15>Me;++Me){if(Ae[Me]>1<<Me)return 0;ke[Me+1]=ke[Me]+Ae[Me]}for(Re=0;Re<Se;++Re)Me=ge[Re],0<ge[Re]&&(Ie[ke[Me]++]=Re);if(ke[15]==1)return(ge=new M).g=0,ge.value=Ie[0],U(oe,Je,1,Ue,ge),Ue;var Ke,We=-1,Qe=Ue-1,Nt=0,vt=1,qt=1,wt=1<<fe;for(Re=0,Me=1,Se=2;Me<=fe;++Me,Se<<=1){if(vt+=qt<<=1,0>(qt-=Ae[Me]))return 0;for(;0<Ae[Me];--Ae[Me])(ge=new M).g=Me,ge.value=Ie[Re++],U(oe,Je+Nt,Se,wt,ge),Nt=q(Nt,Me)}for(Me=fe+1,Se=2;15>=Me;++Me,Se<<=1){if(vt+=qt<<=1,0>(qt-=Ae[Me]))return 0;for(;0<Ae[Me];--Ae[Me]){if(ge=new M,(Nt&Qe)!=We){for(Je+=wt,Ke=1<<(We=Me)-fe;15>We&&!(0>=(Ke-=Ae[We]));)++We,Ke<<=1;Ue+=wt=1<<(Ke=We-fe),oe[de+(We=Nt&Qe)].g=Ke+fe,oe[de+We].value=Je-de-We}ge.g=Me-fe,ge.value=Ie[Re++],U(oe,Je+(Nt>>fe),Se,wt,ge),Nt=q(Nt,Me)}}return vt!=2*ke[15]-1?0:Ue})(_,E,$,K,ne,ie)}function M(){this.value=this.g=0}function G(){this.value=this.g=0}function Y(){this.G=l(5,M),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Mr,G)}function Z(_,E,$,K){n(_!=null),n(E!=null),n(2147483648>K),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=E,_.pa=$,_.Jd=E,_.Yc=$+K,_.Zc=4<=K?$+K-4+1:$,he(_)}function X(_,E){for(var $=0;0<E--;)$|=J(_,128)<<E;return $}function re(_,E){var $=X(_,E);return W(_)?-$:$}function z(_,E,$,K){var ne,ie=0;for(n(_!=null),n(E!=null),n(4294967288>K),_.Sb=K,_.Ra=0,_.u=0,_.h=0,4<K&&(K=4),ne=0;ne<K;++ne)ie+=E[$+ne]<<8*ne;_.Ra=ie,_.bb=K,_.oa=E,_.pa=$}function te(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<xd-8>>>0,++_.bb,_.u-=8;H(_)&&(_.h=1,_.u=0)}function le(_,E){if(n(0<=E),!_.h&&E<=gd){var $=B(_)&pd[E];return _.u+=E,te(_),$}return _.h=1,_.u=0}function Q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(_){return _.Ra>>>(_.u&xd-1)>>>0}function H(_){return n(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>xd}function ee(_,E){_.u=E,_.h=H(_)}function ce(_){_.u>=vd&&(n(_.u>=vd),te(_))}function he(_){n(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(n(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function W(_){return X(_,1)}function J(_,E){var $=_.Ca;0>_.b&&he(_);var K=_.b,ne=$*E>>>8,ie=(_.I>>>K>ne)+0;for(ie?($-=ne,_.I-=ne+1<<K>>>0):$=ne+1,K=$,ne=0;256<=K;)ne+=8,K>>=8;return K=7^ne+ni[K],_.b-=K,_.Ca=($<<K)-1,ie}function pe(_,E,$){_[E+0]=$>>24&255,_[E+1]=$>>16&255,_[E+2]=$>>8&255,_[E+3]=$>>0&255}function ue(_,E){return _[E+0]<<0|_[E+1]<<8}function me(_,E){return ue(_,E)|_[E+2]<<16}function je(_,E){return ue(_,E)|ue(_,E+2)<<16}function ze(_,E){var $=1<<E;return n(_!=null),n(0<E),_.X=o($),_.X==null?0:(_.Mb=32-E,_.Xa=E,1)}function Te(_,E){n(_!=null),n(E!=null),n(_.Xa==E.Xa),s(E.X,0,_.X,0,1<<E.Xa)}function xe(){this.X=[],this.Xa=this.Mb=0}function ht(_,E,$,K){n($!=null),n(K!=null);var ne=$[0],ie=K[0];return ne==0&&(ne=(_*ie+E/2)/E),ie==0&&(ie=(E*ne+_/2)/_),0>=ne||0>=ie?0:($[0]=ne,K[0]=ie,1)}function gt(_,E){return _+(1<<E)-1>>>E}function Ye(_,E){return((4278255360&_)+(4278255360&E)>>>0&4278255360)+((16711935&_)+(16711935&E)>>>0&16711935)>>>0}function dt(_,E){R[E]=function($,K,ne,ie,oe,de,fe){var ge;for(ge=0;ge<oe;++ge){var Se=R[_](de[fe+ge-1],ne,ie+ge);de[fe+ge]=Ye($[K+ge],Se)}}}function ft(){this.ud=this.hd=this.jd=0}function st(_,E){return((4278124286&(_^E))>>>1)+(_&E)>>>0}function Ct(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function Vt(_,E){return Ct(_+(_-E+.5>>1))}function Zt(_,E,$){return Math.abs(E-$)-Math.abs(_-$)}function sn(_,E,$,K,ne,ie,oe){for(K=ie[oe-1],$=0;$<ne;++$)ie[oe+$]=K=Ye(_[E+$],K)}function yn(_,E,$,K,ne){var ie;for(ie=0;ie<$;++ie){var oe=_[E+ie],de=oe>>8&255,fe=16711935&(fe=(fe=16711935&oe)+((de<<16)+de));K[ne+ie]=(4278255360&oe)+fe>>>0}}function Pn(_,E){E.jd=_>>0&255,E.hd=_>>8&255,E.ud=_>>16&255}function Ut(_,E,$,K,ne,ie){var oe;for(oe=0;oe<K;++oe){var de=E[$+oe],fe=de>>>8,ge=de,Se=255&(Se=(Se=de>>>16)+((_.jd<<24>>24)*(fe<<24>>24)>>>5));ge=255&(ge=(ge=ge+((_.hd<<24>>24)*(fe<<24>>24)>>>5))+((_.ud<<24>>24)*(Se<<24>>24)>>>5)),ne[ie+oe]=(4278255360&de)+(Se<<16)+ge}}function Qt(_,E,$,K,ne){R[E]=function(ie,oe,de,fe,ge,Se,Ie,Me,Re){for(fe=Ie;fe<Me;++fe)for(Ie=0;Ie<Re;++Ie)ge[Se++]=ne(de[K(ie[oe++])])},R[_]=function(ie,oe,de,fe,ge,Se,Ie){var Me=8>>ie.b,Re=ie.Ea,Je=ie.K[0],Ue=ie.w;if(8>Me)for(ie=(1<<ie.b)-1,Ue=(1<<Me)-1;oe<de;++oe){var Ae,ke=0;for(Ae=0;Ae<Re;++Ae)Ae&ie||(ke=K(fe[ge++])),Se[Ie++]=ne(Je[ke&Ue]),ke>>=Me}else R["VP8LMapColor"+$](fe,ge,Je,Ue,Se,Ie,oe,de,Re)}}function yt(_,E,$,K,ne){for($=E+$;E<$;){var ie=_[E++];K[ne++]=ie>>16&255,K[ne++]=ie>>8&255,K[ne++]=ie>>0&255}}function Cr(_,E,$,K,ne){for($=E+$;E<$;){var ie=_[E++];K[ne++]=ie>>16&255,K[ne++]=ie>>8&255,K[ne++]=ie>>0&255,K[ne++]=ie>>24&255}}function _n(_,E,$,K,ne){for($=E+$;E<$;){var ie=(oe=_[E++])>>16&240|oe>>12&15,oe=oe>>0&240|oe>>28&15;K[ne++]=ie,K[ne++]=oe}}function pi(_,E,$,K,ne){for($=E+$;E<$;){var ie=(oe=_[E++])>>16&248|oe>>13&7,oe=oe>>5&224|oe>>3&31;K[ne++]=ie,K[ne++]=oe}}function Un(_,E,$,K,ne){for($=E+$;E<$;){var ie=_[E++];K[ne++]=ie>>0&255,K[ne++]=ie>>8&255,K[ne++]=ie>>16&255}}function Gn(_,E,$,K,ne,ie){if(ie==0)for($=E+$;E<$;)pe(K,((ie=_[E++])[0]>>24|ie[1]>>8&65280|ie[2]<<8&16711680|ie[3]<<24)>>>0),ne+=32;else s(K,ne,_,E,$)}function gi(_,E){R[E][0]=R[_+"0"],R[E][1]=R[_+"1"],R[E][2]=R[_+"2"],R[E][3]=R[_+"3"],R[E][4]=R[_+"4"],R[E][5]=R[_+"5"],R[E][6]=R[_+"6"],R[E][7]=R[_+"7"],R[E][8]=R[_+"8"],R[E][9]=R[_+"9"],R[E][10]=R[_+"10"],R[E][11]=R[_+"11"],R[E][12]=R[_+"12"],R[E][13]=R[_+"13"],R[E][14]=R[_+"0"],R[E][15]=R[_+"0"]}function wn(_){return _==_d||_==au||_==pf||_==gf}function vs(){this.eb=[],this.size=this.A=this.fb=0}function dr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ys(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vs,this.f.kb=new dr,this.sd=null}function Ps(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function hr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function mt(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function Ht(_,E){var $=_.T,K=E.ba.f.RGBA,ne=K.eb,ie=K.fb+_.ka*K.A,oe=ji[E.ba.S],de=_.y,fe=_.O,ge=_.f,Se=_.N,Ie=_.ea,Me=_.W,Re=E.cc,Je=E.dc,Ue=E.Mc,Ae=E.Nc,ke=_.ka,Ke=_.ka+_.T,We=_.U,Qe=We+1>>1;for(ke==0?oe(de,fe,null,null,ge,Se,Ie,Me,ge,Se,Ie,Me,ne,ie,null,null,We):(oe(E.ec,E.fc,de,fe,Re,Je,Ue,Ae,ge,Se,Ie,Me,ne,ie-K.A,ne,ie,We),++$);ke+2<Ke;ke+=2)Re=ge,Je=Se,Ue=Ie,Ae=Me,Se+=_.Rc,Me+=_.Rc,ie+=2*K.A,oe(de,(fe+=2*_.fa)-_.fa,de,fe,Re,Je,Ue,Ae,ge,Se,Ie,Me,ne,ie-K.A,ne,ie,We);return fe+=_.fa,_.j+Ke<_.o?(s(E.ec,E.fc,de,fe,We),s(E.cc,E.dc,ge,Se,Qe),s(E.Mc,E.Nc,Ie,Me,Qe),$--):1&Ke||oe(de,fe,null,null,ge,Se,Ie,Me,ge,Se,Ie,Me,ne,ie+K.A,null,null,We),$}function vr(_,E,$){var K=_.F,ne=[_.J];if(K!=null){var ie=_.U,oe=E.ba.S,de=oe==mf||oe==pf;E=E.ba.f.RGBA;var fe=[0],ge=_.ka;fe[0]=_.T,_.Kb&&(ge==0?--fe[0]:(--ge,ne[0]-=_.width),_.j+_.ka+_.T==_.o&&(fe[0]=_.o-_.j-ge));var Se=E.eb;ge=E.fb+ge*E.A,_=Qn(K,ne[0],_.width,ie,fe,Se,ge+(de?0:3),E.A),n($==fe),_&&wn(oe)&&bi(Se,ge,de,ie,fe,E.A)}return 0}function Dn(_){var E=_.ma,$=E.ba.S,K=11>$,ne=$==Zl||$==ff||$==mf||$==or||$==12||wn($);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!fd(E.Oa,_,ne?11:12))return 0;if(ne&&wn($)&&nt(),_.da)alert("todo:use_scaling");else{if(K){if(E.Ib=mt,_.Kb){if($=_.U+1>>1,E.memory=o(_.U+2*$),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+_.U,E.Mc=E.cc,E.Nc=E.dc+$,E.Ib=Ht,nt()}}else alert("todo:EmitYUV");ne&&(E.Jb=vr,K&&De())}if(K&&!Os){for(_=0;256>_;++_)Ni[_]=89858*(_-128)+Ya>>nl,_i[_]=-22014*(_-128)+Ya,Ad[_]=-45773*(_-128),uu[_]=113618*(_-128)+Ya>>nl;for(_=Xn;_<tr;++_)E=76283*(_-16)+Ya>>nl,tp[_-Xn]=Yi(E,255),Ey[_-Xn]=Yi(E+8>>4,15);Os=1}return 1}function As(_){var E=_.ma,$=_.U,K=_.T;return n(!(1&_.ka)),0>=$||0>=K?0:($=E.Ib(_,E),E.Jb!=null&&E.Jb(_,E,$),E.Dc+=$,1)}function Yn(_){_.ma.memory=null}function Pt(_,E,$,K){return le(_,8)!=47?0:(E[0]=le(_,14)+1,$[0]=le(_,14)+1,K[0]=le(_,1),le(_,3)!=0?0:!_.h)}function bs(_,E){if(4>_)return _+1;var $=_-2>>1;return(2+(1&_)<<$)+le(E,$)+1}function fr(_,E){return 120<E?E-120:1<=($=(($=Tj[E-1])>>4)*_+(8-(15&$)))?$:1;var $}function mr(_,E,$){var K=B($),ne=_[E+=255&K].g-8;return 0<ne&&(ee($,$.u+8),K=B($),E+=_[E].value,E+=K&(1<<ne)-1),ee($,$.u+_[E].g),_[E].value}function pr(_,E,$){return $.g+=_.g,$.value+=_.value<<E>>>0,n(8>=$.g),_.g}function Fn(_,E,$){var K=_.xc;return n((E=K==0?0:_.vc[_.md*($>>K)+(E>>K)])<_.Wb),_.Ya[E]}function ks(_,E,$,K){var ne=_.ab,ie=_.c*E,oe=_.C;E=oe+E;var de=$,fe=K;for(K=_.Ta,$=_.Ua;0<ne--;){var ge=_.gc[ne],Se=oe,Ie=E,Me=de,Re=fe,Je=(fe=K,de=$,ge.Ea);switch(n(Se<Ie),n(Ie<=ge.nc),ge.hc){case 2:Qm(Me,Re,(Ie-Se)*Je,fe,de);break;case 0:var Ue=Se,Ae=Ie,ke=fe,Ke=de,We=(wt=ge).Ea;Ue==0&&(eu(Me,Re,null,null,1,ke,Ke),sn(Me,Re+1,0,0,We-1,ke,Ke+1),Re+=We,Ke+=We,++Ue);for(var Qe=1<<wt.b,Nt=Qe-1,vt=gt(We,wt.b),qt=wt.K,wt=wt.w+(Ue>>wt.b)*vt;Ue<Ae;){var In=qt,Mn=wt,An=1;for(Go(Me,Re,ke,Ke-We,1,ke,Ke);An<We;){var dn=(An&~Nt)+Qe;dn>We&&(dn=We),(0,bo[In[Mn++]>>8&15])(Me,Re+ +An,ke,Ke+An-We,dn-An,ke,Ke+An),An=dn}Re+=We,Ke+=We,++Ue&Nt||(wt+=vt)}Ie!=ge.nc&&s(fe,de-Je,fe,de+(Ie-Se-1)*Je,Je);break;case 1:for(Je=Me,Ae=Re,We=(Me=ge.Ea)-(Ke=Me&~(ke=(Re=1<<ge.b)-1)),Ue=gt(Me,ge.b),Qe=ge.K,ge=ge.w+(Se>>ge.b)*Ue;Se<Ie;){for(Nt=Qe,vt=ge,qt=new ft,wt=Ae+Ke,In=Ae+Me;Ae<wt;)Pn(Nt[vt++],qt),Ql(qt,Je,Ae,Re,fe,de),Ae+=Re,de+=Re;Ae<In&&(Pn(Nt[vt++],qt),Ql(qt,Je,Ae,We,fe,de),Ae+=We,de+=We),++Se&ke||(ge+=Ue)}break;case 3:if(Me==fe&&Re==de&&0<ge.b){for(Ae=fe,Me=Je=de+(Ie-Se)*Je-(Ke=(Ie-Se)*gt(ge.Ea,ge.b)),Re=fe,ke=de,Ue=[],Ke=(We=Ke)-1;0<=Ke;--Ke)Ue[Ke]=Re[ke+Ke];for(Ke=We-1;0<=Ke;--Ke)Ae[Me+Ke]=Ue[Ke];ri(ge,Se,Ie,fe,Je,fe,de)}else ri(ge,Se,Ie,Me,Re,fe,de)}de=K,fe=$}fe!=$&&s(K,$,de,fe,ie)}function Ml(_,E){var $=_.V,K=_.Ba+_.c*_.C,ne=E-_.C;if(n(E<=_.l.o),n(16>=ne),0<ne){var ie=_.l,oe=_.Ta,de=_.Ua,fe=ie.width;if(ks(_,ne,$,K),ne=de=[de],n(($=_.C)<(K=E)),n(ie.v<ie.va),K>ie.o&&(K=ie.o),$<ie.j){var ge=ie.j-$;$=ie.j,ne[0]+=ge*fe}if($>=K?$=0:(ne[0]+=4*ie.v,ie.ka=$-ie.j,ie.U=ie.va-ie.v,ie.T=K-$,$=1),$){if(de=de[0],11>($=_.ca).S){var Se=$.f.RGBA,Ie=(K=$.S,ne=ie.U,ie=ie.T,ge=Se.eb,Se.A),Me=ie;for(Se=Se.fb+_.Ma*Se.A;0<Me--;){var Re=oe,Je=de,Ue=ne,Ae=ge,ke=Se;switch(K){case Xm:si(Re,Je,Ue,Ae,ke);break;case Zl:Us(Re,Je,Ue,Ae,ke);break;case _d:Us(Re,Je,Ue,Ae,ke),bi(Ae,ke,0,Ue,1,0);break;case Sy:Qo(Re,Je,Ue,Ae,ke);break;case ff:Gn(Re,Je,Ue,Ae,ke,1);break;case au:Gn(Re,Je,Ue,Ae,ke,1),bi(Ae,ke,0,Ue,1,0);break;case mf:Gn(Re,Je,Ue,Ae,ke,0);break;case pf:Gn(Re,Je,Ue,Ae,ke,0),bi(Ae,ke,1,Ue,1,0);break;case or:Xl(Re,Je,Ue,Ae,ke);break;case gf:Xl(Re,Je,Ue,Ae,ke),ar(Ae,ke,Ue,1,0);break;case Jm:Yo(Re,Je,Ue,Ae,ke);break;default:n(0)}de+=fe,Se+=Ie}_.Ma+=ie}else alert("todo:EmitRescaledRowsYUVA");n(_.Ma<=$.height)}}_.C=E,n(_.C<=_.i)}function Ho(_){var E;if(0<_.ua)return 0;for(E=0;E<_.Wb;++E){var $=_.Ya[E].G,K=_.Ya[E].H;if(0<$[1][K[1]+0].g||0<$[2][K[2]+0].g||0<$[3][K[3]+0].g)return 0}return 1}function qa(_,E,$,K,ne,ie){if(_.Z!=0){var oe=_.qd,de=_.rd;for(n(Hs[_.Z]!=null);E<$;++E)Hs[_.Z](oe,de,K,ne,K,ne,ie),oe=K,de=ne,ne+=ie;_.qd=oe,_.rd=de}}function za(_,E){var $=_.l.ma,K=$.Z==0||$.Z==1?_.l.j:_.C;if(K=_.C<K?K:_.C,n(E<=_.l.o),E>K){var ne=_.l.width,ie=$.ca,oe=$.tb+ne*K,de=_.V,fe=_.Ba+_.c*K,ge=_.gc;n(_.ab==1),n(ge[0].hc==3),uf(ge[0],K,E,de,fe,ie,oe),qa($,K,E,ie,oe,ne)}_.C=_.Ma=E}function Es(_,E,$,K,ne,ie,oe){var de=_.$/K,fe=_.$%K,ge=_.m,Se=_.s,Ie=$+_.$,Me=Ie;ne=$+K*ne;var Re=$+K*ie,Je=280+Se.ua,Ue=_.Pb?de:16777216,Ae=0<Se.ua?Se.Wa:null,ke=Se.wc,Ke=Ie<Re?Fn(Se,fe,de):null;n(_.C<ie),n(Re<=ne);var We=!1;e:for(;;){for(;We||Ie<Re;){var Qe=0;if(de>=Ue){var Nt=Ie-$;n((Ue=_).Pb),Ue.wd=Ue.m,Ue.xd=Nt,0<Ue.s.ua&&Te(Ue.s.Wa,Ue.s.vb),Ue=de+ep}if(fe&ke||(Ke=Fn(Se,fe,de)),n(Ke!=null),Ke.Qb&&(E[Ie]=Ke.qb,We=!0),!We)if(ce(ge),Ke.jc){Qe=ge,Nt=E;var vt=Ie,qt=Ke.pd[B(Qe)&Mr-1];n(Ke.jc),256>qt.g?(ee(Qe,Qe.u+qt.g),Nt[vt]=qt.value,Qe=0):(ee(Qe,Qe.u+qt.g-256),n(256<=qt.value),Qe=qt.value),Qe==0&&(We=!0)}else Qe=mr(Ke.G[0],Ke.H[0],ge);if(ge.h)break;if(We||256>Qe){if(!We)if(Ke.nd)E[Ie]=(Ke.qb|Qe<<8)>>>0;else{if(ce(ge),We=mr(Ke.G[1],Ke.H[1],ge),ce(ge),Nt=mr(Ke.G[2],Ke.H[2],ge),vt=mr(Ke.G[3],Ke.H[3],ge),ge.h)break;E[Ie]=(vt<<24|We<<16|Qe<<8|Nt)>>>0}if(We=!1,++Ie,++fe>=K&&(fe=0,++de,oe!=null&&de<=ie&&!(de%16)&&oe(_,de),Ae!=null))for(;Me<Ie;)Qe=E[Me++],Ae.X[(506832829*Qe&4294967295)>>>Ae.Mb]=Qe}else if(280>Qe){if(Qe=bs(Qe-256,ge),Nt=mr(Ke.G[4],Ke.H[4],ge),ce(ge),Nt=fr(K,Nt=bs(Nt,ge)),ge.h)break;if(Ie-$<Nt||ne-Ie<Qe)break e;for(vt=0;vt<Qe;++vt)E[Ie+vt]=E[Ie+vt-Nt];for(Ie+=Qe,fe+=Qe;fe>=K;)fe-=K,++de,oe!=null&&de<=ie&&!(de%16)&&oe(_,de);if(n(Ie<=ne),fe&ke&&(Ke=Fn(Se,fe,de)),Ae!=null)for(;Me<Ie;)Qe=E[Me++],Ae.X[(506832829*Qe&4294967295)>>>Ae.Mb]=Qe}else{if(!(Qe<Je))break e;for(We=Qe-280,n(Ae!=null);Me<Ie;)Qe=E[Me++],Ae.X[(506832829*Qe&4294967295)>>>Ae.Mb]=Qe;Qe=Ie,n(!(We>>>(Nt=Ae).Xa)),E[Qe]=Nt.X[We],We=!0}We||n(ge.h==H(ge))}if(_.Pb&&ge.h&&Ie<ne)n(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&Te(_.s.vb,_.s.Wa);else{if(ge.h)break e;oe!=null&&oe(_,de>ie?ie:de),_.a=0,_.$=Ie-$}return 1}return _.a=3,0}function Ua(_){n(_!=null),_.vc=null,_.yc=null,_.Ya=null;var E=_.Wa;E!=null&&(E.X=null),_.vb=null,n(_!=null)}function Wi(){var _=new w0;return _==null?null:(_.a=0,_.xb=Cd,gi("Predictor","VP8LPredictors"),gi("Predictor","VP8LPredictors_C"),gi("PredictorAdd","VP8LPredictorsAdd"),gi("PredictorAdd","VP8LPredictorsAdd_C"),Qm=yn,Ql=Ut,si=yt,Us=Cr,Xl=_n,Yo=pi,Qo=Un,R.VP8LMapColor32b=yd,R.VP8LMapColor8b=bd,_)}function mo(_,E,$,K,ne){var ie=1,oe=[_],de=[E],fe=K.m,ge=K.s,Se=null,Ie=0;e:for(;;){if($)for(;ie&&le(fe,1);){var Me=oe,Re=de,Je=K,Ue=1,Ae=Je.m,ke=Je.gc[Je.ab],Ke=le(Ae,2);if(Je.Oc&1<<Ke)ie=0;else{switch(Je.Oc|=1<<Ke,ke.hc=Ke,ke.Ea=Me[0],ke.nc=Re[0],ke.K=[null],++Je.ab,n(4>=Je.ab),Ke){case 0:case 1:ke.b=le(Ae,3)+2,Ue=mo(gt(ke.Ea,ke.b),gt(ke.nc,ke.b),0,Je,ke.K),ke.K=ke.K[0];break;case 3:var We,Qe=le(Ae,8)+1,Nt=16<Qe?0:4<Qe?1:2<Qe?2:3;if(Me[0]=gt(ke.Ea,Nt),ke.b=Nt,We=Ue=mo(Qe,1,0,Je,ke.K)){var vt,qt=Qe,wt=ke,In=1<<(8>>wt.b),Mn=o(In);if(Mn==null)We=0;else{var An=wt.K[0],dn=wt.w;for(Mn[0]=wt.K[0][0],vt=1;vt<1*qt;++vt)Mn[vt]=Ye(An[dn+vt],Mn[vt-1]);for(;vt<4*In;++vt)Mn[vt]=0;wt.K[0]=null,wt.K[0]=Mn,We=1}}Ue=We;break;case 2:break;default:n(0)}ie=Ue}}if(oe=oe[0],de=de[0],ie&&le(fe,1)&&!(ie=1<=(Ie=le(fe,4))&&11>=Ie)){K.a=3;break e}var Jn;if(Jn=ie)t:{var nr,tn,Er,oi=K,Ur=oe,ss=de,Vn=Ie,Ws=$,Ks=oi.m,Tr=oi.s,is=[null],Ls=1,Si=0,wa=Py[Vn];n:for(;;){if(Ws&&le(Ks,1)){var Or=le(Ks,3)+2,Qr=gt(Ur,Or),Ji=gt(ss,Or),nc=Qr*Ji;if(!mo(Qr,Ji,0,oi,is))break n;for(is=is[0],Tr.xc=Or,nr=0;nr<nc;++nr){var sl=is[nr]>>8&65535;is[nr]=sl,sl>=Ls&&(Ls=sl+1)}}if(Ks.h)break n;for(tn=0;5>tn;++tn){var Hn=ou[tn];!tn&&0<Vn&&(Hn+=1<<Vn),Si<Hn&&(Si=Hn)}var So=l(Ls*wa,M),np=Ls,P0=l(np,Y);if(P0==null)var ja=null;else n(65536>=np),ja=P0;var Na=o(Si);if(ja==null||Na==null||So==null){oi.a=1;break n}var hu=So;for(nr=Er=0;nr<Ls;++nr){var _a=ja[nr],il=_a.G,fu=_a.H,kd=0,Zi=1,Ed=0;for(tn=0;5>tn;++tn){Hn=ou[tn],il[tn]=hu,fu[tn]=Er,!tn&&0<Vn&&(Hn+=1<<Vn);s:{var rc,al=Hn,Td=oi,Co=Na,Oy=hu,A0=Er,yr=0,Qa=Td.m,k0=le(Qa,1);if(a(Co,0,0,al),k0){var E0=le(Qa,1)+1,rp=le(Qa,1),sp=le(Qa,rp==0?1:8);Co[sp]=1,E0==2&&(Co[sp=le(Qa,8)]=1);var Po=1}else{var _r=o(19),Xr=le(Qa,4)+4;if(19<Xr){Td.a=3;var Vr=0;break s}for(rc=0;rc<Xr;++rc)_r[Ej[rc]]=le(Qa,3);var Od=void 0,ol=void 0,Ld=Td,Ij=_r,as=al,ip=Co,wf=0,Ao=Ld.m,Xa=8,ea=l(128,M);r:for(;D(ea,0,7,Ij,19);){if(le(Ao,1)){var jf=2+2*le(Ao,3);if((Od=2+le(Ao,jf))>as)break r}else Od=as;for(ol=0;ol<as&&Od--;){ce(Ao);var ap=ea[0+(127&B(Ao))];ee(Ao,Ao.u+ap.g);var sc=ap.value;if(16>sc)ip[ol++]=sc,sc!=0&&(Xa=sc);else{var Ly=sc==16,T0=sc-16,Ry=Zm[T0],O0=le(Ao,xf[T0])+Ry;if(ol+O0>as)break r;for(var Dy=Ly?Xa:0;0<O0--;)ip[ol++]=Dy}}wf=1;break r}wf||(Ld.a=3),Po=wf}(Po=Po&&!Qa.h)&&(yr=D(Oy,A0,8,Co,al)),Po&&yr!=0?Vr=yr:(Td.a=3,Vr=0)}if(Vr==0)break n;if(Zi&&Cy[tn]==1&&(Zi=hu[Er].g==0),kd+=hu[Er].g,Er+=Vr,3>=tn){var Rd,op=Na[0];for(Rd=1;Rd<Hn;++Rd)Na[Rd]>op&&(op=Na[Rd]);Ed+=op}}if(_a.nd=Zi,_a.Qb=0,Zi&&(_a.qb=(il[3][fu[3]+0].value<<24|il[1][fu[1]+0].value<<16|il[2][fu[2]+0].value)>>>0,kd==0&&256>il[0][fu[0]+0].value&&(_a.Qb=1,_a.qb+=il[0][fu[0]+0].value<<8)),_a.jc=!_a.Qb&&6>Ed,_a.jc){var Nf,ta=_a;for(Nf=0;Nf<Mr;++Nf){var ll=Nf,Ja=ta.pd[ll],mu=ta.G[0][ta.H[0]+ll];256<=mu.value?(Ja.g=mu.g+256,Ja.value=mu.value):(Ja.g=0,Ja.value=0,ll>>=pr(mu,8,Ja),ll>>=pr(ta.G[1][ta.H[1]+ll],16,Ja),ll>>=pr(ta.G[2][ta.H[2]+ll],0,Ja),pr(ta.G[3][ta.H[3]+ll],24,Ja))}}}Tr.vc=is,Tr.Wb=Ls,Tr.Ya=ja,Tr.yc=So,Jn=1;break t}Jn=0}if(!(ie=Jn)){K.a=3;break e}if(0<Ie){if(ge.ua=1<<Ie,!ze(ge.Wa,Ie)){K.a=1,ie=0;break e}}else ge.ua=0;var lp=K,cp=oe,Iy=de,up=lp.s,dp=up.xc;if(lp.c=cp,lp.i=Iy,up.md=gt(cp,dp),up.wc=dp==0?-1:(1<<dp)-1,$){K.xb=_o;break e}if((Se=o(oe*de))==null){K.a=1,ie=0;break e}ie=(ie=Es(K,Se,0,oe,de,de,null))&&!fe.h;break e}return ie?(ne!=null?ne[0]=Se:(n(Se==null),n($)),K.$=0,$||Ua(ge)):Ua(ge),ie}function Fl(_,E){var $=_.c*_.i,K=$+E+16*E;return n(_.c<=E),_.V=o(K),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+$+E,1)}function Fc(_,E){var $=_.C,K=E-$,ne=_.V,ie=_.Ba+_.c*$;for(n(E<=_.l.o);0<K;){var oe=16<K?16:K,de=_.l.ma,fe=_.l.width,ge=fe*oe,Se=de.ca,Ie=de.tb+fe*$,Me=_.Ta,Re=_.Ua;ks(_,oe,ne,ie),Fr(Me,Re,Se,Ie,ge),qa(de,$,$+oe,Se,Ie,fe),K-=oe,ne+=oe*_.c,$+=oe}n($==E),_.C=_.Ma=E}function Bc(){this.ub=this.yd=this.td=this.Rb=0}function $c(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Xu(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function qm(){this.Yb=(function(){var _=[];return(function E($,K,ne){for(var ie=ne[K],oe=0;oe<ie&&($.push(ne.length>K+1?[]:0),!(ne.length<K+1));oe++)E($[oe],K+1,ne)})(_,0,[3,11]),_})()}function Pr(){this.jb=o(3),this.Wc=c([4,8],qm),this.Xc=c([4,17],qm)}function v0(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Bl(){this.ld=this.La=this.dd=this.tc=0}function Xh(){this.Na=this.la=0}function Ju(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Jh(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function zm(){this.uc=this.M=this.Nb=0,this.wa=Array(new Bl),this.Y=0,this.ya=Array(new Jh),this.aa=0,this.l=new Zu}function qc(){this.y=o(16),this.f=o(8),this.ea=o(8)}function pa(){this.cb=this.a=0,this.sc="",this.m=new Q,this.Od=new Bc,this.Kc=new $c,this.ed=new v0,this.Qa=new Xu,this.Ic=this.$c=this.Aa=0,this.D=new zm,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,Q),this.ia=0,this.pb=l(4,Ju),this.Pa=new Pr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new qc),this.Hd=0,this.rb=Array(new Xh),this.sb=0,this.wa=Array(new Bl),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Jh),this.L=this.aa=0,this.gd=c([4,2],Bl),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Zu(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ki(){var _=new pa;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,lu||(lu=zc)),_}function zr(_,E,$){return _.a==0&&(_.a=E,_.sc=$,_.cb=0),0}function Um(_,E,$){return 3<=$&&_[E+0]==157&&_[E+1]==1&&_[E+2]==42}function Vm(_,E){if(_==null)return 0;if(_.a=0,_.sc="OK",E==null)return zr(_,2,"null VP8Io passed to VP8GetHeaders()");var $=E.data,K=E.w,ne=E.ha;if(4>ne)return zr(_,7,"Truncated header.");var ie=$[K+0]|$[K+1]<<8|$[K+2]<<16,oe=_.Od;if(oe.Rb=!(1&ie),oe.td=ie>>1&7,oe.yd=ie>>4&1,oe.ub=ie>>5,3<oe.td)return zr(_,3,"Incorrect keyframe parameters.");if(!oe.yd)return zr(_,4,"Frame not displayable.");K+=3,ne-=3;var de=_.Kc;if(oe.Rb){if(7>ne)return zr(_,7,"cannot parse picture header");if(!Um($,K,ne))return zr(_,3,"Bad code word");de.c=16383&($[K+4]<<8|$[K+3]),de.Td=$[K+4]>>6,de.i=16383&($[K+6]<<8|$[K+5]),de.Ud=$[K+6]>>6,K+=7,ne-=7,_.za=de.c+15>>4,_.Ub=de.i+15>>4,E.width=de.c,E.height=de.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,a((ie=_.Pa).jb,0,255,ie.jb.length),n((ie=_.Qa)!=null),ie.Cb=0,ie.Bb=0,ie.Fb=1,a(ie.Zb,0,0,ie.Zb.length),a(ie.Lb,0,0,ie.Lb)}if(oe.ub>ne)return zr(_,7,"bad partition length");Z(ie=_.m,$,K,oe.ub),K+=oe.ub,ne-=oe.ub,oe.Rb&&(de.Ld=W(ie),de.Kd=W(ie)),de=_.Qa;var fe,ge=_.Pa;if(n(ie!=null),n(de!=null),de.Cb=W(ie),de.Cb){if(de.Bb=W(ie),W(ie)){for(de.Fb=W(ie),fe=0;4>fe;++fe)de.Zb[fe]=W(ie)?re(ie,7):0;for(fe=0;4>fe;++fe)de.Lb[fe]=W(ie)?re(ie,6):0}if(de.Bb)for(fe=0;3>fe;++fe)ge.jb[fe]=W(ie)?X(ie,8):255}else de.Bb=0;if(ie.Ka)return zr(_,3,"cannot parse segment header");if((de=_.ed).zd=W(ie),de.Tb=X(ie,6),de.wb=X(ie,3),de.Pc=W(ie),de.Pc&&W(ie)){for(ge=0;4>ge;++ge)W(ie)&&(de.vd[ge]=re(ie,6));for(ge=0;4>ge;++ge)W(ie)&&(de.od[ge]=re(ie,6))}if(_.L=de.Tb==0?0:de.zd?1:2,ie.Ka)return zr(_,3,"cannot parse filter header");var Se=ne;if(ne=fe=K,K=fe+Se,de=Se,_.Xb=(1<<X(_.m,2))-1,Se<3*(ge=_.Xb))$=7;else{for(fe+=3*ge,de-=3*ge,Se=0;Se<ge;++Se){var Ie=$[ne+0]|$[ne+1]<<8|$[ne+2]<<16;Ie>de&&(Ie=de),Z(_.Jc[+Se],$,fe,Ie),fe+=Ie,de-=Ie,ne+=3}Z(_.Jc[+ge],$,fe,de),$=fe<K?0:5}if($!=0)return zr(_,$,"cannot parse partitions");for($=X(fe=_.m,7),ne=W(fe)?re(fe,4):0,K=W(fe)?re(fe,4):0,de=W(fe)?re(fe,4):0,ge=W(fe)?re(fe,4):0,fe=W(fe)?re(fe,4):0,Se=_.Qa,Ie=0;4>Ie;++Ie){if(Se.Cb){var Me=Se.Zb[Ie];Se.Fb||(Me+=$)}else{if(0<Ie){_.pb[Ie]=_.pb[0];continue}Me=$}var Re=_.pb[Ie];Re.Sc[0]=Sd[Yi(Me+ne,127)],Re.Sc[1]=vf[Yi(Me+0,127)],Re.Eb[0]=2*Sd[Yi(Me+K,127)],Re.Eb[1]=101581*vf[Yi(Me+de,127)]>>16,8>Re.Eb[1]&&(Re.Eb[1]=8),Re.Qc[0]=Sd[Yi(Me+ge,117)],Re.Qc[1]=vf[Yi(Me+fe,127)],Re.lc=Me+fe}if(!oe.Rb)return zr(_,4,"Not a key frame.");for(W(ie),oe=_.Pa,$=0;4>$;++$){for(ne=0;8>ne;++ne)for(K=0;3>K;++K)for(de=0;11>de;++de)ge=J(ie,Lj[$][ne][K][de])?X(ie,8):ky[$][ne][K][de],oe.Wc[$][ne].Yb[K][de]=ge;for(ne=0;17>ne;++ne)oe.Xc[$][ne]=oe.Wc[$][_0[ne]]}return _.kc=W(ie),_.kc&&(_.Bd=X(ie,8)),_.cb=1}function zc(_,E,$,K,ne,ie,oe){var de=E[ne].Yb[$];for($=0;16>ne;++ne){if(!J(_,de[$+0]))return ne;for(;!J(_,de[$+1]);)if(de=E[++ne].Yb[0],$=0,ne==16)return 16;var fe=E[ne+1].Yb;if(J(_,de[$+2])){var ge=_,Se=0;if(J(ge,(Me=de)[(Ie=$)+3]))if(J(ge,Me[Ie+6])){for(de=0,Ie=2*(Se=J(ge,Me[Ie+8]))+(Me=J(ge,Me[Ie+9+Se])),Se=0,Me=j0[Ie];Me[de];++de)Se+=Se+J(ge,Me[de]);Se+=3+(8<<Ie)}else J(ge,Me[Ie+7])?(Se=7+2*J(ge,165),Se+=J(ge,145)):Se=5+J(ge,159);else Se=J(ge,Me[Ie+4])?3+J(ge,Me[Ie+5]):2;de=fe[2]}else Se=1,de=fe[1];fe=oe+N0[ne],0>(ge=_).b&&he(ge);var Ie,Me=ge.b,Re=(Ie=ge.Ca>>1)-(ge.I>>Me)>>31;--ge.b,ge.Ca+=Re,ge.Ca|=1,ge.I-=(Ie+1&Re)<<Me,ie[fe]=((Se^Re)-Re)*K[(0<ne)+0]}return 16}function $l(_){var E=_.rb[_.sb-1];E.la=0,E.Na=0,a(_.zc,0,0,_.zc.length),_.ja=0}function Uc(_,E){if(_==null)return 0;if(E==null)return zr(_,2,"NULL VP8Io parameter in VP8Decode().");if(!_.cb&&!Vm(_,E))return 0;if(n(_.cb),E.ac==null||E.ac(E)){E.ob&&(_.L=0);var $=du[_.L];if(_.L==2?(_.yb=0,_.zb=0):(_.yb=E.v-$>>4,_.zb=E.j-$>>4,0>_.yb&&(_.yb=0),0>_.zb&&(_.zb=0)),_.Va=E.o+15+$>>4,_.Hb=E.va+15+$>>4,_.Hb>_.za&&(_.Hb=_.za),_.Va>_.Ub&&(_.Va=_.Ub),0<_.L){var K=_.ed;for($=0;4>$;++$){var ne;if(_.Qa.Cb){var ie=_.Qa.Lb[$];_.Qa.Fb||(ie+=K.Tb)}else ie=K.Tb;for(ne=0;1>=ne;++ne){var oe=_.gd[$][ne],de=ie;if(K.Pc&&(de+=K.vd[0],ne&&(de+=K.od[0])),0<(de=0>de?0:63<de?63:de)){var fe=de;0<K.wb&&(fe=4<K.wb?fe>>2:fe>>1)>9-K.wb&&(fe=9-K.wb),1>fe&&(fe=1),oe.dd=fe,oe.tc=2*de+fe,oe.ld=40<=de?2:15<=de?1:0}else oe.tc=0;oe.La=ne}}}$=0}else zr(_,6,"Frame setup failed"),$=_.a;if($=$==0){if($){_.$c=0,0<_.Aa||(_.Ic=rl);e:{$=_.Ic,K=4*(fe=_.za);var ge=32*fe,Se=fe+1,Ie=0<_.L?fe*(0<_.Aa?2:1):0,Me=(_.Aa==2?2:1)*fe;if((oe=K+832+(ne=3*(16*$+du[_.L])/2*ge)+(ie=_.Fa!=null&&0<_.Fa.length?_.Kc.c*_.Kc.i:0))!=oe)$=0;else{if(oe>_.Vb){if(_.Vb=0,_.Ec=o(oe),_.Fc=0,_.Ec==null){$=zr(_,1,"no memory during frame initialization.");break e}_.Vb=oe}oe=_.Ec,de=_.Fc,_.Ac=oe,_.Bc=de,de+=K,_.Gd=l(ge,qc),_.Hd=0,_.rb=l(Se+1,Xh),_.sb=1,_.wa=Ie?l(Ie,Bl):null,_.Y=0,_.D.Nb=0,_.D.wa=_.wa,_.D.Y=_.Y,0<_.Aa&&(_.D.Y+=fe),n(!0),_.oc=oe,_.pc=de,de+=832,_.ya=l(Me,Jh),_.aa=0,_.D.ya=_.ya,_.D.aa=_.aa,_.Aa==2&&(_.D.aa+=fe),_.R=16*fe,_.B=8*fe,fe=(ge=du[_.L])*_.R,ge=ge/2*_.B,_.sa=oe,_.ta=de+fe,_.qa=_.sa,_.ra=_.ta+16*$*_.R+ge,_.Ha=_.qa,_.Ia=_.ra+8*$*_.B+ge,_.$c=0,de+=ne,_.mb=ie?oe:null,_.nb=ie?de:null,n(de+ie<=_.Fc+_.Vb),$l(_),a(_.Ac,_.Bc,0,K),$=1}}if($){if(E.ka=0,E.y=_.sa,E.O=_.ta,E.f=_.qa,E.N=_.ra,E.ea=_.Ha,E.Vd=_.Ia,E.fa=_.R,E.Rc=_.B,E.F=null,E.J=0,!hf){for($=-255;255>=$;++$)Yr[255+$]=0>$?-$:$;for($=-1020;1020>=$;++$)jo[1020+$]=-128>$?-128:127<$?127:$;for($=-112;112>=$;++$)jd[112+$]=-16>$?-16:15<$?15:$;for($=-255;510>=$;++$)iu[255+$]=0>$?0:255<$?255:$;hf=1}wd=Bn,Xo=ef,Jo=ql,Vs=y0,Qi=td,$n=Zh,tu=ld,df=rs,nu=Qc,ru=af,su=Hl,Xi=Wl,Zo=Xc,wo=cd,el=Wa,tl=ga,Jl=xa,Ts=Gm,ba[0]=vo,ba[1]=Hm,ba[2]=Kc,ba[3]=xo,ba[4]=nf,ba[5]=rd,ba[6]=Ul,ba[7]=sd,ba[8]=Km,ba[9]=id,ai[0]=Wc,ai[1]=Wm,ai[2]=po,ai[3]=Hc,ai[4]=Ar,ai[5]=go,ai[6]=Va,wi[0]=Gi,wi[1]=tf,wi[2]=b0,wi[3]=Wo,wi[4]=Gc,wi[5]=ad,wi[6]=rf,$=1}else $=0}$&&($=(function(Re,Je){for(Re.M=0;Re.M<Re.Va;++Re.M){var Ue,Ae=Re.Jc[Re.M&Re.Xb],ke=Re.m,Ke=Re;for(Ue=0;Ue<Ke.za;++Ue){var We=ke,Qe=Ke,Nt=Qe.Ac,vt=Qe.Bc+4*Ue,qt=Qe.zc,wt=Qe.ya[Qe.aa+Ue];if(Qe.Qa.Bb?wt.$b=J(We,Qe.Pa.jb[0])?2+J(We,Qe.Pa.jb[2]):J(We,Qe.Pa.jb[1]):wt.$b=0,Qe.kc&&(wt.Ad=J(We,Qe.Bd)),wt.Za=!J(We,145)+0,wt.Za){var In=wt.Ob,Mn=0;for(Qe=0;4>Qe;++Qe){var An,dn=qt[0+Qe];for(An=0;4>An;++An){dn=Oj[Nt[vt+An]][dn];for(var Jn=Ay[J(We,dn[0])];0<Jn;)Jn=Ay[2*Jn+J(We,dn[Jn])];dn=-Jn,Nt[vt+An]=dn}s(In,Mn,Nt,vt,4),Mn+=4,qt[0+Qe]=dn}}else dn=J(We,156)?J(We,128)?1:3:J(We,163)?2:0,wt.Ob[0]=dn,a(Nt,vt,dn,4),a(qt,0,dn,4);wt.Dd=J(We,142)?J(We,114)?J(We,183)?1:3:2:0}if(Ke.m.Ka)return zr(Re,7,"Premature end-of-partition0 encountered.");for(;Re.ja<Re.za;++Re.ja){if(Ke=Ae,We=(ke=Re).rb[ke.sb-1],Nt=ke.rb[ke.sb+ke.ja],Ue=ke.ya[ke.aa+ke.ja],vt=ke.kc?Ue.Ad:0)We.la=Nt.la=0,Ue.Za||(We.Na=Nt.Na=0),Ue.Hc=0,Ue.Gc=0,Ue.ia=0;else{var nr,tn;if(We=Nt,Nt=Ke,vt=ke.Pa.Xc,qt=ke.ya[ke.aa+ke.ja],wt=ke.pb[qt.$b],Qe=qt.ad,In=0,Mn=ke.rb[ke.sb-1],dn=An=0,a(Qe,In,0,384),qt.Za)var Er=0,oi=vt[3];else{Jn=o(16);var Ur=We.Na+Mn.Na;if(Ur=lu(Nt,vt[1],Ur,wt.Eb,0,Jn,0),We.Na=Mn.Na=(0<Ur)+0,1<Ur)wd(Jn,0,Qe,In);else{var ss=Jn[0]+3>>3;for(Jn=0;256>Jn;Jn+=16)Qe[In+Jn]=ss}Er=1,oi=vt[0]}var Vn=15&We.la,Ws=15&Mn.la;for(Jn=0;4>Jn;++Jn){var Ks=1&Ws;for(ss=tn=0;4>ss;++ss)Vn=Vn>>1|(Ks=(Ur=lu(Nt,oi,Ur=Ks+(1&Vn),wt.Sc,Er,Qe,In))>Er)<<7,tn=tn<<2|(3<Ur?3:1<Ur?2:Qe[In+0]!=0),In+=16;Vn>>=4,Ws=Ws>>1|Ks<<7,An=(An<<8|tn)>>>0}for(oi=Vn,Er=Ws>>4,nr=0;4>nr;nr+=2){for(tn=0,Vn=We.la>>4+nr,Ws=Mn.la>>4+nr,Jn=0;2>Jn;++Jn){for(Ks=1&Ws,ss=0;2>ss;++ss)Ur=Ks+(1&Vn),Vn=Vn>>1|(Ks=0<(Ur=lu(Nt,vt[2],Ur,wt.Qc,0,Qe,In)))<<3,tn=tn<<2|(3<Ur?3:1<Ur?2:Qe[In+0]!=0),In+=16;Vn>>=2,Ws=Ws>>1|Ks<<5}dn|=tn<<4*nr,oi|=Vn<<4<<nr,Er|=(240&Ws)<<nr}We.la=oi,Mn.la=Er,qt.Hc=An,qt.Gc=dn,qt.ia=43690&dn?0:wt.ia,vt=!(An|dn)}if(0<ke.L&&(ke.wa[ke.Y+ke.ja]=ke.gd[Ue.$b][Ue.Za],ke.wa[ke.Y+ke.ja].La|=!vt),Ke.Ka)return zr(Re,7,"Premature end-of-file encountered.")}if($l(Re),ke=Je,Ke=1,Ue=(Ae=Re).D,We=0<Ae.L&&Ae.M>=Ae.zb&&Ae.M<=Ae.Va,Ae.Aa==0)e:{if(Ue.M=Ae.M,Ue.uc=We,hd(Ae,Ue),Ke=1,Ue=(tn=Ae.D).Nb,We=(dn=du[Ae.L])*Ae.R,Nt=dn/2*Ae.B,Jn=16*Ue*Ae.R,ss=8*Ue*Ae.B,vt=Ae.sa,qt=Ae.ta-We+Jn,wt=Ae.qa,Qe=Ae.ra-Nt+ss,In=Ae.Ha,Mn=Ae.Ia-Nt+ss,Ws=(Vn=tn.M)==0,An=Vn>=Ae.Va-1,Ae.Aa==2&&hd(Ae,tn),tn.uc)for(Ks=(Ur=Ae).D.M,n(Ur.D.uc),tn=Ur.yb;tn<Ur.Hb;++tn){Er=tn,oi=Ks;var Tr=(is=(Hn=Ur).D).Nb;nr=Hn.R;var is=is.wa[is.Y+Er],Ls=Hn.sa,Si=Hn.ta+16*Tr*nr+16*Er,wa=is.dd,Or=is.tc;if(Or!=0)if(n(3<=Or),Hn.L==1)0<Er&&tl(Ls,Si,nr,Or+4),is.La&&Ts(Ls,Si,nr,Or),0<oi&&el(Ls,Si,nr,Or+4),is.La&&Jl(Ls,Si,nr,Or);else{var Qr=Hn.B,Ji=Hn.qa,nc=Hn.ra+8*Tr*Qr+8*Er,sl=Hn.Ha,Hn=Hn.Ia+8*Tr*Qr+8*Er;Tr=is.ld,0<Er&&(df(Ls,Si,nr,Or+4,wa,Tr),ru(Ji,nc,sl,Hn,Qr,Or+4,wa,Tr)),is.La&&(Xi(Ls,Si,nr,Or,wa,Tr),wo(Ji,nc,sl,Hn,Qr,Or,wa,Tr)),0<oi&&(tu(Ls,Si,nr,Or+4,wa,Tr),nu(Ji,nc,sl,Hn,Qr,Or+4,wa,Tr)),is.La&&(su(Ls,Si,nr,Or,wa,Tr),Zo(Ji,nc,sl,Hn,Qr,Or,wa,Tr))}}if(Ae.ia&&alert("todo:DitherRow"),ke.put!=null){if(tn=16*Vn,Vn=16*(Vn+1),Ws?(ke.y=Ae.sa,ke.O=Ae.ta+Jn,ke.f=Ae.qa,ke.N=Ae.ra+ss,ke.ea=Ae.Ha,ke.W=Ae.Ia+ss):(tn-=dn,ke.y=vt,ke.O=qt,ke.f=wt,ke.N=Qe,ke.ea=In,ke.W=Mn),An||(Vn-=dn),Vn>ke.o&&(Vn=ke.o),ke.F=null,ke.J=null,Ae.Fa!=null&&0<Ae.Fa.length&&tn<Vn&&(ke.J=lf(Ae,ke,tn,Vn-tn),ke.F=Ae.mb,ke.F==null&&ke.F.length==0)){Ke=zr(Ae,3,"Could not decode alpha data.");break e}tn<ke.j&&(dn=ke.j-tn,tn=ke.j,n(!(1&dn)),ke.O+=Ae.R*dn,ke.N+=Ae.B*(dn>>1),ke.W+=Ae.B*(dn>>1),ke.F!=null&&(ke.J+=ke.width*dn)),tn<Vn&&(ke.O+=ke.v,ke.N+=ke.v>>1,ke.W+=ke.v>>1,ke.F!=null&&(ke.J+=ke.v),ke.ka=tn-ke.j,ke.U=ke.va-ke.v,ke.T=Vn-tn,Ke=ke.put(ke))}Ue+1!=Ae.Ic||An||(s(Ae.sa,Ae.ta-We,vt,qt+16*Ae.R,We),s(Ae.qa,Ae.ra-Nt,wt,Qe+8*Ae.B,Nt),s(Ae.Ha,Ae.Ia-Nt,In,Mn+8*Ae.B,Nt))}if(!Ke)return zr(Re,6,"Output aborted.")}return 1})(_,E)),E.bc!=null&&E.bc(E),$&=1}return $?(_.cb=0,$):0}function xi(_,E,$,K,ne){ne=_[E+$+32*K]+(ne>>3),_[E+$+32*K]=-256&ne?0>ne?0:255:ne}function ed(_,E,$,K,ne,ie){xi(_,E,0,$,K+ne),xi(_,E,1,$,K+ie),xi(_,E,2,$,K-ie),xi(_,E,3,$,K-ne)}function vi(_){return(20091*_>>16)+_}function Vc(_,E,$,K){var ne,ie=0,oe=o(16);for(ne=0;4>ne;++ne){var de=_[E+0]+_[E+8],fe=_[E+0]-_[E+8],ge=(35468*_[E+4]>>16)-vi(_[E+12]),Se=vi(_[E+4])+(35468*_[E+12]>>16);oe[ie+0]=de+Se,oe[ie+1]=fe+ge,oe[ie+2]=fe-ge,oe[ie+3]=de-Se,ie+=4,E++}for(ne=ie=0;4>ne;++ne)de=(_=oe[ie+0]+4)+oe[ie+8],fe=_-oe[ie+8],ge=(35468*oe[ie+4]>>16)-vi(oe[ie+12]),xi($,K,0,0,de+(Se=vi(oe[ie+4])+(35468*oe[ie+12]>>16))),xi($,K,1,0,fe+ge),xi($,K,2,0,fe-ge),xi($,K,3,0,de-Se),ie++,K+=32}function Zh(_,E,$,K){var ne=_[E+0]+4,ie=35468*_[E+4]>>16,oe=vi(_[E+4]),de=35468*_[E+1]>>16;ed($,K,0,ne+oe,_=vi(_[E+1]),de),ed($,K,1,ne+ie,_,de),ed($,K,2,ne-ie,_,de),ed($,K,3,ne-oe,_,de)}function ef(_,E,$,K,ne){Vc(_,E,$,K),ne&&Vc(_,E+16,$,K+4)}function ql(_,E,$,K){Xo(_,E+0,$,K,1),Xo(_,E+32,$,K+128,1)}function y0(_,E,$,K){var ne;for(_=_[E+0]+4,ne=0;4>ne;++ne)for(E=0;4>E;++E)xi($,K,E,ne,_)}function td(_,E,$,K){_[E+0]&&Vs(_,E+0,$,K),_[E+16]&&Vs(_,E+16,$,K+4),_[E+32]&&Vs(_,E+32,$,K+128),_[E+48]&&Vs(_,E+48,$,K+128+4)}function Bn(_,E,$,K){var ne,ie=o(16);for(ne=0;4>ne;++ne){var oe=_[E+0+ne]+_[E+12+ne],de=_[E+4+ne]+_[E+8+ne],fe=_[E+4+ne]-_[E+8+ne],ge=_[E+0+ne]-_[E+12+ne];ie[0+ne]=oe+de,ie[8+ne]=oe-de,ie[4+ne]=ge+fe,ie[12+ne]=ge-fe}for(ne=0;4>ne;++ne)oe=(_=ie[0+4*ne]+3)+ie[3+4*ne],de=ie[1+4*ne]+ie[2+4*ne],fe=ie[1+4*ne]-ie[2+4*ne],ge=_-ie[3+4*ne],$[K+0]=oe+de>>3,$[K+16]=ge+fe>>3,$[K+32]=oe-de>>3,$[K+48]=ge-fe>>3,K+=64}function nd(_,E,$){var K,ne=E-32,ie=ii,oe=255-_[ne-1];for(K=0;K<$;++K){var de,fe=ie,ge=oe+_[E-1];for(de=0;de<$;++de)_[E+de]=fe[ge+_[ne+de]];E+=32}}function Hm(_,E){nd(_,E,4)}function tf(_,E){nd(_,E,8)}function Wm(_,E){nd(_,E,16)}function po(_,E){var $;for($=0;16>$;++$)s(_,E+32*$,_,E-32,16)}function Hc(_,E){var $;for($=16;0<$;--$)a(_,E,_[E-1],16),E+=32}function zl(_,E,$){var K;for(K=0;16>K;++K)a(E,$+32*K,_,16)}function Wc(_,E){var $,K=16;for($=0;16>$;++$)K+=_[E-1+32*$]+_[E+$-32];zl(K>>5,_,E)}function Ar(_,E){var $,K=8;for($=0;16>$;++$)K+=_[E-1+32*$];zl(K>>4,_,E)}function go(_,E){var $,K=8;for($=0;16>$;++$)K+=_[E+$-32];zl(K>>4,_,E)}function Va(_,E){zl(128,_,E)}function Gt(_,E,$){return _+2*E+$+2>>2}function Kc(_,E){var $,K=E-32;for(K=new Uint8Array([Gt(_[K-1],_[K+0],_[K+1]),Gt(_[K+0],_[K+1],_[K+2]),Gt(_[K+1],_[K+2],_[K+3]),Gt(_[K+2],_[K+3],_[K+4])]),$=0;4>$;++$)s(_,E+32*$,K,0,K.length)}function xo(_,E){var $=_[E-1],K=_[E-1+32],ne=_[E-1+64],ie=_[E-1+96];pe(_,E+0,16843009*Gt(_[E-1-32],$,K)),pe(_,E+32,16843009*Gt($,K,ne)),pe(_,E+64,16843009*Gt(K,ne,ie)),pe(_,E+96,16843009*Gt(ne,ie,ie))}function vo(_,E){var $,K=4;for($=0;4>$;++$)K+=_[E+$-32]+_[E-1+32*$];for(K>>=3,$=0;4>$;++$)a(_,E+32*$,K,4)}function nf(_,E){var $=_[E-1+0],K=_[E-1+32],ne=_[E-1+64],ie=_[E-1-32],oe=_[E+0-32],de=_[E+1-32],fe=_[E+2-32],ge=_[E+3-32];_[E+0+96]=Gt(K,ne,_[E-1+96]),_[E+1+96]=_[E+0+64]=Gt($,K,ne),_[E+2+96]=_[E+1+64]=_[E+0+32]=Gt(ie,$,K),_[E+3+96]=_[E+2+64]=_[E+1+32]=_[E+0+0]=Gt(oe,ie,$),_[E+3+64]=_[E+2+32]=_[E+1+0]=Gt(de,oe,ie),_[E+3+32]=_[E+2+0]=Gt(fe,de,oe),_[E+3+0]=Gt(ge,fe,de)}function Ul(_,E){var $=_[E+1-32],K=_[E+2-32],ne=_[E+3-32],ie=_[E+4-32],oe=_[E+5-32],de=_[E+6-32],fe=_[E+7-32];_[E+0+0]=Gt(_[E+0-32],$,K),_[E+1+0]=_[E+0+32]=Gt($,K,ne),_[E+2+0]=_[E+1+32]=_[E+0+64]=Gt(K,ne,ie),_[E+3+0]=_[E+2+32]=_[E+1+64]=_[E+0+96]=Gt(ne,ie,oe),_[E+3+32]=_[E+2+64]=_[E+1+96]=Gt(ie,oe,de),_[E+3+64]=_[E+2+96]=Gt(oe,de,fe),_[E+3+96]=Gt(de,fe,fe)}function rd(_,E){var $=_[E-1+0],K=_[E-1+32],ne=_[E-1+64],ie=_[E-1-32],oe=_[E+0-32],de=_[E+1-32],fe=_[E+2-32],ge=_[E+3-32];_[E+0+0]=_[E+1+64]=ie+oe+1>>1,_[E+1+0]=_[E+2+64]=oe+de+1>>1,_[E+2+0]=_[E+3+64]=de+fe+1>>1,_[E+3+0]=fe+ge+1>>1,_[E+0+96]=Gt(ne,K,$),_[E+0+64]=Gt(K,$,ie),_[E+0+32]=_[E+1+96]=Gt($,ie,oe),_[E+1+32]=_[E+2+96]=Gt(ie,oe,de),_[E+2+32]=_[E+3+96]=Gt(oe,de,fe),_[E+3+32]=Gt(de,fe,ge)}function sd(_,E){var $=_[E+0-32],K=_[E+1-32],ne=_[E+2-32],ie=_[E+3-32],oe=_[E+4-32],de=_[E+5-32],fe=_[E+6-32],ge=_[E+7-32];_[E+0+0]=$+K+1>>1,_[E+1+0]=_[E+0+64]=K+ne+1>>1,_[E+2+0]=_[E+1+64]=ne+ie+1>>1,_[E+3+0]=_[E+2+64]=ie+oe+1>>1,_[E+0+32]=Gt($,K,ne),_[E+1+32]=_[E+0+96]=Gt(K,ne,ie),_[E+2+32]=_[E+1+96]=Gt(ne,ie,oe),_[E+3+32]=_[E+2+96]=Gt(ie,oe,de),_[E+3+64]=Gt(oe,de,fe),_[E+3+96]=Gt(de,fe,ge)}function id(_,E){var $=_[E-1+0],K=_[E-1+32],ne=_[E-1+64],ie=_[E-1+96];_[E+0+0]=$+K+1>>1,_[E+2+0]=_[E+0+32]=K+ne+1>>1,_[E+2+32]=_[E+0+64]=ne+ie+1>>1,_[E+1+0]=Gt($,K,ne),_[E+3+0]=_[E+1+32]=Gt(K,ne,ie),_[E+3+32]=_[E+1+64]=Gt(ne,ie,ie),_[E+3+64]=_[E+2+64]=_[E+0+96]=_[E+1+96]=_[E+2+96]=_[E+3+96]=ie}function Km(_,E){var $=_[E-1+0],K=_[E-1+32],ne=_[E-1+64],ie=_[E-1+96],oe=_[E-1-32],de=_[E+0-32],fe=_[E+1-32],ge=_[E+2-32];_[E+0+0]=_[E+2+32]=$+oe+1>>1,_[E+0+32]=_[E+2+64]=K+$+1>>1,_[E+0+64]=_[E+2+96]=ne+K+1>>1,_[E+0+96]=ie+ne+1>>1,_[E+3+0]=Gt(de,fe,ge),_[E+2+0]=Gt(oe,de,fe),_[E+1+0]=_[E+3+32]=Gt($,oe,de),_[E+1+32]=_[E+3+64]=Gt(K,$,oe),_[E+1+64]=_[E+3+96]=Gt(ne,K,$),_[E+1+96]=Gt(ie,ne,K)}function b0(_,E){var $;for($=0;8>$;++$)s(_,E+32*$,_,E-32,8)}function Wo(_,E){var $;for($=0;8>$;++$)a(_,E,_[E-1],8),E+=32}function Ha(_,E,$){var K;for(K=0;8>K;++K)a(E,$+32*K,_,8)}function Gi(_,E){var $,K=8;for($=0;8>$;++$)K+=_[E+$-32]+_[E-1+32*$];Ha(K>>4,_,E)}function ad(_,E){var $,K=4;for($=0;8>$;++$)K+=_[E+$-32];Ha(K>>3,_,E)}function Gc(_,E){var $,K=4;for($=0;8>$;++$)K+=_[E-1+32*$];Ha(K>>3,_,E)}function rf(_,E){Ha(128,_,E)}function Vl(_,E,$){var K=_[E-$],ne=_[E+0],ie=3*(ne-K)+No[1020+_[E-2*$]-_[E+$]],oe=Nd[112+(ie+4>>3)];_[E-$]=ii[255+K+Nd[112+(ie+3>>3)]],_[E+0]=ii[255+ne-oe]}function Yc(_,E,$,K){var ne=_[E+0],ie=_[E+$];return ya[255+_[E-2*$]-_[E-$]]>K||ya[255+ie-ne]>K}function od(_,E,$,K){return 4*ya[255+_[E-$]-_[E+0]]+ya[255+_[E-2*$]-_[E+$]]<=K}function sf(_,E,$,K,ne){var ie=_[E-3*$],oe=_[E-2*$],de=_[E-$],fe=_[E+0],ge=_[E+$],Se=_[E+2*$],Ie=_[E+3*$];return 4*ya[255+de-fe]+ya[255+oe-ge]>K?0:ya[255+_[E-4*$]-ie]<=ne&&ya[255+ie-oe]<=ne&&ya[255+oe-de]<=ne&&ya[255+Ie-Se]<=ne&&ya[255+Se-ge]<=ne&&ya[255+ge-fe]<=ne}function Wa(_,E,$,K){var ne=2*K+1;for(K=0;16>K;++K)od(_,E+K,$,ne)&&Vl(_,E+K,$)}function ga(_,E,$,K){var ne=2*K+1;for(K=0;16>K;++K)od(_,E+K*$,1,ne)&&Vl(_,E+K*$,1)}function xa(_,E,$,K){var ne;for(ne=3;0<ne;--ne)Wa(_,E+=4*$,$,K)}function Gm(_,E,$,K){var ne;for(ne=3;0<ne;--ne)ga(_,E+=4,$,K)}function Ka(_,E,$,K,ne,ie,oe,de){for(ie=2*ie+1;0<ne--;){if(sf(_,E,$,ie,oe))if(Yc(_,E,$,de))Vl(_,E,$);else{var fe=_,ge=E,Se=$,Ie=fe[ge-2*Se],Me=fe[ge-Se],Re=fe[ge+0],Je=fe[ge+Se],Ue=fe[ge+2*Se],Ae=27*(Ke=No[1020+3*(Re-Me)+No[1020+Ie-Je]])+63>>7,ke=18*Ke+63>>7,Ke=9*Ke+63>>7;fe[ge-3*Se]=ii[255+fe[ge-3*Se]+Ke],fe[ge-2*Se]=ii[255+Ie+ke],fe[ge-Se]=ii[255+Me+Ae],fe[ge+0]=ii[255+Re-Ae],fe[ge+Se]=ii[255+Je-ke],fe[ge+2*Se]=ii[255+Ue-Ke]}E+=K}}function yi(_,E,$,K,ne,ie,oe,de){for(ie=2*ie+1;0<ne--;){if(sf(_,E,$,ie,oe))if(Yc(_,E,$,de))Vl(_,E,$);else{var fe=_,ge=E,Se=$,Ie=fe[ge-Se],Me=fe[ge+0],Re=fe[ge+Se],Je=Nd[112+((Ue=3*(Me-Ie))+4>>3)],Ue=Nd[112+(Ue+3>>3)],Ae=Je+1>>1;fe[ge-2*Se]=ii[255+fe[ge-2*Se]+Ae],fe[ge-Se]=ii[255+Ie+Ue],fe[ge+0]=ii[255+Me-Je],fe[ge+Se]=ii[255+Re-Ae]}E+=K}}function ld(_,E,$,K,ne,ie){Ka(_,E,$,1,16,K,ne,ie)}function rs(_,E,$,K,ne,ie){Ka(_,E,1,$,16,K,ne,ie)}function Hl(_,E,$,K,ne,ie){var oe;for(oe=3;0<oe;--oe)yi(_,E+=4*$,$,1,16,K,ne,ie)}function Wl(_,E,$,K,ne,ie){var oe;for(oe=3;0<oe;--oe)yi(_,E+=4,1,$,16,K,ne,ie)}function Qc(_,E,$,K,ne,ie,oe,de){Ka(_,E,ne,1,8,ie,oe,de),Ka($,K,ne,1,8,ie,oe,de)}function af(_,E,$,K,ne,ie,oe,de){Ka(_,E,1,ne,8,ie,oe,de),Ka($,K,1,ne,8,ie,oe,de)}function Xc(_,E,$,K,ne,ie,oe,de){yi(_,E+4*ne,ne,1,8,ie,oe,de),yi($,K+4*ne,ne,1,8,ie,oe,de)}function cd(_,E,$,K,ne,ie,oe,de){yi(_,E+4,1,ne,8,ie,oe,de),yi($,K+4,1,ne,8,ie,oe,de)}function yo(){this.ba=new ys,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new hr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Kl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ud(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ym(){this.ua=0,this.Wa=new xe,this.vb=new xe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Y,this.yc=new M}function w0(){this.xb=this.a=0,this.l=new Zu,this.ca=new ys,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ym,this.ab=0,this.gc=l(4,ud),this.Oc=0}function dd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Zu,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ko(_,E,$,K,ne,ie,oe){for(_=_==null?0:_[E+0],E=0;E<oe;++E)ne[ie+E]=_+$[K+E]&255,_=ne[ie+E]}function of(_,E,$,K,ne,ie,oe){var de;if(_==null)Ko(null,null,$,K,ne,ie,oe);else for(de=0;de<oe;++de)ne[ie+de]=_[E+de]+$[K+de]&255}function Gl(_,E,$,K,ne,ie,oe){if(_==null)Ko(null,null,$,K,ne,ie,oe);else{var de,fe=_[E+0],ge=fe,Se=fe;for(de=0;de<oe;++de)ge=Se+(fe=_[E+de])-ge,Se=$[K+de]+(-256&ge?0>ge?0:255:ge)&255,ge=fe,ne[ie+de]=Se}}function lf(_,E,$,K){var ne=E.width,ie=E.o;if(n(_!=null&&E!=null),0>$||0>=K||$+K>ie)return null;if(!_.Cc){if(_.ga==null){var oe;if(_.ga=new dd,(oe=_.ga==null)||(oe=E.width*E.o,n(_.Gb.length==0),_.Gb=o(oe),_.Uc=0,_.Gb==null?oe=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,oe=1),oe=!oe),!oe){oe=_.ga;var de=_.Fa,fe=_.P,ge=_.qc,Se=_.mb,Ie=_.nb,Me=fe+1,Re=ge-1,Je=oe.l;if(n(de!=null&&Se!=null&&E!=null),Hs[0]=null,Hs[1]=Ko,Hs[2]=of,Hs[3]=Gl,oe.ca=Se,oe.tb=Ie,oe.c=E.width,oe.i=E.height,n(0<oe.c&&0<oe.i),1>=ge)E=0;else if(oe.$a=de[fe+0]>>0&3,oe.Z=de[fe+0]>>2&3,oe.Lc=de[fe+0]>>4&3,fe=de[fe+0]>>6&3,0>oe.$a||1<oe.$a||4<=oe.Z||1<oe.Lc||fe)E=0;else if(Je.put=As,Je.ac=Dn,Je.bc=Yn,Je.ma=oe,Je.width=E.width,Je.height=E.height,Je.Da=E.Da,Je.v=E.v,Je.va=E.va,Je.j=E.j,Je.o=E.o,oe.$a)e:{n(oe.$a==1),E=Wi();t:for(;;){if(E==null){E=0;break e}if(n(oe!=null),oe.mc=E,E.c=oe.c,E.i=oe.i,E.l=oe.l,E.l.ma=oe,E.l.width=oe.c,E.l.height=oe.i,E.a=0,z(E.m,de,Me,Re),!mo(oe.c,oe.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&Ho(E.s)?(oe.ic=1,de=E.c*E.i,E.Ta=null,E.Ua=0,E.V=o(de),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(oe.ic=0,E=Fl(E,oe.c)),!E))break t;E=1;break e}oe.mc=null,E=0}else E=Re>=oe.c*oe.i;oe=!E}if(oe)return null;_.ga.Lc!=1?_.Ga=0:K=ie-$}n(_.ga!=null),n($+K<=ie);e:{if(E=(de=_.ga).c,ie=de.l.o,de.$a==0){if(Me=_.rc,Re=_.Vc,Je=_.Fa,fe=_.P+1+$*E,ge=_.mb,Se=_.nb+$*E,n(fe<=_.P+_.qc),de.Z!=0)for(n(Hs[de.Z]!=null),oe=0;oe<K;++oe)Hs[de.Z](Me,Re,Je,fe,ge,Se,E),Me=ge,Re=Se,Se+=E,fe+=E;else for(oe=0;oe<K;++oe)s(ge,Se,Je,fe,E),Me=ge,Re=Se,Se+=E,fe+=E;_.rc=Me,_.Vc=Re}else{if(n(de.mc!=null),E=$+K,n((oe=de.mc)!=null),n(E<=oe.i),oe.C>=E)E=1;else if(de.ic||De(),de.ic){de=oe.V,Me=oe.Ba,Re=oe.c;var Ue=oe.i,Ae=(Je=1,fe=oe.$/Re,ge=oe.$%Re,Se=oe.m,Ie=oe.s,oe.$),ke=Re*Ue,Ke=Re*E,We=Ie.wc,Qe=Ae<Ke?Fn(Ie,ge,fe):null;n(Ae<=ke),n(E<=Ue),n(Ho(Ie));t:for(;;){for(;!Se.h&&Ae<Ke;){if(ge&We||(Qe=Fn(Ie,ge,fe)),n(Qe!=null),ce(Se),256>(Ue=mr(Qe.G[0],Qe.H[0],Se)))de[Me+Ae]=Ue,++Ae,++ge>=Re&&(ge=0,++fe<=E&&!(fe%16)&&za(oe,fe));else{if(!(280>Ue)){Je=0;break t}Ue=bs(Ue-256,Se);var Nt,vt=mr(Qe.G[4],Qe.H[4],Se);if(ce(Se),!(Ae>=(vt=fr(Re,vt=bs(vt,Se)))&&ke-Ae>=Ue)){Je=0;break t}for(Nt=0;Nt<Ue;++Nt)de[Me+Ae+Nt]=de[Me+Ae+Nt-vt];for(Ae+=Ue,ge+=Ue;ge>=Re;)ge-=Re,++fe<=E&&!(fe%16)&&za(oe,fe);Ae<Ke&&ge&We&&(Qe=Fn(Ie,ge,fe))}n(Se.h==H(Se))}za(oe,fe>E?E:fe);break t}!Je||Se.h&&Ae<ke?(Je=0,oe.a=Se.h?5:3):oe.$=Ae,E=Je}else E=Es(oe,oe.V,oe.Ba,oe.c,oe.i,E,Fc);if(!E){K=0;break e}}$+K>=ie&&(_.Cc=1),K=1}if(!K)return null;if(_.Cc&&((K=_.ga)!=null&&(K.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+$*ne}function I(_,E,$,K,ne,ie){for(;0<ne--;){var oe,de=_,fe=E+($?1:0),ge=_,Se=E+($?0:3);for(oe=0;oe<K;++oe){var Ie=ge[Se+4*oe];Ie!=255&&(Ie*=32897,de[fe+4*oe+0]=de[fe+4*oe+0]*Ie>>23,de[fe+4*oe+1]=de[fe+4*oe+1]*Ie>>23,de[fe+4*oe+2]=de[fe+4*oe+2]*Ie>>23)}E+=ie}}function se(_,E,$,K,ne){for(;0<K--;){var ie;for(ie=0;ie<$;++ie){var oe=_[E+2*ie+0],de=15&(ge=_[E+2*ie+1]),fe=4369*de,ge=(240&ge|ge>>4)*fe>>16;_[E+2*ie+0]=(240&oe|oe>>4)*fe>>16&240|(15&oe|oe<<4)*fe>>16>>4&15,_[E+2*ie+1]=240&ge|de}E+=ne}}function be(_,E,$,K,ne,ie,oe,de){var fe,ge,Se=255;for(ge=0;ge<ne;++ge){for(fe=0;fe<K;++fe){var Ie=_[E+fe];ie[oe+4*fe]=Ie,Se&=Ie}E+=$,oe+=de}return Se!=255}function _e(_,E,$,K,ne){var ie;for(ie=0;ie<ne;++ie)$[K+ie]=_[E+ie]>>8}function De(){bi=I,ar=se,Qn=be,Fr=_e}function He(_,E,$){R[_]=function(K,ne,ie,oe,de,fe,ge,Se,Ie,Me,Re,Je,Ue,Ae,ke,Ke,We){var Qe,Nt=We-1>>1,vt=de[fe+0]|ge[Se+0]<<16,qt=Ie[Me+0]|Re[Je+0]<<16;n(K!=null);var wt=3*vt+qt+131074>>2;for(E(K[ne+0],255&wt,wt>>16,Ue,Ae),ie!=null&&(wt=3*qt+vt+131074>>2,E(ie[oe+0],255&wt,wt>>16,ke,Ke)),Qe=1;Qe<=Nt;++Qe){var In=de[fe+Qe]|ge[Se+Qe]<<16,Mn=Ie[Me+Qe]|Re[Je+Qe]<<16,An=vt+In+qt+Mn+524296,dn=An+2*(In+qt)>>3;wt=dn+vt>>1,vt=(An=An+2*(vt+Mn)>>3)+In>>1,E(K[ne+2*Qe-1],255&wt,wt>>16,Ue,Ae+(2*Qe-1)*$),E(K[ne+2*Qe-0],255&vt,vt>>16,Ue,Ae+(2*Qe-0)*$),ie!=null&&(wt=An+qt>>1,vt=dn+Mn>>1,E(ie[oe+2*Qe-1],255&wt,wt>>16,ke,Ke+(2*Qe-1)*$),E(ie[oe+2*Qe+0],255&vt,vt>>16,ke,Ke+(2*Qe+0)*$)),vt=In,qt=Mn}1&We||(wt=3*vt+qt+131074>>2,E(K[ne+We-1],255&wt,wt>>16,Ue,Ae+(We-1)*$),ie!=null&&(wt=3*qt+vt+131074>>2,E(ie[oe+We-1],255&wt,wt>>16,ke,Ke+(We-1)*$)))}}function nt(){ji[Xm]=Rj,ji[Zl]=ec,ji[Sy]=Dj,ji[ff]=Pd,ji[mf]=cu,ji[or]=yf,ji[Jm]=S0,ji[_d]=ec,ji[au]=Pd,ji[pf]=cu,ji[gf]=yf}function jt(_){return _&-16384?0>_?0:255:_>>tc}function Bt(_,E){return jt((19077*_>>8)+(26149*E>>8)-14234)}function on(_,E,$){return jt((19077*_>>8)-(6419*E>>8)-(13320*$>>8)+8708)}function an(_,E){return jt((19077*_>>8)+(33050*E>>8)-17685)}function Sn(_,E,$,K,ne){K[ne+0]=Bt(_,$),K[ne+1]=on(_,E,$),K[ne+2]=an(_,E)}function kr(_,E,$,K,ne){K[ne+0]=an(_,E),K[ne+1]=on(_,E,$),K[ne+2]=Bt(_,$)}function Ir(_,E,$,K,ne){var ie=on(_,E,$);E=ie<<3&224|an(_,E)>>3,K[ne+0]=248&Bt(_,$)|ie>>5,K[ne+1]=E}function Gr(_,E,$,K,ne){var ie=240&an(_,E)|15;K[ne+0]=240&Bt(_,$)|on(_,E,$)>>4,K[ne+1]=ie}function zs(_,E,$,K,ne){K[ne+0]=255,Sn(_,E,$,K,ne+1)}function ws(_,E,$,K,ne){kr(_,E,$,K,ne),K[ne+3]=255}function Ga(_,E,$,K,ne){Sn(_,E,$,K,ne),K[ne+3]=255}function Yi(_,E){return 0>_?0:_>E?E:_}function va(_,E,$){R[_]=function(K,ne,ie,oe,de,fe,ge,Se,Ie){for(var Me=Se+(-2&Ie)*$;Se!=Me;)E(K[ne+0],ie[oe+0],de[fe+0],ge,Se),E(K[ne+1],ie[oe+0],de[fe+0],ge,Se+$),ne+=2,++oe,++fe,Se+=2*$;1&Ie&&E(K[ne+0],ie[oe+0],de[fe+0],ge,Se)}}function Yl(_,E,$){return $==0?_==0?E==0?6:5:E==0?4:0:$}function cf(_,E,$,K,ne){switch(_>>>30){case 3:Xo(E,$,K,ne,0);break;case 2:$n(E,$,K,ne);break;case 1:Vs(E,$,K,ne)}}function hd(_,E){var $,K,ne=E.M,ie=E.Nb,oe=_.oc,de=_.pc+40,fe=_.oc,ge=_.pc+584,Se=_.oc,Ie=_.pc+600;for($=0;16>$;++$)oe[de+32*$-1]=129;for($=0;8>$;++$)fe[ge+32*$-1]=129,Se[Ie+32*$-1]=129;for(0<ne?oe[de-1-32]=fe[ge-1-32]=Se[Ie-1-32]=129:(a(oe,de-32-1,127,21),a(fe,ge-32-1,127,9),a(Se,Ie-32-1,127,9)),K=0;K<_.za;++K){var Me=E.ya[E.aa+K];if(0<K){for($=-1;16>$;++$)s(oe,de+32*$-4,oe,de+32*$+12,4);for($=-1;8>$;++$)s(fe,ge+32*$-4,fe,ge+32*$+4,4),s(Se,Ie+32*$-4,Se,Ie+32*$+4,4)}var Re=_.Gd,Je=_.Hd+K,Ue=Me.ad,Ae=Me.Hc;if(0<ne&&(s(oe,de-32,Re[Je].y,0,16),s(fe,ge-32,Re[Je].f,0,8),s(Se,Ie-32,Re[Je].ea,0,8)),Me.Za){var ke=oe,Ke=de-32+16;for(0<ne&&(K>=_.za-1?a(ke,Ke,Re[Je].y[15],4):s(ke,Ke,Re[Je+1].y,0,4)),$=0;4>$;$++)ke[Ke+128+$]=ke[Ke+256+$]=ke[Ke+384+$]=ke[Ke+0+$];for($=0;16>$;++$,Ae<<=2)ke=oe,Ke=de+C0[$],ba[Me.Ob[$]](ke,Ke),cf(Ae,Ue,16*+$,ke,Ke)}else if(ke=Yl(K,ne,Me.Ob[0]),ai[ke](oe,de),Ae!=0)for($=0;16>$;++$,Ae<<=2)cf(Ae,Ue,16*+$,oe,de+C0[$]);for($=Me.Gc,ke=Yl(K,ne,Me.Dd),wi[ke](fe,ge),wi[ke](Se,Ie),Ae=Ue,ke=fe,Ke=ge,255&(Me=$>>0)&&(170&Me?Jo(Ae,256,ke,Ke):Qi(Ae,256,ke,Ke)),Me=Se,Ae=Ie,255&($>>=8)&&(170&$?Jo(Ue,320,Me,Ae):Qi(Ue,320,Me,Ae)),ne<_.Ub-1&&(s(Re[Je].y,0,oe,de+480,16),s(Re[Je].f,0,fe,ge+224,8),s(Re[Je].ea,0,Se,Ie+224,8)),$=8*ie*_.B,Re=_.sa,Je=_.ta+16*K+16*ie*_.R,Ue=_.qa,Me=_.ra+8*K+$,Ae=_.Ha,ke=_.Ia+8*K+$,$=0;16>$;++$)s(Re,Je+$*_.R,oe,de+32*$,16);for($=0;8>$;++$)s(Ue,Me+$*_.B,fe,ge+32*$,8),s(Ae,ke+$*_.B,Se,Ie+32*$,8)}}function Jc(_,E,$,K,ne,ie,oe,de,fe){var ge=[0],Se=[0],Ie=0,Me=fe!=null?fe.kd:0,Re=fe??new Kl;if(_==null||12>$)return 7;Re.data=_,Re.w=E,Re.ha=$,E=[E],$=[$],Re.gb=[Re.gb];e:{var Je=E,Ue=$,Ae=Re.gb;if(n(_!=null),n(Ue!=null),n(Ae!=null),Ae[0]=0,12<=Ue[0]&&!r(_,Je[0],"RIFF")){if(r(_,Je[0]+8,"WEBP")){Ae=3;break e}var ke=je(_,Je[0]+4);if(12>ke||4294967286<ke){Ae=3;break e}if(Me&&ke>Ue[0]-8){Ae=7;break e}Ae[0]=ke,Je[0]+=12,Ue[0]-=12}Ae=0}if(Ae!=0)return Ae;for(ke=0<Re.gb[0],$=$[0];;){e:{var Ke=_;Ue=E,Ae=$;var We=ge,Qe=Se,Nt=Je=[0];if((wt=Ie=[Ie])[0]=0,8>Ae[0])Ae=7;else{if(!r(Ke,Ue[0],"VP8X")){if(je(Ke,Ue[0]+4)!=10){Ae=3;break e}if(18>Ae[0]){Ae=7;break e}var vt=je(Ke,Ue[0]+8),qt=1+me(Ke,Ue[0]+12);if(2147483648<=qt*(Ke=1+me(Ke,Ue[0]+15))){Ae=3;break e}Nt!=null&&(Nt[0]=vt),We!=null&&(We[0]=qt),Qe!=null&&(Qe[0]=Ke),Ue[0]+=18,Ae[0]-=18,wt[0]=1}Ae=0}}if(Ie=Ie[0],Je=Je[0],Ae!=0)return Ae;if(Ue=!!(2&Je),!ke&&Ie)return 3;if(ie!=null&&(ie[0]=!!(16&Je)),oe!=null&&(oe[0]=Ue),de!=null&&(de[0]=0),oe=ge[0],Je=Se[0],Ie&&Ue&&fe==null){Ae=0;break}if(4>$){Ae=7;break}if(ke&&Ie||!ke&&!Ie&&!r(_,E[0],"ALPH")){$=[$],Re.na=[Re.na],Re.P=[Re.P],Re.Sa=[Re.Sa];e:{vt=_,Ae=E,ke=$;var wt=Re.gb;We=Re.na,Qe=Re.P,Nt=Re.Sa,qt=22,n(vt!=null),n(ke!=null),Ke=Ae[0];var In=ke[0];for(n(We!=null),n(Nt!=null),We[0]=null,Qe[0]=null,Nt[0]=0;;){if(Ae[0]=Ke,ke[0]=In,8>In){Ae=7;break e}var Mn=je(vt,Ke+4);if(4294967286<Mn){Ae=3;break e}var An=8+Mn+1&-2;if(qt+=An,0<wt&&qt>wt){Ae=3;break e}if(!r(vt,Ke,"VP8 ")||!r(vt,Ke,"VP8L")){Ae=0;break e}if(In[0]<An){Ae=7;break e}r(vt,Ke,"ALPH")||(We[0]=vt,Qe[0]=Ke+8,Nt[0]=Mn),Ke+=An,In-=An}}if($=$[0],Re.na=Re.na[0],Re.P=Re.P[0],Re.Sa=Re.Sa[0],Ae!=0)break}$=[$],Re.Ja=[Re.Ja],Re.xa=[Re.xa];e:if(wt=_,Ae=E,ke=$,We=Re.gb[0],Qe=Re.Ja,Nt=Re.xa,vt=Ae[0],Ke=!r(wt,vt,"VP8 "),qt=!r(wt,vt,"VP8L"),n(wt!=null),n(ke!=null),n(Qe!=null),n(Nt!=null),8>ke[0])Ae=7;else{if(Ke||qt){if(wt=je(wt,vt+4),12<=We&&wt>We-12){Ae=3;break e}if(Me&&wt>ke[0]-8){Ae=7;break e}Qe[0]=wt,Ae[0]+=8,ke[0]-=8,Nt[0]=qt}else Nt[0]=5<=ke[0]&&wt[vt+0]==47&&!(wt[vt+4]>>5),Qe[0]=ke[0];Ae=0}if($=$[0],Re.Ja=Re.Ja[0],Re.xa=Re.xa[0],E=E[0],Ae!=0)break;if(4294967286<Re.Ja)return 3;if(de==null||Ue||(de[0]=Re.xa?2:1),oe=[oe],Je=[Je],Re.xa){if(5>$){Ae=7;break}de=oe,Me=Je,Ue=ie,_==null||5>$?_=0:5<=$&&_[E+0]==47&&!(_[E+4]>>5)?(ke=[0],wt=[0],We=[0],z(Qe=new T,_,E,$),Pt(Qe,ke,wt,We)?(de!=null&&(de[0]=ke[0]),Me!=null&&(Me[0]=wt[0]),Ue!=null&&(Ue[0]=We[0]),_=1):_=0):_=0}else{if(10>$){Ae=7;break}de=Je,_==null||10>$||!Um(_,E+3,$-3)?_=0:(Me=_[E+0]|_[E+1]<<8|_[E+2]<<16,Ue=16383&(_[E+7]<<8|_[E+6]),_=16383&(_[E+9]<<8|_[E+8]),1&Me||3<(Me>>1&7)||!(Me>>4&1)||Me>>5>=Re.Ja||!Ue||!_?_=0:(oe&&(oe[0]=Ue),de&&(de[0]=_),_=1))}if(!_||(oe=oe[0],Je=Je[0],Ie&&(ge[0]!=oe||Se[0]!=Je)))return 3;fe!=null&&(fe[0]=Re,fe.offset=E-fe.w,n(4294967286>E-fe.w),n(fe.offset==fe.ha-$));break}return Ae==0||Ae==7&&Ie&&fe==null?(ie!=null&&(ie[0]|=Re.na!=null&&0<Re.na.length),K!=null&&(K[0]=oe),ne!=null&&(ne[0]=Je),0):Ae}function fd(_,E,$){var K=E.width,ne=E.height,ie=0,oe=0,de=K,fe=ne;if(E.Da=_!=null&&0<_.Da,E.Da&&(de=_.cd,fe=_.bd,ie=_.v,oe=_.j,11>$||(ie&=-2,oe&=-2),0>ie||0>oe||0>=de||0>=fe||ie+de>K||oe+fe>ne))return 0;if(E.v=ie,E.j=oe,E.va=ie+de,E.o=oe+fe,E.U=de,E.T=fe,E.da=_!=null&&0<_.da,E.da){if(!ht(de,fe,$=[_.ib],ie=[_.hb]))return 0;E.ib=$[0],E.hb=ie[0]}return E.ob=_!=null&&_.ob,E.Kb=_==null||!_.Sd,E.da&&(E.ob=E.ib<3*K/4&&E.hb<3*ne/4,E.Kb=0),1}function md(_){if(_==null)return 2;if(11>_.S){var E=_.f.RGBA;E.fb+=(_.height-1)*E.A,E.A=-E.A}else E=_.f.kb,_=_.height,E.O+=(_-1)*E.fa,E.fa=-E.fa,E.N+=(_-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(_-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(_-1)*E.lb,E.lb=-E.lb);return 0}function Zc(_,E,$,K){if(K==null||0>=_||0>=E)return 2;if($!=null){if($.Da){var ne=$.cd,ie=$.bd,oe=-2&$.v,de=-2&$.j;if(0>oe||0>de||0>=ne||0>=ie||oe+ne>_||de+ie>E)return 2;_=ne,E=ie}if($.da){if(!ht(_,E,ne=[$.ib],ie=[$.hb]))return 2;_=ne[0],E=ie[0]}}K.width=_,K.height=E;e:{var fe=K.width,ge=K.height;if(_=K.S,0>=fe||0>=ge||!(_>=Xm&&13>_))_=2;else{if(0>=K.Rd&&K.sd==null){oe=ie=ne=E=0;var Se=(de=fe*bf[_])*ge;if(11>_||(ie=(ge+1)/2*(E=(fe+1)/2),_==12&&(oe=(ne=fe)*ge)),(ge=o(Se+2*ie+oe))==null){_=1;break e}K.sd=ge,11>_?((fe=K.f.RGBA).eb=ge,fe.fb=0,fe.A=de,fe.size=Se):((fe=K.f.kb).y=ge,fe.O=0,fe.fa=de,fe.Fd=Se,fe.f=ge,fe.N=0+Se,fe.Ab=E,fe.Cd=ie,fe.ea=ge,fe.W=0+Se+ie,fe.Db=E,fe.Ed=ie,_==12&&(fe.F=ge,fe.J=0+Se+2*ie),fe.Tc=oe,fe.lb=ne)}if(E=1,ne=K.S,ie=K.width,oe=K.height,ne>=Xm&&13>ne)if(11>ne)_=K.f.RGBA,E&=(de=Math.abs(_.A))*(oe-1)+ie<=_.size,E&=de>=ie*bf[ne],E&=_.eb!=null;else{_=K.f.kb,de=(ie+1)/2,Se=(oe+1)/2,fe=Math.abs(_.fa),ge=Math.abs(_.Ab);var Ie=Math.abs(_.Db),Me=Math.abs(_.lb),Re=Me*(oe-1)+ie;E&=fe*(oe-1)+ie<=_.Fd,E&=ge*(Se-1)+de<=_.Cd,E=(E&=Ie*(Se-1)+de<=_.Ed)&fe>=ie&ge>=de&Ie>=de,E&=_.y!=null,E&=_.f!=null,E&=_.ea!=null,ne==12&&(E&=Me>=ie,E&=Re<=_.Tc,E&=_.F!=null)}else E=0;_=E?0:2}}return _!=0||$!=null&&$.fd&&(_=md(K)),_}var Mr=64,pd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],gd=24,xd=32,vd=8,ni=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];dt("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(_){return _},R.Predictor2=function(_,E,$){return E[$+0]},R.Predictor3=function(_,E,$){return E[$+1]},R.Predictor4=function(_,E,$){return E[$-1]},R.Predictor5=function(_,E,$){return st(st(_,E[$+1]),E[$+0])},R.Predictor6=function(_,E,$){return st(_,E[$-1])},R.Predictor7=function(_,E,$){return st(_,E[$+0])},R.Predictor8=function(_,E,$){return st(E[$-1],E[$+0])},R.Predictor9=function(_,E,$){return st(E[$+0],E[$+1])},R.Predictor10=function(_,E,$){return st(st(_,E[$-1]),st(E[$+0],E[$+1]))},R.Predictor11=function(_,E,$){var K=E[$+0];return 0>=Zt(K>>24&255,_>>24&255,(E=E[$-1])>>24&255)+Zt(K>>16&255,_>>16&255,E>>16&255)+Zt(K>>8&255,_>>8&255,E>>8&255)+Zt(255&K,255&_,255&E)?K:_},R.Predictor12=function(_,E,$){var K=E[$+0];return(Ct((_>>24&255)+(K>>24&255)-((E=E[$-1])>>24&255))<<24|Ct((_>>16&255)+(K>>16&255)-(E>>16&255))<<16|Ct((_>>8&255)+(K>>8&255)-(E>>8&255))<<8|Ct((255&_)+(255&K)-(255&E)))>>>0},R.Predictor13=function(_,E,$){var K=E[$-1];return(Vt((_=st(_,E[$+0]))>>24&255,K>>24&255)<<24|Vt(_>>16&255,K>>16&255)<<16|Vt(_>>8&255,K>>8&255)<<8|Vt(_>>0&255,K>>0&255))>>>0};var eu=R.PredictorAdd0;R.PredictorAdd1=sn,dt("Predictor2","PredictorAdd2"),dt("Predictor3","PredictorAdd3"),dt("Predictor4","PredictorAdd4"),dt("Predictor5","PredictorAdd5"),dt("Predictor6","PredictorAdd6"),dt("Predictor7","PredictorAdd7"),dt("Predictor8","PredictorAdd8"),dt("Predictor9","PredictorAdd9"),dt("Predictor10","PredictorAdd10"),dt("Predictor11","PredictorAdd11"),dt("Predictor12","PredictorAdd12"),dt("Predictor13","PredictorAdd13");var Go=R.PredictorAdd2;Qt("ColorIndexInverseTransform","MapARGB","32b",(function(_){return _>>8&255}),(function(_){return _})),Qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(_){return _}),(function(_){return _>>8&255}));var Qm,ri=R.ColorIndexInverseTransform,yd=R.MapARGB,uf=R.VP8LColorIndexInverseTransformAlpha,bd=R.MapAlpha,bo=R.VP8LPredictorsAdd=[];bo.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var Ql,si,Us,Xl,Yo,Qo,wd,Xo,$n,Jo,Vs,Qi,tu,df,nu,ru,su,Xi,Zo,wo,el,tl,Jl,Ts,bi,ar,Qn,Fr,Yr=o(511),jo=o(2041),jd=o(225),iu=o(767),hf=0,No=jo,Nd=jd,ii=iu,ya=Yr,Xm=0,Zl=1,Sy=2,ff=3,mf=4,or=5,Jm=6,_d=7,au=8,pf=9,gf=10,xf=[2,3,7],Zm=[3,3,11],ou=[280,256,256,256,40],Cy=[0,1,1,1,0],Ej=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Tj=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Py=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ep=8,Sd=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],vf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],lu=null,j0=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],N0=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ay=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ky=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Oj=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Lj=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_0=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ai=[],ba=[],wi=[],_o=1,Cd=2,Hs=[],ji=[];He("UpsampleRgbLinePair",Sn,3),He("UpsampleBgrLinePair",kr,3),He("UpsampleRgbaLinePair",Ga,4),He("UpsampleBgraLinePair",ws,4),He("UpsampleArgbLinePair",zs,4),He("UpsampleRgba4444LinePair",Gr,2),He("UpsampleRgb565LinePair",Ir,2);var Rj=R.UpsampleRgbLinePair,Dj=R.UpsampleBgrLinePair,ec=R.UpsampleRgbaLinePair,Pd=R.UpsampleBgraLinePair,cu=R.UpsampleArgbLinePair,yf=R.UpsampleRgba4444LinePair,S0=R.UpsampleRgb565LinePair,nl=16,Ya=1<<nl-1,Xn=-227,tr=482,tc=6,Os=0,Ni=o(256),uu=o(256),Ad=o(256),_i=o(256),tp=o(tr-Xn),Ey=o(tr-Xn);va("YuvToRgbRow",Sn,3),va("YuvToBgrRow",kr,3),va("YuvToRgbaRow",Ga,4),va("YuvToBgraRow",ws,4),va("YuvToArgbRow",zs,4),va("YuvToRgba4444Row",Gr,2),va("YuvToRgb565Row",Ir,2);var C0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],du=[0,2,8],Ty=[8,7,6,4,4,2,2,2,1,1,1,1],rl=1;this.WebPDecodeRGBA=function(_,E,$,K,ne){var ie=Zl,oe=new yo,de=new ys;oe.ba=de,de.S=ie,de.width=[de.width],de.height=[de.height];var fe=de.width,ge=de.height,Se=new Ps;if(Se==null||_==null)var Ie=2;else n(Se!=null),Ie=Jc(_,E,$,Se.width,Se.height,Se.Pd,Se.Qd,Se.format,null);if(Ie!=0?fe=0:(fe!=null&&(fe[0]=Se.width[0]),ge!=null&&(ge[0]=Se.height[0]),fe=1),fe){de.width=de.width[0],de.height=de.height[0],K!=null&&(K[0]=de.width),ne!=null&&(ne[0]=de.height);e:{if(K=new Zu,(ne=new Kl).data=_,ne.w=E,ne.ha=$,ne.kd=1,E=[0],n(ne!=null),((_=Jc(ne.data,ne.w,ne.ha,null,null,null,E,null,ne))==0||_==7)&&E[0]&&(_=4),(E=_)==0){if(n(oe!=null),K.data=ne.data,K.w=ne.w+ne.offset,K.ha=ne.ha-ne.offset,K.put=As,K.ac=Dn,K.bc=Yn,K.ma=oe,ne.xa){if((_=Wi())==null){oe=1;break e}if((function(Me,Re){var Je=[0],Ue=[0],Ae=[0];t:for(;;){if(Me==null)return 0;if(Re==null)return Me.a=2,0;if(Me.l=Re,Me.a=0,z(Me.m,Re.data,Re.w,Re.ha),!Pt(Me.m,Je,Ue,Ae)){Me.a=3;break t}if(Me.xb=Cd,Re.width=Je[0],Re.height=Ue[0],!mo(Je[0],Ue[0],1,Me,null))break t;return 1}return n(Me.a!=0),0})(_,K)){if(K=(E=Zc(K.width,K.height,oe.Oa,oe.ba))==0){t:{K=_;n:for(;;){if(K==null){K=0;break t}if(n(K.s.yc!=null),n(K.s.Ya!=null),n(0<K.s.Wb),n(($=K.l)!=null),n((ne=$.ma)!=null),K.xb!=0){if(K.ca=ne.ba,K.tb=ne.tb,n(K.ca!=null),!fd(ne.Oa,$,ff)){K.a=2;break n}if(!Fl(K,$.width)||$.da)break n;if(($.da||wn(K.ca.S))&&De(),11>K.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),K.ca.f.kb.F!=null&&De()),K.Pb&&0<K.s.ua&&K.s.vb.X==null&&!ze(K.s.vb,K.s.Wa.Xa)){K.a=1;break n}K.xb=0}if(!Es(K,K.V,K.Ba,K.c,K.i,$.o,Ml))break n;ne.Dc=K.Ma,K=1;break t}n(K.a!=0),K=0}K=!K}K&&(E=_.a)}else E=_.a}else{if((_=new Ki)==null){oe=1;break e}if(_.Fa=ne.na,_.P=ne.P,_.qc=ne.Sa,Vm(_,K)){if((E=Zc(K.width,K.height,oe.Oa,oe.ba))==0){if(_.Aa=0,$=oe.Oa,n((ne=_)!=null),$!=null){if(0<(fe=0>(fe=$.Md)?0:100<fe?255:255*fe/100)){for(ge=Se=0;4>ge;++ge)12>(Ie=ne.pb[ge]).lc&&(Ie.ia=fe*Ty[0>Ie.lc?0:Ie.lc]>>3),Se|=Ie.ia;Se&&(alert("todo:VP8InitRandom"),ne.ia=1)}ne.Ga=$.Id,100<ne.Ga?ne.Ga=100:0>ne.Ga&&(ne.Ga=0)}Uc(_,K)||(E=_.a)}}else E=_.a}E==0&&oe.Oa!=null&&oe.Oa.fd&&(E=md(oe.ba))}oe=E}ie=oe!=0?null:11>ie?de.f.RGBA.eb:de.f.kb.y}else ie=null;return ie};var bf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(R,q){for(var U="",D=0;D<4;D++)U+=String.fromCharCode(R[q++]);return U}function f(R,q){return(R[q+0]<<0|R[q+1]<<8|R[q+2]<<16)>>>0}function m(R,q){return(R[q+0]<<0|R[q+1]<<8|R[q+2]<<16|R[q+3]<<24)>>>0}new u;var g=[0],x=[0],v=[],y=new u,b=e,N=(function(R,q){var U={},D=0,M=!1,G=0,Y=0;if(U.frames=[],!(function(B,H,ee,ce){for(var he=0;he<ce;he++)if(B[H+he]!=ee.charCodeAt(he))return!0;return!1})(R,q,"RIFF",4)){var Z,X;for(m(R,q+=4),q+=8;q<R.length;){var re=d(R,q),z=m(R,q+=4);q+=4;var te=z+(1&z);switch(re){case"VP8 ":case"VP8L":U.frames[D]===void 0&&(U.frames[D]={}),(T=U.frames[D]).src_off=M?Y:q-8,T.src_size=G+z+8,D++,M&&(M=!1,G=0,Y=0);break;case"VP8X":(T=U.header={}).feature_flags=R[q];var le=q+4;T.canvas_width=1+f(R,le),le+=3,T.canvas_height=1+f(R,le),le+=3;break;case"ALPH":M=!0,G=te+8,Y=q-8;break;case"ANIM":(T=U.header).bgcolor=m(R,q),le=q+4,T.loop_count=(Z=R)[(X=le)+0]<<0|Z[X+1]<<8,le+=2;break;case"ANMF":var Q,T;(T=U.frames[D]={}).offset_x=2*f(R,q),q+=3,T.offset_y=2*f(R,q),q+=3,T.width=1+f(R,q),q+=3,T.height=1+f(R,q),q+=3,T.duration=f(R,q),q+=3,Q=R[q++],T.dispose=1&Q,T.blend=Q>>1&1}re!="ANMF"&&(q+=te)}return U}})(b,0);N.response=b,N.rgbaoutput=!0,N.dataurl=!1;var j=N.header?N.header:null,S=N.frames?N.frames:null;if(j){j.loop_counter=j.loop_count,g=[j.canvas_height],x=[j.canvas_width];for(var A=0;A<S.length&&S[A].blend!=0;A++);}var P=S[0],L=y.WebPDecodeRGBA(b,P.src_off,P.src_size,x,g);P.rgba=L,P.imgwidth=x[0],P.imgheight=g[0];for(var O=0;O<x[0]*g[0]*4;O++)v[O]=L[O];return this.width=x,this.height=g,this.data=v,this}(function(e){var n=function(){return typeof ak=="function"},r=function(g,x,v,y){var b=4,N=l;switch(y){case e.image_compression.FAST:b=1,N=o;break;case e.image_compression.MEDIUM:b=6,N=c;break;case e.image_compression.SLOW:b=9,N=u}g=s(g,x,v,N);var j=ak(g,{level:b});return e.__addimage__.arrayBufferToBinaryString(j)},s=function(g,x,v,y){for(var b,N,j,S=g.length/x,A=new Uint8Array(g.length+S),P=f(),L=0;L<S;L+=1){if(j=L*x,b=g.subarray(j,j+x),y)A.set(y(b,v,N),j+L);else{for(var O,R=P.length,q=[];O<R;O+=1)q[O]=P[O](b,v,N);var U=m(q.concat());A.set(q[U],j+L)}N=b}return A},a=function(g){var x=Array.apply([],g);return x.unshift(0),x},o=function(g,x){var v,y=[],b=g.length;y[0]=1;for(var N=0;N<b;N+=1)v=g[N-x]||0,y[N+1]=g[N]-v+256&255;return y},l=function(g,x,v){var y,b=[],N=g.length;b[0]=2;for(var j=0;j<N;j+=1)y=v&&v[j]||0,b[j+1]=g[j]-y+256&255;return b},c=function(g,x,v){var y,b,N=[],j=g.length;N[0]=3;for(var S=0;S<j;S+=1)y=g[S-x]||0,b=v&&v[S]||0,N[S+1]=g[S]+256-(y+b>>>1)&255;return N},u=function(g,x,v){var y,b,N,j,S=[],A=g.length;S[0]=4;for(var P=0;P<A;P+=1)y=g[P-x]||0,b=v&&v[P]||0,N=v&&v[P-x]||0,j=d(y,b,N),S[P+1]=g[P]-j+256&255;return S},d=function(g,x,v){if(g===x&&x===v)return g;var y=Math.abs(x-v),b=Math.abs(g-v),N=Math.abs(g+x-v-v);return y<=b&&y<=N?g:b<=N?x:v},f=function(){return[a,o,l,c,u]},m=function(g){var x=g.map((function(v){return v.reduce((function(y,b){return y+Math.abs(b)}),0)}));return x.indexOf(Math.min.apply(null,x))};e.processPNG=function(g,x,v,y){var b,N,j,S,A,P,L,O,R,q,U,D,M,G,Y,Z=this.decode.FLATE_DECODE,X="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(j=new Pbe(g)).imgData,N=j.bits,b=j.colorSpace,A=j.colors,[4,6].indexOf(j.colorType)!==-1){if(j.bits===8){R=(O=j.pixelBitlength==32?new Uint32Array(j.decodePixels().buffer):j.pixelBitlength==16?new Uint16Array(j.decodePixels().buffer):new Uint8Array(j.decodePixels().buffer)).length,U=new Uint8Array(R*j.colors),q=new Uint8Array(R);var re,z=j.pixelBitlength-j.bits;for(G=0,Y=0;G<R;G++){for(M=O[G],re=0;re<z;)U[Y++]=M>>>re&255,re+=j.bits;q[G]=M>>>re&255}}if(j.bits===16){R=(O=new Uint32Array(j.decodePixels().buffer)).length,U=new Uint8Array(R*(32/j.pixelBitlength)*j.colors),q=new Uint8Array(R*(32/j.pixelBitlength)),D=j.colors>1,G=0,Y=0;for(var te=0;G<R;)M=O[G++],U[Y++]=M>>>0&255,D&&(U[Y++]=M>>>16&255,M=O[G++],U[Y++]=M>>>0&255),q[te++]=M>>>16&255;N=8}y!==e.image_compression.NONE&&n()?(g=r(U,j.width*j.colors,j.colors,y),L=r(q,j.width,1,y)):(g=U,L=q,Z=void 0)}if(j.colorType===3&&(b=this.color_spaces.INDEXED,P=j.palette,j.transparency.indexed)){var le=j.transparency.indexed,Q=0;for(G=0,R=le.length;G<R;++G)Q+=le[G];if((Q/=255)===R-1&&le.indexOf(0)!==-1)S=[le.indexOf(0)];else if(Q!==R){for(O=j.decodePixels(),q=new Uint8Array(O.length),G=0,R=O.length;G<R;G++)q[G]=le[O[G]];L=r(q,j.width,1)}}var T=(function(B){var H;switch(B){case e.image_compression.FAST:H=11;break;case e.image_compression.MEDIUM:H=13;break;case e.image_compression.SLOW:H=14;break;default:H=12}return H})(y);return Z===this.decode.FLATE_DECODE&&(X="/Predictor "+T+" "),X+="/Colors "+A+" /BitsPerComponent "+N+" /Columns "+j.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(L&&this.__addimage__.isArrayBuffer(L)||this.__addimage__.isArrayBufferView(L))&&(L=this.__addimage__.arrayBufferToBinaryString(L)),{alias:v,data:g,index:x,filter:Z,decodeParameters:X,transparency:S,palette:P,sMask:L,predictor:T,width:j.width,height:j.height,bitsPerComponent:N,colorSpace:b}}}})(Yt.API),(function(e){e.processGIF89A=function(n,r,s,a){var o=new Abe(n),l=o.width,c=o.height,u=[];o.decodeAndBlitFrameRGBA(0,u);var d={data:u,width:l,height:c},f=new P5(100).encode(d,100);return e.processJPEG.call(this,f,r,s,a)},e.processGIF87A=e.processGIF89A})(Yt.API),ml.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var n=0;n<e;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:a,green:s,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ml.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,n=this.width*this.height*4;this.data=new Uint8Array(n),this[e]()}catch(r){br.log("bit decode error:"+r)}},ml.prototype.bit1=function(){var e,n=Math.ceil(this.width/8),r=n%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,a=0;a<n;a++)for(var o=this.datav.getUint8(this.pos++,!0),l=s*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var u=this.palette[o>>7-c&1];this.data[l+4*c]=u.blue,this.data[l+4*c+1]=u.green,this.data[l+4*c+2]=u.red,this.data[l+4*c+3]=255}r!==0&&(this.pos+=4-r)}},ml.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),n=e%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var o=this.datav.getUint8(this.pos++,!0),l=s*this.width*4+2*a*4,c=o>>4,u=15&o,d=this.palette[c];if(this.data[l]=d.blue,this.data[l+1]=d.green,this.data[l+2]=d.red,this.data[l+3]=255,2*a+1>=this.width)break;d=this.palette[u],this.data[l+4]=d.blue,this.data[l+4+1]=d.green,this.data[l+4+2]=d.red,this.data[l+4+3]=255}n!==0&&(this.pos+=4-n)}},ml.prototype.bit8=function(){for(var e=this.width%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*s;if(a<this.palette.length){var l=this.palette[a];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},ml.prototype.bit15=function(){for(var e=this.width%3,n=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&n)/n*255|0,c=(o>>5&n)/n*255|0,u=(o>>10&n)/n*255|0,d=o>>15?255:0,f=s*this.width*4+4*a;this.data[f]=u,this.data[f+1]=c,this.data[f+2]=l,this.data[f+3]=d}this.pos+=e}},ml.prototype.bit16=function(){for(var e=this.width%3,n=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&n)/n*255|0,u=(l>>5&r)/r*255|0,d=(l>>11)/n*255|0,f=a*this.width*4+4*o;this.data[f]=d,this.data[f+1]=u,this.data[f+2]=c,this.data[f+3]=255}this.pos+=e}},ml.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+4*r;this.data[l]=o,this.data[l+1]=a,this.data[l+2]=s,this.data[l+3]=255}this.pos+=this.width%4}},ml.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+4*r;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=s,this.data[c+3]=l}},ml.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(n,r,s,a){var o=new ml(n,!1),l=o.width,c=o.height,u={data:o.getData(),width:l,height:c},d=new P5(100).encode(u,100);return e.processJPEG.call(this,d,r,s,a)}})(Yt.API),Y6.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(n,r,s,a){var o=new Y6(n),l=o.width,c=o.height,u={data:o.getData(),width:l,height:c},d=new P5(100).encode(u,100);return e.processJPEG.call(this,d,r,s,a)}})(Yt.API),Yt.API.processRGBA=function(e,n,r){for(var s=e.data,a=s.length,o=new Uint8Array(a/4*3),l=new Uint8Array(a/4),c=0,u=0,d=0;d<a;d+=4){var f=s[d],m=s[d+1],g=s[d+2],x=s[d+3];o[c++]=f,o[c++]=m,o[c++]=g,l[u++]=x}var v=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:v,index:n,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Yt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Sp=Yt.API,Eb=Sp.getCharWidthsArray=function(e,n){var r,s,a=(n=n||{}).font||this.internal.getFont(),o=n.fontSize||this.internal.getFontSize(),l=n.charSpace||this.internal.getCharSpace(),c=n.widths?n.widths:a.metadata.Unicode.widths,u=c.fof?c.fof:1,d=n.kerning?n.kerning:a.metadata.Unicode.kerning,f=d.fof?d.fof:1,m=n.doKerning!==!1,g=0,x=e.length,v=0,y=c[0]||u,b=[];for(r=0;r<x;r++)s=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?b.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+l*(1e3/o)||0)/1e3):(g=m&&cr(d[s])==="object"&&!isNaN(parseInt(d[s][v],10))?d[s][v]/f:0,b.push((c[s]||y)/u+g)),v=s;return b},H6=Sp.getStringUnitWidth=function(e,n){var r=(n=n||{}).fontSize||this.internal.getFontSize(),s=n.font||this.internal.getFont(),a=n.charSpace||this.internal.getCharSpace();return Sp.processArabic&&(e=Sp.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,r,a)/r:Eb.apply(this,arguments).reduce((function(o,l){return o+l}),0)},W6=function(e,n,r,s){for(var a=[],o=0,l=e.length,c=0;o!==l&&c+n[o]<r;)c+=n[o],o++;a.push(e.slice(0,o));var u=o;for(c=0;o!==l;)c+n[o]>s&&(a.push(e.slice(u,o)),c=0,u=o),c+=n[o],o++;return u!==o&&a.push(e.slice(u,o)),a},K6=function(e,n,r){r||(r={});var s,a,o,l,c,u,d,f=[],m=[f],g=r.textIndent||0,x=0,v=0,y=e.split(" "),b=Eb.apply(this,[" ",r])[0];if(u=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var N=Array(u).join(" "),j=[];y.map((function(A){(A=A.split(/\s*\n/)).length>1?j=j.concat(A.map((function(P,L){return(L&&P.length?`
`:"")+P}))):j.push(A[0])})),y=j,u=H6.apply(this,[N,r])}for(o=0,l=y.length;o<l;o++){var S=0;if(s=y[o],u&&s[0]==`
`&&(s=s.substr(1),S=1),g+x+(v=(a=Eb.apply(this,[s,r])).reduce((function(A,P){return A+P}),0))>n||S){if(v>n){for(c=W6.apply(this,[s,a,n-(g+x),n]),f.push(c.shift()),f=[c.pop()];c.length;)m.push([c.shift()]);v=a.slice(s.length-(f[0]?f[0].length:0)).reduce((function(A,P){return A+P}),0)}else f=[s];m.push(f),g=v+u,x=b}else f.push(s),g+=x+v,x=b}return d=u?function(A,P){return(P?N:"")+A.join(" ")}:function(A){return A.join(" ")},m.map(d)},Sp.splitTextToSize=function(e,n,r){var s,a=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var m=this.internal.getFont(f.fontName,f.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*n/a;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=r.lineIndent;var c,u,d=[];for(c=0,u=s.length;c<u;c++)d=d.concat(K6.apply(this,[s[c],l,o]));return d},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var n="klmnopqrstuvwxyz",r={},s={},a=0;a<n.length;a++)r[n[a]]="0123456789abcdef"[a],s["0123456789abcdef"[a]]=n[a];var o=function(m){return"0x"+parseInt(m,10).toString(16)},l=e.__fontmetrics__.compress=function(m){var g,x,v,y,b=["{"];for(var N in m){if(g=m[N],isNaN(parseInt(N,10))?x="'"+N+"'":(N=parseInt(N,10),x=(x=o(N).slice(2)).slice(0,-1)+s[x.slice(-1)]),typeof g=="number")g<0?(v=o(g).slice(3),y="-"):(v=o(g).slice(2),y=""),v=y+v.slice(0,-1)+s[v.slice(-1)];else{if(cr(g)!=="object")throw new Error("Don't know what to do with value type "+cr(g)+".");v=l(g)}b.push(x+v)}return b.push("}"),b.join("")},c=e.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,x,v,y,b={},N=1,j=b,S=[],A="",P="",L=m.length-1,O=1;O<L;O+=1)(y=m[O])=="'"?g?(v=g.join(""),g=void 0):g=[]:g?g.push(y):y=="{"?(S.push([j,v]),j={},v=void 0):y=="}"?((x=S.pop())[0][x[1]]=j,v=void 0,j=x[0]):y=="-"?N=-1:v===void 0?r.hasOwnProperty(y)?(A+=r[y],v=parseInt(A,16)*N,N=1,A=""):A+=y:r.hasOwnProperty(y)?(P+=r[y],j[v]=parseInt(P,16)*N,N=1,v=void 0,P=""):P+=y;return b},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(m){var g=m.font,x=f.Unicode[g.postScriptName];x&&(g.metadata.Unicode={},g.metadata.Unicode.widths=x.widths,g.metadata.Unicode.kerning=x.kerning);var v=d.Unicode[g.postScriptName];v&&(g.metadata.Unicode.encoding=v,g.encoding=v.codePages[0])}])})(Yt.API),(function(e){var n=function(r){for(var s=r.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=r.charCodeAt(o);return a};e.API.events.push(["addFont",function(r){var s=void 0,a=r.font,o=r.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(l,c){c=/^\x00\x01\x00\x00/.test(c)?n(c):n(Mx(c)),l.metadata=e.API.TTFFont.open(c),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(a,s)}}])})(Yt),(function(e){function n(){return(en.canvg?Promise.resolve(en.canvg):Y1(()=>import("./index.es-BFtnoJlq.js"),[])).catch((function(r){return Promise.reject(new Error("Could not load canvg: "+r))})).then((function(r){return r.default?r.default:r}))}Yt.API.addSvgAsImage=function(r,s,a,o,l,c,u,d){if(isNaN(s)||isNaN(a))throw br.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(l))throw br.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=o,f.height=l;var m=f.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,f.width,f.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return n().then((function(v){return v.fromString(m,r,g)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(v){return v.render(g)})).then((function(){x.addImage(f.toDataURL("image/jpeg",1),s,a,o,l,u,d)}))}})(),Yt.API.putTotalPages=function(e){var n,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(n,r);return this},Yt.API.viewerPreferences=function(e,n){var r;e=e||{},n=n||!1;var s,a,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(l),u=[],d=0,f=0,m=0;function g(v,y){var b,N=!1;for(b=0;b<v.length;b+=1)v[b]===y&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||n===!0){var x=c.length;for(m=0;m<x;m+=1)r[c[m]].value=r[c[m]].defaultValue,r[c[m]].explicitSet=!1}if(cr(e)==="object"){for(a in e)if(o=e[a],g(c,a)&&o!==void 0){if(r[a].type==="boolean"&&typeof o=="boolean")r[a].value=o;else if(r[a].type==="name"&&g(r[a].valueSet,o))r[a].value=o;else if(r[a].type==="integer"&&Number.isInteger(o))r[a].value=o;else if(r[a].type==="array"){for(d=0;d<o.length;d+=1)if(s=!0,o[d].length===1&&typeof o[d][0]=="number")u.push(String(o[d]-1));else if(o[d].length>1){for(f=0;f<o[d].length;f+=1)typeof o[d][f]!="number"&&(s=!1);s===!0&&u.push([o[d][0]-1,o[d][1]-1].join(" "))}r[a].value="["+u.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var v,y=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?y.push("/"+v+" /"+r[v].value):y.push("/"+v+" "+r[v].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var n=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),d=o.length+l.length+c.length+a.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+o+l+c+u),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",n)),this}})(Yt.API),(function(e){var n=e.API,r=n.pdfEscape16=function(o,l){for(var c,u=l.metadata.Unicode.widths,d=["","0","00","000","0000"],f=[""],m=0,g=o.length;m<g;++m){if(c=l.metadata.characterToGlyph(o.charCodeAt(m)),l.metadata.glyIdsUsed.push(c),l.metadata.toUnicode[c]=o.charCodeAt(m),u.indexOf(c)==-1&&(u.push(c),u.push([parseInt(l.metadata.widthOfGlyph(c),10)])),c=="0")return f.join("");c=c.toString(16),f.push(d[4-c.length],c)}return f.join("")},s=function(o){var l,c,u,d,f,m,g;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],m=0,g=(c=Object.keys(o).sort((function(x,v){return x-v}))).length;m<g;m++)l=c[m],u.length>=100&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(d=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),u.push("<"+l+"><"+d+">"));return u.length&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(o){(function(l){var c=l.font,u=l.out,d=l.newObject,f=l.putStream;if(c.metadata instanceof e.API.TTFFont&&c.encoding==="Identity-H"){for(var m=c.metadata.Unicode.widths,g=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),x="",v=0;v<g.length;v++)x+=String.fromCharCode(g[v]);var y=d();f({data:x,addLength1:!0,objectId:y}),u("endobj");var b=d();f({data:s(c.metadata.toUnicode),addLength1:!0,objectId:b}),u("endobj");var N=d();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+Dp(c.fontName)),u("/FontFile2 "+y+" 0 R"),u("/FontBBox "+e.API.PDFObject.convert(c.metadata.bbox)),u("/Flags "+c.metadata.flags),u("/StemV "+c.metadata.stemV),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u(">>"),u("endobj");var j=d();u("<<"),u("/Type /Font"),u("/BaseFont /"+Dp(c.fontName)),u("/FontDescriptor "+N+" 0 R"),u("/W "+e.API.PDFObject.convert(m)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+c.encoding+")"),u(">>"),u(">>"),u("endobj"),c.objectNumber=d(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+b+" 0 R"),u("/BaseFont /"+Dp(c.fontName)),u("/Encoding /"+c.encoding),u("/DescendantFonts ["+j+" 0 R]"),u(">>"),u("endobj"),c.isAlreadyPutted=!0}})(o)}]),n.events.push(["putFont",function(o){(function(l){var c=l.font,u=l.out,d=l.newObject,f=l.putStream;if(c.metadata instanceof e.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var m=c.metadata.rawData,g="",x=0;x<m.length;x++)g+=String.fromCharCode(m[x]);var v=d();f({data:g,addLength1:!0,objectId:v}),u("endobj");var y=d();f({data:s(c.metadata.toUnicode),addLength1:!0,objectId:y}),u("endobj");var b=d();u("<<"),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u("/StemV "+c.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+v+" 0 R"),u("/Flags 96"),u("/FontBBox "+e.API.PDFObject.convert(c.metadata.bbox)),u("/FontName /"+Dp(c.fontName)),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u(">>"),u("endobj"),c.objectNumber=d();for(var N=0;N<c.metadata.hmtx.widths.length;N++)c.metadata.hmtx.widths[N]=parseInt(c.metadata.hmtx.widths[N]*(1e3/c.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+Dp(c.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),u("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var l,c=o.text||"",u=o.x,d=o.y,f=o.options||{},m=o.mutex||{},g=m.pdfEscape,x=m.activeFontKey,v=m.fonts,y=x,b="",N=0,j="",S=v[y].encoding;if(v[y].encoding!=="Identity-H")return{text:c,x:u,y:d,options:f,mutex:m};for(j=c,y=x,Array.isArray(c)&&(j=c[0]),N=0;N<j.length;N+=1)v[y].metadata.hasOwnProperty("cmap")&&(l=v[y].metadata.cmap.unicode.codeMap[j[N].charCodeAt(0)]),l||j[N].charCodeAt(0)<256&&v[y].metadata.hasOwnProperty("Unicode")?b+=j[N]:b+="";var A="";return parseInt(y.slice(1))<14||S==="WinAnsiEncoding"?A=g(b,y).split("").map((function(P){return P.charCodeAt(0).toString(16)})).join(""):S==="Identity-H"&&(A=r(b,v[y])),m.isHex=!0,{text:A,x:u,y:d,options:f,mutex:m}};n.events.push(["postProcessText",function(o){var l=o.text||"",c=[],u={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var d=0;for(d=0;d<l.length;d+=1)Array.isArray(l[d])&&l[d].length===3?c.push([a(Object.assign({},u,{text:l[d][0]})).text,l[d][1],l[d][2]]):c.push(a(Object.assign({},u,{text:l[d]})).text);o.text=c}else o.text=a(Object.assign({},u,{text:l})).text}])})(Yt),(function(e){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return n.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,s){return n.call(this),this.internal.vFS[r]=s,this},e.getFileFromVFS=function(r){return n.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Yt.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var a,o,l,c,u,d,f,m=n,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,S=0;this.__bidiEngine__={};var A=function(D){var M=D.charCodeAt(),G=M>>8,Y=y[G];return Y!==void 0?m[256*Y+(255&M)]:G===252||G===253?"AL":N.test(G)?"L":G===8?"R":"N"},P=function(D){for(var M,G=0;G<D.length;G++){if((M=A(D.charAt(G)))==="L")return!1;if(M==="R")return!0}return!1},L=function(D,M,G,Y){var Z,X,re,z,te=M[Y];switch(te){case"L":case"R":j=!1;break;case"N":case"AN":break;case"EN":j&&(te="AN");break;case"AL":j=!0,te="R";break;case"WS":te="N";break;case"CS":Y<1||Y+1>=M.length||(Z=G[Y-1])!=="EN"&&Z!=="AN"||(X=M[Y+1])!=="EN"&&X!=="AN"?te="N":j&&(X="AN"),te=X===Z?X:"N";break;case"ES":te=(Z=Y>0?G[Y-1]:"B")==="EN"&&Y+1<M.length&&M[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&G[Y-1]==="EN"){te="EN";break}if(j){te="N";break}for(re=Y+1,z=M.length;re<z&&M[re]==="ET";)re++;te=re<z&&M[re]==="EN"?"EN":"N";break;case"NSM":if(l&&!c){for(z=M.length,re=Y+1;re<z&&M[re]==="NSM";)re++;if(re<z){var le=D[Y],Q=le>=1425&&le<=2303||le===64286;if(Z=M[re],Q&&(Z==="R"||Z==="AL")){te="R";break}}}te=Y<1||(Z=M[Y-1])==="B"?"N":G[Y-1];break;case"B":j=!1,a=!0,te=S;break;case"S":o=!0,te="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"BN":te="N"}return te},O=function(D,M,G){var Y=D.split("");return G&&R(Y,G,{hiLevel:S}),Y.reverse(),M&&M.reverse(),Y.join("")},R=function(D,M,G){var Y,Z,X,re,z,te=-1,le=D.length,Q=0,T=[],B=S?x:g,H=[];for(j=!1,a=!1,o=!1,Z=0;Z<le;Z++)H[Z]=A(D[Z]);for(X=0;X<le;X++){if(z=Q,T[X]=L(D,H,T,X),Y=240&(Q=B[z][v[T[X]]]),Q&=15,M[X]=re=B[Q][5],Y>0)if(Y===16){for(Z=te;Z<X;Z++)M[Z]=1;te=-1}else te=-1;if(B[Q][6])te===-1&&(te=X);else if(te>-1){for(Z=te;Z<X;Z++)M[Z]=re;te=-1}H[X]==="B"&&(M[X]=0),G.hiLevel|=re}o&&(function(ee,ce,he){for(var W=0;W<he;W++)if(ee[W]==="S"){ce[W]=S;for(var J=W-1;J>=0&&ee[J]==="WS";J--)ce[J]=S}})(H,M,le)},q=function(D,M,G,Y,Z){if(!(Z.hiLevel<D)){if(D===1&&S===1&&!a)return M.reverse(),void(G&&G.reverse());for(var X,re,z,te,le=M.length,Q=0;Q<le;){if(Y[Q]>=D){for(z=Q+1;z<le&&Y[z]>=D;)z++;for(te=Q,re=z-1;te<re;te++,re--)X=M[te],M[te]=M[re],M[re]=X,G&&(X=G[te],G[te]=G[re],G[re]=X);Q=z}Q++}}},U=function(D,M,G){var Y=D.split(""),Z={hiLevel:S};return G||(G=[]),R(Y,G,Z),(function(X,re,z){if(z.hiLevel!==0&&f)for(var te,le=0;le<X.length;le++)re[le]===1&&(te=b.indexOf(X[le]))>=0&&(X[le]=b[te+1])})(Y,G,Z),q(2,Y,M,G,Z),q(1,Y,M,G,Z),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(D,M,G){if((function(Z,X){if(X)for(var re=0;re<Z.length;re++)X[re]=re;c===void 0&&(c=P(Z)),d===void 0&&(d=P(Z))})(D,M),l||!u||d)if(l&&u&&c^d)S=c?1:0,D=O(D,M,G);else if(!l&&u&&d)S=c?1:0,D=U(D,M,G),D=O(D,M);else if(!l||c||u||d){if(l&&!u&&c^d)D=O(D,M),c?(S=0,D=U(D,M,G)):(S=1,D=U(D,M,G),D=O(D,M));else if(l&&c&&!u&&d)S=1,D=U(D,M,G),D=O(D,M);else if(!l&&!u&&c^d){var Y=f;c?(S=1,D=U(D,M,G),S=0,f=!1,D=U(D,M,G),f=Y):(S=0,D=U(D,M,G),D=O(D,M),S=1,f=!1,D=U(D,M,G),f=Y,D=O(D,M))}}else S=0,D=U(D,M,G);else S=c?1:0,D=U(D,M,G);return D},this.__bidiEngine__.setOptions=function(D){D&&(l=D.isInputVisual,u=D.isOutputVisual,c=D.isInputRtl,d=D.isOutputRtl,f=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var a=s.text,o=(s.x,s.y,s.options||{}),l=(s.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(l=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?l.push([r.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):l.push([r.doBidiReorder(a[c])]);s.text=l}else s.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])})(Yt),Yt.API.TTFFont=(function(){function e(n){var r;if(this.rawData=n,r=this.contents=new Fh(n),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Ube(this),this.registerTTF()}return e.open=function(n){return new e(n)},e.prototype.parse=function(){return this.directory=new kbe(this.contents),this.head=new Tbe(this),this.name=new Ibe(this),this.cmap=new DG(this),this.toUnicode={},this.hhea=new Obe(this),this.maxp=new Mbe(this),this.hmtx=new Fbe(this),this.post=new Rbe(this),this.os2=new Lbe(this),this.loca=new zbe(this),this.glyf=new Bbe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var n,r,s,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,c,u,d;for(d=[],l=0,c=(u=this.bbox).length;l<c;l++)n=u[l],d.push(Math.round(n*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(n){var r;return((r=this.cmap.unicode)!=null?r.codeMap[n]:void 0)||0},e.prototype.widthOfGlyph=function(n){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*r},e.prototype.widthOfString=function(n,r,s){var a,o,l,c;for(l=0,o=0,c=(n=""+n).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=n.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/r)||0;return l*(r/1e3)},e.prototype.lineHeight=function(n,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*n},e})();var Dl,Fh=(function(){function e(n){this.data=n??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(n){return this.data[this.pos++]=n},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},e.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},e.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},e.prototype.readString=function(n){var r,s;for(s=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(n){var r,s,a;for(a=[],r=0,s=n.length;0<=s?r<s:r>s;r=0<=s?++r:--r)a.push(this.writeByte(n.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(n){return this.writeInt16(n)},e.prototype.readLongLong=function(){var n,r,s,a,o,l,c,u;return n=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),u=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^o)+65536*(255^l)+256*(255^c)+(255^u)+1):72057594037927940*n+281474976710656*r+1099511627776*s+4294967296*a+16777216*o+65536*l+256*c+u},e.prototype.writeLongLong=function(n){var r,s;return r=Math.floor(n/4294967296),s=4294967295&n,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(n){return this.writeInt32(n)},e.prototype.read=function(n){var r,s;for(r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push(this.readByte());return r},e.prototype.write=function(n){var r,s,a,o;for(o=[],s=0,a=n.length;s<a;s++)r=n[s],o.push(this.writeByte(r));return o},e})(),kbe=(function(){var e;function n(r){var s,a,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return n.prototype.encode=function(r){var s,a,o,l,c,u,d,f,m,g,x,v,y;for(y in x=Object.keys(r).length,u=Math.log(2),m=16*Math.floor(Math.log(x)/u),l=Math.floor(m/u),f=16*x-m,(a=new Fh).writeInt(this.scalarType),a.writeShort(x),a.writeShort(m),a.writeShort(l),a.writeShort(f),o=16*x,d=a.pos+o,c=null,v=[],r)for(g=r[y],a.writeString(y),a.writeInt(e(g)),a.writeInt(d),a.writeInt(g.length),v=v.concat(g),y==="head"&&(c=d),d+=g.length;d%4;)v.push(0),d++;return a.write(v),s=2981146554-e(a.data),a.pos=c+8,a.writeUInt32(s),a.data},e=function(r){var s,a,o,l;for(r=IG.call(r);r.length%4;)r.push(0);for(o=new Fh(r),a=0,s=0,l=r.length;s<l;s=s+=4)a+=o.readUInt32();return 4294967295&a},n})(),Ebe={}.hasOwnProperty,Ic=function(e,n){for(var r in n)Ebe.call(n,r)&&(e[r]=n[r]);function s(){this.constructor=e}return s.prototype=n.prototype,e.prototype=new s,e.__super__=n.prototype,e};Dl=(function(){function e(n){var r;this.file=n,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var Tbe=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Ic(n,Dl),n.prototype.tag="head",n.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},n.prototype.encode=function(r){var s;return(s=new Fh).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(r),s.writeShort(this.glyphDataFormat),s.data},n})(),Q6=(function(){function e(n,r){var s,a,o,l,c,u,d,f,m,g,x,v,y,b,N,j,S;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=r+n.readInt(),m=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=n.readByte();break;case 4:for(x=n.readUInt16(),g=x/2,n.pos+=6,o=(function(){var A,P;for(P=[],u=A=0;0<=g?A<g:A>g;u=0<=g?++A:--A)P.push(n.readUInt16());return P})(),n.pos+=2,y=(function(){var A,P;for(P=[],u=A=0;0<=g?A<g:A>g;u=0<=g?++A:--A)P.push(n.readUInt16());return P})(),d=(function(){var A,P;for(P=[],u=A=0;0<=g?A<g:A>g;u=0<=g?++A:--A)P.push(n.readUInt16());return P})(),f=(function(){var A,P;for(P=[],u=A=0;0<=g?A<g:A>g;u=0<=g?++A:--A)P.push(n.readUInt16());return P})(),a=(this.length-n.pos+this.offset)/2,c=(function(){var A,P;for(P=[],u=A=0;0<=a?A<a:A>a;u=0<=a?++A:--A)P.push(n.readUInt16());return P})(),u=N=0,S=o.length;N<S;u=++N)for(b=o[u],s=j=v=y[u];v<=b?j<=b:j>=b;s=v<=b?++j:--j)f[u]===0?l=s+d[u]:(l=c[f[u]/2+(s-v)-(g-u)]||0)!==0&&(l+=d[u]),this.codeMap[s]=65535&l}n.pos=m}return e.encode=function(n,r){var s,a,o,l,c,u,d,f,m,g,x,v,y,b,N,j,S,A,P,L,O,R,q,U,D,M,G,Y,Z,X,re,z,te,le,Q,T,B,H,ee,ce,he,W,J,pe,ue,me;switch(Y=new Fh,l=Object.keys(n).sort((function(je,ze){return je-ze})),r){case"macroman":for(y=0,b=(function(){var je=[];for(v=0;v<256;++v)je.push(0);return je})(),j={0:0},o={},Z=0,te=l.length;Z<te;Z++)j[J=n[a=l[Z]]]==null&&(j[J]=++y),o[a]={old:n[a],new:j[n[a]]},b[a]=j[n[a]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(b),{charMap:o,subtable:Y.data,maxGlyphID:y+1};case"unicode":for(M=[],m=[],S=0,j={},s={},N=d=null,X=0,le=l.length;X<le;X++)j[P=n[a=l[X]]]==null&&(j[P]=++S),s[a]={old:P,new:j[P]},c=j[P]-a,N!=null&&c===d||(N&&m.push(N),M.push(a),d=c),N=a;for(N&&m.push(N),m.push(65535),M.push(65535),U=2*(q=M.length),R=2*Math.pow(Math.log(q)/Math.LN2,2),g=Math.log(R/2)/Math.LN2,O=2*q-R,u=[],L=[],x=[],v=re=0,Q=M.length;re<Q;v=++re){if(D=M[v],f=m[v],D===65535){u.push(0),L.push(0);break}if(D-(G=s[D].new)>=32768)for(u.push(0),L.push(2*(x.length+q-v)),a=z=D;D<=f?z<=f:z>=f;a=D<=f?++z:--z)x.push(s[a].new);else u.push(G-D),L.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*q+2*x.length),Y.writeUInt16(0),Y.writeUInt16(U),Y.writeUInt16(R),Y.writeUInt16(g),Y.writeUInt16(O),he=0,T=m.length;he<T;he++)a=m[he],Y.writeUInt16(a);for(Y.writeUInt16(0),W=0,B=M.length;W<B;W++)a=M[W],Y.writeUInt16(a);for(pe=0,H=u.length;pe<H;pe++)c=u[pe],Y.writeUInt16(c);for(ue=0,ee=L.length;ue<ee;ue++)A=L[ue],Y.writeUInt16(A);for(me=0,ce=x.length;me<ce;me++)y=x[me],Y.writeUInt16(y);return{charMap:s,subtable:Y.data,maxGlyphID:S+1}}},e})(),DG=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Ic(n,Dl),n.prototype.tag="cmap",n.prototype.parse=function(r){var s,a,o;for(r.pos=this.offset,this.version=r.readUInt16(),o=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=o?a<o:a>o;a=0<=o?++a:--a)s=new Q6(r,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},n.encode=function(r,s){var a,o;return s==null&&(s="macroman"),a=Q6.encode(r,s),(o=new Fh).writeUInt16(0),o.writeUInt16(1),a.table=o.data.concat(a.subtable),a},n})(),Obe=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Ic(n,Dl),n.prototype.tag="hhea",n.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},n})(),Lbe=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Ic(n,Dl),n.prototype.tag="OS/2",n.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var s,a;for(a=[],s=0;s<10;++s)a.push(r.readByte());return a})(),this.charRange=(function(){var s,a;for(a=[],s=0;s<4;++s)a.push(r.readInt());return a})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var s,a;for(a=[],s=0;s<2;s=++s)a.push(r.readInt());return a})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},n})(),Rbe=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Ic(n,Dl),n.prototype.tag="post",n.prototype.parse=function(r){var s,a,o;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var l;for(a=r.readUInt16(),this.glyphNameIndex=[],l=0;0<=a?l<a:l>a;l=0<=a?++l:--l)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],o=[];r.pos<this.offset+this.length;)s=r.readByte(),o.push(this.names.push(r.readString(s)));return o;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var c,u,d;for(d=[],l=c=0,u=this.file.maxp.numGlyphs;0<=u?c<u:c>u;l=0<=u?++c:--c)d.push(r.readUInt32());return d}).call(this)}},n})(),Dbe=function(e,n){this.raw=e,this.length=e.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},Ibe=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Ic(n,Dl),n.prototype.tag="name",n.prototype.parse=function(r){var s,a,o,l,c,u,d,f,m,g,x;for(r.pos=this.offset,r.readShort(),s=r.readShort(),u=r.readShort(),a=[],l=0;0<=s?l<s:l>s;l=0<=s?++l:--l)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+u+r.readShort()});for(d={},l=m=0,g=a.length;m<g;l=++m)o=a[l],r.pos=o.offset,f=r.readString(o.length),c=new Dbe(f,o),d[x=o.nameID]==null&&(d[x]=[]),d[o.nameID].push(c);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},n})(),Mbe=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Ic(n,Dl),n.prototype.tag="maxp",n.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},n})(),Fbe=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Ic(n,Dl),n.prototype.tag="hmtx",n.prototype.parse=function(r){var s,a,o,l,c,u,d;for(r.pos=this.offset,this.metrics=[],s=0,u=this.file.hhea.numberOfMetrics;0<=u?s<u:s>u;s=0<=u?++s:--s)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,m;for(m=[],s=f=0;0<=o?f<o:f>o;s=0<=o?++f:--f)m.push(r.readInt16());return m})(),this.widths=(function(){var f,m,g,x;for(x=[],f=0,m=(g=this.metrics).length;f<m;f++)l=g[f],x.push(l.advance);return x}).call(this),a=this.widths[this.widths.length-1],d=[],s=c=0;0<=o?c<o:c>o;s=0<=o?++c:--c)d.push(this.widths.push(a));return d},n.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},n})(),IG=[].slice,Bbe=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Ic(n,Dl),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(r){var s,a,o,l,c,u,d,f,m,g;return r in this.cache?this.cache[r]:(l=this.file.loca,s=this.file.contents,a=l.indexOf(r),(o=l.lengthOf(r))===0?this.cache[r]=null:(s.pos=this.offset+a,c=(u=new Fh(s.read(o))).readShort(),f=u.readShort(),g=u.readShort(),d=u.readShort(),m=u.readShort(),this.cache[r]=c===-1?new qbe(u,f,g,d,m):new $be(u,c,f,g,d,m),this.cache[r]))},n.prototype.encode=function(r,s,a){var o,l,c,u,d;for(c=[],l=[],u=0,d=s.length;u<d;u++)o=r[s[u]],l.push(c.length),o&&(c=c.concat(o.encode(a)));return l.push(c.length),{table:c,offsets:l}},n})(),$be=(function(){function e(n,r,s,a,o,l){this.raw=n,this.numberOfContours=r,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),qbe=(function(){function e(n,r,s,a,o){var l,c;for(this.raw=n,this.xMin=r,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;c=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&c;)l.pos+=1&c?4:2,128&c?l.pos+=8:64&c?l.pos+=4:8&c&&(l.pos+=2)}return e.prototype.encode=function(){var n,r,s;for(r=new Fh(IG.call(this.raw.data)),n=0,s=this.glyphIDs.length;n<s;++n)r.pos=this.glyphOffsets[n];return r.data},e})(),zbe=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Ic(n,Dl),n.prototype.tag="loca",n.prototype.parse=function(r){var s,a;return r.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=2)l.push(2*r.readUInt16());return l}).call(this):(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=4)l.push(r.readUInt32());return l}).call(this)},n.prototype.indexOf=function(r){return this.offsets[r]},n.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},n.prototype.encode=function(r,s){for(var a=new Uint32Array(this.offsets.length),o=0,l=0,c=0;c<a.length;++c)if(a[c]=o,l<s.length&&s[l]==c){++l,a[c]=o;var u=this.offsets[c],d=this.offsets[c+1]-u;d>0&&(o+=d)}for(var f=new Array(4*a.length),m=0;m<a.length;++m)f[4*m+3]=255&a[m],f[4*m+2]=(65280&a[m])>>8,f[4*m+1]=(16711680&a[m])>>16,f[4*m]=(4278190080&a[m])>>24;return f},n})(),Ube=(function(){function e(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var n,r,s,a,o;for(r in a=this.font.cmap.tables[0].codeMap,n={},o=this.subset)s=o[r],n[r]=a[s];return n},e.prototype.glyphsFor=function(n){var r,s,a,o,l,c,u;for(a={},l=0,c=n.length;l<c;l++)a[o=n[l]]=this.font.glyf.glyphFor(o);for(o in r=[],a)(s=a[o])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(o in u=this.glyphsFor(r))s=u[o],a[o]=s;return a},e.prototype.encode=function(n,r){var s,a,o,l,c,u,d,f,m,g,x,v,y,b,N;for(a in s=DG.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(n),x={0:0},N=s.charMap)x[(u=N[a]).old]=u.new;for(v in g=s.maxGlyphID,l)v in x||(x[v]=g++);return f=(function(j){var S,A;for(S in A={},j)A[j[S]]=S;return A})(x),m=Object.keys(f).sort((function(j,S){return j-S})),y=(function(){var j,S,A;for(A=[],j=0,S=m.length;j<S;j++)c=m[j],A.push(f[c]);return A})(),o=this.font.glyf.encode(l,y,x),d=this.font.loca.encode(o.offsets,y),b={cmap:this.font.cmap.raw(),glyf:o.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e})();Yt.API.PDFObject=(function(){var e;function n(){}return e=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},n.convert=function(r){var s,a,o,l;if(Array.isArray(r))return"["+(function(){var c,u,d;for(d=[],c=0,u=r.length;c<u;c++)s=r[c],d.push(n.convert(s));return d})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in o=["<<"],r)l=r[a],o.push("/"+a+" "+n.convert(l));return o.push(">>"),o.join(`
`)}return""+r},n})();function Vbe(){const{t:e}=$t(),[n,r]=C.useState(!1),{user:s,hasPaid:a}=Kr(),{data:o=[]}=Dt({queryKey:["pipes",s==null?void 0:s.email],queryFn:()=>Ce.entities.Pipe.filter({created_by:s==null?void 0:s.email}),enabled:!!(s!=null&&s.email)}),l=a,c=()=>{const f=["Name","Maker","Country","Shape","Material","Finish","Length (mm)","Weight (g)","Bowl Diameter (mm)","Bowl Depth (mm)","Chamber Volume","Year Made","Condition","Purchase Price","Estimated Value","Notes"],m=o.map(b=>[b.name||"",b.maker||"",b.country_of_origin||"",b.shape||"",b.bowl_material||"",b.finish||"",b.length_mm||"",b.weight_grams||"",b.bowl_diameter_mm||"",b.bowl_depth_mm||"",b.chamber_volume||"",b.year_made||"",b.condition||"",b.purchase_price||"",b.estimated_value||"",b.notes||""]),g=[f.join(","),...m.map(b=>b.map(N=>`"${String(N).replace(/"/g,'""')}"`).join(","))].join(`
`),x=new Blob([g],{type:"text/csv"}),v=window.URL.createObjectURL(x),y=document.createElement("a");y.href=v,y.download=`pipe-collection-${new Date().toISOString().split("T")[0]}.csv`,y.click(),window.URL.revokeObjectURL(v)},u=f=>new Promise((m,g)=>{const x=new Image;x.crossOrigin="Anonymous",x.onload=()=>{const v=document.createElement("canvas");v.width=x.width,v.height=x.height,v.getContext("2d").drawImage(x,0,0);try{const b=v.toDataURL("image/jpeg",.8);m(b)}catch(b){g(b)}},x.onerror=g,x.src=f}),d=async()=>{r(!0);try{const f=new Yt,m=f.internal.pageSize.getWidth(),g=f.internal.pageSize.getHeight();f.setFontSize(20),f.text("Pipe Collection - Insurance Report",m/2,20,{align:"center"}),f.setFontSize(10),f.text(`Generated: ${new Date().toLocaleDateString()}`,m/2,28,{align:"center"}),f.text(`Owner: ${(s==null?void 0:s.full_name)||(s==null?void 0:s.email)}`,m/2,34,{align:"center"});const x=o.reduce((b,N)=>b+(N.estimated_value||0),0),v=o.reduce((b,N)=>b+(N.purchase_price||0),0);f.setFontSize(12),f.setFont(void 0,"bold"),f.text("Collection Summary",20,45),f.setFont(void 0,"normal"),f.setFontSize(10),f.text(`Total Pipes: ${o.length}`,20,52),f.text(`Total Purchase Value: $${v.toLocaleString()}`,20,58),f.text(`Current Estimated Value: $${x.toLocaleString()}`,20,64);let y=75;f.setFontSize(12),f.setFont(void 0,"bold"),f.text("Individual Pipe Details:",20,y),y+=8;for(const[b,N]of o.entries()){if(y>g-40&&(f.addPage(),y=20),f.setFontSize(11),f.setFont(void 0,"bold"),f.text(`${b+1}. ${N.name}`,20,y),f.setFont(void 0,"normal"),f.setFontSize(9),y+=6,N.photos&&N.photos.length>0)try{const j=await u(N.photos[0]),S=60,A=60;y+A>g-20&&(f.addPage(),y=20),f.addImage(j,"JPEG",25,y,S,A),y+=A+5}catch(j){console.error("Failed to load pipe photo:",j)}if(N.maker&&(f.text(`Maker: ${N.maker}${N.country_of_origin?` (${N.country_of_origin})`:""}`,25,y),y+=5),(N.shape||N.bowl_material)&&(f.text(`Shape: ${N.shape||"N/A"} | Material: ${N.bowl_material||"N/A"}`,25,y),y+=5),N.year_made&&(f.text(`Year: ${N.year_made}`,25,y),y+=5),N.condition&&(f.text(`Condition: ${N.condition}`,25,y),y+=5),(N.purchase_price||N.estimated_value)&&(f.setFont(void 0,"bold"),f.text(`Purchase Price: $${N.purchase_price||"N/A"} | Current Value: $${N.estimated_value||"N/A"}`,25,y),f.setFont(void 0,"normal"),y+=5),N.stamping&&(f.text(`Stamping: ${N.stamping}`,25,y),y+=5),N.stamping_photos&&N.stamping_photos.length>0){f.setFontSize(8),f.setFont(void 0,"bold"),f.text("Stamping Photos:",25,y),f.setFont(void 0,"normal"),y+=5;for(const j of N.stamping_photos.slice(0,2))try{const S=await u(j),A=50,P=50;y+P>g-20&&(f.addPage(),y=20),f.addImage(S,"JPEG",25,y,A,P),y+=P+3}catch(S){console.error("Failed to load stamping photo:",S)}f.setFontSize(9)}if(N.notes){const j=f.splitTextToSize(`Notes: ${N.notes}`,m-50);y+j.length*5>g-20&&(f.addPage(),y=20),f.text(j,25,y),y+=j.length*5}y+=8}f.save(`pipe-insurance-report-${new Date().toISOString().split("T")[0]}.pdf`)}finally{r(!1)}};return i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ye,{variant:"outline",size:"sm",onClick:c,disabled:n||o.length===0,children:[i.jsx(O4,{className:"w-4 h-4 mr-2"}),e("pipesPage.exportCSV")]}),i.jsxs(ye,{variant:"outline",size:"sm",onClick:d,disabled:n||o.length===0||!l,className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[!l&&i.jsx(yh,{className:"w-4 h-4 mr-2 text-amber-500"}),i.jsx(yq,{className:"w-4 h-4 mr-2"}),e("pipesPage.insuranceReport")]})]})}const kn={pageBg:"bg-gradient-to-br from-[#0F1C2E] via-[#142338] to-[#0F1C2E]",card:"bg-[#1B2A3D] border border-[#2C3E55] rounded-xl shadow-md",textTitle:"text-[#F1E9D9]",textHeading:"text-[#E5DAC4]",textBody:"text-[#E0D8C8]",textSubtle:"text-[#A8B3C7]",textMuted:"text-[#7A879A]",buttonPrimary:"bg-[#8B3A3A] hover:bg-[#7A2F2F] text-[#F1E9D9]",buttonSecondary:"bg-[#243548] border border-[#2C3E55] text-[#E0D8C8] hover:bg-[#243548]/80",input:"bg-[#243548] border border-[#2C3E55] text-[#F1E9D9] placeholder:text-[#7A879A] rounded-lg"},O3=ve.forwardRef(({className:e,...n},r)=>i.jsx("h1",{ref:r,className:ut(`${kn.textTitle} text-4xl font-bold`,e),...n}));O3.displayName="PkPageTitle";const Hbe=ve.forwardRef(({className:e,...n},r)=>i.jsx("h2",{ref:r,className:ut(`${kn.textHeading} text-2xl font-semibold`,e),...n}));Hbe.displayName="PkSectionTitle";const Wbe=ve.forwardRef(({className:e,...n},r)=>i.jsx("h3",{ref:r,className:ut(`${kn.textHeading} text-lg font-semibold`,e),...n}));Wbe.displayName="PkSubsectionTitle";const Kbe=ve.forwardRef(({className:e,...n},r)=>i.jsx("label",{ref:r,className:ut(`${kn.textBody} font-medium`,e),...n}));Kbe.displayName="PkLabel";const L3=ve.forwardRef(({className:e,...n},r)=>i.jsx("p",{ref:r,className:ut(`${kn.textBody}`,e),...n}));L3.displayName="PkText";const Gbe=ve.forwardRef(({className:e,...n},r)=>i.jsx("p",{ref:r,className:ut(`${kn.textMuted} text-sm`,e),...n}));Gbe.displayName="PkSubtext";const Ybe=["Acorn","Apple","Author","Bent","Billiard","Brandy","Bulldog","Calabash","Canadian","Cavalier","Cherry Wood","Chimney","Churchwarden","Cutty","Devil Anse","Dublin","Egg","Freehand","Hawkbill","Horn","Hungarian","Liverpool","Lovat","Nautilus","Oom Paul","Other","Panel","Poker","Pot","Prince","Rhodesian","Sitter","Tomato","Volcano","Woodstock","Zulu"],Qbe=["Briar","Cherry Wood","Clay","Corn Cob","Meerschaum","Morta","Olive Wood","Other"],A5="__ALL_SHAPES__",k5="__ALL_MATERIALS__";function MG(){const{t:e}=$t(),[n,r]=C.useState(!1),[s,a]=C.useState(null),[o,l]=C.useState(""),[c,u]=C.useState(""),[d,f]=C.useState(""),[m,g]=C.useState(()=>localStorage.getItem("pipesViewMode")||"grid"),[x,v]=C.useState(!1),[y,b]=C.useState("date"),N=On(),{user:j,hasPaid:S,isTrial:A}=Kr(),{data:P=[],isLoading:L}=Dt({queryKey:["pipes",j==null?void 0:j.email],queryFn:async()=>{try{const Z=await Ce.entities.Pipe.filter({created_by:j==null?void 0:j.email},"-created_date");return Array.isArray(Z)?Z:[]}catch(Z){return console.error("Pipes load error:",Z),[]}},enabled:!!(j!=null&&j.email),retry:2,staleTime:1e4}),O=rn({mutationFn:async Z=>{const X=await iv(j==null?void 0:j.email,S,A);if(!X.canCreate)throw new Error(X.reason||"Cannot create pipe");return Ce.entities.Pipe.create(Z)},onSuccess:()=>{N.invalidateQueries({queryKey:["pipes",j==null?void 0:j.email]}),r(!1),Ve.success(e("notifications.created"))},onError:Z=>{Ve.error(Z.message||e("pipesPage.failedToAddPipe"))}}),R=rn({mutationFn:({id:Z,data:X})=>xr("Pipe",Z,X,j==null?void 0:j.email),onSuccess:()=>{jg(N,j==null?void 0:j.email),r(!1),a(null)}}),q=Z=>{s?R.mutate({id:s.id,data:Z}):O.mutate(Z)},U=Z=>{N.invalidateQueries({queryKey:["pipes",j==null?void 0:j.email]}),a(Z),r(!0)},D=rn({mutationFn:({id:Z,is_favorite:X})=>xr("Pipe",Z,{is_favorite:X},j==null?void 0:j.email),onMutate:async({id:Z,is_favorite:X})=>{await N.cancelQueries({queryKey:["pipes",j==null?void 0:j.email]});const re=N.getQueryData(["pipes",j==null?void 0:j.email]);return N.setQueryData(["pipes",j==null?void 0:j.email],z=>(z||[]).map(te=>(te==null?void 0:te.id)===Z?{...te,is_favorite:X}:te)),{previousPipes:re}},onError:(Z,X,re)=>{N.setQueryData(["pipes",j==null?void 0:j.email],re==null?void 0:re.previousPipes)}}),M=Z=>{D.mutate({id:Z.id,is_favorite:!Z.is_favorite})},G=(P||[]).filter(Z=>{var te,le;if(!Z)return!1;const X=!o||((te=Z.name)==null?void 0:te.toLowerCase().includes(o.toLowerCase()))||((le=Z.maker)==null?void 0:le.toLowerCase().includes(o.toLowerCase())),re=!c||Z.shape===c,z=!d||Z.bowl_material===d;return X&&re&&z}).sort((Z,X)=>{try{if(y==="favorites")return Z!=null&&Z.is_favorite&&!(X!=null&&X.is_favorite)?-1:!(Z!=null&&Z.is_favorite)&&(X!=null&&X.is_favorite)?1:new Date((X==null?void 0:X.created_date)||0).getTime()-new Date((Z==null?void 0:Z.created_date)||0).getTime();if(y==="maker"){const re=((Z==null?void 0:Z.maker)||"").toLowerCase(),z=((X==null?void 0:X.maker)||"").toLowerCase();return re.localeCompare(z)}if(y==="name"){const re=((Z==null?void 0:Z.name)||"").toLowerCase(),z=((X==null?void 0:X.name)||"").toLowerCase();return re.localeCompare(z)}return new Date((X==null?void 0:X.created_date)||0).getTime()-new Date((Z==null?void 0:Z.created_date)||0).getTime()}catch(re){return console.error("Sort error:",re),0}}),Y=(P||[]).reduce((Z,X)=>Z+(Number(X==null?void 0:X.estimated_value)||0),0);return i.jsx("div",{className:`min-h-screen ${kn.pageBg}`,children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs(ms.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col gap-4 mb-8",children:[i.jsxs("div",{children:[i.jsx(O3,{children:e("pipesPage.myPipes")}),i.jsxs(L3,{className:"mt-1",children:[P.length," ",e("pipesPage.pipes","pipes")," ",Y>0&&`• ${ro(Y)} ${e("pipesPage.totalValue","total value")}`]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(Vbe,{}),i.jsxs(ye,{onClick:()=>v(!0),variant:"outline",className:"border-[#E0D8C8]/50 text-[#E0D8C8] font-semibold flex-shrink-0",children:[i.jsx(Da,{className:"w-4 h-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:e("pipesPage.quickSearchAdd")}),i.jsx("span",{className:"sm:hidden",children:e("pipesPage.quickSearch")})]}),i.jsxs(ye,{onClick:async()=>{const Z=await iv(j==null?void 0:j.email,S,A);if(!Z.canCreate){Ve.error(Z.reason,{action:{label:e("subscription.upgrade"),onClick:()=>window.location.href=xt("Subscription")}});return}a(null),r(!0)},className:"bg-gradient-to-r from-[#A35C5C] to-[#8B4A4A] hover:from-[#8B4A4A] hover:to-[#A35C5C] shadow-md hover:shadow-lg flex-shrink-0",children:[i.jsx(Ra,{className:"w-4 h-4 mr-2"}),e("pipesPage.addPipe")]})]})]}),i.jsxs(ms.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex flex-col gap-3 mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx(fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[#E0D8C8]/60"}),i.jsx(at,{placeholder:e("pipesPage.searchPlaceholder"),value:o,onChange:Z=>l(Z.target.value),className:`pl-10 ${kn.input}`,"aria-label":e("pipes.search")})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-2 sm:gap-3",children:[i.jsxs(pn,{value:c||A5,onValueChange:Z=>u(Z===A5?"":Z),children:[i.jsx(hn,{className:kn.input,"aria-label":e("pipes.shape"),children:i.jsx(gn,{placeholder:e("pipes.allShapes")})}),i.jsxs(fn,{children:[i.jsx(ot,{value:A5,children:e("pipes.allShapes")}),Ybe.map(Z=>i.jsx(ot,{value:Z,children:Z},Z))]})]}),i.jsxs(pn,{value:d||k5,onValueChange:Z=>f(Z===k5?"":Z),children:[i.jsx(hn,{className:kn.input,"aria-label":e("pipes.material"),children:i.jsx(gn,{placeholder:e("pipes.allMaterials")})}),i.jsxs(fn,{children:[i.jsx(ot,{value:k5,children:e("pipes.allMaterials")}),Qbe.map(Z=>i.jsx(ot,{value:Z,children:Z},Z))]})]}),i.jsxs(pn,{value:y,onValueChange:b,children:[i.jsx(hn,{className:kn.input,"aria-label":e("pipesPage.sortBy","Sort by"),children:i.jsx(gn,{placeholder:e("pipesPage.sortBy","Sort by")})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"date",children:e("pipesPage.newestFirst")}),i.jsx(ot,{value:"favorites",children:e("pipesPage.favoritesFirst")}),i.jsx(ot,{value:"maker",children:e("pipesPage.byMaker")}),i.jsx(ot,{value:"name",children:e("pipesPage.byName")})]})]}),i.jsxs("div",{className:`flex border rounded-lg w-full sm:w-fit justify-center sm:justify-start ${kn.card}`,role:"group","aria-label":e("pipesPage.viewMode","View mode"),children:[i.jsx(ye,{variant:m==="grid"?"secondary":"ghost",size:"icon",onClick:()=>{g("grid"),localStorage.setItem("pipesViewMode","grid")},className:`rounded-r-none flex-1 sm:flex-none ${m==="grid"?kn.buttonPrimary:`${kn.textSubtle} hover:bg-[#2C3E55]/50`}`,"aria-label":e("pipes.gridView"),"aria-pressed":m==="grid",children:i.jsx(R4,{className:"w-4 h-4"})}),i.jsx(ye,{variant:m==="list"?"secondary":"ghost",size:"icon",onClick:()=>{g("list"),localStorage.setItem("pipesViewMode","list")},className:`rounded-l-none flex-1 sm:flex-none ${m==="list"?kn.buttonPrimary:`${kn.textSubtle} hover:bg-[#2C3E55]/50`}`,"aria-label":e("pipes.listView"),"aria-pressed":m==="list",children:i.jsx(xq,{className:"w-4 h-4"})})]})]})]}),L?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4].map(Z=>i.jsx("div",{className:"aspect-[4/5] bg-stone-200 rounded-xl animate-pulse"},Z))}):G.length===0?i.jsx(pG,{icon:wh,title:P.length===0?e("pipesPage.startCollection","Start Your Collection"):e("pipesPage.noPipesFound","No Pipes Found"),description:P.length===0?e("pipesPage.startCollectionDesc","Begin your pipe journey by adding your first piece. Track details, photos, and smoking notes all in one place."):o?e("pipesPage.noMatchSearch",`No pipes match "${o}". Try adjusting your search or filters.`):e("pipesPage.noMatchFilters","No pipes match your current filters. Try adjusting your selections."),actionLabel:P.length===0?e("pipesPage.addFirstPipe","Add Your First Pipe"):null,onAction:P.length===0?()=>r(!0):null,secondaryActionLabel:P.length===0?e("pipesPage.quickSearchAdd"):o||c||d?e("pipesPage.clearFilters"):null,onSecondaryAction:P.length===0?()=>v(!0):()=>{l(""),u(""),f("")}}):i.jsx(ms.div,{className:m==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"flex flex-col gap-4",layout:!0,children:i.jsx(l0,{children:G.map(Z=>i.jsx(ms.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:i.jsx("a",{href:xt(`PipeDetail?id=${encodeURIComponent(Z.id)}`),children:m==="grid"?i.jsx(zye,{pipe:Z,onClick:()=>{},onToggleFavorite:M}):i.jsx(Uye,{pipe:Z,onClick:()=>{},onToggleFavorite:M})})},Z.id))})}),i.jsx(jm,{open:n,onOpenChange:r,children:i.jsxs(_h,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[i.jsx(Sh,{className:"mb-6",children:i.jsx(Ch,{children:e(s?"pipesPage.editPipe":"pipesPage.addNewPipe")})}),i.jsx(oG,{pipe:s,onSave:q,onCancel:()=>{r(!1),a(null)},isLoading:O.isPending||R.isPending})]})}),i.jsx(Vye,{open:x,onOpenChange:v,onAdd:U})]})})}function FG(){return i.jsxs("div",{className:"mx-auto max-w-4xl px-5 py-10 text-[#f3e7d3]",children:[i.jsx("h1",{className:"text-4xl font-semibold tracking-tight text-white",children:"Privacy Policy"}),i.jsx("p",{className:"mt-2 text-sm text-[#cdbfae]",children:"Last updated: January 2026"}),i.jsx("p",{className:"mt-6 leading-relaxed",children:'This Privacy Policy explains how PipeKeeper ("we," "us") collects, uses, and shares information when you use the PipeKeeper application and related services (the "Service").'}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"1. Information We Collect"}),i.jsxs("ul",{className:"mt-3 list-disc space-y-2 pl-6",children:[i.jsxs("li",{children:[i.jsx("strong",{className:"text-white",children:"Account information:"})," such as email address and basic profile details required to operate your account."]}),i.jsxs("li",{children:[i.jsx("strong",{className:"text-white",children:"Collection data you provide:"})," pipe and cellar inventory details, personal notes, photos you upload, and historical records associated with your collection."]}),i.jsxs("li",{children:[i.jsx("strong",{className:"text-white",children:"Device and usage data:"})," limited analytics or diagnostic information (such as crash logs) used to maintain and improve the Service."]})]}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"2. User-Generated Content and Moderation"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:'PipeKeeper allows users to create, upload, and manage content such as notes, descriptions, images, and collection data ("User-Generated Content").'}),i.jsxs("p",{className:"mt-3 leading-relaxed",children:["PipeKeeper does ",i.jsx("strong",{className:"text-white",children:"not permit objectionable, abusive, or harmful content"}),". We reserve the right to review, moderate, restrict, remove, or delete User-Generated Content or user accounts that violate our Terms of Service, applicable laws, or community standards."]}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"Users may report objectionable content or abusive behavior by contacting PipeKeeper support. Reports are reviewed and handled in accordance with our moderation policies."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"3. Payments and Billing Information"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"PipeKeeper does not store or process payment card details."}),i.jsxs("ul",{className:"mt-3 list-disc space-y-2 pl-6",children:[i.jsxs("li",{children:[i.jsx("strong",{className:"text-white",children:"iOS:"})," Subscriptions are processed by Apple through the App Store's In-App Purchase system."]}),i.jsxs("li",{children:[i.jsx("strong",{className:"text-white",children:"Web and Android:"})," Subscriptions are processed securely by third-party payment providers."]})]}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"PipeKeeper stores only limited identifiers required to manage subscription status and access."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"4. How We Use Your Information"}),i.jsxs("ul",{className:"mt-3 list-disc space-y-2 pl-6",children:[i.jsx("li",{children:"Operate and maintain the Service"}),i.jsx("li",{children:"Display your collection and journal data to you"}),i.jsx("li",{children:"Provide Premium features and subscription access"}),i.jsx("li",{children:"Improve functionality, performance, and reliability"}),i.jsx("li",{children:"Enforce our Terms of Service and community standards"}),i.jsx("li",{children:"Respond to support requests and abuse reports"})]}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"PipeKeeper does not sell personal data."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"5. How We Share Information"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"We may share information only in limited circumstances, including:"}),i.jsxs("ul",{className:"mt-3 list-disc space-y-2 pl-6",children:[i.jsxs("li",{children:[i.jsx("strong",{className:"text-white",children:"Service providers:"})," vendors that support hosting, analytics, or payment processing."]}),i.jsxs("li",{children:[i.jsx("strong",{className:"text-white",children:"Legal and safety:"})," when required to comply with law or protect rights, safety, or security."]}),i.jsxs("li",{children:[i.jsx("strong",{className:"text-white",children:"Business changes:"})," in the event of a merger, acquisition, or asset sale."]})]}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"6. Data Retention and Account Termination"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"You may delete your account at any time. Upon deletion, personal data and User-Generated Content will be removed or anonymized in accordance with applicable law, except where retention is required for legal or security purposes."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"7. Security"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"We use reasonable safeguards designed to protect information, but no system is completely secure. You are responsible for maintaining the security of your account credentials."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"8. Your Choices"}),i.jsxs("ul",{className:"mt-3 list-disc space-y-2 pl-6",children:[i.jsx("li",{children:"Access and update your account information within the app"}),i.jsx("li",{children:"Request deletion of your account and associated data via support, subject to applicable requirements"})]}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"9. Children"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"The Service is intended for adult users only and is not directed to children. Do not use the Service if you are under the age required by law."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"10. Changes to This Policy"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"We may update this Privacy Policy from time to time. If changes are material, we will take reasonable steps to notify users, such as by posting within the Service."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"11. Contact and Reporting"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"If you have questions about this Privacy Policy, wish to report objectionable content, or need assistance with your account, please contact PipeKeeper support."}),i.jsxs("p",{className:"mt-10 text-sm text-[#cdbfae]",children:["Related documents:"," ",i.jsx("a",{className:"underline text-[#f3e7d3] hover:text-white",href:"/terms",children:"Terms of Service"})," ","·"," ",i.jsx("a",{className:"underline text-[#f3e7d3] hover:text-white",href:"/faq",children:"FAQ"})]})]})}function BG({isOpen:e,onClose:n,user:r}){const{t:s}=$t(),[a,o]=C.useState(null),[l,c]=C.useState(!0),[u,d]=C.useState("premium"),[f,m]=C.useState("monthly"),[g,x]=C.useState(""),[v,y]=C.useState(""),[b,N]=C.useState(!1),[j,S]=C.useState(!1);C.useEffect(()=>{e&&A()},[e]);const A=async()=>{try{c(!0),o({supportEmail:"admin@pipekeeperapp.com"})}catch(O){console.error("[SubscriptionBackupModeModal] Failed to load config:",O),o(null)}finally{c(!1)}},P=(O,R)=>({premium_monthly:"https://buy.stripe.com/6oU5kD6txgpV5WD6Zjgbm03",premium_annual:"https://buy.stripe.com/fZudR94lpa1x0Cj4Rbgbm04",pro_monthly:"https://buy.stripe.com/dRm14n2dhgpV5WD97rgbm01",pro_annual:"https://buy.stripe.com/bJefZh4lp1v198P6Zjgbm02"})[`${O}_${R}`]||"",L=async()=>{if(!(r!=null&&r.email)){Ve.error(s("subscriptionBackup.unableToIdentify","Unable to identify user email"));return}try{N(!0);const O=P(u,f);await Ce.entities.SubscriptionSupportRequest.create({user_email:r.email,requested_tier:u,requested_term:f,checkout_url_used:O||null,status:"paid_confirmed",user_message:v.trim()||null,payment_reference:g.trim()||null}),S(!0),Ve.success(s("subscriptionBackup.requestSent","Request sent! We'll unlock your account ASAP.")),setTimeout(()=>{S(!1),n()},2e3)}catch(O){console.error("[SubscriptionBackupModeModal] Request creation failed:",O),Ve.error(s("subscriptionBackup.failedToSend","Failed to send request. Please try again."))}finally{N(!1)}};return e?l?i.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4",children:i.jsx(Ee,{className:"max-w-md w-full bg-[#1A2B3A] border-[#A35C5C]/50",children:i.jsxs(Oe,{className:"pt-6 flex items-center justify-center gap-3",children:[i.jsx(Cn,{className:"w-5 h-5 text-[#A35C5C] animate-spin"}),i.jsx("span",{className:"text-[#E0D8C8]",children:s("subscriptionBackup.loadingOptions","Loading checkout options...")})]})})}):j?i.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4",children:i.jsx(Ee,{className:"max-w-md w-full bg-[#1A2B3A] border-green-500/50",children:i.jsx(Oe,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/20 flex items-center justify-center",children:i.jsx(Nr,{className:"w-6 h-6 text-green-500"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-[#E0D8C8] mb-2",children:s("subscriptionBackup.requestSentTitle","Request Sent!")}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:s("subscriptionBackup.reviewPayment","We'll review your payment proof and unlock your account ASAP.")})]})]})})})}):i.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4 overflow-y-auto",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:i.jsxs(Ee,{className:"max-w-2xl w-full bg-[#1A2B3A] border-[#A35C5C]/50 my-8 sm:my-0",children:[i.jsx(Ze,{className:"pt-6 sm:pt-8 px-4 sm:px-6",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(et,{className:"text-xl sm:text-2xl text-[#E0D8C8]",children:s("subscriptionBackup.title","Subscription Backup Mode")}),i.jsx("p",{className:"text-xs sm:text-sm text-[#E0D8C8]/70 mt-2",children:s("subscriptionBackup.description","Subscription management is temporarily unavailable. Use direct checkout links or request manual unlock.")})]}),i.jsx("button",{onClick:n,className:"text-[#E0D8C8]/50 hover:text-[#E0D8C8] transition-colors flex-shrink-0 mt-1",children:"✕"})]})}),i.jsxs(Oe,{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold text-[#E0D8C8] mb-4 flex items-center gap-2",children:[i.jsx(FP,{className:"w-4 h-4"}),s("subscriptionBackup.newSubscription","New Subscription? Use Direct Checkout")]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx("a",{href:P("premium","monthly"),target:"_blank",rel:"noopener noreferrer",className:"block",children:i.jsx(ye,{variant:"outline",className:"border-[#A35C5C]/30 text-[#E0D8C8] hover:bg-[#A35C5C]/20 h-auto py-3 text-center w-full",children:i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx("span",{className:"font-semibold",children:s("subscriptionBackup.premiumMonthly","Premium Monthly")}),i.jsx("span",{className:"text-xs text-[#E0D8C8]/60",children:s("subscriptionBackup.premiumMonthlyPrice","$1.99/mo")})]})})}),i.jsx("a",{href:P("premium","annual"),target:"_blank",rel:"noopener noreferrer",className:"block",children:i.jsx(ye,{variant:"outline",className:"border-[#A35C5C]/30 text-[#E0D8C8] hover:bg-[#A35C5C]/20 h-auto py-3 text-center w-full",children:i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx("span",{className:"font-semibold",children:s("subscriptionBackup.premiumAnnual","Premium Annual")}),i.jsx("span",{className:"text-xs text-[#E0D8C8]/60",children:s("subscriptionBackup.premiumAnnualPrice","$19.99/yr")})]})})}),i.jsx("a",{href:P("pro","monthly"),target:"_blank",rel:"noopener noreferrer",className:"block",children:i.jsx(ye,{variant:"outline",className:"border-[#A35C5C]/30 text-[#E0D8C8] hover:bg-[#A35C5C]/20 h-auto py-3 text-center w-full",children:i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx("span",{className:"font-semibold",children:s("subscriptionBackup.proMonthly","Pro Monthly")}),i.jsx("span",{className:"text-xs text-[#E0D8C8]/60",children:s("subscriptionBackup.proMonthlyPrice","$2.99/mo")})]})})}),i.jsx("a",{href:P("pro","annual"),target:"_blank",rel:"noopener noreferrer",className:"block",children:i.jsx(ye,{variant:"outline",className:"border-[#A35C5C]/30 text-[#E0D8C8] hover:bg-[#A35C5C]/20 h-auto py-3 text-center w-full",children:i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx("span",{className:"font-semibold",children:s("subscriptionBackup.proAnnual","Pro Annual")}),i.jsx("span",{className:"text-xs text-[#E0D8C8]/60",children:s("subscriptionBackup.proAnnualPrice","$29.99/yr")})]})})})]})]}),i.jsxs("div",{className:"border-t border-[#A35C5C]/20 pt-6",children:[i.jsxs("h3",{className:"font-semibold text-[#E0D8C8] mb-4 flex items-center gap-2",children:[i.jsx(vn,{className:"w-4 h-4"}),s("subscriptionBackup.alreadyPaid","Already Paid? Request Manual Unlock")]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-[#E0D8C8] mb-2",children:s("subscriptionSupport.subscriptionTier","Subscription Tier")}),i.jsxs(pn,{value:u,onValueChange:d,children:[i.jsx(hn,{className:"bg-[#243548] border-[#A35C5C]/30 text-[#E0D8C8]",children:i.jsx(gn,{})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"premium",children:s("subscriptionSupport.premium","Premium")}),i.jsx(ot,{value:"pro",children:s("subscriptionSupport.pro","Pro")})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-[#E0D8C8] mb-2",children:s("subscriptionBackup.billingTerm","Billing Term")}),i.jsxs(pn,{value:f,onValueChange:m,children:[i.jsx(hn,{className:"bg-[#243548] border-[#A35C5C]/30 text-[#E0D8C8]",children:i.jsx(gn,{})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"monthly",children:s("subscriptionBackup.monthly","Monthly")}),i.jsx(ot,{value:"annual",children:s("subscriptionBackup.annual","Annual")})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-[#E0D8C8] mb-2",children:s("subscriptionBackup.paymentProof","Payment Proof (Optional)")}),i.jsx(at,{placeholder:s("subscriptionBackup.paymentProofPlaceholder","Receipt email, invoice #, Stripe payment ID, or last 4 digits of card"),value:g,onChange:O=>x(O.target.value),className:"bg-[#243548] border-[#A35C5C]/30 text-[#E0D8C8] placeholder:text-[#E0D8C8]/40"}),i.jsx("p",{className:"text-xs text-[#E0D8C8]/50 mt-1",children:s("subscriptionBackup.helpsVerify","Helps us verify your payment quickly")})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-[#E0D8C8] mb-2",children:s("subscriptionBackup.message","Message (Optional)")}),i.jsx(Ui,{placeholder:s("subscriptionBackup.messagePlaceholder","Tell us about your situation or payment details..."),value:v,onChange:O=>y(O.target.value),className:"bg-[#243548] border-[#A35C5C]/30 text-[#E0D8C8] placeholder:text-[#E0D8C8]/40 min-h-20"})]}),i.jsx(ye,{onClick:L,disabled:b,className:"w-full bg-[#A35C5C] hover:bg-[#8F4E4E] text-[#F3EBDD]",children:b?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),s("subscriptionBackup.sending","Sending...")]}):s("subscriptionBackup.requestUnlock","Request Unlock")})]})]}),i.jsx("div",{className:"bg-[#243548]/50 border border-[#A35C5C]/20 rounded-lg p-4 text-sm text-[#E0D8C8]/70",children:i.jsxs("p",{children:[s("subscriptionBackup.needHelp","Need help? Contact")," ",i.jsx("a",{href:`mailto:${(a==null?void 0:a.supportEmail)||"admin@pipekeeperapp.com"}`,className:"text-[#A35C5C] hover:underline font-medium",children:(a==null?void 0:a.supportEmail)||"admin@pipekeeperapp.com"})]})})]})]})}):null}const Xbe=e=>String(e||"").trim().toLowerCase(),Jbe=["Virginia","Virginia/Perique","English","Balkan","Aromatic","Burley","Virginia/Burley","Latakia Blend","Oriental/Turkish","Navy Flake","Dark Fired","Cavendish"],Zbe=["Billiard","Bulldog","Dublin","Apple","Author","Bent","Canadian","Churchwarden","Freehand","Lovat","Poker","Prince","Rhodesian","Zulu","Calabash"];function e1e(e=[]){if(!Array.isArray(e)||e.length===0)return null;const n=e.map(r=>{const s=Date.parse(r.updated_at||r.updatedAt||"")||0,a=Date.parse(r.created_at||r.createdAt||"")||0,o=r.display_name?1:0,l=r.tos_accepted_at?1:0,c=r.avatar_url?1:0,u=l*10+o*5+c*2+(s||a)/1e12;return{r,score:u}});return n.sort((r,s)=>s.score-r.score),n[0].r}function $G(){const{t:e}=$t(),n=co(),r=On(),{user:s,provider:a,subscription:o,isLoading:l,planLabel:c,hasPaid:u,hasPro:d,isTrial:f}=Kr(),m=C.useMemo(()=>Xbe(s==null?void 0:s.email),[s==null?void 0:s.email]),g=(s==null?void 0:s.auth_user_id)||(s==null?void 0:s.id)||null,{data:x,isLoading:v}=Dt({queryKey:["user-profile",g,m],queryFn:async()=>{if(!g&&!m)return null;try{const D=await Ce.entities.UserProfile.filter({user_email:m});return e1e(D)||null}catch(D){return console.warn("[Profile] Could not load UserProfile:",D),null}},enabled:!!(g||m),staleTime:3e4});C.useEffect(()=>{},[x,a]);const[y,b]=C.useState(!1),[N,j]=C.useState(!1),[S,A]=C.useState({display_name:"",bio:"",avatar_url:"",city:"",state_province:"",country:"",postal_code:"",show_location:!1,is_public:!1,allow_comments:!0,enable_messaging:!1,allow_web_lookups:!0,privacy_hide_values:!1,privacy_hide_inventory:!1,privacy_hide_collection_counts:!1,show_social_media:!1,clenching_preference:"Sometimes",smoke_duration_preference:"No Preference",preferred_blend_types:[],pipe_size_preference:"No Preference",preferred_shapes:[],strength_preference:"No Preference",notes:""}),P=u;C.useEffect(()=>{x&&A(D=>({...D,display_name:x.display_name||"",bio:x.bio||"",avatar_url:x.avatar_url||"",city:x.city||"",state_province:x.state_province||"",country:x.country||"",postal_code:x.postal_code||"",show_location:!!x.show_location,is_public:!!x.is_public,allow_comments:x.allow_comments!==void 0?!!x.allow_comments:!0,enable_messaging:!!x.enable_messaging,allow_web_lookups:x.allow_web_lookups!==!1,privacy_hide_values:!!x.privacy_hide_values,privacy_hide_inventory:!!x.privacy_hide_inventory,privacy_hide_collection_counts:!!x.privacy_hide_collection_counts,show_social_media:!!x.show_social_media,clenching_preference:x.clenching_preference||"Sometimes",smoke_duration_preference:x.smoke_duration_preference||"No Preference",preferred_blend_types:Array.isArray(x.preferred_blend_types)?x.preferred_blend_types:[],pipe_size_preference:x.pipe_size_preference||"No Preference",preferred_shapes:Array.isArray(x.preferred_shapes)?x.preferred_shapes:[],strength_preference:x.strength_preference||"No Preference",notes:x.notes||""}))},[x]);const L=rn({mutationFn:async()=>{if(!g&&!m)throw new Error("Missing identity");const D={...S,user_id:g||void 0,user_email:m||void 0};return x!=null&&x.id?xr("UserProfile",x.id,D,m):Ce.entities.UserProfile.create(D)},onSuccess:async()=>{Ve.success(e("notifications.saved")),await r.invalidateQueries({queryKey:["user-profile",g,m]}),await r.invalidateQueries({queryKey:["current-user"]})},onError:D=>{console.error("[Profile] save failed:",D),Ve.error(e("profileExtended.couldNotSave","Could not save profile. Please try again."))}});async function O(D){var G,Y;const M=(Y=(G=D==null?void 0:D.target)==null?void 0:G.files)==null?void 0:Y[0];if(M){j(!0);try{const{file_url:Z}=await Ce.integrations.Core.UploadFile({file:M});A(X=>({...X,avatar_url:Z})),Ve.success(e("profile.avatarUploadedSuccessfully"))}catch(Z){console.error("[Profile] avatar upload error:",Z),Ve.error(e("profile.failedToUploadImage"))}finally{j(!1),D.target.value=""}}}function R(D){A(M=>{const G=M.preferred_blend_types.includes(D);return{...M,preferred_blend_types:G?M.preferred_blend_types.filter(Y=>Y!==D):[...M.preferred_blend_types,D]}})}function q(D){A(M=>{const G=M.preferred_shapes.includes(D);return{...M,preferred_shapes:G?M.preferred_shapes.filter(Y=>Y!==D):[...M.preferred_shapes,D]}})}async function U(){try{await Ce.auth.logout()}finally{window.location.href="/"}}return l||v?i.jsx("div",{className:`min-h-screen ${kn.pageBg} flex items-center justify-center`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-4xl mb-4",children:"⚙️"}),i.jsx("p",{className:kn.textMuted,children:e("common.loading")})]})}):i.jsx("div",{className:`min-h-screen ${kn.pageBg}`,children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[i.jsx(Ee,{className:"border-amber-200 bg-gradient-to-br from-amber-50 to-white",children:i.jsx(Oe,{className:"p-6",children:i.jsxs("div",{className:"flex items-start justify-between gap-4 flex-col md:flex-row",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center",children:i.jsx(yh,{className:"w-6 h-6 text-white"})}),i.jsx("div",{children:u?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"font-semibold text-amber-900",children:e(d?"profile.proActive":"profile.premiumActive")}),i.jsx("div",{className:"text-sm text-amber-700",children:e("profile.fullAccess")})]}):f?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"font-semibold text-amber-900",children:e("profile.freeTrialActive")}),i.jsx("div",{className:"text-sm text-amber-700",children:e("profile.sevenDaysFree")})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"font-semibold text-stone-800",children:e("profile.freeAccount")}),i.jsx("div",{className:"text-sm text-stone-600",children:e("profile.limitedFeatures")})]})})]}),i.jsx("div",{className:"w-full md:w-auto flex flex-col gap-2",children:mh()?i.jsxs("div",{className:"text-sm text-amber-800/80 bg-amber-50 p-3 rounded-lg",children:[e("profile.premiumSubscriptionWebOnly")," ",i.jsx("a",{className:"underline font-medium",href:"https://pipekeeper.app/Subscription",target:"_blank",rel:"noreferrer",children:"pipekeeper.app"}),"."]}):i.jsxs(i.Fragment,{children:[(o==null?void 0:o.status)==="active"||(o==null?void 0:o.status)==="trialing"?i.jsxs(ye,{className:"bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800",onClick:()=>{a==="stripe"?window.location.href="https://billing.stripe.com/p/login/28EbJ1f03b5B2Krabvgbm00":a==="apple"?window.location.href="https://apps.apple.com/account/subscriptions":n(xt("Subscription"))},children:[e("profile.manageSubscription"),i.jsx(IP,{className:"w-4 h-4 ml-2"})]}):null,vA()&&!P&&i.jsxs(ye,{onClick:()=>n(xt("Subscription")),className:"bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800",children:[e("profile.upgrade"),i.jsx(IP,{className:"w-4 h-4 ml-2"})]}),!vA()&&i.jsx("div",{className:"text-xs text-amber-800/80 text-right max-w-[260px]",children:Hoe()})]})})]})})}),i.jsxs(Ee,{className:"border-violet-200 bg-gradient-to-br from-violet-50 to-white",children:[i.jsx(Ze,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-violet-500 to-violet-600 flex items-center justify-center",children:i.jsx(hm,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(et,{className:"text-2xl text-violet-900",children:e("profile.smokingProfile")}),i.jsx(Tl,{className:"text-stone-700",children:e("profile.personalizeAIRecommendations")})]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs(ye,{variant:"outline",onClick:U,className:"text-stone-700 hover:text-stone-900",children:[i.jsx(Oee,{className:"w-4 h-4 mr-2"}),e("profile.logout")]})})]})}),i.jsxs(Oe,{className:"space-y-6",children:[i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsx(Ge,{className:d?"bg-purple-600 text-white border-0":"bg-[#A35C5C] text-white border-0",children:c.toUpperCase()}),a==="stripe"&&i.jsx(Ge,{variant:"secondary",className:"bg-stone-200 text-stone-800 border-stone-300",children:e("profileExtended.providerStripe","Provider: Stripe")}),a==="apple"&&i.jsx(Ge,{variant:"secondary",className:"bg-stone-200 text-stone-800 border-stone-300",children:e("profileExtended.providerApple","Provider: Apple")}),o!=null&&o.status?i.jsxs(Ge,{variant:"secondary",className:"bg-stone-200 text-stone-800 border-stone-300",children:[e("profileExtended.statusLabel","Status"),": ",o.status]}):null]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-stone-700 font-medium",children:e("profileExtended.profilePicture","Profile picture")}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-amber-200 to-amber-300 overflow-hidden flex items-center justify-center",children:S.avatar_url?i.jsx("img",{src:S.avatar_url,alt:e("profileExtended.avatarAlt","Avatar"),className:"w-full h-full object-cover"}):i.jsx(hm,{className:"w-10 h-10 text-amber-700"})}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("label",{className:"inline-flex items-center",children:[i.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"hidden",disabled:N}),i.jsxs(ye,{type:"button",variant:"outline",disabled:N,className:"text-stone-700 hover:text-stone-900",children:[i.jsx(Wx,{className:"w-4 h-4 mr-2"}),N?e("profileExtended.uploading","Uploading…"):e("common.upload","Upload")]})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(tt,{className:"text-stone-700 font-medium",children:e("profileExtended.displayName","Display name")}),i.jsx(at,{value:S.display_name,onChange:D=>A(M=>({...M,display_name:D.target.value}))})]}),i.jsxs("div",{children:[i.jsx(tt,{className:"text-stone-700 font-medium",children:e("common.email","Email")}),i.jsx(at,{value:(s==null?void 0:s.email)||"",disabled:!0,className:"bg-stone-50 text-stone-500 cursor-not-allowed"})]})]}),i.jsxs("div",{children:[i.jsx(tt,{className:"text-stone-700 font-medium",children:e("profileExtended.bio","Bio")}),i.jsx(Ui,{value:S.bio,onChange:D=>A(M=>({...M,bio:D.target.value})),rows:4})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(tt,{className:"text-stone-700 font-medium",children:e("profileExtended.location","Location")}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-stone-600",children:e("profileExtended.showOnProfile","Show on profile")}),i.jsx(ua,{checked:S.show_location,onCheckedChange:D=>A(M=>({...M,show_location:!!D})),className:"data-[state=checked]:bg-[#A35C5C]"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(at,{placeholder:e("profileExtended.cityPlaceholder","City"),value:S.city,onChange:D=>A(M=>({...M,city:D.target.value}))}),i.jsx(at,{placeholder:e("profileExtended.stateProvincePlaceholder","State/Province"),value:S.state_province,onChange:D=>A(M=>({...M,state_province:D.target.value}))}),i.jsx(at,{placeholder:e("profileExtended.countryPlaceholder","Country"),value:S.country,onChange:D=>A(M=>({...M,country:D.target.value}))}),i.jsx(at,{placeholder:e("profileExtended.postalCodePlaceholder","Postal code"),value:S.postal_code,onChange:D=>A(M=>({...M,postal_code:D.target.value}))})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(tt,{className:"text-stone-700 font-medium",children:e("profileExtended.privacy","Privacy")}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-stone-700",children:e("profileExtended.hideValues","Hide values")}),i.jsx(ua,{checked:S.privacy_hide_values,onCheckedChange:D=>A(M=>({...M,privacy_hide_values:!!D})),className:"data-[state=checked]:bg-[#A35C5C]"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-stone-700",children:e("profileExtended.hideInventory","Hide inventory")}),i.jsx(ua,{checked:S.privacy_hide_inventory,onCheckedChange:D=>A(M=>({...M,privacy_hide_inventory:!!D})),className:"data-[state=checked]:bg-[#A35C5C]"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-stone-700",children:e("profileExtended.hideCollectionCounts","Hide collection counts")}),i.jsx(ua,{checked:S.privacy_hide_collection_counts,onCheckedChange:D=>A(M=>({...M,privacy_hide_collection_counts:!!D})),className:"data-[state=checked]:bg-[#A35C5C]"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-stone-700",children:e("profile.enableMessaging")}),i.jsx("div",{className:"text-xs text-stone-600",children:e("profile.enableMessagingDesc")})]}),i.jsx(ua,{checked:S.enable_messaging,onCheckedChange:D=>A(M=>({...M,enable_messaging:!!D})),className:"data-[state=checked]:bg-[#A35C5C]"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(tt,{className:"text-stone-700 font-medium",children:e("profileExtended.preferredBlendTypes","Preferred blend types")}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Jbe.map(D=>{const M=S.preferred_blend_types.includes(D);return i.jsx(Ge,{onClick:()=>R(D),className:`cursor-pointer border ${M?"bg-violet-600 text-white border-violet-600":"bg-white text-stone-700 border-stone-200"}`,children:D},D)})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(tt,{className:"text-stone-700 font-medium",children:e("profileExtended.preferredPipeShapes","Preferred pipe shapes")}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Zbe.map(D=>{const M=S.preferred_shapes.includes(D);return i.jsx(Ge,{onClick:()=>q(D),className:`cursor-pointer border ${M?"bg-violet-600 text-white border-violet-600":"bg-white text-stone-700 border-stone-200"}`,children:D},D)})})]}),i.jsxs("div",{children:[i.jsx(tt,{className:"text-stone-700 font-medium",children:e("common.notes","Notes")}),i.jsx(Ui,{value:S.notes,onChange:D=>A(M=>({...M,notes:D.target.value})),rows:4})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-stone-800",children:e("profileExtended.publicCommunityProfile","Public community profile")}),i.jsx("div",{className:"text-sm text-stone-600",children:e("profileExtended.allowOthersToView","Allow others to view your profile in the community.")})]}),i.jsx(ua,{checked:S.is_public,onCheckedChange:D=>A(M=>({...M,is_public:!!D})),className:"data-[state=checked]:bg-[#A35C5C]"})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[i.jsx(ye,{onClick:()=>L.mutate(),disabled:L.isPending,className:"bg-[#A35C5C] hover:bg-[#8C4A4A]",children:L.isPending?e("profileExtended.saving","Saving…"):e("common.save","Save")}),s!=null&&s.email?i.jsx(ye,{variant:"outline",onClick:async()=>{try{await L.mutateAsync(),n(xt(`PublicProfile?email=${encodeURIComponent(s.email)}&preview=true`))}catch{}},className:"text-stone-700 border-stone-300 hover:bg-stone-50 hover:text-stone-900",children:e("profileExtended.previewPublicProfile","Preview public profile")}):null]})]})]}),i.jsx(BG,{isOpen:y,onClose:()=>b(!1)})]})})}const X6="https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/694956e18d119cc497192525/dd0287dd6_pipe_no_bg.png";function qG(){var q,U,D;const{t:e}=$t(),n=new URLSearchParams(window.location.search),r=n.get("email"),s=n.get("preview")==="true",a=On(),o=co(),[l,c]=ve.useState(null),[u,d]=C.useState(!1),[f,m]=C.useState(!1),[g,x]=C.useState(""),{data:v}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me(),staleTime:5e3,retry:1}),{data:y}=Dt({queryKey:["profile-owner-user",r],queryFn:async()=>{try{const M=await Ce.entities.User.filter({email:r});return Array.isArray(M)?M[0]:null}catch(M){return console.error("Profile owner load error:",M),null}},enabled:!!r,retry:1}),{data:b}=Dt({queryKey:["public-profile",r],queryFn:async()=>{try{const M=await Ce.entities.UserProfile.filter({user_email:r});return Array.isArray(M)?M[0]:null}catch(M){return console.error("Profile load error:",M),null}},enabled:!!r,retry:1,staleTime:5e3}),{data:N}=Dt({queryKey:["my-profile",v==null?void 0:v.email],queryFn:async()=>{const M=await Ce.entities.UserProfile.filter({user_email:v==null?void 0:v.email});return(M==null?void 0:M[0])||null},enabled:!!(v!=null&&v.email),retry:1}),{data:j=[]}=Dt({queryKey:["public-pipes",r],queryFn:async()=>{try{const M=await Ce.entities.Pipe.filter({created_by:r});return Array.isArray(M)?M:[]}catch(M){return console.error("Public pipes load error:",M),[]}},enabled:!!r,retry:1,staleTime:5e3}),{data:S=[]}=Dt({queryKey:["public-blends",r],queryFn:async()=>{try{const M=await Ce.entities.TobaccoBlend.filter({created_by:r});return Array.isArray(M)?M:[]}catch(M){return console.error("Public blends load error:",M),[]}},enabled:!!r,retry:1,staleTime:5e3}),{data:A=[]}=Dt({queryKey:["public-logs",r],queryFn:async()=>{try{const M=await Ce.entities.SmokingLog.filter({created_by:r},"-date",20);return Array.isArray(M)?M:[]}catch(M){return console.error("Public logs load error:",M),[]}},enabled:!!r,retry:1,staleTime:5e3}),P=rn({mutationFn:M=>xr("UserProfile",M,{is_public:!0},v==null?void 0:v.email),onSuccess:()=>{vfe(a,r)}}),L=rn({mutationFn:M=>Ce.entities.AbuseReport.create(M),onSuccess:()=>{d(!1),x(""),Ve.success(e("publicProfile.reportSubmitted"))},onError:()=>Ve.error(e("publicProfile.couldNotSubmitReport"))}),O=rn({mutationFn:async()=>{if(!(N!=null&&N.id)||!r)return;const M=Array.isArray(N.blocked_users)?N.blocked_users:[],G=Array.from(new Set([...M,r]));await xr("UserProfile",N.id,{blocked_users:G},v==null?void 0:v.email)},onSuccess:()=>{m(!1),Ve.success(e("publicProfile.userBlocked")),o(xt("Community"))},onError:()=>Ve.error(e("publicProfile.couldNotBlockUser"))}),R=(v==null?void 0:v.email)===r;return b?!b.is_public&&!s?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42] flex items-center justify-center",children:i.jsx(Ee,{className:"bg-white/95 max-w-md",children:i.jsxs(Oe,{className:"p-8 text-center",children:[i.jsx("h2",{className:"text-xl font-semibold text-stone-800 mb-2",children:e("publicProfile.profileNotAvailableTitle")}),i.jsx("p",{className:"text-stone-600 mb-4",children:e("publicProfile.profileNotAvailableDesc")}),i.jsx("a",{href:xt("Community"),children:i.jsxs(ye,{variant:"outline",children:[i.jsx($i,{className:"w-4 h-4 mr-2"}),e("publicProfile.backToCommunity")]})})]})})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42]",children:[i.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s&&R?i.jsx("a",{href:xt("Profile"),children:i.jsxs(ye,{variant:"ghost",className:"mb-6 text-[#e8d5b7] hover:text-[#e8d5b7]/80",children:[i.jsx($i,{className:"w-4 h-4 mr-2"}),e("publicProfile.backToProfileSettings")]})}):i.jsx("a",{href:xt("Community"),children:i.jsxs(ye,{variant:"ghost",className:"mb-6 text-[#e8d5b7] hover:text-[#e8d5b7]/80",children:[i.jsx($i,{className:"w-4 h-4 mr-2"}),e("publicProfile.backToCommunity")]})}),s&&R&&i.jsx(Ee,{className:"bg-gradient-to-r from-amber-100 to-amber-50 border-amber-300 mb-6",children:i.jsx(Oe,{className:"p-6",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Yw,{className:"w-5 h-5 text-amber-700"}),i.jsx("h3",{className:"font-semibold text-amber-900",children:e("publicProfile.previewMode")})]}),i.jsx("p",{className:"text-sm text-amber-800 mb-3",children:e("publicProfile.previewDescription")}),i.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white/50 rounded-lg border border-amber-200",children:[i.jsx("div",{className:"text-amber-700 mt-0.5",children:i.jsx(oO,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1 text-sm",children:[i.jsx("p",{className:"font-medium text-amber-900 mb-1",children:e("publicProfile.whatWillBeShared")}),i.jsxs("ul",{className:"text-amber-800 space-y-1",children:[i.jsxs("li",{children:["• ",e("publicProfile.displayNameBioPhoto")]}),i.jsxs("li",{children:["• ",e("publicProfile.pipeCollectionWithPhotos")]}),i.jsxs("li",{children:["• ",e("publicProfile.tobaccoCellarWithBlends")]}),i.jsxs("li",{children:["• ",e("publicProfile.smokingSessionLogs")]}),b.allow_comments&&i.jsxs("li",{children:["• ",e("publicProfile.othersCanComment")]})]})]})]})]}),!b.is_public&&i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(ye,{onClick:()=>P.mutate(b.id),disabled:P.isPending,className:"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 whitespace-nowrap",children:P.isPending?e("publicProfile.makingPublic"):i.jsxs(i.Fragment,{children:[i.jsx(oO,{className:"w-4 h-4 mr-2"}),e("publicProfile.makeProfilePublic")]})}),i.jsx("a",{href:xt("Profile"),children:i.jsxs(ye,{variant:"outline",size:"sm",className:"w-full",children:[i.jsx(Wp,{className:"w-4 h-4 mr-2"}),e("publicProfile.editSettings")]})})]})]})})}),i.jsx(Ee,{className:"bg-white/95 mb-6",children:i.jsx(Oe,{className:"p-6",children:i.jsxs("div",{className:"flex items-start gap-6",children:[i.jsxs(_l,{className:"w-24 h-24 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>b.avatar_url&&c(b.avatar_url),children:[i.jsx(pc,{src:b.avatar_url}),i.jsx(Sl,{className:"bg-amber-200 text-amber-800 text-2xl",children:((q=b.display_name)==null?void 0:q[0])||((D=(U=b.user_email)==null?void 0:U[0])==null?void 0:D.toUpperCase())||"?"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[i.jsx("h1",{className:"text-2xl font-bold text-stone-800",children:b.display_name||e("publicProfile.anonymousUser")}),(y==null?void 0:y.isFoundingMember)&&i.jsxs(Ge,{className:"bg-gradient-to-r from-amber-500 to-amber-600 text-white border-0 flex items-center gap-1 text-xs",title:e("publicProfile.foundingMemberTitle"),children:[i.jsx(Qw,{className:"w-3 h-3 fill-current"}),e("publicProfile.foundingMember")]})]}),b.show_location&&(b.city||b.state_province||b.country)&&i.jsxs("p",{className:"text-sm text-stone-500 mb-2",children:["📍 ",[b.city,b.state_province,b.country].filter(Boolean).join(", ")]}),b.bio&&i.jsx("p",{className:"text-stone-600 mb-4",children:b.bio}),!b.privacy_hide_collection_counts&&i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-stone-600 mb-3",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("img",{src:X6,alt:"Pipes",className:"w-4 h-4 opacity-60"}),i.jsxs("span",{children:[j.length," ",e("publicProfile.pipes")]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Hp,{className:"w-4 h-4"}),i.jsxs("span",{children:[S.length," ",e("publicProfile.blends")]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(zx,{className:"w-4 h-4"}),i.jsxs("span",{children:[A.length," ",e("publicProfile.smokingSessions")]})]})]}),!R&&(v==null?void 0:v.email)&&i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs(ye,{variant:"outline",size:"sm",className:"border-rose-300 text-rose-700 hover:bg-rose-50",onClick:()=>d(!0),children:[i.jsx(gq,{className:"w-4 h-4 mr-2"}),e("publicProfile.report")]}),i.jsxs(ye,{variant:"outline",size:"sm",className:"border-stone-300 text-stone-700 hover:bg-stone-50",onClick:()=>m(!0),children:[i.jsx(lte,{className:"w-4 h-4 mr-2"}),e("publicProfile.block")]})]})]})]})})}),i.jsxs(Ec,{defaultValue:"pipes",className:"space-y-6",children:[i.jsxs(Tc,{className:"grid w-full grid-cols-3",children:[i.jsxs(En,{value:"pipes",children:[e("publicProfile.pipes")," (",j.length,")"]}),i.jsxs(En,{value:"tobacco",children:[e("nav.tobacco")," (",S.length,")"]}),i.jsxs(En,{value:"logs",children:[e("nav.sessions",{defaultValue:"Sessions"})," (",A.length,")"]})]}),i.jsxs(Tn,{value:"pipes",className:"space-y-4",children:[i.jsx("div",{className:"space-y-4",children:j.map(M=>{var G,Y;return i.jsx(Ee,{className:"bg-white/95 border-stone-200 hover:border-amber-400 transition-colors",children:i.jsxs(Oe,{className:"p-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"w-32 h-20 rounded-lg bg-gradient-to-br from-stone-100 to-stone-200 overflow-hidden flex items-center justify-center flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",onClick:Z=>{var X;(X=M.photos)!=null&&X[0]&&(Z.stopPropagation(),c(M.photos[0]))},children:(G=M.photos)!=null&&G[0]?i.jsx("img",{src:M.photos[0],alt:M.name,className:"w-full h-full object-cover"}):i.jsx(py,{shape:M.shape,className:"w-16 h-16"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-stone-800 mb-1",children:M.name}),M.maker&&i.jsx("p",{className:"text-sm text-stone-600 mb-2",children:M.maker}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[M.shape&&i.jsx(Ge,{variant:"outline",className:"text-xs",children:M.shape}),!b.privacy_hide_values&&M.estimated_value&&i.jsxs(Ge,{className:"bg-emerald-100 text-emerald-800 border-emerald-200 text-xs",children:["$",(+M.estimated_value).toFixed(2)]})]})]})]}),((Y=M.photos)==null?void 0:Y.length)>1&&i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:M.photos.map((Z,X)=>i.jsx("img",{src:Z,alt:`${M.name} ${X+1}`,className:"w-20 h-20 rounded-lg object-cover flex-shrink-0 border border-stone-200 cursor-pointer hover:opacity-80 transition-opacity",onClick:re=>{re.stopPropagation(),c(Z)}},X))})]}),b.allow_comments&&!s&&i.jsx("div",{className:"mt-3 pt-3 border-t",children:i.jsx(Ix,{entityType:"pipe",entityId:M.id,entityOwnerEmail:r})}),b.allow_comments&&s&&i.jsx("div",{className:"mt-3 pt-3 border-t",children:i.jsxs("p",{className:"text-xs text-stone-500 italic flex items-center gap-1",children:[i.jsx(jx,{className:"w-3 h-3"}),e("publicProfile.commentsEnabledWhenPublic")]})})]})},M.id)})}),j.length===0&&i.jsx(Ee,{className:"bg-white/95",children:i.jsxs(Oe,{className:"py-12 text-center text-stone-500",children:[i.jsx("img",{src:X6,alt:"No pipes",className:"w-16 h-16 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:e("publicProfile.noPipesInCollection")})]})})]}),i.jsxs(Tn,{value:"tobacco",className:"space-y-4",children:[i.jsx("div",{className:"space-y-4",children:S.map(M=>{var G;return i.jsx(Ee,{className:"bg-white/95 border-stone-200 hover:border-amber-400 transition-colors",children:i.jsxs(Oe,{className:"p-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"w-32 h-20 rounded-lg bg-gradient-to-br from-stone-100 to-stone-200 overflow-hidden flex items-center justify-center flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",onClick:Y=>{(M.logo||M.photo)&&(Y.stopPropagation(),c(M.logo||M.photo))},children:M.logo?i.jsx("img",{src:M.logo,alt:M.manufacturer,className:"w-16 h-16 object-contain"}):M.photo?i.jsx("img",{src:M.photo,alt:M.name,className:"w-full h-full object-cover"}):i.jsx(Hp,{className:"w-16 h-16 text-stone-400"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-stone-800 mb-1",children:M.name}),M.manufacturer&&i.jsx("p",{className:"text-sm text-stone-600 mb-2",children:M.manufacturer}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[M.blend_type&&i.jsx(Ge,{variant:"outline",className:"text-xs",children:M.blend_type}),M.strength&&i.jsx(Ge,{variant:"outline",className:"text-xs",children:M.strength}),!b.privacy_hide_inventory&&i.jsxs(i.Fragment,{children:[(M.tin_total_quantity_oz||0)>0&&i.jsxs(Ge,{className:"bg-blue-100 text-blue-800 border-blue-200 text-xs",children:[(+M.tin_total_quantity_oz).toFixed(2),"oz ",e("units.tinPlural")]}),(M.bulk_total_quantity_oz||0)>0&&i.jsxs(Ge,{className:"bg-amber-100 text-amber-800 border-amber-200 text-xs",children:[(+M.bulk_total_quantity_oz).toFixed(2),"oz bulk"]})]})]})]})]}),((G=M.photos)==null?void 0:G.length)>0&&i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:M.photos.map((Y,Z)=>i.jsx("img",{src:Y,alt:`${M.name} ${Z+1}`,className:"w-20 h-20 rounded-lg object-cover flex-shrink-0 border border-stone-200 cursor-pointer hover:opacity-80 transition-opacity",onClick:X=>{X.stopPropagation(),c(Y)}},Z))})]}),b.allow_comments&&!s&&i.jsx("div",{className:"mt-3 pt-3 border-t",children:i.jsx(Ix,{entityType:"blend",entityId:M.id,entityOwnerEmail:r})}),b.allow_comments&&s&&i.jsx("div",{className:"mt-3 pt-3 border-t",children:i.jsxs("p",{className:"text-xs text-stone-500 italic flex items-center gap-1",children:[i.jsx(jx,{className:"w-3 h-3"}),e("publicProfile.commentsEnabledWhenPublic")]})})]})},M.id)})}),S.length===0&&i.jsx(Ee,{className:"bg-white/95",children:i.jsxs(Oe,{className:"py-12 text-center text-stone-500",children:[i.jsx(Hp,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:e("publicProfile.noBlendsInCellar")})]})})]}),i.jsxs(Tn,{value:"logs",className:"space-y-4",children:[A.map(M=>i.jsx(Ee,{className:"bg-white/95 border-stone-200",children:i.jsxs(Oe,{className:"p-4",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-stone-800",children:M.pipe_name}),i.jsx("p",{className:"text-sm text-stone-600",children:M.blend_name})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs text-stone-500",children:new Date(M.date).toLocaleDateString()}),M.bowls_smoked&&i.jsxs(Ge,{variant:"outline",className:"text-xs mt-1 font-semibold text-stone-700",children:[M.bowls_smoked," ",M.bowls_smoked>1?e("publicProfile.bowls"):e("publicProfile.bowl")]})]})]}),M.notes&&i.jsx("p",{className:"text-sm text-stone-600 mb-3",children:M.notes}),b.allow_comments&&!s&&i.jsx("div",{className:"pt-3 border-t",children:i.jsx(Ix,{entityType:"log",entityId:M.id,entityOwnerEmail:r})}),b.allow_comments&&s&&i.jsx("div",{className:"pt-3 border-t",children:i.jsxs("p",{className:"text-xs text-stone-500 italic flex items-center gap-1",children:[i.jsx(jx,{className:"w-3 h-3"}),e("publicProfile.commentsEnabledWhenPublic")]})})]})},M.id)),A.length===0&&i.jsx(Ee,{className:"bg-white/95",children:i.jsxs(Oe,{className:"py-12 text-center text-stone-500",children:[i.jsx(zx,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:e("publicProfile.noSessionsLogged")})]})})]})]})]}),i.jsx(A3,{imageUrl:l,isOpen:!!l,onClose:()=>c(null),alt:"Profile image"}),i.jsx(Nm,{open:u,onOpenChange:d,children:i.jsxs(kh,{children:[i.jsxs(Eh,{children:[i.jsx(Oh,{children:e("publicProfile.reportUserTitle")}),i.jsx(Lh,{children:e("publicProfile.reportUserDescription")})]}),i.jsx(Ui,{value:g,onChange:M=>x(M.target.value),placeholder:e("publicProfile.reportPlaceholder"),className:"min-h-[120px]"}),i.jsxs(Th,{children:[i.jsx(Dh,{children:e("common.cancel")}),i.jsx(Rh,{disabled:!g.trim()||L.isPending,className:"bg-rose-600 hover:bg-rose-700",onClick:()=>L.mutate({reporter_email:v==null?void 0:v.email,reported_user_email:r,context_type:"user_profile",reason:g.trim()}),children:e("publicProfile.submitReport")})]})]})}),i.jsx(Nm,{open:f,onOpenChange:m,children:i.jsxs(kh,{children:[i.jsxs(Eh,{children:[i.jsx(Oh,{children:e("publicProfile.blockUserTitle")}),i.jsx(Lh,{children:e("publicProfile.blockUserDescription")})]}),i.jsxs(Th,{children:[i.jsx(Dh,{children:e("common.cancel")}),i.jsx(Rh,{className:"bg-stone-800 hover:bg-stone-900",onClick:()=>O.mutate(),children:e("publicProfile.blockUser")})]})]})})]}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42] flex items-center justify-center",children:i.jsx(Ee,{className:"bg-white/95 max-w-md",children:i.jsxs(Oe,{className:"p-8 text-center",children:[i.jsx("h2",{className:"text-xl font-semibold text-stone-800 mb-2",children:e("publicProfile.profileNotFoundTitle")}),i.jsx("p",{className:"text-stone-600 mb-4",children:e("publicProfile.profileNotFoundDesc")}),i.jsx("a",{href:xt("Community"),children:i.jsxs(ye,{variant:"outline",children:[i.jsx($i,{className:"w-4 h-4 mr-2"}),e("publicProfile.backToCommunity")]})})]})})})}function zG(){const{t:e}=$t(),n=C.useMemo(()=>SE(),[]),{user:r,refetch:s}=Kr(),a=On(),[o,l]=C.useState(!1),[c,u]=C.useState(""),[d,f]=C.useState(""),[m,g]=C.useState("premium"),[x,v]=C.useState("monthly"),[y,b]=C.useState(!1),[N,j]=C.useState(null);C.useEffect(()=>n?(TA(),gV(D=>{const M=!!D.active;l(M),u((D==null?void 0:D.tier)||(D==null?void 0:D.productId)||""),M&&f(e("subscriptionFull.subActiveCheck","Subscription active ✅"))})):void 0,[n,e]),C.useEffect(()=>{n||new URLSearchParams(window.location.search).get("success")!=="1"||(async()=>{var D,M;try{await Ce.functions.invoke("syncSubscriptionForMe",{}),await s(),await a.invalidateQueries({queryKey:["current-user"]}),await a.invalidateQueries({queryKey:["subscription"]})}catch(G){(M=(D=import.meta)==null?void 0:D.env)!=null&&M.DEV&&console.warn("[SubscriptionFull] success sync failed:",G)}finally{window.history.replaceState({},document.title,xt("SubscriptionSuccess")),window.location.href=xt("SubscriptionSuccess")}})()},[n,s,a]),C.useEffect(()=>{if(n)return;const U=async()=>{try{await s(),await a.invalidateQueries({queryKey:["current-user"]})}catch(D){console.warn("[SubscriptionFull] Auto-sync on refocus failed:",D)}};return window.addEventListener("focus",U),()=>window.removeEventListener("focus",U)},[n,s,a]);const S={premium:{monthly:1.99,annual:19.99},pro:{monthly:2.99,annual:29.99}},A=[e("subscriptionFull.basicItemRecords","Basic item records"),e("subscriptionFull.notesAndPhotos","Notes and photos"),e("subscriptionFull.manualOrganization","Manual organization")],P={free:e("subscriptionFull.freeTierDesc","Core cataloging for pipes and cellar items."),premium:e("subscriptionFull.premiumTierDesc","Premium adds expanded insights, reports, and advanced organization tools for collectors who actively manage and grow their collections."),pro:e("subscriptionFull.proTierDesc","Pro is designed for collectors who want deep analytics and optional AI-assisted tools for advanced organization and analysis.")},L={premium:e("subscriptionFull.premiumTagline","For active collectors"),pro:e("subscriptionFull.proTagline","For advanced collectors")},O={premium:[e("subscriptionFull.collectionInsights","Collection insights and summaries"),e("subscriptionFull.reportsAndExports","Reports and exports"),e("subscriptionFull.advancedOrgTools","Advanced organization tools"),e("subscriptionFull.priorityAccess","Priority access to new features")],pro:[e("subscriptionFull.deepAnalytics","Deep collection analytics"),e("subscriptionFull.aiAssistedTools","AI-assisted organization tools"),e("subscriptionFull.powerUserFeatures","Power-user features")]},R=async(U,D)=>{var M;if(n){Px(U||m||"premium")||CE();return}f("");try{const G=await Ce.functions.invoke("createCheckoutSession",{tier:U||m,interval:D||x});(M=G.data)!=null&&M.url?window.location.href=G.data.url:f(e("subscriptionFull.checkoutError","Error starting checkout. Please try again."))}catch(G){console.error("[SubscriptionFull] Checkout error:",G),f(e("subscriptionFull.checkoutError","Error starting checkout. Please try again."))}},q=async()=>{var U;if(f(""),n){O1();return}try{const D=await Ce.functions.invoke("createCustomerPortalSession",{});(U=D.data)!=null&&U.url?window.location.href=D.data.url:f(e("subscriptionFull.manageError","Error: Could not open subscription management"))}catch{f(e("subscriptionFull.manageError","Error: Could not open subscription management"))}};return n?i.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsx("h1",{className:"text-2xl font-semibold text-[#e8d5b7]",children:e("subscriptionFull.pipekeeperSubs","PipeKeeper Subscriptions")}),i.jsx(ye,{variant:"secondary",onClick:q,children:e("subscriptionFull.manage","Manage")})]}),i.jsxs(Ee,{className:"bg-black/40 border-white/10",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:e("subscriptionFull.iosAppStore","iOS App Store")})}),i.jsxs(Oe,{className:"text-[#e8d5b7]/80",children:[i.jsx("p",{className:"mb-4",children:e("subscriptionFull.handledThroughApple","Purchases and subscription management are handled through Apple.")}),i.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[i.jsx(ye,{className:"w-full",onClick:()=>R("premium"),children:e("subscriptionFull.upgradePremiumAppStore","Upgrade to Premium (App Store)")}),i.jsx(ye,{className:"w-full",onClick:()=>R("pro"),children:e("subscriptionFull.upgradeProAppStore","Upgrade to Pro (App Store)")})]}),o&&i.jsxs("div",{className:"mt-4 text-emerald-500",children:[e("subscriptionFull.statusActive","Status: Active ✅"),c?` (${c})`:""]}),d&&i.jsx("div",{className:"mt-4 text-red-500",children:d})]})]})]}):i.jsxs("div",{className:"w-full max-w-6xl mx-auto p-4 space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-3xl font-bold text-[#e8d5b7] mb-2",children:e("subscriptionFull.continueWithPremium","Continue using Premium tools for your collection")}),i.jsx("p",{className:"text-[#e8d5b7]/70",children:e("subscriptionFull.fullAccessPrompt","You've had full access — choose how you'd like to continue.")})]}),i.jsxs("div",{className:"flex gap-4 items-center",children:[i.jsxs("span",{className:"text-[#e8d5b7]",children:[e("subscriptionFull.billing","Billing"),":"]}),i.jsx(ye,{variant:x==="monthly"?"default":"outline",onClick:()=>v("monthly"),children:e("subscriptionFull.monthly","Monthly")}),i.jsxs(ye,{variant:x==="annual"?"default":"outline",onClick:()=>v("annual"),children:[e("subscriptionFull.annualSave","Annual")," (",e("subscriptionFull.save","Save")," ",Math.round((1-S[m].annual/12/S[m].monthly)*100),"%)"]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[i.jsxs(Ee,{className:"border-white/10",children:[i.jsxs(Ze,{children:[i.jsx(et,{className:"text-[#e8d5b7]",children:e("subscriptionFull.free","Free")}),i.jsx("p",{className:"text-sm text-[#e8d5b7]/70 mt-2",children:P.free})]}),i.jsxs(Oe,{className:"space-y-3",children:[A.map((U,D)=>i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Nr,{className:"w-4 h-4 text-emerald-500 shrink-0 mt-0.5"}),i.jsx("span",{className:"text-sm text-[#e8d5b7]/80",children:U})]},D)),i.jsx(ye,{variant:"outline",className:"w-full mt-4",disabled:!0,children:e("subscriptionFull.continueWithFree","Continue with Free")})]})]}),i.jsxs(Ee,{className:"border-[#A35C5C] bg-[#1A2B3A]/60 relative",children:[i.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-[#A35C5C] text-white px-3 py-1 rounded-full text-xs font-semibold",children:e("subscriptionFull.recommended","Recommended")}),i.jsxs(Ze,{children:[i.jsx(et,{className:"text-[#e8d5b7]",children:e("subscriptionFull.premium","Premium")}),i.jsx("p",{className:"text-xs text-[#A35C5C] font-semibold",children:L.premium}),i.jsx("p",{className:"text-sm text-[#e8d5b7]/70 mt-2",children:P.premium}),i.jsxs("div",{className:"text-2xl font-bold text-[#A35C5C] mt-3",children:["$",S.premium[x]]}),i.jsxs("div",{className:"text-sm text-[#e8d5b7]/60",children:[e("subscriptionFull.per","per")," ",x==="monthly"?e("subscriptionFull.month","month"):e("subscriptionFull.year","year")]}),x==="annual"&&i.jsx("p",{className:"text-xs text-emerald-500 mt-1",children:e("subscription.annualSavings")})]}),i.jsxs(Oe,{className:"space-y-3",children:[O.premium.map((U,D)=>i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Nr,{className:"w-4 h-4 text-emerald-500 shrink-0 mt-0.5"}),i.jsx("span",{className:"text-sm text-[#e8d5b7]/80",children:U})]},D)),i.jsx(ye,{className:"w-full mt-4",onClick:()=>R("premium",x),children:e("subscriptionFull.continueWithPremiumBtn","Continue with Premium")})]})]}),i.jsxs(Ee,{className:"border-white/10",children:[i.jsxs(Ze,{children:[i.jsx(et,{className:"text-[#e8d5b7]",children:e("subscriptionFull.pro","Pro")}),i.jsx("p",{className:"text-xs text-[#A35C5C] font-semibold",children:L.pro}),i.jsx("p",{className:"text-sm text-[#e8d5b7]/70 mt-2",children:P.pro}),i.jsxs("div",{className:"text-2xl font-bold text-[#A35C5C] mt-3",children:["$",S.pro[x]]}),i.jsxs("div",{className:"text-sm text-[#e8d5b7]/60",children:[e("subscriptionFull.per","per")," ",x==="monthly"?e("subscriptionFull.month","month"):e("subscriptionFull.year","year")]}),x==="annual"&&i.jsx("p",{className:"text-xs text-emerald-500 mt-1",children:e("subscription.annualSavings")})]}),i.jsxs(Oe,{className:"space-y-3",children:[O.pro.map((U,D)=>i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Nr,{className:"w-4 h-4 text-emerald-500 shrink-0 mt-0.5"}),i.jsx("span",{className:"text-sm text-[#e8d5b7]/80",children:U})]},D)),i.jsx(ye,{variant:"outline",className:"w-full mt-4",onClick:()=>R("pro",x),children:e("subscriptionFull.upgradeToPro","Upgrade to Pro")})]})]})]}),i.jsxs("div",{className:"text-center space-y-2 text-sm text-[#e8d5b7]/60",children:[i.jsx("p",{children:e("subscriptionFull.cancelAnytime","• Cancel anytime")}),!n&&i.jsx("p",{children:e("subscriptionFull.managedThroughStripe","• Subscription managed through Stripe")}),i.jsx("p",{children:e("subscriptionFull.dataUnaffected","• Your existing data is never affected")})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(ye,{variant:"outline",className:"w-full",onClick:q,children:e("subscriptionFull.manageSubscription","Manage Subscription")}),i.jsx(ye,{variant:"secondary",className:"w-full",onClick:()=>b(!0),children:e("subscriptionFull.manualBackupCheckout","Manual Backup Checkout")})]}),d&&i.jsx("div",{className:`text-center text-sm ${d.includes("✅")?"text-emerald-500":"text-red-500"}`,children:d}),i.jsx(BG,{isOpen:y,onClose:()=>{b(!1),clearTimeout(N),j(null),f("")},user:r})]})}function E5({items:e}){return i.jsx("div",{className:"space-y-2",children:e.map((n,r)=>i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Nr,{className:"w-5 h-5 text-emerald-500 shrink-0 mt-0.5"}),i.jsx("span",{className:"text-[#e8d5b7]/85",children:n})]},r))})}function t1e(){const{t:e}=$t(),n=["Add up to 5 pipes","Add up to 10 tobacco blends","View, edit, and organize your collection","Basic notes and ratings","Search pipes and tobaccos","Multilingual support (10 languages)","Cloud sync"],r=["Unlimited pipes and tobacco blends","Unlimited notes and photos","Cellar tracking and aging logs","Smoking logs and history","Pipe maintenance and condition tracking","Advanced filters and sorting","Manual pipe ↔ tobacco pairings","Tobacco library sync","Multilingual support (10 languages)","Cloud sync across devices"],s=["Everything in Premium","AI Updates (Pro for new users starting Feb 1, 2026)","AI Identification tools (Pro for new users starting Feb 1, 2026)","Advanced analytics & insights","Bulk editing tools","Export & reports (CSV / PDF)","Collection optimization tools","Early access to new advanced features"],a=(l="premium")=>{!cs||Px(l)||CE()||O1()||(window.open("https://apps.apple.com/account/subscriptions","_blank"),Ve.info("Opened Apple subscriptions in browser."))},o=()=>{!cs||O1()||(window.open("https://apps.apple.com/account/subscriptions","_blank"),Ve.info("Opened Apple subscription management in browser."))};return i.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsx("h1",{className:"text-2xl font-semibold text-[#e8d5b7]",children:e("subscription.title")}),i.jsx(ye,{variant:"secondary",onClick:o,children:e("subscription.manage")})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(Ee,{className:"bg-black/40 border-white/10",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:"Free"})}),i.jsxs(Oe,{children:[i.jsx(E5,{items:n}),i.jsx("div",{className:"mt-4",children:i.jsx(ye,{className:"w-full",variant:"outline",onClick:()=>{},children:e("subscription.continueFree")})})]})]}),i.jsxs(Ee,{className:"bg-black/40 border-white/10",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:"Premium"})}),i.jsxs(Oe,{children:[i.jsx(E5,{items:r}),i.jsx("div",{className:"mt-4",children:i.jsx(ye,{className:"w-full",onClick:()=>a("premium"),children:e("subscription.subscribe")})})]})]}),i.jsxs(Ee,{className:"bg-black/40 border-white/10",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:"Pro"})}),i.jsxs(Oe,{children:[i.jsx(E5,{items:s}),i.jsx("div",{className:"mt-4",children:i.jsx(ye,{className:"w-full",onClick:()=>a("pro"),children:e("subscription.subscribe")})})]})]})]}),i.jsxs(Ee,{className:"bg-black/30 border-white/10",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:e("subscription.trialEndedTitle")})}),i.jsx(Oe,{className:"text-[#e8d5b7]/80",children:e("subscription.trialEndedBody")})]})]})}function UG(){return cs?i.jsx(t1e,{}):i.jsx(zG,{})}function n1e(){const e=co(),{t:n}=$t();return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0B1320] via-[#112133] to-[#0B1320] flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-[#1A2B3A] border border-[#A35C5C]/50 rounded-2xl p-8 shadow-xl",children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx(ha,{className:"w-12 h-12 text-amber-500"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#E0D8C8] text-center mb-4",children:n("subscriptionCancelled.title")}),i.jsx("p",{className:"text-[#E0D8C8]/70 text-center mb-6",children:n("subscriptionCancelled.message")}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(ye,{variant:"outline",className:"flex-1",onClick:()=>e(xt("Subscription")),children:n("subscriptionCancelled.backToPlans")}),i.jsx(ye,{className:"flex-1",onClick:()=>e(xt("Home")),children:n("nav.home")})]})]})})}function r1e(){const e=co();return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0B1320] via-[#112133] to-[#0B1320] flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-[#1A2B3A] border border-[#A35C5C]/50 rounded-2xl p-8 shadow-xl",children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx(ha,{className:"w-12 h-12 text-amber-500"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#E0D8C8] text-center mb-4",children:"Checkout Cancelled"}),i.jsx("p",{className:"text-[#E0D8C8]/70 text-center mb-6",children:"No problem! You can try subscribing again any time."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(ye,{variant:"outline",className:"flex-1",onClick:()=>e(xt("Subscription")),children:"Back to Plans"}),i.jsx(ye,{className:"flex-1",onClick:()=>e(xt("Home")),children:"Home"})]})]})})}function s1e(){const[e,n]=C.useState(!1),[r,s]=C.useState([]),[a,o]=C.useState({pass:0,fail:0,warning:0}),l=async()=>{n(!0);try{const c=await Ce.functions.invoke("testAllPaidUsersPermissions",{}),{results:u,summary:d}=c.data;o(d||{pass:0,fail:0,warning:0}),s(u||[]),console.log("[AllUsersPermissionTest] Complete:",d)}catch(c){console.error("[AllUsersPermissionTest] Error:",c),s([{email:"ERROR",status:"fail",issues:[`Test failed: ${c.message}`]}]),o({pass:0,fail:1,warning:0})}finally{n(!1)}};return i.jsxs(Ee,{className:"border-indigo-200 bg-gradient-to-br from-indigo-50 to-white",children:[i.jsx(Ze,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(et,{className:"text-lg flex items-center gap-2 text-slate-900",children:[i.jsx(hm,{className:"w-5 h-5"}),"All Paid Users Test",e&&i.jsx(Cn,{className:"w-4 h-4 animate-spin"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Ge,{className:"bg-green-100 text-green-800 border-green-300",children:[a.pass," Pass"]}),i.jsxs(Ge,{className:"bg-red-100 text-red-800 border-red-300",children:[a.fail," Fail"]}),a.warning>0&&i.jsxs(Ge,{className:"bg-amber-100 text-amber-800 border-amber-300",children:[a.warning," Warning"]})]})]})}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm text-slate-700",children:"Tests all active subscriptions to verify canonical resolver grants correct access"}),i.jsx(ye,{onClick:l,disabled:e,size:"sm",className:"bg-indigo-600 hover:bg-indigo-700",children:e?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),"Testing..."]}):i.jsxs(i.Fragment,{children:[i.jsx($s,{className:"w-4 h-4 mr-2"}),"Run Test"]})})]}),r.length>0&&i.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:r.map((c,u)=>{var d;return i.jsxs("div",{className:`p-3 rounded-lg border-2 ${c.status==="pass"?"bg-green-50 border-green-200":c.status==="warning"?"bg-amber-50 border-amber-200":"bg-red-50 border-red-200"}`,children:[i.jsx("div",{className:"flex items-start justify-between gap-2 mb-2",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.status==="pass"?i.jsx(Nr,{className:"w-4 h-4 text-green-600 shrink-0"}):c.status==="warning"?i.jsx(Ou,{className:"w-4 h-4 text-amber-600 shrink-0"}):i.jsx(ha,{className:"w-4 h-4 text-red-600 shrink-0"}),i.jsx("p",{className:"font-semibold text-slate-900 text-sm truncate",children:c.email})]}),i.jsxs("div",{className:"flex gap-1 flex-wrap",children:[i.jsx(Ge,{variant:"outline",className:"text-xs",children:c.provider}),i.jsx(Ge,{className:`text-xs ${c.subTier==="pro"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:c.subTier}),i.jsx(Ge,{variant:"outline",className:"text-xs",children:c.label})]})]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs font-mono bg-white/50 p-2 rounded",children:[i.jsxs("div",{className:c.tierMatch?"text-green-700":"text-red-700",children:["Tier: ",c.tier," ",c.tierMatch?"✓":"✗"]}),i.jsxs("div",{className:c.paidMatch?"text-green-700":"text-red-700",children:["Paid: ",String(c.hasPaid)," ",c.paidMatch?"✓":"✗"]}),i.jsxs("div",{className:c.proMatch?"text-green-700":"text-red-700",children:["Pro: ",String(c.hasPro)," ",c.proMatch?"✓":"✗"]})]}),((d=c.issues)==null?void 0:d.length)>0&&i.jsx("div",{className:"mt-2 space-y-1",children:c.issues.map((f,m)=>i.jsxs("p",{className:"text-xs text-red-700 font-semibold",children:["⚠️ ",f]},m))})]},u)})}),r.length>0&&i.jsxs("div",{className:"bg-slate-800 text-white rounded-lg p-4 text-xs",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Overall Results:"}),i.jsxs("p",{children:["✅ ",a.pass," users with correct permissions"]}),a.warning>0&&i.jsxs("p",{children:["⚠️ ",a.warning," warnings (minor issues)"]}),a.fail>0&&i.jsxs("p",{children:["❌ ",a.fail," users FAILED (critical issue)"]}),a.fail===0&&a.warning===0&&i.jsx("p",{className:"text-green-400 mt-2 font-semibold",children:"🎉 All paid users have correct access!"})]})]})]})}function i1e(){const[e,n]=C.useState([]),[r,s]=C.useState(!1),{user:a,subscription:o,hasPaid:l,hasPro:c,isTrial:u,provider:d,tier:f,planLabel:m,isLoading:g}=Kr(),x=n0(),v=async()=>{s(!0);const j=[];j.push({category:"Hook Data",test:"useCurrentUser returns user object",status:a!=null&&a.email?"pass":"fail",details:(a==null?void 0:a.email)||"No user"}),j.push({category:"Hook Data",test:"useCurrentUser returns subscription",status:l&&o||!l?"pass":"warning",details:(o==null?void 0:o.tier)||"No subscription (may be okay for free users)"});const S=Rm(a,o);j.push({category:"Canonical Resolver",test:"getEntitlementTier returns correct tier",status:S?"pass":"fail",details:`Tier: ${S}`}),j.push({category:"Canonical Resolver",test:"Tier matches hook tier",status:S===f?"pass":"fail",details:`Canonical: ${S}, Hook: ${f}`});const A=ny(a,o);j.push({category:"Access Flags",test:"hasPaidAccess function matches hook",status:A===l?"pass":"fail",details:`Function: ${A}, Hook: ${l}`});const P=i2(a,o);j.push({category:"Access Flags",test:"hasProAccess function matches hook",status:P===c?"pass":"fail",details:`Function: ${P}, Hook: ${c}`});const L=eE(a,o);if(j.push({category:"Access Flags",test:"isTrialingAccess function matches hook",status:L===u?"pass":"fail",details:`Function: ${L}, Hook: ${u}`}),j.push({category:"Entitlements",test:"useEntitlements returns correct tier",status:x.tier===f?"pass":"fail",details:`Entitlements: ${x.tier}, Expected: ${f}`}),a!=null&&a.email){const U=await iv(a.email,l,u);j.push({category:"Limit Checks",test:"canCreatePipe processes correctly",status:typeof U.canCreate=="boolean"?"pass":"fail",details:l?`Unlimited (paid): ${U.canCreate}`:`${U.currentCount}/${U.limit}`});const D=await av(a.email,l,u);j.push({category:"Limit Checks",test:"canCreateTobacco processes correctly",status:typeof D.canCreate=="boolean"?"pass":"fail",details:l?`Unlimited (paid): ${D.canCreate}`:`${D.currentCount}/${D.limit}`})}const O=["UNLIMITED_COLLECTION","PAIRING_BASIC","MATCHING_ENGINE","MESSAGING"],R=["AI_IDENTIFY","AI_VALUE_LOOKUP","COLLECTION_OPTIMIZATION","EXPORT_REPORTS","BULK_EDIT"];l&&(O.forEach(U=>{const D=x.canUse(U);j.push({category:"Premium Features",test:U,status:D?"pass":"fail",details:D?"Access granted":"Access denied"})}),c&&R.forEach(U=>{const D=x.canUse(U);j.push({category:"Pro Features",test:U,status:D?"pass":"fail",details:D?"Access granted":"Access denied"})})),j.push({category:"Provider Detection",test:"Provider correctly identified",status:d?"pass":l?"warning":"pass",details:d||"No provider (free user)"});const q=Xz(a,o);j.push({category:"Plan Label",test:"Plan label matches tier",status:q===m?"pass":"fail",details:`Hook: ${m}, Function: ${q}`}),n(j),s(!1)};C.useEffect(()=>{!g&&(a!=null&&a.email)&&v()},[g,a==null?void 0:a.email]);const y=e.filter(j=>j.status==="pass").length,b=e.filter(j=>j.status==="fail").length,N=e.filter(j=>j.status==="warning").length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Ee,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-white",children:[i.jsx(Ze,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(et,{className:"text-lg flex items-center gap-2 text-slate-900",children:["🧪 Current User E2E Test",r&&i.jsx(Cn,{className:"w-4 h-4 animate-spin"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Ge,{className:"bg-green-100 text-green-800",children:[y," Pass"]}),i.jsxs(Ge,{className:"bg-red-100 text-red-800",children:[b," Fail"]}),N>0&&i.jsxs(Ge,{className:"bg-amber-100 text-amber-800",children:[N," Warning"]})]})]})}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 space-y-1 text-xs font-mono",children:[i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Email:"})," ",(a==null?void 0:a.email)||"N/A"]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Tier:"})," ",f]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Plan Label:"})," ",m]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Provider:"})," ",d||"None"]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Flags:"})," hasPaid=",String(l),", hasPro=",String(c),", isTrial=",String(u)]})]}),i.jsx(ye,{onClick:v,disabled:r||g,className:"w-full bg-purple-600 hover:bg-purple-700",size:"sm",children:r?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),"Running Tests..."]}):i.jsxs(i.Fragment,{children:[i.jsx($s,{className:"w-4 h-4 mr-2"}),"Re-run Tests"]})}),e.length>0&&i.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:["Hook Data","Canonical Resolver","Access Flags","Entitlements","Limit Checks","Premium Features","Pro Features","Provider Detection","Plan Label"].map(j=>{const S=e.filter(A=>A.category===j);return S.length===0?null:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-semibold text-sm text-slate-700 border-b pb-1",children:j}),S.map((A,P)=>i.jsxs("div",{className:`flex items-start gap-2 p-2 rounded text-xs ${A.status==="pass"?"bg-green-50 border border-green-200":A.status==="warning"?"bg-amber-50 border border-amber-200":"bg-red-50 border border-red-200"}`,children:[A.status==="pass"?i.jsx(Nr,{className:"w-4 h-4 text-green-600 shrink-0 mt-0.5"}):A.status==="warning"?i.jsx(Ou,{className:"w-4 h-4 text-amber-600 shrink-0 mt-0.5"}):i.jsx(ha,{className:"w-4 h-4 text-red-600 shrink-0 mt-0.5"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:`font-medium ${A.status==="pass"?"text-green-800":A.status==="warning"?"text-amber-800":"text-red-800"}`,children:A.test}),i.jsx("p",{className:"text-slate-600 text-[11px] break-all",children:A.details})]})]},P))]},j)})}),e.length>0&&i.jsxs("div",{className:"bg-slate-800 text-white rounded-lg p-3 text-xs",children:[i.jsx("p",{className:"font-semibold mb-1",children:"Test Summary:"}),i.jsxs("p",{children:["✅ ",y," tests passed"]}),N>0&&i.jsxs("p",{children:["⚠️ ",N," warnings"]}),b>0&&i.jsxs("p",{children:["❌ ",b," tests FAILED"]}),b===0&&N===0&&i.jsx("p",{className:"text-green-400 mt-2 font-semibold",children:"🎉 All tests passed!"})]})]})]}),i.jsx(s1e,{})]})}function a1e(){return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42] p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("a",{href:xt("Home"),children:i.jsxs(ye,{variant:"ghost",className:"mb-6 text-[#e8d5b7] hover:text-[#e8d5b7]/80",children:[i.jsx($i,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),i.jsx("h1",{className:"text-3xl font-bold text-[#e8d5b7] mb-6",children:"🧪 Subscription & Permissions E2E Test Suite"}),i.jsx("p",{className:"text-[#e8d5b7]/70 mb-6",children:"This page runs comprehensive tests on the subscription and permissions system to verify that paid users receive correct access to all premium and pro features. Tests run automatically on load."}),i.jsx(i1e,{}),i.jsxs("div",{className:"mt-8 bg-slate-800 text-white rounded-lg p-6 text-sm space-y-2",children:[i.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Test Coverage:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-300",children:[i.jsx("li",{children:"Hook data integrity (user, subscription objects)"}),i.jsx("li",{children:"Canonical tier resolution across all sources"}),i.jsx("li",{children:"Access flag consistency (hasPaid, hasPro, isTrial)"}),i.jsx("li",{children:"Entitlements system calculations"}),i.jsx("li",{children:"Limit check parameter compatibility"}),i.jsx("li",{children:"Premium feature access (unlimited collection, pairing, matching, messaging)"}),i.jsx("li",{children:"Pro feature access (AI identify, value lookup, optimization, exports, bulk edit)"}),i.jsx("li",{children:"Provider detection (Stripe, Apple, manual)"}),i.jsx("li",{children:"Plan label generation"})]})]})]})})}function o1e(){const{isAdmin:e}=Kr(),[n,r]=C.useState([]),[s,a]=C.useState(!0),[o,l]=C.useState(""),[c,u]=C.useState("all"),[d,f]=C.useState("all");C.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0);const x=await Ce.entities.SubscriptionIntegrationEvent.list("-created_date",100);r(x)}catch(x){console.error("Failed to load events:",x)}finally{a(!1)}};if(!e)return i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:i.jsxs(Br,{variant:"destructive",children:[i.jsx(vn,{className:"h-4 w-4"}),i.jsx($r,{children:"Admin access required"})]})});const g=n.filter(x=>{var N;const v=!o||((N=x.email)==null?void 0:N.toLowerCase().includes(o.toLowerCase())),y=c==="all"||x.event_source===c,b=d==="all"||d==="success"&&x.success||d==="error"&&!x.success;return v&&y&&b});return i.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-3xl font-bold text-[#E0D8C8]",children:"Subscription Events Log"}),i.jsx(ye,{onClick:m,disabled:s,children:"Refresh"})]}),i.jsx(Ee,{children:i.jsx(Oe,{className:"pt-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-[#E0D8C8]/70 mb-2 block",children:"Search Email"}),i.jsx(at,{placeholder:"user@example.com",value:o,onChange:x=>l(x.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-[#E0D8C8]/70 mb-2 block",children:"Source"}),i.jsxs("select",{value:c,onChange:x=>u(x.target.value),className:"w-full h-10 px-3 rounded-lg bg-[#1a2c42] border border-white/10 text-[#E0D8C8]",children:[i.jsx("option",{value:"all",children:"All Sources"}),i.jsx("option",{value:"stripe",children:"Stripe"}),i.jsx("option",{value:"cloudflare",children:"Cloudflare"}),i.jsx("option",{value:"app",children:"App"}),i.jsx("option",{value:"admin",children:"Admin"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-[#E0D8C8]/70 mb-2 block",children:"Status"}),i.jsxs("select",{value:d,onChange:x=>f(x.target.value),className:"w-full h-10 px-3 rounded-lg bg-[#1a2c42] border border-white/10 text-[#E0D8C8]",children:[i.jsx("option",{value:"all",children:"All"}),i.jsx("option",{value:"success",children:"Success"}),i.jsx("option",{value:"error",children:"Error"})]})]})]})})}),i.jsxs(Ee,{children:[i.jsx(Ze,{children:i.jsxs(et,{children:["Events (",g.length,")"]})}),i.jsx(Oe,{children:s?i.jsx("p",{className:"text-[#E0D8C8]/70",children:"Loading events..."}):g.length===0?i.jsx("p",{className:"text-[#E0D8C8]/70",children:"No events found"}):i.jsx("div",{className:"space-y-3",children:g.map(x=>i.jsxs("div",{className:"p-4 bg-[#1a2c42] rounded-lg border border-white/10",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[x.success?i.jsx(ei,{className:"w-5 h-5 text-green-500"}):i.jsx(ha,{className:"w-5 h-5 text-red-500"}),i.jsx("span",{className:"font-medium text-[#E0D8C8]",children:x.event_type})]}),i.jsx(Ge,{variant:x.success?"success":"destructive",children:x.event_source})]}),i.jsxs("div",{className:"text-sm space-y-1 text-[#E0D8C8]/70",children:[x.email&&i.jsxs("p",{children:["Email: ",x.email]}),x.user_id&&i.jsxs("p",{children:["User ID: ",x.user_id]}),x.stripe_customer_id&&i.jsxs("p",{children:["Stripe Customer: ",x.stripe_customer_id]}),x.error&&i.jsxs("p",{className:"text-red-400",children:["Error: ",x.error]}),i.jsx("p",{className:"text-xs text-[#E0D8C8]/50",children:new Date(x.created_date).toLocaleString()})]})]},x.id))})})]})]})}const l1e=e=>String(e||"").trim().toLowerCase();function c1e(e=[]){const n=e.filter(r=>{const s=String((r==null?void 0:r.status)||"").toLowerCase();return["active","trialing","trial","past_due","incomplete"].includes(s)});return n.length===0?null:(n.sort((r,s)=>{const a=((r==null?void 0:r.tier)||"").toLowerCase()==="pro"?1:0,o=((s==null?void 0:s.tier)||"").toLowerCase()==="pro"?1:0;if(a!==o)return o-a;const l=(r==null?void 0:r.status)==="active"?1:0,c=(s==null?void 0:s.status)==="active"?1:0;if(l!==c)return c-l;const u=new Date((r==null?void 0:r.current_period_start)||(r==null?void 0:r.created_date)||0).getTime();return new Date((s==null?void 0:s.current_period_start)||(s==null?void 0:s.created_date)||0).getTime()-u}),n[0])}function u1e(){const e=co(),n=On(),[r,s]=C.useState("loading"),[a,o]=C.useState(90);return C.useEffect(()=>{let l=0;const c=18,u=async()=>{var f,m;try{l++,await Ce.functions.invoke("syncSubscriptionForMe",{}).catch(()=>null);const g=await Ce.auth.me().catch(()=>null),x=(g==null?void 0:g.id)||(g==null?void 0:g.auth_user_id)||null,v=g!=null&&g.email?l1e(g.email):null;let y=[];x&&(y=await Ce.entities.Subscription.filter({user_id:x}).catch(()=>[])),y.length===0&&v&&(y=await Ce.entities.Subscription.filter({user_email:v}).catch(()=>[]));const b=c1e(y),N=Rm(g,b);if(await n.invalidateQueries({queryKey:["current-user"]}),await n.invalidateQueries({queryKey:["subscription"]}),N!=="free"){s("success");return}l>=c&&s("timeout")}catch(g){(m=(f=import.meta)==null?void 0:f.env)!=null&&m.DEV&&console.warn("Failed to refresh entitlements:",g),l>=c&&s("timeout")}};u();const d=setInterval(()=>{o(f=>Math.max(0,f-5)),u()},5e3);return()=>clearInterval(d)},[n]),i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0B1320] via-[#112133] to-[#0B1320] flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-[#1A2B3A] border border-[#A35C5C]/50 rounded-2xl p-8 shadow-xl",children:[r==="loading"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx(Cn,{className:"w-12 h-12 text-[#A35C5C] animate-spin"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#E0D8C8] text-center mb-4",children:t("subscriptionSuccess.processing","Processing Your Subscription")}),i.jsx("p",{className:"text-[#E0D8C8]/70 text-center mb-6",children:t("subscriptionSuccess.confirming","Thanks! We're confirming your subscription and unlocking your features.")}),i.jsxs("p",{className:"text-sm text-[#E0D8C8]/50 text-center",children:[t("subscriptionSuccess.autoRefresh","Auto-refresh"),": ",a,"s ",t("subscriptionSuccess.remaining","remaining"),"..."]})]}),r==="success"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx(Nr,{className:"w-12 h-12 text-green-500"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#E0D8C8] text-center mb-4",children:t("subscriptionSuccess.welcome","Welcome!")}),i.jsx("p",{className:"text-[#E0D8C8]/70 text-center mb-6",children:t("subscriptionSuccess.activeMessage","Your subscription is active. Premium/Pro features are now available.")}),i.jsx(ye,{className:"w-full",onClick:()=>e(xt("Home")),children:t("nav.goHome","Go to Home")})]}),r==="timeout"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx(vn,{className:"w-12 h-12 text-amber-500"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#E0D8C8] text-center mb-4",children:t("subscriptionSuccess.pending","Subscription Pending")}),i.jsx("p",{className:"text-[#E0D8C8]/70 text-center mb-4",children:t("subscriptionSuccess.receivedMessage","Your subscription was received. Features may take a few minutes to unlock.")}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/50 text-center mb-6",children:t("subscriptionSuccess.supportNote","If your features don't unlock within 2 minutes, please contact support.")}),i.jsx(ye,{className:"w-full",onClick:()=>e(xt("Home")),children:t("common.continue","Continue")})]})]})})}function d1e(){const e=co(),n=On(),[r,s]=C.useState<"loading"|"success"|!0,[a,o]=C.useState(60);return C.useEffect(()=>{let l=0;const c=12,u=async()=>{try{if(l++,await n.invalidateQueries({queryKey:["current-user"]}),await n.invalidateQueries({queryKey:["subscription"]}),n.getQueryData(["current-user"])){s("success");return}if(l>=c){s("timeout");return}}catch(f){console.error("Failed to refresh entitlements:",f),l>=c&&s("timeout")}};u();const d=setInterval(()=>{o(f=>Math.max(0,f-5)),u()},5e3);return()=>clearInterval(d)},[n]),i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0B1320] via-[#112133] to-[#0B1320] flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-[#1A2B3A] border border-[#A35C5C]/50 rounded-2xl p-8 shadow-xl",children:[r==="loading"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx(Cn,{className:"w-12 h-12 text-[#A35C5C] animate-spin"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#E0D8C8] text-center mb-4",children:"Processing Your Subscription"}),i.jsx("p",{className:"text-[#E0D8C8]/70 text-center mb-6",children:"Thanks! We're confirming your subscription and unlocking your features."}),i.jsxs("p",{className:"text-sm text-[#E0D8C8]/50 text-center",children:["Auto-refresh: ",a,"s remaining..."]})]}),r==="success"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx(Nr,{className:"w-12 h-12 text-green-500"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#E0D8C8] text-center mb-4",children:"Welcome!"}),i.jsx("p",{className:"text-[#E0D8C8]/70 text-center mb-6",children:"Your subscription is active. Premium features are now available."}),i.jsx(ye,{className:"w-full",onClick:()=>e(xt("Home")),children:"Go to Home"})]}),r==="timeout"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx(vn,{className:"w-12 h-12 text-amber-500"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#E0D8C8] text-center mb-4",children:"Subscription Pending"}),i.jsx("p",{className:"text-[#E0D8C8]/70 text-center mb-4",children:"Your subscription was received. Features may take a few minutes to unlock."}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/50 text-center mb-6",children:"If your features don't unlock within 2 minutes, please contact support."}),i.jsx(ye,{className:"w-full",onClick:()=>e(xt("Home")),children:"Continue"})]})]})})}function h1e(){var re;const{t:e}=$t(),{isAdmin:n}=Kr(),[r,s]=C.useState(!1),[a,o]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState([]),[f,m]=C.useState("24h"),[g,x]=C.useState(!1),[v,y]=C.useState(null),[b,N]=C.useState(""),[j,S]=C.useState("premium"),[A,P]=C.useState(!1),[L,O]=C.useState(!1),[R,q]=C.useState(!1),[U,D]=C.useState(!1);if(!n)return i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:i.jsxs(Br,{variant:"destructive",children:[i.jsx(vn,{className:"h-4 w-4"}),i.jsx($r,{children:e("subscriptionSupport.adminAccessRequired","Admin access required")})]})});const M=async()=>{try{s(!0);const{data:z}=await Ce.functions.invoke("getIntegrationHealth",{timeWindow:f});o(z)}catch(z){console.error("Failed to load health:",z)}finally{s(!1)}},G=async()=>{try{s(!0);const{data:z}=await Ce.functions.invoke("getFunnelMetrics",{});c(z)}catch(z){console.error("Failed to load funnel:",z)}finally{s(!1)}},Y=async()=>{try{s(!0);const z=await Ce.entities.EntitlementDriftCache.filter({resolved:!1});d(z)}catch(z){console.error("Failed to load drift:",z)}finally{s(!1)}},Z=async()=>{var z,te;try{x(!0),O(!1);const{data:le}=await Ce.functions.invoke("bulkUpdateActiveEntitlements",{});y(le),le.summary.errors>0?Ve.warning(e("subscriptionSupport.updatedWithErrors","Updated {{updated}} users with {{errors}} errors",{updated:le.summary.updated,errors:le.summary.errors})):Ve.success(e("subscriptionSupport.successfullyUpdated","Successfully updated {{updated}} users",{updated:le.summary.updated}))}catch(le){console.error("Bulk update failed:",le);const Q=((te=(z=le==null?void 0:le.response)==null?void 0:z.data)==null?void 0:te.error)||le.message||e("subscriptionSupport.unknownError","Unknown error");Ve.error(e("subscriptionSupport.bulkUpdateFailed","Bulk update failed: {{error}}",{error:Q})),y({ok:!1,error:Q,summary:{updated:0,errors:1,skipped:0,totalActiveSubs:0}})}finally{x(!1)}},X=async()=>{var z,te;if(!b.trim()){Ve.error(e("subscriptionSupport.pleaseEnterEmail","Please enter a user email"));return}try{P(!0),q(!1);const{data:le}=await Ce.functions.invoke("updateUserEntitlement",{email:b,tier:j,forceOverride:U});le.ok?(Ve.success(e("subscriptionSupport.userUpdatedSuccess","{{email}} updated from {{before}} to {{after}}",{email:le.email,before:le.before,after:le.after})),N(""),D(!1)):Ve.error(le.error||e("subscriptionSupport.updateFailed","Update failed"))}catch(le){console.error("User update failed:",le);const Q=((te=(z=le==null?void 0:le.response)==null?void 0:z.data)==null?void 0:te.error)||le.message||e("subscriptionSupport.unknownError","Unknown error");U?Ve.error(e("subscriptionSupport.forceUpdateFailed","Force update failed: {{error}}",{error:Q})):Ve.error(e("subscriptionSupport.updateFailedTryForce",'Update failed: {{error}}. Try enabling "Force Override" if needed.',{error:Q}))}finally{P(!1)}};return ve.useEffect(()=>{M(),G(),Y()},[f]),i.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-3xl font-bold text-[#E0D8C8]",children:e("subscriptionSupport.title","Subscription Support")}),i.jsxs(ye,{onClick:()=>{M(),G(),Y()},disabled:r,children:[i.jsx($s,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),e("common.refresh")]})]}),i.jsxs(Ee,{children:[i.jsx(Ze,{children:i.jsxs(et,{className:"flex items-center justify-between",children:[i.jsx("span",{children:e("subscriptionSupport.integrationHealth","Integration Health")}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ye,{size:"sm",variant:f==="24h"?"default":"outline",onClick:()=>m("24h"),children:e("subscriptionSupport.24h","24h")}),i.jsx(ye,{size:"sm",variant:f==="7d"?"default":"outline",onClick:()=>m("7d"),children:e("subscriptionSupport.7d","7d")})]})]})}),i.jsx(Oe,{children:a?i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:e("subscriptionSupport.stripeWebhooks","Stripe Webhooks")}),i.jsx("p",{className:"text-2xl font-bold text-[#E0D8C8]",children:a.stripeWebhooks})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:e("subscriptionSupport.cloudflareCheckouts","Cloudflare Checkouts")}),i.jsx("p",{className:"text-2xl font-bold text-[#E0D8C8]",children:a.cloudflareCheckouts})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:e("subscriptionSupport.successful","Successful")}),i.jsx("p",{className:"text-2xl font-bold text-green-500",children:a.successfulUpdates})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:e("subscriptionSupport.failed","Failed")}),i.jsx("p",{className:"text-2xl font-bold text-red-500",children:a.failedUpdates})]})]}):i.jsx("p",{className:"text-[#E0D8C8]/70",children:e("common.loading")})})]}),i.jsxs(Ee,{children:[i.jsx(Ze,{children:i.jsx(et,{children:e("subscriptionSupport.entitlementDriftDetection","Entitlement Drift Detection")})}),i.jsx(Oe,{children:u.length===0?i.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[i.jsx(ei,{className:"w-5 h-5"}),i.jsx("span",{children:e("subscriptionSupport.noDriftDetected","No drift detected")})]}):i.jsx("div",{className:"space-y-2",children:u.map(z=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1a2c42] rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:z.user_email}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:z.details})]}),i.jsx(Ge,{variant:z.severity==="high"||z.severity==="critical"?"destructive":"secondary",children:z.drift_type})]},z.id))})})]}),i.jsxs(Ee,{children:[i.jsx(Ze,{children:i.jsx(et,{children:e("subscriptionSupport.subscriptionFunnel","Subscription Funnel (Last 7 Days)")})}),i.jsx(Oe,{children:l?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:e("subscriptionSupport.cloudflareCheckouts","Cloudflare Checkouts")}),i.jsx("p",{className:"text-2xl font-bold text-[#E0D8C8]",children:l.cloudflareCheckouts})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:e("subscriptionSupport.stripeCustomers","Stripe Customers")}),i.jsx("p",{className:"text-2xl font-bold text-[#E0D8C8]",children:l.stripeCustomers})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:e("subscriptionSupport.activeSubscriptions","Active Subscriptions")}),i.jsx("p",{className:"text-2xl font-bold text-[#E0D8C8]",children:l.activeSubscriptions})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:e("subscriptionSupport.entitlementsApplied","Entitlements Applied")}),i.jsx("p",{className:"text-2xl font-bold text-green-500",children:l.entitlementsApplied})]})]}),((re=l.dropoffs)==null?void 0:re.length)>0&&i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm text-[#E0D8C8]/70 mb-2",children:[e("subscriptionSupport.dropoffReasons","Drop-off Reasons"),":"]}),i.jsx("div",{className:"space-y-1",children:l.dropoffs.map((z,te)=>i.jsx("p",{className:"text-sm text-red-400",children:z},te))})]})]}):i.jsx("p",{className:"text-[#E0D8C8]/70",children:e("common.loading")})})]}),i.jsxs(Ee,{children:[i.jsx(Ze,{children:i.jsxs(et,{className:"flex items-center gap-2",children:[i.jsx(nm,{className:"w-5 h-5"}),e("subscriptionSupport.bulkUpdateEntitlements","Bulk Update Active Entitlements")]})}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs(Br,{children:[i.jsx(Ou,{className:"h-4 w-4"}),i.jsx($r,{children:e("subscriptionSupport.bulkUpdateDescription","Updates all users with active subscriptions to match their subscription tier. Fixes nested data and missing entitlement fields.")})]}),i.jsxs(ye,{onClick:()=>O(!0),disabled:g,children:[i.jsx($s,{className:`w-4 h-4 mr-2 ${g?"animate-spin":""}`}),g?e("subscriptionSupport.updating","Updating..."):e("subscriptionSupport.runBulkUpdate","Run Bulk Update")]}),v&&i.jsxs("div",{className:"p-4 bg-[#1a2c42] rounded-lg space-y-2",children:[i.jsxs("p",{className:"text-[#E0D8C8] font-medium",children:[e("subscriptionSupport.results","Results"),":"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"text-[#E0D8C8]/70",children:[e("subscriptionSupport.totalActive","Total Active"),": "]}),i.jsx("span",{className:"text-[#E0D8C8]",children:v.summary.totalActiveSubs})]}),i.jsxs("div",{children:[i.jsxs("span",{className:"text-[#E0D8C8]/70",children:[e("subscriptionSupport.updated","Updated"),": "]}),i.jsx("span",{className:"text-green-500",children:v.summary.updated})]}),i.jsxs("div",{children:[i.jsxs("span",{className:"text-[#E0D8C8]/70",children:[e("subscriptionSupport.errors","Errors"),": "]}),i.jsx("span",{className:"text-red-500",children:v.summary.errors})]}),i.jsxs("div",{children:[i.jsxs("span",{className:"text-[#E0D8C8]/70",children:[e("subscriptionSupport.skipped","Skipped"),": "]}),i.jsx("span",{className:"text-[#E0D8C8]/70",children:v.summary.skipped})]})]})]})]})]}),i.jsxs(Ee,{children:[i.jsx(Ze,{children:i.jsxs(et,{className:"flex items-center gap-2",children:[i.jsx(hm,{className:"w-5 h-5"}),e("subscriptionSupport.updateIndividualUser","Update Individual User Entitlement")]})}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"userEmail",children:e("subscriptionSupport.userEmail","User Email")}),i.jsx(at,{id:"userEmail",type:"email",placeholder:e("subscriptionSupport.userEmailPlaceholder","user@example.com"),value:b,onChange:z=>N(z.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"userTier",children:e("subscriptionSupport.subscriptionTier","Subscription Tier")}),i.jsxs(pn,{value:j,onValueChange:S,children:[i.jsx(hn,{id:"userTier",children:i.jsx(gn,{})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"free",children:e("subscriptionSupport.free","Free")}),i.jsx(ot,{value:"premium",children:e("subscriptionSupport.premium","Premium")}),i.jsx(ot,{value:"pro",children:e("subscriptionSupport.pro","Pro")})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"forceOverride",checked:U,onChange:z=>D(z.target.checked),className:"rounded"}),i.jsx(tt,{htmlFor:"forceOverride",className:"text-sm text-[#E0D8C8]/70",children:e("subscriptionSupport.forceOverride","Force Override (ignore validation errors)")})]}),i.jsx(ye,{onClick:()=>q(!0),disabled:A,children:A?e("subscriptionSupport.updating","Updating..."):e("subscriptionSupport.updateUser","Update User")})]})]}),i.jsxs(Br,{children:[i.jsx(Wp,{className:"h-4 w-4"}),i.jsx($r,{children:e("subscriptionSupport.logoutNote","Users must log out and back in after entitlement updates to see changes.")})]}),i.jsx(Nm,{open:L,onOpenChange:O,children:i.jsxs(kh,{children:[i.jsxs(Eh,{children:[i.jsx(Oh,{children:e("subscriptionSupport.confirmBulkUpdate","Confirm Bulk Update")}),i.jsx(Lh,{children:e("subscriptionSupport.bulkUpdateConfirmDesc","This will update all users with active subscriptions to match their subscription tier. This operation may take a few moments. Are you sure you want to continue?")})]}),i.jsxs(Th,{children:[i.jsx(Dh,{children:e("common.cancel")}),i.jsx(Rh,{onClick:Z,children:e("subscriptionSupport.confirmUpdate","Confirm Update")})]})]})}),i.jsx(Nm,{open:R,onOpenChange:q,children:i.jsxs(kh,{children:[i.jsxs(Eh,{children:[i.jsx(Oh,{children:e("subscriptionSupport.confirmUserUpdate","Confirm User Update")}),i.jsxs(Lh,{children:[e("subscriptionSupport.updateEntitlementFor","Update entitlement for")," ",i.jsx("strong",{children:b})," ",e("common.to")," ",i.jsx("strong",{children:j}),"?",U&&i.jsx("div",{className:"mt-2 text-yellow-500",children:e("subscriptionSupport.forceOverrideWarning","⚠️ Force Override is enabled - validation errors will be ignored")})]})]}),i.jsxs(Th,{children:[i.jsx(Dh,{children:e("common.cancel")}),i.jsx(Rh,{onClick:X,children:e("subscriptionSupport.confirmUpdate","Confirm Update")})]})]})})]})}const f1e=["General Support Request","Account Issues","Feature Suggestion","Report an Error","Billing Question","Technical Issue","Other"];function VG(){const{t:e}=$t(),[n,r]=C.useState({topic:"",name:"",email:"",message:""}),[s,a]=C.useState(!1),[o,l]=C.useState(!1),{data:c}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me()}),u=async d=>{d.preventDefault(),a(!0);try{const f=`
New Support Request from PipeKeeper

Topic: ${n.topic}
From: ${n.name}
Email: ${n.email}
User Account: ${(c==null?void 0:c.email)||"Not logged in"}

Message:
${n.message}
      `;await Ce.integrations.Core.SendEmail({to:"admin@pipekeeperapp.com",subject:`PipeKeeper Support - ${n.topic}`,body:f,from_name:"PipeKeeper Support"}),l(!0),r({topic:"",name:"",email:"",message:""})}catch(f){console.error("Support email error:",f),alert(`Failed to send support request: ${(f==null?void 0:f.message)||"Unknown error"}. Please try again or email admin@pipekeeperapp.com directly.`)}finally{a(!1)}};return o?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42]",children:i.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx("a",{href:xt("Home"),children:i.jsxs(ye,{variant:"ghost",className:"mb-6 text-[#e8d5b7] hover:text-[#e8d5b7]/80",children:[i.jsx($i,{className:"w-4 h-4 mr-2"}),e("supportFull.backToHome","Back to Home")]})}),i.jsx(Ee,{className:"border-green-200 bg-gradient-to-br from-green-50 to-white",children:i.jsxs(Oe,{className:"p-12 text-center",children:[i.jsx(ei,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-green-900 mb-2",children:e("supportFull.requestSubmitted","Request Submitted!")}),i.jsx("p",{className:"text-green-700 mb-6",children:e("supportFull.thankYou","Thank you for contacting us. We'll get back to you as soon as possible.")}),i.jsx(ye,{onClick:()=>l(!1),variant:"outline",children:e("supportFull.submitAnother","Submit Another Request")})]})})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42]",children:i.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx("a",{href:xt("Home"),children:i.jsxs(ye,{variant:"ghost",className:"mb-6 text-[#e8d5b7] hover:text-[#e8d5b7]/80",children:[i.jsx($i,{className:"w-4 h-4 mr-2"}),e("supportFull.backToHome","Back to Home")]})}),i.jsxs(Ee,{className:"border-[#e8d5b7]/30",children:[i.jsxs(Ze,{children:[i.jsxs(et,{className:"text-3xl text-[#E0D8C8] flex items-center gap-3",children:[i.jsx(Cu,{className:"w-8 h-8 text-[#A35C5C]"}),e("supportFull.contactSupport","Contact Support")]}),i.jsx(Tl,{className:"text-[#E0D8C8]/80",children:e("supportFull.description","Have a question or need help? Send us a message and we'll get back to you soon.")}),i.jsxs("div",{className:"mt-4 p-4 bg-[#A35C5C]/10 border border-[#A35C5C]/30 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-[#E0D8C8] mb-2",children:e("supportFull.emailVerifIssues","Email Verification Issues?")}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70 mb-3",children:e("supportFull.verificationHelp","If you're having trouble with email verification or can't log in, please contact us directly at:")}),i.jsx("a",{href:"mailto:admin@pipekeeperapp.com",className:"block text-center px-4 py-2 bg-[#A35C5C] text-[#E0D8C8] rounded-lg hover:bg-[#8F4E4E] transition-colors font-semibold",children:e("supportFull.adminEmail","admin@pipekeeperapp.com")})]})]}),i.jsx(Oe,{children:i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs(tt,{htmlFor:"topic",className:"text-[#E0D8C8] font-medium",children:[e("supportFull.whatCanWeHelp","What can we help you with?")," *"]}),i.jsxs(pn,{value:n.topic,onValueChange:d=>r({...n,topic:d}),required:!0,children:[i.jsx(hn,{className:"mt-2",children:i.jsx(gn,{placeholder:e("supportFull.selectTopic","Select a topic...")})}),i.jsx(fn,{children:f1e.map(d=>i.jsx(ot,{value:d,children:d},d))})]})]}),i.jsxs("div",{children:[i.jsxs(tt,{htmlFor:"name",className:"text-[#E0D8C8] font-medium",children:[e("supportFull.yourName","Your Name")," *"]}),i.jsx(at,{id:"name",value:n.name,onChange:d=>r({...n,name:d.target.value}),placeholder:e("supportFull.namePlaceholder","John Doe"),className:"mt-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs(tt,{htmlFor:"email",className:"text-[#E0D8C8] font-medium",children:[e("supportFull.yourEmail","Your Email")," *"]}),i.jsx(at,{id:"email",type:"email",value:n.email,onChange:d=>r({...n,email:d.target.value}),placeholder:e("supportFull.emailPlaceholder","john@example.com"),className:"mt-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs(tt,{htmlFor:"message",className:"text-[#E0D8C8] font-medium",children:[e("supportFull.message","Message")," *"]}),i.jsx(Ui,{id:"message",value:n.message,onChange:d=>r({...n,message:d.target.value}),placeholder:e("supportFull.messagePlaceholder","Please describe your question or issue in detail..."),className:"mt-2 min-h-[150px]",required:!0})]}),i.jsxs(ye,{type:"submit",disabled:s||!n.topic||!n.name||!n.email||!n.message,className:"w-full bg-[#8b3a3a] hover:bg-[#6d2e2e]",children:[i.jsx(Cu,{className:"w-4 h-4 mr-2"}),s?e("supportFull.sending","Sending..."):e("supportFull.sendMessage","Send Message")]})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("a",{href:xt("BulkLogoUpload"),className:"text-sm text-amber-400 hover:text-amber-300 underline",children:e("supportFull.bulkLogoLink","→ Bulk Logo Upload Tool")})})]})})}function m1e(){return i.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-4",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("h1",{className:"text-3xl font-bold text-[#e8d5b7]",children:"Support"}),i.jsx("p",{className:"text-sm text-[#e8d5b7]/70 mt-2",children:"Help for collection and cellar inventory management."})]}),i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:"Before you contact support"})}),i.jsx(Oe,{className:"text-[#e8d5b7]/80 text-sm space-y-2",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Confirm you are signed in to the correct account."}),i.jsx("li",{children:"Close and reopen the app, then try again."}),i.jsx("li",{children:"Check your internet connection."}),i.jsx("li",{children:"Take screenshots of the issue if possible."})]})})]}),i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:"What to include in your message"})}),i.jsx(Oe,{className:"text-[#e8d5b7]/80 text-sm space-y-2",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Device model and iOS version"}),i.jsx("li",{children:"What page you were on (Pipes, Cellar, Profile, etc.)"}),i.jsx("li",{children:"Steps to reproduce the issue"}),i.jsx("li",{children:"Screenshots (recommended)"})]})})]}),i.jsxs(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7]",children:"About the iOS build"})}),i.jsx(Oe,{className:"text-[#e8d5b7]/80 text-sm space-y-2",children:i.jsx("p",{children:"This iOS build is designed for collection and cellar inventory management. Features that could be interpreted as recommendation or usage guidance are not included in this version."})})]})]})}function HG(){return cs?i.jsx(m1e,{}):i.jsx(VG,{})}function WG(){const e=$h(),n=co();return C.useEffect(()=>{(e.pathname==="/"||e.pathname==="")&&n(xt("Home"),{replace:!0})},[e.pathname,n]),i.jsxs("div",{className:"mx-auto max-w-4xl px-5 py-10 text-[#f3e7d3]",children:[i.jsx("h1",{className:"text-4xl font-semibold tracking-tight text-white",children:"Terms of Service"}),i.jsx("p",{className:"mt-2 text-sm text-[#cdbfae]",children:"Last updated: January 2026"}),i.jsx("p",{className:"mt-6 leading-relaxed",children:'These Terms of Service ("Terms") govern your access to and use of PipeKeeper (the "Service"). By using the Service, you agree to these Terms.'}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"1. The Service"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"PipeKeeper is an adult-focused collection-management and informational application designed to help users catalog, organize, and document pipes, cellar inventories, accessories, and related collection data. PipeKeeper does not sell tobacco products, does not facilitate tobacco purchases, and does not process tobacco orders."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"2. Eligibility"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"You must be legally able to form a binding contract in your jurisdiction to use the Service. You are solely responsible for complying with all applicable local, state, and national laws related to the ownership and possession of items documented within the Service."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"3. Accounts"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"You are responsible for maintaining the confidentiality of your account credentials and for all activity that occurs under your account. You agree to provide accurate, current information and to keep your account information updated."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"4. Subscriptions, Premium Features, and Trials"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"PipeKeeper may offer optional Premium features through paid subscriptions. Limited trial access may be offered and will be clearly displayed within the Service when applicable."}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"Subscription processing depends on the platform you use:"}),i.jsxs("ul",{className:"mt-3 list-disc space-y-2 pl-6",children:[i.jsxs("li",{children:[i.jsx("strong",{className:"text-white",children:"iOS:"})," Subscriptions are processed through Apple's App Store In-App Purchase system and managed via your Apple ID."]}),i.jsxs("li",{children:[i.jsx("strong",{className:"text-white",children:"Web and Android:"})," Subscriptions are processed by PipeKeeper through secure third-party payment providers and managed through your account profile."]})]}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"Subscription features, pricing, and availability may vary by platform."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"5. Billing and Refunds"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"Billing and refund handling depend on the platform used to purchase a subscription. iOS purchases are subject to Apple's billing and refund policies. Web and Android purchases are subject to the terms disclosed at checkout."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"6. Acceptable Use"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"You agree not to misuse the Service, including but not limited to:"}),i.jsxs("ul",{className:"mt-3 list-disc space-y-2 pl-6",children:[i.jsx("li",{children:"Accessing accounts you do not own"}),i.jsx("li",{children:"Attempting to bypass security features"}),i.jsx("li",{children:"Reverse engineering or disrupting the Service"}),i.jsx("li",{children:"Automated scraping or bulk data extraction"}),i.jsx("li",{children:"Using the Service for unlawful purposes"})]}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"7. User-Generated Content and Community Standards"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:'PipeKeeper allows users to submit and manage content such as notes, comments, images, collection details, and other related data ("User-Generated Content").'}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"PipeKeeper has zero tolerance for objectionable content or abusive behavior, including but not limited to:"}),i.jsxs("ul",{className:"mt-3 list-disc space-y-2 pl-6",children:[i.jsx("li",{children:"Harassment, threats, or hate speech"}),i.jsx("li",{children:"Obscene, pornographic, or sexually explicit content"}),i.jsx("li",{children:"Content promoting violence, illegal activity, or self-harm"}),i.jsx("li",{children:"Impersonation, spam, or misleading content"})]}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"We reserve the right to moderate, remove, restrict, or permanently delete content or accounts that violate these standards, with or without notice. Users may report objectionable content or abusive behavior through in-app reporting tools or by contacting support."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"8. Ownership and Data Rights"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"You retain ownership of your User-Generated Content and personal collection data. You grant PipeKeeper a limited, non-exclusive license to store, process, and display your content solely for the purpose of operating and improving the Service."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"9. Disclaimers"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:'The Service is provided "as is" and "as available." PipeKeeper may include optional AI-assisted features that provide best-effort organizational suggestions and insights. These features may be imperfect and should not be relied upon as professional, financial, or legal advice.'}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"10. Limitation of Liability"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"To the fullest extent permitted by law, PipeKeeper and its affiliates shall not be liable for any indirect, incidental, special, consequential, or punitive damages, or for loss of data, profits, or revenue arising from use of the Service."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"11. Changes to These Terms"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"We may update these Terms periodically. Material changes will be communicated within the Service or via posted updates. Continued use of the Service constitutes acceptance of the updated Terms."}),i.jsx("h2",{className:"mt-10 text-2xl font-semibold text-white",children:"12. Contact"}),i.jsx("p",{className:"mt-3 leading-relaxed",children:"For questions, concerns, or to report violations, please contact PipeKeeper support."}),i.jsxs("p",{className:"mt-10 text-sm text-[#cdbfae]",children:["Related policies:"," ",i.jsx("a",{className:"underline text-[#f3e7d3] hover:text-white",href:"/privacy",children:"Privacy Policy"})," ","·"," ",i.jsx("a",{className:"underline text-[#f3e7d3] hover:text-white",href:"/faq",children:"FAQ"})]})]})}const p1e=!0,R3=1e3;function gh(e,n,r){if(!r&&p1e){const s=`[GUARDRAIL] Unscoped ${e}.${n}() detected! This is forbidden.`;return console.error(s),Ve.error("Data fetch error - contact support"),!0}return!1}const g1e={async listForUser(e,n="-updated_date",r=R3){return gh("TobaccoBlend","listForUser",!!e)?[]:await Ce.entities.TobaccoBlend.filter({created_by:e},n,r)},async filterForUser(e,n={},r,s){if(gh("TobaccoBlend","filterForUser",!!e))return[];const a={...n,created_by:e};return await Ce.entities.TobaccoBlend.filter(a,r,s)},async getForUser(e,n){if(gh("TobaccoBlend","getForUser",!!e))return null;const r=await Ce.entities.TobaccoBlend.filter({id:n,created_by:e});return(r==null?void 0:r[0])||null},async create(e){return await Ce.entities.TobaccoBlend.create(e)},async update(e,n){return await Ce.entities.TobaccoBlend.update(e,n)},async delete(e){return await Ce.entities.TobaccoBlend.delete(e)},schema(){return Ce.entities.TobaccoBlend.schema()}},x1e={async listForUser(e,n="-updated_date",r=R3){return gh("Pipe","listForUser",!!e)?[]:await Ce.entities.Pipe.filter({created_by:e},n,r)},async filterForUser(e,n={},r,s){if(gh("Pipe","filterForUser",!!e))return[];const a={...n,created_by:e};return await Ce.entities.Pipe.filter(a,r,s)},async getForUser(e,n){if(gh("Pipe","getForUser",!!e))return null;const r=await Ce.entities.Pipe.filter({id:n,created_by:e});return(r==null?void 0:r[0])||null},async create(e){return await Ce.entities.Pipe.create(e)},async update(e,n){return await Ce.entities.Pipe.update(e,n)},async delete(e){return await Ce.entities.Pipe.delete(e)},schema(){return Ce.entities.Pipe.schema()}},v1e={async listForUser(e,n="-date",r=R3){return gh("SmokingLog","listForUser",!!e)?[]:await Ce.entities.SmokingLog.filter({created_by:e},n,r)},async filterForUser(e,n={},r,s){if(gh("SmokingLog","filterForUser",!!e))return[];const a={...n,created_by:e};return await Ce.entities.SmokingLog.filter(a,r,s)},async create(e){return await Ce.entities.SmokingLog.create(e)},async update(e,n){return await Ce.entities.SmokingLog.update(e,n)},async delete(e){return await Ce.entities.SmokingLog.delete(e)}},y1e={TobaccoBlend:g1e,Pipe:x1e,SmokingLog:v1e},T5={Peterson:"https://placehold.co/400x200/8B4513/FFFFFF?text=Peterson",Dunhill:"https://placehold.co/400x200/1a1a1a/FFFFFF?text=Dunhill","Cornell & Diehl":"https://placehold.co/400x200/2c5f2d/FFFFFF?text=Cornell+%26+Diehl","Samuel Gawith":"https://placehold.co/400x200/8B0000/FFFFFF?text=Samuel+Gawith","Gawith Hoggarth":"https://placehold.co/400x200/654321/FFFFFF?text=Gawith+Hoggarth","G.L. Pease":"https://placehold.co/400x200/4B0082/FFFFFF?text=G.L.+Pease",McClelland:"https://placehold.co/400x200/800020/FFFFFF?text=McClelland",Rattray:"https://placehold.co/400x200/C19A6B/FFFFFF?text=Rattray",Orlik:"https://placehold.co/400x200/DAA520/FFFFFF?text=Orlik",Stanwell:"https://placehold.co/400x200/2F4F4F/FFFFFF?text=Stanwell",Sutliff:"https://placehold.co/400x200/8B4513/FFFFFF?text=Sutliff","Mac Baren":"https://placehold.co/400x200/DC143C/FFFFFF?text=Mac+Baren","Captain Black":"https://placehold.co/400x200/000080/FFFFFF?text=Captain+Black","Lane Limited":"https://placehold.co/400x200/556B2F/FFFFFF?text=Lane+Limited",Escudo:"https://placehold.co/400x200/8B4513/FFFFFF?text=Escudo",Davidoff:"https://placehold.co/400x200/1a1a1a/FFD700?text=Davidoff","Balkan Sobranie":"https://placehold.co/400x200/191970/FFFFFF?text=Balkan+Sobranie","Frog Morton":"https://placehold.co/400x200/228B22/FFFFFF?text=Frog+Morton",Germain:"https://placehold.co/400x200/8B0000/FFFFFF?text=Germain","Seattle Pipe Club":"https://placehold.co/400x200/483D8B/FFFFFF?text=Seattle+Pipe+Club","The Country Squire Tobacconist":"https://placehold.co/400x200/8B4513/FFFFFF?text=Country+Squire","Scandinavian Tobacco Group":"https://placehold.co/400x200/4682B4/FFFFFF?text=STG"},KG="https://placehold.co/400x200/D2691E/FFFFFF?text=Tobacco";function GG(e,n=[]){if(!e)return[];const r=e.trim(),s=r.toLowerCase(),a=[];for(const o of n){const l=o.brand_name.toLowerCase();l===s?a.push({brand:o.brand_name,logo:o.logo_url}):(s.includes(l)||l.includes(s))&&a.push({brand:o.brand_name,logo:o.logo_url})}T5[r]&&a.push({brand:r,logo:T5[r]});for(const[o,l]of Object.entries(T5))o!==r&&(s.includes(o.toLowerCase())||o.toLowerCase().includes(s))&&a.push({brand:o,logo:l});return a}function Du(e,n=[]){const r=GG(e,n);return r.length>0?r[0].logo:KG}function ps(e){const n=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&n==="[object Date]"?new e.constructor(+e):typeof e=="number"||n==="[object Number]"||typeof e=="string"||n==="[object String]"?new Date(e):new Date(NaN)}function Sm(e,n){return e instanceof Date?new e.constructor(n):new Date(n)}const YG=6048e5,b1e=864e5;let w1e={};function Y2(){return w1e}function lv(e,n){var c,u,d,f;const r=Y2(),s=(n==null?void 0:n.weekStartsOn)??((u=(c=n==null?void 0:n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??r.weekStartsOn??((f=(d=r.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,a=ps(e),o=a.getDay(),l=(o<s?7:0)+o-s;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function J1(e){return lv(e,{weekStartsOn:1})}function QG(e){const n=ps(e),r=n.getFullYear(),s=Sm(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=J1(s),o=Sm(e,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const l=J1(o);return n.getTime()>=a.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function J6(e){const n=ps(e);return n.setHours(0,0,0,0),n}function Z6(e){const n=ps(e),r=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return r.setUTCFullYear(n.getFullYear()),+e-+r}function j1e(e,n){const r=J6(e),s=J6(n),a=+r-Z6(r),o=+s-Z6(s);return Math.round((a-o)/b1e)}function N1e(e){const n=QG(e),r=Sm(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),J1(r)}function O5(e,n){const r=ps(e),s=ps(n),a=r.getTime()-s.getTime();return a<0?-1:a>0?1:a}function _1e(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function S1e(e){if(!_1e(e)&&typeof e!="number")return!1;const n=ps(e);return!isNaN(Number(n))}function C1e(e,n){const r=ps(e),s=ps(n),a=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return a*12+o}function P1e(e){const n=ps(e);return n.setHours(23,59,59,999),n}function A1e(e){const n=ps(e),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function k1e(e){const n=ps(e);return+P1e(n)==+A1e(n)}function E1e(e,n){const r=ps(e),s=ps(n),a=O5(r,s),o=Math.abs(C1e(r,s));let l;if(o<1)l=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*o);let c=O5(r,s)===-a;k1e(ps(e))&&o===1&&O5(e,s)===1&&(c=!1),l=a*(o-Number(c))}return l===0?0:l}function T1e(e){const n=ps(e),r=Sm(e,0);return r.setFullYear(n.getFullYear(),0,1),r.setHours(0,0,0,0),r}const O1e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},L1e=(e,n,r)=>{let s;const a=O1e[e];return typeof a=="string"?s=a:n===1?s=a.one:s=a.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function L5(e){return(n={})=>{const r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const R1e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},D1e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},I1e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},M1e={date:L5({formats:R1e,defaultWidth:"full"}),time:L5({formats:D1e,defaultWidth:"full"}),dateTime:L5({formats:I1e,defaultWidth:"full"})},F1e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},B1e=(e,n,r,s)=>F1e[e];function Q0(e){return(n,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,c=r!=null&&r.width?String(r.width):l;a=e.formattingValues[c]||e.formattingValues[l]}else{const l=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[c]||e.values[l]}const o=e.argumentCallback?e.argumentCallback(n):n;return a[o]}}const $1e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},q1e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},z1e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},U1e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},V1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},H1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},W1e=(e,n)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},K1e={ordinalNumber:W1e,era:Q0({values:$1e,defaultWidth:"wide"}),quarter:Q0({values:q1e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Q0({values:z1e,defaultWidth:"wide"}),day:Q0({values:U1e,defaultWidth:"wide"}),dayPeriod:Q0({values:V1e,defaultWidth:"wide",formattingValues:H1e,defaultFormattingWidth:"wide"})};function X0(e){return(n,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],o=n.match(a);if(!o)return null;const l=o[0],c=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(c)?Y1e(c,m=>m.test(l)):G1e(c,m=>m.test(l));let d;d=e.valueCallback?e.valueCallback(u):u,d=r.valueCallback?r.valueCallback(d):d;const f=n.slice(l.length);return{value:d,rest:f}}}function G1e(e,n){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n(e[r]))return r}function Y1e(e,n){for(let r=0;r<e.length;r++)if(n(e[r]))return r}function Q1e(e){return(n,r={})=>{const s=n.match(e.matchPattern);if(!s)return null;const a=s[0],o=n.match(e.parsePattern);if(!o)return null;let l=e.valueCallback?e.valueCallback(o[0]):o[0];l=r.valueCallback?r.valueCallback(l):l;const c=n.slice(a.length);return{value:l,rest:c}}}const X1e=/^(\d+)(th|st|nd|rd)?/i,J1e=/\d+/i,Z1e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ewe={any:[/^b/i,/^(a|c)/i]},twe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},nwe={any:[/1/i,/2/i,/3/i,/4/i]},rwe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},swe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iwe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},awe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},owe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},lwe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cwe={ordinalNumber:Q1e({matchPattern:X1e,parsePattern:J1e,valueCallback:e=>parseInt(e,10)}),era:X0({matchPatterns:Z1e,defaultMatchWidth:"wide",parsePatterns:ewe,defaultParseWidth:"any"}),quarter:X0({matchPatterns:twe,defaultMatchWidth:"wide",parsePatterns:nwe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:X0({matchPatterns:rwe,defaultMatchWidth:"wide",parsePatterns:swe,defaultParseWidth:"any"}),day:X0({matchPatterns:iwe,defaultMatchWidth:"wide",parsePatterns:awe,defaultParseWidth:"any"}),dayPeriod:X0({matchPatterns:owe,defaultMatchWidth:"any",parsePatterns:lwe,defaultParseWidth:"any"})},uwe={code:"en-US",formatDistance:L1e,formatLong:M1e,formatRelative:B1e,localize:K1e,match:cwe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dwe(e){const n=ps(e);return j1e(n,T1e(n))+1}function hwe(e){const n=ps(e),r=+J1(n)-+N1e(n);return Math.round(r/YG)+1}function XG(e,n){var f,m,g,x;const r=ps(e),s=r.getFullYear(),a=Y2(),o=(n==null?void 0:n.firstWeekContainsDate)??((m=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(g=a.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,l=Sm(e,0);l.setFullYear(s+1,0,o),l.setHours(0,0,0,0);const c=lv(l,n),u=Sm(e,0);u.setFullYear(s,0,o),u.setHours(0,0,0,0);const d=lv(u,n);return r.getTime()>=c.getTime()?s+1:r.getTime()>=d.getTime()?s:s-1}function fwe(e,n){var c,u,d,f;const r=Y2(),s=(n==null?void 0:n.firstWeekContainsDate)??((u=(c=n==null?void 0:n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(d=r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,a=XG(e,n),o=Sm(e,0);return o.setFullYear(a,0,s),o.setHours(0,0,0,0),lv(o,n)}function mwe(e,n){const r=ps(e),s=+lv(r,n)-+fwe(r,n);return Math.round(s/YG)+1}function lr(e,n){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(n,"0");return r+s}const Hd={y(e,n){const r=e.getFullYear(),s=r>0?r:1-r;return lr(n==="yy"?s%100:s,n.length)},M(e,n){const r=e.getMonth();return n==="M"?String(r+1):lr(r+1,2)},d(e,n){return lr(e.getDate(),n.length)},a(e,n){const r=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,n){return lr(e.getHours()%12||12,n.length)},H(e,n){return lr(e.getHours(),n.length)},m(e,n){return lr(e.getMinutes(),n.length)},s(e,n){return lr(e.getSeconds(),n.length)},S(e,n){const r=n.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return lr(a,n.length)}},Cp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},eD={G:function(e,n,r){const s=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return Hd.y(e,n)},Y:function(e,n,r,s){const a=XG(e,s),o=a>0?a:1-a;if(n==="YY"){const l=o%100;return lr(l,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):lr(o,n.length)},R:function(e,n){const r=QG(e);return lr(r,n.length)},u:function(e,n){const r=e.getFullYear();return lr(r,n.length)},Q:function(e,n,r){const s=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return lr(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){const s=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return lr(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){const s=e.getMonth();switch(n){case"M":case"MM":return Hd.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){const s=e.getMonth();switch(n){case"L":return String(s+1);case"LL":return lr(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){const a=mwe(e,s);return n==="wo"?r.ordinalNumber(a,{unit:"week"}):lr(a,n.length)},I:function(e,n,r){const s=hwe(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):lr(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Hd.d(e,n)},D:function(e,n,r){const s=dwe(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):lr(s,n.length)},E:function(e,n,r){const s=e.getDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return lr(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return lr(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,n,r){const s=e.getDay(),a=s===0?7:s;switch(n){case"i":return String(a);case"ii":return lr(a,n.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){const a=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,n,r){const s=e.getHours();let a;switch(s===12?a=Cp.noon:s===0?a=Cp.midnight:a=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,n,r){const s=e.getHours();let a;switch(s>=17?a=Cp.evening:s>=12?a=Cp.afternoon:s>=4?a=Cp.morning:a=Cp.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Hd.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Hd.H(e,n)},K:function(e,n,r){const s=e.getHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):lr(s,n.length)},k:function(e,n,r){let s=e.getHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):lr(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Hd.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Hd.s(e,n)},S:function(e,n){return Hd.S(e,n)},X:function(e,n,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(n){case"X":return nD(s);case"XXXX":case"XX":return Df(s);case"XXXXX":case"XXX":default:return Df(s,":")}},x:function(e,n,r){const s=e.getTimezoneOffset();switch(n){case"x":return nD(s);case"xxxx":case"xx":return Df(s);case"xxxxx":case"xxx":default:return Df(s,":")}},O:function(e,n,r){const s=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+tD(s,":");case"OOOO":default:return"GMT"+Df(s,":")}},z:function(e,n,r){const s=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+tD(s,":");case"zzzz":default:return"GMT"+Df(s,":")}},t:function(e,n,r){const s=Math.trunc(e.getTime()/1e3);return lr(s,n.length)},T:function(e,n,r){const s=e.getTime();return lr(s,n.length)}};function tD(e,n=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),o=s%60;return o===0?r+String(a):r+String(a)+n+lr(o,2)}function nD(e,n){return e%60===0?(e>0?"-":"+")+lr(Math.abs(e)/60,2):Df(e,n)}function Df(e,n=""){const r=e>0?"-":"+",s=Math.abs(e),a=lr(Math.trunc(s/60),2),o=lr(s%60,2);return r+a+n+o}const rD=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},JG=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},pwe=(e,n)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return rD(e,n);let o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",rD(s,n)).replace("{{time}}",JG(a,n))},gwe={p:JG,P:pwe},xwe=/^D+$/,vwe=/^Y+$/,ywe=["D","DD","YY","YYYY"];function bwe(e){return xwe.test(e)}function wwe(e){return vwe.test(e)}function jwe(e,n,r){const s=Nwe(e,n,r);if(console.warn(s),ywe.includes(e))throw new RangeError(s)}function Nwe(e,n,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _we=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Swe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cwe=/^'([^]*?)'?$/,Pwe=/''/g,Awe=/[a-zA-Z]/;function kwe(e,n,r){var f,m,g,x;const s=Y2(),a=s.locale??uwe,o=s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,l=s.weekStartsOn??((x=(g=s.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,c=ps(e);if(!S1e(c))throw new RangeError("Invalid time value");let u=n.match(Swe).map(v=>{const y=v[0];if(y==="p"||y==="P"){const b=gwe[y];return b(v,a.formatLong)}return v}).join("").match(_we).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const y=v[0];if(y==="'")return{isToken:!1,value:Ewe(v)};if(eD[y])return{isToken:!0,value:v};if(y.match(Awe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(u=a.localize.preprocessor(c,u));const d={firstWeekContainsDate:o,weekStartsOn:l,locale:a};return u.map(v=>{if(!v.isToken)return v.value;const y=v.value;(wwe(y)||bwe(y))&&jwe(y,n,String(e));const b=eD[y[0]];return b(c,y,a.localize,d)}).join("")}function Ewe(e){const n=e.match(Cwe);return n?n[1].replace(Pwe,"'"):e}const ZG=e=>{const n=[e.tin_cellared_date,e.bulk_cellared_date,e.pouch_cellared_date].filter(Boolean),r=n.length>0?new Date(Math.min(...n.map(l=>new Date(l)))):null;if(!r)return null;const a=E1e(new Date,r),o=e.aging_potential;return o?o==="Excellent"?a<6?{message:"Early stage - best after 1-2 years",color:"blue"}:a<24?{message:"Developing nicely - continue aging",color:"yellow"}:{message:"Peak aging achieved!",color:"green"}:o==="Good"?a<3?{message:"Early stage - best after 6-12 months",color:"blue"}:a<12?{message:"Coming along well",color:"yellow"}:{message:"Ready to enjoy!",color:"green"}:o==="Fair"?a<3?{message:"Brief aging may help",color:"blue"}:{message:"Ready - minimal aging benefit",color:"green"}:{message:"Best smoked fresh",color:"green"}:null},Twe={Virginia:"bg-yellow-600 text-yellow-100 border-yellow-500/60","Virginia/Perique":"bg-orange-700 text-orange-100 border-orange-600/60",English:"bg-slate-700 text-slate-100 border-slate-600/60",Balkan:"bg-slate-600 text-slate-100 border-slate-500/60",Aromatic:"bg-purple-700 text-purple-100 border-purple-600/60",Burley:"bg-amber-700 text-amber-100 border-amber-600/60","Virginia/Burley":"bg-yellow-700 text-yellow-100 border-yellow-600/60","Latakia Blend":"bg-slate-800 text-slate-100 border-slate-700/60","Oriental/Turkish":"bg-rose-700 text-rose-100 border-rose-600/60","Navy Flake":"bg-blue-700 text-blue-100 border-blue-600/60","Dark Fired":"bg-slate-600 text-slate-100 border-slate-500/60",Cavendish:"bg-amber-800 text-amber-100 border-amber-700/60"};function sD({blend:e,onClick:n,onToggleFavorite:r}){const{t:s}=$t(),a=Twe[e.blend_type]||"bg-slate-700 text-slate-100 border-slate-600/60",o=ZG(e),l=o?o.color==="green"?"bg-green-500/20 text-green-700 border-green-500/30":o.color==="yellow"?"bg-yellow-500/20 text-yellow-700 border-yellow-500/30":o.color==="blue"?"bg-blue-500/20 text-blue-700 border-blue-500/30":"bg-gray-500/20 text-gray-700 border-gray-500/30":"";return i.jsx(ms.div,{whileHover:{y:-4},transition:{duration:.2},children:i.jsxs(gy,{className:"overflow-hidden cursor-pointer hover:shadow-xl transition-all duration-300",onClick:n,children:[i.jsxs("div",{className:"relative aspect-[4/3] bg-[#1A2B3A] overflow-hidden",children:[e.logo||e.photo?i.jsx("img",{src:e.logo||e.photo,alt:e.name,className:`w-full h-full ${e.logo?"object-contain p-3":"object-cover"}`,onError:c=>{c.target.style.display="none",c.target.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center bg-white p-3"><img src="'+Du(e.manufacturer)+'" class="w-full h-full object-contain" /></div>'}}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#1A2B3A] p-3",children:i.jsx("img",{src:Du(e.manufacturer),alt:e.manufacturer||"Tobacco",className:"w-full h-full object-contain",onError:c=>{c.target.style.display="none",c.target.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center"><div class="text-amber-400 text-4xl">🍂</div></div>'}})}),i.jsx("div",{className:"absolute top-3 right-3",children:i.jsx(ye,{variant:"ghost",size:"icon",className:"h-8 w-8 bg-[#223447]/90 hover:bg-[#223447] shadow-md",onClick:c=>{c.preventDefault(),c.stopPropagation(),r==null||r(e)},children:i.jsx(Tm,{className:`w-4 h-4 ${e.is_favorite?"fill-rose-500 text-rose-500":"text-stone-400"}`})})}),i.jsxs("div",{className:"absolute bottom-3 left-3 right-3 flex flex-col gap-1",children:[(e.tin_total_quantity_oz||0)>0&&i.jsxs("div",{className:"flex gap-1",children:[i.jsxs(Ge,{className:"bg-amber-600/90 text-white border-0 backdrop-blur-sm text-xs font-semibold shadow-sm",children:[s("tobaccoExtended.tin"),": ",aa(+(e.tin_total_quantity_oz||0))]}),(e.tin_tins_open||0)>0&&i.jsxs(Ge,{className:"bg-sky-500/90 text-white border-0 backdrop-blur-sm text-xs font-semibold shadow-sm",children:[aa(+(e.tin_tins_open||0)*+(e.tin_size_oz||0))," ",s("tobacco.open")]}),(e.tin_tins_cellared||0)>0&&i.jsxs(Ge,{className:"bg-emerald-600/90 text-white border-0 backdrop-blur-sm text-xs font-semibold shadow-sm",children:[aa(+(e.tin_tins_cellared||0)*+(e.tin_size_oz||0))," ",s("tobaccoExtended.cellared")]})]}),(e.bulk_total_quantity_oz||0)>0&&i.jsxs("div",{className:"flex gap-1",children:[i.jsxs(Ge,{className:"bg-blue-600/90 text-white border-0 backdrop-blur-sm text-xs font-semibold shadow-sm",children:[s("tobaccoExtended.bulk"),": ",aa(+(e.bulk_total_quantity_oz||0))]}),(e.bulk_open||0)>0&&i.jsxs(Ge,{className:"bg-sky-500/90 text-white border-0 backdrop-blur-sm text-xs font-semibold shadow-sm",children:[aa(+(e.bulk_open||0))," ",s("tobacco.open")]}),(e.bulk_cellared||0)>0&&i.jsxs(Ge,{className:"bg-emerald-600/90 text-white border-0 backdrop-blur-sm text-xs font-semibold shadow-sm",children:[aa(+(e.bulk_cellared||0))," ",s("tobaccoExtended.cellared")]})]}),(e.pouch_total_quantity_oz||0)>0&&i.jsxs("div",{className:"flex gap-1",children:[i.jsxs(Ge,{className:"bg-purple-600/90 text-white border-0 backdrop-blur-sm text-xs font-semibold shadow-sm",children:[s("tobaccoExtended.pouches"),": ",aa(+(e.pouch_total_quantity_oz||0))]}),(e.pouch_pouches_open||0)>0&&i.jsxs(Ge,{className:"bg-sky-500/90 text-white border-0 backdrop-blur-sm text-xs font-semibold shadow-sm",children:[aa(+(e.pouch_pouches_open||0)*+(e.pouch_size_oz||0))," ",s("tobacco.open")]}),(e.pouch_pouches_cellared||0)>0&&i.jsxs(Ge,{className:"bg-emerald-600/90 text-white border-0 backdrop-blur-sm text-xs font-semibold shadow-sm",children:[aa(+(e.pouch_pouches_cellared||0)*+(e.pouch_size_oz||0))," ",s("tobaccoExtended.cellared")]})]})]})]}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-semibold text-[#E0D8C8] truncate",children:e.name}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/60 truncate",children:e.manufacturer||s("tobaccoExtended.unknownMaker")})]}),e.rating&&i.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",children:[i.jsx(Qw,{className:"w-4 h-4 fill-amber-400 text-amber-400"}),i.jsxs("span",{className:"text-sm font-medium text-amber-300",children:[(+e.rating).toFixed(1),"/5"]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-3",children:[o&&i.jsx(Ge,{className:`${l} border text-xs font-medium`,children:o.message}),e.blend_type&&i.jsx(Ge,{variant:"secondary",className:`${a} text-xs`,children:e.blend_type}),e.strength&&i.jsx(Ge,{variant:"secondary",className:"bg-slate-700 text-slate-100 border-slate-600/50 text-xs",children:e.strength}),e.cut&&i.jsx(Ge,{variant:"secondary",className:"bg-amber-700 text-amber-100 border-amber-600/50 text-xs",children:e.cut})]})]})]})})}const Owe={Virginia:"bg-yellow-600 text-yellow-100 border-yellow-500/60","Virginia/Perique":"bg-orange-700 text-orange-100 border-orange-600/60",English:"bg-slate-700 text-slate-100 border-slate-600/60",Balkan:"bg-slate-600 text-slate-100 border-slate-500/60",Aromatic:"bg-purple-700 text-purple-100 border-purple-600/60",Burley:"bg-amber-700 text-amber-100 border-amber-600/60","Virginia/Burley":"bg-yellow-700 text-yellow-100 border-yellow-600/60","Latakia Blend":"bg-slate-800 text-slate-100 border-slate-700/60","Oriental/Turkish":"bg-rose-700 text-rose-100 border-rose-600/60","Navy Flake":"bg-blue-700 text-blue-100 border-blue-600/60","Dark Fired":"bg-slate-600 text-slate-100 border-slate-500/60",Cavendish:"bg-amber-800 text-amber-100 border-amber-700/60"};function iD({blend:e,onClick:n,onToggleFavorite:r}){const{t:s}=$t(),a=Owe[e.blend_type]||"bg-slate-700 text-slate-100 border-slate-600/60",o=ZG(e),l=o?o.color==="green"?"bg-green-500/20 text-green-700 border-green-500/30":o.color==="yellow"?"bg-yellow-500/20 text-yellow-700 border-yellow-500/30":o.color==="blue"?"bg-blue-500/20 text-blue-700 border-blue-500/30":"bg-gray-500/20 text-gray-700 border-gray-500/30":"";return i.jsx(gy,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-all duration-300",onClick:n,children:i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"relative w-24 h-24 rounded-lg bg-[#1A2B3A] border border-white/10 overflow-hidden shrink-0",children:[e.logo||e.photo?i.jsx("img",{src:e.logo||e.photo,alt:e.name,className:`w-full h-full ${e.logo?"object-contain p-2":"object-cover"}`,onError:c=>{c.target.style.display="none",c.target.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center p-2"><img src="'+Du(e.manufacturer)+'" class="w-full h-full object-contain" /></div>'}}):i.jsx("div",{className:"w-full h-full flex items-center justify-center p-2 bg-[#1A2B3A]",children:i.jsx("img",{src:Du(e.manufacturer),alt:e.manufacturer||"Tobacco",className:"w-full h-full object-contain",onError:c=>{c.target.style.display="none",c.target.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center"><div class="text-amber-400 text-3xl">🍂</div></div>'}})}),i.jsx("div",{className:"absolute top-1 right-1",children:i.jsx(ye,{variant:"ghost",size:"icon",className:"h-7 w-7 bg-white/90 hover:bg-white shadow-md",onClick:c=>{c.preventDefault(),c.stopPropagation(),r==null||r(e)},children:i.jsx(Tm,{className:`w-3.5 h-3.5 ${e.is_favorite?"fill-rose-500 text-rose-500":"text-stone-400"}`})})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-semibold text-[#E0D8C8] text-lg truncate",children:e.name}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/60",children:e.manufacturer||s("tobaccoExtended.unknownMaker")})]}),i.jsxs("div",{className:"shrink-0 flex items-center gap-3",children:[e.rating&&i.jsxs("div",{className:"flex items-center gap-0.5",children:[i.jsx(Qw,{className:"w-4 h-4 fill-amber-400 text-amber-400"}),i.jsxs("span",{className:"text-sm font-medium text-amber-300",children:[(+e.rating).toFixed(1),"/5"]})]}),e.quantity_owned>0&&i.jsxs(Ge,{className:"bg-amber-600/90 text-white border-0",children:[(+e.quantity_owned).toFixed(2)," oz"]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[o&&i.jsx(Ge,{className:`${l} border text-xs font-medium`,children:o.message}),e.blend_type&&i.jsx(Ge,{variant:"secondary",className:`${a} text-xs`,children:e.blend_type}),e.strength&&i.jsx(Ge,{variant:"secondary",className:"bg-slate-700 text-slate-100 border-slate-600/50 text-xs",children:e.strength}),e.cut&&i.jsx(Ge,{variant:"secondary",className:"bg-amber-700 text-amber-100 border-amber-600/50 text-xs",children:e.cut}),(e.tin_total_quantity_oz||0)>0&&i.jsxs(Ge,{className:"bg-amber-600/90 text-white border-0 text-xs font-semibold",children:[s("tobaccoExtended.tin"),": ",aa(+(e.tin_total_quantity_oz||0))]}),(e.bulk_total_quantity_oz||0)>0&&i.jsxs(Ge,{className:"bg-blue-600/90 text-white border-0 text-xs font-semibold",children:[s("tobaccoExtended.bulk"),": ",aa(+(e.bulk_total_quantity_oz||0))]}),(e.pouch_total_quantity_oz||0)>0&&i.jsxs(Ge,{className:"bg-purple-600/90 text-white border-0 text-xs font-semibold",children:[s("tobaccoExtended.pouches"),": ",aa(+(e.pouch_total_quantity_oz||0))]})]}),e.flavor_notes&&e.flavor_notes.length>0&&i.jsxs("p",{className:"text-xs text-[#E0D8C8]/60 truncate",children:[s("tobaccoExtended.flavors"),": ",e.flavor_notes.slice(0,5).join(", ")]})]})]})})})}const Lwe=["Virginia","Virginia/Perique","English","English Aromatic","Balkan","Aromatic","Burley","Virginia/Burley","Latakia Blend","Oriental/Turkish","Navy Flake","Dark Fired","Cavendish","Other"],Rwe=["Ribbon","Flake","Broken Flake","Ready Rubbed","Plug","Coin","Cube Cut","Crumble Cake","Shag","Rope","Twist","Other"],Dwe=["Mild","Mild-Medium","Medium","Medium-Full","Full"],Iwe=["Pleasant","Neutral","Strong","Very Strong"],Mwe=["Current Production","Discontinued","Limited Edition","Vintage"],Fwe=["Poor","Fair","Good","Excellent"],Bwe=["Earthy","Sweet","Nutty","Woody","Smoky","Spicy","Fruity","Floral","Tangy","Creamy","Peppery","Chocolate","Coffee","Vanilla","Honey","Leather","Grass","Hay","Citrus","Plum","Fig","Raisin"];function eY({blend:e,onSave:n,onCancel:r,isLoading:s}){var he;const{t:a}=$t(),[o,l]=C.useState(e||{name:"",manufacturer:"",blend_type:"",tobacco_components:[],cut:"",strength:"",room_note:"",flavor_notes:[],tin_size_oz:"",tin_total_tins:"",tin_total_quantity_oz:"",tin_tins_open:"",tin_tins_cellared:"",tin_cellared_date:"",bulk_total_quantity_oz:"",bulk_open:"",bulk_cellared:"",bulk_cellared_date:"",pouch_size_oz:"",pouch_total_pouches:"",pouch_total_quantity_oz:"",pouch_pouches_open:"",pouch_pouches_cellared:"",pouch_cellared_date:"",production_status:"",aging_potential:"",rating:null,notes:"",photo:"",logo:"",is_favorite:!1}),[c,u]=C.useState(!1),[d,f]=C.useState(!1),[m,g]=C.useState(""),[x,v]=C.useState(""),[y,b]=C.useState(!1),[N,j]=C.useState([]),[S,A]=C.useState(null),[P,L]=C.useState(null),[O,R]=C.useState(!1),[q,U]=C.useState(""),D=On();n0();const{user:M,hasPaid:G}=Kr(),Y=G,{data:Z=[]}=gx("TobaccoBlend","manufacturer"),{data:X=[]}=Dt({queryKey:["custom-tobacco-logos"],queryFn:()=>Ce.entities.TobaccoLogoLibrary.list()}),re=rn({mutationFn:W=>Ce.entities.TobaccoLogoLibrary.create(W),onSuccess:()=>{D.invalidateQueries({queryKey:["custom-tobacco-logos"]})}}),z=(W,J)=>{l(pe=>{const ue={...pe,[W]:J};if(W==="manufacturer"&&J){const me=GG(J,X);j(me),me.length===1&&!pe.logo?ue.logo=me[0].logo:me.length===0&&!pe.logo&&(ue.logo=Du(J,X))}return ue})},te=async()=>{if(!(!x.trim()||y)){b(!0);try{const W=await Ce.integrations.Core.InvokeLLM({prompt:`Find detailed information about this pipe tobacco blend: "${x}"
        
Include all available details such as:
- Official blend name
- Manufacturer/Brand
- Blend type (Virginia, English, Aromatic, etc.)
- Tobacco components (types of tobacco used)
- Cut type (Flake, Ribbon, etc.)
- Strength level
- Room note
- Flavor notes/profile
- Tin sizes commonly available
- Production status (current, discontinued, etc.)
- Aging potential

Return complete and accurate information based on the blend name or description provided.`,add_context_from_internet:!0,response_json_schema:{type:"object",properties:{name:{type:"string"},manufacturer:{type:"string"},blend_type:{type:"string"},tobacco_components:{type:"array",items:{type:"string"}},cut:{type:"string"},strength:{type:"string"},room_note:{type:"string"},flavor_notes:{type:"array",items:{type:"string"}},tin_size_oz:{type:"number"},production_status:{type:"string"},aging_potential:{type:"string"}}}});W&&(l(J=>({...J,...W})),v(""))}catch(W){console.error("Search error:",W)}finally{b(!1)}}},le=async W=>{const J=P==="logo";J?f(!0):u(!0);try{const ue=await(await fetch(W)).blob(),me=new File([ue],"cropped-image.jpg",{type:"image/jpeg"}),je=await Ce.integrations.Core.UploadFile({file:me});J?(z("logo",je.file_url),o.manufacturer&&await re.mutateAsync({brand_name:o.manufacturer,logo_url:je.file_url,is_custom:!0})):z("photo",je.file_url)}catch(pe){console.error("Upload error:",pe)}finally{A(null),L(null),J?f(!1):u(!1)}},Q=W=>{const J=W==="logo"?o.logo:o.photo;A(J),L(W)},T=()=>{m.trim()&&(z("tobacco_components",[...o.tobacco_components||[],m.trim()]),g(""))},B=W=>{z("tobacco_components",o.tobacco_components.filter((J,pe)=>pe!==W))},H=W=>{const J=o.flavor_notes||[];J.includes(W)?z("flavor_notes",J.filter(pe=>pe!==W)):z("flavor_notes",[...J,W])},ee=async W=>{if(W.preventDefault(),!e&&!Y){const pe=await av(M==null?void 0:M.email,Y,!1);if(!pe.canCreate){Ve.error(pe.reason||a("limits.tobaccoLimit",{limit:pe.limit}));return}}const J={...o,tin_size_oz:o.tin_size_oz?Number(o.tin_size_oz):null,tin_total_tins:o.tin_total_tins?Number(o.tin_total_tins):null,tin_total_quantity_oz:o.tin_total_quantity_oz?Number(o.tin_total_quantity_oz):null,tin_tins_open:o.tin_tins_open?Number(o.tin_tins_open):null,tin_tins_cellared:o.tin_tins_cellared?Number(o.tin_tins_cellared):null,bulk_total_quantity_oz:o.bulk_total_quantity_oz?Number(o.bulk_total_quantity_oz):null,bulk_open:o.bulk_open?Number(o.bulk_open):null,bulk_cellared:o.bulk_cellared?Number(o.bulk_cellared):null,pouch_size_oz:o.pouch_size_oz?Number(o.pouch_size_oz):null,pouch_total_pouches:o.pouch_total_pouches?Number(o.pouch_total_pouches):null,pouch_total_quantity_oz:o.pouch_total_quantity_oz?Number(o.pouch_total_quantity_oz):null,pouch_pouches_open:o.pouch_pouches_open?Number(o.pouch_pouches_open):null,pouch_pouches_cellared:o.pouch_pouches_cellared?Number(o.pouch_pouches_cellared):null,rating:o.rating?Math.round(Number(o.rating)):null};n(J)},ce=ve.useMemo(()=>q.trim()?X.filter(W=>{var J;return(J=W.brand_name)==null?void 0:J.toLowerCase().includes(q.toLowerCase())}):X,[X,q]);return i.jsxs(i.Fragment,{children:[S&&i.jsx(IK,{imageUrl:S,onSave:le,onCancel:()=>{A(null),L(null)}}),i.jsx(fa,{open:O,onOpenChange:R,children:i.jsxs(ma,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[i.jsxs(ho,{children:[i.jsx(fo,{children:a("tobaccoExtended.browseLibrary")}),i.jsx(Vh,{children:a("tobaccoExtended.browseLibraryDesc")})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(fs,{className:"absolute left-3 top-3 w-4 h-4 text-stone-400"}),i.jsx(at,{value:q,onChange:W=>U(W.target.value),placeholder:a("tobaccoExtended.searchBrands"),className:"pl-10"})]}),i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3 max-h-96 overflow-y-auto",children:ce.map((W,J)=>i.jsxs("button",{type:"button",onClick:()=>{z("logo",W.logo_url),R(!1),U("")},className:`relative aspect-square rounded-lg border-2 transition-all hover:border-amber-500 ${o.logo===W.logo_url?"border-amber-600 bg-amber-100":"border-stone-200 bg-white"}`,children:[i.jsx("img",{src:W.logo_url,alt:W.brand_name,className:"w-full h-full object-contain p-2"}),o.logo===W.logo_url&&i.jsx("div",{className:"absolute top-1 right-1 bg-amber-600 rounded-full p-1",children:i.jsx(vh,{className:"w-3 h-3 text-white"})}),i.jsx("p",{className:"text-xs text-stone-600 mt-1 truncate px-1",children:W.brand_name})]},J))}),ce.length===0&&i.jsxs("div",{className:"text-center py-12 text-stone-500",children:[i.jsx(lO,{className:"w-12 h-12 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:a("tobaccoExtended.noLogos")})]})]})]})}),i.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[!e&&i.jsxs(i.Fragment,{children:[i.jsxs(Ee,{className:"border-amber-200 bg-gradient-to-br from-amber-50 to-white",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsxs(et,{className:"text-lg text-[#E0D8C8] flex items-center gap-2",children:[i.jsx(fs,{className:"w-5 h-5"}),a("tobaccoExtended.searchForBlend")]}),i.jsx("p",{className:"text-sm text-stone-600",children:a("tobaccoExtended.searchDesc")})]}),i.jsx(Oe,{children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{value:x,onChange:W=>v(W.target.value),placeholder:a("tobaccoExtended.searchPlaceholder"),className:"border-stone-200",onKeyDown:W=>W.key==="Enter"&&(W.preventDefault(),te())}),i.jsx(ye,{type:"button",onClick:te,disabled:y||!x.trim(),className:"bg-amber-700 hover:bg-amber-800 shrink-0",children:y?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),a("common.searching")]}):i.jsxs(i.Fragment,{children:[i.jsx(fs,{className:"w-4 h-4 mr-2"}),a("common.search")]})})]})})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-stone-200"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-white px-2 text-stone-500",children:a("formsExtended.orEnterManually")})})]})]}),N.length>1&&i.jsxs(Ee,{className:"border-amber-200 bg-amber-50/50",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsx(et,{className:"text-lg text-stone-800",children:a("tobaccoExtended.selectLogo")}),i.jsx("p",{className:"text-sm text-stone-600",children:a("tobaccoExtended.selectLogoDesc",{manufacturer:o.manufacturer})})]}),i.jsx(Oe,{children:i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:N.map((W,J)=>i.jsxs("button",{type:"button",onClick:()=>{z("logo",W.logo),j([])},className:`relative aspect-square rounded-lg border-2 transition-all hover:border-amber-500 ${o.logo===W.logo?"border-amber-600 bg-amber-100":"border-stone-200 bg-white"}`,children:[i.jsx("img",{src:W.logo,alt:W.brand,className:"w-full h-full object-contain p-2"}),o.logo===W.logo&&i.jsx("div",{className:"absolute top-1 right-1 bg-amber-600 rounded-full p-1",children:i.jsx(vh,{className:"w-3 h-3 text-white"})}),i.jsx("p",{className:"text-xs text-stone-600 mt-1",children:W.brand})]},J))})})]}),i.jsxs(Ee,{className:"border-stone-200",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsx(et,{className:"text-lg text-[#E0D8C8]",children:a("tobaccoExtended.images")}),o.logo&&!c&&!d&&i.jsx("p",{className:"text-xs text-stone-500",children:a("tobaccoExtended.logoAutoPopulated")})]}),i.jsx(Oe,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-sm font-medium",children:a("tobaccoExtended.tinPhoto")}),i.jsx("div",{className:"flex items-center gap-4",children:o.photo?i.jsxs("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden border border-stone-200 group",children:[i.jsx("img",{src:o.photo,alt:"",className:"w-full h-full object-cover"}),i.jsxs("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100",children:[i.jsx("button",{type:"button",onClick:()=>Q("photo"),className:"bg-white/90 rounded-full p-1.5 hover:bg-white",children:i.jsx(dm,{className:"w-3.5 h-3.5 text-stone-700"})}),i.jsx("button",{type:"button",onClick:()=>z("photo",""),className:"bg-rose-500/90 rounded-full p-1.5 hover:bg-rose-600",children:i.jsx(zi,{className:"w-3.5 h-3.5 text-white"})})]})]}):i.jsx("div",{className:"w-32 h-32 rounded-lg border-2 border-dashed border-stone-300 hover:border-amber-400 transition-colors cursor-pointer flex flex-col items-center justify-center gap-1 text-stone-400 hover:text-amber-600",children:i.jsx(G1,{onPhotosSelected:W=>{const J=Array.from(W)[0];if(J){const pe=new FileReader;pe.onload=ue=>{A(ue.target.result),L("photo")},pe.readAsDataURL(J)}},existingPhotos:[],hideExisting:!0})})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(tt,{className:"text-sm font-medium",children:a("tobaccoExtended.labelLogo")}),i.jsxs(ye,{type:"button",variant:"outline",size:"sm",onClick:()=>R(!0),className:"text-xs",children:[i.jsx(lO,{className:"w-3 h-3 mr-1"}),a("tobaccoExtended.browseLibrary")]})]}),i.jsx("div",{className:"flex items-center gap-4",children:o.logo?i.jsxs("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden border border-stone-200 bg-white group",children:[i.jsx("img",{src:o.logo,alt:"",className:"w-full h-full object-contain p-2"}),i.jsxs("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100",children:[i.jsx("button",{type:"button",onClick:()=>Q("logo"),className:"bg-white/90 rounded-full p-1.5 hover:bg-white",children:i.jsx(dm,{className:"w-3.5 h-3.5 text-stone-700"})}),i.jsx("button",{type:"button",onClick:()=>z("logo",""),className:"bg-rose-500/90 rounded-full p-1.5 hover:bg-rose-600",children:i.jsx(zi,{className:"w-3.5 h-3.5 text-white"})})]})]}):i.jsx("div",{className:"w-32 h-32 rounded-lg border-2 border-dashed border-stone-300 hover:border-amber-400 transition-colors cursor-pointer flex flex-col items-center justify-center gap-1 text-stone-400 hover:text-amber-600",children:i.jsx(G1,{onPhotosSelected:W=>{const J=Array.from(W)[0];if(J){const pe=new FileReader;pe.onload=ue=>{A(ue.target.result),L("logo")},pe.readAsDataURL(J)}},existingPhotos:[],hideExisting:!0})})})]})]})})]}),i.jsxs(Ee,{className:"border-stone-200",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-lg text-[#E0D8C8]",children:a("formsExtended.basicInfo")})}),i.jsxs(Oe,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Hr,{label:a("tobaccoExtended.blendName"),required:!0,helpText:a("tobaccoExtended.blendNameHelp"),children:i.jsx(at,{value:o.name,onChange:W=>z("name",W.target.value),placeholder:a("tobaccoExtended.blendNamePlaceholder"),required:!0,className:"border-stone-200"})}),i.jsx(Hr,{label:a("tobaccoExtended.manufacturer"),helpText:a("tobaccoExtended.manufacturerHelp"),children:i.jsx(xx,{value:o.manufacturer,onValueChange:W=>z("manufacturer",W),options:Z,placeholder:a("tobaccoExtended.manufacturerPlaceholder"),searchPlaceholder:a("common.searchPlaceholder"),allowCustom:!0,className:"border-stone-200"})}),i.jsx(Hr,{label:a("tobaccoExtended.blendType"),helpText:a("tobaccoExtended.blendTypeHelp"),children:i.jsxs(pn,{value:o.blend_type,onValueChange:W=>z("blend_type",W),children:[i.jsx(hn,{className:"border-stone-200",children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:Lwe.map(W=>i.jsx(ot,{value:W,children:W},W))})]})}),i.jsx(Hr,{label:a("tobaccoExtended.cut"),helpText:a("tobaccoExtended.cutHelp"),children:i.jsxs(pn,{value:o.cut,onValueChange:W=>z("cut",W),children:[i.jsx(hn,{className:"border-stone-200",children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:Rwe.map(W=>i.jsx(ot,{value:W,children:W},W))})]})}),i.jsx(Hr,{label:a("tobaccoExtended.strength"),helpText:a("tobaccoExtended.strengthHelp"),children:i.jsxs(pn,{value:o.strength,onValueChange:W=>z("strength",W),children:[i.jsx(hn,{className:"border-stone-200",children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:Dwe.map(W=>i.jsx(ot,{value:W,children:W},W))})]})}),i.jsx(Hr,{label:a("tobaccoExtended.roomNote"),helpText:a("tobaccoExtended.roomNoteHelp"),children:i.jsxs(pn,{value:o.room_note,onValueChange:W=>z("room_note",W),children:[i.jsx(hn,{className:"border-stone-200",children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:Iwe.map(W=>i.jsx(ot,{value:W,children:W},W))})]})})]})]}),i.jsxs(Ee,{className:"border-stone-200",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsx(et,{className:"text-lg text-[#E0D8C8]",children:a("tobaccoExtended.tobaccoComponents")}),i.jsx("p",{className:"text-sm text-stone-500",children:a("tobaccoExtended.tobaccoComponentsDesc")})]}),i.jsxs(Oe,{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{value:m,onChange:W=>g(W.target.value),placeholder:a("tobaccoExtended.componentPlaceholder"),className:"border-stone-200",onKeyDown:W=>W.key==="Enter"&&(W.preventDefault(),T())}),i.jsx(ye,{type:"button",onClick:T,variant:"outline",className:"shrink-0",children:i.jsx(Ra,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(he=o.tobacco_components)==null?void 0:he.map((W,J)=>i.jsxs(Ge,{variant:"secondary",className:"bg-amber-100 text-amber-800 border-amber-200 gap-1",children:[W,i.jsx("button",{type:"button",onClick:()=>B(J),children:i.jsx(zi,{className:"w-3 h-3"})})]},J))})]})]}),i.jsxs(Ee,{className:"border-stone-200",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsx(et,{className:"text-lg text-[#E0D8C8]",children:a("tobaccoExtended.flavorNotes")}),i.jsx("p",{className:"text-sm text-stone-500",children:a("tobaccoExtended.flavorNotesDesc")})]}),i.jsx(Oe,{children:i.jsx("div",{className:"flex flex-wrap gap-2",children:Bwe.map(W=>{var J;return i.jsx(Ge,{variant:"secondary",className:`cursor-pointer transition-colors ${(J=o.flavor_notes)!=null&&J.includes(W)?"bg-amber-600 text-white border-amber-700":"bg-stone-100 text-stone-600 border-stone-200 hover:bg-stone-200"}`,onClick:()=>H(W),children:W},W)})})})]}),i.jsxs(Ee,{className:"border-stone-200",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsx(et,{className:"text-lg text-[#E0D8C8]",children:a("tobaccoExtended.inventoryStatus")}),i.jsx("p",{className:"text-sm text-stone-500",children:a("tobaccoExtended.inventoryStatusDesc")})]}),i.jsxs(Oe,{className:"space-y-6",children:[i.jsxs(Ec,{defaultValue:"tins",className:"w-full",children:[i.jsxs(Tc,{className:"grid w-full grid-cols-3",children:[i.jsx(En,{value:"tins",children:a("tobaccoExtended.tins")}),i.jsx(En,{value:"bulk",children:a("tobaccoExtended.bulk")}),i.jsx(En,{value:"pouches",children:a("tobaccoExtended.pouches")})]}),i.jsx(Tn,{value:"tins",className:"space-y-4 mt-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.tinSize")}),i.jsx(at,{type:"number",step:"0.01",min:"0",value:o.tin_size_oz||"",onChange:W=>{z("tin_size_oz",W.target.value),W.target.value&&o.tin_total_tins&&z("tin_total_quantity_oz",Number(W.target.value)*Number(o.tin_total_tins))},placeholder:"e.g., 1.75",className:"border-stone-200"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.totalTins")}),i.jsx(at,{type:"number",min:"0",value:o.tin_total_tins||"",onChange:W=>{z("tin_total_tins",W.target.value),W.target.value&&o.tin_size_oz&&z("tin_total_quantity_oz",Number(o.tin_size_oz)*Number(W.target.value))},placeholder:"e.g., 5",className:"border-stone-200"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.totalQuantity")}),i.jsx(at,{type:"number",step:"0.01",min:"0",value:o.tin_total_quantity_oz||"",onChange:W=>z("tin_total_quantity_oz",W.target.value),placeholder:a("tobaccoExtended.autoCalculated"),className:"border-stone-200 bg-stone-50",readOnly:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.tinsOpen")}),i.jsx(at,{type:"number",min:"0",value:o.tin_tins_open||"",onChange:W=>{z("tin_tins_open",W.target.value),W.target.value&&o.tin_size_oz&&o.tin_tins_cellared&&z("tin_total_quantity_oz",Number(W.target.value)*Number(o.tin_size_oz)+Number(o.tin_tins_cellared)*Number(o.tin_size_oz))},placeholder:"e.g., 1",className:"border-stone-200"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.tinsCellared")}),i.jsx(at,{type:"number",min:"0",value:o.tin_tins_cellared||"",onChange:W=>{z("tin_tins_cellared",W.target.value),W.target.value&&o.tin_size_oz&&o.tin_tins_open&&z("tin_total_quantity_oz",Number(o.tin_tins_open)*Number(o.tin_size_oz)+Number(W.target.value)*Number(o.tin_size_oz))},placeholder:"e.g., 4",className:"border-stone-200"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.dateCellared")}),i.jsx(at,{type:"date",value:o.tin_cellared_date||"",onChange:W=>z("tin_cellared_date",W.target.value),className:"border-stone-200"})]})]})}),i.jsx(Tn,{value:"bulk",className:"space-y-4 mt-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.bulkTotalQuantity")}),i.jsx(at,{type:"number",step:"0.01",min:"0",value:o.bulk_total_quantity_oz||"",onChange:W=>z("bulk_total_quantity_oz",W.target.value),placeholder:"e.g., 16",className:"border-stone-200"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.bulkOpen")}),i.jsx(at,{type:"number",step:"0.01",min:"0",value:o.bulk_open||"",onChange:W=>{z("bulk_open",W.target.value),W.target.value&&o.bulk_cellared!==void 0&&o.bulk_cellared!==""&&z("bulk_total_quantity_oz",Number(W.target.value)+Number(o.bulk_cellared))},placeholder:"e.g., 2",className:"border-stone-200"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.bulkCellared")}),i.jsx(at,{type:"number",step:"0.01",min:"0",value:o.bulk_cellared||"",onChange:W=>{z("bulk_cellared",W.target.value),W.target.value&&o.bulk_open!==void 0&&o.bulk_open!==""&&z("bulk_total_quantity_oz",Number(o.bulk_open)+Number(W.target.value))},placeholder:"e.g., 14",className:"border-stone-200"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.dateCellared")}),i.jsx(at,{type:"date",value:o.bulk_cellared_date||"",onChange:W=>z("bulk_cellared_date",W.target.value),className:"border-stone-200"})]})]})}),i.jsx(Tn,{value:"pouches",className:"space-y-4 mt-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.pouchSize")}),i.jsx(at,{type:"number",step:"0.01",min:"0",value:o.pouch_size_oz||"",onChange:W=>{z("pouch_size_oz",W.target.value),W.target.value&&o.pouch_total_pouches&&z("pouch_total_quantity_oz",Number(W.target.value)*Number(o.pouch_total_pouches))},placeholder:"e.g., 1.5",className:"border-stone-200"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.totalPouches")}),i.jsx(at,{type:"number",min:"0",value:o.pouch_total_pouches||"",onChange:W=>{z("pouch_total_pouches",W.target.value),W.target.value&&o.pouch_size_oz&&z("pouch_total_quantity_oz",Number(o.pouch_size_oz)*Number(W.target.value))},placeholder:"e.g., 3",className:"border-stone-200"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.totalQuantity")}),i.jsx(at,{type:"number",step:"0.01",min:"0",value:o.pouch_total_quantity_oz||"",onChange:W=>z("pouch_total_quantity_oz",W.target.value),placeholder:a("tobaccoExtended.autoCalculated"),className:"border-stone-200 bg-stone-50",readOnly:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.pouchesOpen")}),i.jsx(at,{type:"number",min:"0",value:o.pouch_pouches_open||"",onChange:W=>{z("pouch_pouches_open",W.target.value),W.target.value&&o.pouch_size_oz&&o.pouch_pouches_cellared&&z("pouch_total_quantity_oz",Number(W.target.value)*Number(o.pouch_size_oz)+Number(o.pouch_pouches_cellared)*Number(o.pouch_size_oz))},placeholder:"e.g., 1",className:"border-stone-200"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.pouchesCellared")}),i.jsx(at,{type:"number",min:"0",value:o.pouch_pouches_cellared||"",onChange:W=>{z("pouch_pouches_cellared",W.target.value),W.target.value&&o.pouch_size_oz&&o.pouch_pouches_open&&z("pouch_total_quantity_oz",Number(o.pouch_pouches_open)*Number(o.pouch_size_oz)+Number(W.target.value)*Number(o.pouch_size_oz))},placeholder:"e.g., 2",className:"border-stone-200"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.dateCellared")}),i.jsx(at,{type:"date",value:o.pouch_cellared_date||"",onChange:W=>z("pouch_cellared_date",W.target.value),className:"border-stone-200"})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pt-4 border-t",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.productionStatus")}),i.jsxs(pn,{value:o.production_status,onValueChange:W=>z("production_status",W),children:[i.jsx(hn,{className:"border-stone-200",children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:Mwe.map(W=>i.jsx(ot,{value:W,children:W},W))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.agingPotential")}),i.jsxs(pn,{value:o.aging_potential,onValueChange:W=>z("aging_potential",W),children:[i.jsx(hn,{className:"border-stone-200",children:i.jsx(gn,{placeholder:a("common.selectPlaceholder")})}),i.jsx(fn,{children:Fwe.map(W=>i.jsx(ot,{value:W,children:W},W))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:a("tobaccoExtended.yourRating")}),i.jsx(at,{type:"number",min:"1",max:"5",step:"1",value:o.rating||"",onChange:W=>{const J=W.target.value;(J===""||Number(J)>=1&&Number(J)<=5&&Number.isInteger(Number(J)))&&z("rating",J)},onBlur:W=>{W.target.value&&Number(W.target.value)&&z("rating",Math.round(Number(W.target.value)))},placeholder:a("tobaccoExtended.ratingPlaceholder"),className:"border-stone-200"})]})]})]})]}),i.jsxs(Ee,{className:"border-stone-200",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-lg text-stone-800",children:a("common.notes")})}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsx("div",{className:"space-y-2",children:i.jsx(Ui,{value:o.notes,onChange:W=>z("notes",W.target.value),placeholder:a("tobaccoExtended.notesPlaceholder"),className:"border-stone-200",rows:4})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ua,{checked:o.is_favorite,onCheckedChange:W=>z("is_favorite",W)}),i.jsx(tt,{children:a("formsExtended.markAsFavorite")})]})]})]}),i.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[i.jsx(ye,{type:"button",variant:"outline",onClick:r,className:"text-stone-800",children:a("common.cancel")}),i.jsxs(ye,{type:"submit",disabled:s,className:"bg-amber-700 hover:bg-amber-800",children:[s?i.jsx(Cn,{className:"w-4 h-4 animate-spin mr-2"}):null,a(e?"tobaccoExtended.updateBlend":"tobaccoExtended.addBlend")]})]})]})]})}const $we={Virginia:"bg-yellow-100 text-yellow-800 border-yellow-200","Virginia/Perique":"bg-orange-100 text-orange-800 border-orange-200",English:"bg-stone-700 text-white border-stone-600",Balkan:"bg-stone-600 text-white border-stone-500",Aromatic:"bg-purple-100 text-purple-800 border-purple-200",Burley:"bg-amber-100 text-amber-800 border-amber-200","Virginia/Burley":"bg-yellow-200 text-yellow-900 border-yellow-300","Latakia Blend":"bg-stone-800 text-white border-stone-700","Oriental/Turkish":"bg-rose-100 text-rose-800 border-rose-200"};function qwe({open:e,onOpenChange:n,onAdd:r}){const{t:s}=$t(),[a,o]=C.useState(""),[l,c]=C.useState(!1),[u,d]=C.useState([]),[f,m]=C.useState(null),g=async v=>{if(v.preventDefault(),!!a.trim()){c(!0);try{const y=await Ce.integrations.Core.InvokeLLM({prompt:`Search for information about this pipe tobacco blend: "${a}"

Search the web for detailed information about this specific tobacco blend. Include:
- Exact blend name and manufacturer
- Blend type/category (Virginia, English, Aromatic, etc.)
- Tobacco components (types of tobacco used)
- Cut type (Ribbon, Flake, etc.)
- Strength level (Mild, Medium, Full, etc.)
- Room note (how it smells to others)
- Flavor profile and tasting notes
- Tin sizes available
- Production status (current, discontinued, etc.)
- Aging potential
- Typical reviews and ratings

Return an array of relevant tobacco blend matches with detailed information. Include 3-5 results if possible.`,add_context_from_internet:!0,response_json_schema:{type:"object",properties:{blends:{type:"array",items:{type:"object",properties:{name:{type:"string"},manufacturer:{type:"string"},blend_type:{type:"string"},tobacco_components:{type:"array",items:{type:"string"}},cut:{type:"string"},strength:{type:"string"},room_note:{type:"string"},flavor_notes:{type:"array",items:{type:"string"}},tin_size_oz:{type:"number"},production_status:{type:"string"},aging_potential:{type:"string"},description:{type:"string"},typical_rating:{type:"number"}}}}}}});d(y.blends||[])}catch(y){console.error("Search error:",y)}finally{c(!1)}}},x=async v=>{m(v.name);try{const y={name:v.name||"",manufacturer:v.manufacturer||"",blend_type:v.blend_type||"",tobacco_components:v.tobacco_components||[],cut:v.cut||"",strength:v.strength||"",room_note:v.room_note||"",flavor_notes:v.flavor_notes||[],tin_size_oz:v.tin_size_oz||null,production_status:v.production_status||"",aging_potential:v.aging_potential||"",rating:v.typical_rating||null,notes:v.description||"",photo:"",quantity_owned:0},b=await Ce.entities.TobaccoBlend.create(y);r(b),o(""),d([]),n(!1)}catch(y){console.error("Add error:",y)}finally{m(null)}};return i.jsx(fa,{open:e,onOpenChange:n,children:i.jsxs(ma,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[i.jsxs(ho,{children:[i.jsxs(fo,{className:"flex items-center gap-2",children:[i.jsx(fs,{className:"w-5 h-5 text-amber-600"}),s("quickSearch.quickSearchAddTobacco")]}),i.jsx(Vh,{children:s("quickSearch.searchTobaccoDesc")})]}),i.jsxs("div",{className:"space-y-4 mt-4",children:[i.jsxs("form",{onSubmit:g,className:"flex gap-2",children:[i.jsx(at,{value:a,onChange:v=>o(v.target.value),placeholder:s("quickSearch.tobaccoPlaceholder"),className:"border-stone-200",autoFocus:!0}),i.jsx(ye,{type:"submit",disabled:l||!a.trim(),className:"bg-amber-700 hover:bg-amber-800 shrink-0",children:l?i.jsx(Cn,{className:"w-4 h-4 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(fs,{className:"w-4 h-4 mr-2"}),s("common.search")]})})]}),i.jsx(l0,{children:u.length>0&&i.jsxs(ms.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-3",children:[i.jsx("p",{className:"text-sm text-stone-600",children:s("quickSearch.foundResults",{count:u.length})}),u.map((v,y)=>i.jsx(Ee,{className:"border-stone-200 hover:border-amber-300 transition-colors",children:i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"flex items-center gap-2 mb-2",children:i.jsx("h4",{className:"font-semibold text-stone-800 text-lg",children:v.name})}),i.jsx("p",{className:"text-sm text-stone-600 font-medium",children:v.manufacturer}),v.description&&i.jsx("p",{className:"text-sm text-stone-600 mt-2 leading-relaxed",children:v.description}),i.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-3",children:[v.blend_type&&i.jsx(Ge,{variant:"secondary",className:`${$we[v.blend_type]||"bg-stone-100 text-stone-800 border-stone-200"} text-xs`,children:v.blend_type}),v.strength&&i.jsx(Ge,{variant:"secondary",className:"bg-stone-100 text-stone-700 border-stone-200 text-xs",children:v.strength}),v.cut&&i.jsx(Ge,{variant:"secondary",className:"bg-amber-100 text-amber-800 border-amber-200 text-xs",children:v.cut}),v.production_status&&i.jsx(Ge,{variant:"secondary",className:`text-xs ${v.production_status==="Discontinued"?"bg-rose-100 text-rose-800 border-rose-200":"bg-blue-100 text-blue-800 border-blue-200"}`,children:v.production_status})]}),v.flavor_notes&&v.flavor_notes.length>0&&i.jsx("div",{className:"mt-2",children:i.jsxs("p",{className:"text-xs text-stone-500",children:[s("quickSearch.flavors"),": ",v.flavor_notes.slice(0,5).join(", ")]})}),v.tobacco_components&&v.tobacco_components.length>0&&i.jsx("div",{className:"mt-1",children:i.jsxs("p",{className:"text-xs text-stone-500",children:[s("quickSearch.components"),": ",v.tobacco_components.join(", ")]})}),v.tin_size_oz&&i.jsxs("p",{className:"text-xs text-stone-500 mt-1",children:[s("quickSearch.tinSize"),": ",v.tin_size_oz,"oz"]})]}),i.jsxs("div",{className:"shrink-0 text-right space-y-3",children:[v.typical_rating&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-stone-500",children:s("quickSearch.avgRating")}),i.jsxs("p",{className:"font-semibold text-amber-700 text-sm flex items-center gap-1",children:["⭐ ",v.typical_rating,"/5"]})]}),i.jsx(ye,{onClick:()=>x(v),disabled:f!==null,className:"bg-emerald-600 hover:bg-emerald-700 w-full",children:f===v.name?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),s("quickSearch.adding")]}):i.jsxs(i.Fragment,{children:[i.jsx(Ra,{className:"w-4 h-4 mr-2"}),s("quickSearch.addToCellar")]})})]})]})})},y))]})}),!l&&u.length===0&&a&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-stone-500",children:s("quickSearch.noResults")})}),!a&&!l&&u.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"text-4xl mb-3",children:"🔍"}),i.jsx("p",{className:"text-stone-500",children:s("quickSearch.enterTobaccoName")}),i.jsx("p",{className:"text-xs text-stone-400 mt-2",children:s("quickSearch.tobaccoExamples")})]})]})]})})}function zwe(){const{t:e}=$t(),[n,r]=C.useState(!1),{data:s}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me()}),{data:a=[]}=Dt({queryKey:["tobacco-blends",s==null?void 0:s.email],queryFn:()=>Ce.entities.TobaccoBlend.filter({created_by:s==null?void 0:s.email}),enabled:!!(s!=null&&s.email)}),o=()=>{const c=["Name","Manufacturer","Blend Type","Cut","Strength","Room Note","Tobacco Components","Flavor Notes","Production Status","Aging Potential","Rating","Is Favorite","Total Tins","Tin Size (oz)","Tins Open","Tins Cellared","Tin Cellared Date","Tin Total Weight (oz)","Total Bulk (oz)","Bulk Open (oz)","Bulk Cellared (oz)","Bulk Cellared Date","Total Pouches","Pouch Size (oz)","Pouches Open","Pouches Cellared","Pouch Cellared Date","Pouch Total Weight (oz)","Overall Total Weight (oz)","Overall Open Weight (oz)","Overall Cellared Weight (oz)","Notes"],u=a.map(x=>{const v=(x.tin_tins_open||0)*(x.tin_size_oz||0),y=(x.tin_tins_cellared||0)*(x.tin_size_oz||0),b=(x.pouch_pouches_open||0)*(x.pouch_size_oz||0),N=(x.pouch_pouches_cellared||0)*(x.pouch_size_oz||0),j=(x.tin_total_quantity_oz||0)+(x.bulk_total_quantity_oz||0)+(x.pouch_total_quantity_oz||0),S=v+(x.bulk_open||0)+b,A=y+(x.bulk_cellared||0)+N;return[x.name||"",x.manufacturer||"",x.blend_type||"",x.cut||"",x.strength||"",x.room_note||"",Array.isArray(x.tobacco_components)?x.tobacco_components.join("; "):"",Array.isArray(x.flavor_notes)?x.flavor_notes.join("; "):"",x.production_status||"",x.aging_potential||"",x.rating||"",x.is_favorite?"Yes":"No",x.tin_total_tins||0,x.tin_size_oz||0,x.tin_tins_open||0,x.tin_tins_cellared||0,x.tin_cellared_date||"",x.tin_total_quantity_oz||0,x.bulk_total_quantity_oz||0,x.bulk_open||0,x.bulk_cellared||0,x.bulk_cellared_date||"",x.pouch_total_pouches||0,x.pouch_size_oz||0,x.pouch_pouches_open||0,x.pouch_pouches_cellared||0,x.pouch_cellared_date||"",x.pouch_total_quantity_oz||0,j.toFixed(2),S.toFixed(2),A.toFixed(2),x.notes||""]}),d=[c.join(","),...u.map(x=>x.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(","))].join(`
`),f=new Blob([d],{type:"text/csv"}),m=window.URL.createObjectURL(f),g=document.createElement("a");g.href=m,g.download=`tobacco-collection-${new Date().toISOString().split("T")[0]}.csv`,g.click(),window.URL.revokeObjectURL(m)},l=async()=>{r(!0);try{const c=new Yt,u=c.internal.pageSize.getWidth();c.setFontSize(20),c.text("Tobacco Collection Summary",u/2,20,{align:"center"}),c.setFontSize(10),c.text(`Generated: ${new Date().toLocaleDateString()}`,u/2,28,{align:"center"}),c.setFontSize(12);const d=a.length,f=[...new Set(a.map(D=>D.manufacturer).filter(Boolean))].length,m=a.filter(D=>D.is_favorite).length,g=a.reduce((D,M)=>D+(M.tin_total_tins||0),0),x=a.reduce((D,M)=>D+(M.tin_total_quantity_oz||0),0),v=a.reduce((D,M)=>D+(M.tin_tins_open||0)*(M.tin_size_oz||0),0),y=a.reduce((D,M)=>D+(M.tin_tins_cellared||0)*(M.tin_size_oz||0),0),b=a.reduce((D,M)=>D+(M.bulk_total_quantity_oz||0),0),N=a.reduce((D,M)=>D+(M.bulk_open||0),0),j=a.reduce((D,M)=>D+(M.bulk_cellared||0),0),S=a.reduce((D,M)=>D+(M.pouch_total_pouches||0),0),A=a.reduce((D,M)=>D+(M.pouch_total_quantity_oz||0),0),P=a.reduce((D,M)=>D+(M.pouch_pouches_open||0)*(M.pouch_size_oz||0),0),L=a.reduce((D,M)=>D+(M.pouch_pouches_cellared||0)*(M.pouch_size_oz||0),0),O=x+b+A,R=v+N+P,q=y+j+L;let U=40;c.text(`Total Blends: ${d}`,20,U),U+=6,c.text(`Unique Brands: ${f}`,20,U),U+=6,c.text(`Favorites: ${m}`,20,U),U+=10,c.setFont(void 0,"bold"),c.text("Tin Inventory:",20,U),c.setFont(void 0,"normal"),U+=6,c.text(`  Total Tins: ${g} (${x.toFixed(1)} oz)`,20,U),U+=6,c.text(`  Open: ${v.toFixed(1)} oz`,20,U),U+=6,c.text(`  Cellared: ${y.toFixed(1)} oz`,20,U),U+=10,c.setFont(void 0,"bold"),c.text("Bulk Inventory:",20,U),c.setFont(void 0,"normal"),U+=6,c.text(`  Total: ${b.toFixed(1)} oz`,20,U),U+=6,c.text(`  Open: ${N.toFixed(1)} oz`,20,U),U+=6,c.text(`  Cellared: ${j.toFixed(1)} oz`,20,U),U+=10,c.setFont(void 0,"bold"),c.text("Pouch Inventory:",20,U),c.setFont(void 0,"normal"),U+=6,c.text(`  Total Pouches: ${S} (${A.toFixed(1)} oz)`,20,U),U+=6,c.text(`  Open: ${P.toFixed(1)} oz`,20,U),U+=6,c.text(`  Cellared: ${L.toFixed(1)} oz`,20,U),U+=10,c.setFont(void 0,"bold"),c.text("Overall Totals:",20,U),c.setFont(void 0,"normal"),U+=6,c.text(`  Total Weight: ${O.toFixed(1)} oz`,20,U),U+=6,c.text(`  Total Open: ${R.toFixed(1)} oz`,20,U),U+=6,c.text(`  Total Cellared: ${q.toFixed(1)} oz`,20,U),U+=10,c.setFontSize(14),c.text("Blend Details:",20,U),U+=10,c.setFontSize(9),a.forEach((D,M)=>{U>270&&(c.addPage(),U=20),c.setFont(void 0,"bold"),c.text(`${M+1}. ${D.name}`,20,U),c.setFont(void 0,"normal"),U+=5,D.manufacturer&&(c.text(`Manufacturer: ${D.manufacturer}`,25,U),U+=5),D.blend_type&&(c.text(`Type: ${D.blend_type} | Cut: ${D.cut||"N/A"} | Strength: ${D.strength||"N/A"}`,25,U),U+=5);const G=D.tin_total_quantity_oz||0,Y=D.bulk_total_quantity_oz||0,Z=D.pouch_total_quantity_oz||0,X=G+Y+Z;if(X>0&&(G>0&&(c.text(`Tins: ${D.tin_total_tins||0} (${G.toFixed(2)} oz) - ${D.tin_tins_open||0} open, ${D.tin_tins_cellared||0} cellared`,25,U),U+=5),Y>0&&(c.text(`Bulk: ${Y.toFixed(2)} oz - ${(D.bulk_open||0).toFixed(2)} oz open, ${(D.bulk_cellared||0).toFixed(2)} oz cellared`,25,U),U+=5),Z>0&&(c.text(`Pouches: ${D.pouch_total_pouches||0} (${Z.toFixed(2)} oz) - ${D.pouch_pouches_open||0} open, ${D.pouch_pouches_cellared||0} cellared`,25,U),U+=5),c.text(`Total: ${X.toFixed(2)} oz`,25,U),U+=5),D.rating&&(c.text(`Rating: ${"★".repeat(D.rating)}${"☆".repeat(5-D.rating)}`,25,U),U+=5),D.notes){const re=c.splitTextToSize(`Notes: ${D.notes}`,u-50);c.text(re,25,U),U+=re.length*5}U+=5}),c.save(`tobacco-collection-${new Date().toISOString().split("T")[0]}.pdf`)}finally{r(!1)}};return i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ye,{variant:"outline",size:"sm",onClick:o,disabled:n||a.length===0,children:[i.jsx(O4,{className:"w-4 h-4 mr-2"}),e("tobaccoPage.exportCSV")]}),i.jsxs(ye,{variant:"outline",size:"sm",onClick:l,disabled:n||a.length===0,children:[i.jsx(L4,{className:"w-4 h-4 mr-2"}),e("tobaccoPage.exportPDF")]})]})}var Uwe="Separator",aD="horizontal",Vwe=["horizontal","vertical"],tY=C.forwardRef((e,n)=>{const{decorative:r,orientation:s=aD,...a}=e,o=Hwe(s)?s:aD,c=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return i.jsx(At.div,{"data-orientation":o,...c,...a,ref:n})});tY.displayName=Uwe;function Hwe(e){return Vwe.includes(e)}var nY=tY;const Wwe=C.forwardRef(({className:e,orientation:n="horizontal",decorative:r=!0,...s},a)=>i.jsx(nY,{ref:a,decorative:r,orientation:n,className:ut("shrink-0 bg-border",n==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));Wwe.displayName=nY.displayName;function Kwe({selectedCount:e,onUpdate:n,onCancel:r,isLoading:s,selectedBlends:a}){const{t:o}=$t(),[l,c]=C.useState({quantity_owned:"",packaging_type:"none",tin_status:"none",is_favorite:"none",rating:""}),u=d=>{d.preventDefault();const f={},m=l.packaging_type!=="none"?l.packaging_type:null;if(l.quantity_owned!==""){const g=Number(l.quantity_owned);m&&(m==="tin"?f.tin_total_tins=g:m==="bulk"?f.bulk_total_quantity_oz=g:m==="pouch"&&(f.pouch_total_pouches=g))}l.tin_status&&l.tin_status!=="none"&&(f.tin_status=l.tin_status),l.is_favorite!=="none"&&(f.is_favorite=l.is_favorite==="true"),l.rating!==""&&(f.rating=Math.round(Number(l.rating))),n(a,f)};return i.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t-4 border-amber-600 shadow-2xl",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:i.jsxs("form",{onSubmit:u,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-stone-800",children:[o("quickEdit.quickEdit","Quick Edit")," ",e," ",o("quickEdit.blend","Blend"),e!==1?o("quickEdit.plural","s"):""]}),i.jsx(ye,{type:"button",variant:"ghost",size:"icon",onClick:r,children:i.jsx(zi,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-xs",children:o("quickEdit.addToQuantity","Add to Quantity")}),i.jsx(at,{type:"number",min:"0",step:"1",value:l.quantity_owned,onChange:d=>c(f=>({...f,quantity_owned:d.target.value})),placeholder:o("quickEdit.quantityPlaceholder","e.g., 3"),className:"h-9"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-xs",children:o("quickEdit.packagingType","Packaging Type")}),i.jsxs(pn,{value:l.packaging_type,onValueChange:d=>c(f=>({...f,packaging_type:d})),children:[i.jsx(hn,{className:"h-9",children:i.jsx(gn,{placeholder:o("quickEdit.dontUpdate","Don't update")})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"none",children:o("quickEdit.dontUpdate","Don't update")}),i.jsx(ot,{value:"tin",children:o("tobaccoExtended.tin","Tin")}),i.jsx(ot,{value:"bulk",children:o("tobaccoExtended.bulk","Bulk")}),i.jsx(ot,{value:"pouch",children:o("tobaccoExtended.pouch","Pouch")})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-xs",children:o("quickEdit.tinStatus","Tin Status")}),i.jsxs(pn,{value:l.tin_status,onValueChange:d=>c(f=>({...f,tin_status:d})),children:[i.jsx(hn,{className:"h-9",children:i.jsx(gn,{placeholder:o("quickEdit.dontUpdate","Don't update")})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"none",children:o("quickEdit.dontUpdate","Don't update")}),i.jsx(ot,{value:"Sealed/Cellared",children:o("quickEdit.sealedCellared","Sealed/Cellared")}),i.jsx(ot,{value:"Opened",children:o("quickEdit.opened","Opened")}),i.jsx(ot,{value:"Empty",children:o("quickEdit.empty","Empty")})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-xs",children:o("quickEdit.markAsFavorite","Mark as Favorite")}),i.jsxs(pn,{value:l.is_favorite,onValueChange:d=>c(f=>({...f,is_favorite:d})),children:[i.jsx(hn,{className:"h-9",children:i.jsx(gn,{placeholder:o("quickEdit.dontUpdate","Don't update")})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"none",children:o("quickEdit.dontUpdate","Don't update")}),i.jsx(ot,{value:"true",children:o("common.yes","Yes")}),i.jsx(ot,{value:"false",children:o("common.no","No")})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-xs",children:o("quickEdit.rating","Rating (1-5)")}),i.jsx(at,{type:"number",min:"1",max:"5",step:"1",value:l.rating,onChange:d=>{const f=d.target.value;(f===""||Number(f)>=1&&Number(f)<=5)&&c(m=>({...m,rating:f}))},placeholder:o("common.optional","Optional"),className:"h-9"})]})]}),i.jsxs("div",{className:"flex gap-3 justify-end",children:[i.jsx(ye,{type:"button",variant:"outline",onClick:r,size:"sm",children:o("common.cancel")}),i.jsxs(ye,{type:"submit",disabled:s,className:"bg-amber-700 hover:bg-amber-800",size:"sm",children:[o("quickEdit.update","Update")," ",e," ",o("quickEdit.blend","Blend"),e!==1?o("quickEdit.plural","s"):""]})]})]})})})}function Gwe(e){if(!e)return 0;const n=(Number(e.tin_tins_cellared)||0)*(Number(e.tin_size_oz)||0),r=Number(e.bulk_cellared)||0,s=(Number(e.pouch_pouches_cellared)||0)*(Number(e.pouch_size_oz)||0);return n+r+s}function Ywe(e,n=null){const r=Array.isArray(e)?e:[];return(n?r.filter(a=>String(a.blend_id)===String(n)):r).reduce((a,o)=>{if(!o)return a;const l=Number(o.amount_oz)||0;return o.transaction_type==="added"?a+l:o.transaction_type==="removed"?a-l:a},0)}function Qwe(e,n){const r=Ywe(n,e.id),s=Gwe(e),a=Math.abs(r-s);return{hasDrift:a>.1,logValue:r,entityValue:s,drift:a}}function Xwe(e,n){const r=[];return(e||[]).forEach(s=>{if(!s)return;const a=Qwe(s,n);a.hasDrift&&r.push({blend_id:s.id,blend_name:s.name,...a})}),r}function Jwe(e,n){const r=(n||[]).filter(l=>String(l.blend_id)===String(e.id)),s={tin:0,bulk:0,pouch:0,jar:0,other:0};r.forEach(l=>{if(!l)return;const c=Number(l.amount_oz)||0,u=(l.container_type||"other").toLowerCase(),d=l.transaction_type==="added"?c:-c;u==="tin"?s.tin+=d:u==="bulk"||u==="jar"?s.bulk+=d:u==="pouch"?s.pouch+=d:s.other+=d});const a=Number(e.tin_size_oz)||1,o=Number(e.pouch_size_oz)||1;return{tin_tins_cellared:Math.max(0,Math.round(s.tin/a)),bulk_cellared:Math.max(0,s.bulk+s.jar+s.other),pouch_pouches_cellared:Math.max(0,Math.round(s.pouch/o))}}function Zwe({blends:e,user:n}){const[r,s]=C.useState(!1),[a,o]=C.useState(!1),l=On(),{data:c=[]}=Dt({queryKey:["cellar-logs",n==null?void 0:n.email],queryFn:()=>Ce.entities.CellarLog.filter({created_by:n.email}),enabled:!!(n!=null&&n.email)}),u=Xwe(e,c);if(u.length===0)return null;const d=u.reduce((m,g)=>m+Math.abs(g.drift),0),f=async()=>{o(!0);try{let m=0;for(const g of u){const x=e.find(y=>y.id===g.blend_id);if(!x)continue;const v=Jwe(x,c);await xr("TobaccoBlend",x.id,v,n==null?void 0:n.email),m++}await l.invalidateQueries({queryKey:["blends"]}),Ve.success(`Reconciled ${m} blend(s) - cellared amounts synced to transaction history`),s(!1)}catch(m){console.error("Reconciliation failed:",m),Ve.error("Failed to reconcile inventory")}finally{o(!1)}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-4 p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-3",children:[i.jsx(vn,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-amber-900",children:"Cellar Inventory Drift Detected"}),i.jsxs("p",{className:"text-sm text-amber-800 mt-1",children:[u.length," blend(s) have cellared amounts that don't match your transaction logs (",d.toFixed(2)," oz total difference)."]})]}),i.jsx("div",{className:"flex gap-2",children:i.jsx(ye,{size:"sm",variant:"outline",onClick:()=>s(!0),className:"border-amber-300 text-amber-900 hover:bg-amber-100",children:"View Details"})})]}),i.jsx(fa,{open:r,onOpenChange:s,children:i.jsxs(ma,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[i.jsxs(ho,{children:[i.jsx(fo,{children:"Cellar Inventory Reconciliation"}),i.jsxs(Vh,{children:["Source of truth: CellarLog transactions. This will update ",u.length," computed cellared totals based on your transaction history. Your notes and other data remain unchanged."]})]}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:i.jsxs("p",{className:"text-sm text-blue-900",children:[i.jsx("strong",{children:"What will be updated:"})," Only cellared quantity fields (tin_tins_cellared, bulk_cellared, pouch_pouches_cellared) will be recalculated from your CellarLog transaction history. Your notes, names, photos, and all other data remain unchanged."]})}),i.jsx("div",{className:"space-y-3",children:u.map(m=>i.jsxs("div",{className:"p-3 bg-stone-50 rounded-lg border border-stone-200",children:[i.jsx("h4",{className:"font-semibold text-stone-900",children:m.blend_name}),i.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-stone-600",children:"Current (computed):"}),i.jsxs("span",{className:"font-mono",children:[m.entityValue.toFixed(2)," oz"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-stone-600",children:"Will change to (ledger):"}),i.jsxs("span",{className:"font-mono text-emerald-700 font-semibold",children:[m.logValue.toFixed(2)," oz"]})]}),i.jsxs("div",{className:"flex justify-between border-t border-stone-200 pt-1 mt-1",children:[i.jsx("span",{className:"text-stone-600",children:"Difference:"}),i.jsxs("span",{className:`font-mono font-semibold ${m.drift>0?"text-red-600":"text-blue-600"}`,children:[m.drift>0?"+":"",m.drift.toFixed(2)," oz"]})]})]})]},m.blend_id))}),i.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[i.jsx(ye,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),i.jsx(ye,{onClick:f,disabled:a,className:"bg-emerald-600 hover:bg-emerald-700",children:a?i.jsxs(i.Fragment,{children:[i.jsx($s,{className:"w-4 h-4 mr-2 animate-spin"}),"Reconciling..."]}):i.jsxs(i.Fragment,{children:[i.jsx($s,{className:"w-4 h-4 mr-2"}),"Reconcile All (",u.length,")"]})})]})]})})]})}const e2e=["American","Aromatic","Balkan","Burley","Burley-based","Cavendish","Codger Blend","Dark Fired Kentucky","English","English Aromatic","English Balkan","Full English/Oriental","Kentucky","Lakeland","Latakia Blend","Navy Flake","Oriental/Turkish","Other","Perique","Shag","Virginia","Virginia/Burley","Virginia/Oriental","Virginia/Perique"],t2e=["Mild","Mild-Medium","Medium","Medium-Full","Full"],n2e=[{value:"-created_date",label:"tobaccoPage.recentlyAdded"},{value:"favorites",label:"tobaccoPage.favoritesFirst"},{value:"name",label:"tobaccoPage.nameAZ"},{value:"-name",label:"tobaccoPage.nameZA"},{value:"-rating",label:"tobaccoPage.highestRated"},{value:"rating",label:"tobaccoPage.lowestRated"},{value:"cellared_date",label:"tobaccoPage.oldestInCellar"},{value:"-cellared_date",label:"tobaccoPage.newestInCellar"}];function rY(){const[e,n]=C.useState(!1),[r,s]=C.useState(null),[a,o]=C.useState(""),[l,c]=C.useState(""),[u,d]=C.useState(""),[f,m]=C.useState("-created_date"),[g,x]=C.useState(()=>localStorage.getItem("tobaccoViewMode")||"grid"),[v,y]=C.useState(!1),[b,N]=C.useState(!1),[j,S]=C.useState(!1),[A,P]=C.useState([]),[L,O]=C.useState(!1),R=On(),{t:q}=$t(),{user:U,hasPaid:D,isTrial:M}=Kr(),{data:G=[],isLoading:Y}=Dt({queryKey:["blends",U==null?void 0:U.email,f],queryFn:async()=>{try{const W=f==="favorites"?"-created_date":f,J=await y1e.TobaccoBlend.filterForUser(U==null?void 0:U.email,{},W);let pe=Array.isArray(J)?J:[];return f==="favorites"&&(pe=pe.sort((ue,me)=>ue.is_favorite&&!me.is_favorite?-1:!ue.is_favorite&&me.is_favorite?1:0)),pe}catch(W){return console.error("Blends load error:",W),[]}},enabled:!!(U!=null&&U.email),retry:2,staleTime:1e4}),Z=rn({mutationFn:async W=>{const J=await av(U==null?void 0:U.email,D,M);if(!J.canCreate)throw new Error(J.reason||"Cannot create tobacco blend");return Ce.entities.TobaccoBlend.create(W)},onSuccess:()=>{Qp(R,U==null?void 0:U.email),n(!1),Ve.success(q("notifications.created"))},onError:W=>{Ve.error(W.message||q("tobaccoPage.failedToAddBlend"))}}),X=rn({mutationFn:({id:W,data:J})=>xr("TobaccoBlend",W,J,U==null?void 0:U.email),onSuccess:()=>{Qp(R,U==null?void 0:U.email),n(!1),s(null)}}),re=rn({mutationFn:async({blendIds:W,updateData:J})=>{var je;const pe=(W||[]).map(ze=>{const Te=(G||[]).find(ht=>ht&&ht.id===ze);if(!Te)return null;const xe={...J};return J.quantity_owned!==void 0&&(xe.quantity_owned=(Number(Te.quantity_owned)||0)+Number(J.quantity_owned||0)),{id:ze,data:xe}}).filter(Boolean),me=(await zoe("TobaccoBlend",pe,U==null?void 0:U.email)).filter(ze=>!(ze!=null&&ze.success));if(me.length)throw new Error(((je=me[0])==null?void 0:je.error)||"Bulk update failed");return pe.length},onSuccess:W=>{Qp(R,U==null?void 0:U.email),Ve.success(q("tobaccoPage.successfullyUpdated",`Successfully updated ${W} blend${W!==1?"s":""}!`)),he()},onError:W=>{Ve.error(q("tobaccoPage.failedToUpdateBlends","Failed to update blends. Please try again.")),console.error("Bulk update error:",W)}}),z=W=>{r?X.mutate({id:r.id,data:W}):Z.mutate(W)},te=W=>{R.invalidateQueries({queryKey:["blends",U==null?void 0:U.email]}),s(W),n(!0)},le=(W,J)=>{re.mutate({blendIds:W,updateData:J})},Q=rn({mutationFn:({id:W,is_favorite:J})=>xr("TobaccoBlend",W,{is_favorite:J},U==null?void 0:U.email),onMutate:async({id:W,is_favorite:J})=>{await R.cancelQueries({queryKey:["blends",U==null?void 0:U.email,f]});const pe=R.getQueryData(["blends",U==null?void 0:U.email,f]);return R.setQueryData(["blends",U==null?void 0:U.email,f],ue=>(ue||[]).map(me=>(me==null?void 0:me.id)===W?{...me,is_favorite:J}:me)),{previousBlends:pe}},onError:(W,J,pe)=>{R.setQueryData(["blends",U==null?void 0:U.email,f],pe==null?void 0:pe.previousBlends)}}),T=W=>{Q.mutate({id:W.id,is_favorite:!W.is_favorite})},B=(G||[]).filter(W=>{var me,je;if(!W)return!1;const J=!a||((me=W.name)==null?void 0:me.toLowerCase().includes(a.toLowerCase()))||((je=W.manufacturer)==null?void 0:je.toLowerCase().includes(a.toLowerCase())),pe=!l||W.blend_type===l,ue=!u||W.strength===u;return J&&pe&&ue}),H=(G||[]).reduce((W,J)=>W+(Number(J==null?void 0:J.quantity_owned)||0),0),ee=W=>{P(J=>J.includes(W)?J.filter(pe=>pe!==W):[...J,W])},ce=()=>{A.length===B.length&&B.length>0?P([]):P((B||[]).map(W=>W==null?void 0:W.id).filter(Boolean))},he=()=>{S(!1),P([]),O(!1)};return i.jsx("div",{className:`min-h-screen ${kn.pageBg}`,children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx(Zwe,{blends:G,user:U}),i.jsxs(ms.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[i.jsxs("div",{children:[i.jsx(O3,{children:q(cs?"nav.cellar":"nav.tobacco")}),i.jsxs(L3,{className:"mt-1",children:[G.length," ",q("tobaccoPage.blends")," ",H>0&&`• ${H} ${q("tobaccoPage.tinsInCellar")}`]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(zwe,{}),G.length>0&&i.jsxs(ye,{onClick:()=>{S(!j),j&&he()},variant:j?"default":"outline",className:j?kn.buttonPrimary:`${kn.buttonSecondary} text-white`,children:[i.jsx(cO,{className:"w-4 h-4 mr-2"}),q(j?"tobaccoPage.exitQuickEdit":"tobaccoPage.quickEdit")]}),i.jsxs(ye,{onClick:()=>y(!0),className:kn.buttonSecondary,children:[i.jsx(Da,{className:"w-4 h-4 mr-2"}),q("pipesPage.quickSearchAdd")]}),i.jsxs(ye,{onClick:async()=>{const W=await av(U==null?void 0:U.email,D,M);if(!W.canCreate){Ve.error(W.reason,{action:{label:q("subscription.upgrade"),onClick:()=>window.location.href=xt("Subscription")}});return}s(null),n(!0)},className:kn.buttonPrimary,children:[i.jsx(Ra,{className:"w-4 h-4 mr-2"}),q("tobaccoPage.addBlend")]})]})]}),j&&i.jsxs("div",{className:`flex items-center gap-3 p-4 ${kn.card} rounded-xl mb-4 cursor-pointer`,onClick:ce,style:{WebkitTapHighlightColor:"transparent"},children:[i.jsx(E1,{checked:A.length===B.length&&B.length>0,onCheckedChange:ce,className:"touch-none pointer-events-none"}),i.jsxs("span",{className:`font-medium ${kn.textBody}`,children:[q("tobaccoPage.selectAll")," (",A.length," ",q("common.of")," ",B.length," ",q("tobaccoPage.selected"),")"]})]}),i.jsxs(ms.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex flex-col sm:flex-row gap-3 mb-6",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(fs,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${kn.textMuted}`}),i.jsx(at,{placeholder:q("tobaccoPage.searchPlaceholder"),value:a,onChange:W=>o(W.target.value),className:`pl-10 ${kn.input}`,"aria-label":q("tobacco.search")})]}),i.jsxs(pn,{value:l,onValueChange:c,children:[i.jsx(hn,{className:`w-full sm:w-40 ${kn.input}`,children:i.jsx(gn,{placeholder:q("tobacco.allTypes")})}),i.jsxs(fn,{children:[i.jsx(ot,{value:null,children:q("tobacco.allTypes")}),e2e.map(W=>i.jsx(ot,{value:W,children:W},W))]})]}),i.jsxs(pn,{value:u,onValueChange:d,children:[i.jsx(hn,{className:`w-full sm:w-40 ${kn.input}`,children:i.jsx(gn,{placeholder:q("tobacco.allStrengths")})}),i.jsxs(fn,{children:[i.jsx(ot,{value:null,children:q("tobacco.allStrengths")}),t2e.map(W=>i.jsx(ot,{value:W,children:W},W))]})]}),i.jsxs(pn,{value:f,onValueChange:m,children:[i.jsx(hn,{className:`w-full sm:w-48 ${kn.input}`,children:i.jsx(gn,{})}),i.jsx(fn,{children:n2e.map(W=>i.jsx(ot,{value:W.value,children:W.label.startsWith("tobaccoPage.")?q(W.label):W.label},W.value))})]}),i.jsxs("div",{className:`flex border rounded-lg ${kn.card}`,children:[i.jsx(ye,{variant:g==="grid"?"secondary":"ghost",size:"icon",onClick:()=>{x("grid"),localStorage.setItem("tobaccoViewMode","grid")},className:`rounded-r-none ${g==="grid"?kn.buttonPrimary:`${kn.textSubtle} hover:bg-[#2C3E55]/50`}`,children:i.jsx(R4,{className:"w-4 h-4"})}),i.jsx(ye,{variant:g==="list"?"secondary":"ghost",size:"icon",onClick:()=>{x("list"),localStorage.setItem("tobaccoViewMode","list")},className:`rounded-l-none ${g==="list"?kn.buttonPrimary:`${kn.textSubtle} hover:bg-[#2C3E55]/50`}`,children:i.jsx(xq,{className:"w-4 h-4"})})]})]}),Y?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4].map(W=>i.jsx("div",{className:"aspect-[4/5] bg-stone-200 rounded-xl animate-pulse"},W))}):B.length===0?i.jsx(pG,{icon:Hp,title:G.length===0?q("tobaccoPage.buildCellar","Build Your Cellar"):q("tobaccoPage.noBlendsFound","No Blends Found"),description:G.length===0?q("tobaccoPage.buildCellarDesc","Start your tobacco cellar by adding your first blend. Track inventory, aging dates, and tasting notes."):a?q("tobaccoPage.noMatchSearch",`No blends match "${a}". Try adjusting your search or filters.`):q("tobaccoPage.noMatchFilters","No blends match your current filters. Try adjusting your selections."),actionLabel:G.length===0?q("tobaccoPage.addFirstBlend","Add Your First Blend"):null,onAction:G.length===0?()=>n(!0):null,secondaryActionLabel:G.length===0?q("pipesPage.quickSearchAdd"):a||l||u?q("pipesPage.clearFilters"):null,onSecondaryAction:G.length===0?()=>y(!0):()=>{o(""),c(""),d("")}}):i.jsx(ms.div,{className:g==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"flex flex-col gap-4",layout:!0,children:i.jsx(l0,{children:B.map(W=>i.jsx(ms.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative",children:j?i.jsxs("div",{onClick:J=>{J.preventDefault(),J.stopPropagation(),ee(W.id)},className:`cursor-pointer transition-all ${A.includes(W.id)?"ring-2 ring-amber-600 rounded-xl":""}`,style:{WebkitTapHighlightColor:"transparent"},children:[i.jsx("div",{className:"absolute top-3 left-3 z-10",onClick:J=>{J.preventDefault(),J.stopPropagation(),ee(W.id)},style:{WebkitTapHighlightColor:"transparent"},children:i.jsx(E1,{checked:A.includes(W.id),className:"bg-white border-2 touch-none pointer-events-none"})}),g==="grid"?i.jsx(sD,{blend:W,onClick:()=>{}}):i.jsx(iD,{blend:W,onClick:()=>{}})]}):i.jsx("a",{href:xt(`TobaccoDetail?id=${encodeURIComponent(W.id)}`),children:g==="grid"?i.jsx(sD,{blend:W,onClick:()=>{},onToggleFavorite:T}):i.jsx(iD,{blend:W,onClick:()=>{},onToggleFavorite:T})})},W.id))})}),i.jsx(jm,{open:e,onOpenChange:n,children:i.jsxs(_h,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[i.jsx(Sh,{className:"mb-6",children:i.jsx(Ch,{children:q(r?"tobaccoPage.editBlend":"tobaccoPage.addNewBlend")})}),i.jsx(eY,{blend:r,onSave:z,onCancel:()=>{n(!1),s(null)},isLoading:Z.isPending||X.isPending})]})}),i.jsx(qwe,{open:v,onOpenChange:y,onAdd:te}),j&&A.length>0&&!L&&i.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50",children:i.jsxs(ye,{onClick:()=>O(!0),className:"bg-amber-700 hover:bg-amber-800 shadow-2xl px-6 py-6 text-lg",size:"lg",children:[i.jsx(cO,{className:"w-5 h-5 mr-2"}),q("forms.edit")," ",A.length," ",q("tobaccoPage.selected")]})}),j&&L&&A.length>0&&i.jsx(Kwe,{selectedCount:A.length,onUpdate:le,onCancel:()=>O(!1),isLoading:re.isPending,selectedBlends:A})]})})}const r2e=(e,n,r)=>Math.max(n,Math.min(r,e));function s2e(e){return String((e==null?void 0:e.blend_type)||(e==null?void 0:e.type)||"").toLowerCase().includes("aromatic")?"aromatic":"non_aromatic"}function i2e(e){const n=((e==null?void 0:e.blend_type)||"").toLowerCase();return n==="aromatic"||n==="english aromatic"||n.includes("aromatic")}function a2e(e){const n=(Array.isArray(e)?e:[]).map(d=>String(d||"").trim()).filter(Boolean),r=n.map(d=>d.toLowerCase()),s=r.some(d=>["utility","versatile","multi","multiple","any","general"].some(f=>d.includes(f))),a=r.some(d=>d.includes("heavy arom")),o=r.some(d=>d.includes("light arom")),l=r.some(d=>d.includes("medium arom"))||r.some(d=>d.includes("arom"))&&!a&&!o,c=!s&&r.some(d=>/(aromatic(s)?\s*only|aromatic[-\s]*dedicated|dedicated\s*to\s*aromatic)/.test(d)),u=!s&&r.some(d=>/(non[-\s]?aromatic(s)?\s*only|non[-\s]?aromatic[-\s]*dedicated|dedicated\s*to\s*non)/.test(d));return{focus:n,lower:r,aromaticOnly:c,nonAromaticOnly:u,wantsHeavyAromatics:a,wantsLightAromatics:o,wantsMediumAromatics:l}}function o2e(e){const n=e==null?void 0:e.aromatic_intensity;if(n==="Light"||n==="Medium"||n==="Heavy")return n;const r=String((e==null?void 0:e.flavor_notes)||"").toLowerCase();if(/(goopy|very sweet|strong topping|heavy topping|syrup|intense)/.test(r))return"Heavy";if(/(light topping|subtle|hint of|mild casing)/.test(r))return"Light";const s=String((e==null?void 0:e.strength)||"").toLowerCase();return s.includes("full")?"Heavy":s.includes("mild")?"Light":s.includes("medium")?"Medium":null}function R5(e,n){const r=String(n||"").toLowerCase();let s=0;for(const a of e)a&&(["aromatic","aromatics","non-aromatic","non aromatic"].includes(a)||r.includes(a)&&(s+=1));return s}function l2e(e,n,r){const s=a2e(e==null?void 0:e.focus),o=String(n!=null&&n.category?n.category:s2e(n)).toLowerCase()==="aromatic"||i2e(n);if(s.aromaticOnly&&!o)return{score:0,why:"Pipe is dedicated to aromatics."};if(s.nonAromaticOnly&&o)return{score:0,why:"Pipe is dedicated to non-aromatics."};let l=4;const c=[],u=String((n==null?void 0:n.tobacco_name)||(n==null?void 0:n.name)||"");if(s.lower.includes(u.toLowerCase()))return{score:10,why:"Exact blend match to pipe focus."};const d=(n==null?void 0:n.blend_type)||"",f=(n==null?void 0:n.flavor_notes)||"",m=(n==null?void 0:n.tobacco_components)||"",g=R5(s.lower,d)+R5(s.lower,f)+R5(s.lower,m);if(g>=2?(l+=4,c.push("Strong match to pipe focus keywords.")):g===1&&(l+=2,c.push("Partial match to pipe focus keywords.")),o){l+=2;const b=o2e(n);s.wantsHeavyAromatics?(b==="Heavy"?l+=2:b==="Medium"?l+=1:b==="Light"&&(l-=.5),c.push("Pipe prefers heavier aromatics.")):s.wantsLightAromatics?(b==="Light"?l+=2:b==="Medium"?l+=1:b==="Heavy"&&(l-=.5),c.push("Pipe prefers lighter aromatics.")):s.wantsMediumAromatics&&(b==="Medium"?l+=2:(b==="Light"||b==="Heavy")&&(l+=.5),c.push("Pipe prefers medium aromatics."))}const x=r||{},v=Array.isArray(x.preferred_blend_types)?x.preferred_blend_types:[],y=x.strength_preference||null;return v.some(b=>String(b).toLowerCase()===String(d).toLowerCase())&&(l+=1.5,c.push("Matches your preferred blend types.")),y&&String(y).toLowerCase()===String((n==null?void 0:n.strength)||"").toLowerCase()&&(l+=.5,c.push("Matches your preferred strength.")),l=r2e(l,0,10),{score:l,why:c.join(" ")||"General compatibility based on focus and blend characteristics."}}function c2e({blend:e,pipes:n}){const{t:r}=$t(),[s,a]=C.useState(!1),[o,l]=C.useState(null),[c,u]=C.useState(!1),{data:d}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me(),staleTime:5e3,retry:1}),{data:f}=Dt({queryKey:["activePairings",d==null?void 0:d.email],queryFn:async()=>{const b=await Ce.entities.PairingMatrix.filter({created_by:d==null?void 0:d.email,is_active:!0},"-created_date",1);if(b!=null&&b[0])return b[0];const N=await Ce.entities.PairingMatrix.filter({created_by:d==null?void 0:d.email},"-created_date",1);return(N==null?void 0:N[0])||null},enabled:!!(d!=null&&d.email)}),{data:m}=Dt({queryKey:["user-profile",d==null?void 0:d.email],queryFn:async()=>(await Ce.entities.UserProfile.filter({user_email:d==null?void 0:d.email}))[0],enabled:!!(d!=null&&d.email)}),{data:g}=Dt({queryKey:["collection-optimization",d==null?void 0:d.email],queryFn:async()=>(await Ce.entities.CollectionOptimization.filter({created_by:d==null?void 0:d.email},"-created_date",1))[0],enabled:!!(d!=null&&d.email)});ve.useMemo(()=>JSON.stringify(n.map(b=>({id:b.id,focus:b.focus}))),[n]),C.useEffect(()=>{e&&n.length>0&&x()},[e==null?void 0:e.id,n.length,f==null?void 0:f.pairings,m==null?void 0:m.id]);const x=()=>{if(!e)return;const j=n.map(S=>{const{score:A,why:P}=l2e({focus:S.focus||[],pipe_id:S.id,pipe_name:S.name},{blend_type:e==null?void 0:e.blend_type,strength:e==null?void 0:e.strength,flavor_notes:e==null?void 0:e.flavor_notes,tobacco_components:e==null?void 0:e.tobacco_components,aromatic_intensity:e==null?void 0:e.aromatic_intensity,tobacco_name:e==null?void 0:e.name,tobacco_id:e==null?void 0:e.id},m);return{pipe:S,score:A,reasoning:P}}).filter(S=>S.score>0).sort((S,A)=>A.score-S.score).slice(0,3).map(S=>({pipe_id:S.pipe.id,pipe_name:S.pipe.name,match_score:S.score,reasoning:S.reasoning}));l(j)},v=async()=>{if(n.length!==0){if(f!=null&&f.pairings){x();return}a(!0),x(),a(!1)}},y=b=>b>=9?"bg-emerald-100 text-emerald-800 border-emerald-300":b>=7?"bg-blue-100 text-blue-800 border-blue-300":"bg-amber-100 text-amber-800 border-amber-300";return n.length===0?null:i.jsx(Ee,{className:"border-[#8b3a3a]/40 bg-[#243548]/95",children:i.jsx(Oe,{className:"p-4",children:!o||o.length===0?i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Da,{className:"w-4 h-4 text-[#8b3a3a]"}),i.jsx("span",{className:"text-sm text-white font-bold",children:r("topPipeMatches.findBestMatches")})]}),i.jsx(ye,{size:"sm",onClick:v,disabled:s,className:"bg-gradient-to-r from-[#8b3a3a] to-[#6d2e2e] hover:from-[#6d2e2e] hover:to-[#5a2525]",children:s?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"w-4 h-4 mr-1 animate-spin"}),r("aiIdentifier.analyzing")]}):i.jsxs(i.Fragment,{children:[i.jsx(Da,{className:"w-4 h-4 mr-1"}),r("topPipeMatches.findMatches")]})})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Da,{className:"w-5 h-5 text-[#8b3a3a]"}),i.jsx("span",{className:"font-bold text-[#e8d5b7] text-base",children:r("topPipeMatches.topPipeMatches")})]}),i.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>u(!c),className:"text-[#e8d5b7] hover:text-[#e8d5b7] hover:bg-[#8b3a3a]/20",children:r(c?"breakInSchedule.show":"breakInSchedule.hide")})]}),!c&&i.jsx("div",{className:"space-y-2",children:o.map((b,N)=>{var S;const j=n.find(A=>String(A.id)===String(b.pipe_id));return j?i.jsx("a",{href:xt(`PipeDetail?id=${encodeURIComponent(j.id)}`),children:i.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-[#8b3a3a]/30 hover:border-[#8b3a3a] hover:bg-[#8b3a3a]/15 transition-all cursor-pointer",children:[i.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-[#1a2c42] to-[#243548] border border-[#8b3a3a]/20 overflow-hidden flex items-center justify-center shrink-0",children:(S=j.photos)!=null&&S[0]?i.jsx("img",{src:j.photos[0],alt:"",className:"w-full h-full object-cover"}):i.jsx(py,{shape:j.shape,className:"text-xl"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[i.jsxs("span",{className:"font-bold text-white text-lg",children:["#",N+1]}),i.jsx("span",{className:"font-semibold text-white",children:b.pipe_name}),i.jsxs(Ge,{className:y(b.match_score),children:[b.match_score,"/10"]})]}),i.jsx("p",{className:"text-xs text-[#e8d5b7] leading-relaxed",children:b.reasoning})]})]})},b.pipe_id):null})})]})})})}function u2e({blend:e,onUpdate:n,isUpdating:r}){const{t:s}=$t(),a=On(),[o,l]=C.useState(null),[c,u]=C.useState({tin_size_oz:(e==null?void 0:e.tin_size_oz)??"",tin_total_tins:(e==null?void 0:e.tin_total_tins)??"",tin_total_quantity_oz:(e==null?void 0:e.tin_total_quantity_oz)??"",tin_tins_open:(e==null?void 0:e.tin_tins_open)??"",tin_tins_cellared:(e==null?void 0:e.tin_tins_cellared)??"",tin_cellared_date:(e==null?void 0:e.tin_cellared_date)??"",bulk_total_quantity_oz:(e==null?void 0:e.bulk_total_quantity_oz)??"",bulk_open:(e==null?void 0:e.bulk_open)??"",bulk_cellared:(e==null?void 0:e.bulk_cellared)??"",bulk_cellared_date:(e==null?void 0:e.bulk_cellared_date)??"",pouch_size_oz:(e==null?void 0:e.pouch_size_oz)??"",pouch_total_pouches:(e==null?void 0:e.pouch_total_pouches)??"",pouch_total_quantity_oz:(e==null?void 0:e.pouch_total_quantity_oz)??"",pouch_pouches_open:(e==null?void 0:e.pouch_pouches_open)??"",pouch_pouches_cellared:(e==null?void 0:e.pouch_pouches_cellared)??"",pouch_cellared_date:(e==null?void 0:e.pouch_cellared_date)??""});ve.useEffect(()=>{e&&u({tin_size_oz:e.tin_size_oz??"",tin_total_tins:e.tin_total_tins??"",tin_total_quantity_oz:e.tin_total_quantity_oz??"",tin_tins_open:e.tin_tins_open??"",tin_tins_cellared:e.tin_tins_cellared??"",tin_cellared_date:e.tin_cellared_date??"",bulk_total_quantity_oz:e.bulk_total_quantity_oz??"",bulk_open:e.bulk_open??"",bulk_cellared:e.bulk_cellared??"",bulk_cellared_date:e.bulk_cellared_date??"",pouch_size_oz:e.pouch_size_oz??"",pouch_total_pouches:e.pouch_total_pouches??"",pouch_total_quantity_oz:e.pouch_total_quantity_oz??"",pouch_pouches_open:e.pouch_pouches_open??"",pouch_pouches_cellared:e.pouch_pouches_cellared??"",pouch_cellared_date:e.pouch_cellared_date??""})},[e]);const d=(g,x)=>{u(v=>{const y={...v,[g]:x};return(g==="tin_size_oz"||g==="tin_total_tins")&&(g==="tin_size_oz"&&x&&y.tin_total_tins?y.tin_total_quantity_oz=parseFloat((Number(x)*Number(y.tin_total_tins)).toFixed(2)):g==="tin_total_tins"&&x&&y.tin_size_oz&&(y.tin_total_quantity_oz=parseFloat((Number(y.tin_size_oz)*Number(x)).toFixed(2)))),(g==="pouch_size_oz"||g==="pouch_total_pouches")&&(g==="pouch_size_oz"&&x&&y.pouch_total_pouches?y.pouch_total_quantity_oz=parseFloat((Number(x)*Number(y.pouch_total_pouches)).toFixed(2)):g==="pouch_total_pouches"&&x&&y.pouch_size_oz&&(y.pouch_total_quantity_oz=parseFloat((Number(y.pouch_size_oz)*Number(x)).toFixed(2)))),y})},f=()=>{const g={tin_size_oz:c.tin_size_oz?parseFloat(Number(c.tin_size_oz).toFixed(2)):null,tin_total_tins:c.tin_total_tins?Number(c.tin_total_tins):null,tin_total_quantity_oz:c.tin_total_quantity_oz?parseFloat(Number(c.tin_total_quantity_oz).toFixed(2)):null,tin_tins_open:c.tin_tins_open?Number(c.tin_tins_open):null,tin_tins_cellared:c.tin_tins_cellared?Number(c.tin_tins_cellared):null,tin_cellared_date:c.tin_cellared_date||null,bulk_total_quantity_oz:c.bulk_total_quantity_oz?parseFloat(Number(c.bulk_total_quantity_oz).toFixed(2)):null,bulk_open:c.bulk_open?parseFloat(Number(c.bulk_open).toFixed(2)):null,bulk_cellared:c.bulk_cellared?parseFloat(Number(c.bulk_cellared).toFixed(2)):null,bulk_cellared_date:c.bulk_cellared_date||null,pouch_size_oz:c.pouch_size_oz?parseFloat(Number(c.pouch_size_oz).toFixed(2)):null,pouch_total_pouches:c.pouch_total_pouches?Number(c.pouch_total_pouches):null,pouch_total_quantity_oz:c.pouch_total_quantity_oz?parseFloat(Number(c.pouch_total_quantity_oz).toFixed(2)):null,pouch_pouches_open:c.pouch_pouches_open?Number(c.pouch_pouches_open):null,pouch_pouches_cellared:c.pouch_pouches_cellared?Number(c.pouch_pouches_cellared):null,pouch_cellared_date:c.pouch_cellared_date||null};n(g)},m=async(g,x,v)=>{if(!(!x||!v||!(e!=null&&e.id))){l(g);try{const y=g==="tin"?"tin":g==="bulk"?"bulk":"pouch";let b=parseFloat(x);g==="tin"&&c.tin_size_oz?b=parseFloat(x)*parseFloat(c.tin_size_oz):g==="pouch"&&c.pouch_size_oz&&(b=parseFloat(x)*parseFloat(c.pouch_size_oz)),await Ce.entities.CellarLog.create({blend_id:e.id,blend_name:e.name,transaction_type:"added",date:v,amount_oz:b,container_type:y,notes:s("inventory.autoAddedNote","Added to cellar from inventory")});const j={...c,[{tin:"tin_tins_cellared",bulk:"bulk_cellared",pouch:"pouch_pouches_cellared"}[g]]:"",[`${g==="tin"?"tin":g==="bulk"?"bulk":"pouch"}_cellared_date`]:""};u(j),a.invalidateQueries({queryKey:["cellar-logs",e.id]}),Ve.success(s("inventory.addedToCellar"))}catch(y){console.error("Error adding to cellar log:",y),Ve.error(s("errors.addToCellarFailed"))}finally{l(null)}}};return i.jsxs("div",{className:"space-y-4 bg-[#223447] rounded-lg p-4 border border-white/10",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wh,{className:"w-5 h-5 text-[#E0D8C8]"}),i.jsx("h3",{className:"font-semibold text-[#E0D8C8]",children:s("tobaccoExtended.inventoryStatus")})]}),i.jsx(ye,{size:"sm",onClick:f,disabled:r,className:"bg-[#A35C5C] hover:bg-[#8B4A4A] text-white font-semibold",children:s(r?"common.saving":"inventory.saveChanges")})]}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:s("inventory.trackDesc")}),i.jsxs(Ec,{defaultValue:"tins",className:"w-full",children:[i.jsxs(Tc,{className:"grid w-full grid-cols-3 bg-[#1A2B3A] border-b border-[#E0D8C8]/20",children:[i.jsxs(En,{value:"tins",className:"text-[#E0D8C8] data-[state=active]:text-[#D1A75D] data-[state=active]:border-b-2 data-[state=active]:border-[#D1A75D] flex items-center gap-1.5",children:[i.jsx(wh,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:s("tobaccoExtended.tins","Tins")}),i.jsx("span",{className:"sm:hidden",children:s("tobaccoExtended.tins","Tins")})]}),i.jsxs(En,{value:"bulk",className:"text-[#E0D8C8] data-[state=active]:text-[#D1A75D] data-[state=active]:border-b-2 data-[state=active]:border-[#D1A75D] flex items-center gap-1.5",children:[i.jsx(AZ,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:s("tobaccoExtended.bulk","Bulk")}),i.jsx("span",{className:"sm:hidden",children:s("tobaccoExtended.bulk","Bulk")})]}),i.jsxs(En,{value:"pouches",className:"text-[#E0D8C8] data-[state=active]:text-[#D1A75D] data-[state=active]:border-b-2 data-[state=active]:border-[#D1A75D] flex items-center gap-1.5",children:[i.jsx(EZ,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:s("tobaccoExtended.pouches","Pouches")}),i.jsx("span",{className:"sm:hidden",children:s("tobaccoExtended.pouches","Pouches")})]})]}),i.jsx(Tn,{value:"tins",className:"space-y-4 mt-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("tobaccoExtended.tinSize","Tin Size (oz)")}),i.jsx(at,{type:"number",step:"0.01",min:"0",value:c.tin_size_oz!==""?parseFloat(c.tin_size_oz).toFixed(2):"",onChange:g=>d("tin_size_oz",g.target.value),placeholder:s("inventory.tinSizePlaceholder","e.g., 1.75"),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A]"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("tobaccoExtended.totalTins","Total Tins")}),i.jsx(at,{type:"number",min:"0",value:c.tin_total_tins,onChange:g=>d("tin_total_tins",g.target.value),placeholder:s("inventory.totalTinsPlaceholder","e.g., 5"),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A]"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("tobaccoExtended.totalQuantity","Total Quantity (oz)")}),i.jsx(at,{type:"number",step:"0.01",min:"0",value:c.tin_total_quantity_oz!==""?parseFloat(c.tin_total_quantity_oz).toFixed(2):"",placeholder:s("tobaccoExtended.autoCalculated","Auto-calculated"),className:"border-[#E0D8C8]/20 bg-[#223447] text-[#E0D8C8]/70",readOnly:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("tobaccoExtended.tinsOpen","Tins Open")}),i.jsx(at,{type:"number",min:"0",value:c.tin_tins_open,onChange:g=>d("tin_tins_open",g.target.value),placeholder:s("inventory.tinsOpenPlaceholder","e.g., 1"),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A]"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("inventory.tinsToCellar","Tins to Cellar")}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{type:"number",min:"0",value:c.tin_tins_cellared,onChange:g=>d("tin_tins_cellared",g.target.value),placeholder:s("inventory.tinsToCellarPlaceholder","e.g., 4"),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A] flex-1"}),i.jsx(ye,{size:"sm",onClick:()=>m("tin",c.tin_tins_cellared,c.tin_cellared_date),disabled:!c.tin_tins_cellared||!c.tin_cellared_date||o==="tin",className:"bg-[#A35C5C] hover:bg-[#8B4A4A] flex-shrink-0",children:o==="tin"?"...":i.jsx(Ra,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("tobaccoExtended.dateCellared","Date Cellared")}),i.jsx(at,{type:"date",value:c.tin_cellared_date,onChange:g=>d("tin_cellared_date",g.target.value),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A]"})]})]})}),i.jsx(Tn,{value:"bulk",className:"space-y-4 mt-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("tobaccoExtended.bulkTotalQuantity","Total Bulk Quantity (oz)")}),i.jsx(at,{type:"number",step:"0.01",min:"0",value:c.bulk_total_quantity_oz!==""?parseFloat(c.bulk_total_quantity_oz).toFixed(2):"",onChange:g=>d("bulk_total_quantity_oz",g.target.value),placeholder:s("inventory.bulkTotalPlaceholder","e.g., 16"),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A]"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("tobaccoExtended.bulkOpen","Bulk Open (oz)")}),i.jsx(at,{type:"number",step:"0.01",min:"0",value:c.bulk_open!==""?parseFloat(c.bulk_open).toFixed(2):"",onChange:g=>d("bulk_open",g.target.value),placeholder:s("inventory.bulkOpenPlaceholder","e.g., 2"),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A]"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("inventory.bulkToCellar","Bulk to Cellar (oz)")}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{type:"number",step:"0.01",min:"0",value:c.bulk_cellared!==""?parseFloat(c.bulk_cellared).toFixed(2):"",onChange:g=>d("bulk_cellared",g.target.value),placeholder:s("inventory.bulkToCellarPlaceholder","e.g., 14"),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A] flex-1"}),i.jsx(ye,{size:"sm",onClick:()=>m("bulk",c.bulk_cellared,c.bulk_cellared_date),disabled:!c.bulk_cellared||!c.bulk_cellared_date||o==="bulk",className:"bg-[#A35C5C] hover:bg-[#8B4A4A] flex-shrink-0",children:o==="bulk"?"...":i.jsx(Ra,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("tobaccoExtended.dateCellared","Date Cellared")}),i.jsx(at,{type:"date",value:c.bulk_cellared_date,onChange:g=>d("bulk_cellared_date",g.target.value),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A]"})]})]})}),i.jsx(Tn,{value:"pouches",className:"space-y-4 mt-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("tobaccoExtended.pouchSize","Pouch Size (oz)")}),i.jsx(at,{type:"number",step:"0.01",min:"0",value:c.pouch_size_oz!==""?parseFloat(c.pouch_size_oz).toFixed(2):"",onChange:g=>d("pouch_size_oz",g.target.value),placeholder:s("inventory.pouchSizePlaceholder","e.g., 1.5"),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A]"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("tobaccoExtended.totalPouches","Total Pouches")}),i.jsx(at,{type:"number",min:"0",value:c.pouch_total_pouches,onChange:g=>d("pouch_total_pouches",g.target.value),placeholder:s("inventory.totalPouchesPlaceholder","e.g., 3"),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A]"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("tobaccoExtended.totalQuantity","Total Quantity (oz)")}),i.jsx(at,{type:"number",step:"0.01",min:"0",value:c.pouch_total_quantity_oz!==""?parseFloat(c.pouch_total_quantity_oz).toFixed(2):"",placeholder:s("tobaccoExtended.autoCalculated","Auto-calculated"),className:"border-[#E0D8C8]/20 bg-[#223447] text-[#E0D8C8]/70",readOnly:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("tobaccoExtended.pouchesOpen","Pouches Open")}),i.jsx(at,{type:"number",min:"0",value:c.pouch_pouches_open,onChange:g=>d("pouch_pouches_open",g.target.value),placeholder:s("inventory.pouchesOpenPlaceholder","e.g., 1"),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A]"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("inventory.pouchesToCellar","Pouches to Cellar")}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{type:"number",min:"0",value:c.pouch_pouches_cellared,onChange:g=>d("pouch_pouches_cellared",g.target.value),placeholder:s("inventory.pouchesToCellarPlaceholder","e.g., 2"),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A] flex-1"}),i.jsx(ye,{size:"sm",onClick:()=>m("pouch",c.pouch_pouches_cellared,c.pouch_cellared_date),disabled:!c.pouch_pouches_cellared||!c.pouch_cellared_date||o==="pouch",className:"bg-[#A35C5C] hover:bg-[#8B4A4A] flex-shrink-0",children:o==="pouch"?"...":i.jsx(Ra,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-[#E0D8C8] font-semibold",children:s("tobaccoExtended.dateCellared","Date Cellared")}),i.jsx(at,{type:"date",value:c.pouch_cellared_date,onChange:g=>d("pouch_cellared_date",g.target.value),className:"border-[#E0D8C8]/20 text-[#E0D8C8] bg-[#1A2B3A]"})]})]})})]})]})}function d2e({blend:e}){const{t:n}=$t(),r=e.tin_tins_open||0,s=e.tin_size_oz||0,a=e.bulk_open||0,o=e.pouch_pouches_open||0,l=e.pouch_size_oz||0,c=(r*s).toFixed(2),u=(o*l).toFixed(2),d=parseFloat(c)+parseFloat(a||0)+parseFloat(u);return r>0||a>0||o>0?i.jsxs("div",{className:"space-y-4 bg-white rounded-lg p-4",children:[i.jsxs("div",{className:"p-4 bg-gradient-to-br from-amber-50 to-orange-50 rounded-lg border border-amber-200",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(wh,{className:"w-5 h-5 text-amber-700"}),i.jsx("h3",{className:"font-semibold text-amber-900",children:n("inventory.totalOpen")})]}),i.jsxs("p",{className:"text-3xl font-bold text-amber-900",children:[d.toFixed(2)," oz"]}),i.jsx("p",{className:"text-sm text-amber-700 mt-1",children:n("inventory.readyToSmoke")})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-semibold text-[#1a2c42] uppercase tracking-wide mb-3",children:n("inventory.openInventory")}),r>0&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-[#1a2c42]/20",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ge,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:"Tins"}),i.jsxs("span",{className:"text-sm font-medium text-[#1a2c42]",children:[r," ",r===1?"tin":"tins"," open"]})]}),s>0&&i.jsxs("p",{className:"text-xs text-[#1a2c42]/70 mt-1",children:[s," oz per tin"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-semibold text-[#1a2c42]",children:[c," oz"]}),i.jsxs("p",{className:"text-xs text-[#1a2c42]/60",children:[(c*28.35).toFixed(2),"g"]})]})]}),a>0&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-[#1a2c42]/20",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ge,{variant:"outline",className:"bg-emerald-50 text-emerald-700 border-emerald-200",children:"Bulk"}),i.jsx("span",{className:"text-sm font-medium text-[#1a2c42]",children:"Open quantity"})]})}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-semibold text-[#1a2c42]",children:[parseFloat(a).toFixed(2)," oz"]}),i.jsxs("p",{className:"text-xs text-[#1a2c42]/60",children:[(a*28.35).toFixed(2),"g"]})]})]}),o>0&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-[#1a2c42]/20",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ge,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Pouches"}),i.jsxs("span",{className:"text-sm font-medium text-[#1a2c42]",children:[o," ",o===1?"pouch":"pouches"," open"]})]}),l>0&&i.jsxs("p",{className:"text-xs text-[#1a2c42]/70 mt-1",children:[l," oz per pouch"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-semibold text-[#1a2c42]",children:[u," oz"]}),i.jsxs("p",{className:"text-xs text-[#1a2c42]/60",children:[(u*28.35).toFixed(2),"g"]})]})]})]}),i.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[i.jsx(vn,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),i.jsxs("p",{className:"text-xs text-blue-700",children:[i.jsxs("strong",{children:[n("common.note"),":"]})," ",n("inventory.autoDeductNote")]})]})]}):i.jsxs("div",{className:"text-center py-8 bg-white rounded-lg p-4",children:[i.jsx(wh,{className:"w-12 h-12 mx-auto mb-3 text-[#1a2c42]/40"}),i.jsx("p",{className:"text-sm font-semibold text-[#1a2c42]",children:n("tobaccoExtended.noOpenTobaccoYet")}),i.jsx("p",{className:"text-xs mt-1 text-[#1a2c42]/80",children:n("tobaccoExtended.updateInventoryTab")})]})}function h2e({blend:e}){const{t:n}=$t(),[r,s]=C.useState(!1),[a,o]=C.useState({transaction_type:"added",date:new Date().toISOString().split("T")[0],amount_oz:"",container_type:"tin",removal_destination:"open_collection",notes:""}),l=On(),{data:c}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me()}),{data:u=[],isLoading:d}=Dt({queryKey:["cellar-logs",e.id],queryFn:async()=>{const j=await Ce.entities.CellarLog.filter({blend_id:e.id,created_by:c==null?void 0:c.email},"-date");return Array.isArray(j)?j:[]},enabled:!!(c!=null&&c.email)}),f=rn({mutationFn:j=>Ce.entities.CellarLog.create(j),onSuccess:async()=>{await b(),l.invalidateQueries({queryKey:["cellar-logs"]}),l.invalidateQueries({queryKey:["blends"]}),l.invalidateQueries({queryKey:["tobacco-blends"]}),l.invalidateQueries({queryKey:["blend",e.id]}),s(!1),o({transaction_type:"added",date:new Date().toISOString().split("T")[0],amount_oz:"",container_type:"tin",removal_destination:"open_collection",notes:""})}}),m=rn({mutationFn:j=>Ce.entities.CellarLog.delete(j),onSuccess:async()=>{await b(),l.invalidateQueries({queryKey:["cellar-logs"]}),l.invalidateQueries({queryKey:["blends"]}),l.invalidateQueries({queryKey:["tobacco-blends"]}),l.invalidateQueries({queryKey:["blend",e.id]})}}),g=j=>{j.preventDefault(),f.mutate({blend_id:e.id,blend_name:e.name,transaction_type:a.transaction_type,date:a.date,amount_oz:parseFloat(a.amount_oz),container_type:a.container_type,removal_destination:a.transaction_type==="removed"?a.removal_destination:void 0,notes:a.notes})},x=u.filter(j=>j.transaction_type==="added").reduce((j,S)=>j+(S.amount_oz||0),0),v=u.filter(j=>j.transaction_type==="removed").reduce((j,S)=>j+(S.amount_oz||0),0),y=x-v,b=async()=>{try{const j=await Ce.entities.CellarLog.filter({blend_id:e.id,created_by:c==null?void 0:c.email}),S=j.filter(q=>q.transaction_type==="added").reduce((q,U)=>q+(U.amount_oz||0),0),A=j.filter(q=>q.transaction_type==="removed").reduce((q,U)=>q+(U.amount_oz||0),0),P=Math.max(0,S-A),L=j.filter(q=>q.transaction_type==="added"&&q.date),O=L.length>0?L.sort((q,U)=>new Date(q.date)-new Date(U.date))[0].date:null,R={bulk_cellared:P,bulk_cellared_date:P>0?O:null,tin_tins_cellared:0,tin_cellared_date:null,pouch_pouches_cellared:0,pouch_cellared_date:null};await Ce.entities.TobaccoBlend.update(e.id,R)}catch(j){console.error("Failed to sync blend cellar quantities:",j)}};return ry(c)?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wh,{className:"w-5 h-5 text-[#1a2c42]"}),i.jsx("h3",{className:"font-semibold text-[#1a2c42]",children:n("cellarLog.cellaredTobacco")})]}),i.jsxs(fa,{open:r,onOpenChange:s,children:[i.jsx(DK,{asChild:!0,children:i.jsxs(ye,{size:"sm",className:"bg-[#D1A75D] hover:bg-[#D1A75D]/90 text-[#1a2c42] font-semibold",children:[i.jsx(Ra,{className:"w-4 h-4 mr-1"}),n("cellarLog.addEntry","Add Entry")]})}),i.jsxs(ma,{children:[i.jsx(ho,{children:i.jsx(fo,{children:n("cellarLog.addCellarTransaction")})}),i.jsxs("form",{onSubmit:g,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(tt,{children:n("cellarLog.transactionType","Transaction Type")}),i.jsxs(pn,{value:a.transaction_type,onValueChange:j=>o({...a,transaction_type:j}),children:[i.jsx(hn,{children:i.jsx(gn,{})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"added",children:n("cellarLog.addedToCellarOption","Added to Cellar")}),i.jsx(ot,{value:"removed",children:n("cellarLog.removedFromCellarOption","Removed from Cellar")})]})]})]}),i.jsxs("div",{children:[i.jsx(tt,{children:n("cellarLog.date","Date")}),i.jsx(at,{type:"date",value:a.date,onChange:j=>o({...a,date:j.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(tt,{children:n("cellarLog.amountOz","Amount (oz)")}),i.jsx(at,{type:"number",step:"0.1",value:a.amount_oz,onChange:j=>o({...a,amount_oz:j.target.value}),placeholder:n("cellarLog.amountPlaceholder","2.0"),required:!0})]}),i.jsxs("div",{children:[i.jsx(tt,{children:n("cellarLog.containerType","Container Type")}),i.jsxs(pn,{value:a.container_type,onValueChange:j=>o({...a,container_type:j}),children:[i.jsx(hn,{children:i.jsx(gn,{})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"tin",children:n("cellarLog.containerTin","Tin")}),i.jsx(ot,{value:"jar",children:n("cellarLog.containerJar","Jar")}),i.jsx(ot,{value:"pouch",children:n("cellarLog.containerPouch","Pouch")}),i.jsx(ot,{value:"bulk",children:n("cellarLog.containerBulk","Bulk")}),i.jsx(ot,{value:"other",children:n("common.other","Other")})]})]})]}),a.transaction_type==="removed"&&i.jsxs("div",{children:[i.jsx(tt,{children:n("cellarLog.destination","Destination")}),i.jsxs(pn,{value:a.removal_destination,onValueChange:j=>o({...a,removal_destination:j}),children:[i.jsx(hn,{children:i.jsx(gn,{})}),i.jsxs(fn,{children:[i.jsx(ot,{value:"open_collection",children:n("cellarLog.movedToOpenCollection","Moved to Open Collection")}),i.jsx(ot,{value:"exchanged",children:n("cellarLog.exchanged","Exchanged")}),i.jsx(ot,{value:"discarded",children:n("cellarLog.discarded","Discarded")})]})]})]}),i.jsxs("div",{children:[i.jsx(tt,{children:n("cellarLog.notesOptional","Notes (optional)")}),i.jsx(Ui,{value:a.notes,onChange:j=>o({...a,notes:j.target.value}),placeholder:n("cellarLog.notesPlaceholder","Any additional details..."),rows:3})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(ye,{type:"button",variant:"outline",onClick:()=>s(!1),children:n("common.cancel")}),i.jsx(ye,{type:"submit",disabled:f.isPending,children:f.isPending?n("cellarLog.saving","Saving..."):n("cellarLog.saveEntry","Save Entry")})]})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-3 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[i.jsx(sO,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{className:"text-xs text-green-700 font-medium",children:n("cellarLog.added")})]}),i.jsx("p",{className:"text-lg font-bold text-[#1a2c42]",children:aa(x)})]}),i.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[i.jsx(iO,{className:"w-4 h-4 text-red-600"}),i.jsx("span",{className:"text-xs text-red-700 font-medium",children:n("cellarLog.removed")})]}),i.jsx("p",{className:"text-lg font-bold text-[#1a2c42]",children:aa(v)})]}),i.jsxs("div",{className:"bg-amber-500/20 border border-amber-500/30 rounded-lg p-3 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[i.jsx(wh,{className:"w-4 h-4 text-amber-600"}),i.jsx("span",{className:"text-xs text-amber-700 font-medium",children:n("cellarLog.net")})]}),i.jsx("p",{className:"text-lg font-bold text-[#1a2c42]",children:aa(y)})]})]}),d?i.jsx("p",{className:"text-sm text-[#1a2c42]/60 text-center py-4",children:n("common.loading")}):u.length===0?i.jsx("p",{className:"text-sm text-[#1a2c42]/60 text-center py-4",children:n("cellarLog.noTransactionsYet")}):i.jsx("div",{className:"space-y-2",children:u.map(j=>i.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-[#1a2c42]/20 hover:bg-gray-50 transition-colors",children:[i.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${j.transaction_type==="added"?"bg-green-500/20 text-green-600":"bg-red-500/20 text-red-600"}`,children:j.transaction_type==="added"?i.jsx(sO,{className:"w-5 h-5"}):i.jsx(iO,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-[#1a2c42]",children:j.transaction_type==="added"?n("cellarLog.addedToCellar"):n("cellarLog.removedFromCellar")}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-1",children:[i.jsxs(Ge,{variant:"outline",className:"text-xs bg-gray-100 text-[#1a2c42] border-[#1a2c42]/20",children:[j.amount_oz," ",n("cellarLog.ozUnit","oz")]}),i.jsx(Ge,{variant:"outline",className:"text-xs bg-gray-100 text-[#1a2c42] border-[#1a2c42]/20",children:j.container_type}),j.removal_destination&&i.jsxs(Ge,{className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:[j.removal_destination==="open_collection"&&n("cellarLog.toOpen"),j.removal_destination==="exchanged"&&n("cellarLog.exchanged"),j.removal_destination==="discarded"&&n("cellarLog.discarded")]}),i.jsxs("span",{className:"flex items-center gap-1 text-xs text-[#1a2c42]/60",children:[i.jsx(zx,{className:"w-3 h-3"}),kwe(new Date(j.date),"MMM d, yyyy")]})]})]}),i.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>{window.confirm(n("cellarLog.deleteConfirm"))&&m.mutate(j.id)},className:"text-[#1a2c42]/40 hover:text-red-600",children:i.jsx(yc,{className:"w-4 h-4"})})]}),j.notes&&i.jsx("p",{className:"text-xs text-[#1a2c42]/70 mt-1",children:j.notes})]})]},j.id))})]})]})}):i.jsx(Ac,{featureName:n("cellarLog.cellaringLog","Cellaring Log"),description:n("cellarLog.upgradeDesc","Track detailed cellaring transactions including add/remove dates, amounts in ounces, container types, and notes. View net cellared amounts and full transaction history for each blend.")})}function f2e({isOpen:e,onClose:n,featureName:r="This feature"}){const s=["AI Estimated Value","Value Range & Confidence","Predictive Projections","Advanced Analytics","Bulk Editing Tools","Export & Reports"];return i.jsx(fa,{open:e,onOpenChange:n,children:i.jsxs(ma,{className:"sm:max-w-md bg-gradient-to-br from-[#243548] to-[#1a2c42] border-[#D1A75D]/30",children:[i.jsxs(ho,{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center",children:i.jsx(yh,{className:"w-6 h-6 text-white"})}),i.jsx(fo,{className:"text-[#e8d5b7] text-xl",children:"Upgrade to Pro"})]}),i.jsxs(Vh,{className:"text-[#e8d5b7]/70",children:[r," and other advanced insights are available with PipeKeeper Pro."]})]}),i.jsxs("div",{className:"space-y-3 py-4",children:[i.jsx("p",{className:"text-sm font-semibold text-[#e8d5b7]",children:"Pro includes:"}),i.jsx("div",{className:"space-y-2",children:s.map((a,o)=>i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Nr,{className:"w-4 h-4 text-emerald-400 shrink-0 mt-0.5"}),i.jsx("span",{className:"text-sm text-[#e8d5b7]/90",children:a})]},o))})]}),i.jsxs(y3,{className:"flex gap-2",children:[i.jsx(ye,{variant:"outline",onClick:n,className:"border-[#e8d5b7]/30 text-[#e8d5b7]",children:"Not Now"}),i.jsx("a",{href:xt("Subscription"),className:"flex-1",children:i.jsx(ye,{className:"w-full bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800",children:"Upgrade to Pro"})})]})]})})}const m2e=/^turn\d+(search|fetch|open|view|click)\d+$/i,p2e=/(https?:\/\/[^\s)]+)/i,oD=/(?:^|\/\/)?(?:www\.)?([a-z0-9-]+(?:\.[a-z0-9-]+)+)/i;function g2e(e){if(!Array.isArray(e))return[];const n=new Set,r=[];return e.forEach(s=>{var c;const a=String(s||"").trim();if(!a||m2e.test(a))return;const o=a.match(p2e);if(o!=null&&o[1]){const u=o[1].replace(/[),.;]+$/,"");n.has(u)||(n.add(u),r.push({href:u,label:((c=u.match(oD))==null?void 0:c[1])||u}));return}const l=a.match(oD);if(l!=null&&l[1]){const u=l[1].toLowerCase(),d=`https://${u}`;n.has(d)||(n.add(d),r.push({href:d,label:u}))}}),r.slice(0,6)}function x2e({blend:e,onUpdate:n,isUpdating:r}){const{t:s}=$t(),{subscription:a,hasPro:o,hasPremium:l}=Kr(),[c,u]=C.useState(!1),[d,f]=C.useState(!1),m=g2e(e==null?void 0:e.ai_evidence_sources),g=o||tE(a),x=(y,b)=>{if(!l){u(!0);return}n({[y]:b})},v=async()=>{var y;if(!g){u(!0);return}f(!0);try{const N=(await Ce.functions.invoke("estimateTobaccoValues",{blend_ids:[e.id]})).data;if(N.success&&((y=N.results)==null?void 0:y.length)>0)Ve.success("AI valuation complete"),n({ai_last_updated:new Date().toISOString()});else throw new Error(N.error||"Estimation failed")}catch(b){console.error("AI estimation failed:",b),Ve.error("Failed to estimate value. Please try again.")}finally{f(!1)}};return i.jsxs(i.Fragment,{children:[i.jsxs(Ee,{className:"bg-[#5a6a7a]/90 border-[#A35C5C]/30",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#e8d5b7] flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tu,{className:"w-5 h-5"}),s("tobaccoValuation.tobaccoValuation")]})})}),i.jsxs(Oe,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(tt,{className:"text-[#e8d5b7] font-medium flex items-center gap-2",children:[s("tobaccoValuation.manualMarketValue"),!l&&i.jsx(Ff,{className:"w-3 h-3 text-blue-600"})]}),!l&&i.jsx(Ge,{variant:"outline",className:"text-xs bg-blue-100 text-blue-800 border-blue-300 font-semibold",children:s("subscription.premium")})]}),i.jsxs("div",{className:"relative",children:[i.jsx(at,{type:"number",step:"0.01",value:(e==null?void 0:e.manual_market_value)||"",onChange:y=>x("manual_market_value",parseFloat(y.target.value)||null),placeholder:s(l?"tobaccoValuation.enterValue":"tobaccoValuation.upgradeToPremium"),disabled:!l||r,className:"bg-[#243548] border-[#e8d5b7]/20 text-[#e8d5b7]"}),!l&&i.jsx("div",{className:"absolute inset-0 cursor-pointer",onClick:()=>u(!0)})]}),i.jsx("p",{className:"text-xs text-[#e8d5b7]/50",children:s("tobaccoValuation.yourAssessment")})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(tt,{className:"text-[#e8d5b7] font-medium flex items-center gap-2",children:[s("tobaccoValuation.costBasis"),!l&&i.jsx(Ff,{className:"w-3 h-3 text-blue-600"})]}),!l&&i.jsx(Ge,{variant:"outline",className:"text-xs bg-blue-100 text-blue-800 border-blue-300 font-semibold",children:s("subscription.premium")})]}),i.jsxs("div",{className:"relative",children:[i.jsx(at,{type:"number",step:"0.01",value:(e==null?void 0:e.cost_basis)||"",onChange:y=>x("cost_basis",parseFloat(y.target.value)||null),placeholder:s(l?"tobaccoValuation.enterCost":"tobaccoValuation.upgradeToPremium"),disabled:!l||r,className:"bg-[#243548] border-[#e8d5b7]/20 text-[#e8d5b7]"}),!l&&i.jsx("div",{className:"absolute inset-0 cursor-pointer",onClick:()=>u(!0)})]}),i.jsx("p",{className:"text-xs text-[#e8d5b7]/50",children:s("tobaccoValuation.whatYouPaid")})]}),i.jsxs("div",{className:"border-t border-[#e8d5b7]/10 pt-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Da,{className:"w-4 h-4 text-amber-400"}),i.jsxs(tt,{className:"text-[#e8d5b7] font-medium flex items-center gap-2",children:[s("tobaccoValuation.aiAssistedValuation",{defaultValue:"AI Assisted Valuation"}),!g&&i.jsx(Ff,{className:"w-3 h-3 text-amber-400"})]})]}),!g&&i.jsx(Ge,{className:"bg-amber-100 text-amber-800 border-amber-300 font-semibold",children:s("subscription.pro")})]}),i.jsxs(ye,{onClick:v,disabled:!g||d||r,className:"w-full bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800 disabled:opacity-50",children:[!g&&i.jsx(Ff,{className:"w-4 h-4 mr-2"}),d&&i.jsx(Cn,{className:"w-4 h-4 mr-2 animate-spin"}),s(d?"tobaccoValuation.estimating":g?"tobaccoValuation.runAIValuation":"tobaccoValuation.upgradeToPro")]}),(e==null?void 0:e.ai_estimated_value)&&i.jsxs("div",{className:"space-y-4 bg-[#243548]/50 rounded-lg p-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#e8d5b7]/50 mb-1",children:s("tobaccoValuation.estimatedValuePerOz")}),i.jsx("p",{className:"text-2xl font-bold text-[#e8d5b7]",children:ro(e.ai_estimated_value)}),i.jsx("p",{className:"text-xs text-[#e8d5b7]/40 mt-1",children:s("tobaccoValuation.aiAssistedEstimate")})]}),e.ai_value_range_low&&e.ai_value_range_high&&g&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#e8d5b7]/50 mb-1",children:s("tobaccoValuation.estimatedRange")}),i.jsxs("p",{className:"text-lg text-[#e8d5b7]",children:[ro(e.ai_value_range_low)," - ",ro(e.ai_value_range_high)]})]}),e.ai_confidence&&g&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-[#e8d5b7]/50 mb-1",children:s("tobaccoValuation.confidence")}),i.jsx(Ge,{className:e.ai_confidence==="High"?"bg-emerald-600/20 text-emerald-400":e.ai_confidence==="Medium"?"bg-yellow-600/20 text-yellow-400":"bg-rose-600/20 text-rose-400",children:e.ai_confidence})]}),m.length>0&&g&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-white mb-2",children:s("tobaccoValuation.evidenceSources",{defaultValue:"Evidence sources"})}),i.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto",children:m.map((y,b)=>i.jsx("a",{href:y.href,target:"_blank",rel:"noreferrer",className:"inline-flex",title:y.href,children:i.jsx(Ge,{variant:"outline",className:"text-xs border-[#e8d5b7]/40 text-white bg-[#243548]/50 cursor-pointer whitespace-nowrap hover:bg-[#2d4258]",children:y.label})},`${y.href}-${b}`))})]}),(e.ai_projection_12m||e.ai_projection_36m)&&g&&i.jsxs("div",{className:"border-t border-[#e8d5b7]/10 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Hx,{className:"w-4 h-4 text-amber-400"}),i.jsx("p",{className:"text-sm font-semibold text-[#e8d5b7]",children:s("tobaccoValuation.predictiveValueProjections")})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.ai_projection_12m&&i.jsxs("div",{className:"bg-[#243548]/70 rounded-lg p-3",children:[i.jsxs("p",{className:"text-xs text-[#e8d5b7]/50 mb-1",children:["12 ",s("tobaccoValuation.months")]}),i.jsx("p",{className:"text-lg font-bold text-emerald-400",children:ro(e.ai_projection_12m)}),i.jsx("p",{className:"text-xs text-[#e8d5b7]/30 mt-1",children:s("tobaccoValuation.notGuaranteed")})]}),e.ai_projection_36m&&i.jsxs("div",{className:"bg-[#243548]/70 rounded-lg p-3",children:[i.jsxs("p",{className:"text-xs text-[#e8d5b7]/50 mb-1",children:["36 ",s("tobaccoValuation.months")]}),i.jsx("p",{className:"text-lg font-bold text-emerald-400",children:ro(e.ai_projection_36m)}),i.jsx("p",{className:"text-xs text-[#e8d5b7]/30 mt-1",children:s("tobaccoValuation.notGuaranteed")})]})]})]}),e.ai_last_updated&&g&&i.jsxs("p",{className:"text-xs text-[#e8d5b7]/40 pt-2 border-t border-[#e8d5b7]/10",children:[s("tobaccoValuation.lastUpdated")," ",new Date(e.ai_last_updated).toLocaleDateString()]})]}),!g&&!(e!=null&&e.ai_estimated_value)&&i.jsxs("div",{className:"bg-amber-900/20 border border-amber-500/30 rounded-lg p-4 text-center",children:[i.jsx(Ff,{className:"w-8 h-8 text-amber-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-[#e8d5b7]/70",children:"Upgrade to Pro to unlock AI-assisted valuation and predictive insights."})]}),!g&&(e==null?void 0:e.ai_estimated_value)&&i.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(bh,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),i.jsx("p",{className:"text-xs text-[#e8d5b7]/70",children:"This blend was valued when you had Pro access. Upgrade to Pro to run new valuations."})]})})]})]})]}),i.jsx(f2e,{isOpen:c,onClose:()=>u(!1),featureName:"AI-assisted valuation"})]})}const v2e={Virginia:"bg-yellow-100 text-yellow-800 border-yellow-200","Virginia/Perique":"bg-orange-100 text-orange-800 border-orange-200",English:"bg-stone-700 text-white border-stone-600",Balkan:"bg-stone-600 text-white border-stone-500",Aromatic:"bg-purple-100 text-purple-800 border-purple-200",Burley:"bg-amber-100 text-amber-800 border-amber-200","Virginia/Burley":"bg-yellow-200 text-yellow-900 border-yellow-300","Latakia Blend":"bg-stone-800 text-white border-stone-700","Oriental/Turkish":"bg-rose-100 text-rose-800 border-rose-200","Navy Flake":"bg-blue-100 text-blue-800 border-blue-200","Dark Fired":"bg-stone-500 text-white border-stone-400",Cavendish:"bg-amber-200 text-amber-900 border-amber-300"};function sY(){var P,L;const{t:e}=$t(),r=new URLSearchParams(window.location.search).get("id"),[s,a]=C.useState(!1),[o,l]=C.useState(!1),[c,u]=C.useState(null),d=On(),{user:f}=Kr(),{data:m,isLoading:g,error:x}=Dt({queryKey:["blend",r,f==null?void 0:f.email],enabled:!!r&&!!(f!=null&&f.email),retry:!1,queryFn:async()=>{if(!r)throw new Error("Missing blend ID");try{const O=await Ce.entities.TobaccoBlend.get(r);if(O)return O}catch(O){console.warn("TobaccoBlend.get failed",{blendId:r,message:O==null?void 0:O.message,status:O==null?void 0:O.status,response:O==null?void 0:O.response,e:O})}try{const O=await Ce.entities.TobaccoBlend.filter({id:r,created_by:f.email});if(Array.isArray(O)&&O.length)return O[0]}catch(O){console.warn("TobaccoBlend.filter failed",{blendId:r,message:O==null?void 0:O.message,status:O==null?void 0:O.status,response:O==null?void 0:O.response,e:O})}throw new Error("Blend not found")}}),v=g;C.useEffect(()=>{if(m&&m.manufacturer&&!m.logo&&!N.isPending&&(f!=null&&f.email)){const O=Du(m.manufacturer);O&&O!==KG&&N.mutate({logo:O})}},[m==null?void 0:m.id,f==null?void 0:f.email]);const{data:y=[]}=Dt({queryKey:["pipes",f==null?void 0:f.email],queryFn:async()=>{try{const O=await Ce.entities.Pipe.filter({created_by:f==null?void 0:f.email});return Array.isArray(O)?O:[]}catch(O){return console.error("Pipes load error:",O),[]}},enabled:!!(f!=null&&f.email),retry:1,staleTime:5e3}),{data:b}=Dt({queryKey:["user-profile",m==null?void 0:m.created_by],queryFn:async()=>(await Ce.entities.UserProfile.filter({user_email:m.created_by}))[0],enabled:!!(m!=null&&m.created_by)}),N=rn({mutationFn:O=>xr("TobaccoBlend",r,O,f==null?void 0:f.email),onMutate:async O=>{await d.cancelQueries({queryKey:["blend",r,f==null?void 0:f.email]});const R=d.getQueryData(["blend",r,f==null?void 0:f.email]);return d.setQueryData(["blend",r,f==null?void 0:f.email],q=>({...q,...O})),{previousBlend:R}},onError:(O,R,q)=>{d.setQueryData(["blend",r,f==null?void 0:f.email],q.previousBlend)},onSuccess:()=>{Qp(d,f==null?void 0:f.email),a(!1)}}),j=rn({mutationFn:()=>Ce.entities.TobaccoBlend.delete(r),onSuccess:()=>{window.location.href=xt("Tobacco")}}),S=()=>{if(!m)return;const O=!m.is_favorite;d.setQueryData(["blend",r,f==null?void 0:f.email],R=>({...R||{},is_favorite:O})),N.mutate({is_favorite:O})};if(v)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42] p-8",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsxs("div",{className:"animate-pulse space-y-6",children:[i.jsx("div",{className:"h-8 w-48 bg-stone-200 rounded"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsx("div",{className:"aspect-square bg-stone-200 rounded-2xl"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"h-10 w-64 bg-stone-200 rounded"}),i.jsx("div",{className:"h-6 w-48 bg-stone-200 rounded"})]})]})]})})});if(!m)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42] flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:"🍂"}),i.jsx("h2",{className:"text-2xl font-semibold text-stone-800 mb-2",children:e("tobaccoExtended.blendNotFound")}),i.jsx("a",{href:xt("Tobacco"),children:i.jsx(ye,{variant:"outline",children:e("tobaccoExtended.backToTobacco")})})]})});const A=v2e[m.blend_type]||"bg-stone-100 text-stone-800 border-stone-200";return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42]",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx("a",{href:xt("Tobacco"),children:i.jsxs(ye,{variant:"ghost",className:"mb-6 text-[#e8d5b7] hover:text-[#e8d5b7]/80",children:[i.jsx($i,{className:"w-4 h-4 mr-2"}),e("tobaccoExtended.backToTobacco")]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsx(ms.div,{className:"aspect-square rounded-2xl overflow-hidden bg-white shadow-xl cursor-pointer",layoutId:`blend-${m.id}`,onClick:()=>u(m.logo||m.photo),children:m.logo||m.photo?i.jsx("img",{src:m.logo||m.photo,alt:m.name,className:`w-full h-full ${m.logo?"object-contain p-6":"object-cover"} hover:scale-105 transition-transform duration-300`,onError:O=>{O.target.style.display="none";const R=Du(m.manufacturer);O.target.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center bg-white p-6"><img src="'+R+'" class="w-full h-full object-contain" /></div>'}}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white p-6",children:i.jsx("img",{src:Du(m.manufacturer),alt:m.manufacturer||"Tobacco",className:"w-full h-full object-contain",onError:O=>{O.target.style.display="none",O.target.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center"><div class="text-amber-600 text-8xl">🍂</div></div>'}})})}),i.jsx(Ee,{className:"bg-[#5a6a7a]/90 border-[#A35C5C]/30 overflow-hidden",children:i.jsxs(Ec,{defaultValue:"containers",className:"w-full",children:[i.jsx("div",{className:"border-b border-[#A35C5C]/30 overflow-x-auto",children:i.jsxs(Tc,{className:"w-full justify-start bg-transparent h-auto p-0 rounded-none inline-flex min-w-full",children:[i.jsxs(En,{value:"containers",className:"data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-[#D1A75D] data-[state=active]:text-[#E0D8C8] rounded-none px-3 sm:px-4 py-3 text-xs sm:text-sm whitespace-nowrap flex-shrink-0 text-[#E0D8C8]/70",children:[i.jsx("span",{className:"hidden sm:inline",children:e("tobaccoExtended.openTobacco")}),i.jsx("span",{className:"sm:hidden",children:e("tobaccoExtended.open")})]}),i.jsxs(En,{value:"log",className:"data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-[#D1A75D] data-[state=active]:text-[#E0D8C8] rounded-none px-3 sm:px-4 py-3 text-xs sm:text-sm whitespace-nowrap flex-shrink-0 text-[#E0D8C8]/70",children:[i.jsx("span",{className:"hidden sm:inline",children:e("cellarLog.cellaredTobacco")}),i.jsx("span",{className:"sm:hidden",children:e("tobaccoExtended.cellared")})]}),i.jsx(En,{value:"inventory",className:"data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-[#D1A75D] data-[state=active]:text-[#E0D8C8] rounded-none px-3 sm:px-4 py-3 text-xs sm:text-sm whitespace-nowrap flex-shrink-0 text-[#E0D8C8]/70",children:e("tobaccoExtended.inventory")})]})}),i.jsx(Tn,{value:"containers",className:"m-0",children:i.jsx("div",{className:"p-4",children:i.jsx(d2e,{blend:m})})}),i.jsx(Tn,{value:"log",className:"m-0",children:i.jsx("div",{className:"p-4",children:i.jsx(h2e,{blend:m})})}),i.jsx(Tn,{value:"inventory",className:"m-0",children:i.jsx("div",{className:"p-4",children:i.jsx(u2e,{blend:m,onUpdate:O=>N.mutate(O),isUpdating:N.isPending})})})]})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-[#e8d5b7]",children:m.name}),i.jsx("p",{className:"text-lg text-[#e8d5b7]/70",children:m.manufacturer||e("tobaccoExtended.unknownMaker")})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ye,{variant:"outline",size:"icon",onClick:S,className:m.is_favorite?"text-rose-500":"text-stone-400",children:i.jsx(Tm,{className:`w-5 h-5 ${m.is_favorite?"fill-current":""}`})}),i.jsx(ye,{variant:"outline",size:"icon",onClick:()=>a(!0),children:i.jsx(dm,{className:"w-5 h-5"})}),i.jsx(ye,{variant:"outline",size:"icon",className:"text-rose-500 hover:text-rose-600",onClick:()=>l(!0),children:i.jsx(yc,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(O=>i.jsx(Qw,{className:`w-6 h-6 cursor-pointer transition-colors ${O<=(m.rating||0)?"text-amber-500 fill-current":"text-stone-300 hover:text-amber-300"}`,onClick:()=>N.mutate({rating:O})},O)),m.rating&&i.jsxs("span",{className:"text-white ml-2",children:[m.rating," ",e("units.outOf5",{defaultValue:"Out Of 5"})]})]}),y.length>0&&i.jsx(c2e,{blend:m,pipes:y}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.blend_type&&i.jsx(Ge,{className:A,children:m.blend_type}),m.strength&&i.jsx(Ge,{className:"bg-stone-100 text-stone-700 border-stone-200",children:m.strength}),m.cut&&i.jsx(Ge,{className:"bg-amber-50 text-amber-700 border-amber-200",children:m.cut}),m.production_status&&i.jsx(Ge,{className:m.production_status==="Discontinued"?"bg-rose-100 text-rose-800 border-rose-200":"bg-blue-100 text-blue-800 border-blue-200",children:m.production_status}),m.room_note&&i.jsxs(Ge,{className:"bg-violet-100 text-violet-800 border-violet-200",children:[e("tobaccoExtended.roomNote")," ",e(`roomNotes.${m.room_note}`,m.room_note)]})]}),((P=m.tobacco_components)==null?void 0:P.length)>0&&i.jsx(Ee,{className:"border-white/10",children:i.jsxs(Oe,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/70 mb-2",children:e("tobaccoExtended.tobaccoComponents")}),i.jsx("div",{className:"flex flex-wrap gap-2",children:m.tobacco_components.map((O,R)=>i.jsx(Ge,{variant:"secondary",className:"bg-amber-100 text-amber-800 border-amber-200",children:O},R))})]})}),((L=m.flavor_notes)==null?void 0:L.length)>0&&i.jsx(Ee,{className:"border-white/10",children:i.jsxs(Oe,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/70 mb-2",children:e("tobaccoExtended.flavorNotes")}),i.jsx("div",{className:"flex flex-wrap gap-2",children:m.flavor_notes.map((O,R)=>i.jsx(Ge,{variant:"secondary",className:"bg-amber-100 text-amber-800 border-amber-200",children:O},R))})]})}),m.aging_potential&&i.jsx(Ee,{className:"border-white/10",children:i.jsxs(Oe,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/70 mb-1",children:e("tobaccoExtended.agingPotential")}),i.jsx("p",{className:"font-medium text-[#E0D8C8]",children:m.aging_potential})]})}),m.notes&&i.jsx(Ee,{className:"border-white/10",children:i.jsxs(Oe,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-[#E0D8C8]/70 mb-1",children:e("formsExtended.notes")}),i.jsx("p",{className:"text-[#E0D8C8]/80",children:m.notes})]})}),i.jsx(x2e,{blend:m,onUpdate:O=>N.mutate(O),isUpdating:N.isPending})]})]}),(b==null?void 0:b.allow_comments)&&i.jsx(Ee,{className:"border-white/10 mt-8",children:i.jsx(Oe,{className:"p-6",children:i.jsx(Ix,{entityType:"blend",entityId:r,entityOwnerEmail:m.created_by})})}),i.jsx(jm,{open:s,onOpenChange:a,children:i.jsxs(_h,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[i.jsx(Sh,{className:"mb-6",children:i.jsx(Ch,{children:e("tobaccoPage.editBlend")})}),i.jsx(eY,{blend:m,onSave:O=>N.mutate(O),onCancel:()=>a(!1),isLoading:N.isPending})]})}),i.jsx(Nm,{open:o,onOpenChange:l,children:i.jsxs(kh,{children:[i.jsxs(Eh,{children:[i.jsx(Oh,{children:e("tobaccoExtended.deleteBlendConfirm")}),i.jsx(Lh,{children:e("tobaccoExtended.deleteBlendDesc",{name:m.name})})]}),i.jsxs(Th,{children:[i.jsx(Dh,{children:e("common.cancel")}),i.jsx(Rh,{onClick:()=>j.mutate(),className:"bg-rose-600 hover:bg-rose-700",children:e("common.delete")})]})]})}),i.jsx(A3,{imageUrl:c,isOpen:!!c,onClose:()=>u(null),alt:m.name})]})})}function iY(){const{t:e}=$t(),[n,r]=C.useState(!1),[s,a]=C.useState(null),o=On(),{data:l}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me(),retry:1}),{data:c=[]}=Dt({queryKey:["blends",l==null?void 0:l.email],enabled:!!(l!=null&&l.email),retry:1,queryFn:async()=>{const f=await Ce.entities.TobaccoBlend.filter({created_by:l.email});return Array.isArray(f)?f:[]}}),u=c.filter(f=>f.manufacturer&&!f.logo),d=async()=>{r(!0);const f=[],m=[];for(const g of u)try{const x=Du(g.manufacturer);await xr("TobaccoBlend",g.id,{logo:x},l==null?void 0:l.email),f.push(g.name)}catch{m.push(g.name)}a({updated:f,failed:m}),Qp(o,l==null?void 0:l.email),r(!1)};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50/50 via-stone-50 to-stone-100 p-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-stone-800",children:e("tobaccoLibrarySync.title")}),i.jsx("p",{className:"text-stone-600 mt-2",children:e("tobaccoLibrarySync.description")})]}),i.jsxs(Ee,{children:[i.jsx(Ze,{children:i.jsx(et,{children:e("tobaccoLibrarySync.syncStatus")})}),i.jsxs(Oe,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-stone-600",children:e("tobaccoLibrarySync.totalBlends")}),i.jsx("p",{className:"text-2xl font-bold text-stone-800",children:c.length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-stone-600",children:e("tobaccoLibrarySync.missingLogos")}),i.jsx("p",{className:"text-2xl font-bold text-amber-600",children:u.length})]})]}),u.length>0&&!s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("p",{className:"text-sm text-stone-600 mb-3",children:e("tobaccoLibrarySync.willBeUpdated")}),i.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:u.map(f=>i.jsxs("div",{className:"text-sm text-stone-700 flex items-center gap-2",children:[i.jsx(vn,{className:"w-3 h-3 text-amber-500"}),f.name," (",f.manufacturer,")"]},f.id))})]}),i.jsx(ye,{onClick:d,disabled:n,className:"w-full bg-amber-700 hover:bg-amber-800",children:n?i.jsxs(i.Fragment,{children:[i.jsx($s,{className:"w-4 h-4 mr-2 animate-spin"}),e("tobaccoLibrarySync.syncing")]}):i.jsxs(i.Fragment,{children:[i.jsx($s,{className:"w-4 h-4 mr-2"}),e("tobaccoLibrarySync.syncButton",{count:u.length})]})})]}),u.length===0&&!s&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Nr,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),i.jsx("p",{className:"font-semibold text-stone-800",children:e("tobaccoLibrarySync.allHaveLogos")}),i.jsx("p",{className:"text-sm text-stone-600",children:e("tobaccoLibrarySync.noSyncNeeded")})]}),s&&i.jsxs("div",{className:"space-y-4 border-t pt-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx(Nr,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),i.jsx("p",{className:"font-semibold text-stone-800",children:e("tobaccoLibrarySync.complete")})]}),s.updated.length>0&&i.jsxs("div",{children:[i.jsx(Ge,{className:"bg-green-100 text-green-800 mb-2",children:e("tobaccoLibrarySync.updated",{count:s.updated.length})}),i.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:s.updated.map((f,m)=>i.jsxs("div",{className:"text-sm text-stone-700 flex items-center gap-2",children:[i.jsx(Nr,{className:"w-3 h-3 text-green-600"}),f]},m))})]}),s.failed.length>0&&i.jsxs("div",{children:[i.jsx(Ge,{className:"bg-rose-100 text-rose-800 mb-2",children:e("tobaccoLibrarySync.failed",{count:s.failed.length})}),i.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:s.failed.map((f,m)=>i.jsxs("div",{className:"text-sm text-rose-700 flex items-center gap-2",children:[i.jsx(vn,{className:"w-3 h-3 text-rose-600"}),f]},m))})]}),i.jsx(ye,{onClick:()=>a(null),variant:"outline",className:"w-full",children:e("common.done")})]})]})]})]})})}function aY(){const{t:e}=$t(),[n,r]=C.useState({}),s=l=>{r(c=>({...c,[l]:!c[l]}))},a=({title:l,children:c})=>i.jsxs("div",{style:{marginBottom:32},children:[i.jsx("h2",{className:"text-2xl font-bold text-[#E0D8C8] mb-4",children:l}),i.jsx("div",{className:"space-y-3",children:c})]}),o=({id:l,q:c,children:u})=>i.jsxs(Ee,{className:"bg-white border-gray-200 overflow-hidden",children:[i.jsxs("button",{onClick:()=>s(l),className:"w-full text-left p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[i.jsx("span",{className:"font-semibold text-gray-900 pr-4",children:c}),i.jsx(La,{className:`w-5 h-5 text-gray-600 flex-shrink-0 transition-transform ${n[l]?"rotate-180":""}`})]}),n[l]&&i.jsx(Oe,{className:"px-4 pb-4 pt-0 text-gray-700 leading-relaxed space-y-3",children:u})]});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A2B3A] via-[#243548] to-[#1A2B3A]",children:i.jsxs("div",{style:{maxWidth:980,margin:"0 auto",padding:"40px 16px"},children:[i.jsxs(ca,{to:xt("FAQFull"),className:"inline-flex items-center gap-2 text-[#8b3a3a] hover:text-[#a94747] mb-6",children:[i.jsx($i,{className:"w-4 h-4"}),e("troubleshooting.backToFAQ")]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-[#E0D8C8] mb-2",children:e("troubleshooting.pageTitle")}),i.jsx("p",{className:"text-[#E0D8C8]/80",children:e("troubleshooting.pageSubtitle")})]}),i.jsxs(a,{title:e("troubleshooting.loginAccess"),children:[i.jsx(o,{id:"cant-login",q:e("troubleshooting.cantLoginQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.cantLoginSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsxs(o,{id:"verification-expired",q:e("troubleshooting.verificationExpiredQ"),children:[i.jsx("p",{children:e("troubleshooting.verificationExpiredIntro")}),i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.verificationExpiredSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})]}),i.jsx(o,{id:"email-not-received",q:e("troubleshooting.emailNotReceivedQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.emailNotReceivedSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsxs(o,{id:"session-expired",q:e("troubleshooting.sessionExpiredQ"),children:[i.jsx("p",{children:e("troubleshooting.sessionExpiredIntro")}),i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.sessionExpiredSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})]})]}),i.jsxs(a,{title:e("troubleshooting.dataSyncing"),children:[i.jsx(o,{id:"data-not-saving",q:e("troubleshooting.dataNotSavingQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.dataNotSavingSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"data-not-loading",q:e("troubleshooting.dataNotLoadingQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.dataNotLoadingSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"duplicate-entries",q:e("troubleshooting.duplicateEntriesQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.duplicateEntriesSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsxs(o,{id:"syncing-delay",q:e("troubleshooting.syncingDelayQ"),children:[i.jsx("p",{children:e("troubleshooting.syncingDelayIntro")}),i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.syncingDelaySteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})]})]}),i.jsxs(a,{title:e("troubleshooting.photosImages"),children:[i.jsx(o,{id:"photo-not-uploading",q:e("troubleshooting.photoNotUploadingQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.photoNotUploadingSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"photo-blurry",q:e("troubleshooting.photoBlurryQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.photoBlurrySteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"delete-photo",q:e("troubleshooting.deletePhotoQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.deletePhotoSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})})]}),i.jsxs(a,{title:e("troubleshooting.aiFeatures"),children:[i.jsx(o,{id:"ai-slow",q:e("troubleshooting.aiSlowQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.aiSlowSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsxs(o,{id:"ai-wrong-suggestion",q:e("troubleshooting.aiWrongSuggestionQ"),children:[i.jsx("p",{children:e("troubleshooting.aiWrongSuggestionIntro")}),i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.aiWrongSuggestionSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})]}),i.jsx(o,{id:"ai-not-working",q:e("troubleshooting.aiNotWorkingQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.aiNotWorkingSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})})]}),i.jsxs(a,{title:e("troubleshooting.subscriptionBilling"),children:[i.jsx(o,{id:"subscription-not-working",q:e("troubleshooting.subscriptionNotWorkingQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.subscriptionNotWorkingSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"billing-issue",q:e("troubleshooting.billingIssueQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.billingIssueSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"cancel-subscription",q:e("troubleshooting.cancelSubscriptionQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.cancelSubscriptionSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})})]}),i.jsxs(a,{title:e("troubleshooting.browserTechnical"),children:[i.jsx(o,{id:"app-freezes",q:e("troubleshooting.appFreezesQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.appFreezesSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"works-on-phone-not-desktop",q:e("troubleshooting.worksOnPhoneNotDesktopQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.worksOnPhoneNotDesktopSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})}),i.jsx(o,{id:"mobile-app-issues",q:e("troubleshooting.mobileAppIssuesQ"),children:i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:e("troubleshooting.mobileAppIssuesSteps",{returnObjects:!0}).map((l,c)=>i.jsx("li",{children:l},c))})})]}),i.jsx(a,{title:e("troubleshooting.needMoreHelp"),children:i.jsx("div",{className:"bg-[#A35C5C]/10 border border-[#A35C5C]/40 rounded-lg p-6 text-[#E0D8C8]",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx(vn,{className:"w-6 h-6 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold mb-2",children:e("troubleshooting.couldntFindAnswer")}),i.jsx("p",{className:"text-sm mb-3",children:e("troubleshooting.contactSupportDesc")}),i.jsx("a",{href:"mailto:support@pipekeeperapp.com",className:"text-[#8b3a3a] hover:text-[#a94747] underline",children:"support@pipekeeperapp.com"}),i.jsx("p",{className:"text-xs text-[#E0D8C8]/70 mt-3",children:e("troubleshooting.includeDetails")})]})]})})})]})})}function y2e(){const[e,n]=C.useState(""),s=[{id:"refresh",icon:$s,title:"Page Refresh & Caching Issues",color:"text-blue-400",questions:[{q:"Changes aren't appearing after I update something",a:"Try a hard refresh: Ctrl+Shift+R (Windows/Linux) or Cmd+Shift+R (Mac). This bypasses your browser cache and loads fresh data."},{q:"New features or cards are missing",a:"Open the app in an incognito/private window to completely bypass cache. If it appears there, clear your browser cache for this site."},{q:"Data seems outdated or stale",a:"Navigate away from the page and back, or use a hard refresh. The app caches data for performance but should auto-refresh when you make changes."},{q:"App is showing old version after an update",a:"Clear your browser cache completely, or use Ctrl+Shift+Delete to open cache clearing options. Make sure to clear cached images and files."}]},{id:"ai",icon:Da,title:"AI Features & Generation",color:"text-purple-400",questions:[{q:"Why do I need to regenerate pairings?",a:"Pairings become outdated when you add/remove pipes or blends, or update pipe focus. The AI Updates page shows when regeneration is recommended."},{q:"What does 'out of date' mean on AI Updates?",a:"Your collection has changed since the AI last analyzed it. Regenerating ensures recommendations reflect your current pipes and tobacco."},{q:"Can I undo AI regenerations?",a:"Yes! Each AI feature (pairings, optimization) has an Undo button that reverts to the previous version. You can only undo once - it goes back one step."},{q:"How does tobacco-pipe matching work?",a:"The AI considers pipe focus, bowl size, chamber volume, and your preferences to score each tobacco for compatibility (0-10 scale)."},{q:"What if AI recommendations don't match my preferences?",a:"Update your User Profile with preferred blend types and strength preferences. Also ensure your pipe focus tags accurately describe each pipe's purpose."},{q:"Which tool should I use: Geometry Analysis or Verified Specs?",a:"'Analyze Geometry from Photos' is the primary tool - it works for all pipes and always provides results. Use it first. 'Find Verified Manufacturer Specs' is optional and only works for some production pipes (often returns no results for artisan/estate pipes)."},{q:"Geometry analysis shows low confidence",a:"Low confidence means the AI is uncertain. This happens when: photos are unclear/missing, pipe is a unique freehand design, or dimensions are missing. Results still appear so you can review and decide. You can apply suggestions or enter data manually."},{q:"Find Verified Specs returns 'No specs found'",a:"This is normal for artisan pipes, estate pipes, or uncommon models. The tool only finds data from manufacturer catalogs. Use 'Analyze Geometry from Photos' instead - it's the primary tool and works from your uploaded images and dimensions."},{q:"Geometry analysis won't update fields set to 'Unknown'",a:"If you're seeing this, it's a bug. Geometry analysis should update 'Unknown' fields just like empty fields. Try: 1) Hard refresh the page, 2) Clear browser cache, or 3) Contact support with pipe ID."}]},{id:"blend-types",icon:BP,title:"Tobacco Blend Classification",color:"text-amber-400",questions:[{q:"What's the difference between English and English Aromatic?",a:"English blends are Latakia-forward with no toppings. English Aromatic has Latakia but includes light casing/topping - a middle ground."},{q:"When should I use Virginia/Perique vs VaPer?",a:"Virginia/Perique is the standard term for blends with Virginia base and Perique condiment. VaPer is just shorthand for the same thing."},{q:"How do I classify a complex blend with many tobaccos?",a:"Choose the category based on the dominant characteristic. If it has Latakia, it's likely English or Balkan. If heavily topped, it's Aromatic."},{q:"What's a 'Codger Blend'?",a:"Traditional American OTC (over-the-counter) blends, usually Burley-based with light toppings. Examples: Carter Hall, Prince Albert."},{q:"Can I reclassify blends automatically?",a:"Yes! Go to AI Updates and click 'Reclassify Blends' to have AI analyze and update your blends to the most accurate categories."},{q:"What if a blend doesn't fit any category?",a:"Use 'Other' for experimental or unique blends. Add detailed notes in the description to remember what makes it special."}]},{id:"specialization",icon:Vx,title:"Pipe Focus & Specialization",color:"text-green-400",questions:[{q:"How should I tag my pipe's focus?",a:"Be specific! Use tags like 'Virginia', 'English', 'Aromatics', 'VaPer', or 'Latakia Blend'. You can add intensity like 'Heavy Aromatics' or 'Light Aromatics'."},{q:"Should I dedicate pipes to specific blends?",a:"Recommended for strongly flavored blends (Lakeland, heavy aromatics, Latakia). Virginias and VaPers can share pipes more easily."},{q:"What does 'Utility' or 'Versatile' mean?",a:"These tags tell the AI this pipe can handle multiple blend types. Good for rotation pipes that you use for various tobaccos."},{q:"Can a pipe have multiple focus tags?",a:"Yes! Add multiple tags separated by commas. Example: 'English, Balkan, Latakia Blend' for a dedicated Latakia pipe."},{q:"How does focus affect pairing scores?",a:"The AI gives higher scores to blends that match your focus tags. Aromatic-only pipes get 0 score for non-aromatics and vice versa."},{q:"What if I don't know what to focus my pipe on?",a:"Use Collection Optimization on the Home page - AI will suggest ideal specializations based on your collection balance."}]},{id:"pro-features",icon:yh,title:"Pro Features",color:"text-amber-400",questions:[{q:"Trends Report shows no data or is empty",a:"The Trends Report requires smoking log data to display insights. If you see 'No sessions logged', you need to log some smoking sessions first. Go to Home → Log a Session to start tracking. Once you have logs, return to Home → Tobacco Collection Stats → Trends to view your insights. If logs exist but trends are empty, try switching to 'All-Time' time window."},{q:"Trends button is locked (🔒)",a:"Trends Report is a Pro-tier feature. If you see a lock icon, you need to upgrade to Pro to access it. Go to Profile → Subscription to view upgrade options. If you subscribed to Premium before February 1, 2026, you should have access—try refreshing the page or contact support if the lock persists."},{q:"Trends data seems incorrect or outdated",a:"Trends are computed from your smoking logs in real-time. If data seems wrong: 1) Check that your smoking logs have accurate dates and pipe/blend selections, 2) Verify time window selection matches what you expect, 3) Refresh the page to recalculate, 4) Compare with your actual smoking log entries on the Home page."},{q:"AI tobacco valuation shows no value",a:"AI valuation must be manually triggered for each blend. Go to the tobacco detail page → Tobacco Valuation section → click 'Run AI Valuation'. This analyzes public marketplace data to estimate value. Legacy Premium users (subscribed before Feb 1, 2026) keep this feature."},{q:"Tobacco valuation fields are locked",a:"Manual Market Value and Cost Basis require Premium tier. AI Assisted Valuation requires Pro tier (or legacy Premium). Free users can track inventory and aging but not valuation."},{q:"How is tobacco value calculated on the Home page?",a:"The cellared card multiplies each blend's value (manual_market_value or ai_estimated_value) by its cellared quantity from the Cellar Log. Value is per-ounce, so total value = value_per_oz × cellared_oz."},{q:"Valuation card doesn't appear on tobacco detail page",a:"The Tobacco Valuation card should always be visible. If missing, try: 1) Hard refresh (Ctrl+Shift+R), 2) Clear browser cache, 3) Open in incognito mode. If still missing, contact support."},{q:"Can't add inventory - button is locked",a:"Inventory management is FREE for all users. If you see a lock on Add Lot, Edit Lot, or Log Consumption buttons, this is a bug. Try refreshing the page. Inventory features should never be gated."}]},{id:"functions",icon:vn,title:"General App Functions",color:"text-red-400",questions:[{q:"The app shows Terms of Service on launch - is this normal?",a:"Yes! First-time users must accept the Terms of Service and Privacy Policy before accessing the app. This is a one-time requirement. Once accepted, you'll go directly to your Home page. If you keep seeing it after accepting, try a hard refresh or clearing your browser cache."},{q:"How do I add photos to pipes or tobacco?",a:"Click the camera icon or 'Add Photo' button on detail pages. You can upload multiple photos per item."},{q:"Can I export my collection data?",a:"Yes! Look for export buttons on Pipes and Tobacco pages to download your collection as a spreadsheet."},{q:"How do I track smoking sessions?",a:"Use the Smoking Log on your Home page. Record which pipe and blend you smoked to track usage and build history."},{q:"What's the difference between cellared and open tobacco?",a:"Cellared = sealed/aging for future. Open = currently smoking. Track both to manage your inventory accurately."},{q:"How do I add interchangeable bowls?",a:"On the pipe detail page, find the 'Interchangeable Bowls' section. Great for Falcon, Gabotherm, and other systems."},{q:"Can I mark pipes or blends as favorites?",a:"Yes! Click the star/heart icon on any pipe or blend to mark it as a favorite for quick access."},{q:"Where can I review the Terms of Service or Privacy Policy?",a:"Both documents are accessible from the Help menu, your Profile page, and the footer links at the bottom of every page. You can review them anytime."},{q:"How do I know which measurement fields will be updated?",a:"The measurement lookup tool shows a preview before applying: it lists which photos/dimensions exist, which fields are missing, and which sources were used. Only blank or 'Unknown' fields get updated - your existing data is never overwritten."},{q:"Can I undo measurement or geometry updates?",a:"Measurement updates are immediate and can't be undone automatically. To revert: go to pipe detail page, tap Edit, and manually change fields back. Consider exporting your collection before running bulk updates."}]}].map(a=>({...a,questions:a.questions.filter(o=>o.q.toLowerCase().includes(e.toLowerCase())||o.a.toLowerCase().includes(e.toLowerCase())||a.title.toLowerCase().includes(e.toLowerCase()))})).filter(a=>a.questions.length>0);return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A2B3A] via-[#243548] to-[#1A2B3A] p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-8 text-center",children:[i.jsx("h1",{className:"text-4xl font-bold text-[#E0D8C8] mb-2",children:"Troubleshooting Guide"}),i.jsx("p",{className:"text-[#E0D8C8]/80 mb-4",children:"Common questions and solutions for PipeKeeper features"}),i.jsxs("div",{className:"flex gap-3 justify-center mt-4 flex-wrap",children:[i.jsx("a",{href:"/HowTo",children:i.jsxs("button",{className:"px-4 py-2 border border-gray-300 text-[#1a2c42] bg-white rounded-lg hover:bg-gray-50 transition-colors inline-flex items-center gap-2",children:[i.jsx(T4,{className:"w-4 h-4"}),"How-To Guides"]})}),i.jsx("a",{href:"/FAQ",children:i.jsxs("button",{className:"px-4 py-2 border border-gray-300 text-[#1a2c42] bg-white rounded-lg hover:bg-gray-50 transition-colors inline-flex items-center gap-2",children:[i.jsx(bh,{className:"w-4 h-4"}),"FAQ"]})})]})]}),i.jsx("div",{className:"mb-6",children:i.jsx("input",{type:"text",placeholder:"Search troubleshooting topics...",value:e,onChange:a=>n(a.target.value),className:"w-full px-4 py-3 rounded-lg bg-white border border-gray-300 text-[#1a2c42] placeholder-gray-500 focus:outline-none focus:border-blue-500"})}),s.length===0?i.jsx(Ee,{className:"bg-white border-gray-200",children:i.jsxs(Oe,{className:"p-8 text-center",children:[i.jsx(bh,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),i.jsx("p",{className:"text-[#1a2c42]/80",children:"No results found. Try a different search term."})]})}):i.jsx("div",{className:"space-y-6",children:s.map(a=>{const o=a.icon;return i.jsxs(Ee,{className:"bg-white border-gray-200",children:[i.jsx(Ze,{children:i.jsxs(et,{className:"flex items-center gap-2 text-gray-900",children:[i.jsx(o,{className:`w-6 h-6 ${a.color}`}),a.title]})}),i.jsx(Oe,{children:i.jsx(pV,{type:"single",collapsible:!0,className:"w-full",children:a.questions.map((l,c)=>i.jsxs(_x,{value:`item-${c}`,className:"border-gray-200",children:[i.jsx(Sx,{className:"text-left text-gray-900 hover:text-blue-600",children:l.q}),i.jsx(Cx,{className:"text-gray-700 leading-relaxed",children:l.a})]},c))})})]},a.id)})}),i.jsxs("div",{className:"mt-8 p-6 bg-white border border-gray-200 rounded-2xl text-center",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Still Need Help?"}),i.jsxs("p",{className:"text-gray-700 mb-4",children:["Check ",i.jsx("a",{href:"/HowTo",className:"text-blue-600 hover:underline",children:"How-To Guides"})," for step-by-step instructions,"," ",i.jsx("a",{href:"/FAQ",className:"text-blue-600 hover:underline",children:"FAQ"})," for general info, or"," ",i.jsx("a",{href:"/Support",className:"text-blue-600 hover:underline",children:"contact support"}),"."]})]})]})})}var D5,lD;function $a(){if(lD)return D5;lD=1;var e=Array.isArray;return D5=e,D5}var I5,cD;function oY(){if(cD)return I5;cD=1;var e=typeof ab=="object"&&ab&&ab.Object===Object&&ab;return I5=e,I5}var M5,uD;function Mc(){if(uD)return M5;uD=1;var e=oY(),n=typeof self=="object"&&self&&self.Object===Object&&self,r=e||n||Function("return this")();return M5=r,M5}var F5,dD;function xy(){if(dD)return F5;dD=1;var e=Mc(),n=e.Symbol;return F5=n,F5}var B5,hD;function b2e(){if(hD)return B5;hD=1;var e=xy(),n=Object.prototype,r=n.hasOwnProperty,s=n.toString,a=e?e.toStringTag:void 0;function o(l){var c=r.call(l,a),u=l[a];try{l[a]=void 0;var d=!0}catch{}var f=s.call(l);return d&&(c?l[a]=u:delete l[a]),f}return B5=o,B5}var $5,fD;function w2e(){if(fD)return $5;fD=1;var e=Object.prototype,n=e.toString;function r(s){return n.call(s)}return $5=r,$5}var q5,mD;function Gu(){if(mD)return q5;mD=1;var e=xy(),n=b2e(),r=w2e(),s="[object Null]",a="[object Undefined]",o=e?e.toStringTag:void 0;function l(c){return c==null?c===void 0?a:s:o&&o in Object(c)?n(c):r(c)}return q5=l,q5}var z5,pD;function Yu(){if(pD)return z5;pD=1;function e(n){return n!=null&&typeof n=="object"}return z5=e,z5}var U5,gD;function d0(){if(gD)return U5;gD=1;var e=Gu(),n=Yu(),r="[object Symbol]";function s(a){return typeof a=="symbol"||n(a)&&e(a)==r}return U5=s,U5}var V5,xD;function D3(){if(xD)return V5;xD=1;var e=$a(),n=d0(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function a(o,l){if(e(o))return!1;var c=typeof o;return c=="number"||c=="symbol"||c=="boolean"||o==null||n(o)?!0:s.test(o)||!r.test(o)||l!=null&&o in Object(l)}return V5=a,V5}var H5,vD;function Wh(){if(vD)return H5;vD=1;function e(n){var r=typeof n;return n!=null&&(r=="object"||r=="function")}return H5=e,H5}var W5,yD;function I3(){if(yD)return W5;yD=1;var e=Gu(),n=Wh(),r="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",o="[object Proxy]";function l(c){if(!n(c))return!1;var u=e(c);return u==s||u==a||u==r||u==o}return W5=l,W5}var K5,bD;function j2e(){if(bD)return K5;bD=1;var e=Mc(),n=e["__core-js_shared__"];return K5=n,K5}var G5,wD;function N2e(){if(wD)return G5;wD=1;var e=j2e(),n=(function(){var s=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})();function r(s){return!!n&&n in s}return G5=r,G5}var Y5,jD;function lY(){if(jD)return Y5;jD=1;var e=Function.prototype,n=e.toString;function r(s){if(s!=null){try{return n.call(s)}catch{}try{return s+""}catch{}}return""}return Y5=r,Y5}var Q5,ND;function _2e(){if(ND)return Q5;ND=1;var e=I3(),n=N2e(),r=Wh(),s=lY(),a=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,f=RegExp("^"+u.call(d).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(g){if(!r(g)||n(g))return!1;var x=e(g)?f:o;return x.test(s(g))}return Q5=m,Q5}var X5,_D;function S2e(){if(_D)return X5;_D=1;function e(n,r){return n==null?void 0:n[r]}return X5=e,X5}var J5,SD;function Mm(){if(SD)return J5;SD=1;var e=_2e(),n=S2e();function r(s,a){var o=n(s,a);return e(o)?o:void 0}return J5=r,J5}var Z5,CD;function Q2(){if(CD)return Z5;CD=1;var e=Mm(),n=e(Object,"create");return Z5=n,Z5}var e_,PD;function C2e(){if(PD)return e_;PD=1;var e=Q2();function n(){this.__data__=e?e(null):{},this.size=0}return e_=n,e_}var t_,AD;function P2e(){if(AD)return t_;AD=1;function e(n){var r=this.has(n)&&delete this.__data__[n];return this.size-=r?1:0,r}return t_=e,t_}var n_,kD;function A2e(){if(kD)return n_;kD=1;var e=Q2(),n="__lodash_hash_undefined__",r=Object.prototype,s=r.hasOwnProperty;function a(o){var l=this.__data__;if(e){var c=l[o];return c===n?void 0:c}return s.call(l,o)?l[o]:void 0}return n_=a,n_}var r_,ED;function k2e(){if(ED)return r_;ED=1;var e=Q2(),n=Object.prototype,r=n.hasOwnProperty;function s(a){var o=this.__data__;return e?o[a]!==void 0:r.call(o,a)}return r_=s,r_}var s_,TD;function E2e(){if(TD)return s_;TD=1;var e=Q2(),n="__lodash_hash_undefined__";function r(s,a){var o=this.__data__;return this.size+=this.has(s)?0:1,o[s]=e&&a===void 0?n:a,this}return s_=r,s_}var i_,OD;function T2e(){if(OD)return i_;OD=1;var e=C2e(),n=P2e(),r=A2e(),s=k2e(),a=E2e();function o(l){var c=-1,u=l==null?0:l.length;for(this.clear();++c<u;){var d=l[c];this.set(d[0],d[1])}}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=s,o.prototype.set=a,i_=o,i_}var a_,LD;function O2e(){if(LD)return a_;LD=1;function e(){this.__data__=[],this.size=0}return a_=e,a_}var o_,RD;function M3(){if(RD)return o_;RD=1;function e(n,r){return n===r||n!==n&&r!==r}return o_=e,o_}var l_,DD;function X2(){if(DD)return l_;DD=1;var e=M3();function n(r,s){for(var a=r.length;a--;)if(e(r[a][0],s))return a;return-1}return l_=n,l_}var c_,ID;function L2e(){if(ID)return c_;ID=1;var e=X2(),n=Array.prototype,r=n.splice;function s(a){var o=this.__data__,l=e(o,a);if(l<0)return!1;var c=o.length-1;return l==c?o.pop():r.call(o,l,1),--this.size,!0}return c_=s,c_}var u_,MD;function R2e(){if(MD)return u_;MD=1;var e=X2();function n(r){var s=this.__data__,a=e(s,r);return a<0?void 0:s[a][1]}return u_=n,u_}var d_,FD;function D2e(){if(FD)return d_;FD=1;var e=X2();function n(r){return e(this.__data__,r)>-1}return d_=n,d_}var h_,BD;function I2e(){if(BD)return h_;BD=1;var e=X2();function n(r,s){var a=this.__data__,o=e(a,r);return o<0?(++this.size,a.push([r,s])):a[o][1]=s,this}return h_=n,h_}var f_,$D;function J2(){if($D)return f_;$D=1;var e=O2e(),n=L2e(),r=R2e(),s=D2e(),a=I2e();function o(l){var c=-1,u=l==null?0:l.length;for(this.clear();++c<u;){var d=l[c];this.set(d[0],d[1])}}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=s,o.prototype.set=a,f_=o,f_}var m_,qD;function F3(){if(qD)return m_;qD=1;var e=Mm(),n=Mc(),r=e(n,"Map");return m_=r,m_}var p_,zD;function M2e(){if(zD)return p_;zD=1;var e=T2e(),n=J2(),r=F3();function s(){this.size=0,this.__data__={hash:new e,map:new(r||n),string:new e}}return p_=s,p_}var g_,UD;function F2e(){if(UD)return g_;UD=1;function e(n){var r=typeof n;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?n!=="__proto__":n===null}return g_=e,g_}var x_,VD;function Z2(){if(VD)return x_;VD=1;var e=F2e();function n(r,s){var a=r.__data__;return e(s)?a[typeof s=="string"?"string":"hash"]:a.map}return x_=n,x_}var v_,HD;function B2e(){if(HD)return v_;HD=1;var e=Z2();function n(r){var s=e(this,r).delete(r);return this.size-=s?1:0,s}return v_=n,v_}var y_,WD;function $2e(){if(WD)return y_;WD=1;var e=Z2();function n(r){return e(this,r).get(r)}return y_=n,y_}var b_,KD;function q2e(){if(KD)return b_;KD=1;var e=Z2();function n(r){return e(this,r).has(r)}return b_=n,b_}var w_,GD;function z2e(){if(GD)return w_;GD=1;var e=Z2();function n(r,s){var a=e(this,r),o=a.size;return a.set(r,s),this.size+=a.size==o?0:1,this}return w_=n,w_}var j_,YD;function B3(){if(YD)return j_;YD=1;var e=M2e(),n=B2e(),r=$2e(),s=q2e(),a=z2e();function o(l){var c=-1,u=l==null?0:l.length;for(this.clear();++c<u;){var d=l[c];this.set(d[0],d[1])}}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=s,o.prototype.set=a,j_=o,j_}var N_,QD;function cY(){if(QD)return N_;QD=1;var e=B3(),n="Expected a function";function r(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError(n);var o=function(){var l=arguments,c=a?a.apply(this,l):l[0],u=o.cache;if(u.has(c))return u.get(c);var d=s.apply(this,l);return o.cache=u.set(c,d)||u,d};return o.cache=new(r.Cache||e),o}return r.Cache=e,N_=r,N_}var __,XD;function U2e(){if(XD)return __;XD=1;var e=cY(),n=500;function r(s){var a=e(s,function(l){return o.size===n&&o.clear(),l}),o=a.cache;return a}return __=r,__}var S_,JD;function V2e(){if(JD)return S_;JD=1;var e=U2e(),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,s=e(function(a){var o=[];return a.charCodeAt(0)===46&&o.push(""),a.replace(n,function(l,c,u,d){o.push(u?d.replace(r,"$1"):c||l)}),o});return S_=s,S_}var C_,ZD;function $3(){if(ZD)return C_;ZD=1;function e(n,r){for(var s=-1,a=n==null?0:n.length,o=Array(a);++s<a;)o[s]=r(n[s],s,n);return o}return C_=e,C_}var P_,eI;function H2e(){if(eI)return P_;eI=1;var e=xy(),n=$3(),r=$a(),s=d0(),a=e?e.prototype:void 0,o=a?a.toString:void 0;function l(c){if(typeof c=="string")return c;if(r(c))return n(c,l)+"";if(s(c))return o?o.call(c):"";var u=c+"";return u=="0"&&1/c==-1/0?"-0":u}return P_=l,P_}var A_,tI;function uY(){if(tI)return A_;tI=1;var e=H2e();function n(r){return r==null?"":e(r)}return A_=n,A_}var k_,nI;function dY(){if(nI)return k_;nI=1;var e=$a(),n=D3(),r=V2e(),s=uY();function a(o,l){return e(o)?o:n(o,l)?[o]:r(s(o))}return k_=a,k_}var E_,rI;function ej(){if(rI)return E_;rI=1;var e=d0();function n(r){if(typeof r=="string"||e(r))return r;var s=r+"";return s=="0"&&1/r==-1/0?"-0":s}return E_=n,E_}var T_,sI;function q3(){if(sI)return T_;sI=1;var e=dY(),n=ej();function r(s,a){a=e(a,s);for(var o=0,l=a.length;s!=null&&o<l;)s=s[n(a[o++])];return o&&o==l?s:void 0}return T_=r,T_}var O_,iI;function hY(){if(iI)return O_;iI=1;var e=q3();function n(r,s,a){var o=r==null?void 0:e(r,s);return o===void 0?a:o}return O_=n,O_}var W2e=hY();const $o=ur(W2e);var L_,aI;function K2e(){if(aI)return L_;aI=1;function e(n){return n==null}return L_=e,L_}var G2e=K2e();const er=ur(G2e);var R_,oI;function Y2e(){if(oI)return R_;oI=1;var e=Gu(),n=$a(),r=Yu(),s="[object String]";function a(o){return typeof o=="string"||!n(o)&&r(o)&&e(o)==s}return R_=a,R_}var Q2e=Y2e();const Cm=ur(Q2e);var X2e=I3();const Nn=ur(X2e);var J2e=Wh();const h0=ur(J2e);var D_={exports:{}},rr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lI;function Z2e(){if(lI)return rr;lI=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function y(b){if(typeof b=="object"&&b!==null){var N=b.$$typeof;switch(N){case e:switch(b=b.type,b){case r:case a:case s:case d:case f:return b;default:switch(b=b&&b.$$typeof,b){case c:case l:case u:case g:case m:case o:return b;default:return N}}case n:return N}}}return rr.ContextConsumer=l,rr.ContextProvider=o,rr.Element=e,rr.ForwardRef=u,rr.Fragment=r,rr.Lazy=g,rr.Memo=m,rr.Portal=n,rr.Profiler=a,rr.StrictMode=s,rr.Suspense=d,rr.SuspenseList=f,rr.isAsyncMode=function(){return!1},rr.isConcurrentMode=function(){return!1},rr.isContextConsumer=function(b){return y(b)===l},rr.isContextProvider=function(b){return y(b)===o},rr.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},rr.isForwardRef=function(b){return y(b)===u},rr.isFragment=function(b){return y(b)===r},rr.isLazy=function(b){return y(b)===g},rr.isMemo=function(b){return y(b)===m},rr.isPortal=function(b){return y(b)===n},rr.isProfiler=function(b){return y(b)===a},rr.isStrictMode=function(b){return y(b)===s},rr.isSuspense=function(b){return y(b)===d},rr.isSuspenseList=function(b){return y(b)===f},rr.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===r||b===a||b===s||b===d||b===f||b===x||typeof b=="object"&&b!==null&&(b.$$typeof===g||b.$$typeof===m||b.$$typeof===o||b.$$typeof===l||b.$$typeof===u||b.$$typeof===v||b.getModuleId!==void 0)},rr.typeOf=y,rr}var cI;function eje(){return cI||(cI=1,D_.exports=Z2e()),D_.exports}var tje=eje(),I_,uI;function fY(){if(uI)return I_;uI=1;var e=Gu(),n=Yu(),r="[object Number]";function s(a){return typeof a=="number"||n(a)&&e(a)==r}return I_=s,I_}var M_,dI;function nje(){if(dI)return M_;dI=1;var e=fY();function n(r){return e(r)&&r!=+r}return M_=n,M_}var rje=nje();const vy=ur(rje);var sje=fY();const ije=ur(sje);var Cl=function(n){return n===0?0:n>0?1:-1},Uf=function(n){return Cm(n)&&n.indexOf("%")===n.length-1},bt=function(n){return ije(n)&&!vy(n)},aje=function(n){return er(n)},Bs=function(n){return bt(n)||Cm(n)},oje=0,tj=function(n){var r=++oje;return"".concat(n||"").concat(r)},Pm=function(n,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!bt(n)&&!Cm(n))return s;var o;if(Uf(n)){var l=n.indexOf("%");o=r*parseFloat(n.slice(0,l))/100}else o=+n;return vy(o)&&(o=s),a&&o>r&&(o=r),o},Xd=function(n){if(!n)return null;var r=Object.keys(n);return r&&r.length?n[r[0]]:null},lje=function(n){if(!Array.isArray(n))return!1;for(var r=n.length,s={},a=0;a<r;a++)if(!s[n[a]])s[n[a]]=!0;else return!0;return!1},Pp=function(n,r){return bt(n)&&bt(r)?function(s){return n+s*(r-n)}:function(){return r}};function fk(e,n,r){return!e||!e.length?null:e.find(function(s){return s&&(typeof n=="function"?n(s):$o(s,n))===r})}var cje=function(n,r){return bt(n)&&bt(r)?n-r:Cm(n)&&Cm(r)?n.localeCompare(r):n instanceof Date&&r instanceof Date?n.getTime()-r.getTime():String(n).localeCompare(String(r))};function rg(e,n){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(n,r)||e[r]!==n[r]))return!1;for(var s in n)if({}.hasOwnProperty.call(n,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function mk(e){"@babel/helpers - typeof";return mk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mk(e)}var uje=["viewBox","children"],dje=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],hI=["points","pathLength"],F_={svg:uje,polygon:hI,polyline:hI},z3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Z1=function(n,r){if(!n||typeof n=="function"||typeof n=="boolean")return null;var s=n;if(C.isValidElement(n)&&(s=n.props),!h0(s))return null;var a={};return Object.keys(s).forEach(function(o){z3.includes(o)&&(a[o]=r||function(l){return s[o](s,l)})}),a},hje=function(n,r,s){return function(a){return n(r,s,a),null}},ew=function(n,r,s){if(!h0(n)||mk(n)!=="object")return null;var a=null;return Object.keys(n).forEach(function(o){var l=n[o];z3.includes(o)&&typeof l=="function"&&(a||(a={}),a[o]=hje(l,r,s))}),a},fje=["children"],mje=["children"];function fI(e,n){if(e==null)return{};var r=pje(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function pje(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}var mI={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Iu=function(n){return typeof n=="string"?n:n?n.displayName||n.name||"Component":""},pI=null,B_=null,U3=function e(n){if(n===pI&&Array.isArray(B_))return B_;var r=[];return C.Children.forEach(n,function(s){er(s)||(tje.isFragment(s)?r=r.concat(e(s.props.children)):r.push(s))}),B_=r,pI=n,r};function Pl(e,n){var r=[],s=[];return Array.isArray(n)?s=n.map(function(a){return Iu(a)}):s=[Iu(n)],U3(e).forEach(function(a){var o=$o(a,"type.displayName")||$o(a,"type.name");s.indexOf(o)!==-1&&r.push(a)}),r}function to(e,n){var r=Pl(e,n);return r&&r[0]}var gI=function(n){if(!n||!n.props)return!1;var r=n.props,s=r.width,a=r.height;return!(!bt(s)||s<=0||!bt(a)||a<=0)},gje=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],xje=function(n){return n&&n.type&&Cm(n.type)&&gje.indexOf(n.type)>=0},vje=function(n,r,s,a){var o,l=(o=F_==null?void 0:F_[a])!==null&&o!==void 0?o:[];return r.startsWith("data-")||!Nn(n)&&(a&&l.includes(r)||dje.includes(r))||s&&z3.includes(r)},Zn=function(n,r,s){if(!n||typeof n=="function"||typeof n=="boolean")return null;var a=n;if(C.isValidElement(n)&&(a=n.props),!h0(a))return null;var o={};return Object.keys(a).forEach(function(l){var c;vje((c=a)===null||c===void 0?void 0:c[l],l,r,s)&&(o[l]=a[l])}),o},pk=function e(n,r){if(n===r)return!0;var s=C.Children.count(n);if(s!==C.Children.count(r))return!1;if(s===0)return!0;if(s===1)return xI(Array.isArray(n)?n[0]:n,Array.isArray(r)?r[0]:r);for(var a=0;a<s;a++){var o=n[a],l=r[a];if(Array.isArray(o)||Array.isArray(l)){if(!e(o,l))return!1}else if(!xI(o,l))return!1}return!0},xI=function(n,r){if(er(n)&&er(r))return!0;if(!er(n)&&!er(r)){var s=n.props||{},a=s.children,o=fI(s,fje),l=r.props||{},c=l.children,u=fI(l,mje);return a&&c?rg(o,u)&&pk(a,c):!a&&!c?rg(o,u):!1}return!1},vI=function(n,r){var s=[],a={};return U3(n).forEach(function(o,l){if(xje(o))s.push(o);else if(o){var c=Iu(o.type),u=r[c]||{},d=u.handler,f=u.once;if(d&&(!f||!a[c])){var m=d(o,c,l);s.push(m),a[c]=!0}}}),s},yje=function(n){var r=n&&n.type;return r&&mI[r]?mI[r]:null},bje=function(n,r){return U3(r).indexOf(n)},wje=["children","width","height","viewBox","className","style","title","desc"];function gk(){return gk=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},gk.apply(this,arguments)}function jje(e,n){if(e==null)return{};var r=Nje(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Nje(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}function xk(e){var n=e.children,r=e.width,s=e.height,a=e.viewBox,o=e.className,l=e.style,c=e.title,u=e.desc,d=jje(e,wje),f=a||{width:r,height:s,x:0,y:0},m=zn("recharts-surface",o);return ve.createElement("svg",gk({},Zn(d,!0,"svg"),{className:m,width:r,height:s,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),ve.createElement("title",null,c),ve.createElement("desc",null,u),n)}var _je=["children","className"];function vk(){return vk=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},vk.apply(this,arguments)}function Sje(e,n){if(e==null)return{};var r=Cje(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Cje(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}var Zs=ve.forwardRef(function(e,n){var r=e.children,s=e.className,a=Sje(e,_je),o=zn("recharts-layer",s);return ve.createElement("g",vk({className:o},Zn(a,!0),{ref:n}),r)}),Mu=function(n,r){for(var s=arguments.length,a=new Array(s>2?s-2:0),o=2;o<s;o++)a[o-2]=arguments[o]},$_,yI;function Pje(){if(yI)return $_;yI=1;function e(n,r,s){var a=-1,o=n.length;r<0&&(r=-r>o?0:o+r),s=s>o?o:s,s<0&&(s+=o),o=r>s?0:s-r>>>0,r>>>=0;for(var l=Array(o);++a<o;)l[a]=n[a+r];return l}return $_=e,$_}var q_,bI;function Aje(){if(bI)return q_;bI=1;var e=Pje();function n(r,s,a){var o=r.length;return a=a===void 0?o:a,!s&&a>=o?r:e(r,s,a)}return q_=n,q_}var z_,wI;function mY(){if(wI)return z_;wI=1;var e="\\ud800-\\udfff",n="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",a=n+r+s,o="\\ufe0e\\ufe0f",l="\\u200d",c=RegExp("["+l+e+a+o+"]");function u(d){return c.test(d)}return z_=u,z_}var U_,jI;function kje(){if(jI)return U_;jI=1;function e(n){return n.split("")}return U_=e,U_}var V_,NI;function Eje(){if(NI)return V_;NI=1;var e="\\ud800-\\udfff",n="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",a=n+r+s,o="\\ufe0e\\ufe0f",l="["+e+"]",c="["+a+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+c+"|"+u+")",f="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",v=d+"?",y="["+o+"]?",b="(?:"+x+"(?:"+[f,m,g].join("|")+")"+y+v+")*",N=y+v+b,j="(?:"+[f+c+"?",c,m,g,l].join("|")+")",S=RegExp(u+"(?="+u+")|"+j+N,"g");function A(P){return P.match(S)||[]}return V_=A,V_}var H_,_I;function Tje(){if(_I)return H_;_I=1;var e=kje(),n=mY(),r=Eje();function s(a){return n(a)?r(a):e(a)}return H_=s,H_}var W_,SI;function Oje(){if(SI)return W_;SI=1;var e=Aje(),n=mY(),r=Tje(),s=uY();function a(o){return function(l){l=s(l);var c=n(l)?r(l):void 0,u=c?c[0]:l.charAt(0),d=c?e(c,1).join(""):l.slice(1);return u[o]()+d}}return W_=a,W_}var K_,CI;function Lje(){if(CI)return K_;CI=1;var e=Oje(),n=e("toUpperCase");return K_=n,K_}var Rje=Lje();const nj=ur(Rje);function Sr(e){return function(){return e}}const pY=Math.cos,tw=Math.sin,Il=Math.sqrt,nw=Math.PI,rj=2*nw,yk=Math.PI,bk=2*yk,If=1e-6,Dje=bk-If;function gY(e){this._+=e[0];for(let n=1,r=e.length;n<r;++n)this._+=arguments[n]+e[n]}function Ije(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return gY;const r=10**n;return function(s){this._+=s[0];for(let a=1,o=s.length;a<o;++a)this._+=Math.round(arguments[a]*r)/r+s[a]}}class Mje{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?gY:Ije(n)}moveTo(n,r){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,r){this._append`L${this._x1=+n},${this._y1=+r}`}quadraticCurveTo(n,r,s,a){this._append`Q${+n},${+r},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(n,r,s,a,o,l){this._append`C${+n},${+r},${+s},${+a},${this._x1=+o},${this._y1=+l}`}arcTo(n,r,s,a,o){if(n=+n,r=+r,s=+s,a=+a,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,c=this._y1,u=s-n,d=a-r,f=l-n,m=c-r,g=f*f+m*m;if(this._x1===null)this._append`M${this._x1=n},${this._y1=r}`;else if(g>If)if(!(Math.abs(m*u-d*f)>If)||!o)this._append`L${this._x1=n},${this._y1=r}`;else{let x=s-l,v=a-c,y=u*u+d*d,b=x*x+v*v,N=Math.sqrt(y),j=Math.sqrt(g),S=o*Math.tan((yk-Math.acos((y+g-b)/(2*N*j)))/2),A=S/j,P=S/N;Math.abs(A-1)>If&&this._append`L${n+A*f},${r+A*m}`,this._append`A${o},${o},0,0,${+(m*x>f*v)},${this._x1=n+P*u},${this._y1=r+P*d}`}}arc(n,r,s,a,o,l){if(n=+n,r=+r,s=+s,l=!!l,s<0)throw new Error(`negative radius: ${s}`);let c=s*Math.cos(a),u=s*Math.sin(a),d=n+c,f=r+u,m=1^l,g=l?a-o:o-a;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>If||Math.abs(this._y1-f)>If)&&this._append`L${d},${f}`,s&&(g<0&&(g=g%bk+bk),g>Dje?this._append`A${s},${s},0,1,${m},${n-c},${r-u}A${s},${s},0,1,${m},${this._x1=d},${this._y1=f}`:g>If&&this._append`A${s},${s},0,${+(g>=yk)},${m},${this._x1=n+s*Math.cos(o)},${this._y1=r+s*Math.sin(o)}`)}rect(n,r,s,a){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+r}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function V3(e){let n=3;return e.digits=function(r){if(!arguments.length)return n;if(r==null)n=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);n=s}return e},()=>new Mje(n)}function H3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xY(e){this._context=e}xY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function sj(e){return new xY(e)}function vY(e){return e[0]}function yY(e){return e[1]}function bY(e,n){var r=Sr(!0),s=null,a=sj,o=null,l=V3(c);e=typeof e=="function"?e:e===void 0?vY:Sr(e),n=typeof n=="function"?n:n===void 0?yY:Sr(n);function c(u){var d,f=(u=H3(u)).length,m,g=!1,x;for(s==null&&(o=a(x=l())),d=0;d<=f;++d)!(d<f&&r(m=u[d],d,u))===g&&((g=!g)?o.lineStart():o.lineEnd()),g&&o.point(+e(m,d,u),+n(m,d,u));if(x)return o=null,x+""||null}return c.x=function(u){return arguments.length?(e=typeof u=="function"?u:Sr(+u),c):e},c.y=function(u){return arguments.length?(n=typeof u=="function"?u:Sr(+u),c):n},c.defined=function(u){return arguments.length?(r=typeof u=="function"?u:Sr(!!u),c):r},c.curve=function(u){return arguments.length?(a=u,s!=null&&(o=a(s)),c):a},c.context=function(u){return arguments.length?(u==null?s=o=null:o=a(s=u),c):s},c}function Tb(e,n,r){var s=null,a=Sr(!0),o=null,l=sj,c=null,u=V3(d);e=typeof e=="function"?e:e===void 0?vY:Sr(+e),n=typeof n=="function"?n:Sr(n===void 0?0:+n),r=typeof r=="function"?r:r===void 0?yY:Sr(+r);function d(m){var g,x,v,y=(m=H3(m)).length,b,N=!1,j,S=new Array(y),A=new Array(y);for(o==null&&(c=l(j=u())),g=0;g<=y;++g){if(!(g<y&&a(b=m[g],g,m))===N)if(N=!N)x=g,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),v=g-1;v>=x;--v)c.point(S[v],A[v]);c.lineEnd(),c.areaEnd()}N&&(S[g]=+e(b,g,m),A[g]=+n(b,g,m),c.point(s?+s(b,g,m):S[g],r?+r(b,g,m):A[g]))}if(j)return c=null,j+""||null}function f(){return bY().defined(a).curve(l).context(o)}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:Sr(+m),s=null,d):e},d.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Sr(+m),d):e},d.x1=function(m){return arguments.length?(s=m==null?null:typeof m=="function"?m:Sr(+m),d):s},d.y=function(m){return arguments.length?(n=typeof m=="function"?m:Sr(+m),r=null,d):n},d.y0=function(m){return arguments.length?(n=typeof m=="function"?m:Sr(+m),d):n},d.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Sr(+m),d):r},d.lineX0=d.lineY0=function(){return f().x(e).y(n)},d.lineY1=function(){return f().x(e).y(r)},d.lineX1=function(){return f().x(s).y(n)},d.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Sr(!!m),d):a},d.curve=function(m){return arguments.length?(l=m,o!=null&&(c=l(o)),d):l},d.context=function(m){return arguments.length?(m==null?o=c=null:c=l(o=m),d):o},d}class wY{constructor(n,r){this._context=n,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,r){switch(n=+n,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,r,n,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,n,this._y0,n,r);break}}this._x0=n,this._y0=r}}function Fje(e){return new wY(e,!0)}function Bje(e){return new wY(e,!1)}const W3={draw(e,n){const r=Il(n/nw);e.moveTo(r,0),e.arc(0,0,r,0,rj)}},$je={draw(e,n){const r=Il(n/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},jY=Il(1/3),qje=jY*2,zje={draw(e,n){const r=Il(n/qje),s=r*jY;e.moveTo(0,-r),e.lineTo(s,0),e.lineTo(0,r),e.lineTo(-s,0),e.closePath()}},Uje={draw(e,n){const r=Il(n),s=-r/2;e.rect(s,s,r,r)}},Vje=.8908130915292852,NY=tw(nw/10)/tw(7*nw/10),Hje=tw(rj/10)*NY,Wje=-pY(rj/10)*NY,Kje={draw(e,n){const r=Il(n*Vje),s=Hje*r,a=Wje*r;e.moveTo(0,-r),e.lineTo(s,a);for(let o=1;o<5;++o){const l=rj*o/5,c=pY(l),u=tw(l);e.lineTo(u*r,-c*r),e.lineTo(c*s-u*a,u*s+c*a)}e.closePath()}},G_=Il(3),Gje={draw(e,n){const r=-Il(n/(G_*3));e.moveTo(0,r*2),e.lineTo(-G_*r,-r),e.lineTo(G_*r,-r),e.closePath()}},Oo=-.5,Lo=Il(3)/2,wk=1/Il(12),Yje=(wk/2+1)*3,Qje={draw(e,n){const r=Il(n/Yje),s=r/2,a=r*wk,o=s,l=r*wk+r,c=-o,u=l;e.moveTo(s,a),e.lineTo(o,l),e.lineTo(c,u),e.lineTo(Oo*s-Lo*a,Lo*s+Oo*a),e.lineTo(Oo*o-Lo*l,Lo*o+Oo*l),e.lineTo(Oo*c-Lo*u,Lo*c+Oo*u),e.lineTo(Oo*s+Lo*a,Oo*a-Lo*s),e.lineTo(Oo*o+Lo*l,Oo*l-Lo*o),e.lineTo(Oo*c+Lo*u,Oo*u-Lo*c),e.closePath()}};function Xje(e,n){let r=null,s=V3(a);e=typeof e=="function"?e:Sr(e||W3),n=typeof n=="function"?n:Sr(n===void 0?64:+n);function a(){let o;if(r||(r=o=s()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),o)return r=null,o+""||null}return a.type=function(o){return arguments.length?(e=typeof o=="function"?o:Sr(o),a):e},a.size=function(o){return arguments.length?(n=typeof o=="function"?o:Sr(+o),a):n},a.context=function(o){return arguments.length?(r=o??null,a):r},a}function rw(){}function sw(e,n,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+r)/6)}function _Y(e){this._context=e}_Y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sw(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function Jje(e){return new _Y(e)}function SY(e){this._context=e}SY.prototype={areaStart:rw,areaEnd:rw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._x2=e,this._y2=n;break;case 1:this._point=2,this._x3=e,this._y3=n;break;case 2:this._point=3,this._x4=e,this._y4=n,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+n)/6);break;default:sw(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function Zje(e){return new SY(e)}function CY(e){this._context=e}CY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:sw(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function eNe(e){return new CY(e)}function PY(e){this._context=e}PY.prototype={areaStart:rw,areaEnd:rw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,n){e=+e,n=+n,this._point?this._context.lineTo(e,n):(this._point=1,this._context.moveTo(e,n))}};function tNe(e){return new PY(e)}function PI(e){return e<0?-1:1}function AI(e,n,r){var s=e._x1-e._x0,a=n-e._x1,o=(e._y1-e._y0)/(s||a<0&&-0),l=(r-e._y1)/(a||s<0&&-0),c=(o*a+l*s)/(s+a);return(PI(o)+PI(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(c))||0}function kI(e,n){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-n)/2:n}function Y_(e,n,r){var s=e._x0,a=e._y0,o=e._x1,l=e._y1,c=(o-s)/3;e._context.bezierCurveTo(s+c,a+c*n,o-c,l-c*r,o,l)}function iw(e){this._context=e}iw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Y_(this,this._t0,kI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){var r=NaN;if(e=+e,n=+n,!(e===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,Y_(this,kI(this,r=AI(this,e,n)),r);break;default:Y_(this,this._t0,r=AI(this,e,n));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n,this._t0=r}}};function AY(e){this._context=new kY(e)}(AY.prototype=Object.create(iw.prototype)).point=function(e,n){iw.prototype.point.call(this,n,e)};function kY(e){this._context=e}kY.prototype={moveTo:function(e,n){this._context.moveTo(n,e)},closePath:function(){this._context.closePath()},lineTo:function(e,n){this._context.lineTo(n,e)},bezierCurveTo:function(e,n,r,s,a,o){this._context.bezierCurveTo(n,e,s,r,o,a)}};function nNe(e){return new iw(e)}function rNe(e){return new AY(e)}function EY(e){this._context=e}EY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,n=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],n[0]):this._context.moveTo(e[0],n[0]),r===2)this._context.lineTo(e[1],n[1]);else for(var s=EI(e),a=EI(n),o=0,l=1;l<r;++o,++l)this._context.bezierCurveTo(s[0][o],a[0][o],s[1][o],a[1][o],e[l],n[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,n){this._x.push(+e),this._y.push(+n)}};function EI(e){var n,r=e.length-1,s,a=new Array(r),o=new Array(r),l=new Array(r);for(a[0]=0,o[0]=2,l[0]=e[0]+2*e[1],n=1;n<r-1;++n)a[n]=1,o[n]=4,l[n]=4*e[n]+2*e[n+1];for(a[r-1]=2,o[r-1]=7,l[r-1]=8*e[r-1]+e[r],n=1;n<r;++n)s=a[n]/o[n-1],o[n]-=s,l[n]-=s*l[n-1];for(a[r-1]=l[r-1]/o[r-1],n=r-2;n>=0;--n)a[n]=(l[n]-a[n+1])/o[n];for(o[r-1]=(e[r]+a[r-1])/2,n=0;n<r-1;++n)o[n]=2*e[n+1]-a[n+1];return[a,o]}function sNe(e){return new EY(e)}function ij(e,n){this._context=e,this._t=n}ij.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(e,n);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,n)}break}}this._x=e,this._y=n}};function iNe(e){return new ij(e,.5)}function aNe(e){return new ij(e,0)}function oNe(e){return new ij(e,1)}function Pg(e,n){if((l=e.length)>1)for(var r=1,s,a,o=e[n[0]],l,c=o.length;r<l;++r)for(a=o,o=e[n[r]],s=0;s<c;++s)o[s][1]+=o[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function jk(e){for(var n=e.length,r=new Array(n);--n>=0;)r[n]=n;return r}function lNe(e,n){return e[n]}function cNe(e){const n=[];return n.key=e,n}function uNe(){var e=Sr([]),n=jk,r=Pg,s=lNe;function a(o){var l=Array.from(e.apply(this,arguments),cNe),c,u=l.length,d=-1,f;for(const m of o)for(c=0,++d;c<u;++c)(l[c][d]=[0,+s(m,l[c].key,d,o)]).data=m;for(c=0,f=H3(n(l));c<u;++c)l[f[c]].index=c;return r(l,f),l}return a.keys=function(o){return arguments.length?(e=typeof o=="function"?o:Sr(Array.from(o)),a):e},a.value=function(o){return arguments.length?(s=typeof o=="function"?o:Sr(+o),a):s},a.order=function(o){return arguments.length?(n=o==null?jk:typeof o=="function"?o:Sr(Array.from(o)),a):n},a.offset=function(o){return arguments.length?(r=o??Pg,a):r},a}function dNe(e,n){if((s=e.length)>0){for(var r,s,a=0,o=e[0].length,l;a<o;++a){for(l=r=0;r<s;++r)l+=e[r][a][1]||0;if(l)for(r=0;r<s;++r)e[r][a][1]/=l}Pg(e,n)}}function hNe(e,n){if((a=e.length)>0){for(var r=0,s=e[n[0]],a,o=s.length;r<o;++r){for(var l=0,c=0;l<a;++l)c+=e[l][r][1]||0;s[r][1]+=s[r][0]=-c/2}Pg(e,n)}}function fNe(e,n){if(!(!((l=e.length)>0)||!((o=(a=e[n[0]]).length)>0))){for(var r=0,s=1,a,o,l;s<o;++s){for(var c=0,u=0,d=0;c<l;++c){for(var f=e[n[c]],m=f[s][1]||0,g=f[s-1][1]||0,x=(m-g)/2,v=0;v<c;++v){var y=e[n[v]],b=y[s][1]||0,N=y[s-1][1]||0;x+=b-N}u+=m,d+=x*m}a[s-1][1]+=a[s-1][0]=r,u&&(r-=d/u)}a[s-1][1]+=a[s-1][0]=r,Pg(e,n)}}function cv(e){"@babel/helpers - typeof";return cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},cv(e)}var mNe=["type","size","sizeType"];function Nk(){return Nk=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Nk.apply(this,arguments)}function TI(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function OI(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?TI(Object(r),!0).forEach(function(s){pNe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function pNe(e,n,r){return n=gNe(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function gNe(e){var n=xNe(e,"string");return cv(n)=="symbol"?n:n+""}function xNe(e,n){if(cv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(cv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function vNe(e,n){if(e==null)return{};var r=yNe(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function yNe(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}var TY={symbolCircle:W3,symbolCross:$je,symbolDiamond:zje,symbolSquare:Uje,symbolStar:Kje,symbolTriangle:Gje,symbolWye:Qje},bNe=Math.PI/180,wNe=function(n){var r="symbol".concat(nj(n));return TY[r]||W3},jNe=function(n,r,s){if(r==="area")return n;switch(s){case"cross":return 5*n*n/9;case"diamond":return .5*n*n/Math.sqrt(3);case"square":return n*n;case"star":{var a=18*bNe;return 1.25*n*n*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*n*n/4;case"wye":return(21-10*Math.sqrt(3))*n*n/8;default:return Math.PI*n*n/4}},NNe=function(n,r){TY["symbol".concat(nj(n))]=r},K3=function(n){var r=n.type,s=r===void 0?"circle":r,a=n.size,o=a===void 0?64:a,l=n.sizeType,c=l===void 0?"area":l,u=vNe(n,mNe),d=OI(OI({},u),{},{type:s,size:o,sizeType:c}),f=function(){var b=wNe(s),N=Xje().type(b).size(jNe(o,c,s));return N()},m=d.className,g=d.cx,x=d.cy,v=Zn(d,!0);return g===+g&&x===+x&&o===+o?ve.createElement("path",Nk({},v,{className:zn("recharts-symbols",m),transform:"translate(".concat(g,", ").concat(x,")"),d:f()})):null};K3.registerSymbol=NNe;function Ag(e){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ag(e)}function _k(){return _k=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_k.apply(this,arguments)}function LI(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function _Ne(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?LI(Object(r),!0).forEach(function(s){uv(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function SNe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function CNe(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,LY(s.key),s)}}function PNe(e,n,r){return n&&CNe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ANe(e,n,r){return n=aw(n),kNe(e,OY()?Reflect.construct(n,r||[],aw(e).constructor):n.apply(e,r))}function kNe(e,n){if(n&&(Ag(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ENe(e)}function ENe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OY=function(){return!!e})()}function aw(e){return aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},aw(e)}function TNe(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&Sk(e,n)}function Sk(e,n){return Sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Sk(e,n)}function uv(e,n,r){return n=LY(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function LY(e){var n=ONe(e,"string");return Ag(n)=="symbol"?n:n+""}function ONe(e,n){if(Ag(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Ag(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ro=32,G3=(function(e){function n(){return SNe(this,n),ANe(this,n,arguments)}return TNe(n,e),PNe(n,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,o=Ro/2,l=Ro/6,c=Ro/3,u=s.inactive?a:s.color;if(s.type==="plainline")return ve.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:o,x2:Ro,y2:o,className:"recharts-legend-icon"});if(s.type==="line")return ve.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(o,"h").concat(c,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*c,",").concat(o,`
            H`).concat(Ro,"M").concat(2*c,",").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(c,",").concat(o),className:"recharts-legend-icon"});if(s.type==="rect")return ve.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Ro/8,"h").concat(Ro,"v").concat(Ro*3/4,"h").concat(-Ro,"z"),className:"recharts-legend-icon"});if(ve.isValidElement(s.legendIcon)){var d=_Ne({},s);return delete d.legendIcon,ve.cloneElement(s.legendIcon,d)}return ve.createElement(K3,{fill:u,cx:o,cy:o,size:Ro,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,o=a.payload,l=a.iconSize,c=a.layout,u=a.formatter,d=a.inactiveColor,f={x:0,y:0,width:Ro,height:Ro},m={display:c==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(x,v){var y=x.formatter||u,b=zn(uv(uv({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",x.inactive));if(x.type==="none")return null;var N=Nn(x.value)?null:x.value;Mu(!Nn(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var j=x.inactive?d:x.color;return ve.createElement("li",_k({className:b,style:m,key:"legend-item-".concat(v)},ew(s.props,x,v)),ve.createElement(xk,{width:l,height:l,viewBox:f,style:g},s.renderIcon(x)),ve.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},y?y(N,x,v):N))})}},{key:"render",value:function(){var s=this.props,a=s.payload,o=s.layout,l=s.align;if(!a||!a.length)return null;var c={padding:0,margin:0,textAlign:o==="horizontal"?l:"left"};return ve.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(C.PureComponent);uv(G3,"displayName","Legend");uv(G3,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Q_,RI;function LNe(){if(RI)return Q_;RI=1;var e=J2();function n(){this.__data__=new e,this.size=0}return Q_=n,Q_}var X_,DI;function RNe(){if(DI)return X_;DI=1;function e(n){var r=this.__data__,s=r.delete(n);return this.size=r.size,s}return X_=e,X_}var J_,II;function DNe(){if(II)return J_;II=1;function e(n){return this.__data__.get(n)}return J_=e,J_}var Z_,MI;function INe(){if(MI)return Z_;MI=1;function e(n){return this.__data__.has(n)}return Z_=e,Z_}var eS,FI;function MNe(){if(FI)return eS;FI=1;var e=J2(),n=F3(),r=B3(),s=200;function a(o,l){var c=this.__data__;if(c instanceof e){var u=c.__data__;if(!n||u.length<s-1)return u.push([o,l]),this.size=++c.size,this;c=this.__data__=new r(u)}return c.set(o,l),this.size=c.size,this}return eS=a,eS}var tS,BI;function RY(){if(BI)return tS;BI=1;var e=J2(),n=LNe(),r=RNe(),s=DNe(),a=INe(),o=MNe();function l(c){var u=this.__data__=new e(c);this.size=u.size}return l.prototype.clear=n,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=a,l.prototype.set=o,tS=l,tS}var nS,$I;function FNe(){if($I)return nS;$I=1;var e="__lodash_hash_undefined__";function n(r){return this.__data__.set(r,e),this}return nS=n,nS}var rS,qI;function BNe(){if(qI)return rS;qI=1;function e(n){return this.__data__.has(n)}return rS=e,rS}var sS,zI;function DY(){if(zI)return sS;zI=1;var e=B3(),n=FNe(),r=BNe();function s(a){var o=-1,l=a==null?0:a.length;for(this.__data__=new e;++o<l;)this.add(a[o])}return s.prototype.add=s.prototype.push=n,s.prototype.has=r,sS=s,sS}var iS,UI;function IY(){if(UI)return iS;UI=1;function e(n,r){for(var s=-1,a=n==null?0:n.length;++s<a;)if(r(n[s],s,n))return!0;return!1}return iS=e,iS}var aS,VI;function MY(){if(VI)return aS;VI=1;function e(n,r){return n.has(r)}return aS=e,aS}var oS,HI;function FY(){if(HI)return oS;HI=1;var e=DY(),n=IY(),r=MY(),s=1,a=2;function o(l,c,u,d,f,m){var g=u&s,x=l.length,v=c.length;if(x!=v&&!(g&&v>x))return!1;var y=m.get(l),b=m.get(c);if(y&&b)return y==c&&b==l;var N=-1,j=!0,S=u&a?new e:void 0;for(m.set(l,c),m.set(c,l);++N<x;){var A=l[N],P=c[N];if(d)var L=g?d(P,A,N,c,l,m):d(A,P,N,l,c,m);if(L!==void 0){if(L)continue;j=!1;break}if(S){if(!n(c,function(O,R){if(!r(S,R)&&(A===O||f(A,O,u,d,m)))return S.push(R)})){j=!1;break}}else if(!(A===P||f(A,P,u,d,m))){j=!1;break}}return m.delete(l),m.delete(c),j}return oS=o,oS}var lS,WI;function $Ne(){if(WI)return lS;WI=1;var e=Mc(),n=e.Uint8Array;return lS=n,lS}var cS,KI;function qNe(){if(KI)return cS;KI=1;function e(n){var r=-1,s=Array(n.size);return n.forEach(function(a,o){s[++r]=[o,a]}),s}return cS=e,cS}var uS,GI;function Y3(){if(GI)return uS;GI=1;function e(n){var r=-1,s=Array(n.size);return n.forEach(function(a){s[++r]=a}),s}return uS=e,uS}var dS,YI;function zNe(){if(YI)return dS;YI=1;var e=xy(),n=$Ne(),r=M3(),s=FY(),a=qNe(),o=Y3(),l=1,c=2,u="[object Boolean]",d="[object Date]",f="[object Error]",m="[object Map]",g="[object Number]",x="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",N="[object ArrayBuffer]",j="[object DataView]",S=e?e.prototype:void 0,A=S?S.valueOf:void 0;function P(L,O,R,q,U,D,M){switch(R){case j:if(L.byteLength!=O.byteLength||L.byteOffset!=O.byteOffset)return!1;L=L.buffer,O=O.buffer;case N:return!(L.byteLength!=O.byteLength||!D(new n(L),new n(O)));case u:case d:case g:return r(+L,+O);case f:return L.name==O.name&&L.message==O.message;case x:case y:return L==O+"";case m:var G=a;case v:var Y=q&l;if(G||(G=o),L.size!=O.size&&!Y)return!1;var Z=M.get(L);if(Z)return Z==O;q|=c,M.set(L,O);var X=s(G(L),G(O),q,U,D,M);return M.delete(L),X;case b:if(A)return A.call(L)==A.call(O)}return!1}return dS=P,dS}var hS,QI;function BY(){if(QI)return hS;QI=1;function e(n,r){for(var s=-1,a=r.length,o=n.length;++s<a;)n[o+s]=r[s];return n}return hS=e,hS}var fS,XI;function UNe(){if(XI)return fS;XI=1;var e=BY(),n=$a();function r(s,a,o){var l=a(s);return n(s)?l:e(l,o(s))}return fS=r,fS}var mS,JI;function VNe(){if(JI)return mS;JI=1;function e(n,r){for(var s=-1,a=n==null?0:n.length,o=0,l=[];++s<a;){var c=n[s];r(c,s,n)&&(l[o++]=c)}return l}return mS=e,mS}var pS,ZI;function HNe(){if(ZI)return pS;ZI=1;function e(){return[]}return pS=e,pS}var gS,eM;function WNe(){if(eM)return gS;eM=1;var e=VNe(),n=HNe(),r=Object.prototype,s=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,o=a?function(l){return l==null?[]:(l=Object(l),e(a(l),function(c){return s.call(l,c)}))}:n;return gS=o,gS}var xS,tM;function KNe(){if(tM)return xS;tM=1;function e(n,r){for(var s=-1,a=Array(n);++s<n;)a[s]=r(s);return a}return xS=e,xS}var vS,nM;function GNe(){if(nM)return vS;nM=1;var e=Gu(),n=Yu(),r="[object Arguments]";function s(a){return n(a)&&e(a)==r}return vS=s,vS}var yS,rM;function Q3(){if(rM)return yS;rM=1;var e=GNe(),n=Yu(),r=Object.prototype,s=r.hasOwnProperty,a=r.propertyIsEnumerable,o=e((function(){return arguments})())?e:function(l){return n(l)&&s.call(l,"callee")&&!a.call(l,"callee")};return yS=o,yS}var vx={exports:{}},bS,sM;function YNe(){if(sM)return bS;sM=1;function e(){return!1}return bS=e,bS}vx.exports;var iM;function $Y(){return iM||(iM=1,(function(e,n){var r=Mc(),s=YNe(),a=n&&!n.nodeType&&n,o=a&&!0&&e&&!e.nodeType&&e,l=o&&o.exports===a,c=l?r.Buffer:void 0,u=c?c.isBuffer:void 0,d=u||s;e.exports=d})(vx,vx.exports)),vx.exports}var wS,aM;function X3(){if(aM)return wS;aM=1;var e=9007199254740991,n=/^(?:0|[1-9]\d*)$/;function r(s,a){var o=typeof s;return a=a??e,!!a&&(o=="number"||o!="symbol"&&n.test(s))&&s>-1&&s%1==0&&s<a}return wS=r,wS}var jS,oM;function J3(){if(oM)return jS;oM=1;var e=9007199254740991;function n(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return jS=n,jS}var NS,lM;function QNe(){if(lM)return NS;lM=1;var e=Gu(),n=J3(),r=Yu(),s="[object Arguments]",a="[object Array]",o="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",d="[object Map]",f="[object Number]",m="[object Object]",g="[object RegExp]",x="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",N="[object DataView]",j="[object Float32Array]",S="[object Float64Array]",A="[object Int8Array]",P="[object Int16Array]",L="[object Int32Array]",O="[object Uint8Array]",R="[object Uint8ClampedArray]",q="[object Uint16Array]",U="[object Uint32Array]",D={};D[j]=D[S]=D[A]=D[P]=D[L]=D[O]=D[R]=D[q]=D[U]=!0,D[s]=D[a]=D[b]=D[o]=D[N]=D[l]=D[c]=D[u]=D[d]=D[f]=D[m]=D[g]=D[x]=D[v]=D[y]=!1;function M(G){return r(G)&&n(G.length)&&!!D[e(G)]}return NS=M,NS}var _S,cM;function qY(){if(cM)return _S;cM=1;function e(n){return function(r){return n(r)}}return _S=e,_S}var yx={exports:{}};yx.exports;var uM;function XNe(){return uM||(uM=1,(function(e,n){var r=oY(),s=n&&!n.nodeType&&n,a=s&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===s,l=o&&r.process,c=(function(){try{var u=a&&a.require&&a.require("util").types;return u||l&&l.binding&&l.binding("util")}catch{}})();e.exports=c})(yx,yx.exports)),yx.exports}var SS,dM;function zY(){if(dM)return SS;dM=1;var e=QNe(),n=qY(),r=XNe(),s=r&&r.isTypedArray,a=s?n(s):e;return SS=a,SS}var CS,hM;function JNe(){if(hM)return CS;hM=1;var e=KNe(),n=Q3(),r=$a(),s=$Y(),a=X3(),o=zY(),l=Object.prototype,c=l.hasOwnProperty;function u(d,f){var m=r(d),g=!m&&n(d),x=!m&&!g&&s(d),v=!m&&!g&&!x&&o(d),y=m||g||x||v,b=y?e(d.length,String):[],N=b.length;for(var j in d)(f||c.call(d,j))&&!(y&&(j=="length"||x&&(j=="offset"||j=="parent")||v&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||a(j,N)))&&b.push(j);return b}return CS=u,CS}var PS,fM;function ZNe(){if(fM)return PS;fM=1;var e=Object.prototype;function n(r){var s=r&&r.constructor,a=typeof s=="function"&&s.prototype||e;return r===a}return PS=n,PS}var AS,mM;function UY(){if(mM)return AS;mM=1;function e(n,r){return function(s){return n(r(s))}}return AS=e,AS}var kS,pM;function e5e(){if(pM)return kS;pM=1;var e=UY(),n=e(Object.keys,Object);return kS=n,kS}var ES,gM;function t5e(){if(gM)return ES;gM=1;var e=ZNe(),n=e5e(),r=Object.prototype,s=r.hasOwnProperty;function a(o){if(!e(o))return n(o);var l=[];for(var c in Object(o))s.call(o,c)&&c!="constructor"&&l.push(c);return l}return ES=a,ES}var TS,xM;function yy(){if(xM)return TS;xM=1;var e=I3(),n=J3();function r(s){return s!=null&&n(s.length)&&!e(s)}return TS=r,TS}var OS,vM;function aj(){if(vM)return OS;vM=1;var e=JNe(),n=t5e(),r=yy();function s(a){return r(a)?e(a):n(a)}return OS=s,OS}var LS,yM;function n5e(){if(yM)return LS;yM=1;var e=UNe(),n=WNe(),r=aj();function s(a){return e(a,r,n)}return LS=s,LS}var RS,bM;function r5e(){if(bM)return RS;bM=1;var e=n5e(),n=1,r=Object.prototype,s=r.hasOwnProperty;function a(o,l,c,u,d,f){var m=c&n,g=e(o),x=g.length,v=e(l),y=v.length;if(x!=y&&!m)return!1;for(var b=x;b--;){var N=g[b];if(!(m?N in l:s.call(l,N)))return!1}var j=f.get(o),S=f.get(l);if(j&&S)return j==l&&S==o;var A=!0;f.set(o,l),f.set(l,o);for(var P=m;++b<x;){N=g[b];var L=o[N],O=l[N];if(u)var R=m?u(O,L,N,l,o,f):u(L,O,N,o,l,f);if(!(R===void 0?L===O||d(L,O,c,u,f):R)){A=!1;break}P||(P=N=="constructor")}if(A&&!P){var q=o.constructor,U=l.constructor;q!=U&&"constructor"in o&&"constructor"in l&&!(typeof q=="function"&&q instanceof q&&typeof U=="function"&&U instanceof U)&&(A=!1)}return f.delete(o),f.delete(l),A}return RS=a,RS}var DS,wM;function s5e(){if(wM)return DS;wM=1;var e=Mm(),n=Mc(),r=e(n,"DataView");return DS=r,DS}var IS,jM;function i5e(){if(jM)return IS;jM=1;var e=Mm(),n=Mc(),r=e(n,"Promise");return IS=r,IS}var MS,NM;function VY(){if(NM)return MS;NM=1;var e=Mm(),n=Mc(),r=e(n,"Set");return MS=r,MS}var FS,_M;function a5e(){if(_M)return FS;_M=1;var e=Mm(),n=Mc(),r=e(n,"WeakMap");return FS=r,FS}var BS,SM;function o5e(){if(SM)return BS;SM=1;var e=s5e(),n=F3(),r=i5e(),s=VY(),a=a5e(),o=Gu(),l=lY(),c="[object Map]",u="[object Object]",d="[object Promise]",f="[object Set]",m="[object WeakMap]",g="[object DataView]",x=l(e),v=l(n),y=l(r),b=l(s),N=l(a),j=o;return(e&&j(new e(new ArrayBuffer(1)))!=g||n&&j(new n)!=c||r&&j(r.resolve())!=d||s&&j(new s)!=f||a&&j(new a)!=m)&&(j=function(S){var A=o(S),P=A==u?S.constructor:void 0,L=P?l(P):"";if(L)switch(L){case x:return g;case v:return c;case y:return d;case b:return f;case N:return m}return A}),BS=j,BS}var $S,CM;function l5e(){if(CM)return $S;CM=1;var e=RY(),n=FY(),r=zNe(),s=r5e(),a=o5e(),o=$a(),l=$Y(),c=zY(),u=1,d="[object Arguments]",f="[object Array]",m="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function v(y,b,N,j,S,A){var P=o(y),L=o(b),O=P?f:a(y),R=L?f:a(b);O=O==d?m:O,R=R==d?m:R;var q=O==m,U=R==m,D=O==R;if(D&&l(y)){if(!l(b))return!1;P=!0,q=!1}if(D&&!q)return A||(A=new e),P||c(y)?n(y,b,N,j,S,A):r(y,b,O,N,j,S,A);if(!(N&u)){var M=q&&x.call(y,"__wrapped__"),G=U&&x.call(b,"__wrapped__");if(M||G){var Y=M?y.value():y,Z=G?b.value():b;return A||(A=new e),S(Y,Z,N,j,A)}}return D?(A||(A=new e),s(y,b,N,j,S,A)):!1}return $S=v,$S}var qS,PM;function Z3(){if(PM)return qS;PM=1;var e=l5e(),n=Yu();function r(s,a,o,l,c){return s===a?!0:s==null||a==null||!n(s)&&!n(a)?s!==s&&a!==a:e(s,a,o,l,r,c)}return qS=r,qS}var zS,AM;function c5e(){if(AM)return zS;AM=1;var e=RY(),n=Z3(),r=1,s=2;function a(o,l,c,u){var d=c.length,f=d,m=!u;if(o==null)return!f;for(o=Object(o);d--;){var g=c[d];if(m&&g[2]?g[1]!==o[g[0]]:!(g[0]in o))return!1}for(;++d<f;){g=c[d];var x=g[0],v=o[x],y=g[1];if(m&&g[2]){if(v===void 0&&!(x in o))return!1}else{var b=new e;if(u)var N=u(v,y,x,o,l,b);if(!(N===void 0?n(y,v,r|s,u,b):N))return!1}}return!0}return zS=a,zS}var US,kM;function HY(){if(kM)return US;kM=1;var e=Wh();function n(r){return r===r&&!e(r)}return US=n,US}var VS,EM;function u5e(){if(EM)return VS;EM=1;var e=HY(),n=aj();function r(s){for(var a=n(s),o=a.length;o--;){var l=a[o],c=s[l];a[o]=[l,c,e(c)]}return a}return VS=r,VS}var HS,TM;function WY(){if(TM)return HS;TM=1;function e(n,r){return function(s){return s==null?!1:s[n]===r&&(r!==void 0||n in Object(s))}}return HS=e,HS}var WS,OM;function d5e(){if(OM)return WS;OM=1;var e=c5e(),n=u5e(),r=WY();function s(a){var o=n(a);return o.length==1&&o[0][2]?r(o[0][0],o[0][1]):function(l){return l===a||e(l,a,o)}}return WS=s,WS}var KS,LM;function h5e(){if(LM)return KS;LM=1;function e(n,r){return n!=null&&r in Object(n)}return KS=e,KS}var GS,RM;function f5e(){if(RM)return GS;RM=1;var e=dY(),n=Q3(),r=$a(),s=X3(),a=J3(),o=ej();function l(c,u,d){u=e(u,c);for(var f=-1,m=u.length,g=!1;++f<m;){var x=o(u[f]);if(!(g=c!=null&&d(c,x)))break;c=c[x]}return g||++f!=m?g:(m=c==null?0:c.length,!!m&&a(m)&&s(x,m)&&(r(c)||n(c)))}return GS=l,GS}var YS,DM;function m5e(){if(DM)return YS;DM=1;var e=h5e(),n=f5e();function r(s,a){return s!=null&&n(s,a,e)}return YS=r,YS}var QS,IM;function p5e(){if(IM)return QS;IM=1;var e=Z3(),n=hY(),r=m5e(),s=D3(),a=HY(),o=WY(),l=ej(),c=1,u=2;function d(f,m){return s(f)&&a(m)?o(l(f),m):function(g){var x=n(g,f);return x===void 0&&x===m?r(g,f):e(m,x,c|u)}}return QS=d,QS}var XS,MM;function f0(){if(MM)return XS;MM=1;function e(n){return n}return XS=e,XS}var JS,FM;function g5e(){if(FM)return JS;FM=1;function e(n){return function(r){return r==null?void 0:r[n]}}return JS=e,JS}var ZS,BM;function x5e(){if(BM)return ZS;BM=1;var e=q3();function n(r){return function(s){return e(s,r)}}return ZS=n,ZS}var eC,$M;function v5e(){if($M)return eC;$M=1;var e=g5e(),n=x5e(),r=D3(),s=ej();function a(o){return r(o)?e(s(o)):n(o)}return eC=a,eC}var tC,qM;function Kh(){if(qM)return tC;qM=1;var e=d5e(),n=p5e(),r=f0(),s=$a(),a=v5e();function o(l){return typeof l=="function"?l:l==null?r:typeof l=="object"?s(l)?n(l[0],l[1]):e(l):a(l)}return tC=o,tC}var nC,zM;function KY(){if(zM)return nC;zM=1;function e(n,r,s,a){for(var o=n.length,l=s+(a?1:-1);a?l--:++l<o;)if(r(n[l],l,n))return l;return-1}return nC=e,nC}var rC,UM;function y5e(){if(UM)return rC;UM=1;function e(n){return n!==n}return rC=e,rC}var sC,VM;function b5e(){if(VM)return sC;VM=1;function e(n,r,s){for(var a=s-1,o=n.length;++a<o;)if(n[a]===r)return a;return-1}return sC=e,sC}var iC,HM;function w5e(){if(HM)return iC;HM=1;var e=KY(),n=y5e(),r=b5e();function s(a,o,l){return o===o?r(a,o,l):e(a,n,l)}return iC=s,iC}var aC,WM;function j5e(){if(WM)return aC;WM=1;var e=w5e();function n(r,s){var a=r==null?0:r.length;return!!a&&e(r,s,0)>-1}return aC=n,aC}var oC,KM;function N5e(){if(KM)return oC;KM=1;function e(n,r,s){for(var a=-1,o=n==null?0:n.length;++a<o;)if(s(r,n[a]))return!0;return!1}return oC=e,oC}var lC,GM;function _5e(){if(GM)return lC;GM=1;function e(){}return lC=e,lC}var cC,YM;function S5e(){if(YM)return cC;YM=1;var e=VY(),n=_5e(),r=Y3(),s=1/0,a=e&&1/r(new e([,-0]))[1]==s?function(o){return new e(o)}:n;return cC=a,cC}var uC,QM;function C5e(){if(QM)return uC;QM=1;var e=DY(),n=j5e(),r=N5e(),s=MY(),a=S5e(),o=Y3(),l=200;function c(u,d,f){var m=-1,g=n,x=u.length,v=!0,y=[],b=y;if(f)v=!1,g=r;else if(x>=l){var N=d?null:a(u);if(N)return o(N);v=!1,g=s,b=new e}else b=d?[]:y;e:for(;++m<x;){var j=u[m],S=d?d(j):j;if(j=f||j!==0?j:0,v&&S===S){for(var A=b.length;A--;)if(b[A]===S)continue e;d&&b.push(S),y.push(j)}else g(b,S,f)||(b!==y&&b.push(S),y.push(j))}return y}return uC=c,uC}var dC,XM;function P5e(){if(XM)return dC;XM=1;var e=Kh(),n=C5e();function r(s,a){return s&&s.length?n(s,e(a,2)):[]}return dC=r,dC}var A5e=P5e();const JM=ur(A5e);function GY(e,n,r){return n===!0?JM(e,r):Nn(n)?JM(e,n):e}function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},kg(e)}var k5e=["ref"];function ZM(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function yu(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ZM(Object(r),!0).forEach(function(s){oj(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZM(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function E5e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function eF(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,QY(s.key),s)}}function T5e(e,n,r){return n&&eF(e.prototype,n),r&&eF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function O5e(e,n,r){return n=ow(n),L5e(e,YY()?Reflect.construct(n,r||[],ow(e).constructor):n.apply(e,r))}function L5e(e,n){if(n&&(kg(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R5e(e)}function R5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YY=function(){return!!e})()}function ow(e){return ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ow(e)}function D5e(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&Ck(e,n)}function Ck(e,n){return Ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Ck(e,n)}function oj(e,n,r){return n=QY(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function QY(e){var n=I5e(e,"string");return kg(n)=="symbol"?n:n+""}function I5e(e,n){if(kg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(kg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function M5e(e,n){if(e==null)return{};var r=F5e(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function F5e(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}function B5e(e){return e.value}function $5e(e,n){if(ve.isValidElement(e))return ve.cloneElement(e,n);if(typeof e=="function")return ve.createElement(e,n);n.ref;var r=M5e(n,k5e);return ve.createElement(G3,r)}var tF=1,om=(function(e){function n(){var r;E5e(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=O5e(this,n,[].concat(a)),oj(r,"lastBoundingBox",{width:-1,height:-1}),r}return D5e(n,e),T5e(n,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>tF||Math.abs(a.height-this.lastBoundingBox.height)>tF)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?yu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,o=a.layout,l=a.align,c=a.verticalAlign,u=a.margin,d=a.chartWidth,f=a.chartHeight,m,g;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(l==="center"&&o==="vertical"){var x=this.getBBoxSnapshot();m={left:((d||0)-x.width)/2}}else m=l==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(c==="middle"){var v=this.getBBoxSnapshot();g={top:((f||0)-v.height)/2}}else g=c==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return yu(yu({},m),g)}},{key:"render",value:function(){var s=this,a=this.props,o=a.content,l=a.width,c=a.height,u=a.wrapperStyle,d=a.payloadUniqBy,f=a.payload,m=yu(yu({position:"absolute",width:l||"auto",height:c||"auto"},this.getDefaultPosition(u)),u);return ve.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(x){s.wrapperNode=x}},$5e(o,yu(yu({},this.props),{},{payload:GY(f,d,B5e)})))}}],[{key:"getWithHeight",value:function(s,a){var o=yu(yu({},this.defaultProps),s.props),l=o.layout;return l==="vertical"&&bt(s.props.height)?{height:s.props.height}:l==="horizontal"?{width:s.props.width||a}:null}}])})(C.PureComponent);oj(om,"displayName","Legend");oj(om,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var hC,nF;function q5e(){if(nF)return hC;nF=1;var e=xy(),n=Q3(),r=$a(),s=e?e.isConcatSpreadable:void 0;function a(o){return r(o)||n(o)||!!(s&&o&&o[s])}return hC=a,hC}var fC,rF;function XY(){if(rF)return fC;rF=1;var e=BY(),n=q5e();function r(s,a,o,l,c){var u=-1,d=s.length;for(o||(o=n),c||(c=[]);++u<d;){var f=s[u];a>0&&o(f)?a>1?r(f,a-1,o,l,c):e(c,f):l||(c[c.length]=f)}return c}return fC=r,fC}var mC,sF;function z5e(){if(sF)return mC;sF=1;function e(n){return function(r,s,a){for(var o=-1,l=Object(r),c=a(r),u=c.length;u--;){var d=c[n?u:++o];if(s(l[d],d,l)===!1)break}return r}}return mC=e,mC}var pC,iF;function U5e(){if(iF)return pC;iF=1;var e=z5e(),n=e();return pC=n,pC}var gC,aF;function JY(){if(aF)return gC;aF=1;var e=U5e(),n=aj();function r(s,a){return s&&e(s,a,n)}return gC=r,gC}var xC,oF;function V5e(){if(oF)return xC;oF=1;var e=yy();function n(r,s){return function(a,o){if(a==null)return a;if(!e(a))return r(a,o);for(var l=a.length,c=s?l:-1,u=Object(a);(s?c--:++c<l)&&o(u[c],c,u)!==!1;);return a}}return xC=n,xC}var vC,lF;function eT(){if(lF)return vC;lF=1;var e=JY(),n=V5e(),r=n(e);return vC=r,vC}var yC,cF;function ZY(){if(cF)return yC;cF=1;var e=eT(),n=yy();function r(s,a){var o=-1,l=n(s)?Array(s.length):[];return e(s,function(c,u,d){l[++o]=a(c,u,d)}),l}return yC=r,yC}var bC,uF;function H5e(){if(uF)return bC;uF=1;function e(n,r){var s=n.length;for(n.sort(r);s--;)n[s]=n[s].value;return n}return bC=e,bC}var wC,dF;function W5e(){if(dF)return wC;dF=1;var e=d0();function n(r,s){if(r!==s){var a=r!==void 0,o=r===null,l=r===r,c=e(r),u=s!==void 0,d=s===null,f=s===s,m=e(s);if(!d&&!m&&!c&&r>s||c&&u&&f&&!d&&!m||o&&u&&f||!a&&f||!l)return 1;if(!o&&!c&&!m&&r<s||m&&a&&l&&!o&&!c||d&&a&&l||!u&&l||!f)return-1}return 0}return wC=n,wC}var jC,hF;function K5e(){if(hF)return jC;hF=1;var e=W5e();function n(r,s,a){for(var o=-1,l=r.criteria,c=s.criteria,u=l.length,d=a.length;++o<u;){var f=e(l[o],c[o]);if(f){if(o>=d)return f;var m=a[o];return f*(m=="desc"?-1:1)}}return r.index-s.index}return jC=n,jC}var NC,fF;function G5e(){if(fF)return NC;fF=1;var e=$3(),n=q3(),r=Kh(),s=ZY(),a=H5e(),o=qY(),l=K5e(),c=f0(),u=$a();function d(f,m,g){m.length?m=e(m,function(y){return u(y)?function(b){return n(b,y.length===1?y[0]:y)}:y}):m=[c];var x=-1;m=e(m,o(r));var v=s(f,function(y,b,N){var j=e(m,function(S){return S(y)});return{criteria:j,index:++x,value:y}});return a(v,function(y,b){return l(y,b,g)})}return NC=d,NC}var _C,mF;function Y5e(){if(mF)return _C;mF=1;function e(n,r,s){switch(s.length){case 0:return n.call(r);case 1:return n.call(r,s[0]);case 2:return n.call(r,s[0],s[1]);case 3:return n.call(r,s[0],s[1],s[2])}return n.apply(r,s)}return _C=e,_C}var SC,pF;function Q5e(){if(pF)return SC;pF=1;var e=Y5e(),n=Math.max;function r(s,a,o){return a=n(a===void 0?s.length-1:a,0),function(){for(var l=arguments,c=-1,u=n(l.length-a,0),d=Array(u);++c<u;)d[c]=l[a+c];c=-1;for(var f=Array(a+1);++c<a;)f[c]=l[c];return f[a]=o(d),e(s,this,f)}}return SC=r,SC}var CC,gF;function X5e(){if(gF)return CC;gF=1;function e(n){return function(){return n}}return CC=e,CC}var PC,xF;function eQ(){if(xF)return PC;xF=1;var e=Mm(),n=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return PC=n,PC}var AC,vF;function J5e(){if(vF)return AC;vF=1;var e=X5e(),n=eQ(),r=f0(),s=n?function(a,o){return n(a,"toString",{configurable:!0,enumerable:!1,value:e(o),writable:!0})}:r;return AC=s,AC}var kC,yF;function Z5e(){if(yF)return kC;yF=1;var e=800,n=16,r=Date.now;function s(a){var o=0,l=0;return function(){var c=r(),u=n-(c-l);if(l=c,u>0){if(++o>=e)return arguments[0]}else o=0;return a.apply(void 0,arguments)}}return kC=s,kC}var EC,bF;function e_e(){if(bF)return EC;bF=1;var e=J5e(),n=Z5e(),r=n(e);return EC=r,EC}var TC,wF;function t_e(){if(wF)return TC;wF=1;var e=f0(),n=Q5e(),r=e_e();function s(a,o){return r(n(a,o,e),a+"")}return TC=s,TC}var OC,jF;function lj(){if(jF)return OC;jF=1;var e=M3(),n=yy(),r=X3(),s=Wh();function a(o,l,c){if(!s(c))return!1;var u=typeof l;return(u=="number"?n(c)&&r(l,c.length):u=="string"&&l in c)?e(c[l],o):!1}return OC=a,OC}var LC,NF;function n_e(){if(NF)return LC;NF=1;var e=XY(),n=G5e(),r=t_e(),s=lj(),a=r(function(o,l){if(o==null)return[];var c=l.length;return c>1&&s(o,l[0],l[1])?l=[]:c>2&&s(l[0],l[1],l[2])&&(l=[l[0]]),n(o,e(l,1),[])});return LC=a,LC}var r_e=n_e();const tT=ur(r_e);function dv(e){"@babel/helpers - typeof";return dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},dv(e)}function Pk(){return Pk=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Pk.apply(this,arguments)}function s_e(e,n){return l_e(e)||o_e(e,n)||a_e(e,n)||i_e()}function i_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a_e(e,n){if(e){if(typeof e=="string")return _F(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _F(e,n)}}function _F(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function o_e(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,o,l,c=[],u=!0,d=!1;try{if(o=(r=r.call(e)).next,n!==0)for(;!(u=(s=o.call(r)).done)&&(c.push(s.value),c.length!==n);u=!0);}catch(f){d=!0,a=f}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}function l_e(e){if(Array.isArray(e))return e}function SF(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function RC(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?SF(Object(r),!0).forEach(function(s){c_e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function c_e(e,n,r){return n=u_e(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function u_e(e){var n=d_e(e,"string");return dv(n)=="symbol"?n:n+""}function d_e(e,n){if(dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(dv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function h_e(e){return Array.isArray(e)&&Bs(e[0])&&Bs(e[1])?e.join(" ~ "):e}var f_e=function(n){var r=n.separator,s=r===void 0?" : ":r,a=n.contentStyle,o=a===void 0?{}:a,l=n.itemStyle,c=l===void 0?{}:l,u=n.labelStyle,d=u===void 0?{}:u,f=n.payload,m=n.formatter,g=n.itemSorter,x=n.wrapperClassName,v=n.labelClassName,y=n.label,b=n.labelFormatter,N=n.accessibilityLayer,j=N===void 0?!1:N,S=function(){if(f&&f.length){var M={padding:0,margin:0},G=(g?tT(f,g):f).map(function(Y,Z){if(Y.type==="none")return null;var X=RC({display:"block",paddingTop:4,paddingBottom:4,color:Y.color||"#000"},c),re=Y.formatter||m||h_e,z=Y.value,te=Y.name,le=z,Q=te;if(re&&le!=null&&Q!=null){var T=re(z,te,Y,Z,f);if(Array.isArray(T)){var B=s_e(T,2);le=B[0],Q=B[1]}else le=T}return ve.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Z),style:X},Bs(Q)?ve.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,Bs(Q)?ve.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,ve.createElement("span",{className:"recharts-tooltip-item-value"},le),ve.createElement("span",{className:"recharts-tooltip-item-unit"},Y.unit||""))});return ve.createElement("ul",{className:"recharts-tooltip-item-list",style:M},G)}return null},A=RC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),P=RC({margin:0},d),L=!er(y),O=L?y:"",R=zn("recharts-default-tooltip",x),q=zn("recharts-tooltip-label",v);L&&b&&f!==void 0&&f!==null&&(O=b(y,f));var U=j?{role:"status","aria-live":"assertive"}:{};return ve.createElement("div",Pk({className:R,style:A},U),ve.createElement("p",{className:q,style:P},ve.isValidElement(O)?O:"".concat(O)),S())};function hv(e){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hv(e)}function Ob(e,n,r){return n=m_e(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function m_e(e){var n=p_e(e,"string");return hv(n)=="symbol"?n:n+""}function p_e(e,n){if(hv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(hv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var J0="recharts-tooltip-wrapper",g_e={visibility:"hidden"};function x_e(e){var n=e.coordinate,r=e.translateX,s=e.translateY;return zn(J0,Ob(Ob(Ob(Ob({},"".concat(J0,"-right"),bt(r)&&n&&bt(n.x)&&r>=n.x),"".concat(J0,"-left"),bt(r)&&n&&bt(n.x)&&r<n.x),"".concat(J0,"-bottom"),bt(s)&&n&&bt(n.y)&&s>=n.y),"".concat(J0,"-top"),bt(s)&&n&&bt(n.y)&&s<n.y))}function CF(e){var n=e.allowEscapeViewBox,r=e.coordinate,s=e.key,a=e.offsetTopLeft,o=e.position,l=e.reverseDirection,c=e.tooltipDimension,u=e.viewBox,d=e.viewBoxDimension;if(o&&bt(o[s]))return o[s];var f=r[s]-c-a,m=r[s]+a;if(n[s])return l[s]?f:m;if(l[s]){var g=f,x=u[s];return g<x?Math.max(m,u[s]):Math.max(f,u[s])}var v=m+c,y=u[s]+d;return v>y?Math.max(f,u[s]):Math.max(m,u[s])}function v_e(e){var n=e.translateX,r=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(n,"px, ").concat(r,"px, 0)"):"translate(".concat(n,"px, ").concat(r,"px)")}}function y_e(e){var n=e.allowEscapeViewBox,r=e.coordinate,s=e.offsetTopLeft,a=e.position,o=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,u=e.viewBox,d,f,m;return l.height>0&&l.width>0&&r?(f=CF({allowEscapeViewBox:n,coordinate:r,key:"x",offsetTopLeft:s,position:a,reverseDirection:o,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),m=CF({allowEscapeViewBox:n,coordinate:r,key:"y",offsetTopLeft:s,position:a,reverseDirection:o,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),d=v_e({translateX:f,translateY:m,useTranslate3d:c})):d=g_e,{cssProperties:d,cssClasses:x_e({translateX:f,translateY:m,coordinate:r})}}function Eg(e){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Eg(e)}function PF(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function AF(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?PF(Object(r),!0).forEach(function(s){kk(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function b_e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function w_e(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,nQ(s.key),s)}}function j_e(e,n,r){return n&&w_e(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function N_e(e,n,r){return n=lw(n),__e(e,tQ()?Reflect.construct(n,r||[],lw(e).constructor):n.apply(e,r))}function __e(e,n){if(n&&(Eg(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S_e(e)}function S_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tQ=function(){return!!e})()}function lw(e){return lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lw(e)}function C_e(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&Ak(e,n)}function Ak(e,n){return Ak=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Ak(e,n)}function kk(e,n,r){return n=nQ(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function nQ(e){var n=P_e(e,"string");return Eg(n)=="symbol"?n:n+""}function P_e(e,n){if(Eg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Eg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kF=1,A_e=(function(e){function n(){var r;b_e(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=N_e(this,n,[].concat(a)),kk(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),kk(r,"handleKeyDown",function(l){if(l.key==="Escape"){var c,u,d,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(u=r.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&c!==void 0?c:0,y:(d=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),r}return C_e(n,e),j_e(n,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>kF||Math.abs(s.height-this.state.lastBoundingBox.height)>kF)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,o=a.active,l=a.allowEscapeViewBox,c=a.animationDuration,u=a.animationEasing,d=a.children,f=a.coordinate,m=a.hasPayload,g=a.isAnimationActive,x=a.offset,v=a.position,y=a.reverseDirection,b=a.useTranslate3d,N=a.viewBox,j=a.wrapperStyle,S=y_e({allowEscapeViewBox:l,coordinate:f,offsetTopLeft:x,position:v,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:N}),A=S.cssClasses,P=S.cssProperties,L=AF(AF({transition:g&&o?"transform ".concat(c,"ms ").concat(u):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&m?"visible":"hidden",position:"absolute",top:0,left:0},j);return ve.createElement("div",{tabIndex:-1,className:A,style:L,ref:function(R){s.wrapperNode=R}},d)}}])})(C.PureComponent),k_e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},by={isSsr:k_e()};function Tg(e){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tg(e)}function EF(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function TF(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?EF(Object(r),!0).forEach(function(s){nT(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function E_e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function T_e(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,sQ(s.key),s)}}function O_e(e,n,r){return n&&T_e(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function L_e(e,n,r){return n=cw(n),R_e(e,rQ()?Reflect.construct(n,r||[],cw(e).constructor):n.apply(e,r))}function R_e(e,n){if(n&&(Tg(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D_e(e)}function D_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rQ=function(){return!!e})()}function cw(e){return cw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cw(e)}function I_e(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&Ek(e,n)}function Ek(e,n){return Ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Ek(e,n)}function nT(e,n,r){return n=sQ(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function sQ(e){var n=M_e(e,"string");return Tg(n)=="symbol"?n:n+""}function M_e(e,n){if(Tg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Tg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function F_e(e){return e.dataKey}function B_e(e,n){return ve.isValidElement(e)?ve.cloneElement(e,n):typeof e=="function"?ve.createElement(e,n):ve.createElement(f_e,n)}var cc=(function(e){function n(){return E_e(this,n),L_e(this,n,arguments)}return I_e(n,e),O_e(n,[{key:"render",value:function(){var s=this,a=this.props,o=a.active,l=a.allowEscapeViewBox,c=a.animationDuration,u=a.animationEasing,d=a.content,f=a.coordinate,m=a.filterNull,g=a.isAnimationActive,x=a.offset,v=a.payload,y=a.payloadUniqBy,b=a.position,N=a.reverseDirection,j=a.useTranslate3d,S=a.viewBox,A=a.wrapperStyle,P=v??[];m&&P.length&&(P=GY(v.filter(function(O){return O.value!=null&&(O.hide!==!0||s.props.includeHidden)}),y,F_e));var L=P.length>0;return ve.createElement(A_e,{allowEscapeViewBox:l,animationDuration:c,animationEasing:u,isAnimationActive:g,active:o,coordinate:f,hasPayload:L,offset:x,position:b,reverseDirection:N,useTranslate3d:j,viewBox:S,wrapperStyle:A},B_e(d,TF(TF({},this.props),{},{payload:P})))}}])})(C.PureComponent);nT(cc,"displayName","Tooltip");nT(cc,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!by.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var DC,OF;function $_e(){if(OF)return DC;OF=1;var e=Mc(),n=function(){return e.Date.now()};return DC=n,DC}var IC,LF;function q_e(){if(LF)return IC;LF=1;var e=/\s/;function n(r){for(var s=r.length;s--&&e.test(r.charAt(s)););return s}return IC=n,IC}var MC,RF;function z_e(){if(RF)return MC;RF=1;var e=q_e(),n=/^\s+/;function r(s){return s&&s.slice(0,e(s)+1).replace(n,"")}return MC=r,MC}var FC,DF;function iQ(){if(DF)return FC;DF=1;var e=z_e(),n=Wh(),r=d0(),s=NaN,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;function u(d){if(typeof d=="number")return d;if(r(d))return s;if(n(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=n(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=e(d);var m=o.test(d);return m||l.test(d)?c(d.slice(2),m?2:8):a.test(d)?s:+d}return FC=u,FC}var BC,IF;function U_e(){if(IF)return BC;IF=1;var e=Wh(),n=$_e(),r=iQ(),s="Expected a function",a=Math.max,o=Math.min;function l(c,u,d){var f,m,g,x,v,y,b=0,N=!1,j=!1,S=!0;if(typeof c!="function")throw new TypeError(s);u=r(u)||0,e(d)&&(N=!!d.leading,j="maxWait"in d,g=j?a(r(d.maxWait)||0,u):g,S="trailing"in d?!!d.trailing:S);function A(G){var Y=f,Z=m;return f=m=void 0,b=G,x=c.apply(Z,Y),x}function P(G){return b=G,v=setTimeout(R,u),N?A(G):x}function L(G){var Y=G-y,Z=G-b,X=u-Y;return j?o(X,g-Z):X}function O(G){var Y=G-y,Z=G-b;return y===void 0||Y>=u||Y<0||j&&Z>=g}function R(){var G=n();if(O(G))return q(G);v=setTimeout(R,L(G))}function q(G){return v=void 0,S&&f?A(G):(f=m=void 0,x)}function U(){v!==void 0&&clearTimeout(v),b=0,f=y=m=v=void 0}function D(){return v===void 0?x:q(n())}function M(){var G=n(),Y=O(G);if(f=arguments,m=this,y=G,Y){if(v===void 0)return P(y);if(j)return clearTimeout(v),v=setTimeout(R,u),A(y)}return v===void 0&&(v=setTimeout(R,u)),x}return M.cancel=U,M.flush=D,M}return BC=l,BC}var $C,MF;function V_e(){if(MF)return $C;MF=1;var e=U_e(),n=Wh(),r="Expected a function";function s(a,o,l){var c=!0,u=!0;if(typeof a!="function")throw new TypeError(r);return n(l)&&(c="leading"in l?!!l.leading:c,u="trailing"in l?!!l.trailing:u),e(a,o,{leading:c,maxWait:o,trailing:u})}return $C=s,$C}var H_e=V_e();const aQ=ur(H_e);function fv(e){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fv(e)}function FF(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Lb(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?FF(Object(r),!0).forEach(function(s){W_e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function W_e(e,n,r){return n=K_e(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function K_e(e){var n=G_e(e,"string");return fv(n)=="symbol"?n:n+""}function G_e(e,n){if(fv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(fv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Y_e(e,n){return Z_e(e)||J_e(e,n)||X_e(e,n)||Q_e()}function Q_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X_e(e,n){if(e){if(typeof e=="string")return BF(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BF(e,n)}}function BF(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function J_e(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,o,l,c=[],u=!0,d=!1;try{if(o=(r=r.call(e)).next,n!==0)for(;!(u=(s=o.call(r)).done)&&(c.push(s.value),c.length!==n);u=!0);}catch(f){d=!0,a=f}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}function Z_e(e){if(Array.isArray(e))return e}var eSe=C.forwardRef(function(e,n){var r=e.aspect,s=e.initialDimension,a=s===void 0?{width:-1,height:-1}:s,o=e.width,l=o===void 0?"100%":o,c=e.height,u=c===void 0?"100%":c,d=e.minWidth,f=d===void 0?0:d,m=e.minHeight,g=e.maxHeight,x=e.children,v=e.debounce,y=v===void 0?0:v,b=e.id,N=e.className,j=e.onResize,S=e.style,A=S===void 0?{}:S,P=C.useRef(null),L=C.useRef();L.current=j,C.useImperativeHandle(n,function(){return Object.defineProperty(P.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),P.current},configurable:!0})});var O=C.useState({containerWidth:a.width,containerHeight:a.height}),R=Y_e(O,2),q=R[0],U=R[1],D=C.useCallback(function(G,Y){U(function(Z){var X=Math.round(G),re=Math.round(Y);return Z.containerWidth===X&&Z.containerHeight===re?Z:{containerWidth:X,containerHeight:re}})},[]);C.useEffect(function(){var G=function(te){var le,Q=te[0].contentRect,T=Q.width,B=Q.height;D(T,B),(le=L.current)===null||le===void 0||le.call(L,T,B)};y>0&&(G=aQ(G,y,{trailing:!0,leading:!1}));var Y=new ResizeObserver(G),Z=P.current.getBoundingClientRect(),X=Z.width,re=Z.height;return D(X,re),Y.observe(P.current),function(){Y.disconnect()}},[D,y]);var M=C.useMemo(function(){var G=q.containerWidth,Y=q.containerHeight;if(G<0||Y<0)return null;Mu(Uf(l)||Uf(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,u),Mu(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Z=Uf(l)?G:l,X=Uf(u)?Y:u;r&&r>0&&(Z?X=Z/r:X&&(Z=X*r),g&&X>g&&(X=g)),Mu(Z>0||X>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Z,X,l,u,f,m,r);var re=!Array.isArray(x)&&Iu(x.type).endsWith("Chart");return ve.Children.map(x,function(z){return ve.isValidElement(z)?C.cloneElement(z,Lb({width:Z,height:X},re?{style:Lb({height:"100%",width:"100%",maxHeight:X,maxWidth:Z},z.props.style)}:{})):z})},[r,x,u,g,m,f,q,l]);return ve.createElement("div",{id:b?"".concat(b):void 0,className:zn("recharts-responsive-container",N),style:Lb(Lb({},A),{},{width:l,height:u,minWidth:f,minHeight:m,maxHeight:g}),ref:P},M)}),oQ=function(n){return null};oQ.displayName="Cell";function mv(e){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mv(e)}function $F(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Tk(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?$F(Object(r),!0).forEach(function(s){tSe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$F(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function tSe(e,n,r){return n=nSe(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function nSe(e){var n=rSe(e,"string");return mv(n)=="symbol"?n:n+""}function rSe(e,n){if(mv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(mv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var Ap={widthCache:{},cacheCount:0},sSe=2e3,iSe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},qF="recharts_measurement_span";function aSe(e){var n=Tk({},e);return Object.keys(n).forEach(function(r){n[r]||delete n[r]}),n}var Fx=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n==null||by.isSsr)return{width:0,height:0};var s=aSe(r),a=JSON.stringify({text:n,copyStyle:s});if(Ap.widthCache[a])return Ap.widthCache[a];try{var o=document.getElementById(qF);o||(o=document.createElement("span"),o.setAttribute("id",qF),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var l=Tk(Tk({},iSe),s);Object.assign(o.style,l),o.textContent="".concat(n);var c=o.getBoundingClientRect(),u={width:c.width,height:c.height};return Ap.widthCache[a]=u,++Ap.cacheCount>sSe&&(Ap.cacheCount=0,Ap.widthCache={}),u}catch{return{width:0,height:0}}},oSe=function(n){return{top:n.top+window.scrollY-document.documentElement.clientTop,left:n.left+window.scrollX-document.documentElement.clientLeft}};function pv(e){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pv(e)}function uw(e,n){return dSe(e)||uSe(e,n)||cSe(e,n)||lSe()}function lSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cSe(e,n){if(e){if(typeof e=="string")return zF(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zF(e,n)}}function zF(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function uSe(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,o,l,c=[],u=!0,d=!1;try{if(o=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(s=o.call(r)).done)&&(c.push(s.value),c.length!==n);u=!0);}catch(f){d=!0,a=f}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}function dSe(e){if(Array.isArray(e))return e}function hSe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function UF(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,mSe(s.key),s)}}function fSe(e,n,r){return n&&UF(e.prototype,n),r&&UF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mSe(e){var n=pSe(e,"string");return pv(n)=="symbol"?n:n+""}function pSe(e,n){if(pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(pv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,gSe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xSe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,lQ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vSe=Object.keys(lQ),zp="NaN";function ySe(e,n){return e*lQ[n]}var Rb=(function(){function e(n,r){hSe(this,e),this.num=n,this.unit=r,this.num=n,this.unit=r,Number.isNaN(n)&&(this.unit=""),r!==""&&!gSe.test(r)&&(this.num=NaN,this.unit=""),vSe.includes(r)&&(this.num=ySe(n,r),this.unit="px")}return fSe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var s,a=(s=xSe.exec(r))!==null&&s!==void 0?s:[],o=uw(a,3),l=o[1],c=o[2];return new e(parseFloat(l),c??"")}}])})();function cQ(e){if(e.includes(zp))return zp;for(var n=e;n.includes("*")||n.includes("/");){var r,s=(r=VF.exec(n))!==null&&r!==void 0?r:[],a=uw(s,4),o=a[1],l=a[2],c=a[3],u=Rb.parse(o??""),d=Rb.parse(c??""),f=l==="*"?u.multiply(d):u.divide(d);if(f.isNaN())return zp;n=n.replace(VF,f.toString())}for(;n.includes("+")||/.-\d+(?:\.\d+)?/.test(n);){var m,g=(m=HF.exec(n))!==null&&m!==void 0?m:[],x=uw(g,4),v=x[1],y=x[2],b=x[3],N=Rb.parse(v??""),j=Rb.parse(b??""),S=y==="+"?N.add(j):N.subtract(j);if(S.isNaN())return zp;n=n.replace(HF,S.toString())}return n}var WF=/\(([^()]*)\)/;function bSe(e){for(var n=e;n.includes("(");){var r=WF.exec(n),s=uw(r,2),a=s[1];n=n.replace(WF,cQ(a))}return n}function wSe(e){var n=e.replace(/\s+/g,"");return n=bSe(n),n=cQ(n),n}function jSe(e){try{return wSe(e)}catch{return zp}}function qC(e){var n=jSe(e.slice(5,-1));return n===zp?"":n}var NSe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_Se=["dx","dy","angle","className","breakAll"];function Ok(){return Ok=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ok.apply(this,arguments)}function KF(e,n){if(e==null)return{};var r=SSe(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function SSe(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}function GF(e,n){return kSe(e)||ASe(e,n)||PSe(e,n)||CSe()}function CSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PSe(e,n){if(e){if(typeof e=="string")return YF(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YF(e,n)}}function YF(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function ASe(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,o,l,c=[],u=!0,d=!1;try{if(o=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(s=o.call(r)).done)&&(c.push(s.value),c.length!==n);u=!0);}catch(f){d=!0,a=f}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}function kSe(e){if(Array.isArray(e))return e}var uQ=/[ \f\n\r\t\v\u2028\u2029]+/,dQ=function(n){var r=n.children,s=n.breakAll,a=n.style;try{var o=[];er(r)||(s?o=r.toString().split(""):o=r.toString().split(uQ));var l=o.map(function(u){return{word:u,width:Fx(u,a).width}}),c=s?0:Fx(" ",a).width;return{wordsWithComputedWidth:l,spaceWidth:c}}catch{return null}},ESe=function(n,r,s,a,o){var l=n.maxLines,c=n.children,u=n.style,d=n.breakAll,f=bt(l),m=c,g=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Z.reduce(function(X,re){var z=re.word,te=re.width,le=X[X.length-1];if(le&&(a==null||o||le.width+te+s<Number(a)))le.words.push(z),le.width+=te+s;else{var Q={words:[z],width:te};X.push(Q)}return X},[])},x=g(r),v=function(Z){return Z.reduce(function(X,re){return X.width>re.width?X:re})};if(!f)return x;for(var y="…",b=function(Z){var X=m.slice(0,Z),re=dQ({breakAll:d,style:u,children:X+y}).wordsWithComputedWidth,z=g(re),te=z.length>l||v(z).width>Number(a);return[te,z]},N=0,j=m.length-1,S=0,A;N<=j&&S<=m.length-1;){var P=Math.floor((N+j)/2),L=P-1,O=b(L),R=GF(O,2),q=R[0],U=R[1],D=b(P),M=GF(D,1),G=M[0];if(!q&&!G&&(N=P+1),q&&G&&(j=P-1),!q&&G){A=U;break}S++}return A||x},QF=function(n){var r=er(n)?[]:n.toString().split(uQ);return[{words:r}]},TSe=function(n){var r=n.width,s=n.scaleToFit,a=n.children,o=n.style,l=n.breakAll,c=n.maxLines;if((r||s)&&!by.isSsr){var u,d,f=dQ({breakAll:l,children:a,style:o});if(f){var m=f.wordsWithComputedWidth,g=f.spaceWidth;u=m,d=g}else return QF(a);return ESe({breakAll:l,children:a,maxLines:c,style:o},u,d,r,s)}return QF(a)},XF="#808080",dw=function(n){var r=n.x,s=r===void 0?0:r,a=n.y,o=a===void 0?0:a,l=n.lineHeight,c=l===void 0?"1em":l,u=n.capHeight,d=u===void 0?"0.71em":u,f=n.scaleToFit,m=f===void 0?!1:f,g=n.textAnchor,x=g===void 0?"start":g,v=n.verticalAnchor,y=v===void 0?"end":v,b=n.fill,N=b===void 0?XF:b,j=KF(n,NSe),S=C.useMemo(function(){return TSe({breakAll:j.breakAll,children:j.children,maxLines:j.maxLines,scaleToFit:m,style:j.style,width:j.width})},[j.breakAll,j.children,j.maxLines,m,j.style,j.width]),A=j.dx,P=j.dy,L=j.angle,O=j.className,R=j.breakAll,q=KF(j,_Se);if(!Bs(s)||!Bs(o))return null;var U=s+(bt(A)?A:0),D=o+(bt(P)?P:0),M;switch(y){case"start":M=qC("calc(".concat(d,")"));break;case"middle":M=qC("calc(".concat((S.length-1)/2," * -").concat(c," + (").concat(d," / 2))"));break;default:M=qC("calc(".concat(S.length-1," * -").concat(c,")"));break}var G=[];if(m){var Y=S[0].width,Z=j.width;G.push("scale(".concat((bt(Z)?Z/Y:1)/Y,")"))}return L&&G.push("rotate(".concat(L,", ").concat(U,", ").concat(D,")")),G.length&&(q.transform=G.join(" ")),ve.createElement("text",Ok({},Zn(q,!0),{x:U,y:D,className:zn("recharts-text",O),textAnchor:x,fill:N.includes("url")?XF:N}),S.map(function(X,re){var z=X.words.join(R?"":" ");return ve.createElement("tspan",{x:U,dy:re===0?M:c,key:"".concat(z,"-").concat(re)},z)}))};function xh(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function OSe(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function rT(e){let n,r,s;e.length!==2?(n=xh,r=(c,u)=>xh(e(c),u),s=(c,u)=>e(c)-u):(n=e===xh||e===OSe?e:LSe,r=e,s=e);function a(c,u,d=0,f=c.length){if(d<f){if(n(u,u)!==0)return f;do{const m=d+f>>>1;r(c[m],u)<0?d=m+1:f=m}while(d<f)}return d}function o(c,u,d=0,f=c.length){if(d<f){if(n(u,u)!==0)return f;do{const m=d+f>>>1;r(c[m],u)<=0?d=m+1:f=m}while(d<f)}return d}function l(c,u,d=0,f=c.length){const m=a(c,u,d,f-1);return m>d&&s(c[m-1],u)>-s(c[m],u)?m-1:m}return{left:a,center:l,right:o}}function LSe(){return 0}function hQ(e){return e===null?NaN:+e}function*RSe(e,n){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const DSe=rT(xh),wy=DSe.right;rT(hQ).center;class JF extends Map{constructor(n,r=FSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),n!=null)for(const[s,a]of n)this.set(s,a)}get(n){return super.get(ZF(this,n))}has(n){return super.has(ZF(this,n))}set(n,r){return super.set(ISe(this,n),r)}delete(n){return super.delete(MSe(this,n))}}function ZF({_intern:e,_key:n},r){const s=n(r);return e.has(s)?e.get(s):r}function ISe({_intern:e,_key:n},r){const s=n(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function MSe({_intern:e,_key:n},r){const s=n(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function FSe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function BSe(e=xh){if(e===xh)return fQ;if(typeof e!="function")throw new TypeError("compare is not a function");return(n,r)=>{const s=e(n,r);return s||s===0?s:(e(r,r)===0)-(e(n,n)===0)}}function fQ(e,n){return(e==null||!(e>=e))-(n==null||!(n>=n))||(e<n?-1:e>n?1:0)}const $Se=Math.sqrt(50),qSe=Math.sqrt(10),zSe=Math.sqrt(2);function hw(e,n,r){const s=(n-e)/Math.max(0,r),a=Math.floor(Math.log10(s)),o=s/Math.pow(10,a),l=o>=$Se?10:o>=qSe?5:o>=zSe?2:1;let c,u,d;return a<0?(d=Math.pow(10,-a)/l,c=Math.round(e*d),u=Math.round(n*d),c/d<e&&++c,u/d>n&&--u,d=-d):(d=Math.pow(10,a)*l,c=Math.round(e/d),u=Math.round(n/d),c*d<e&&++c,u*d>n&&--u),u<c&&.5<=r&&r<2?hw(e,n,r*2):[c,u,d]}function Lk(e,n,r){if(n=+n,e=+e,r=+r,!(r>0))return[];if(e===n)return[e];const s=n<e,[a,o,l]=s?hw(n,e,r):hw(e,n,r);if(!(o>=a))return[];const c=o-a+1,u=new Array(c);if(s)if(l<0)for(let d=0;d<c;++d)u[d]=(o-d)/-l;else for(let d=0;d<c;++d)u[d]=(o-d)*l;else if(l<0)for(let d=0;d<c;++d)u[d]=(a+d)/-l;else for(let d=0;d<c;++d)u[d]=(a+d)*l;return u}function Rk(e,n,r){return n=+n,e=+e,r=+r,hw(e,n,r)[2]}function Dk(e,n,r){n=+n,e=+e,r=+r;const s=n<e,a=s?Rk(n,e,r):Rk(e,n,r);return(s?-1:1)*(a<0?1/-a:a)}function e7(e,n){let r;for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);return r}function t7(e,n){let r;for(const s of e)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);return r}function mQ(e,n,r=0,s=1/0,a){if(n=Math.floor(n),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(e.length-1,s)),!(r<=n&&n<=s))return e;for(a=a===void 0?fQ:BSe(a);s>r;){if(s-r>600){const u=s-r+1,d=n-r+1,f=Math.log(u),m=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*m*(u-m)/u)*(d-u/2<0?-1:1),x=Math.max(r,Math.floor(n-d*m/u+g)),v=Math.min(s,Math.floor(n+(u-d)*m/u+g));mQ(e,n,x,v,a)}const o=e[n];let l=r,c=s;for(Z0(e,r,n),a(e[s],o)>0&&Z0(e,r,s);l<c;){for(Z0(e,l,c),++l,--c;a(e[l],o)<0;)++l;for(;a(e[c],o)>0;)--c}a(e[r],o)===0?Z0(e,r,c):(++c,Z0(e,c,s)),c<=n&&(r=c+1),n<=c&&(s=c-1)}return e}function Z0(e,n,r){const s=e[n];e[n]=e[r],e[r]=s}function USe(e,n,r){if(e=Float64Array.from(RSe(e)),!(!(s=e.length)||isNaN(n=+n))){if(n<=0||s<2)return t7(e);if(n>=1)return e7(e);var s,a=(s-1)*n,o=Math.floor(a),l=e7(mQ(e,o).subarray(0,o+1)),c=t7(e.subarray(o+1));return l+(c-l)*(a-o)}}function VSe(e,n,r=hQ){if(!(!(s=e.length)||isNaN(n=+n))){if(n<=0||s<2)return+r(e[0],0,e);if(n>=1)return+r(e[s-1],s-1,e);var s,a=(s-1)*n,o=Math.floor(a),l=+r(e[o],o,e),c=+r(e[o+1],o+1,e);return l+(c-l)*(a-o)}}function HSe(e,n,r){e=+e,n=+n,r=(a=arguments.length)<2?(n=e,e=0,1):a<3?1:+r;for(var s=-1,a=Math.max(0,Math.ceil((n-e)/r))|0,o=new Array(a);++s<a;)o[s]=e+s*r;return o}function Vo(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function Qu(e,n){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}const Ik=Symbol("implicit");function sT(){var e=new JF,n=[],r=[],s=Ik;function a(o){let l=e.get(o);if(l===void 0){if(s!==Ik)return s;e.set(o,l=n.push(o)-1)}return r[l%r.length]}return a.domain=function(o){if(!arguments.length)return n.slice();n=[],e=new JF;for(const l of o)e.has(l)||e.set(l,n.push(l)-1);return a},a.range=function(o){return arguments.length?(r=Array.from(o),a):r.slice()},a.unknown=function(o){return arguments.length?(s=o,a):s},a.copy=function(){return sT(n,r).unknown(s)},Vo.apply(a,arguments),a}function gv(){var e=sT().unknown(void 0),n=e.domain,r=e.range,s=0,a=1,o,l,c=!1,u=0,d=0,f=.5;delete e.unknown;function m(){var g=n().length,x=a<s,v=x?a:s,y=x?s:a;o=(y-v)/Math.max(1,g-u+d*2),c&&(o=Math.floor(o)),v+=(y-v-o*(g-u))*f,l=o*(1-u),c&&(v=Math.round(v),l=Math.round(l));var b=HSe(g).map(function(N){return v+o*N});return r(x?b.reverse():b)}return e.domain=function(g){return arguments.length?(n(g),m()):n()},e.range=function(g){return arguments.length?([s,a]=g,s=+s,a=+a,m()):[s,a]},e.rangeRound=function(g){return[s,a]=g,s=+s,a=+a,c=!0,m()},e.bandwidth=function(){return l},e.step=function(){return o},e.round=function(g){return arguments.length?(c=!!g,m()):c},e.padding=function(g){return arguments.length?(u=Math.min(1,d=+g),m()):u},e.paddingInner=function(g){return arguments.length?(u=Math.min(1,g),m()):u},e.paddingOuter=function(g){return arguments.length?(d=+g,m()):d},e.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),m()):f},e.copy=function(){return gv(n(),[s,a]).round(c).paddingInner(u).paddingOuter(d).align(f)},Vo.apply(m(),arguments)}function pQ(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pQ(n())},e}function Bx(){return pQ(gv.apply(null,arguments).paddingInner(1))}function iT(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function gQ(e,n){var r=Object.create(e.prototype);for(var s in n)r[s]=n[s];return r}function jy(){}var xv=.7,fw=1/xv,sg="\\s*([+-]?\\d+)\\s*",vv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",WSe=/^#([0-9a-f]{3,8})$/,KSe=new RegExp(`^rgb\\(${sg},${sg},${sg}\\)$`),GSe=new RegExp(`^rgb\\(${Sc},${Sc},${Sc}\\)$`),YSe=new RegExp(`^rgba\\(${sg},${sg},${sg},${vv}\\)$`),QSe=new RegExp(`^rgba\\(${Sc},${Sc},${Sc},${vv}\\)$`),XSe=new RegExp(`^hsl\\(${vv},${Sc},${Sc}\\)$`),JSe=new RegExp(`^hsla\\(${vv},${Sc},${Sc},${vv}\\)$`),n7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iT(jy,yv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:r7,formatHex:r7,formatHex8:ZSe,formatHsl:eCe,formatRgb:s7,toString:s7});function r7(){return this.rgb().formatHex()}function ZSe(){return this.rgb().formatHex8()}function eCe(){return xQ(this).formatHsl()}function s7(){return this.rgb().formatRgb()}function yv(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=WSe.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?i7(n):r===3?new Oa(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Db(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Db(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=KSe.exec(e))?new Oa(n[1],n[2],n[3],1):(n=GSe.exec(e))?new Oa(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=YSe.exec(e))?Db(n[1],n[2],n[3],n[4]):(n=QSe.exec(e))?Db(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=XSe.exec(e))?l7(n[1],n[2]/100,n[3]/100,1):(n=JSe.exec(e))?l7(n[1],n[2]/100,n[3]/100,n[4]):n7.hasOwnProperty(e)?i7(n7[e]):e==="transparent"?new Oa(NaN,NaN,NaN,0):null}function i7(e){return new Oa(e>>16&255,e>>8&255,e&255,1)}function Db(e,n,r,s){return s<=0&&(e=n=r=NaN),new Oa(e,n,r,s)}function tCe(e){return e instanceof jy||(e=yv(e)),e?(e=e.rgb(),new Oa(e.r,e.g,e.b,e.opacity)):new Oa}function Mk(e,n,r,s){return arguments.length===1?tCe(e):new Oa(e,n,r,s??1)}function Oa(e,n,r,s){this.r=+e,this.g=+n,this.b=+r,this.opacity=+s}iT(Oa,Mk,gQ(jy,{brighter(e){return e=e==null?fw:Math.pow(fw,e),new Oa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?xv:Math.pow(xv,e),new Oa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Oa(lm(this.r),lm(this.g),lm(this.b),mw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:a7,formatHex:a7,formatHex8:nCe,formatRgb:o7,toString:o7}));function a7(){return`#${Vf(this.r)}${Vf(this.g)}${Vf(this.b)}`}function nCe(){return`#${Vf(this.r)}${Vf(this.g)}${Vf(this.b)}${Vf((isNaN(this.opacity)?1:this.opacity)*255)}`}function o7(){const e=mw(this.opacity);return`${e===1?"rgb(":"rgba("}${lm(this.r)}, ${lm(this.g)}, ${lm(this.b)}${e===1?")":`, ${e})`}`}function mw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function lm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vf(e){return e=lm(e),(e<16?"0":"")+e.toString(16)}function l7(e,n,r,s){return s<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new Nl(e,n,r,s)}function xQ(e){if(e instanceof Nl)return new Nl(e.h,e.s,e.l,e.opacity);if(e instanceof jy||(e=yv(e)),!e)return new Nl;if(e instanceof Nl)return e;e=e.rgb();var n=e.r/255,r=e.g/255,s=e.b/255,a=Math.min(n,r,s),o=Math.max(n,r,s),l=NaN,c=o-a,u=(o+a)/2;return c?(n===o?l=(r-s)/c+(r<s)*6:r===o?l=(s-n)/c+2:l=(n-r)/c+4,c/=u<.5?o+a:2-o-a,l*=60):c=u>0&&u<1?0:l,new Nl(l,c,u,e.opacity)}function rCe(e,n,r,s){return arguments.length===1?xQ(e):new Nl(e,n,r,s??1)}function Nl(e,n,r,s){this.h=+e,this.s=+n,this.l=+r,this.opacity=+s}iT(Nl,rCe,gQ(jy,{brighter(e){return e=e==null?fw:Math.pow(fw,e),new Nl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xv:Math.pow(xv,e),new Nl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*n,a=2*r-s;return new Oa(zC(e>=240?e-240:e+120,a,s),zC(e,a,s),zC(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new Nl(c7(this.h),Ib(this.s),Ib(this.l),mw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mw(this.opacity);return`${e===1?"hsl(":"hsla("}${c7(this.h)}, ${Ib(this.s)*100}%, ${Ib(this.l)*100}%${e===1?")":`, ${e})`}`}}));function c7(e){return e=(e||0)%360,e<0?e+360:e}function Ib(e){return Math.max(0,Math.min(1,e||0))}function zC(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const aT=e=>()=>e;function sCe(e,n){return function(r){return e+r*n}}function iCe(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(s){return Math.pow(e+s*n,r)}}function aCe(e){return(e=+e)==1?vQ:function(n,r){return r-n?iCe(n,r,e):aT(isNaN(n)?r:n)}}function vQ(e,n){var r=n-e;return r?sCe(e,r):aT(isNaN(e)?n:e)}const u7=(function e(n){var r=aCe(n);function s(a,o){var l=r((a=Mk(a)).r,(o=Mk(o)).r),c=r(a.g,o.g),u=r(a.b,o.b),d=vQ(a.opacity,o.opacity);return function(f){return a.r=l(f),a.g=c(f),a.b=u(f),a.opacity=d(f),a+""}}return s.gamma=e,s})(1);function oCe(e,n){n||(n=[]);var r=e?Math.min(n.length,e.length):0,s=n.slice(),a;return function(o){for(a=0;a<r;++a)s[a]=e[a]*(1-o)+n[a]*o;return s}}function lCe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function cCe(e,n){var r=n?n.length:0,s=e?Math.min(r,e.length):0,a=new Array(s),o=new Array(r),l;for(l=0;l<s;++l)a[l]=m0(e[l],n[l]);for(;l<r;++l)o[l]=n[l];return function(c){for(l=0;l<s;++l)o[l]=a[l](c);return o}}function uCe(e,n){var r=new Date;return e=+e,n=+n,function(s){return r.setTime(e*(1-s)+n*s),r}}function pw(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}function dCe(e,n){var r={},s={},a;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(a in n)a in e?r[a]=m0(e[a],n[a]):s[a]=n[a];return function(o){for(a in r)s[a]=r[a](o);return s}}var Fk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,UC=new RegExp(Fk.source,"g");function hCe(e){return function(){return e}}function fCe(e){return function(n){return e(n)+""}}function mCe(e,n){var r=Fk.lastIndex=UC.lastIndex=0,s,a,o,l=-1,c=[],u=[];for(e=e+"",n=n+"";(s=Fk.exec(e))&&(a=UC.exec(n));)(o=a.index)>r&&(o=n.slice(r,o),c[l]?c[l]+=o:c[++l]=o),(s=s[0])===(a=a[0])?c[l]?c[l]+=a:c[++l]=a:(c[++l]=null,u.push({i:l,x:pw(s,a)})),r=UC.lastIndex;return r<n.length&&(o=n.slice(r),c[l]?c[l]+=o:c[++l]=o),c.length<2?u[0]?fCe(u[0].x):hCe(n):(n=u.length,function(d){for(var f=0,m;f<n;++f)c[(m=u[f]).i]=m.x(d);return c.join("")})}function m0(e,n){var r=typeof n,s;return n==null||r==="boolean"?aT(n):(r==="number"?pw:r==="string"?(s=yv(n))?(n=s,u7):mCe:n instanceof yv?u7:n instanceof Date?uCe:lCe(n)?oCe:Array.isArray(n)?cCe:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?dCe:pw)(e,n)}function oT(e,n){return e=+e,n=+n,function(r){return Math.round(e*(1-r)+n*r)}}function pCe(e,n){n===void 0&&(n=e,e=m0);for(var r=0,s=n.length-1,a=n[0],o=new Array(s<0?0:s);r<s;)o[r]=e(a,a=n[++r]);return function(l){var c=Math.max(0,Math.min(s-1,Math.floor(l*=s)));return o[c](l-c)}}function gCe(e){return function(){return e}}function gw(e){return+e}var d7=[0,1];function da(e){return e}function Bk(e,n){return(n-=e=+e)?function(r){return(r-e)/n}:gCe(isNaN(n)?NaN:.5)}function xCe(e,n){var r;return e>n&&(r=e,e=n,n=r),function(s){return Math.max(e,Math.min(n,s))}}function vCe(e,n,r){var s=e[0],a=e[1],o=n[0],l=n[1];return a<s?(s=Bk(a,s),o=r(l,o)):(s=Bk(s,a),o=r(o,l)),function(c){return o(s(c))}}function yCe(e,n,r){var s=Math.min(e.length,n.length)-1,a=new Array(s),o=new Array(s),l=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++l<s;)a[l]=Bk(e[l],e[l+1]),o[l]=r(n[l],n[l+1]);return function(c){var u=wy(e,c,1,s)-1;return o[u](a[u](c))}}function Ny(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function cj(){var e=d7,n=d7,r=m0,s,a,o,l=da,c,u,d;function f(){var g=Math.min(e.length,n.length);return l!==da&&(l=xCe(e[0],e[g-1])),c=g>2?yCe:vCe,u=d=null,m}function m(g){return g==null||isNaN(g=+g)?o:(u||(u=c(e.map(s),n,r)))(s(l(g)))}return m.invert=function(g){return l(a((d||(d=c(n,e.map(s),pw)))(g)))},m.domain=function(g){return arguments.length?(e=Array.from(g,gw),f()):e.slice()},m.range=function(g){return arguments.length?(n=Array.from(g),f()):n.slice()},m.rangeRound=function(g){return n=Array.from(g),r=oT,f()},m.clamp=function(g){return arguments.length?(l=g?!0:da,f()):l!==da},m.interpolate=function(g){return arguments.length?(r=g,f()):r},m.unknown=function(g){return arguments.length?(o=g,m):o},function(g,x){return s=g,a=x,f()}}function lT(){return cj()(da,da)}function bCe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xw(e,n){if((r=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function Og(e){return e=xw(Math.abs(e)),e?e[1]:NaN}function wCe(e,n){return function(r,s){for(var a=r.length,o=[],l=0,c=e[0],u=0;a>0&&c>0&&(u+c+1>s&&(c=Math.max(1,s-u)),o.push(r.substring(a-=c,a+c)),!((u+=c+1)>s));)c=e[l=(l+1)%e.length];return o.reverse().join(n)}}function jCe(e){return function(n){return n.replace(/[0-9]/g,function(r){return e[+r]})}}var NCe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bv(e){if(!(n=NCe.exec(e)))throw new Error("invalid format: "+e);var n;return new cT({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}bv.prototype=cT.prototype;function cT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _Ce(e){e:for(var n=e.length,r=1,s=-1,a;r<n;++r)switch(e[r]){case".":s=a=r;break;case"0":s===0&&(s=r),a=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var yQ;function SCe(e,n){var r=xw(e,n);if(!r)return e+"";var s=r[0],a=r[1],o=a-(yQ=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=s.length;return o===l?s:o>l?s+new Array(o-l+1).join("0"):o>0?s.slice(0,o)+"."+s.slice(o):"0."+new Array(1-o).join("0")+xw(e,Math.max(0,n+o-1))[0]}function h7(e,n){var r=xw(e,n);if(!r)return e+"";var s=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const f7={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:bCe,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>h7(e*100,n),r:h7,s:SCe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function m7(e){return e}var p7=Array.prototype.map,g7=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function CCe(e){var n=e.grouping===void 0||e.thousands===void 0?m7:wCe(p7.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?m7:jCe(p7.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function d(m){m=bv(m);var g=m.fill,x=m.align,v=m.sign,y=m.symbol,b=m.zero,N=m.width,j=m.comma,S=m.precision,A=m.trim,P=m.type;P==="n"?(j=!0,P="g"):f7[P]||(S===void 0&&(S=12),A=!0,P="g"),(b||g==="0"&&x==="=")&&(b=!0,g="0",x="=");var L=y==="$"?r:y==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",O=y==="$"?s:/[%p]/.test(P)?l:"",R=f7[P],q=/[defgprs%]/.test(P);S=S===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function U(D){var M=L,G=O,Y,Z,X;if(P==="c")G=R(D)+G,D="";else{D=+D;var re=D<0||1/D<0;if(D=isNaN(D)?u:R(Math.abs(D),S),A&&(D=_Ce(D)),re&&+D==0&&v!=="+"&&(re=!1),M=(re?v==="("?v:c:v==="-"||v==="("?"":v)+M,G=(P==="s"?g7[8+yQ/3]:"")+G+(re&&v==="("?")":""),q){for(Y=-1,Z=D.length;++Y<Z;)if(X=D.charCodeAt(Y),48>X||X>57){G=(X===46?a+D.slice(Y+1):D.slice(Y))+G,D=D.slice(0,Y);break}}}j&&!b&&(D=n(D,1/0));var z=M.length+D.length+G.length,te=z<N?new Array(N-z+1).join(g):"";switch(j&&b&&(D=n(te+D,te.length?N-G.length:1/0),te=""),x){case"<":D=M+D+G+te;break;case"=":D=M+te+D+G;break;case"^":D=te.slice(0,z=te.length>>1)+M+D+G+te.slice(z);break;default:D=te+M+D+G;break}return o(D)}return U.toString=function(){return m+""},U}function f(m,g){var x=d((m=bv(m),m.type="f",m)),v=Math.max(-8,Math.min(8,Math.floor(Og(g)/3)))*3,y=Math.pow(10,-v),b=g7[8+v/3];return function(N){return x(y*N)+b}}return{format:d,formatPrefix:f}}var Mb,uT,bQ;PCe({thousands:",",grouping:[3],currency:["$",""]});function PCe(e){return Mb=CCe(e),uT=Mb.format,bQ=Mb.formatPrefix,Mb}function ACe(e){return Math.max(0,-Og(Math.abs(e)))}function kCe(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Og(n)/3)))*3-Og(Math.abs(e)))}function ECe(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Og(n)-Og(e))+1}function wQ(e,n,r,s){var a=Dk(e,n,r),o;switch(s=bv(s??",f"),s.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(n));return s.precision==null&&!isNaN(o=kCe(a,l))&&(s.precision=o),bQ(s,l)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(o=ECe(a,Math.max(Math.abs(e),Math.abs(n))))&&(s.precision=o-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(o=ACe(a))&&(s.precision=o-(s.type==="%")*2);break}}return uT(s)}function Gh(e){var n=e.domain;return e.ticks=function(r){var s=n();return Lk(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var a=n();return wQ(a[0],a[a.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=n(),a=0,o=s.length-1,l=s[a],c=s[o],u,d,f=10;for(c<l&&(d=l,l=c,c=d,d=a,a=o,o=d);f-- >0;){if(d=Rk(l,c,r),d===u)return s[a]=l,s[o]=c,n(s);if(d>0)l=Math.floor(l/d)*d,c=Math.ceil(c/d)*d;else if(d<0)l=Math.ceil(l*d)/d,c=Math.floor(c*d)/d;else break;u=d}return e},e}function vw(){var e=lT();return e.copy=function(){return Ny(e,vw())},Vo.apply(e,arguments),Gh(e)}function jQ(e){var n;function r(s){return s==null||isNaN(s=+s)?n:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(e=Array.from(s,gw),r):e.slice()},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return jQ(e).unknown(n)},e=arguments.length?Array.from(e,gw):[0,1],Gh(r)}function NQ(e,n){e=e.slice();var r=0,s=e.length-1,a=e[r],o=e[s],l;return o<a&&(l=r,r=s,s=l,l=a,a=o,o=l),e[r]=n.floor(a),e[s]=n.ceil(o),e}function x7(e){return Math.log(e)}function v7(e){return Math.exp(e)}function TCe(e){return-Math.log(-e)}function OCe(e){return-Math.exp(-e)}function LCe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function RCe(e){return e===10?LCe:e===Math.E?Math.exp:n=>Math.pow(e,n)}function DCe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),n=>Math.log(n)/e)}function y7(e){return(n,r)=>-e(-n,r)}function dT(e){const n=e(x7,v7),r=n.domain;let s=10,a,o;function l(){return a=DCe(s),o=RCe(s),r()[0]<0?(a=y7(a),o=y7(o),e(TCe,OCe)):e(x7,v7),n}return n.base=function(c){return arguments.length?(s=+c,l()):s},n.domain=function(c){return arguments.length?(r(c),l()):r()},n.ticks=c=>{const u=r();let d=u[0],f=u[u.length-1];const m=f<d;m&&([d,f]=[f,d]);let g=a(d),x=a(f),v,y;const b=c==null?10:+c;let N=[];if(!(s%1)&&x-g<b){if(g=Math.floor(g),x=Math.ceil(x),d>0){for(;g<=x;++g)for(v=1;v<s;++v)if(y=g<0?v/o(-g):v*o(g),!(y<d)){if(y>f)break;N.push(y)}}else for(;g<=x;++g)for(v=s-1;v>=1;--v)if(y=g>0?v/o(-g):v*o(g),!(y<d)){if(y>f)break;N.push(y)}N.length*2<b&&(N=Lk(d,f,b))}else N=Lk(g,x,Math.min(x-g,b)).map(o);return m?N.reverse():N},n.tickFormat=(c,u)=>{if(c==null&&(c=10),u==null&&(u=s===10?"s":","),typeof u!="function"&&(!(s%1)&&(u=bv(u)).precision==null&&(u.trim=!0),u=uT(u)),c===1/0)return u;const d=Math.max(1,s*c/n.ticks().length);return f=>{let m=f/o(Math.round(a(f)));return m*s<s-.5&&(m*=s),m<=d?u(f):""}},n.nice=()=>r(NQ(r(),{floor:c=>o(Math.floor(a(c))),ceil:c=>o(Math.ceil(a(c)))})),n}function _Q(){const e=dT(cj()).domain([1,10]);return e.copy=()=>Ny(e,_Q()).base(e.base()),Vo.apply(e,arguments),e}function b7(e){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/e))}}function w7(e){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*e}}function hT(e){var n=1,r=e(b7(n),w7(n));return r.constant=function(s){return arguments.length?e(b7(n=+s),w7(n)):n},Gh(r)}function SQ(){var e=hT(cj());return e.copy=function(){return Ny(e,SQ()).constant(e.constant())},Vo.apply(e,arguments)}function j7(e){return function(n){return n<0?-Math.pow(-n,e):Math.pow(n,e)}}function ICe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function MCe(e){return e<0?-e*e:e*e}function fT(e){var n=e(da,da),r=1;function s(){return r===1?e(da,da):r===.5?e(ICe,MCe):e(j7(r),j7(1/r))}return n.exponent=function(a){return arguments.length?(r=+a,s()):r},Gh(n)}function mT(){var e=fT(cj());return e.copy=function(){return Ny(e,mT()).exponent(e.exponent())},Vo.apply(e,arguments),e}function FCe(){return mT.apply(null,arguments).exponent(.5)}function N7(e){return Math.sign(e)*e*e}function BCe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function CQ(){var e=lT(),n=[0,1],r=!1,s;function a(o){var l=BCe(e(o));return isNaN(l)?s:r?Math.round(l):l}return a.invert=function(o){return e.invert(N7(o))},a.domain=function(o){return arguments.length?(e.domain(o),a):e.domain()},a.range=function(o){return arguments.length?(e.range((n=Array.from(o,gw)).map(N7)),a):n.slice()},a.rangeRound=function(o){return a.range(o).round(!0)},a.round=function(o){return arguments.length?(r=!!o,a):r},a.clamp=function(o){return arguments.length?(e.clamp(o),a):e.clamp()},a.unknown=function(o){return arguments.length?(s=o,a):s},a.copy=function(){return CQ(e.domain(),n).round(r).clamp(e.clamp()).unknown(s)},Vo.apply(a,arguments),Gh(a)}function PQ(){var e=[],n=[],r=[],s;function a(){var l=0,c=Math.max(1,n.length);for(r=new Array(c-1);++l<c;)r[l-1]=VSe(e,l/c);return o}function o(l){return l==null||isNaN(l=+l)?s:n[wy(r,l)]}return o.invertExtent=function(l){var c=n.indexOf(l);return c<0?[NaN,NaN]:[c>0?r[c-1]:e[0],c<r.length?r[c]:e[e.length-1]]},o.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let c of l)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(xh),a()},o.range=function(l){return arguments.length?(n=Array.from(l),a()):n.slice()},o.unknown=function(l){return arguments.length?(s=l,o):s},o.quantiles=function(){return r.slice()},o.copy=function(){return PQ().domain(e).range(n).unknown(s)},Vo.apply(o,arguments)}function AQ(){var e=0,n=1,r=1,s=[.5],a=[0,1],o;function l(u){return u!=null&&u<=u?a[wy(s,u,0,r)]:o}function c(){var u=-1;for(s=new Array(r);++u<r;)s[u]=((u+1)*n-(u-r)*e)/(r+1);return l}return l.domain=function(u){return arguments.length?([e,n]=u,e=+e,n=+n,c()):[e,n]},l.range=function(u){return arguments.length?(r=(a=Array.from(u)).length-1,c()):a.slice()},l.invertExtent=function(u){var d=a.indexOf(u);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=r?[s[r-1],n]:[s[d-1],s[d]]},l.unknown=function(u){return arguments.length&&(o=u),l},l.thresholds=function(){return s.slice()},l.copy=function(){return AQ().domain([e,n]).range(a).unknown(o)},Vo.apply(Gh(l),arguments)}function kQ(){var e=[.5],n=[0,1],r,s=1;function a(o){return o!=null&&o<=o?n[wy(e,o,0,s)]:r}return a.domain=function(o){return arguments.length?(e=Array.from(o),s=Math.min(e.length,n.length-1),a):e.slice()},a.range=function(o){return arguments.length?(n=Array.from(o),s=Math.min(e.length,n.length-1),a):n.slice()},a.invertExtent=function(o){var l=n.indexOf(o);return[e[l-1],e[l]]},a.unknown=function(o){return arguments.length?(r=o,a):r},a.copy=function(){return kQ().domain(e).range(n).unknown(r)},Vo.apply(a,arguments)}const VC=new Date,HC=new Date;function qs(e,n,r,s){function a(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return a.floor=o=>(e(o=new Date(+o)),o),a.ceil=o=>(e(o=new Date(o-1)),n(o,1),e(o),o),a.round=o=>{const l=a(o),c=a.ceil(o);return o-l<c-o?l:c},a.offset=(o,l)=>(n(o=new Date(+o),l==null?1:Math.floor(l)),o),a.range=(o,l,c)=>{const u=[];if(o=a.ceil(o),c=c==null?1:Math.floor(c),!(o<l)||!(c>0))return u;let d;do u.push(d=new Date(+o)),n(o,c),e(o);while(d<o&&o<l);return u},a.filter=o=>qs(l=>{if(l>=l)for(;e(l),!o(l);)l.setTime(l-1)},(l,c)=>{if(l>=l)if(c<0)for(;++c<=0;)for(;n(l,-1),!o(l););else for(;--c>=0;)for(;n(l,1),!o(l););}),r&&(a.count=(o,l)=>(VC.setTime(+o),HC.setTime(+l),e(VC),e(HC),Math.floor(r(VC,HC))),a.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?a.filter(s?l=>s(l)%o===0:l=>a.count(0,l)%o===0):a)),a}const yw=qs(()=>{},(e,n)=>{e.setTime(+e+n)},(e,n)=>n-e);yw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?qs(n=>{n.setTime(Math.floor(n/e)*e)},(n,r)=>{n.setTime(+n+r*e)},(n,r)=>(r-n)/e):yw);yw.range;const Au=1e3,Bo=Au*60,ku=Bo*60,Vu=ku*24,pT=Vu*7,_7=Vu*30,WC=Vu*365,Hf=qs(e=>{e.setTime(e-e.getMilliseconds())},(e,n)=>{e.setTime(+e+n*Au)},(e,n)=>(n-e)/Au,e=>e.getUTCSeconds());Hf.range;const gT=qs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Au)},(e,n)=>{e.setTime(+e+n*Bo)},(e,n)=>(n-e)/Bo,e=>e.getMinutes());gT.range;const xT=qs(e=>{e.setUTCSeconds(0,0)},(e,n)=>{e.setTime(+e+n*Bo)},(e,n)=>(n-e)/Bo,e=>e.getUTCMinutes());xT.range;const vT=qs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Au-e.getMinutes()*Bo)},(e,n)=>{e.setTime(+e+n*ku)},(e,n)=>(n-e)/ku,e=>e.getHours());vT.range;const yT=qs(e=>{e.setUTCMinutes(0,0,0)},(e,n)=>{e.setTime(+e+n*ku)},(e,n)=>(n-e)/ku,e=>e.getUTCHours());yT.range;const _y=qs(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Bo)/Vu,e=>e.getDate()-1);_y.range;const uj=qs(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/Vu,e=>e.getUTCDate()-1);uj.range;const EQ=qs(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/Vu,e=>Math.floor(e/Vu));EQ.range;function Fm(e){return qs(n=>{n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},(n,r)=>{n.setDate(n.getDate()+r*7)},(n,r)=>(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*Bo)/pT)}const dj=Fm(0),bw=Fm(1),$Ce=Fm(2),qCe=Fm(3),Lg=Fm(4),zCe=Fm(5),UCe=Fm(6);dj.range;bw.range;$Ce.range;qCe.range;Lg.range;zCe.range;UCe.range;function Bm(e){return qs(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},(n,r)=>{n.setUTCDate(n.getUTCDate()+r*7)},(n,r)=>(r-n)/pT)}const hj=Bm(0),ww=Bm(1),VCe=Bm(2),HCe=Bm(3),Rg=Bm(4),WCe=Bm(5),KCe=Bm(6);hj.range;ww.range;VCe.range;HCe.range;Rg.range;WCe.range;KCe.range;const bT=qs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,n)=>{e.setMonth(e.getMonth()+n)},(e,n)=>n.getMonth()-e.getMonth()+(n.getFullYear()-e.getFullYear())*12,e=>e.getMonth());bT.range;const wT=qs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCMonth(e.getUTCMonth()+n)},(e,n)=>n.getUTCMonth()-e.getUTCMonth()+(n.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());wT.range;const Hu=qs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n)},(e,n)=>n.getFullYear()-e.getFullYear(),e=>e.getFullYear());Hu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qs(n=>{n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,r)=>{n.setFullYear(n.getFullYear()+r*e)});Hu.range;const Wu=qs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n)},(e,n)=>n.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Wu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qs(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,r)=>{n.setUTCFullYear(n.getUTCFullYear()+r*e)});Wu.range;function TQ(e,n,r,s,a,o){const l=[[Hf,1,Au],[Hf,5,5*Au],[Hf,15,15*Au],[Hf,30,30*Au],[o,1,Bo],[o,5,5*Bo],[o,15,15*Bo],[o,30,30*Bo],[a,1,ku],[a,3,3*ku],[a,6,6*ku],[a,12,12*ku],[s,1,Vu],[s,2,2*Vu],[r,1,pT],[n,1,_7],[n,3,3*_7],[e,1,WC]];function c(d,f,m){const g=f<d;g&&([d,f]=[f,d]);const x=m&&typeof m.range=="function"?m:u(d,f,m),v=x?x.range(d,+f+1):[];return g?v.reverse():v}function u(d,f,m){const g=Math.abs(f-d)/m,x=rT(([,,b])=>b).right(l,g);if(x===l.length)return e.every(Dk(d/WC,f/WC,m));if(x===0)return yw.every(Math.max(Dk(d,f,m),1));const[v,y]=l[g/l[x-1][2]<l[x][2]/g?x-1:x];return v.every(y)}return[c,u]}const[GCe,YCe]=TQ(Wu,wT,hj,EQ,yT,xT),[QCe,XCe]=TQ(Hu,bT,dj,_y,vT,gT);function KC(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function GC(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ex(e,n,r){return{y:e,m:n,d:r,H:0,M:0,S:0,L:0}}function JCe(e){var n=e.dateTime,r=e.date,s=e.time,a=e.periods,o=e.days,l=e.shortDays,c=e.months,u=e.shortMonths,d=tx(a),f=nx(a),m=tx(o),g=nx(o),x=tx(l),v=nx(l),y=tx(c),b=nx(c),N=tx(u),j=nx(u),S={a:re,A:z,b:te,B:le,c:null,d:E7,e:E7,f:wPe,g:TPe,G:LPe,H:vPe,I:yPe,j:bPe,L:OQ,m:jPe,M:NPe,p:Q,q:T,Q:L7,s:R7,S:_Pe,u:SPe,U:CPe,V:PPe,w:APe,W:kPe,x:null,X:null,y:EPe,Y:OPe,Z:RPe,"%":O7},A={a:B,A:H,b:ee,B:ce,c:null,d:T7,e:T7,f:FPe,g:GPe,G:QPe,H:DPe,I:IPe,j:MPe,L:RQ,m:BPe,M:$Pe,p:he,q:W,Q:L7,s:R7,S:qPe,u:zPe,U:UPe,V:VPe,w:HPe,W:WPe,x:null,X:null,y:KPe,Y:YPe,Z:XPe,"%":O7},P={a:U,A:D,b:M,B:G,c:Y,d:A7,e:A7,f:mPe,g:P7,G:C7,H:k7,I:k7,j:uPe,L:fPe,m:cPe,M:dPe,p:q,q:lPe,Q:gPe,s:xPe,S:hPe,u:rPe,U:sPe,V:iPe,w:nPe,W:aPe,x:Z,X,y:P7,Y:C7,Z:oPe,"%":pPe};S.x=L(r,S),S.X=L(s,S),S.c=L(n,S),A.x=L(r,A),A.X=L(s,A),A.c=L(n,A);function L(J,pe){return function(ue){var me=[],je=-1,ze=0,Te=J.length,xe,ht,gt;for(ue instanceof Date||(ue=new Date(+ue));++je<Te;)J.charCodeAt(je)===37&&(me.push(J.slice(ze,je)),(ht=S7[xe=J.charAt(++je)])!=null?xe=J.charAt(++je):ht=xe==="e"?" ":"0",(gt=pe[xe])&&(xe=gt(ue,ht)),me.push(xe),ze=je+1);return me.push(J.slice(ze,je)),me.join("")}}function O(J,pe){return function(ue){var me=ex(1900,void 0,1),je=R(me,J,ue+="",0),ze,Te;if(je!=ue.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(pe&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(ze=GC(ex(me.y,0,1)),Te=ze.getUTCDay(),ze=Te>4||Te===0?ww.ceil(ze):ww(ze),ze=uj.offset(ze,(me.V-1)*7),me.y=ze.getUTCFullYear(),me.m=ze.getUTCMonth(),me.d=ze.getUTCDate()+(me.w+6)%7):(ze=KC(ex(me.y,0,1)),Te=ze.getDay(),ze=Te>4||Te===0?bw.ceil(ze):bw(ze),ze=_y.offset(ze,(me.V-1)*7),me.y=ze.getFullYear(),me.m=ze.getMonth(),me.d=ze.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),Te="Z"in me?GC(ex(me.y,0,1)).getUTCDay():KC(ex(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(Te+5)%7:me.w+me.U*7-(Te+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,GC(me)):KC(me)}}function R(J,pe,ue,me){for(var je=0,ze=pe.length,Te=ue.length,xe,ht;je<ze;){if(me>=Te)return-1;if(xe=pe.charCodeAt(je++),xe===37){if(xe=pe.charAt(je++),ht=P[xe in S7?pe.charAt(je++):xe],!ht||(me=ht(J,ue,me))<0)return-1}else if(xe!=ue.charCodeAt(me++))return-1}return me}function q(J,pe,ue){var me=d.exec(pe.slice(ue));return me?(J.p=f.get(me[0].toLowerCase()),ue+me[0].length):-1}function U(J,pe,ue){var me=x.exec(pe.slice(ue));return me?(J.w=v.get(me[0].toLowerCase()),ue+me[0].length):-1}function D(J,pe,ue){var me=m.exec(pe.slice(ue));return me?(J.w=g.get(me[0].toLowerCase()),ue+me[0].length):-1}function M(J,pe,ue){var me=N.exec(pe.slice(ue));return me?(J.m=j.get(me[0].toLowerCase()),ue+me[0].length):-1}function G(J,pe,ue){var me=y.exec(pe.slice(ue));return me?(J.m=b.get(me[0].toLowerCase()),ue+me[0].length):-1}function Y(J,pe,ue){return R(J,n,pe,ue)}function Z(J,pe,ue){return R(J,r,pe,ue)}function X(J,pe,ue){return R(J,s,pe,ue)}function re(J){return l[J.getDay()]}function z(J){return o[J.getDay()]}function te(J){return u[J.getMonth()]}function le(J){return c[J.getMonth()]}function Q(J){return a[+(J.getHours()>=12)]}function T(J){return 1+~~(J.getMonth()/3)}function B(J){return l[J.getUTCDay()]}function H(J){return o[J.getUTCDay()]}function ee(J){return u[J.getUTCMonth()]}function ce(J){return c[J.getUTCMonth()]}function he(J){return a[+(J.getUTCHours()>=12)]}function W(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var pe=L(J+="",S);return pe.toString=function(){return J},pe},parse:function(J){var pe=O(J+="",!1);return pe.toString=function(){return J},pe},utcFormat:function(J){var pe=L(J+="",A);return pe.toString=function(){return J},pe},utcParse:function(J){var pe=O(J+="",!0);return pe.toString=function(){return J},pe}}}var S7={"-":"",_:" ",0:"0"},ti=/^\s*\d+/,ZCe=/^%/,ePe=/[\\^$*+?|[\]().{}]/g;function Kn(e,n,r){var s=e<0?"-":"",a=(s?-e:e)+"",o=a.length;return s+(o<r?new Array(r-o+1).join(n)+a:a)}function tPe(e){return e.replace(ePe,"\\$&")}function tx(e){return new RegExp("^(?:"+e.map(tPe).join("|")+")","i")}function nx(e){return new Map(e.map((n,r)=>[n.toLowerCase(),r]))}function nPe(e,n,r){var s=ti.exec(n.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function rPe(e,n,r){var s=ti.exec(n.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function sPe(e,n,r){var s=ti.exec(n.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function iPe(e,n,r){var s=ti.exec(n.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function aPe(e,n,r){var s=ti.exec(n.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function C7(e,n,r){var s=ti.exec(n.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function P7(e,n,r){var s=ti.exec(n.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function oPe(e,n,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function lPe(e,n,r){var s=ti.exec(n.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function cPe(e,n,r){var s=ti.exec(n.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function A7(e,n,r){var s=ti.exec(n.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function uPe(e,n,r){var s=ti.exec(n.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function k7(e,n,r){var s=ti.exec(n.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function dPe(e,n,r){var s=ti.exec(n.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function hPe(e,n,r){var s=ti.exec(n.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function fPe(e,n,r){var s=ti.exec(n.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function mPe(e,n,r){var s=ti.exec(n.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function pPe(e,n,r){var s=ZCe.exec(n.slice(r,r+1));return s?r+s[0].length:-1}function gPe(e,n,r){var s=ti.exec(n.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function xPe(e,n,r){var s=ti.exec(n.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function E7(e,n){return Kn(e.getDate(),n,2)}function vPe(e,n){return Kn(e.getHours(),n,2)}function yPe(e,n){return Kn(e.getHours()%12||12,n,2)}function bPe(e,n){return Kn(1+_y.count(Hu(e),e),n,3)}function OQ(e,n){return Kn(e.getMilliseconds(),n,3)}function wPe(e,n){return OQ(e,n)+"000"}function jPe(e,n){return Kn(e.getMonth()+1,n,2)}function NPe(e,n){return Kn(e.getMinutes(),n,2)}function _Pe(e,n){return Kn(e.getSeconds(),n,2)}function SPe(e){var n=e.getDay();return n===0?7:n}function CPe(e,n){return Kn(dj.count(Hu(e)-1,e),n,2)}function LQ(e){var n=e.getDay();return n>=4||n===0?Lg(e):Lg.ceil(e)}function PPe(e,n){return e=LQ(e),Kn(Lg.count(Hu(e),e)+(Hu(e).getDay()===4),n,2)}function APe(e){return e.getDay()}function kPe(e,n){return Kn(bw.count(Hu(e)-1,e),n,2)}function EPe(e,n){return Kn(e.getFullYear()%100,n,2)}function TPe(e,n){return e=LQ(e),Kn(e.getFullYear()%100,n,2)}function OPe(e,n){return Kn(e.getFullYear()%1e4,n,4)}function LPe(e,n){var r=e.getDay();return e=r>=4||r===0?Lg(e):Lg.ceil(e),Kn(e.getFullYear()%1e4,n,4)}function RPe(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Kn(n/60|0,"0",2)+Kn(n%60,"0",2)}function T7(e,n){return Kn(e.getUTCDate(),n,2)}function DPe(e,n){return Kn(e.getUTCHours(),n,2)}function IPe(e,n){return Kn(e.getUTCHours()%12||12,n,2)}function MPe(e,n){return Kn(1+uj.count(Wu(e),e),n,3)}function RQ(e,n){return Kn(e.getUTCMilliseconds(),n,3)}function FPe(e,n){return RQ(e,n)+"000"}function BPe(e,n){return Kn(e.getUTCMonth()+1,n,2)}function $Pe(e,n){return Kn(e.getUTCMinutes(),n,2)}function qPe(e,n){return Kn(e.getUTCSeconds(),n,2)}function zPe(e){var n=e.getUTCDay();return n===0?7:n}function UPe(e,n){return Kn(hj.count(Wu(e)-1,e),n,2)}function DQ(e){var n=e.getUTCDay();return n>=4||n===0?Rg(e):Rg.ceil(e)}function VPe(e,n){return e=DQ(e),Kn(Rg.count(Wu(e),e)+(Wu(e).getUTCDay()===4),n,2)}function HPe(e){return e.getUTCDay()}function WPe(e,n){return Kn(ww.count(Wu(e)-1,e),n,2)}function KPe(e,n){return Kn(e.getUTCFullYear()%100,n,2)}function GPe(e,n){return e=DQ(e),Kn(e.getUTCFullYear()%100,n,2)}function YPe(e,n){return Kn(e.getUTCFullYear()%1e4,n,4)}function QPe(e,n){var r=e.getUTCDay();return e=r>=4||r===0?Rg(e):Rg.ceil(e),Kn(e.getUTCFullYear()%1e4,n,4)}function XPe(){return"+0000"}function O7(){return"%"}function L7(e){return+e}function R7(e){return Math.floor(+e/1e3)}var kp,IQ,MQ;JPe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function JPe(e){return kp=JCe(e),IQ=kp.format,kp.parse,MQ=kp.utcFormat,kp.utcParse,kp}function ZPe(e){return new Date(e)}function eAe(e){return e instanceof Date?+e:+new Date(+e)}function jT(e,n,r,s,a,o,l,c,u,d){var f=lT(),m=f.invert,g=f.domain,x=d(".%L"),v=d(":%S"),y=d("%I:%M"),b=d("%I %p"),N=d("%a %d"),j=d("%b %d"),S=d("%B"),A=d("%Y");function P(L){return(u(L)<L?x:c(L)<L?v:l(L)<L?y:o(L)<L?b:s(L)<L?a(L)<L?N:j:r(L)<L?S:A)(L)}return f.invert=function(L){return new Date(m(L))},f.domain=function(L){return arguments.length?g(Array.from(L,eAe)):g().map(ZPe)},f.ticks=function(L){var O=g();return e(O[0],O[O.length-1],L??10)},f.tickFormat=function(L,O){return O==null?P:d(O)},f.nice=function(L){var O=g();return(!L||typeof L.range!="function")&&(L=n(O[0],O[O.length-1],L??10)),L?g(NQ(O,L)):f},f.copy=function(){return Ny(f,jT(e,n,r,s,a,o,l,c,u,d))},f}function tAe(){return Vo.apply(jT(QCe,XCe,Hu,bT,dj,_y,vT,gT,Hf,IQ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nAe(){return Vo.apply(jT(GCe,YCe,Wu,wT,hj,uj,yT,xT,Hf,MQ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function fj(){var e=0,n=1,r,s,a,o,l=da,c=!1,u;function d(m){return m==null||isNaN(m=+m)?u:l(a===0?.5:(m=(o(m)-r)*a,c?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,n]=m,r=o(e=+e),s=o(n=+n),a=r===s?0:1/(s-r),d):[e,n]},d.clamp=function(m){return arguments.length?(c=!!m,d):c},d.interpolator=function(m){return arguments.length?(l=m,d):l};function f(m){return function(g){var x,v;return arguments.length?([x,v]=g,l=m(x,v),d):[l(0),l(1)]}}return d.range=f(m0),d.rangeRound=f(oT),d.unknown=function(m){return arguments.length?(u=m,d):u},function(m){return o=m,r=m(e),s=m(n),a=r===s?0:1/(s-r),d}}function Yh(e,n){return n.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function FQ(){var e=Gh(fj()(da));return e.copy=function(){return Yh(e,FQ())},Qu.apply(e,arguments)}function BQ(){var e=dT(fj()).domain([1,10]);return e.copy=function(){return Yh(e,BQ()).base(e.base())},Qu.apply(e,arguments)}function $Q(){var e=hT(fj());return e.copy=function(){return Yh(e,$Q()).constant(e.constant())},Qu.apply(e,arguments)}function NT(){var e=fT(fj());return e.copy=function(){return Yh(e,NT()).exponent(e.exponent())},Qu.apply(e,arguments)}function rAe(){return NT.apply(null,arguments).exponent(.5)}function qQ(){var e=[],n=da;function r(s){if(s!=null&&!isNaN(s=+s))return n((wy(e,s,1)-1)/(e.length-1))}return r.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(xh),r},r.interpolator=function(s){return arguments.length?(n=s,r):n},r.range=function(){return e.map((s,a)=>n(a/(e.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(a,o)=>USe(e,o/s))},r.copy=function(){return qQ(n).domain(e)},Qu.apply(r,arguments)}function mj(){var e=0,n=.5,r=1,s=1,a,o,l,c,u,d=da,f,m=!1,g;function x(y){return isNaN(y=+y)?g:(y=.5+((y=+f(y))-o)*(s*y<s*o?c:u),d(m?Math.max(0,Math.min(1,y)):y))}x.domain=function(y){return arguments.length?([e,n,r]=y,a=f(e=+e),o=f(n=+n),l=f(r=+r),c=a===o?0:.5/(o-a),u=o===l?0:.5/(l-o),s=o<a?-1:1,x):[e,n,r]},x.clamp=function(y){return arguments.length?(m=!!y,x):m},x.interpolator=function(y){return arguments.length?(d=y,x):d};function v(y){return function(b){var N,j,S;return arguments.length?([N,j,S]=b,d=pCe(y,[N,j,S]),x):[d(0),d(.5),d(1)]}}return x.range=v(m0),x.rangeRound=v(oT),x.unknown=function(y){return arguments.length?(g=y,x):g},function(y){return f=y,a=y(e),o=y(n),l=y(r),c=a===o?0:.5/(o-a),u=o===l?0:.5/(l-o),s=o<a?-1:1,x}}function zQ(){var e=Gh(mj()(da));return e.copy=function(){return Yh(e,zQ())},Qu.apply(e,arguments)}function UQ(){var e=dT(mj()).domain([.1,1,10]);return e.copy=function(){return Yh(e,UQ()).base(e.base())},Qu.apply(e,arguments)}function VQ(){var e=hT(mj());return e.copy=function(){return Yh(e,VQ()).constant(e.constant())},Qu.apply(e,arguments)}function _T(){var e=fT(mj());return e.copy=function(){return Yh(e,_T()).exponent(e.exponent())},Qu.apply(e,arguments)}function sAe(){return _T.apply(null,arguments).exponent(.5)}const D7=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:gv,scaleDiverging:zQ,scaleDivergingLog:UQ,scaleDivergingPow:_T,scaleDivergingSqrt:sAe,scaleDivergingSymlog:VQ,scaleIdentity:jQ,scaleImplicit:Ik,scaleLinear:vw,scaleLog:_Q,scaleOrdinal:sT,scalePoint:Bx,scalePow:mT,scaleQuantile:PQ,scaleQuantize:AQ,scaleRadial:CQ,scaleSequential:FQ,scaleSequentialLog:BQ,scaleSequentialPow:NT,scaleSequentialQuantile:qQ,scaleSequentialSqrt:rAe,scaleSequentialSymlog:$Q,scaleSqrt:FCe,scaleSymlog:SQ,scaleThreshold:kQ,scaleTime:tAe,scaleUtc:nAe,tickFormat:wQ},Symbol.toStringTag,{value:"Module"}));var YC,I7;function HQ(){if(I7)return YC;I7=1;var e=d0();function n(r,s,a){for(var o=-1,l=r.length;++o<l;){var c=r[o],u=s(c);if(u!=null&&(d===void 0?u===u&&!e(u):a(u,d)))var d=u,f=c}return f}return YC=n,YC}var QC,M7;function iAe(){if(M7)return QC;M7=1;function e(n,r){return n>r}return QC=e,QC}var XC,F7;function aAe(){if(F7)return XC;F7=1;var e=HQ(),n=iAe(),r=f0();function s(a){return a&&a.length?e(a,r,n):void 0}return XC=s,XC}var oAe=aAe();const pj=ur(oAe);var JC,B7;function lAe(){if(B7)return JC;B7=1;function e(n,r){return n<r}return JC=e,JC}var ZC,$7;function cAe(){if($7)return ZC;$7=1;var e=HQ(),n=lAe(),r=f0();function s(a){return a&&a.length?e(a,r,n):void 0}return ZC=s,ZC}var uAe=cAe();const gj=ur(uAe);var eP,q7;function dAe(){if(q7)return eP;q7=1;var e=$3(),n=Kh(),r=ZY(),s=$a();function a(o,l){var c=s(o)?e:r;return c(o,n(l,3))}return eP=a,eP}var tP,z7;function hAe(){if(z7)return tP;z7=1;var e=XY(),n=dAe();function r(s,a){return e(n(s,a),1)}return tP=r,tP}var fAe=hAe();const mAe=ur(fAe);var nP,U7;function pAe(){if(U7)return nP;U7=1;var e=Z3();function n(r,s){return e(r,s)}return nP=n,nP}var gAe=pAe();const ST=ur(gAe);var p0=1e9,xAe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},PT,qr=!0,zo="[DecimalError] ",cm=zo+"Invalid argument: ",CT=zo+"Exponent out of range: ",g0=Math.floor,Mf=Math.pow,vAe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,so,Xs=1e7,Lr=7,WQ=9007199254740991,jw=g0(WQ/Lr),Et={};Et.absoluteValue=Et.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Et.comparedTo=Et.cmp=function(e){var n,r,s,a,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(s=o.d.length,a=e.d.length,n=0,r=s<a?s:a;n<r;++n)if(o.d[n]!==e.d[n])return o.d[n]>e.d[n]^o.s<0?1:-1;return s===a?0:s>a^o.s<0?1:-1};Et.decimalPlaces=Et.dp=function(){var e=this,n=e.d.length-1,r=(n-e.e)*Lr;if(n=e.d[n],n)for(;n%10==0;n/=10)r--;return r<0?0:r};Et.dividedBy=Et.div=function(e){return Fu(this,new this.constructor(e))};Et.dividedToIntegerBy=Et.idiv=function(e){var n=this,r=n.constructor;return jr(Fu(n,new r(e),0,1),r.precision)};Et.equals=Et.eq=function(e){return!this.cmp(e)};Et.exponent=function(){return Cs(this)};Et.greaterThan=Et.gt=function(e){return this.cmp(e)>0};Et.greaterThanOrEqualTo=Et.gte=function(e){return this.cmp(e)>=0};Et.isInteger=Et.isint=function(){return this.e>this.d.length-2};Et.isNegative=Et.isneg=function(){return this.s<0};Et.isPositive=Et.ispos=function(){return this.s>0};Et.isZero=function(){return this.s===0};Et.lessThan=Et.lt=function(e){return this.cmp(e)<0};Et.lessThanOrEqualTo=Et.lte=function(e){return this.cmp(e)<1};Et.logarithm=Et.log=function(e){var n,r=this,s=r.constructor,a=s.precision,o=a+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(so))throw Error(zo+"NaN");if(r.s<1)throw Error(zo+(r.s?"NaN":"-Infinity"));return r.eq(so)?new s(0):(qr=!1,n=Fu(wv(r,o),wv(e,o),o),qr=!0,jr(n,a))};Et.minus=Et.sub=function(e){var n=this;return e=new n.constructor(e),n.s==e.s?YQ(n,e):KQ(n,(e.s=-e.s,e))};Et.modulo=Et.mod=function(e){var n,r=this,s=r.constructor,a=s.precision;if(e=new s(e),!e.s)throw Error(zo+"NaN");return r.s?(qr=!1,n=Fu(r,e,0,1).times(e),qr=!0,r.minus(n)):jr(new s(r),a)};Et.naturalExponential=Et.exp=function(){return GQ(this)};Et.naturalLogarithm=Et.ln=function(){return wv(this)};Et.negated=Et.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Et.plus=Et.add=function(e){var n=this;return e=new n.constructor(e),n.s==e.s?KQ(n,e):YQ(n,(e.s=-e.s,e))};Et.precision=Et.sd=function(e){var n,r,s,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(cm+e);if(n=Cs(a)+1,s=a.d.length-1,r=s*Lr+1,s=a.d[s],s){for(;s%10==0;s/=10)r--;for(s=a.d[0];s>=10;s/=10)r++}return e&&n>r?n:r};Et.squareRoot=Et.sqrt=function(){var e,n,r,s,a,o,l,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(zo+"NaN")}for(e=Cs(c),qr=!1,a=Math.sqrt(+c),a==0||a==1/0?(n=vc(c.d),(n.length+e)%2==0&&(n+="0"),a=Math.sqrt(n),e=g0((e+1)/2)-(e<0||e%2),a==1/0?n="5e"+e:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),s=new u(n)):s=new u(a.toString()),r=u.precision,a=l=r+3;;)if(o=s,s=o.plus(Fu(c,o,l+2)).times(.5),vc(o.d).slice(0,l)===(n=vc(s.d)).slice(0,l)){if(n=n.slice(l-3,l+1),a==l&&n=="4999"){if(jr(o,r+1,0),o.times(o).eq(c)){s=o;break}}else if(n!="9999")break;l+=4}return qr=!0,jr(s,r)};Et.times=Et.mul=function(e){var n,r,s,a,o,l,c,u,d,f=this,m=f.constructor,g=f.d,x=(e=new m(e)).d;if(!f.s||!e.s)return new m(0);for(e.s*=f.s,r=f.e+e.e,u=g.length,d=x.length,u<d&&(o=g,g=x,x=o,l=u,u=d,d=l),o=[],l=u+d,s=l;s--;)o.push(0);for(s=d;--s>=0;){for(n=0,a=u+s;a>s;)c=o[a]+x[s]*g[a-s-1]+n,o[a--]=c%Xs|0,n=c/Xs|0;o[a]=(o[a]+n)%Xs|0}for(;!o[--l];)o.pop();return n?++r:o.shift(),e.d=o,e.e=r,qr?jr(e,m.precision):e};Et.toDecimalPlaces=Et.todp=function(e,n){var r=this,s=r.constructor;return r=new s(r),e===void 0?r:(Oc(e,0,p0),n===void 0?n=s.rounding:Oc(n,0,8),jr(r,e+Cs(r)+1,n))};Et.toExponential=function(e,n){var r,s=this,a=s.constructor;return e===void 0?r=Am(s,!0):(Oc(e,0,p0),n===void 0?n=a.rounding:Oc(n,0,8),s=jr(new a(s),e+1,n),r=Am(s,!0,e+1)),r};Et.toFixed=function(e,n){var r,s,a=this,o=a.constructor;return e===void 0?Am(a):(Oc(e,0,p0),n===void 0?n=o.rounding:Oc(n,0,8),s=jr(new o(a),e+Cs(a)+1,n),r=Am(s.abs(),!1,e+Cs(s)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Et.toInteger=Et.toint=function(){var e=this,n=e.constructor;return jr(new n(e),Cs(e)+1,n.rounding)};Et.toNumber=function(){return+this};Et.toPower=Et.pow=function(e){var n,r,s,a,o,l,c=this,u=c.constructor,d=12,f=+(e=new u(e));if(!e.s)return new u(so);if(c=new u(c),!c.s){if(e.s<1)throw Error(zo+"Infinity");return c}if(c.eq(so))return c;if(s=u.precision,e.eq(so))return jr(c,s);if(n=e.e,r=e.d.length-1,l=n>=r,o=c.s,l){if((r=f<0?-f:f)<=WQ){for(a=new u(so),n=Math.ceil(s/Lr+4),qr=!1;r%2&&(a=a.times(c),H7(a.d,n)),r=g0(r/2),r!==0;)c=c.times(c),H7(c.d,n);return qr=!0,e.s<0?new u(so).div(a):jr(a,s)}}else if(o<0)throw Error(zo+"NaN");return o=o<0&&e.d[Math.max(n,r)]&1?-1:1,c.s=1,qr=!1,a=e.times(wv(c,s+d)),qr=!0,a=GQ(a),a.s=o,a};Et.toPrecision=function(e,n){var r,s,a=this,o=a.constructor;return e===void 0?(r=Cs(a),s=Am(a,r<=o.toExpNeg||r>=o.toExpPos)):(Oc(e,1,p0),n===void 0?n=o.rounding:Oc(n,0,8),a=jr(new o(a),e,n),r=Cs(a),s=Am(a,e<=r||r<=o.toExpNeg,e)),s};Et.toSignificantDigits=Et.tosd=function(e,n){var r=this,s=r.constructor;return e===void 0?(e=s.precision,n=s.rounding):(Oc(e,1,p0),n===void 0?n=s.rounding:Oc(n,0,8)),jr(new s(r),e,n)};Et.toString=Et.valueOf=Et.val=Et.toJSON=Et[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,n=Cs(e),r=e.constructor;return Am(e,n<=r.toExpNeg||n>=r.toExpPos)};function KQ(e,n){var r,s,a,o,l,c,u,d,f=e.constructor,m=f.precision;if(!e.s||!n.s)return n.s||(n=new f(e)),qr?jr(n,m):n;if(u=e.d,d=n.d,l=e.e,a=n.e,u=u.slice(),o=l-a,o){for(o<0?(s=u,o=-o,c=d.length):(s=d,a=l,c=u.length),l=Math.ceil(m/Lr),c=l>c?l+1:c+1,o>c&&(o=c,s.length=1),s.reverse();o--;)s.push(0);s.reverse()}for(c=u.length,o=d.length,c-o<0&&(o=c,s=d,d=u,u=s),r=0;o;)r=(u[--o]=u[o]+d[o]+r)/Xs|0,u[o]%=Xs;for(r&&(u.unshift(r),++a),c=u.length;u[--c]==0;)u.pop();return n.d=u,n.e=a,qr?jr(n,m):n}function Oc(e,n,r){if(e!==~~e||e<n||e>r)throw Error(cm+e)}function vc(e){var n,r,s,a=e.length-1,o="",l=e[0];if(a>0){for(o+=l,n=1;n<a;n++)s=e[n]+"",r=Lr-s.length,r&&(o+=Qd(r)),o+=s;l=e[n],s=l+"",r=Lr-s.length,r&&(o+=Qd(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}var Fu=(function(){function e(s,a){var o,l=0,c=s.length;for(s=s.slice();c--;)o=s[c]*a+l,s[c]=o%Xs|0,l=o/Xs|0;return l&&s.unshift(l),s}function n(s,a,o,l){var c,u;if(o!=l)u=o>l?1:-1;else for(c=u=0;c<o;c++)if(s[c]!=a[c]){u=s[c]>a[c]?1:-1;break}return u}function r(s,a,o){for(var l=0;o--;)s[o]-=l,l=s[o]<a[o]?1:0,s[o]=l*Xs+s[o]-a[o];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,o,l){var c,u,d,f,m,g,x,v,y,b,N,j,S,A,P,L,O,R,q=s.constructor,U=s.s==a.s?1:-1,D=s.d,M=a.d;if(!s.s)return new q(s);if(!a.s)throw Error(zo+"Division by zero");for(u=s.e-a.e,O=M.length,P=D.length,x=new q(U),v=x.d=[],d=0;M[d]==(D[d]||0);)++d;if(M[d]>(D[d]||0)&&--u,o==null?j=o=q.precision:l?j=o+(Cs(s)-Cs(a))+1:j=o,j<0)return new q(0);if(j=j/Lr+2|0,d=0,O==1)for(f=0,M=M[0],j++;(d<P||f)&&j--;d++)S=f*Xs+(D[d]||0),v[d]=S/M|0,f=S%M|0;else{for(f=Xs/(M[0]+1)|0,f>1&&(M=e(M,f),D=e(D,f),O=M.length,P=D.length),A=O,y=D.slice(0,O),b=y.length;b<O;)y[b++]=0;R=M.slice(),R.unshift(0),L=M[0],M[1]>=Xs/2&&++L;do f=0,c=n(M,y,O,b),c<0?(N=y[0],O!=b&&(N=N*Xs+(y[1]||0)),f=N/L|0,f>1?(f>=Xs&&(f=Xs-1),m=e(M,f),g=m.length,b=y.length,c=n(m,y,g,b),c==1&&(f--,r(m,O<g?R:M,g))):(f==0&&(c=f=1),m=M.slice()),g=m.length,g<b&&m.unshift(0),r(y,m,b),c==-1&&(b=y.length,c=n(M,y,O,b),c<1&&(f++,r(y,O<b?R:M,b))),b=y.length):c===0&&(f++,y=[0]),v[d++]=f,c&&y[0]?y[b++]=D[A]||0:(y=[D[A]],b=1);while((A++<P||y[0]!==void 0)&&j--)}return v[0]||v.shift(),x.e=u,jr(x,l?o+Cs(x)+1:o)}})();function GQ(e,n){var r,s,a,o,l,c,u=0,d=0,f=e.constructor,m=f.precision;if(Cs(e)>16)throw Error(CT+Cs(e));if(!e.s)return new f(so);for(qr=!1,c=m,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(s=Math.log(Mf(2,d))/Math.LN10*2+5|0,c+=s,r=a=o=new f(so),f.precision=c;;){if(a=jr(a.times(e),c),r=r.times(++u),l=o.plus(Fu(a,r,c)),vc(l.d).slice(0,c)===vc(o.d).slice(0,c)){for(;d--;)o=jr(o.times(o),c);return f.precision=m,n==null?(qr=!0,jr(o,m)):o}o=l}}function Cs(e){for(var n=e.e*Lr,r=e.d[0];r>=10;r/=10)n++;return n}function rP(e,n,r){if(n>e.LN10.sd())throw qr=!0,r&&(e.precision=r),Error(zo+"LN10 precision limit exceeded");return jr(new e(e.LN10),n)}function Qd(e){for(var n="";e--;)n+="0";return n}function wv(e,n){var r,s,a,o,l,c,u,d,f,m=1,g=10,x=e,v=x.d,y=x.constructor,b=y.precision;if(x.s<1)throw Error(zo+(x.s?"NaN":"-Infinity"));if(x.eq(so))return new y(0);if(n==null?(qr=!1,d=b):d=n,x.eq(10))return n==null&&(qr=!0),rP(y,d);if(d+=g,y.precision=d,r=vc(v),s=r.charAt(0),o=Cs(x),Math.abs(o)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)x=x.times(e),r=vc(x.d),s=r.charAt(0),m++;o=Cs(x),s>1?(x=new y("0."+r),o++):x=new y(s+"."+r.slice(1))}else return u=rP(y,d+2,b).times(o+""),x=wv(new y(s+"."+r.slice(1)),d-g).plus(u),y.precision=b,n==null?(qr=!0,jr(x,b)):x;for(c=l=x=Fu(x.minus(so),x.plus(so),d),f=jr(x.times(x),d),a=3;;){if(l=jr(l.times(f),d),u=c.plus(Fu(l,new y(a),d)),vc(u.d).slice(0,d)===vc(c.d).slice(0,d))return c=c.times(2),o!==0&&(c=c.plus(rP(y,d+2,b).times(o+""))),c=Fu(c,new y(m),d),y.precision=b,n==null?(qr=!0,jr(c,b)):c;c=u,a+=2}}function V7(e,n){var r,s,a;for((r=n.indexOf("."))>-1&&(n=n.replace(".","")),(s=n.search(/e/i))>0?(r<0&&(r=s),r+=+n.slice(s+1),n=n.substring(0,s)):r<0&&(r=n.length),s=0;n.charCodeAt(s)===48;)++s;for(a=n.length;n.charCodeAt(a-1)===48;)--a;if(n=n.slice(s,a),n){if(a-=s,r=r-s-1,e.e=g0(r/Lr),e.d=[],s=(r+1)%Lr,r<0&&(s+=Lr),s<a){for(s&&e.d.push(+n.slice(0,s)),a-=Lr;s<a;)e.d.push(+n.slice(s,s+=Lr));n=n.slice(s),s=Lr-n.length}else s-=a;for(;s--;)n+="0";if(e.d.push(+n),qr&&(e.e>jw||e.e<-jw))throw Error(CT+r)}else e.s=0,e.e=0,e.d=[0];return e}function jr(e,n,r){var s,a,o,l,c,u,d,f,m=e.d;for(l=1,o=m[0];o>=10;o/=10)l++;if(s=n-l,s<0)s+=Lr,a=n,d=m[f=0];else{if(f=Math.ceil((s+1)/Lr),o=m.length,f>=o)return e;for(d=o=m[f],l=1;o>=10;o/=10)l++;s%=Lr,a=s-Lr+l}if(r!==void 0&&(o=Mf(10,l-a-1),c=d/o%10|0,u=n<0||m[f+1]!==void 0||d%o,u=r<4?(c||u)&&(r==0||r==(e.s<0?3:2)):c>5||c==5&&(r==4||u||r==6&&(s>0?a>0?d/Mf(10,l-a):0:m[f-1])%10&1||r==(e.s<0?8:7))),n<1||!m[0])return u?(o=Cs(e),m.length=1,n=n-o-1,m[0]=Mf(10,(Lr-n%Lr)%Lr),e.e=g0(-n/Lr)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(s==0?(m.length=f,o=1,f--):(m.length=f+1,o=Mf(10,Lr-s),m[f]=a>0?(d/Mf(10,l-a)%Mf(10,a)|0)*o:0),u)for(;;)if(f==0){(m[0]+=o)==Xs&&(m[0]=1,++e.e);break}else{if(m[f]+=o,m[f]!=Xs)break;m[f--]=0,o=1}for(s=m.length;m[--s]===0;)m.pop();if(qr&&(e.e>jw||e.e<-jw))throw Error(CT+Cs(e));return e}function YQ(e,n){var r,s,a,o,l,c,u,d,f,m,g=e.constructor,x=g.precision;if(!e.s||!n.s)return n.s?n.s=-n.s:n=new g(e),qr?jr(n,x):n;if(u=e.d,m=n.d,s=n.e,d=e.e,u=u.slice(),l=d-s,l){for(f=l<0,f?(r=u,l=-l,c=m.length):(r=m,s=d,c=u.length),a=Math.max(Math.ceil(x/Lr),c)+2,l>a&&(l=a,r.length=1),r.reverse(),a=l;a--;)r.push(0);r.reverse()}else{for(a=u.length,c=m.length,f=a<c,f&&(c=a),a=0;a<c;a++)if(u[a]!=m[a]){f=u[a]<m[a];break}l=0}for(f&&(r=u,u=m,m=r,n.s=-n.s),c=u.length,a=m.length-c;a>0;--a)u[c++]=0;for(a=m.length;a>l;){if(u[--a]<m[a]){for(o=a;o&&u[--o]===0;)u[o]=Xs-1;--u[o],u[a]+=Xs}u[a]-=m[a]}for(;u[--c]===0;)u.pop();for(;u[0]===0;u.shift())--s;return u[0]?(n.d=u,n.e=s,qr?jr(n,x):n):new g(0)}function Am(e,n,r){var s,a=Cs(e),o=vc(e.d),l=o.length;return n?(r&&(s=r-l)>0?o=o.charAt(0)+"."+o.slice(1)+Qd(s):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(a<0?"e":"e+")+a):a<0?(o="0."+Qd(-a-1)+o,r&&(s=r-l)>0&&(o+=Qd(s))):a>=l?(o+=Qd(a+1-l),r&&(s=r-a-1)>0&&(o=o+"."+Qd(s))):((s=a+1)<l&&(o=o.slice(0,s)+"."+o.slice(s)),r&&(s=r-l)>0&&(a+1===l&&(o+="."),o+=Qd(s))),e.s<0?"-"+o:o}function H7(e,n){if(e.length>n)return e.length=n,!0}function QQ(e){var n,r,s;function a(o){var l=this;if(!(l instanceof a))return new a(o);if(l.constructor=a,o instanceof a){l.s=o.s,l.e=o.e,l.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(cm+o);if(o>0)l.s=1;else if(o<0)o=-o,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(o===~~o&&o<1e7){l.e=0,l.d=[o];return}return V7(l,o.toString())}else if(typeof o!="string")throw Error(cm+o);if(o.charCodeAt(0)===45?(o=o.slice(1),l.s=-1):l.s=1,vAe.test(o))V7(l,o);else throw Error(cm+o)}if(a.prototype=Et,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=QQ,a.config=a.set=yAe,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<s.length;)e.hasOwnProperty(r=s[n++])||(e[r]=this[r]);return a.config(e),a}function yAe(e){if(!e||typeof e!="object")throw Error(zo+"Object expected");var n,r,s,a=["precision",1,p0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(n=0;n<a.length;n+=3)if((s=e[r=a[n]])!==void 0)if(g0(s)===s&&s>=a[n+1]&&s<=a[n+2])this[r]=s;else throw Error(cm+r+": "+s);if((s=e[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(cm+r+": "+s);return this}var PT=QQ(xAe);so=new PT(1);const gr=PT;function bAe(e){return _Ae(e)||NAe(e)||jAe(e)||wAe()}function wAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jAe(e,n){if(e){if(typeof e=="string")return $k(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $k(e,n)}}function NAe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function _Ae(e){if(Array.isArray(e))return $k(e)}function $k(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}var SAe=function(n){return n},XQ={},JQ=function(n){return n===XQ},W7=function(n){return function r(){return arguments.length===0||arguments.length===1&&JQ(arguments.length<=0?void 0:arguments[0])?r:n.apply(void 0,arguments)}},CAe=function e(n,r){return n===1?r:W7(function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];var l=a.filter(function(c){return c!==XQ}).length;return l>=n?r.apply(void 0,a):e(n-l,W7(function(){for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];var f=a.map(function(m){return JQ(m)?u.shift():m});return r.apply(void 0,bAe(f).concat(u))}))})},xj=function(n){return CAe(n.length,n)},qk=function(n,r){for(var s=[],a=n;a<r;++a)s[a-n]=a;return s},PAe=xj(function(e,n){return Array.isArray(n)?n.map(e):Object.keys(n).map(function(r){return n[r]}).map(e)}),AAe=function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];if(!r.length)return SAe;var a=r.reverse(),o=a[0],l=a.slice(1);return function(){return l.reduce(function(c,u){return u(c)},o.apply(void 0,arguments))}},zk=function(n){return Array.isArray(n)?n.reverse():n.split("").reverse.join("")},ZQ=function(n){var r=null,s=null;return function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return r&&o.every(function(c,u){return c===r[u]})||(r=o,s=n.apply(void 0,o)),s}};function kAe(e){var n;return e===0?n=1:n=Math.floor(new gr(e).abs().log(10).toNumber())+1,n}function EAe(e,n,r){for(var s=new gr(e),a=0,o=[];s.lt(n)&&a<1e5;)o.push(s.toNumber()),s=s.add(r),a++;return o}var TAe=xj(function(e,n,r){var s=+e,a=+n;return s+r*(a-s)}),OAe=xj(function(e,n,r){var s=n-+e;return s=s||1/0,(r-e)/s}),LAe=xj(function(e,n,r){var s=n-+e;return s=s||1/0,Math.max(0,Math.min(1,(r-e)/s))});const vj={rangeStep:EAe,getDigitCount:kAe,interpolateNumber:TAe,uninterpolateNumber:OAe,uninterpolateTruncation:LAe};function Uk(e){return IAe(e)||DAe(e)||eX(e)||RAe()}function RAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DAe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function IAe(e){if(Array.isArray(e))return Vk(e)}function jv(e,n){return BAe(e)||FAe(e,n)||eX(e,n)||MAe()}function MAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eX(e,n){if(e){if(typeof e=="string")return Vk(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vk(e,n)}}function Vk(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function FAe(e,n){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],s=!0,a=!1,o=void 0;try{for(var l=e[Symbol.iterator](),c;!(s=(c=l.next()).done)&&(r.push(c.value),!(n&&r.length===n));s=!0);}catch(u){a=!0,o=u}finally{try{!s&&l.return!=null&&l.return()}finally{if(a)throw o}}return r}}function BAe(e){if(Array.isArray(e))return e}function tX(e){var n=jv(e,2),r=n[0],s=n[1],a=r,o=s;return r>s&&(a=s,o=r),[a,o]}function nX(e,n,r){if(e.lte(0))return new gr(0);var s=vj.getDigitCount(e.toNumber()),a=new gr(10).pow(s),o=e.div(a),l=s!==1?.05:.1,c=new gr(Math.ceil(o.div(l).toNumber())).add(r).mul(l),u=c.mul(a);return n?u:new gr(Math.ceil(u))}function $Ae(e,n,r){var s=1,a=new gr(e);if(!a.isint()&&r){var o=Math.abs(e);o<1?(s=new gr(10).pow(vj.getDigitCount(e)-1),a=new gr(Math.floor(a.div(s).toNumber())).mul(s)):o>1&&(a=new gr(Math.floor(e)))}else e===0?a=new gr(Math.floor((n-1)/2)):r||(a=new gr(Math.floor(e)));var l=Math.floor((n-1)/2),c=AAe(PAe(function(u){return a.add(new gr(u-l).mul(s)).toNumber()}),qk);return c(0,n)}function rX(e,n,r,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new gr(0),tickMin:new gr(0),tickMax:new gr(0)};var o=nX(new gr(n).sub(e).div(r-1),s,a),l;e<=0&&n>=0?l=new gr(0):(l=new gr(e).add(n).div(2),l=l.sub(new gr(l).mod(o)));var c=Math.ceil(l.sub(e).div(o).toNumber()),u=Math.ceil(new gr(n).sub(l).div(o).toNumber()),d=c+u+1;return d>r?rX(e,n,r,s,a+1):(d<r&&(u=n>0?u+(r-d):u,c=n>0?c:c+(r-d)),{step:o,tickMin:l.sub(new gr(c).mul(o)),tickMax:l.add(new gr(u).mul(o))})}function qAe(e){var n=jv(e,2),r=n[0],s=n[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(a,2),c=tX([r,s]),u=jv(c,2),d=u[0],f=u[1];if(d===-1/0||f===1/0){var m=f===1/0?[d].concat(Uk(qk(0,a-1).map(function(){return 1/0}))):[].concat(Uk(qk(0,a-1).map(function(){return-1/0})),[f]);return r>s?zk(m):m}if(d===f)return $Ae(d,a,o);var g=rX(d,f,l,o),x=g.step,v=g.tickMin,y=g.tickMax,b=vj.rangeStep(v,y.add(new gr(.1).mul(x)),x);return r>s?zk(b):b}function zAe(e,n){var r=jv(e,2),s=r[0],a=r[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=tX([s,a]),c=jv(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0)return[s,a];if(u===d)return[u];var f=Math.max(n,2),m=nX(new gr(d).sub(u).div(f-1),o,0),g=[].concat(Uk(vj.rangeStep(new gr(u),new gr(d).sub(new gr(.99).mul(m)),m)),[d]);return s>a?zk(g):g}var UAe=ZQ(qAe),VAe=ZQ(zAe),HAe="Invariant failed";function km(e,n){throw new Error(HAe)}var WAe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Dg(e)}function Nw(){return Nw=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Nw.apply(this,arguments)}function KAe(e,n){return XAe(e)||QAe(e,n)||YAe(e,n)||GAe()}function GAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YAe(e,n){if(e){if(typeof e=="string")return K7(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K7(e,n)}}function K7(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function QAe(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,o,l,c=[],u=!0,d=!1;try{if(o=(r=r.call(e)).next,n!==0)for(;!(u=(s=o.call(r)).done)&&(c.push(s.value),c.length!==n);u=!0);}catch(f){d=!0,a=f}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}function XAe(e){if(Array.isArray(e))return e}function JAe(e,n){if(e==null)return{};var r=ZAe(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function ZAe(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}function eke(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function tke(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,aX(s.key),s)}}function nke(e,n,r){return n&&tke(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rke(e,n,r){return n=_w(n),ske(e,sX()?Reflect.construct(n,r||[],_w(e).constructor):n.apply(e,r))}function ske(e,n){if(n&&(Dg(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ike(e)}function ike(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sX=function(){return!!e})()}function _w(e){return _w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_w(e)}function ake(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&Hk(e,n)}function Hk(e,n){return Hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Hk(e,n)}function iX(e,n,r){return n=aX(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function aX(e){var n=oke(e,"string");return Dg(n)=="symbol"?n:n+""}function oke(e,n){if(Dg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Dg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yj=(function(e){function n(){return eke(this,n),rke(this,n,arguments)}return ake(n,e),nke(n,[{key:"render",value:function(){var s=this.props,a=s.offset,o=s.layout,l=s.width,c=s.dataKey,u=s.data,d=s.dataPointFormatter,f=s.xAxis,m=s.yAxis,g=JAe(s,WAe),x=Zn(g,!1);this.props.direction==="x"&&f.type!=="number"&&km();var v=u.map(function(y){var b=d(y,c),N=b.x,j=b.y,S=b.value,A=b.errorVal;if(!A)return null;var P=[],L,O;if(Array.isArray(A)){var R=KAe(A,2);L=R[0],O=R[1]}else L=O=A;if(o==="vertical"){var q=f.scale,U=j+a,D=U+l,M=U-l,G=q(S-L),Y=q(S+O);P.push({x1:Y,y1:D,x2:Y,y2:M}),P.push({x1:G,y1:U,x2:Y,y2:U}),P.push({x1:G,y1:D,x2:G,y2:M})}else if(o==="horizontal"){var Z=m.scale,X=N+a,re=X-l,z=X+l,te=Z(S-L),le=Z(S+O);P.push({x1:re,y1:le,x2:z,y2:le}),P.push({x1:X,y1:te,x2:X,y2:le}),P.push({x1:re,y1:te,x2:z,y2:te})}return ve.createElement(Zs,Nw({className:"recharts-errorBar",key:"bar-".concat(P.map(function(Q){return"".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))},x),P.map(function(Q){return ve.createElement("line",Nw({},Q,{key:"line-".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))}))});return ve.createElement(Zs,{className:"recharts-errorBars"},v)}}])})(ve.Component);iX(yj,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});iX(yj,"displayName","ErrorBar");function Nv(e){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Nv(e)}function G7(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Tf(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?G7(Object(r),!0).forEach(function(s){lke(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G7(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function lke(e,n,r){return n=cke(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function cke(e){var n=uke(e,"string");return Nv(n)=="symbol"?n:n+""}function uke(e,n){if(Nv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Nv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var oX=function(n){var r=n.children,s=n.formattedGraphicalItems,a=n.legendWidth,o=n.legendContent,l=to(r,om);if(!l)return null;var c=om.defaultProps,u=c!==void 0?Tf(Tf({},c),l.props):{},d;return l.props&&l.props.payload?d=l.props&&l.props.payload:o==="children"?d=(s||[]).reduce(function(f,m){var g=m.item,x=m.props,v=x.sectors||x.data||[];return f.concat(v.map(function(y){return{type:l.props.iconType||g.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):d=(s||[]).map(function(f){var m=f.item,g=m.type.defaultProps,x=g!==void 0?Tf(Tf({},g),m.props):{},v=x.dataKey,y=x.name,b=x.legendType,N=x.hide;return{inactive:N,dataKey:v,type:u.iconType||b||"square",color:AT(m),value:y||v,payload:x}}),Tf(Tf(Tf({},u),om.getWithHeight(l,a)),{},{payload:d,item:l})};function _v(e){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_v(e)}function Y7(e){return mke(e)||fke(e)||hke(e)||dke()}function dke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hke(e,n){if(e){if(typeof e=="string")return Wk(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wk(e,n)}}function fke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mke(e){if(Array.isArray(e))return Wk(e)}function Wk(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function Q7(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ns(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Q7(Object(r),!0).forEach(function(s){ig(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q7(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ig(e,n,r){return n=pke(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function pke(e){var n=gke(e,"string");return _v(n)=="symbol"?n:n+""}function gke(e,n){if(_v(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(_v(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Lc(e,n,r){return er(e)||er(n)?r:Bs(n)?$o(e,n,r):Nn(n)?n(e):r}function $x(e,n,r,s){var a=mAe(e,function(c){return Lc(c,n)});if(r==="number"){var o=a.filter(function(c){return bt(c)||parseFloat(c)});return o.length?[gj(o),pj(o)]:[1/0,-1/0]}var l=s?a.filter(function(c){return!er(c)}):a;return l.map(function(c){return Bs(c)||c instanceof Date?c:""})}var xke=function(n){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,l=-1,c=(r=s==null?void 0:s.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var u=o.range,d=0;d<c;d++){var f=d>0?a[d-1].coordinate:a[c-1].coordinate,m=a[d].coordinate,g=d>=c-1?a[0].coordinate:a[d+1].coordinate,x=void 0;if(Cl(m-f)!==Cl(g-m)){var v=[];if(Cl(g-m)===Cl(u[1]-u[0])){x=g;var y=m+u[1]-u[0];v[0]=Math.min(y,(y+f)/2),v[1]=Math.max(y,(y+f)/2)}else{x=f;var b=g+u[1]-u[0];v[0]=Math.min(m,(b+m)/2),v[1]=Math.max(m,(b+m)/2)}var N=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(n>N[0]&&n<=N[1]||n>=v[0]&&n<=v[1]){l=a[d].index;break}}else{var j=Math.min(f,g),S=Math.max(f,g);if(n>(j+m)/2&&n<=(S+m)/2){l=a[d].index;break}}}else for(var A=0;A<c;A++)if(A===0&&n<=(s[A].coordinate+s[A+1].coordinate)/2||A>0&&A<c-1&&n>(s[A].coordinate+s[A-1].coordinate)/2&&n<=(s[A].coordinate+s[A+1].coordinate)/2||A===c-1&&n>(s[A].coordinate+s[A-1].coordinate)/2){l=s[A].index;break}return l},AT=function(n){var r,s=n,a=s.type.displayName,o=(r=n.type)!==null&&r!==void 0&&r.defaultProps?ns(ns({},n.type.defaultProps),n.props):n.props,l=o.stroke,c=o.fill,u;switch(a){case"Line":u=l;break;case"Area":case"Radar":u=l&&l!=="none"?l:c;break;default:u=c;break}return u},vke=function(n){var r=n.barSize,s=n.totalSize,a=n.stackGroups,o=a===void 0?{}:a;if(!o)return{};for(var l={},c=Object.keys(o),u=0,d=c.length;u<d;u++)for(var f=o[c[u]].stackGroups,m=Object.keys(f),g=0,x=m.length;g<x;g++){var v=f[m[g]],y=v.items,b=v.cateAxisId,N=y.filter(function(O){return Iu(O.type).indexOf("Bar")>=0});if(N&&N.length){var j=N[0].type.defaultProps,S=j!==void 0?ns(ns({},j),N[0].props):N[0].props,A=S.barSize,P=S[b];l[P]||(l[P]=[]);var L=er(A)?r:A;l[P].push({item:N[0],stackList:N.slice(1),barSize:er(L)?void 0:Pm(L,s,0)})}}return l},yke=function(n){var r=n.barGap,s=n.barCategoryGap,a=n.bandSize,o=n.sizeList,l=o===void 0?[]:o,c=n.maxBarSize,u=l.length;if(u<1)return null;var d=Pm(r,a,0,!0),f,m=[];if(l[0].barSize===+l[0].barSize){var g=!1,x=a/u,v=l.reduce(function(A,P){return A+P.barSize||0},0);v+=(u-1)*d,v>=a&&(v-=(u-1)*d,d=0),v>=a&&x>0&&(g=!0,x*=.9,v=u*x);var y=(a-v)/2>>0,b={offset:y-d,size:0};f=l.reduce(function(A,P){var L={item:P.item,position:{offset:b.offset+b.size+d,size:g?x:P.barSize}},O=[].concat(Y7(A),[L]);return b=O[O.length-1].position,P.stackList&&P.stackList.length&&P.stackList.forEach(function(R){O.push({item:R,position:b})}),O},m)}else{var N=Pm(s,a,0,!0);a-2*N-(u-1)*d<=0&&(d=0);var j=(a-2*N-(u-1)*d)/u;j>1&&(j>>=0);var S=c===+c?Math.min(j,c):j;f=l.reduce(function(A,P,L){var O=[].concat(Y7(A),[{item:P.item,position:{offset:N+(j+d)*L+(j-S)/2,size:S}}]);return P.stackList&&P.stackList.length&&P.stackList.forEach(function(R){O.push({item:R,position:O[O.length-1].position})}),O},m)}return f},bke=function(n,r,s,a){var o=s.children,l=s.width,c=s.margin,u=l-(c.left||0)-(c.right||0),d=oX({children:o,legendWidth:u});if(d){var f=a||{},m=f.width,g=f.height,x=d.align,v=d.verticalAlign,y=d.layout;if((y==="vertical"||y==="horizontal"&&v==="middle")&&x!=="center"&&bt(n[x]))return ns(ns({},n),{},ig({},x,n[x]+(m||0)));if((y==="horizontal"||y==="vertical"&&x==="center")&&v!=="middle"&&bt(n[v]))return ns(ns({},n),{},ig({},v,n[v]+(g||0)))}return n},wke=function(n,r,s){return er(r)?!0:n==="horizontal"?r==="yAxis":n==="vertical"||s==="x"?r==="xAxis":s==="y"?r==="yAxis":!0},lX=function(n,r,s,a,o){var l=r.props.children,c=Pl(l,yj).filter(function(d){return wke(a,o,d.props.direction)});if(c&&c.length){var u=c.map(function(d){return d.props.dataKey});return n.reduce(function(d,f){var m=Lc(f,s);if(er(m))return d;var g=Array.isArray(m)?[gj(m),pj(m)]:[m,m],x=u.reduce(function(v,y){var b=Lc(f,y,0),N=g[0]-Math.abs(Array.isArray(b)?b[0]:b),j=g[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(N,v[0]),Math.max(j,v[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},jke=function(n,r,s,a,o){var l=r.map(function(c){return lX(n,c,s,o,a)}).filter(function(c){return!er(c)});return l&&l.length?l.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]):null},cX=function(n,r,s,a,o){var l=r.map(function(u){var d=u.props.dataKey;return s==="number"&&d&&lX(n,u,d,a)||$x(n,d,s,o)});if(s==="number")return l.reduce(function(u,d){return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);var c={};return l.reduce(function(u,d){for(var f=0,m=d.length;f<m;f++)c[d[f]]||(c[d[f]]=!0,u.push(d[f]));return u},[])},uX=function(n,r){return n==="horizontal"&&r==="xAxis"||n==="vertical"&&r==="yAxis"||n==="centric"&&r==="angleAxis"||n==="radial"&&r==="radiusAxis"},dX=function(n,r,s,a){if(a)return n.map(function(u){return u.coordinate});var o,l,c=n.map(function(u){return u.coordinate===r&&(o=!0),u.coordinate===s&&(l=!0),u.coordinate});return o||c.push(r),l||c.push(s),c},Eu=function(n,r,s){if(!n)return null;var a=n.scale,o=n.duplicateDomain,l=n.type,c=n.range,u=n.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(r||s)&&l==="category"&&a.bandwidth?a.bandwidth()/u:0;if(d=n.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?Cl(c[0]-c[1])*2*d:d,r&&(n.ticks||n.niceTicks)){var f=(n.ticks||n.niceTicks).map(function(m){var g=o?o.indexOf(m):m;return{coordinate:a(g)+d,value:m,offset:d}});return f.filter(function(m){return!vy(m.coordinate)})}return n.isCategorical&&n.categoricalDomain?n.categoricalDomain.map(function(m,g){return{coordinate:a(m)+d,value:m,index:g,offset:d}}):a.ticks&&!s?a.ticks(n.tickCount).map(function(m){return{coordinate:a(m)+d,value:m,offset:d}}):a.domain().map(function(m,g){return{coordinate:a(m)+d,value:o?o[m]:m,index:g,offset:d}})},sP=new WeakMap,Fb=function(n,r){if(typeof r!="function")return n;sP.has(n)||sP.set(n,new WeakMap);var s=sP.get(n);if(s.has(r))return s.get(r);var a=function(){n.apply(void 0,arguments),r.apply(void 0,arguments)};return s.set(r,a),a},Nke=function(n,r,s){var a=n.scale,o=n.type,l=n.layout,c=n.axisType;if(a==="auto")return l==="radial"&&c==="radiusAxis"?{scale:gv(),realScaleType:"band"}:l==="radial"&&c==="angleAxis"?{scale:vw(),realScaleType:"linear"}:o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!s)?{scale:Bx(),realScaleType:"point"}:o==="category"?{scale:gv(),realScaleType:"band"}:{scale:vw(),realScaleType:"linear"};if(Cm(a)){var u="scale".concat(nj(a));return{scale:(D7[u]||Bx)(),realScaleType:D7[u]?u:"point"}}return Nn(a)?{scale:a}:{scale:Bx(),realScaleType:"point"}},X7=1e-4,_ke=function(n){var r=n.domain();if(!(!r||r.length<=2)){var s=r.length,a=n.range(),o=Math.min(a[0],a[1])-X7,l=Math.max(a[0],a[1])+X7,c=n(r[0]),u=n(r[s-1]);(c<o||c>l||u<o||u>l)&&n.domain([r[0],r[s-1]])}},Ske=function(n,r){if(!n)return null;for(var s=0,a=n.length;s<a;s++)if(n[s].item===r)return n[s].position;return null},Cke=function(n,r){if(!r||r.length!==2||!bt(r[0])||!bt(r[1]))return n;var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),o=[n[0],n[1]];return(!bt(n[0])||n[0]<s)&&(o[0]=s),(!bt(n[1])||n[1]>a)&&(o[1]=a),o[0]>a&&(o[0]=a),o[1]<s&&(o[1]=s),o},Pke=function(n){var r=n.length;if(!(r<=0))for(var s=0,a=n[0].length;s<a;++s)for(var o=0,l=0,c=0;c<r;++c){var u=vy(n[c][s][1])?n[c][s][0]:n[c][s][1];u>=0?(n[c][s][0]=o,n[c][s][1]=o+u,o=n[c][s][1]):(n[c][s][0]=l,n[c][s][1]=l+u,l=n[c][s][1])}},Ake=function(n){var r=n.length;if(!(r<=0))for(var s=0,a=n[0].length;s<a;++s)for(var o=0,l=0;l<r;++l){var c=vy(n[l][s][1])?n[l][s][0]:n[l][s][1];c>=0?(n[l][s][0]=o,n[l][s][1]=o+c,o=n[l][s][1]):(n[l][s][0]=0,n[l][s][1]=0)}},kke={sign:Pke,expand:dNe,none:Pg,silhouette:hNe,wiggle:fNe,positive:Ake},Eke=function(n,r,s){var a=r.map(function(c){return c.props.dataKey}),o=kke[s],l=uNe().keys(a).value(function(c,u){return+Lc(c,u,0)}).order(jk).offset(o);return l(n)},Tke=function(n,r,s,a,o,l){if(!n)return null;var c=l?r.reverse():r,u={},d=c.reduce(function(m,g){var x,v=(x=g.type)!==null&&x!==void 0&&x.defaultProps?ns(ns({},g.type.defaultProps),g.props):g.props,y=v.stackId,b=v.hide;if(b)return m;var N=v[s],j=m[N]||{hasStack:!1,stackGroups:{}};if(Bs(y)){var S=j.stackGroups[y]||{numericAxisId:s,cateAxisId:a,items:[]};S.items.push(g),j.hasStack=!0,j.stackGroups[y]=S}else j.stackGroups[tj("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[g]};return ns(ns({},m),{},ig({},N,j))},u),f={};return Object.keys(d).reduce(function(m,g){var x=d[g];if(x.hasStack){var v={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(y,b){var N=x.stackGroups[b];return ns(ns({},y),{},ig({},b,{numericAxisId:s,cateAxisId:a,items:N.items,stackedData:Eke(n,N.items,o)}))},v)}return ns(ns({},m),{},ig({},g,x))},f)},Oke=function(n,r){var s=r.realScaleType,a=r.type,o=r.tickCount,l=r.originalDomain,c=r.allowDecimals,u=s||r.scale;if(u!=="auto"&&u!=="linear")return null;if(o&&a==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var d=n.domain();if(!d.length)return null;var f=UAe(d,o,c);return n.domain([gj(f),pj(f)]),{niceTicks:f}}if(o&&a==="number"){var m=n.domain(),g=VAe(m,o,c);return{niceTicks:g}}return null},J7=function(n){var r=n.axis,s=n.ticks,a=n.offset,o=n.bandSize,l=n.entry,c=n.index;if(r.type==="category")return s[c]?s[c].coordinate+a:null;var u=Lc(l,r.dataKey,r.domain[c]);return er(u)?null:r.scale(u)-o/2+a},Lke=function(n){var r=n.numericAxis,s=r.scale.domain();if(r.type==="number"){var a=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);return a<=0&&o>=0?0:o<0?o:a}return s[0]},Rke=function(n,r){var s,a=(s=n.type)!==null&&s!==void 0&&s.defaultProps?ns(ns({},n.type.defaultProps),n.props):n.props,o=a.stackId;if(Bs(o)){var l=r[o];if(l){var c=l.items.indexOf(n);return c>=0?l.stackedData[c]:null}}return null},Dke=function(n){return n.reduce(function(r,s){return[gj(s.concat([r[0]]).filter(bt)),pj(s.concat([r[1]]).filter(bt))]},[1/0,-1/0])},hX=function(n,r,s){return Object.keys(n).reduce(function(a,o){var l=n[o],c=l.stackedData,u=c.reduce(function(d,f){var m=Dke(f.slice(r,s+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],a[0]),Math.max(u[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},Z7=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Kk=function(n,r,s){if(Nn(n))return n(r,s);if(!Array.isArray(n))return r;var a=[];if(bt(n[0]))a[0]=s?n[0]:Math.min(n[0],r[0]);else if(Z7.test(n[0])){var o=+Z7.exec(n[0])[1];a[0]=r[0]-o}else Nn(n[0])?a[0]=n[0](r[0]):a[0]=r[0];if(bt(n[1]))a[1]=s?n[1]:Math.max(n[1],r[1]);else if(eB.test(n[1])){var l=+eB.exec(n[1])[1];a[1]=r[1]+l}else Nn(n[1])?a[1]=n[1](r[1]):a[1]=r[1];return a},Sw=function(n,r,s){if(n&&n.scale&&n.scale.bandwidth){var a=n.scale.bandwidth();if(!s||a>0)return a}if(n&&r&&r.length>=2){for(var o=tT(r,function(m){return m.coordinate}),l=1/0,c=1,u=o.length;c<u;c++){var d=o[c],f=o[c-1];l=Math.min((d.coordinate||0)-(f.coordinate||0),l)}return l===1/0?0:l}return s?void 0:0},tB=function(n,r,s){return!n||!n.length||ST(n,$o(s,"type.defaultProps.domain"))?r:n},fX=function(n,r){var s=n.type.defaultProps?ns(ns({},n.type.defaultProps),n.props):n.props,a=s.dataKey,o=s.name,l=s.unit,c=s.formatter,u=s.tooltipType,d=s.chartType,f=s.hide;return ns(ns({},Zn(n,!1)),{},{dataKey:a,unit:l,formatter:c,name:o||a,color:AT(n),value:Lc(r,a),type:u,payload:r,chartType:d,hide:f})};function Sv(e){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Sv(e)}function nB(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function rB(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?nB(Object(r),!0).forEach(function(s){Ike(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nB(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Ike(e,n,r){return n=Mke(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Mke(e){var n=Fke(e,"string");return Sv(n)=="symbol"?n:n+""}function Fke(e,n){if(Sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Sv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var Cw=Math.PI/180,Bke=function(n){return n*180/Math.PI},fi=function(n,r,s,a){return{x:n+Math.cos(-Cw*a)*s,y:r+Math.sin(-Cw*a)*s}},$ke=function(n,r){var s=n.x,a=n.y,o=r.x,l=r.y;return Math.sqrt(Math.pow(s-o,2)+Math.pow(a-l,2))},qke=function(n,r){var s=n.x,a=n.y,o=r.cx,l=r.cy,c=$ke({x:s,y:a},{x:o,y:l});if(c<=0)return{radius:c};var u=(s-o)/c,d=Math.acos(u);return a>l&&(d=2*Math.PI-d),{radius:c,angle:Bke(d),angleInRadian:d}},zke=function(n){var r=n.startAngle,s=n.endAngle,a=Math.floor(r/360),o=Math.floor(s/360),l=Math.min(a,o);return{startAngle:r-l*360,endAngle:s-l*360}},Uke=function(n,r){var s=r.startAngle,a=r.endAngle,o=Math.floor(s/360),l=Math.floor(a/360),c=Math.min(o,l);return n+c*360},sB=function(n,r){var s=n.x,a=n.y,o=qke({x:s,y:a},r),l=o.radius,c=o.angle,u=r.innerRadius,d=r.outerRadius;if(l<u||l>d)return!1;if(l===0)return!0;var f=zke(r),m=f.startAngle,g=f.endAngle,x=c,v;if(m<=g){for(;x>g;)x-=360;for(;x<m;)x+=360;v=x>=m&&x<=g}else{for(;x>m;)x-=360;for(;x<g;)x+=360;v=x>=g&&x<=m}return v?rB(rB({},r),{},{radius:l,angle:Uke(x,r)}):null};function Cv(e){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Cv(e)}var Vke=["offset"];function Hke(e){return Yke(e)||Gke(e)||Kke(e)||Wke()}function Wke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kke(e,n){if(e){if(typeof e=="string")return Gk(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gk(e,n)}}function Gke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yke(e){if(Array.isArray(e))return Gk(e)}function Gk(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function Qke(e,n){if(e==null)return{};var r=Xke(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Xke(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}function iB(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ms(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?iB(Object(r),!0).forEach(function(s){Jke(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iB(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Jke(e,n,r){return n=Zke(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Zke(e){var n=e4e(e,"string");return Cv(n)=="symbol"?n:n+""}function e4e(e,n){if(Cv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Cv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Pv.apply(this,arguments)}var t4e=function(n){var r=n.value,s=n.formatter,a=er(n.children)?r:n.children;return Nn(s)?s(a):a},n4e=function(n,r){var s=Cl(r-n),a=Math.min(Math.abs(r-n),360);return s*a},r4e=function(n,r,s){var a=n.position,o=n.viewBox,l=n.offset,c=n.className,u=o,d=u.cx,f=u.cy,m=u.innerRadius,g=u.outerRadius,x=u.startAngle,v=u.endAngle,y=u.clockWise,b=(m+g)/2,N=n4e(x,v),j=N>=0?1:-1,S,A;a==="insideStart"?(S=x+j*l,A=y):a==="insideEnd"?(S=v-j*l,A=!y):a==="end"&&(S=v+j*l,A=y),A=N<=0?A:!A;var P=fi(d,f,b,S),L=fi(d,f,b,S+(A?1:-1)*359),O="M".concat(P.x,",").concat(P.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(A?0:1,`,
    `).concat(L.x,",").concat(L.y),R=er(n.id)?tj("recharts-radial-line-"):n.id;return ve.createElement("text",Pv({},s,{dominantBaseline:"central",className:zn("recharts-radial-bar-label",c)}),ve.createElement("defs",null,ve.createElement("path",{id:R,d:O})),ve.createElement("textPath",{xlinkHref:"#".concat(R)},r))},s4e=function(n){var r=n.viewBox,s=n.offset,a=n.position,o=r,l=o.cx,c=o.cy,u=o.innerRadius,d=o.outerRadius,f=o.startAngle,m=o.endAngle,g=(f+m)/2;if(a==="outside"){var x=fi(l,c,d+s,g),v=x.x,y=x.y;return{x:v,y,textAnchor:v>=l?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:l,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:l,y:c,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:l,y:c,textAnchor:"middle",verticalAnchor:"end"};var b=(u+d)/2,N=fi(l,c,b,g),j=N.x,S=N.y;return{x:j,y:S,textAnchor:"middle",verticalAnchor:"middle"}},i4e=function(n){var r=n.viewBox,s=n.parentViewBox,a=n.offset,o=n.position,l=r,c=l.x,u=l.y,d=l.width,f=l.height,m=f>=0?1:-1,g=m*a,x=m>0?"end":"start",v=m>0?"start":"end",y=d>=0?1:-1,b=y*a,N=y>0?"end":"start",j=y>0?"start":"end";if(o==="top"){var S={x:c+d/2,y:u-m*a,textAnchor:"middle",verticalAnchor:x};return Ms(Ms({},S),s?{height:Math.max(u-s.y,0),width:d}:{})}if(o==="bottom"){var A={x:c+d/2,y:u+f+g,textAnchor:"middle",verticalAnchor:v};return Ms(Ms({},A),s?{height:Math.max(s.y+s.height-(u+f),0),width:d}:{})}if(o==="left"){var P={x:c-b,y:u+f/2,textAnchor:N,verticalAnchor:"middle"};return Ms(Ms({},P),s?{width:Math.max(P.x-s.x,0),height:f}:{})}if(o==="right"){var L={x:c+d+b,y:u+f/2,textAnchor:j,verticalAnchor:"middle"};return Ms(Ms({},L),s?{width:Math.max(s.x+s.width-L.x,0),height:f}:{})}var O=s?{width:d,height:f}:{};return o==="insideLeft"?Ms({x:c+b,y:u+f/2,textAnchor:j,verticalAnchor:"middle"},O):o==="insideRight"?Ms({x:c+d-b,y:u+f/2,textAnchor:N,verticalAnchor:"middle"},O):o==="insideTop"?Ms({x:c+d/2,y:u+g,textAnchor:"middle",verticalAnchor:v},O):o==="insideBottom"?Ms({x:c+d/2,y:u+f-g,textAnchor:"middle",verticalAnchor:x},O):o==="insideTopLeft"?Ms({x:c+b,y:u+g,textAnchor:j,verticalAnchor:v},O):o==="insideTopRight"?Ms({x:c+d-b,y:u+g,textAnchor:N,verticalAnchor:v},O):o==="insideBottomLeft"?Ms({x:c+b,y:u+f-g,textAnchor:j,verticalAnchor:x},O):o==="insideBottomRight"?Ms({x:c+d-b,y:u+f-g,textAnchor:N,verticalAnchor:x},O):h0(o)&&(bt(o.x)||Uf(o.x))&&(bt(o.y)||Uf(o.y))?Ms({x:c+Pm(o.x,d),y:u+Pm(o.y,f),textAnchor:"end",verticalAnchor:"end"},O):Ms({x:c+d/2,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},O)},a4e=function(n){return"cx"in n&&bt(n.cx)};function Di(e){var n=e.offset,r=n===void 0?5:n,s=Qke(e,Vke),a=Ms({offset:r},s),o=a.viewBox,l=a.position,c=a.value,u=a.children,d=a.content,f=a.className,m=f===void 0?"":f,g=a.textBreakAll;if(!o||er(c)&&er(u)&&!C.isValidElement(d)&&!Nn(d))return null;if(C.isValidElement(d))return C.cloneElement(d,a);var x;if(Nn(d)){if(x=C.createElement(d,a),C.isValidElement(x))return x}else x=t4e(a);var v=a4e(o),y=Zn(a,!0);if(v&&(l==="insideStart"||l==="insideEnd"||l==="end"))return r4e(a,x,y);var b=v?s4e(a):i4e(a);return ve.createElement(dw,Pv({className:zn("recharts-label",m)},y,b,{breakAll:g}),x)}Di.displayName="Label";var mX=function(n){var r=n.cx,s=n.cy,a=n.angle,o=n.startAngle,l=n.endAngle,c=n.r,u=n.radius,d=n.innerRadius,f=n.outerRadius,m=n.x,g=n.y,x=n.top,v=n.left,y=n.width,b=n.height,N=n.clockWise,j=n.labelViewBox;if(j)return j;if(bt(y)&&bt(b)){if(bt(m)&&bt(g))return{x:m,y:g,width:y,height:b};if(bt(x)&&bt(v))return{x,y:v,width:y,height:b}}return bt(m)&&bt(g)?{x:m,y:g,width:0,height:0}:bt(r)&&bt(s)?{cx:r,cy:s,startAngle:o||a||0,endAngle:l||a||0,innerRadius:d||0,outerRadius:f||u||c||0,clockWise:N}:n.viewBox?n.viewBox:{}},o4e=function(n,r){return n?n===!0?ve.createElement(Di,{key:"label-implicit",viewBox:r}):Bs(n)?ve.createElement(Di,{key:"label-implicit",viewBox:r,value:n}):C.isValidElement(n)?n.type===Di?C.cloneElement(n,{key:"label-implicit",viewBox:r}):ve.createElement(Di,{key:"label-implicit",content:n,viewBox:r}):Nn(n)?ve.createElement(Di,{key:"label-implicit",content:n,viewBox:r}):h0(n)?ve.createElement(Di,Pv({viewBox:r},n,{key:"label-implicit"})):null:null},l4e=function(n,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!n||!n.children&&s&&!n.label)return null;var a=n.children,o=mX(n),l=Pl(a,Di).map(function(u,d){return C.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)})});if(!s)return l;var c=o4e(n.label,r||o);return[c].concat(Hke(l))};Di.parseViewBox=mX;Di.renderCallByParent=l4e;var iP,aB;function c4e(){if(aB)return iP;aB=1;function e(n){var r=n==null?0:n.length;return r?n[r-1]:void 0}return iP=e,iP}var u4e=c4e();const d4e=ur(u4e);function Av(e){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Av(e)}var h4e=["valueAccessor"],f4e=["data","dataKey","clockWise","id","textBreakAll"];function m4e(e){return v4e(e)||x4e(e)||g4e(e)||p4e()}function p4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g4e(e,n){if(e){if(typeof e=="string")return Yk(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yk(e,n)}}function x4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function v4e(e){if(Array.isArray(e))return Yk(e)}function Yk(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function Pw(){return Pw=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Pw.apply(this,arguments)}function oB(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function lB(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?oB(Object(r),!0).forEach(function(s){y4e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oB(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function y4e(e,n,r){return n=b4e(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function b4e(e){var n=w4e(e,"string");return Av(n)=="symbol"?n:n+""}function w4e(e,n){if(Av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Av(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function cB(e,n){if(e==null)return{};var r=j4e(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function j4e(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}var N4e=function(n){return Array.isArray(n.value)?d4e(n.value):n.value};function um(e){var n=e.valueAccessor,r=n===void 0?N4e:n,s=cB(e,h4e),a=s.data,o=s.dataKey,l=s.clockWise,c=s.id,u=s.textBreakAll,d=cB(s,f4e);return!a||!a.length?null:ve.createElement(Zs,{className:"recharts-label-list"},a.map(function(f,m){var g=er(o)?r(f,m):Lc(f&&f.payload,o),x=er(c)?{}:{id:"".concat(c,"-").concat(m)};return ve.createElement(Di,Pw({},Zn(f,!0),d,x,{parentViewBox:f.parentViewBox,value:g,textBreakAll:u,viewBox:Di.parseViewBox(er(l)?f:lB(lB({},f),{},{clockWise:l})),key:"label-".concat(m),index:m}))}))}um.displayName="LabelList";function _4e(e,n){return e?e===!0?ve.createElement(um,{key:"labelList-implicit",data:n}):ve.isValidElement(e)||Nn(e)?ve.createElement(um,{key:"labelList-implicit",data:n,content:e}):h0(e)?ve.createElement(um,Pw({data:n},e,{key:"labelList-implicit"})):null:null}function S4e(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,a=Pl(s,um).map(function(l,c){return C.cloneElement(l,{data:n,key:"labelList-".concat(c)})});if(!r)return a;var o=_4e(e.label,n);return[o].concat(m4e(a))}um.renderCallByParent=S4e;function kv(e){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},kv(e)}function Qk(){return Qk=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Qk.apply(this,arguments)}function uB(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function dB(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?uB(Object(r),!0).forEach(function(s){C4e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uB(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function C4e(e,n,r){return n=P4e(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function P4e(e){var n=A4e(e,"string");return kv(n)=="symbol"?n:n+""}function A4e(e,n){if(kv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(kv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var k4e=function(n,r){var s=Cl(r-n),a=Math.min(Math.abs(r-n),359.999);return s*a},Bb=function(n){var r=n.cx,s=n.cy,a=n.radius,o=n.angle,l=n.sign,c=n.isExternal,u=n.cornerRadius,d=n.cornerIsExternal,f=u*(c?1:-1)+a,m=Math.asin(u/f)/Cw,g=d?o:o+l*m,x=fi(r,s,f,g),v=fi(r,s,a,g),y=d?o-l*m:o,b=fi(r,s,f*Math.cos(m*Cw),y);return{center:x,circleTangency:v,lineTangency:b,theta:m}},pX=function(n){var r=n.cx,s=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.startAngle,c=n.endAngle,u=k4e(l,c),d=l+u,f=fi(r,s,o,l),m=fi(r,s,o,d),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(l>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var x=fi(r,s,a,l),v=fi(r,s,a,d);g+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(l<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else g+="L ".concat(r,",").concat(s," Z");return g},E4e=function(n){var r=n.cx,s=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,m=Cl(f-d),g=Bb({cx:r,cy:s,radius:o,angle:d,sign:m,cornerRadius:l,cornerIsExternal:u}),x=g.circleTangency,v=g.lineTangency,y=g.theta,b=Bb({cx:r,cy:s,radius:o,angle:f,sign:-m,cornerRadius:l,cornerIsExternal:u}),N=b.circleTangency,j=b.lineTangency,S=b.theta,A=u?Math.abs(d-f):Math.abs(d-f)-y-S;if(A<0)return c?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):pX({cx:r,cy:s,innerRadius:a,outerRadius:o,startAngle:d,endAngle:f});var P="M ".concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(A>180),",").concat(+(m<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(j.x,",").concat(j.y,`
  `);if(a>0){var L=Bb({cx:r,cy:s,radius:a,angle:d,sign:m,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),O=L.circleTangency,R=L.lineTangency,q=L.theta,U=Bb({cx:r,cy:s,radius:a,angle:f,sign:-m,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),D=U.circleTangency,M=U.lineTangency,G=U.theta,Y=u?Math.abs(d-f):Math.abs(d-f)-q-G;if(Y<0&&l===0)return"".concat(P,"L").concat(r,",").concat(s,"Z");P+="L".concat(M.x,",").concat(M.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(Y>180),",").concat(+(m>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(R.x,",").concat(R.y,"Z")}else P+="L".concat(r,",").concat(s,"Z");return P},T4e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},gX=function(n){var r=dB(dB({},T4e),n),s=r.cx,a=r.cy,o=r.innerRadius,l=r.outerRadius,c=r.cornerRadius,u=r.forceCornerRadius,d=r.cornerIsExternal,f=r.startAngle,m=r.endAngle,g=r.className;if(l<o||f===m)return null;var x=zn("recharts-sector",g),v=l-o,y=Pm(c,v,0,!0),b;return y>0&&Math.abs(f-m)<360?b=E4e({cx:s,cy:a,innerRadius:o,outerRadius:l,cornerRadius:Math.min(y,v/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:f,endAngle:m}):b=pX({cx:s,cy:a,innerRadius:o,outerRadius:l,startAngle:f,endAngle:m}),ve.createElement("path",Qk({},Zn(r,!0),{className:x,d:b,role:"img"}))};function Ev(e){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ev(e)}function Xk(){return Xk=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Xk.apply(this,arguments)}function hB(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function fB(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?hB(Object(r),!0).forEach(function(s){O4e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hB(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function O4e(e,n,r){return n=L4e(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function L4e(e){var n=R4e(e,"string");return Ev(n)=="symbol"?n:n+""}function R4e(e,n){if(Ev(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Ev(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var mB={curveBasisClosed:Zje,curveBasisOpen:eNe,curveBasis:Jje,curveBumpX:Fje,curveBumpY:Bje,curveLinearClosed:tNe,curveLinear:sj,curveMonotoneX:nNe,curveMonotoneY:rNe,curveNatural:sNe,curveStep:iNe,curveStepAfter:oNe,curveStepBefore:aNe},$b=function(n){return n.x===+n.x&&n.y===+n.y},rx=function(n){return n.x},sx=function(n){return n.y},D4e=function(n,r){if(Nn(n))return n;var s="curve".concat(nj(n));return(s==="curveMonotone"||s==="curveBump")&&r?mB["".concat(s).concat(r==="vertical"?"Y":"X")]:mB[s]||sj},I4e=function(n){var r=n.type,s=r===void 0?"linear":r,a=n.points,o=a===void 0?[]:a,l=n.baseLine,c=n.layout,u=n.connectNulls,d=u===void 0?!1:u,f=D4e(s,c),m=d?o.filter(function(y){return $b(y)}):o,g;if(Array.isArray(l)){var x=d?l.filter(function(y){return $b(y)}):l,v=m.map(function(y,b){return fB(fB({},y),{},{base:x[b]})});return c==="vertical"?g=Tb().y(sx).x1(rx).x0(function(y){return y.base.x}):g=Tb().x(rx).y1(sx).y0(function(y){return y.base.y}),g.defined($b).curve(f),g(v)}return c==="vertical"&&bt(l)?g=Tb().y(sx).x1(rx).x0(l):bt(l)?g=Tb().x(rx).y1(sx).y0(l):g=bY().x(rx).y(sx),g.defined($b).curve(f),g(m)},pB=function(n){var r=n.className,s=n.points,a=n.path,o=n.pathRef;if((!s||!s.length)&&!a)return null;var l=s&&s.length?I4e(n):a;return C.createElement("path",Xk({},Zn(n,!1),Z1(n),{className:zn("recharts-curve",r),d:l,ref:o}))},aP={exports:{}},oP,gB;function M4e(){if(gB)return oP;gB=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return oP=e,oP}var lP,xB;function F4e(){if(xB)return lP;xB=1;var e=M4e();function n(){}function r(){}return r.resetWarningCache=n,lP=function(){function s(l,c,u,d,f,m){if(m!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}s.isRequired=s;function a(){return s}var o={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:n};return o.PropTypes=o,o},lP}var vB;function B4e(){return vB||(vB=1,aP.exports=F4e()()),aP.exports}var $4e=B4e();const sr=ur($4e);var q4e=Object.getOwnPropertyNames,z4e=Object.getOwnPropertySymbols,U4e=Object.prototype.hasOwnProperty;function yB(e,n){return function(s,a,o){return e(s,a,o)&&n(s,a,o)}}function qb(e){return function(r,s,a){if(!r||!s||typeof r!="object"||typeof s!="object")return e(r,s,a);var o=a.cache,l=o.get(r),c=o.get(s);if(l&&c)return l===s&&c===r;o.set(r,s),o.set(s,r);var u=e(r,s,a);return o.delete(r),o.delete(s),u}}function bB(e){return q4e(e).concat(z4e(e))}var V4e=Object.hasOwn||(function(e,n){return U4e.call(e,n)});function $m(e,n){return e===n||!e&&!n&&e!==e&&n!==n}var H4e="__v",W4e="__o",K4e="_owner",wB=Object.getOwnPropertyDescriptor,jB=Object.keys;function G4e(e,n,r){var s=e.length;if(n.length!==s)return!1;for(;s-- >0;)if(!r.equals(e[s],n[s],s,s,e,n,r))return!1;return!0}function Y4e(e,n){return $m(e.getTime(),n.getTime())}function Q4e(e,n){return e.name===n.name&&e.message===n.message&&e.cause===n.cause&&e.stack===n.stack}function X4e(e,n){return e===n}function NB(e,n,r){var s=e.size;if(s!==n.size)return!1;if(!s)return!0;for(var a=new Array(s),o=e.entries(),l,c,u=0;(l=o.next())&&!l.done;){for(var d=n.entries(),f=!1,m=0;(c=d.next())&&!c.done;){if(a[m]){m++;continue}var g=l.value,x=c.value;if(r.equals(g[0],x[0],u,m,e,n,r)&&r.equals(g[1],x[1],g[0],x[0],e,n,r)){f=a[m]=!0;break}m++}if(!f)return!1;u++}return!0}var J4e=$m;function Z4e(e,n,r){var s=jB(e),a=s.length;if(jB(n).length!==a)return!1;for(;a-- >0;)if(!xX(e,n,r,s[a]))return!1;return!0}function ix(e,n,r){var s=bB(e),a=s.length;if(bB(n).length!==a)return!1;for(var o,l,c;a-- >0;)if(o=s[a],!xX(e,n,r,o)||(l=wB(e,o),c=wB(n,o),(l||c)&&(!l||!c||l.configurable!==c.configurable||l.enumerable!==c.enumerable||l.writable!==c.writable)))return!1;return!0}function eEe(e,n){return $m(e.valueOf(),n.valueOf())}function tEe(e,n){return e.source===n.source&&e.flags===n.flags}function _B(e,n,r){var s=e.size;if(s!==n.size)return!1;if(!s)return!0;for(var a=new Array(s),o=e.values(),l,c;(l=o.next())&&!l.done;){for(var u=n.values(),d=!1,f=0;(c=u.next())&&!c.done;){if(!a[f]&&r.equals(l.value,c.value,l.value,c.value,e,n,r)){d=a[f]=!0;break}f++}if(!d)return!1}return!0}function nEe(e,n){var r=e.length;if(n.length!==r)return!1;for(;r-- >0;)if(e[r]!==n[r])return!1;return!0}function rEe(e,n){return e.hostname===n.hostname&&e.pathname===n.pathname&&e.protocol===n.protocol&&e.port===n.port&&e.hash===n.hash&&e.username===n.username&&e.password===n.password}function xX(e,n,r,s){return(s===K4e||s===W4e||s===H4e)&&(e.$$typeof||n.$$typeof)?!0:V4e(n,s)&&r.equals(e[s],n[s],s,s,e,n,r)}var sEe="[object Arguments]",iEe="[object Boolean]",aEe="[object Date]",oEe="[object Error]",lEe="[object Map]",cEe="[object Number]",uEe="[object Object]",dEe="[object RegExp]",hEe="[object Set]",fEe="[object String]",mEe="[object URL]",pEe=Array.isArray,SB=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,CB=Object.assign,gEe=Object.prototype.toString.call.bind(Object.prototype.toString);function xEe(e){var n=e.areArraysEqual,r=e.areDatesEqual,s=e.areErrorsEqual,a=e.areFunctionsEqual,o=e.areMapsEqual,l=e.areNumbersEqual,c=e.areObjectsEqual,u=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,f=e.areSetsEqual,m=e.areTypedArraysEqual,g=e.areUrlsEqual;return function(v,y,b){if(v===y)return!0;if(v==null||y==null)return!1;var N=typeof v;if(N!==typeof y)return!1;if(N!=="object")return N==="number"?l(v,y,b):N==="function"?a(v,y,b):!1;var j=v.constructor;if(j!==y.constructor)return!1;if(j===Object)return c(v,y,b);if(pEe(v))return n(v,y,b);if(SB!=null&&SB(v))return m(v,y,b);if(j===Date)return r(v,y,b);if(j===RegExp)return d(v,y,b);if(j===Map)return o(v,y,b);if(j===Set)return f(v,y,b);var S=gEe(v);return S===aEe?r(v,y,b):S===dEe?d(v,y,b):S===lEe?o(v,y,b):S===hEe?f(v,y,b):S===uEe?typeof v.then!="function"&&typeof y.then!="function"&&c(v,y,b):S===mEe?g(v,y,b):S===oEe?s(v,y,b):S===sEe?c(v,y,b):S===iEe||S===cEe||S===fEe?u(v,y,b):!1}}function vEe(e){var n=e.circular,r=e.createCustomConfig,s=e.strict,a={areArraysEqual:s?ix:G4e,areDatesEqual:Y4e,areErrorsEqual:Q4e,areFunctionsEqual:X4e,areMapsEqual:s?yB(NB,ix):NB,areNumbersEqual:J4e,areObjectsEqual:s?ix:Z4e,arePrimitiveWrappersEqual:eEe,areRegExpsEqual:tEe,areSetsEqual:s?yB(_B,ix):_B,areTypedArraysEqual:s?ix:nEe,areUrlsEqual:rEe};if(r&&(a=CB({},a,r(a))),n){var o=qb(a.areArraysEqual),l=qb(a.areMapsEqual),c=qb(a.areObjectsEqual),u=qb(a.areSetsEqual);a=CB({},a,{areArraysEqual:o,areMapsEqual:l,areObjectsEqual:c,areSetsEqual:u})}return a}function yEe(e){return function(n,r,s,a,o,l,c){return e(n,r,c)}}function bEe(e){var n=e.circular,r=e.comparator,s=e.createState,a=e.equals,o=e.strict;if(s)return function(u,d){var f=s(),m=f.cache,g=m===void 0?n?new WeakMap:void 0:m,x=f.meta;return r(u,d,{cache:g,equals:a,meta:x,strict:o})};if(n)return function(u,d){return r(u,d,{cache:new WeakMap,equals:a,meta:void 0,strict:o})};var l={cache:void 0,equals:a,meta:void 0,strict:o};return function(u,d){return r(u,d,l)}}var wEe=Qh();Qh({strict:!0});Qh({circular:!0});Qh({circular:!0,strict:!0});Qh({createInternalComparator:function(){return $m}});Qh({strict:!0,createInternalComparator:function(){return $m}});Qh({circular:!0,createInternalComparator:function(){return $m}});Qh({circular:!0,createInternalComparator:function(){return $m},strict:!0});function Qh(e){e===void 0&&(e={});var n=e.circular,r=n===void 0?!1:n,s=e.createInternalComparator,a=e.createState,o=e.strict,l=o===void 0?!1:o,c=vEe(e),u=xEe(c),d=s?s(u):yEe(u);return bEe({circular:r,comparator:u,createState:a,equals:d,strict:l})}function jEe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function PB(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,s=function a(o){r<0&&(r=o),o-r>n?(e(o),r=-1):jEe(a)};requestAnimationFrame(s)}function Jk(e){"@babel/helpers - typeof";return Jk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Jk(e)}function NEe(e){return PEe(e)||CEe(e)||SEe(e)||_Ee()}function _Ee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SEe(e,n){if(e){if(typeof e=="string")return AB(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AB(e,n)}}function AB(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function CEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PEe(e){if(Array.isArray(e))return e}function AEe(){var e={},n=function(){return null},r=!1,s=function a(o){if(!r){if(Array.isArray(o)){if(!o.length)return;var l=o,c=NEe(l),u=c[0],d=c.slice(1);if(typeof u=="number"){PB(a.bind(null,d),u);return}a(u),PB(a.bind(null,d));return}Jk(o)==="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:function(){r=!0},start:function(o){r=!1,s(o)},subscribe:function(o){return n=o,function(){n=function(){return null}}}}}function Tv(e){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tv(e)}function kB(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function EB(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?kB(Object(r),!0).forEach(function(s){vX(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kB(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function vX(e,n,r){return n=kEe(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function kEe(e){var n=EEe(e,"string");return Tv(n)==="symbol"?n:String(n)}function EEe(e,n){if(Tv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Tv(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var TEe=function(n,r){return[Object.keys(n),Object.keys(r)].reduce(function(s,a){return s.filter(function(o){return a.includes(o)})})},OEe=function(n){return n},LEe=function(n){return n.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},qx=function(n,r){return Object.keys(r).reduce(function(s,a){return EB(EB({},s),{},vX({},a,n(a,r[a])))},{})},TB=function(n,r,s){return n.map(function(a){return"".concat(LEe(a)," ").concat(r,"ms ").concat(s)}).join(",")};function REe(e,n){return MEe(e)||IEe(e,n)||yX(e,n)||DEe()}function DEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IEe(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,o,l,c=[],u=!0,d=!1;try{if(o=(r=r.call(e)).next,n!==0)for(;!(u=(s=o.call(r)).done)&&(c.push(s.value),c.length!==n);u=!0);}catch(f){d=!0,a=f}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}function MEe(e){if(Array.isArray(e))return e}function FEe(e){return qEe(e)||$Ee(e)||yX(e)||BEe()}function BEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yX(e,n){if(e){if(typeof e=="string")return Zk(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zk(e,n)}}function $Ee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qEe(e){if(Array.isArray(e))return Zk(e)}function Zk(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}var Aw=1e-4,bX=function(n,r){return[0,3*n,3*r-6*n,3*n-3*r+1]},wX=function(n,r){return n.map(function(s,a){return s*Math.pow(r,a)}).reduce(function(s,a){return s+a})},OB=function(n,r){return function(s){var a=bX(n,r);return wX(a,s)}},zEe=function(n,r){return function(s){var a=bX(n,r),o=[].concat(FEe(a.map(function(l,c){return l*c}).slice(1)),[0]);return wX(o,s)}},LB=function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=r[0],o=r[1],l=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,o=0,l=1,c=1;break;case"ease":a=.25,o=.1,l=.25,c=1;break;case"ease-in":a=.42,o=0,l=1,c=1;break;case"ease-out":a=.42,o=0,l=.58,c=1;break;case"ease-in-out":a=0,o=0,l=.58,c=1;break;default:{var u=r[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var d=u[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),f=REe(d,4);a=f[0],o=f[1],l=f[2],c=f[3]}}}var m=OB(a,l),g=OB(o,c),x=zEe(a,l),v=function(N){return N>1?1:N<0?0:N},y=function(N){for(var j=N>1?1:N,S=j,A=0;A<8;++A){var P=m(S)-j,L=x(S);if(Math.abs(P-j)<Aw||L<Aw)return g(S);S=v(S-P/L)}return g(S)};return y.isStepper=!1,y},UEe=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.stiff,s=r===void 0?100:r,a=n.damping,o=a===void 0?8:a,l=n.dt,c=l===void 0?17:l,u=function(f,m,g){var x=-(f-m)*s,v=g*o,y=g+(x-v)*c/1e3,b=g*c/1e3+f;return Math.abs(b-m)<Aw&&Math.abs(y)<Aw?[m,0]:[b,y]};return u.isStepper=!0,u.dt=c,u},VEe=function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return LB(a);case"spring":return UEe();default:if(a.split("(")[0]==="cubic-bezier")return LB(a)}return typeof a=="function"?a:null};function Ov(e){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ov(e)}function RB(e){return KEe(e)||WEe(e)||jX(e)||HEe()}function HEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KEe(e){if(Array.isArray(e))return t4(e)}function DB(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function di(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?DB(Object(r),!0).forEach(function(s){e4(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DB(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function e4(e,n,r){return n=GEe(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function GEe(e){var n=YEe(e,"string");return Ov(n)==="symbol"?n:String(n)}function YEe(e,n){if(Ov(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Ov(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function QEe(e,n){return ZEe(e)||JEe(e,n)||jX(e,n)||XEe()}function XEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jX(e,n){if(e){if(typeof e=="string")return t4(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t4(e,n)}}function t4(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function JEe(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,o,l,c=[],u=!0,d=!1;try{if(o=(r=r.call(e)).next,n!==0)for(;!(u=(s=o.call(r)).done)&&(c.push(s.value),c.length!==n);u=!0);}catch(f){d=!0,a=f}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}function ZEe(e){if(Array.isArray(e))return e}var kw=function(n,r,s){return n+(r-n)*s},n4=function(n){var r=n.from,s=n.to;return r!==s},e3e=function e(n,r,s){var a=qx(function(o,l){if(n4(l)){var c=n(l.from,l.to,l.velocity),u=QEe(c,2),d=u[0],f=u[1];return di(di({},l),{},{from:d,velocity:f})}return l},r);return s<1?qx(function(o,l){return n4(l)?di(di({},l),{},{velocity:kw(l.velocity,a[o].velocity,s),from:kw(l.from,a[o].from,s)}):l},r):e(n,a,s-1)};const t3e=(function(e,n,r,s,a){var o=TEe(e,n),l=o.reduce(function(b,N){return di(di({},b),{},e4({},N,[e[N],n[N]]))},{}),c=o.reduce(function(b,N){return di(di({},b),{},e4({},N,{from:e[N],velocity:0,to:n[N]}))},{}),u=-1,d,f,m=function(){return null},g=function(){return qx(function(N,j){return j.from},c)},x=function(){return!Object.values(c).filter(n4).length},v=function(N){d||(d=N);var j=N-d,S=j/r.dt;c=e3e(r,c,S),a(di(di(di({},e),n),g())),d=N,x()||(u=requestAnimationFrame(m))},y=function(N){f||(f=N);var j=(N-f)/s,S=qx(function(P,L){return kw.apply(void 0,RB(L).concat([r(j)]))},l);if(a(di(di(di({},e),n),S)),j<1)u=requestAnimationFrame(m);else{var A=qx(function(P,L){return kw.apply(void 0,RB(L).concat([r(1)]))},l);a(di(di(di({},e),n),A))}};return m=r.isStepper?v:y,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(u)}}});function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ig(e)}var n3e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function r3e(e,n){if(e==null)return{};var r=s3e(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function s3e(e,n){if(e==null)return{};var r={},s=Object.keys(e),a,o;for(o=0;o<s.length;o++)a=s[o],!(n.indexOf(a)>=0)&&(r[a]=e[a]);return r}function cP(e){return l3e(e)||o3e(e)||a3e(e)||i3e()}function i3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a3e(e,n){if(e){if(typeof e=="string")return r4(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r4(e,n)}}function o3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function l3e(e){if(Array.isArray(e))return r4(e)}function r4(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function IB(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function pl(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?IB(Object(r),!0).forEach(function(s){bx(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IB(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function bx(e,n,r){return n=NX(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function c3e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u3e(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,NX(s.key),s)}}function d3e(e,n,r){return n&&u3e(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function NX(e){var n=h3e(e,"string");return Ig(n)==="symbol"?n:String(n)}function h3e(e,n){if(Ig(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Ig(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function f3e(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&s4(e,n)}function s4(e,n){return s4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},s4(e,n)}function m3e(e){var n=p3e();return function(){var s=Ew(e),a;if(n){var o=Ew(this).constructor;a=Reflect.construct(s,arguments,o)}else a=s.apply(this,arguments);return i4(this,a)}}function i4(e,n){if(n&&(Ig(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a4(e)}function a4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p3e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ew(e){return Ew=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ew(e)}var Bh=(function(e){f3e(r,e);var n=m3e(r);function r(s,a){var o;c3e(this,r),o=n.call(this,s,a);var l=o.props,c=l.isActive,u=l.attributeName,d=l.from,f=l.to,m=l.steps,g=l.children,x=l.duration;if(o.handleStyleChange=o.handleStyleChange.bind(a4(o)),o.changeStyle=o.changeStyle.bind(a4(o)),!c||x<=0)return o.state={style:{}},typeof g=="function"&&(o.state={style:f}),i4(o);if(m&&m.length)o.state={style:m[0].style};else if(d){if(typeof g=="function")return o.state={style:d},i4(o);o.state={style:u?bx({},u,d):d}}else o.state={style:{}};return o}return d3e(r,[{key:"componentDidMount",value:function(){var a=this.props,o=a.isActive,l=a.canBegin;this.mounted=!0,!(!o||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var o=this.props,l=o.isActive,c=o.canBegin,u=o.attributeName,d=o.shouldReAnimate,f=o.to,m=o.from,g=this.state.style;if(c){if(!l){var x={style:u?bx({},u,f):f};this.state&&g&&(u&&g[u]!==f||!u&&g!==f)&&this.setState(x);return}if(!(wEe(a.to,f)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=v||d?m:a.to;if(this.state&&g){var b={style:u?bx({},u,y):y};(u&&g[u]!==y||!u&&g!==y)&&this.setState(b)}this.runAnimation(pl(pl({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var o=this,l=a.from,c=a.to,u=a.duration,d=a.easing,f=a.begin,m=a.onAnimationEnd,g=a.onAnimationStart,x=t3e(l,c,VEe(d),u,this.changeStyle),v=function(){o.stopJSAnimation=x()};this.manager.start([g,f,v,u,m])}},{key:"runStepAnimation",value:function(a){var o=this,l=a.steps,c=a.begin,u=a.onAnimationStart,d=l[0],f=d.style,m=d.duration,g=m===void 0?0:m,x=function(y,b,N){if(N===0)return y;var j=b.duration,S=b.easing,A=S===void 0?"ease":S,P=b.style,L=b.properties,O=b.onAnimationEnd,R=N>0?l[N-1]:b,q=L||Object.keys(P);if(typeof A=="function"||A==="spring")return[].concat(cP(y),[o.runJSAnimation.bind(o,{from:R.style,to:P,duration:j,easing:A}),j]);var U=TB(q,j,A),D=pl(pl(pl({},R.style),P),{},{transition:U});return[].concat(cP(y),[D,j,O]).filter(OEe)};return this.manager.start([u].concat(cP(l.reduce(x,[f,Math.max(g,c)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=AEe());var o=a.begin,l=a.duration,c=a.attributeName,u=a.to,d=a.easing,f=a.onAnimationStart,m=a.onAnimationEnd,g=a.steps,x=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(a);return}if(g.length>1){this.runStepAnimation(a);return}var y=c?bx({},c,u):u,b=TB(Object.keys(y),l,d);v.start([f,o,pl(pl({},y),{},{transition:b}),l,m])}},{key:"render",value:function(){var a=this.props,o=a.children;a.begin;var l=a.duration;a.attributeName,a.easing;var c=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var u=r3e(a,n3e),d=C.Children.count(o),f=this.state.style;if(typeof o=="function")return o(f);if(!c||d===0||l<=0)return o;var m=function(x){var v=x.props,y=v.style,b=y===void 0?{}:y,N=v.className,j=C.cloneElement(x,pl(pl({},u),{},{style:pl(pl({},b),f),className:N}));return j};return d===1?m(C.Children.only(o)):ve.createElement("div",null,C.Children.map(o,function(g){return m(g)}))}}]),r})(C.PureComponent);Bh.displayName="Animate";Bh.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Bh.propTypes={from:sr.oneOfType([sr.object,sr.string]),to:sr.oneOfType([sr.object,sr.string]),attributeName:sr.string,duration:sr.number,begin:sr.number,easing:sr.oneOfType([sr.string,sr.func]),steps:sr.arrayOf(sr.shape({duration:sr.number.isRequired,style:sr.object.isRequired,easing:sr.oneOfType([sr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),sr.func]),properties:sr.arrayOf("string"),onAnimationEnd:sr.func})),children:sr.oneOfType([sr.node,sr.func]),isActive:sr.bool,canBegin:sr.bool,onAnimationEnd:sr.func,shouldReAnimate:sr.bool,onAnimationStart:sr.func,onAnimationReStart:sr.func};function Lv(e){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Lv(e)}function Tw(){return Tw=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Tw.apply(this,arguments)}function g3e(e,n){return b3e(e)||y3e(e,n)||v3e(e,n)||x3e()}function x3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v3e(e,n){if(e){if(typeof e=="string")return MB(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MB(e,n)}}function MB(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function y3e(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,o,l,c=[],u=!0,d=!1;try{if(o=(r=r.call(e)).next,n!==0)for(;!(u=(s=o.call(r)).done)&&(c.push(s.value),c.length!==n);u=!0);}catch(f){d=!0,a=f}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}function b3e(e){if(Array.isArray(e))return e}function FB(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function BB(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?FB(Object(r),!0).forEach(function(s){w3e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FB(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function w3e(e,n,r){return n=j3e(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function j3e(e){var n=N3e(e,"string");return Lv(n)=="symbol"?n:n+""}function N3e(e,n){if(Lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Lv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var $B=function(n,r,s,a,o){var l=Math.min(Math.abs(s)/2,Math.abs(a)/2),c=a>=0?1:-1,u=s>=0?1:-1,d=a>=0&&s>=0||a<0&&s<0?1:0,f;if(l>0&&o instanceof Array){for(var m=[0,0,0,0],g=0,x=4;g<x;g++)m[g]=o[g]>l?l:o[g];f="M".concat(n,",").concat(r+c*m[0]),m[0]>0&&(f+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(n+u*m[0],",").concat(r)),f+="L ".concat(n+s-u*m[1],",").concat(r),m[1]>0&&(f+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(n+s,",").concat(r+c*m[1])),f+="L ".concat(n+s,",").concat(r+a-c*m[2]),m[2]>0&&(f+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(n+s-u*m[2],",").concat(r+a)),f+="L ".concat(n+u*m[3],",").concat(r+a),m[3]>0&&(f+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(n,",").concat(r+a-c*m[3])),f+="Z"}else if(l>0&&o===+o&&o>0){var v=Math.min(l,o);f="M ".concat(n,",").concat(r+c*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(n+u*v,",").concat(r,`
            L `).concat(n+s-u*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(n+s,",").concat(r+c*v,`
            L `).concat(n+s,",").concat(r+a-c*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(n+s-u*v,",").concat(r+a,`
            L `).concat(n+u*v,",").concat(r+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(n,",").concat(r+a-c*v," Z")}else f="M ".concat(n,",").concat(r," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return f},_3e=function(n,r){if(!n||!r)return!1;var s=n.x,a=n.y,o=r.x,l=r.y,c=r.width,u=r.height;if(Math.abs(c)>0&&Math.abs(u)>0){var d=Math.min(o,o+c),f=Math.max(o,o+c),m=Math.min(l,l+u),g=Math.max(l,l+u);return s>=d&&s<=f&&a>=m&&a<=g}return!1},S3e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kT=function(n){var r=BB(BB({},S3e),n),s=C.useRef(),a=C.useState(-1),o=g3e(a,2),l=o[0],c=o[1];C.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var A=s.current.getTotalLength();A&&c(A)}catch{}},[]);var u=r.x,d=r.y,f=r.width,m=r.height,g=r.radius,x=r.className,v=r.animationEasing,y=r.animationDuration,b=r.animationBegin,N=r.isAnimationActive,j=r.isUpdateAnimationActive;if(u!==+u||d!==+d||f!==+f||m!==+m||f===0||m===0)return null;var S=zn("recharts-rectangle",x);return j?ve.createElement(Bh,{canBegin:l>0,from:{width:f,height:m,x:u,y:d},to:{width:f,height:m,x:u,y:d},duration:y,animationEasing:v,isActive:j},function(A){var P=A.width,L=A.height,O=A.x,R=A.y;return ve.createElement(Bh,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,isActive:N,easing:v},ve.createElement("path",Tw({},Zn(r,!0),{className:S,d:$B(O,R,P,L,g),ref:s})))}):ve.createElement("path",Tw({},Zn(r,!0),{className:S,d:$B(u,d,f,m,g)}))};function o4(){return o4=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},o4.apply(this,arguments)}var _X=function(n){var r=n.cx,s=n.cy,a=n.r,o=n.className,l=zn("recharts-dot",o);return r===+r&&s===+s&&a===+a?C.createElement("circle",o4({},Zn(n,!1),Z1(n),{className:l,cx:r,cy:s,r:a})):null};function Rv(e){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Rv(e)}var C3e=["x","y","top","left","width","height","className"];function l4(){return l4=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},l4.apply(this,arguments)}function qB(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function P3e(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?qB(Object(r),!0).forEach(function(s){A3e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qB(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function A3e(e,n,r){return n=k3e(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function k3e(e){var n=E3e(e,"string");return Rv(n)=="symbol"?n:n+""}function E3e(e,n){if(Rv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Rv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function T3e(e,n){if(e==null)return{};var r=O3e(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function O3e(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}var L3e=function(n,r,s,a,o,l){return"M".concat(n,",").concat(o,"v").concat(a,"M").concat(l,",").concat(r,"h").concat(s)},R3e=function(n){var r=n.x,s=r===void 0?0:r,a=n.y,o=a===void 0?0:a,l=n.top,c=l===void 0?0:l,u=n.left,d=u===void 0?0:u,f=n.width,m=f===void 0?0:f,g=n.height,x=g===void 0?0:g,v=n.className,y=T3e(n,C3e),b=P3e({x:s,y:o,top:c,left:d,width:m,height:x},y);return!bt(s)||!bt(o)||!bt(m)||!bt(x)||!bt(c)||!bt(d)?null:ve.createElement("path",l4({},Zn(b,!0),{className:zn("recharts-cross",v),d:L3e(s,o,m,x,c,d)}))},uP,zB;function D3e(){if(zB)return uP;zB=1;var e=UY(),n=e(Object.getPrototypeOf,Object);return uP=n,uP}var dP,UB;function I3e(){if(UB)return dP;UB=1;var e=Gu(),n=D3e(),r=Yu(),s="[object Object]",a=Function.prototype,o=Object.prototype,l=a.toString,c=o.hasOwnProperty,u=l.call(Object);function d(f){if(!r(f)||e(f)!=s)return!1;var m=n(f);if(m===null)return!0;var g=c.call(m,"constructor")&&m.constructor;return typeof g=="function"&&g instanceof g&&l.call(g)==u}return dP=d,dP}var M3e=I3e();const F3e=ur(M3e);var hP,VB;function B3e(){if(VB)return hP;VB=1;var e=Gu(),n=Yu(),r="[object Boolean]";function s(a){return a===!0||a===!1||n(a)&&e(a)==r}return hP=s,hP}var $3e=B3e();const q3e=ur($3e);function Dv(e){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Dv(e)}function Ow(){return Ow=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ow.apply(this,arguments)}function z3e(e,n){return W3e(e)||H3e(e,n)||V3e(e,n)||U3e()}function U3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V3e(e,n){if(e){if(typeof e=="string")return HB(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HB(e,n)}}function HB(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function H3e(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,o,l,c=[],u=!0,d=!1;try{if(o=(r=r.call(e)).next,n!==0)for(;!(u=(s=o.call(r)).done)&&(c.push(s.value),c.length!==n);u=!0);}catch(f){d=!0,a=f}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}function W3e(e){if(Array.isArray(e))return e}function WB(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function KB(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?WB(Object(r),!0).forEach(function(s){K3e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WB(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function K3e(e,n,r){return n=G3e(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function G3e(e){var n=Y3e(e,"string");return Dv(n)=="symbol"?n:n+""}function Y3e(e,n){if(Dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Dv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var GB=function(n,r,s,a,o){var l=s-a,c;return c="M ".concat(n,",").concat(r),c+="L ".concat(n+s,",").concat(r),c+="L ".concat(n+s-l/2,",").concat(r+o),c+="L ".concat(n+s-l/2-a,",").concat(r+o),c+="L ".concat(n,",").concat(r," Z"),c},Q3e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},X3e=function(n){var r=KB(KB({},Q3e),n),s=C.useRef(),a=C.useState(-1),o=z3e(a,2),l=o[0],c=o[1];C.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var S=s.current.getTotalLength();S&&c(S)}catch{}},[]);var u=r.x,d=r.y,f=r.upperWidth,m=r.lowerWidth,g=r.height,x=r.className,v=r.animationEasing,y=r.animationDuration,b=r.animationBegin,N=r.isUpdateAnimationActive;if(u!==+u||d!==+d||f!==+f||m!==+m||g!==+g||f===0&&m===0||g===0)return null;var j=zn("recharts-trapezoid",x);return N?ve.createElement(Bh,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:g,x:u,y:d},to:{upperWidth:f,lowerWidth:m,height:g,x:u,y:d},duration:y,animationEasing:v,isActive:N},function(S){var A=S.upperWidth,P=S.lowerWidth,L=S.height,O=S.x,R=S.y;return ve.createElement(Bh,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,easing:v},ve.createElement("path",Ow({},Zn(r,!0),{className:j,d:GB(O,R,A,P,L),ref:s})))}):ve.createElement("g",null,ve.createElement("path",Ow({},Zn(r,!0),{className:j,d:GB(u,d,f,m,g)})))},J3e=["option","shapeType","propTransformer","activeClassName","isActive"];function Iv(e){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Iv(e)}function Z3e(e,n){if(e==null)return{};var r=eTe(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function eTe(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}function YB(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Lw(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?YB(Object(r),!0).forEach(function(s){tTe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YB(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function tTe(e,n,r){return n=nTe(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function nTe(e){var n=rTe(e,"string");return Iv(n)=="symbol"?n:n+""}function rTe(e,n){if(Iv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Iv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function sTe(e,n){return Lw(Lw({},n),e)}function iTe(e,n){return e==="symbols"}function QB(e){var n=e.shapeType,r=e.elementProps;switch(n){case"rectangle":return ve.createElement(kT,r);case"trapezoid":return ve.createElement(X3e,r);case"sector":return ve.createElement(gX,r);case"symbols":if(iTe(n))return ve.createElement(K3,r);break;default:return null}}function aTe(e){return C.isValidElement(e)?e.props:e}function oTe(e){var n=e.option,r=e.shapeType,s=e.propTransformer,a=s===void 0?sTe:s,o=e.activeClassName,l=o===void 0?"recharts-active-shape":o,c=e.isActive,u=Z3e(e,J3e),d;if(C.isValidElement(n))d=C.cloneElement(n,Lw(Lw({},u),aTe(n)));else if(Nn(n))d=n(u);else if(F3e(n)&&!q3e(n)){var f=a(n,u);d=ve.createElement(QB,{shapeType:r,elementProps:f})}else{var m=u;d=ve.createElement(QB,{shapeType:r,elementProps:m})}return c?ve.createElement(Zs,{className:l},d):d}function bj(e,n){return n!=null&&"trapezoids"in e.props}function wj(e,n){return n!=null&&"sectors"in e.props}function Mv(e,n){return n!=null&&"points"in e.props}function lTe(e,n){var r,s,a=e.x===(n==null||(r=n.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===n.x,o=e.y===(n==null||(s=n.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===n.y;return a&&o}function cTe(e,n){var r=e.endAngle===n.endAngle,s=e.startAngle===n.startAngle;return r&&s}function uTe(e,n){var r=e.x===n.x,s=e.y===n.y,a=e.z===n.z;return r&&s&&a}function dTe(e,n){var r;return bj(e,n)?r=lTe:wj(e,n)?r=cTe:Mv(e,n)&&(r=uTe),r}function hTe(e,n){var r;return bj(e,n)?r="trapezoids":wj(e,n)?r="sectors":Mv(e,n)&&(r="points"),r}function fTe(e,n){if(bj(e,n)){var r;return(r=n.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(wj(e,n)){var s;return(s=n.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return Mv(e,n)?n.payload:{}}function mTe(e){var n=e.activeTooltipItem,r=e.graphicalItem,s=e.itemData,a=hTe(r,n),o=fTe(r,n),l=s.filter(function(u,d){var f=ST(o,u),m=r.props[a].filter(function(v){var y=dTe(r,n);return y(v,n)}),g=r.props[a].indexOf(m[m.length-1]),x=d===g;return f&&x}),c=s.indexOf(l[l.length-1]);return c}var fP,XB;function pTe(){if(XB)return fP;XB=1;var e=Math.ceil,n=Math.max;function r(s,a,o,l){for(var c=-1,u=n(e((a-s)/(o||1)),0),d=Array(u);u--;)d[l?u:++c]=s,s+=o;return d}return fP=r,fP}var mP,JB;function SX(){if(JB)return mP;JB=1;var e=iQ(),n=1/0,r=17976931348623157e292;function s(a){if(!a)return a===0?a:0;if(a=e(a),a===n||a===-n){var o=a<0?-1:1;return o*r}return a===a?a:0}return mP=s,mP}var pP,ZB;function gTe(){if(ZB)return pP;ZB=1;var e=pTe(),n=lj(),r=SX();function s(a){return function(o,l,c){return c&&typeof c!="number"&&n(o,l,c)&&(l=c=void 0),o=r(o),l===void 0?(l=o,o=0):l=r(l),c=c===void 0?o<l?1:-1:r(c),e(o,l,c,a)}}return pP=s,pP}var gP,e$;function xTe(){if(e$)return gP;e$=1;var e=gTe(),n=e();return gP=n,gP}var vTe=xTe();const Rw=ur(vTe);function Fv(e){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Fv(e)}function t$(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function n$(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?t$(Object(r),!0).forEach(function(s){CX(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t$(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function CX(e,n,r){return n=yTe(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function yTe(e){var n=bTe(e,"string");return Fv(n)=="symbol"?n:n+""}function bTe(e,n){if(Fv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Fv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var wTe=["Webkit","Moz","O","ms"],jTe=function(n,r){var s=n.replace(/(\w)/,function(o){return o.toUpperCase()}),a=wTe.reduce(function(o,l){return n$(n$({},o),{},CX({},l+s,r))},{});return a[n]=r,a};function Mg(e){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Mg(e)}function Dw(){return Dw=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Dw.apply(this,arguments)}function r$(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function xP(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?r$(Object(r),!0).forEach(function(s){eo(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r$(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function NTe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s$(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,AX(s.key),s)}}function _Te(e,n,r){return n&&s$(e.prototype,n),r&&s$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function STe(e,n,r){return n=Iw(n),CTe(e,PX()?Reflect.construct(n,r||[],Iw(e).constructor):n.apply(e,r))}function CTe(e,n){if(n&&(Mg(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PTe(e)}function PTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PX=function(){return!!e})()}function Iw(e){return Iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Iw(e)}function ATe(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&c4(e,n)}function c4(e,n){return c4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},c4(e,n)}function eo(e,n,r){return n=AX(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function AX(e){var n=kTe(e,"string");return Mg(n)=="symbol"?n:n+""}function kTe(e,n){if(Mg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Mg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ETe=function(n){var r=n.data,s=n.startIndex,a=n.endIndex,o=n.x,l=n.width,c=n.travellerWidth;if(!r||!r.length)return{};var u=r.length,d=Bx().domain(Rw(0,u)).range([o,o+l-c]),f=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(a),scale:d,scaleValues:f}},i$=function(n){return n.changedTouches&&!!n.changedTouches.length},Fg=(function(e){function n(r){var s;return NTe(this,n),s=STe(this,n,[r]),eo(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),eo(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),eo(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,o=a.endIndex,l=a.onDragEnd,c=a.startIndex;l==null||l({endIndex:o,startIndex:c})}),s.detachDragEndListener()}),eo(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),eo(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),eo(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),eo(s,"handleSlideDragStart",function(a){var o=i$(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return ATe(n,e),_Te(n,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,o=s.endX,l=this.state.scaleValues,c=this.props,u=c.gap,d=c.data,f=d.length-1,m=Math.min(a,o),g=Math.max(a,o),x=n.getIndexInRange(l,m),v=n.getIndexInRange(l,g);return{startIndex:x-x%u,endIndex:v===f?f:v-v%u}}},{key:"getTextOfTick",value:function(s){var a=this.props,o=a.data,l=a.tickFormatter,c=a.dataKey,u=Lc(o[s],c,s);return Nn(l)?l(u,s):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,o=a.slideMoveStartX,l=a.startX,c=a.endX,u=this.props,d=u.x,f=u.width,m=u.travellerWidth,g=u.startIndex,x=u.endIndex,v=u.onChange,y=s.pageX-o;y>0?y=Math.min(y,d+f-m-c,d+f-m-l):y<0&&(y=Math.max(y,d-l,d-c));var b=this.getIndex({startX:l+y,endX:c+y});(b.startIndex!==g||b.endIndex!==x)&&v&&v(b),this.setState({startX:l+y,endX:c+y,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var o=i$(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,o=a.brushMoveStartX,l=a.movingTravellerId,c=a.endX,u=a.startX,d=this.state[l],f=this.props,m=f.x,g=f.width,x=f.travellerWidth,v=f.onChange,y=f.gap,b=f.data,N={startX:this.state.startX,endX:this.state.endX},j=s.pageX-o;j>0?j=Math.min(j,m+g-x-d):j<0&&(j=Math.max(j,m-d)),N[l]=d+j;var S=this.getIndex(N),A=S.startIndex,P=S.endIndex,L=function(){var R=b.length-1;return l==="startX"&&(c>u?A%y===0:P%y===0)||c<u&&P===R||l==="endX"&&(c>u?P%y===0:A%y===0)||c>u&&P===R};this.setState(eo(eo({},l,d+j),"brushMoveStartX",s.pageX),function(){v&&L()&&v(S)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var o=this,l=this.state,c=l.scaleValues,u=l.startX,d=l.endX,f=this.state[a],m=c.indexOf(f);if(m!==-1){var g=m+s;if(!(g===-1||g>=c.length)){var x=c[g];a==="startX"&&x>=d||a==="endX"&&x<=u||this.setState(eo({},a,x),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,o=s.y,l=s.width,c=s.height,u=s.fill,d=s.stroke;return ve.createElement("rect",{stroke:d,fill:u,x:a,y:o,width:l,height:c})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,o=s.y,l=s.width,c=s.height,u=s.data,d=s.children,f=s.padding,m=C.Children.only(d);return m?ve.cloneElement(m,{x:a,y:o,width:l,height:c,margin:f,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(s,a){var o,l,c=this,u=this.props,d=u.y,f=u.travellerWidth,m=u.height,g=u.traveller,x=u.ariaLabel,v=u.data,y=u.startIndex,b=u.endIndex,N=Math.max(s,this.props.x),j=xP(xP({},Zn(this.props,!1)),{},{x:N,y:d,width:f,height:m}),S=x||"Min value: ".concat((o=v[y])===null||o===void 0?void 0:o.name,", Max value: ").concat((l=v[b])===null||l===void 0?void 0:l.name);return ve.createElement(Zs,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(P){["ArrowLeft","ArrowRight"].includes(P.key)&&(P.preventDefault(),P.stopPropagation(),c.handleTravellerMoveKeyboard(P.key==="ArrowRight"?1:-1,a))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},n.renderTraveller(g,j))}},{key:"renderSlide",value:function(s,a){var o=this.props,l=o.y,c=o.height,u=o.stroke,d=o.travellerWidth,f=Math.min(s,a)+d,m=Math.max(Math.abs(a-s)-d,0);return ve.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:f,y:l,width:m,height:c})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,o=s.endIndex,l=s.y,c=s.height,u=s.travellerWidth,d=s.stroke,f=this.state,m=f.startX,g=f.endX,x=5,v={pointerEvents:"none",fill:d};return ve.createElement(Zs,{className:"recharts-brush-texts"},ve.createElement(dw,Dw({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,g)-x,y:l+c/2},v),this.getTextOfTick(a)),ve.createElement(dw,Dw({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,g)+u+x,y:l+c/2},v),this.getTextOfTick(o)))}},{key:"render",value:function(){var s=this.props,a=s.data,o=s.className,l=s.children,c=s.x,u=s.y,d=s.width,f=s.height,m=s.alwaysShowText,g=this.state,x=g.startX,v=g.endX,y=g.isTextActive,b=g.isSlideMoving,N=g.isTravellerMoving,j=g.isTravellerFocused;if(!a||!a.length||!bt(c)||!bt(u)||!bt(d)||!bt(f)||d<=0||f<=0)return null;var S=zn("recharts-brush",o),A=ve.Children.count(l)===1,P=jTe("userSelect","none");return ve.createElement(Zs,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:P},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(x,v),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(v,"endX"),(y||b||N||j||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,o=s.y,l=s.width,c=s.height,u=s.stroke,d=Math.floor(o+c/2)-1;return ve.createElement(ve.Fragment,null,ve.createElement("rect",{x:a,y:o,width:l,height:c,fill:u,stroke:"none"}),ve.createElement("line",{x1:a+1,y1:d,x2:a+l-1,y2:d,fill:"none",stroke:"#fff"}),ve.createElement("line",{x1:a+1,y1:d+2,x2:a+l-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var o;return ve.isValidElement(s)?o=ve.cloneElement(s,a):Nn(s)?o=s(a):o=n.renderDefaultTraveller(a),o}},{key:"getDerivedStateFromProps",value:function(s,a){var o=s.data,l=s.width,c=s.x,u=s.travellerWidth,d=s.updateId,f=s.startIndex,m=s.endIndex;if(o!==a.prevData||d!==a.prevUpdateId)return xP({prevData:o,prevTravellerWidth:u,prevUpdateId:d,prevX:c,prevWidth:l},o&&o.length?ETe({data:o,width:l,x:c,travellerWidth:u,startIndex:f,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(l!==a.prevWidth||c!==a.prevX||u!==a.prevTravellerWidth)){a.scale.range([c,c+l-u]);var g=a.scale.domain().map(function(x){return a.scale(x)});return{prevData:o,prevTravellerWidth:u,prevUpdateId:d,prevX:c,prevWidth:l,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(s,a){for(var o=s.length,l=0,c=o-1;c-l>1;){var u=Math.floor((l+c)/2);s[u]>a?c=u:l=u}return a>=s[c]?c:l}}])})(C.PureComponent);eo(Fg,"displayName","Brush");eo(Fg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var vP,a$;function TTe(){if(a$)return vP;a$=1;var e=eT();function n(r,s){var a;return e(r,function(o,l,c){return a=s(o,l,c),!a}),!!a}return vP=n,vP}var yP,o$;function OTe(){if(o$)return yP;o$=1;var e=IY(),n=Kh(),r=TTe(),s=$a(),a=lj();function o(l,c,u){var d=s(l)?e:r;return u&&a(l,c,u)&&(c=void 0),d(l,n(c,3))}return yP=o,yP}var LTe=OTe();const RTe=ur(LTe);var Cc=function(n,r){var s=n.alwaysShow,a=n.ifOverflow;return s&&(a="extendDomain"),a===r},bP,l$;function DTe(){if(l$)return bP;l$=1;var e=eQ();function n(r,s,a){s=="__proto__"&&e?e(r,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[s]=a}return bP=n,bP}var wP,c$;function ITe(){if(c$)return wP;c$=1;var e=DTe(),n=JY(),r=Kh();function s(a,o){var l={};return o=r(o,3),n(a,function(c,u,d){e(l,u,o(c,u,d))}),l}return wP=s,wP}var MTe=ITe();const FTe=ur(MTe);var jP,u$;function BTe(){if(u$)return jP;u$=1;function e(n,r){for(var s=-1,a=n==null?0:n.length;++s<a;)if(!r(n[s],s,n))return!1;return!0}return jP=e,jP}var NP,d$;function $Te(){if(d$)return NP;d$=1;var e=eT();function n(r,s){var a=!0;return e(r,function(o,l,c){return a=!!s(o,l,c),a}),a}return NP=n,NP}var _P,h$;function qTe(){if(h$)return _P;h$=1;var e=BTe(),n=$Te(),r=Kh(),s=$a(),a=lj();function o(l,c,u){var d=s(l)?e:n;return u&&a(l,c,u)&&(c=void 0),d(l,r(c,3))}return _P=o,_P}var zTe=qTe();const kX=ur(zTe);var UTe=["x","y"];function Bv(e){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bv(e)}function u4(){return u4=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},u4.apply(this,arguments)}function f$(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ax(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?f$(Object(r),!0).forEach(function(s){VTe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f$(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function VTe(e,n,r){return n=HTe(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function HTe(e){var n=WTe(e,"string");return Bv(n)=="symbol"?n:n+""}function WTe(e,n){if(Bv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Bv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function KTe(e,n){if(e==null)return{};var r=GTe(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function GTe(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}function YTe(e,n){var r=e.x,s=e.y,a=KTe(e,UTe),o="".concat(r),l=parseInt(o,10),c="".concat(s),u=parseInt(c,10),d="".concat(n.height||a.height),f=parseInt(d,10),m="".concat(n.width||a.width),g=parseInt(m,10);return ax(ax(ax(ax(ax({},n),a),l?{x:l}:{}),u?{y:u}:{}),{},{height:f,width:g,name:n.name,radius:n.radius})}function m$(e){return ve.createElement(oTe,u4({shapeType:"rectangle",propTransformer:YTe,activeClassName:"recharts-active-bar"},e))}var QTe=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof n=="number")return n;var o=bt(s)||aje(s);return o?n(s,a):(o||km(),r)}},XTe=["value","background"],EX;function Bg(e){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bg(e)}function JTe(e,n){if(e==null)return{};var r=ZTe(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function ZTe(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Mw(){return Mw=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Mw.apply(this,arguments)}function p$(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ns(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?p$(Object(r),!0).forEach(function(s){ch(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p$(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function e8e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function g$(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,OX(s.key),s)}}function t8e(e,n,r){return n&&g$(e.prototype,n),r&&g$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function n8e(e,n,r){return n=Fw(n),r8e(e,TX()?Reflect.construct(n,r||[],Fw(e).constructor):n.apply(e,r))}function r8e(e,n){if(n&&(Bg(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s8e(e)}function s8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TX=function(){return!!e})()}function Fw(e){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fw(e)}function i8e(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&d4(e,n)}function d4(e,n){return d4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},d4(e,n)}function ch(e,n,r){return n=OX(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function OX(e){var n=a8e(e,"string");return Bg(n)=="symbol"?n:n+""}function a8e(e,n){if(Bg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Bg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bu=(function(e){function n(){var r;e8e(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=n8e(this,n,[].concat(a)),ch(r,"state",{isAnimationFinished:!1}),ch(r,"id",tj("recharts-bar-")),ch(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),l&&l()}),ch(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),l&&l()}),r}return i8e(n,e),t8e(n,[{key:"renderRectanglesStatically",value:function(s){var a=this,o=this.props,l=o.shape,c=o.dataKey,u=o.activeIndex,d=o.activeBar,f=Zn(this.props,!1);return s&&s.map(function(m,g){var x=g===u,v=x?d:l,y=Ns(Ns(Ns({},f),m),{},{isActive:x,option:v,index:g,dataKey:c,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return ve.createElement(Zs,Mw({className:"recharts-bar-rectangle"},ew(a.props,m,g),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(g)}),ve.createElement(m$,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,o=a.data,l=a.layout,c=a.isAnimationActive,u=a.animationBegin,d=a.animationDuration,f=a.animationEasing,m=a.animationId,g=this.state.prevData;return ve.createElement(Bh,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var v=x.t,y=o.map(function(b,N){var j=g&&g[N];if(j){var S=Pp(j.x,b.x),A=Pp(j.y,b.y),P=Pp(j.width,b.width),L=Pp(j.height,b.height);return Ns(Ns({},b),{},{x:S(v),y:A(v),width:P(v),height:L(v)})}if(l==="horizontal"){var O=Pp(0,b.height),R=O(v);return Ns(Ns({},b),{},{y:b.y+b.height-R,height:R})}var q=Pp(0,b.width),U=q(v);return Ns(Ns({},b),{},{width:U})});return ve.createElement(Zs,null,s.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,o=s.isAnimationActive,l=this.state.prevData;return o&&a&&a.length&&(!l||!ST(l,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,o=a.data,l=a.dataKey,c=a.activeIndex,u=Zn(this.props.background,!1);return o.map(function(d,f){d.value;var m=d.background,g=JTe(d,XTe);if(!m)return null;var x=Ns(Ns(Ns(Ns(Ns({},g),{},{fill:"#eee"},m),u),ew(s.props,d,f)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:l,index:f,className:"recharts-bar-background-rectangle"});return ve.createElement(m$,Mw({key:"background-bar-".concat(f),option:s.props.background,isActive:f===c},x))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.data,c=o.xAxis,u=o.yAxis,d=o.layout,f=o.children,m=Pl(f,yj);if(!m)return null;var g=d==="vertical"?l[0].height/2:l[0].width/2,x=function(b,N){var j=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:j,errorVal:Lc(b,N)}},v={clipPath:s?"url(#clipPath-".concat(a,")"):null};return ve.createElement(Zs,v,m.map(function(y){return ve.cloneElement(y,{key:"error-bar-".concat(a,"-").concat(y.props.dataKey),data:l,xAxis:c,yAxis:u,layout:d,offset:g,dataPointFormatter:x})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,o=s.data,l=s.className,c=s.xAxis,u=s.yAxis,d=s.left,f=s.top,m=s.width,g=s.height,x=s.isAnimationActive,v=s.background,y=s.id;if(a||!o||!o.length)return null;var b=this.state.isAnimationFinished,N=zn("recharts-bar",l),j=c&&c.allowDataOverflow,S=u&&u.allowDataOverflow,A=j||S,P=er(y)?this.id:y;return ve.createElement(Zs,{className:N},j||S?ve.createElement("defs",null,ve.createElement("clipPath",{id:"clipPath-".concat(P)},ve.createElement("rect",{x:j?d:d-m/2,y:S?f:f-g/2,width:j?m:m*2,height:S?g:g*2}))):null,ve.createElement(Zs,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(P,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,P),(!x||b)&&um.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])})(C.PureComponent);EX=Bu;ch(Bu,"displayName","Bar");ch(Bu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!by.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ch(Bu,"getComposedData",function(e){var n=e.props,r=e.item,s=e.barPosition,a=e.bandSize,o=e.xAxis,l=e.yAxis,c=e.xAxisTicks,u=e.yAxisTicks,d=e.stackedData,f=e.dataStartIndex,m=e.displayedData,g=e.offset,x=Ske(s,r);if(!x)return null;var v=n.layout,y=r.type.defaultProps,b=y!==void 0?Ns(Ns({},y),r.props):r.props,N=b.dataKey,j=b.children,S=b.minPointSize,A=v==="horizontal"?l:o,P=d?A.scale.domain():null,L=Lke({numericAxis:A}),O=Pl(j,oQ),R=m.map(function(q,U){var D,M,G,Y,Z,X;d?D=Cke(d[f+U],P):(D=Lc(q,N),Array.isArray(D)||(D=[L,D]));var re=QTe(S,EX.defaultProps.minPointSize)(D[1],U);if(v==="horizontal"){var z,te=[l.scale(D[0]),l.scale(D[1])],le=te[0],Q=te[1];M=J7({axis:o,ticks:c,bandSize:a,offset:x.offset,entry:q,index:U}),G=(z=Q??le)!==null&&z!==void 0?z:void 0,Y=x.size;var T=le-Q;if(Z=Number.isNaN(T)?0:T,X={x:M,y:l.y,width:Y,height:l.height},Math.abs(re)>0&&Math.abs(Z)<Math.abs(re)){var B=Cl(Z||re)*(Math.abs(re)-Math.abs(Z));G-=B,Z+=B}}else{var H=[o.scale(D[0]),o.scale(D[1])],ee=H[0],ce=H[1];if(M=ee,G=J7({axis:l,ticks:u,bandSize:a,offset:x.offset,entry:q,index:U}),Y=ce-ee,Z=x.size,X={x:o.x,y:G,width:o.width,height:Z},Math.abs(re)>0&&Math.abs(Y)<Math.abs(re)){var he=Cl(Y||re)*(Math.abs(re)-Math.abs(Y));Y+=he}}return Ns(Ns(Ns({},q),{},{x:M,y:G,width:Y,height:Z,value:d?D:D[1],payload:q,background:X},O&&O[U]&&O[U].props),{},{tooltipPayload:[fX(r,q)],tooltipPosition:{x:M+Y/2,y:G+Z/2}})});return Ns({data:R,layout:v},g)});function $v(e){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$v(e)}function o8e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function x$(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,LX(s.key),s)}}function l8e(e,n,r){return n&&x$(e.prototype,n),r&&x$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v$(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function jl(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?v$(Object(r),!0).forEach(function(s){jj(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v$(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function jj(e,n,r){return n=LX(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function LX(e){var n=c8e(e,"string");return $v(n)=="symbol"?n:n+""}function c8e(e,n){if($v(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if($v(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var u8e=function(n,r,s,a,o){var l=n.width,c=n.height,u=n.layout,d=n.children,f=Object.keys(r),m={left:s.left,leftMirror:s.left,right:l-s.right,rightMirror:l-s.right,top:s.top,topMirror:s.top,bottom:c-s.bottom,bottomMirror:c-s.bottom},g=!!to(d,Bu);return f.reduce(function(x,v){var y=r[v],b=y.orientation,N=y.domain,j=y.padding,S=j===void 0?{}:j,A=y.mirror,P=y.reversed,L="".concat(b).concat(A?"Mirror":""),O,R,q,U,D;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var M=N[1]-N[0],G=1/0,Y=y.categoricalDomain.sort(cje);if(Y.forEach(function(H,ee){ee>0&&(G=Math.min((H||0)-(Y[ee-1]||0),G))}),Number.isFinite(G)){var Z=G/M,X=y.layout==="vertical"?s.height:s.width;if(y.padding==="gap"&&(O=Z*X/2),y.padding==="no-gap"){var re=Pm(n.barCategoryGap,Z*X),z=Z*X/2;O=z-re-(z-re)/X*re}}}a==="xAxis"?R=[s.left+(S.left||0)+(O||0),s.left+s.width-(S.right||0)-(O||0)]:a==="yAxis"?R=u==="horizontal"?[s.top+s.height-(S.bottom||0),s.top+(S.top||0)]:[s.top+(S.top||0)+(O||0),s.top+s.height-(S.bottom||0)-(O||0)]:R=y.range,P&&(R=[R[1],R[0]]);var te=Nke(y,o,g),le=te.scale,Q=te.realScaleType;le.domain(N).range(R),_ke(le);var T=Oke(le,jl(jl({},y),{},{realScaleType:Q}));a==="xAxis"?(D=b==="top"&&!A||b==="bottom"&&A,q=s.left,U=m[L]-D*y.height):a==="yAxis"&&(D=b==="left"&&!A||b==="right"&&A,q=m[L]-D*y.width,U=s.top);var B=jl(jl(jl({},y),T),{},{realScaleType:Q,x:q,y:U,scale:le,width:a==="xAxis"?s.width:y.width,height:a==="yAxis"?s.height:y.height});return B.bandSize=Sw(B,T),!y.hide&&a==="xAxis"?m[L]+=(D?-1:1)*B.height:y.hide||(m[L]+=(D?-1:1)*B.width),jl(jl({},x),{},jj({},v,B))},{})},RX=function(n,r){var s=n.x,a=n.y,o=r.x,l=r.y;return{x:Math.min(s,o),y:Math.min(a,l),width:Math.abs(o-s),height:Math.abs(l-a)}},d8e=function(n){var r=n.x1,s=n.y1,a=n.x2,o=n.y2;return RX({x:r,y:s},{x:a,y:o})},DX=(function(){function e(n){o8e(this,e),this.scale=n}return l8e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,o=s.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(a){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+u}return this.scale(r)}}},{key:"isInRange",value:function(r){var s=this.range(),a=s[0],o=s[s.length-1];return a<=o?r>=a&&r<=o:r>=o&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])})();jj(DX,"EPS",1e-4);var ET=function(n){var r=Object.keys(n).reduce(function(s,a){return jl(jl({},s),{},jj({},a,DX.create(n[a])))},{});return jl(jl({},r),{},{apply:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=o.bandAware,c=o.position;return FTe(a,function(u,d){return r[d].apply(u,{bandAware:l,position:c})})},isInRange:function(a){return kX(a,function(o,l){return r[l].isInRange(o)})}})};function h8e(e){return(e%180+180)%180}var f8e=function(n){var r=n.width,s=n.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=h8e(a),l=o*Math.PI/180,c=Math.atan(s/r),u=l>c&&l<Math.PI-c?s/Math.sin(l):r/Math.cos(l);return Math.abs(u)},SP,y$;function m8e(){if(y$)return SP;y$=1;var e=Kh(),n=yy(),r=aj();function s(a){return function(o,l,c){var u=Object(o);if(!n(o)){var d=e(l,3);o=r(o),l=function(m){return d(u[m],m,u)}}var f=a(o,l,c);return f>-1?u[d?o[f]:f]:void 0}}return SP=s,SP}var CP,b$;function p8e(){if(b$)return CP;b$=1;var e=SX();function n(r){var s=e(r),a=s%1;return s===s?a?s-a:s:0}return CP=n,CP}var PP,w$;function g8e(){if(w$)return PP;w$=1;var e=KY(),n=Kh(),r=p8e(),s=Math.max;function a(o,l,c){var u=o==null?0:o.length;if(!u)return-1;var d=c==null?0:r(c);return d<0&&(d=s(u+d,0)),e(o,n(l,3),d)}return PP=a,PP}var AP,j$;function x8e(){if(j$)return AP;j$=1;var e=m8e(),n=g8e(),r=e(n);return AP=r,AP}var v8e=x8e();const y8e=ur(v8e);var b8e=cY();const w8e=ur(b8e);var j8e=w8e(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),TT=C.createContext(void 0),OT=C.createContext(void 0),IX=C.createContext(void 0),MX=C.createContext({}),FX=C.createContext(void 0),BX=C.createContext(0),$X=C.createContext(0),N$=function(n){var r=n.state,s=r.xAxisMap,a=r.yAxisMap,o=r.offset,l=n.clipPathId,c=n.children,u=n.width,d=n.height,f=j8e(o);return ve.createElement(TT.Provider,{value:s},ve.createElement(OT.Provider,{value:a},ve.createElement(MX.Provider,{value:o},ve.createElement(IX.Provider,{value:f},ve.createElement(FX.Provider,{value:l},ve.createElement(BX.Provider,{value:d},ve.createElement($X.Provider,{value:u},c)))))))},N8e=function(){return C.useContext(FX)},qX=function(n){var r=C.useContext(TT);r==null&&km();var s=r[n];return s==null&&km(),s},_8e=function(){var n=C.useContext(TT);return Xd(n)},S8e=function(){var n=C.useContext(OT),r=y8e(n,function(s){return kX(s.domain,Number.isFinite)});return r||Xd(n)},zX=function(n){var r=C.useContext(OT);r==null&&km();var s=r[n];return s==null&&km(),s},C8e=function(){var n=C.useContext(IX);return n},P8e=function(){return C.useContext(MX)},LT=function(){return C.useContext($X)},RT=function(){return C.useContext(BX)};function $g(e){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$g(e)}function A8e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function k8e(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,VX(s.key),s)}}function E8e(e,n,r){return n&&k8e(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function T8e(e,n,r){return n=Bw(n),O8e(e,UX()?Reflect.construct(n,r||[],Bw(e).constructor):n.apply(e,r))}function O8e(e,n){if(n&&($g(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L8e(e)}function L8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UX=function(){return!!e})()}function Bw(e){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bw(e)}function R8e(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&h4(e,n)}function h4(e,n){return h4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},h4(e,n)}function _$(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function S$(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?_$(Object(r),!0).forEach(function(s){DT(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_$(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function DT(e,n,r){return n=VX(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function VX(e){var n=D8e(e,"string");return $g(n)=="symbol"?n:n+""}function D8e(e,n){if($g(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if($g(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function I8e(e,n){return $8e(e)||B8e(e,n)||F8e(e,n)||M8e()}function M8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F8e(e,n){if(e){if(typeof e=="string")return C$(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C$(e,n)}}function C$(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function B8e(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,o,l,c=[],u=!0,d=!1;try{if(o=(r=r.call(e)).next,n!==0)for(;!(u=(s=o.call(r)).done)&&(c.push(s.value),c.length!==n);u=!0);}catch(f){d=!0,a=f}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}function $8e(e){if(Array.isArray(e))return e}function f4(){return f4=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},f4.apply(this,arguments)}var q8e=function(n,r){var s;return ve.isValidElement(n)?s=ve.cloneElement(n,r):Nn(n)?s=n(r):s=ve.createElement("line",f4({},r,{className:"recharts-reference-line-line"})),s},z8e=function(n,r,s,a,o,l,c,u,d){var f=o.x,m=o.y,g=o.width,x=o.height;if(s){var v=d.y,y=n.y.apply(v,{position:l});if(Cc(d,"discard")&&!n.y.isInRange(y))return null;var b=[{x:f+g,y},{x:f,y}];return u==="left"?b.reverse():b}if(r){var N=d.x,j=n.x.apply(N,{position:l});if(Cc(d,"discard")&&!n.x.isInRange(j))return null;var S=[{x:j,y:m+x},{x:j,y:m}];return c==="top"?S.reverse():S}if(a){var A=d.segment,P=A.map(function(L){return n.apply(L,{position:l})});return Cc(d,"discard")&&RTe(P,function(L){return!n.isInRange(L)})?null:P}return null};function U8e(e){var n=e.x,r=e.y,s=e.segment,a=e.xAxisId,o=e.yAxisId,l=e.shape,c=e.className,u=e.alwaysShow,d=N8e(),f=qX(a),m=zX(o),g=C8e();if(!d||!g)return null;Mu(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=ET({x:f.scale,y:m.scale}),v=Bs(n),y=Bs(r),b=s&&s.length===2,N=z8e(x,v,y,b,g,e.position,f.orientation,m.orientation,e);if(!N)return null;var j=I8e(N,2),S=j[0],A=S.x,P=S.y,L=j[1],O=L.x,R=L.y,q=Cc(e,"hidden")?"url(#".concat(d,")"):void 0,U=S$(S$({clipPath:q},Zn(e,!0)),{},{x1:A,y1:P,x2:O,y2:R});return ve.createElement(Zs,{className:zn("recharts-reference-line",c)},q8e(l,U),Di.renderCallByParent(e,d8e({x1:A,y1:P,x2:O,y2:R})))}var IT=(function(e){function n(){return A8e(this,n),T8e(this,n,arguments)}return R8e(n,e),E8e(n,[{key:"render",value:function(){return ve.createElement(U8e,this.props)}}])})(ve.Component);DT(IT,"displayName","ReferenceLine");DT(IT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function m4(){return m4=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},m4.apply(this,arguments)}function qg(e){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qg(e)}function P$(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function A$(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?P$(Object(r),!0).forEach(function(s){Nj(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function V8e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function H8e(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,WX(s.key),s)}}function W8e(e,n,r){return n&&H8e(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function K8e(e,n,r){return n=$w(n),G8e(e,HX()?Reflect.construct(n,r||[],$w(e).constructor):n.apply(e,r))}function G8e(e,n){if(n&&(qg(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y8e(e)}function Y8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HX=function(){return!!e})()}function $w(e){return $w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$w(e)}function Q8e(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&p4(e,n)}function p4(e,n){return p4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},p4(e,n)}function Nj(e,n,r){return n=WX(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function WX(e){var n=X8e(e,"string");return qg(n)=="symbol"?n:n+""}function X8e(e,n){if(qg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(qg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var J8e=function(n){var r=n.x,s=n.y,a=n.xAxis,o=n.yAxis,l=ET({x:a.scale,y:o.scale}),c=l.apply({x:r,y:s},{bandAware:!0});return Cc(n,"discard")&&!l.isInRange(c)?null:c},_j=(function(e){function n(){return V8e(this,n),K8e(this,n,arguments)}return Q8e(n,e),W8e(n,[{key:"render",value:function(){var s=this.props,a=s.x,o=s.y,l=s.r,c=s.alwaysShow,u=s.clipPathId,d=Bs(a),f=Bs(o);if(Mu(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var m=J8e(this.props);if(!m)return null;var g=m.x,x=m.y,v=this.props,y=v.shape,b=v.className,N=Cc(this.props,"hidden")?"url(#".concat(u,")"):void 0,j=A$(A$({clipPath:N},Zn(this.props,!0)),{},{cx:g,cy:x});return ve.createElement(Zs,{className:zn("recharts-reference-dot",b)},n.renderDot(y,j),Di.renderCallByParent(this.props,{x:g-l,y:x-l,width:2*l,height:2*l}))}}])})(ve.Component);Nj(_j,"displayName","ReferenceDot");Nj(_j,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Nj(_j,"renderDot",function(e,n){var r;return ve.isValidElement(e)?r=ve.cloneElement(e,n):Nn(e)?r=e(n):r=ve.createElement(_X,m4({},n,{cx:n.cx,cy:n.cy,className:"recharts-reference-dot-dot"})),r});function g4(){return g4=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},g4.apply(this,arguments)}function zg(e){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zg(e)}function k$(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function E$(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?k$(Object(r),!0).forEach(function(s){Sj(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k$(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Z8e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function eOe(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,GX(s.key),s)}}function tOe(e,n,r){return n&&eOe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nOe(e,n,r){return n=qw(n),rOe(e,KX()?Reflect.construct(n,r||[],qw(e).constructor):n.apply(e,r))}function rOe(e,n){if(n&&(zg(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sOe(e)}function sOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KX=function(){return!!e})()}function qw(e){return qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qw(e)}function iOe(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&x4(e,n)}function x4(e,n){return x4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},x4(e,n)}function Sj(e,n,r){return n=GX(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function GX(e){var n=aOe(e,"string");return zg(n)=="symbol"?n:n+""}function aOe(e,n){if(zg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(zg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var oOe=function(n,r,s,a,o){var l=o.x1,c=o.x2,u=o.y1,d=o.y2,f=o.xAxis,m=o.yAxis;if(!f||!m)return null;var g=ET({x:f.scale,y:m.scale}),x={x:n?g.x.apply(l,{position:"start"}):g.x.rangeMin,y:s?g.y.apply(u,{position:"start"}):g.y.rangeMin},v={x:r?g.x.apply(c,{position:"end"}):g.x.rangeMax,y:a?g.y.apply(d,{position:"end"}):g.y.rangeMax};return Cc(o,"discard")&&(!g.isInRange(x)||!g.isInRange(v))?null:RX(x,v)},Cj=(function(e){function n(){return Z8e(this,n),nOe(this,n,arguments)}return iOe(n,e),tOe(n,[{key:"render",value:function(){var s=this.props,a=s.x1,o=s.x2,l=s.y1,c=s.y2,u=s.className,d=s.alwaysShow,f=s.clipPathId;Mu(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Bs(a),g=Bs(o),x=Bs(l),v=Bs(c),y=this.props.shape;if(!m&&!g&&!x&&!v&&!y)return null;var b=oOe(m,g,x,v,this.props);if(!b&&!y)return null;var N=Cc(this.props,"hidden")?"url(#".concat(f,")"):void 0;return ve.createElement(Zs,{className:zn("recharts-reference-area",u)},n.renderRect(y,E$(E$({clipPath:N},Zn(this.props,!0)),b)),Di.renderCallByParent(this.props,b))}}])})(ve.Component);Sj(Cj,"displayName","ReferenceArea");Sj(Cj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Sj(Cj,"renderRect",function(e,n){var r;return ve.isValidElement(e)?r=ve.cloneElement(e,n):Nn(e)?r=e(n):r=ve.createElement(kT,g4({},n,{className:"recharts-reference-area-rect"})),r});function YX(e,n,r){if(n<1)return[];if(n===1&&r===void 0)return e;for(var s=[],a=0;a<e.length;a+=n)s.push(e[a]);return s}function lOe(e,n,r){var s={width:e.width+n.width,height:e.height+n.height};return f8e(s,r)}function cOe(e,n,r){var s=r==="width",a=e.x,o=e.y,l=e.width,c=e.height;return n===1?{start:s?a:o,end:s?a+l:o+c}:{start:s?a+l:o+c,end:s?a:o}}function zw(e,n,r,s,a){if(e*n<e*s||e*n>e*a)return!1;var o=r();return e*(n-e*o/2-s)>=0&&e*(n+e*o/2-a)<=0}function uOe(e,n){return YX(e,n+1)}function dOe(e,n,r,s,a){for(var o=(s||[]).slice(),l=n.start,c=n.end,u=0,d=1,f=l,m=function(){var v=s==null?void 0:s[u];if(v===void 0)return{v:YX(s,d)};var y=u,b,N=function(){return b===void 0&&(b=r(v,y)),b},j=v.coordinate,S=u===0||zw(e,j,N,f,c);S||(u=0,f=l,d+=1),S&&(f=j+e*(N()/2+a),u+=d)},g;d<=o.length;)if(g=m(),g)return g.v;return[]}function qv(e){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qv(e)}function T$(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ri(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?T$(Object(r),!0).forEach(function(s){hOe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function hOe(e,n,r){return n=fOe(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function fOe(e){var n=mOe(e,"string");return qv(n)=="symbol"?n:n+""}function mOe(e,n){if(qv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(qv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function pOe(e,n,r,s,a){for(var o=(s||[]).slice(),l=o.length,c=n.start,u=n.end,d=function(g){var x=o[g],v,y=function(){return v===void 0&&(v=r(x,g)),v};if(g===l-1){var b=e*(x.coordinate+e*y()/2-u);o[g]=x=Ri(Ri({},x),{},{tickCoord:b>0?x.coordinate-b*e:x.coordinate})}else o[g]=x=Ri(Ri({},x),{},{tickCoord:x.coordinate});var N=zw(e,x.tickCoord,y,c,u);N&&(u=x.tickCoord-e*(y()/2+a),o[g]=Ri(Ri({},x),{},{isShow:!0}))},f=l-1;f>=0;f--)d(f);return o}function gOe(e,n,r,s,a,o){var l=(s||[]).slice(),c=l.length,u=n.start,d=n.end;if(o){var f=s[c-1],m=r(f,c-1),g=e*(f.coordinate+e*m/2-d);l[c-1]=f=Ri(Ri({},f),{},{tickCoord:g>0?f.coordinate-g*e:f.coordinate});var x=zw(e,f.tickCoord,function(){return m},u,d);x&&(d=f.tickCoord-e*(m/2+a),l[c-1]=Ri(Ri({},f),{},{isShow:!0}))}for(var v=o?c-1:c,y=function(j){var S=l[j],A,P=function(){return A===void 0&&(A=r(S,j)),A};if(j===0){var L=e*(S.coordinate-e*P()/2-u);l[j]=S=Ri(Ri({},S),{},{tickCoord:L<0?S.coordinate-L*e:S.coordinate})}else l[j]=S=Ri(Ri({},S),{},{tickCoord:S.coordinate});var O=zw(e,S.tickCoord,P,u,d);O&&(u=S.tickCoord+e*(P()/2+a),l[j]=Ri(Ri({},S),{},{isShow:!0}))},b=0;b<v;b++)y(b);return l}function MT(e,n,r){var s=e.tick,a=e.ticks,o=e.viewBox,l=e.minTickGap,c=e.orientation,u=e.interval,d=e.tickFormatter,f=e.unit,m=e.angle;if(!a||!a.length||!s)return[];if(bt(u)||by.isSsr)return uOe(a,typeof u=="number"&&bt(u)?u:0);var g=[],x=c==="top"||c==="bottom"?"width":"height",v=f&&x==="width"?Fx(f,{fontSize:n,letterSpacing:r}):{width:0,height:0},y=function(S,A){var P=Nn(d)?d(S.value,A):S.value;return x==="width"?lOe(Fx(P,{fontSize:n,letterSpacing:r}),v,m):Fx(P,{fontSize:n,letterSpacing:r})[x]},b=a.length>=2?Cl(a[1].coordinate-a[0].coordinate):1,N=cOe(o,b,x);return u==="equidistantPreserveStart"?dOe(b,N,y,a,l):(u==="preserveStart"||u==="preserveStartEnd"?g=gOe(b,N,y,a,l,u==="preserveStartEnd"):g=pOe(b,N,y,a,l),g.filter(function(j){return j.isShow}))}var xOe=["viewBox"],vOe=["viewBox"],yOe=["ticks"];function Ug(e){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ug(e)}function Up(){return Up=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Up.apply(this,arguments)}function O$(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Is(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?O$(Object(r),!0).forEach(function(s){FT(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O$(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function kP(e,n){if(e==null)return{};var r=bOe(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function bOe(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}function wOe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function L$(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,XX(s.key),s)}}function jOe(e,n,r){return n&&L$(e.prototype,n),r&&L$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NOe(e,n,r){return n=Uw(n),_Oe(e,QX()?Reflect.construct(n,r||[],Uw(e).constructor):n.apply(e,r))}function _Oe(e,n){if(n&&(Ug(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SOe(e)}function SOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QX=function(){return!!e})()}function Uw(e){return Uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uw(e)}function COe(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&v4(e,n)}function v4(e,n){return v4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},v4(e,n)}function FT(e,n,r){return n=XX(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function XX(e){var n=POe(e,"string");return Ug(n)=="symbol"?n:n+""}function POe(e,n){if(Ug(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Ug(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var x0=(function(e){function n(r){var s;return wOe(this,n),s=NOe(this,n,[r]),s.state={fontSize:"",letterSpacing:""},s}return COe(n,e),jOe(n,[{key:"shouldComponentUpdate",value:function(s,a){var o=s.viewBox,l=kP(s,xOe),c=this.props,u=c.viewBox,d=kP(c,vOe);return!rg(o,u)||!rg(l,d)||!rg(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,o=a.x,l=a.y,c=a.width,u=a.height,d=a.orientation,f=a.tickSize,m=a.mirror,g=a.tickMargin,x,v,y,b,N,j,S=m?-1:1,A=s.tickSize||f,P=bt(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":x=v=s.coordinate,b=l+ +!m*u,y=b-S*A,j=y-S*g,N=P;break;case"left":y=b=s.coordinate,v=o+ +!m*c,x=v-S*A,N=x-S*g,j=P;break;case"right":y=b=s.coordinate,v=o+ +m*c,x=v+S*A,N=x+S*g,j=P;break;default:x=v=s.coordinate,b=l+ +m*u,y=b+S*A,j=y+S*g,N=P;break}return{line:{x1:x,y1:y,x2:v,y2:b},tick:{x:N,y:j}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,o=s.mirror,l;switch(a){case"left":l=o?"start":"end";break;case"right":l=o?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,o=s.mirror,l="end";switch(a){case"left":case"right":l="middle";break;case"top":l=o?"start":"end";break;default:l=o?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,d=s.mirror,f=s.axisLine,m=Is(Is(Is({},Zn(this.props,!1)),Zn(f,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var g=+(u==="top"&&!d||u==="bottom"&&d);m=Is(Is({},m),{},{x1:a,y1:o+g*c,x2:a+l,y2:o+g*c})}else{var x=+(u==="left"&&!d||u==="right"&&d);m=Is(Is({},m),{},{x1:a+x*l,y1:o,x2:a+x*l,y2:o+c})}return ve.createElement("line",Up({},m,{className:zn("recharts-cartesian-axis-line",$o(f,"className"))}))}},{key:"renderTicks",value:function(s,a,o){var l=this,c=this.props,u=c.tickLine,d=c.stroke,f=c.tick,m=c.tickFormatter,g=c.unit,x=MT(Is(Is({},this.props),{},{ticks:s}),a,o),v=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),b=Zn(this.props,!1),N=Zn(f,!1),j=Is(Is({},b),{},{fill:"none"},Zn(u,!1)),S=x.map(function(A,P){var L=l.getTickLineCoord(A),O=L.line,R=L.tick,q=Is(Is(Is(Is({textAnchor:v,verticalAnchor:y},b),{},{stroke:"none",fill:d},N),R),{},{index:P,payload:A,visibleTicksCount:x.length,tickFormatter:m});return ve.createElement(Zs,Up({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},ew(l.props,A,P)),u&&ve.createElement("line",Up({},j,O,{className:zn("recharts-cartesian-axis-tick-line",$o(u,"className"))})),f&&n.renderTickItem(f,q,"".concat(Nn(m)?m(A.value,P):A.value).concat(g||"")))});return ve.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var s=this,a=this.props,o=a.axisLine,l=a.width,c=a.height,u=a.ticksGenerator,d=a.className,f=a.hide;if(f)return null;var m=this.props,g=m.ticks,x=kP(m,yOe),v=g;return Nn(u)&&(v=g&&g.length>0?u(this.props):u(x)),l<=0||c<=0||!v||!v.length?null:ve.createElement(Zs,{className:zn("recharts-cartesian-axis",d),ref:function(b){s.layerReference=b}},o&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Di.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,o){var l,c=zn(a.className,"recharts-cartesian-axis-tick-value");return ve.isValidElement(s)?l=ve.cloneElement(s,Is(Is({},a),{},{className:c})):Nn(s)?l=s(Is(Is({},a),{},{className:c})):l=ve.createElement(dw,Up({},a,{className:"recharts-cartesian-axis-tick-value"}),o),l}}])})(C.Component);FT(x0,"displayName","CartesianAxis");FT(x0,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var AOe=["x1","y1","x2","y2","key"],kOe=["offset"];function Em(e){"@babel/helpers - typeof";return Em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Em(e)}function R$(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ii(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?R$(Object(r),!0).forEach(function(s){EOe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function EOe(e,n,r){return n=TOe(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function TOe(e){var n=OOe(e,"string");return Em(n)=="symbol"?n:n+""}function OOe(e,n){if(Em(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Em(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Wf(){return Wf=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Wf.apply(this,arguments)}function D$(e,n){if(e==null)return{};var r=LOe(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function LOe(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}var ROe=function(n){var r=n.fill;if(!r||r==="none")return null;var s=n.fillOpacity,a=n.x,o=n.y,l=n.width,c=n.height,u=n.ry;return ve.createElement("rect",{x:a,y:o,ry:u,width:l,height:c,stroke:"none",fill:r,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function JX(e,n){var r;if(ve.isValidElement(e))r=ve.cloneElement(e,n);else if(Nn(e))r=e(n);else{var s=n.x1,a=n.y1,o=n.x2,l=n.y2,c=n.key,u=D$(n,AOe),d=Zn(u,!1);d.offset;var f=D$(d,kOe);r=ve.createElement("line",Wf({},f,{x1:s,y1:a,x2:o,y2:l,fill:"none",key:c}))}return r}function DOe(e){var n=e.x,r=e.width,s=e.horizontal,a=s===void 0?!0:s,o=e.horizontalPoints;if(!a||!o||!o.length)return null;var l=o.map(function(c,u){var d=Ii(Ii({},e),{},{x1:n,y1:c,x2:n+r,y2:c,key:"line-".concat(u),index:u});return JX(a,d)});return ve.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function IOe(e){var n=e.y,r=e.height,s=e.vertical,a=s===void 0?!0:s,o=e.verticalPoints;if(!a||!o||!o.length)return null;var l=o.map(function(c,u){var d=Ii(Ii({},e),{},{x1:c,y1:n,x2:c,y2:n+r,key:"line-".concat(u),index:u});return JX(a,d)});return ve.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function MOe(e){var n=e.horizontalFill,r=e.fillOpacity,s=e.x,a=e.y,o=e.width,l=e.height,c=e.horizontalPoints,u=e.horizontal,d=u===void 0?!0:u;if(!d||!n||!n.length)return null;var f=c.map(function(g){return Math.round(g+a-a)}).sort(function(g,x){return g-x});a!==f[0]&&f.unshift(0);var m=f.map(function(g,x){var v=!f[x+1],y=v?a+l-g:f[x+1]-g;if(y<=0)return null;var b=x%n.length;return ve.createElement("rect",{key:"react-".concat(x),y:g,x:s,height:y,width:o,stroke:"none",fill:n[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ve.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function FOe(e){var n=e.vertical,r=n===void 0?!0:n,s=e.verticalFill,a=e.fillOpacity,o=e.x,l=e.y,c=e.width,u=e.height,d=e.verticalPoints;if(!r||!s||!s.length)return null;var f=d.map(function(g){return Math.round(g+o-o)}).sort(function(g,x){return g-x});o!==f[0]&&f.unshift(0);var m=f.map(function(g,x){var v=!f[x+1],y=v?o+c-g:f[x+1]-g;if(y<=0)return null;var b=x%s.length;return ve.createElement("rect",{key:"react-".concat(x),x:g,y:l,width:y,height:u,stroke:"none",fill:s[b],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ve.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var BOe=function(n,r){var s=n.xAxis,a=n.width,o=n.height,l=n.offset;return dX(MT(Ii(Ii(Ii({},x0.defaultProps),s),{},{ticks:Eu(s,!0),viewBox:{x:0,y:0,width:a,height:o}})),l.left,l.left+l.width,r)},$Oe=function(n,r){var s=n.yAxis,a=n.width,o=n.height,l=n.offset;return dX(MT(Ii(Ii(Ii({},x0.defaultProps),s),{},{ticks:Eu(s,!0),viewBox:{x:0,y:0,width:a,height:o}})),l.top,l.top+l.height,r)},Ep={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ZX(e){var n,r,s,a,o,l,c=LT(),u=RT(),d=P8e(),f=Ii(Ii({},e),{},{stroke:(n=e.stroke)!==null&&n!==void 0?n:Ep.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Ep.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:Ep.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Ep.horizontalFill,vertical:(o=e.vertical)!==null&&o!==void 0?o:Ep.vertical,verticalFill:(l=e.verticalFill)!==null&&l!==void 0?l:Ep.verticalFill,x:bt(e.x)?e.x:d.left,y:bt(e.y)?e.y:d.top,width:bt(e.width)?e.width:d.width,height:bt(e.height)?e.height:d.height}),m=f.x,g=f.y,x=f.width,v=f.height,y=f.syncWithTicks,b=f.horizontalValues,N=f.verticalValues,j=_8e(),S=S8e();if(!bt(x)||x<=0||!bt(v)||v<=0||!bt(m)||m!==+m||!bt(g)||g!==+g)return null;var A=f.verticalCoordinatesGenerator||BOe,P=f.horizontalCoordinatesGenerator||$Oe,L=f.horizontalPoints,O=f.verticalPoints;if((!L||!L.length)&&Nn(P)){var R=b&&b.length,q=P({yAxis:S?Ii(Ii({},S),{},{ticks:R?b:S.ticks}):void 0,width:c,height:u,offset:d},R?!0:y);Mu(Array.isArray(q),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Em(q),"]")),Array.isArray(q)&&(L=q)}if((!O||!O.length)&&Nn(A)){var U=N&&N.length,D=A({xAxis:j?Ii(Ii({},j),{},{ticks:U?N:j.ticks}):void 0,width:c,height:u,offset:d},U?!0:y);Mu(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Em(D),"]")),Array.isArray(D)&&(O=D)}return ve.createElement("g",{className:"recharts-cartesian-grid"},ve.createElement(ROe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),ve.createElement(DOe,Wf({},f,{offset:d,horizontalPoints:L,xAxis:j,yAxis:S})),ve.createElement(IOe,Wf({},f,{offset:d,verticalPoints:O,xAxis:j,yAxis:S})),ve.createElement(MOe,Wf({},f,{horizontalPoints:L})),ve.createElement(FOe,Wf({},f,{verticalPoints:O})))}ZX.displayName="CartesianGrid";function Vg(e){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vg(e)}function qOe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function zOe(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,nJ(s.key),s)}}function UOe(e,n,r){return n&&zOe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function VOe(e,n,r){return n=Vw(n),HOe(e,eJ()?Reflect.construct(n,r||[],Vw(e).constructor):n.apply(e,r))}function HOe(e,n){if(n&&(Vg(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WOe(e)}function WOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eJ=function(){return!!e})()}function Vw(e){return Vw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vw(e)}function KOe(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&y4(e,n)}function y4(e,n){return y4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},y4(e,n)}function tJ(e,n,r){return n=nJ(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function nJ(e){var n=GOe(e,"string");return Vg(n)=="symbol"?n:n+""}function GOe(e,n){if(Vg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Vg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function b4(){return b4=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},b4.apply(this,arguments)}function YOe(e){var n=e.xAxisId,r=LT(),s=RT(),a=qX(n);return a==null?null:C.createElement(x0,b4({},a,{className:zn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(l){return Eu(l,!0)}}))}var Pj=(function(e){function n(){return qOe(this,n),VOe(this,n,arguments)}return KOe(n,e),UOe(n,[{key:"render",value:function(){return C.createElement(YOe,this.props)}}])})(C.Component);tJ(Pj,"displayName","XAxis");tJ(Pj,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Hg(e){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Hg(e)}function QOe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function XOe(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,iJ(s.key),s)}}function JOe(e,n,r){return n&&XOe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZOe(e,n,r){return n=Hw(n),eLe(e,rJ()?Reflect.construct(n,r||[],Hw(e).constructor):n.apply(e,r))}function eLe(e,n){if(n&&(Hg(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tLe(e)}function tLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rJ=function(){return!!e})()}function Hw(e){return Hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hw(e)}function nLe(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&w4(e,n)}function w4(e,n){return w4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},w4(e,n)}function sJ(e,n,r){return n=iJ(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function iJ(e){var n=rLe(e,"string");return Hg(n)=="symbol"?n:n+""}function rLe(e,n){if(Hg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Hg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function j4(){return j4=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},j4.apply(this,arguments)}var sLe=function(n){var r=n.yAxisId,s=LT(),a=RT(),o=zX(r);return o==null?null:C.createElement(x0,j4({},o,{className:zn("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(c){return Eu(c,!0)}}))},Aj=(function(e){function n(){return QOe(this,n),ZOe(this,n,arguments)}return nLe(n,e),JOe(n,[{key:"render",value:function(){return C.createElement(sLe,this.props)}}])})(C.Component);sJ(Aj,"displayName","YAxis");sJ(Aj,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function I$(e){return lLe(e)||oLe(e)||aLe(e)||iLe()}function iLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aLe(e,n){if(e){if(typeof e=="string")return N4(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N4(e,n)}}function oLe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lLe(e){if(Array.isArray(e))return N4(e)}function N4(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}var _4=function(n,r,s,a,o){var l=Pl(n,IT),c=Pl(n,_j),u=[].concat(I$(l),I$(c)),d=Pl(n,Cj),f="".concat(a,"Id"),m=a[0],g=r;if(u.length&&(g=u.reduce(function(y,b){if(b.props[f]===s&&Cc(b.props,"extendDomain")&&bt(b.props[m])){var N=b.props[m];return[Math.min(y[0],N),Math.max(y[1],N)]}return y},g)),d.length){var x="".concat(m,"1"),v="".concat(m,"2");g=d.reduce(function(y,b){if(b.props[f]===s&&Cc(b.props,"extendDomain")&&bt(b.props[x])&&bt(b.props[v])){var N=b.props[x],j=b.props[v];return[Math.min(y[0],N,j),Math.max(y[1],N,j)]}return y},g)}return o&&o.length&&(g=o.reduce(function(y,b){return bt(b)?[Math.min(y[0],b),Math.max(y[1],b)]:y},g)),g},EP={exports:{}},M$;function cLe(){return M$||(M$=1,(function(e){var n=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function a(u,d,f){this.fn=u,this.context=d,this.once=f||!1}function o(u,d,f,m,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new a(f,m||u,g),v=r?r+d:d;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],x]:u._events[v].push(x):(u._events[v]=x,u._eventsCount++),u}function l(u,d){--u._eventsCount===0?u._events=new s:delete u._events[d]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],f,m;if(this._eventsCount===0)return d;for(m in f=this._events)n.call(f,m)&&d.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},c.prototype.listeners=function(d){var f=r?r+d:d,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,x=m.length,v=new Array(x);g<x;g++)v[g]=m[g].fn;return v},c.prototype.listenerCount=function(d){var f=r?r+d:d,m=this._events[f];return m?m.fn?1:m.length:0},c.prototype.emit=function(d,f,m,g,x,v){var y=r?r+d:d;if(!this._events[y])return!1;var b=this._events[y],N=arguments.length,j,S;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),N){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,f),!0;case 3:return b.fn.call(b.context,f,m),!0;case 4:return b.fn.call(b.context,f,m,g),!0;case 5:return b.fn.call(b.context,f,m,g,x),!0;case 6:return b.fn.call(b.context,f,m,g,x,v),!0}for(S=1,j=new Array(N-1);S<N;S++)j[S-1]=arguments[S];b.fn.apply(b.context,j)}else{var A=b.length,P;for(S=0;S<A;S++)switch(b[S].once&&this.removeListener(d,b[S].fn,void 0,!0),N){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,f);break;case 3:b[S].fn.call(b[S].context,f,m);break;case 4:b[S].fn.call(b[S].context,f,m,g);break;default:if(!j)for(P=1,j=new Array(N-1);P<N;P++)j[P-1]=arguments[P];b[S].fn.apply(b[S].context,j)}}return!0},c.prototype.on=function(d,f,m){return o(this,d,f,m,!1)},c.prototype.once=function(d,f,m){return o(this,d,f,m,!0)},c.prototype.removeListener=function(d,f,m,g){var x=r?r+d:d;if(!this._events[x])return this;if(!f)return l(this,x),this;var v=this._events[x];if(v.fn)v.fn===f&&(!g||v.once)&&(!m||v.context===m)&&l(this,x);else{for(var y=0,b=[],N=v.length;y<N;y++)(v[y].fn!==f||g&&!v[y].once||m&&v[y].context!==m)&&b.push(v[y]);b.length?this._events[x]=b.length===1?b[0]:b:l(this,x)}return this},c.prototype.removeAllListeners=function(d){var f;return d?(f=r?r+d:d,this._events[f]&&l(this,f)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,e.exports=c})(EP)),EP.exports}var uLe=cLe();const dLe=ur(uLe);var TP=new dLe,OP="recharts.syncMouseEvents";function zv(e){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zv(e)}function hLe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function fLe(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,aJ(s.key),s)}}function mLe(e,n,r){return n&&fLe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function LP(e,n,r){return n=aJ(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function aJ(e){var n=pLe(e,"string");return zv(n)=="symbol"?n:n+""}function pLe(e,n){if(zv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(zv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gLe=(function(){function e(){hLe(this,e),LP(this,"activeIndex",0),LP(this,"coordinateList",[]),LP(this,"layout","horizontal")}return mLe(e,[{key:"setDetails",value:function(r){var s,a=r.coordinateList,o=a===void 0?null:a,l=r.container,c=l===void 0?null:l,u=r.layout,d=u===void 0?null:u,f=r.offset,m=f===void 0?null:f,g=r.mouseHandlerCallback,x=g===void 0?null:g;this.coordinateList=(s=o??this.coordinateList)!==null&&s!==void 0?s:[],this.container=c??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),o=a.x,l=a.y,c=a.height,u=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((s=window)===null||s===void 0?void 0:s.scrollY)||0,m=o+u+d,g=l+this.offset.top+c/2+f;this.mouseHandlerCallback({pageX:m,pageY:g})}}}])})();function xLe(e,n,r){if(r==="number"&&n===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],a=e==null?void 0:e[1];if(s&&a&&bt(s)&&bt(a))return!0}return!1}function vLe(e,n,r,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?n.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:n.y-a,width:e==="horizontal"?s:r.width-1,height:e==="horizontal"?r.height-1:s}}function oJ(e){var n=e.cx,r=e.cy,s=e.radius,a=e.startAngle,o=e.endAngle,l=fi(n,r,s,a),c=fi(n,r,s,o);return{points:[l,c],cx:n,cy:r,radius:s,startAngle:a,endAngle:o}}function yLe(e,n,r){var s,a,o,l;if(e==="horizontal")s=n.x,o=s,a=r.top,l=r.top+r.height;else if(e==="vertical")a=n.y,l=a,s=r.left,o=r.left+r.width;else if(n.cx!=null&&n.cy!=null)if(e==="centric"){var c=n.cx,u=n.cy,d=n.innerRadius,f=n.outerRadius,m=n.angle,g=fi(c,u,d,m),x=fi(c,u,f,m);s=g.x,a=g.y,o=x.x,l=x.y}else return oJ(n);return[{x:s,y:a},{x:o,y:l}]}function Uv(e){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Uv(e)}function F$(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function zb(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?F$(Object(r),!0).forEach(function(s){bLe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function bLe(e,n,r){return n=wLe(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function wLe(e){var n=jLe(e,"string");return Uv(n)=="symbol"?n:n+""}function jLe(e,n){if(Uv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Uv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function NLe(e){var n,r,s=e.element,a=e.tooltipEventType,o=e.isActive,l=e.activeCoordinate,c=e.activePayload,u=e.offset,d=e.activeTooltipIndex,f=e.tooltipAxisBandSize,m=e.layout,g=e.chartName,x=(n=s.props.cursor)!==null&&n!==void 0?n:(r=s.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!s||!x||!o||!l||g!=="ScatterChart"&&a!=="axis")return null;var v,y=pB;if(g==="ScatterChart")v=l,y=R3e;else if(g==="BarChart")v=vLe(m,l,u,f),y=kT;else if(m==="radial"){var b=oJ(l),N=b.cx,j=b.cy,S=b.radius,A=b.startAngle,P=b.endAngle;v={cx:N,cy:j,startAngle:A,endAngle:P,innerRadius:S,outerRadius:S},y=gX}else v={points:yLe(m,l,u)},y=pB;var L=zb(zb(zb(zb({stroke:"#ccc",pointerEvents:"none"},u),v),Zn(x,!1)),{},{payload:c,payloadIndex:d,className:zn("recharts-tooltip-cursor",x.className)});return C.isValidElement(x)?C.cloneElement(x,L):C.createElement(y,L)}var _Le=["item"],SLe=["children","className","width","height","style","compact","title","desc"];function Wg(e){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wg(e)}function Vp(){return Vp=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Vp.apply(this,arguments)}function B$(e,n){return ALe(e)||PLe(e,n)||cJ(e,n)||CLe()}function CLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PLe(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,o,l,c=[],u=!0,d=!1;try{if(o=(r=r.call(e)).next,n!==0)for(;!(u=(s=o.call(r)).done)&&(c.push(s.value),c.length!==n);u=!0);}catch(f){d=!0,a=f}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}function ALe(e){if(Array.isArray(e))return e}function $$(e,n){if(e==null)return{};var r=kLe(e,n),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function kLe(e,n){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(n.indexOf(s)>=0)continue;r[s]=e[s]}return r}function ELe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function TLe(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uJ(s.key),s)}}function OLe(e,n,r){return n&&TLe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function LLe(e,n,r){return n=Ww(n),RLe(e,lJ()?Reflect.construct(n,r||[],Ww(e).constructor):n.apply(e,r))}function RLe(e,n){if(n&&(Wg(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DLe(e)}function DLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lJ=function(){return!!e})()}function Ww(e){return Ww=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ww(e)}function ILe(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&S4(e,n)}function S4(e,n){return S4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},S4(e,n)}function Kg(e){return BLe(e)||FLe(e)||cJ(e)||MLe()}function MLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cJ(e,n){if(e){if(typeof e=="string")return C4(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C4(e,n)}}function FLe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BLe(e){if(Array.isArray(e))return C4(e)}function C4(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function q$(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Xe(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?q$(Object(r),!0).forEach(function(s){Xt(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q$(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Xt(e,n,r){return n=uJ(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function uJ(e){var n=$Le(e,"string");return Wg(n)=="symbol"?n:n+""}function $Le(e,n){if(Wg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(Wg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var qLe={xAxis:["bottom","top"],yAxis:["left","right"]},zLe={width:"100%",height:"100%"},dJ={x:0,y:0};function Ub(e){return e}var ULe=function(n,r){return r==="horizontal"?n.x:r==="vertical"?n.y:r==="centric"?n.angle:n.radius},VLe=function(n,r,s,a){var o=r.find(function(f){return f&&f.index===s});if(o){if(n==="horizontal")return{x:o.coordinate,y:a.y};if(n==="vertical")return{x:a.x,y:o.coordinate};if(n==="centric"){var l=o.coordinate,c=a.radius;return Xe(Xe(Xe({},a),fi(a.cx,a.cy,c,l)),{},{angle:l,radius:c})}var u=o.coordinate,d=a.angle;return Xe(Xe(Xe({},a),fi(a.cx,a.cy,u,d)),{},{angle:d,radius:u})}return dJ},kj=function(n,r){var s=r.graphicalItems,a=r.dataStartIndex,o=r.dataEndIndex,l=(s??[]).reduce(function(c,u){var d=u.props.data;return d&&d.length?[].concat(Kg(c),Kg(d)):c},[]);return l.length>0?l:n&&n.length&&bt(a)&&bt(o)?n.slice(a,o+1):[]};function hJ(e){return e==="number"?[0,"auto"]:void 0}var P4=function(n,r,s,a){var o=n.graphicalItems,l=n.tooltipAxis,c=kj(r,n);return s<0||!o||!o.length||s>=c.length?null:o.reduce(function(u,d){var f,m=(f=d.props.data)!==null&&f!==void 0?f:r;m&&n.dataStartIndex+n.dataEndIndex!==0&&n.dataEndIndex-n.dataStartIndex>=s&&(m=m.slice(n.dataStartIndex,n.dataEndIndex+1));var g;if(l.dataKey&&!l.allowDuplicatedCategory){var x=m===void 0?c:m;g=fk(x,l.dataKey,a)}else g=m&&m[s]||c[s];return g?[].concat(Kg(u),[fX(d,g)]):u},[])},z$=function(n,r,s,a){var o=a||{x:n.chartX,y:n.chartY},l=ULe(o,s),c=n.orderedTooltipTicks,u=n.tooltipAxis,d=n.tooltipTicks,f=xke(l,c,d,u);if(f>=0&&d){var m=d[f]&&d[f].value,g=P4(n,r,f,m),x=VLe(s,c,f,o);return{activeTooltipIndex:f,activeLabel:m,activePayload:g,activeCoordinate:x}}return null},HLe=function(n,r){var s=r.axes,a=r.graphicalItems,o=r.axisType,l=r.axisIdKey,c=r.stackGroups,u=r.dataStartIndex,d=r.dataEndIndex,f=n.layout,m=n.children,g=n.stackOffset,x=uX(f,o);return s.reduce(function(v,y){var b,N=y.type.defaultProps!==void 0?Xe(Xe({},y.type.defaultProps),y.props):y.props,j=N.type,S=N.dataKey,A=N.allowDataOverflow,P=N.allowDuplicatedCategory,L=N.scale,O=N.ticks,R=N.includeHidden,q=N[l];if(v[q])return v;var U=kj(n.data,{graphicalItems:a.filter(function(T){var B,H=l in T.props?T.props[l]:(B=T.type.defaultProps)===null||B===void 0?void 0:B[l];return H===q}),dataStartIndex:u,dataEndIndex:d}),D=U.length,M,G,Y;xLe(N.domain,A,j)&&(M=Kk(N.domain,null,A),x&&(j==="number"||L!=="auto")&&(Y=$x(U,S,"category")));var Z=hJ(j);if(!M||M.length===0){var X,re=(X=N.domain)!==null&&X!==void 0?X:Z;if(S){if(M=$x(U,S,j),j==="category"&&x){var z=lje(M);P&&z?(G=M,M=Rw(0,D)):P||(M=tB(re,M,y).reduce(function(T,B){return T.indexOf(B)>=0?T:[].concat(Kg(T),[B])},[]))}else if(j==="category")P?M=M.filter(function(T){return T!==""&&!er(T)}):M=tB(re,M,y).reduce(function(T,B){return T.indexOf(B)>=0||B===""||er(B)?T:[].concat(Kg(T),[B])},[]);else if(j==="number"){var te=jke(U,a.filter(function(T){var B,H,ee=l in T.props?T.props[l]:(B=T.type.defaultProps)===null||B===void 0?void 0:B[l],ce="hide"in T.props?T.props.hide:(H=T.type.defaultProps)===null||H===void 0?void 0:H.hide;return ee===q&&(R||!ce)}),S,o,f);te&&(M=te)}x&&(j==="number"||L!=="auto")&&(Y=$x(U,S,"category"))}else x?M=Rw(0,D):c&&c[q]&&c[q].hasStack&&j==="number"?M=g==="expand"?[0,1]:hX(c[q].stackGroups,u,d):M=cX(U,a.filter(function(T){var B=l in T.props?T.props[l]:T.type.defaultProps[l],H="hide"in T.props?T.props.hide:T.type.defaultProps.hide;return B===q&&(R||!H)}),j,f,!0);if(j==="number")M=_4(m,M,q,o,O),re&&(M=Kk(re,M,A));else if(j==="category"&&re){var le=re,Q=M.every(function(T){return le.indexOf(T)>=0});Q&&(M=le)}}return Xe(Xe({},v),{},Xt({},q,Xe(Xe({},N),{},{axisType:o,domain:M,categoricalDomain:Y,duplicateDomain:G,originalDomain:(b=N.domain)!==null&&b!==void 0?b:Z,isCategorical:x,layout:f})))},{})},WLe=function(n,r){var s=r.graphicalItems,a=r.Axis,o=r.axisType,l=r.axisIdKey,c=r.stackGroups,u=r.dataStartIndex,d=r.dataEndIndex,f=n.layout,m=n.children,g=kj(n.data,{graphicalItems:s,dataStartIndex:u,dataEndIndex:d}),x=g.length,v=uX(f,o),y=-1;return s.reduce(function(b,N){var j=N.type.defaultProps!==void 0?Xe(Xe({},N.type.defaultProps),N.props):N.props,S=j[l],A=hJ("number");if(!b[S]){y++;var P;return v?P=Rw(0,x):c&&c[S]&&c[S].hasStack?(P=hX(c[S].stackGroups,u,d),P=_4(m,P,S,o)):(P=Kk(A,cX(g,s.filter(function(L){var O,R,q=l in L.props?L.props[l]:(O=L.type.defaultProps)===null||O===void 0?void 0:O[l],U="hide"in L.props?L.props.hide:(R=L.type.defaultProps)===null||R===void 0?void 0:R.hide;return q===S&&!U}),"number",f),a.defaultProps.allowDataOverflow),P=_4(m,P,S,o)),Xe(Xe({},b),{},Xt({},S,Xe(Xe({axisType:o},a.defaultProps),{},{hide:!0,orientation:$o(qLe,"".concat(o,".").concat(y%2),null),domain:P,originalDomain:A,isCategorical:v,layout:f})))}return b},{})},KLe=function(n,r){var s=r.axisType,a=s===void 0?"xAxis":s,o=r.AxisComp,l=r.graphicalItems,c=r.stackGroups,u=r.dataStartIndex,d=r.dataEndIndex,f=n.children,m="".concat(a,"Id"),g=Pl(f,o),x={};return g&&g.length?x=HLe(n,{axes:g,graphicalItems:l,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:u,dataEndIndex:d}):l&&l.length&&(x=WLe(n,{Axis:o,graphicalItems:l,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:u,dataEndIndex:d})),x},GLe=function(n){var r=Xd(n),s=Eu(r,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:tT(s,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Sw(r,s)}},U$=function(n){var r=n.children,s=n.defaultShowTooltip,a=to(r,Fg),o=0,l=0;return n.data&&n.data.length!==0&&(l=n.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(o=a.props.startIndex),a.props.endIndex>=0&&(l=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!s}},YLe=function(n){return!n||!n.length?!1:n.some(function(r){var s=Iu(r&&r.type);return s&&s.indexOf("Bar")>=0})},V$=function(n){return n==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:n==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:n==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},QLe=function(n,r){var s=n.props,a=n.graphicalItems,o=n.xAxisMap,l=o===void 0?{}:o,c=n.yAxisMap,u=c===void 0?{}:c,d=s.width,f=s.height,m=s.children,g=s.margin||{},x=to(m,Fg),v=to(m,om),y=Object.keys(u).reduce(function(P,L){var O=u[L],R=O.orientation;return!O.mirror&&!O.hide?Xe(Xe({},P),{},Xt({},R,P[R]+O.width)):P},{left:g.left||0,right:g.right||0}),b=Object.keys(l).reduce(function(P,L){var O=l[L],R=O.orientation;return!O.mirror&&!O.hide?Xe(Xe({},P),{},Xt({},R,$o(P,"".concat(R))+O.height)):P},{top:g.top||0,bottom:g.bottom||0}),N=Xe(Xe({},b),y),j=N.bottom;x&&(N.bottom+=x.props.height||Fg.defaultProps.height),v&&r&&(N=bke(N,a,s,r));var S=d-N.left-N.right,A=f-N.top-N.bottom;return Xe(Xe({brushBottom:j},N),{},{width:Math.max(S,0),height:Math.max(A,0)})},XLe=function(n,r){if(r==="xAxis")return n[r].width;if(r==="yAxis")return n[r].height},JLe=function(n){var r=n.chartName,s=n.GraphicalChild,a=n.defaultTooltipEventType,o=a===void 0?"axis":a,l=n.validateTooltipEventTypes,c=l===void 0?["axis"]:l,u=n.axisComponents,d=n.legendContent,f=n.formatAxisMap,m=n.defaultProps,g=function(N,j){var S=j.graphicalItems,A=j.stackGroups,P=j.offset,L=j.updateId,O=j.dataStartIndex,R=j.dataEndIndex,q=N.barSize,U=N.layout,D=N.barGap,M=N.barCategoryGap,G=N.maxBarSize,Y=V$(U),Z=Y.numericAxisName,X=Y.cateAxisName,re=YLe(S),z=[];return S.forEach(function(te,le){var Q=kj(N.data,{graphicalItems:[te],dataStartIndex:O,dataEndIndex:R}),T=te.type.defaultProps!==void 0?Xe(Xe({},te.type.defaultProps),te.props):te.props,B=T.dataKey,H=T.maxBarSize,ee=T["".concat(Z,"Id")],ce=T["".concat(X,"Id")],he={},W=u.reduce(function(ft,st){var Ct=j["".concat(st.axisType,"Map")],Vt=T["".concat(st.axisType,"Id")];Ct&&Ct[Vt]||st.axisType==="zAxis"||km();var Zt=Ct[Vt];return Xe(Xe({},ft),{},Xt(Xt({},st.axisType,Zt),"".concat(st.axisType,"Ticks"),Eu(Zt)))},he),J=W[X],pe=W["".concat(X,"Ticks")],ue=A&&A[ee]&&A[ee].hasStack&&Rke(te,A[ee].stackGroups),me=Iu(te.type).indexOf("Bar")>=0,je=Sw(J,pe),ze=[],Te=re&&vke({barSize:q,stackGroups:A,totalSize:XLe(W,X)});if(me){var xe,ht,gt=er(H)?G:H,Ye=(xe=(ht=Sw(J,pe,!0))!==null&&ht!==void 0?ht:gt)!==null&&xe!==void 0?xe:0;ze=yke({barGap:D,barCategoryGap:M,bandSize:Ye!==je?Ye:je,sizeList:Te[ce],maxBarSize:gt}),Ye!==je&&(ze=ze.map(function(ft){return Xe(Xe({},ft),{},{position:Xe(Xe({},ft.position),{},{offset:ft.position.offset-Ye/2})})}))}var dt=te&&te.type&&te.type.getComposedData;dt&&z.push({props:Xe(Xe({},dt(Xe(Xe({},W),{},{displayedData:Q,props:N,dataKey:B,item:te,bandSize:je,barPosition:ze,offset:P,stackedData:ue,layout:U,dataStartIndex:O,dataEndIndex:R}))),{},Xt(Xt(Xt({key:te.key||"item-".concat(le)},Z,W[Z]),X,W[X]),"animationId",L)),childIndex:bje(te,N.children),item:te})}),z},x=function(N,j){var S=N.props,A=N.dataStartIndex,P=N.dataEndIndex,L=N.updateId;if(!gI({props:S}))return null;var O=S.children,R=S.layout,q=S.stackOffset,U=S.data,D=S.reverseStackOrder,M=V$(R),G=M.numericAxisName,Y=M.cateAxisName,Z=Pl(O,s),X=Tke(U,Z,"".concat(G,"Id"),"".concat(Y,"Id"),q,D),re=u.reduce(function(T,B){var H="".concat(B.axisType,"Map");return Xe(Xe({},T),{},Xt({},H,KLe(S,Xe(Xe({},B),{},{graphicalItems:Z,stackGroups:B.axisType===G&&X,dataStartIndex:A,dataEndIndex:P}))))},{}),z=QLe(Xe(Xe({},re),{},{props:S,graphicalItems:Z}),j==null?void 0:j.legendBBox);Object.keys(re).forEach(function(T){re[T]=f(S,re[T],z,T.replace("Map",""),r)});var te=re["".concat(Y,"Map")],le=GLe(te),Q=g(S,Xe(Xe({},re),{},{dataStartIndex:A,dataEndIndex:P,updateId:L,graphicalItems:Z,stackGroups:X,offset:z}));return Xe(Xe({formattedGraphicalItems:Q,graphicalItems:Z,offset:z,stackGroups:X},le),re)},v=(function(b){function N(j){var S,A,P;return ELe(this,N),P=LLe(this,N,[j]),Xt(P,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xt(P,"accessibilityManager",new gLe),Xt(P,"handleLegendBBoxUpdate",function(L){if(L){var O=P.state,R=O.dataStartIndex,q=O.dataEndIndex,U=O.updateId;P.setState(Xe({legendBBox:L},x({props:P.props,dataStartIndex:R,dataEndIndex:q,updateId:U},Xe(Xe({},P.state),{},{legendBBox:L}))))}}),Xt(P,"handleReceiveSyncEvent",function(L,O,R){if(P.props.syncId===L){if(R===P.eventEmitterSymbol&&typeof P.props.syncMethod!="function")return;P.applySyncEvent(O)}}),Xt(P,"handleBrushChange",function(L){var O=L.startIndex,R=L.endIndex;if(O!==P.state.dataStartIndex||R!==P.state.dataEndIndex){var q=P.state.updateId;P.setState(function(){return Xe({dataStartIndex:O,dataEndIndex:R},x({props:P.props,dataStartIndex:O,dataEndIndex:R,updateId:q},P.state))}),P.triggerSyncEvent({dataStartIndex:O,dataEndIndex:R})}}),Xt(P,"handleMouseEnter",function(L){var O=P.getMouseInfo(L);if(O){var R=Xe(Xe({},O),{},{isTooltipActive:!0});P.setState(R),P.triggerSyncEvent(R);var q=P.props.onMouseEnter;Nn(q)&&q(R,L)}}),Xt(P,"triggeredAfterMouseMove",function(L){var O=P.getMouseInfo(L),R=O?Xe(Xe({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};P.setState(R),P.triggerSyncEvent(R);var q=P.props.onMouseMove;Nn(q)&&q(R,L)}),Xt(P,"handleItemMouseEnter",function(L){P.setState(function(){return{isTooltipActive:!0,activeItem:L,activePayload:L.tooltipPayload,activeCoordinate:L.tooltipPosition||{x:L.cx,y:L.cy}}})}),Xt(P,"handleItemMouseLeave",function(){P.setState(function(){return{isTooltipActive:!1}})}),Xt(P,"handleMouseMove",function(L){L.persist(),P.throttleTriggeredAfterMouseMove(L)}),Xt(P,"handleMouseLeave",function(L){P.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};P.setState(O),P.triggerSyncEvent(O);var R=P.props.onMouseLeave;Nn(R)&&R(O,L)}),Xt(P,"handleOuterEvent",function(L){var O=yje(L),R=$o(P.props,"".concat(O));if(O&&Nn(R)){var q,U;/.*touch.*/i.test(O)?U=P.getMouseInfo(L.changedTouches[0]):U=P.getMouseInfo(L),R((q=U)!==null&&q!==void 0?q:{},L)}}),Xt(P,"handleClick",function(L){var O=P.getMouseInfo(L);if(O){var R=Xe(Xe({},O),{},{isTooltipActive:!0});P.setState(R),P.triggerSyncEvent(R);var q=P.props.onClick;Nn(q)&&q(R,L)}}),Xt(P,"handleMouseDown",function(L){var O=P.props.onMouseDown;if(Nn(O)){var R=P.getMouseInfo(L);O(R,L)}}),Xt(P,"handleMouseUp",function(L){var O=P.props.onMouseUp;if(Nn(O)){var R=P.getMouseInfo(L);O(R,L)}}),Xt(P,"handleTouchMove",function(L){L.changedTouches!=null&&L.changedTouches.length>0&&P.throttleTriggeredAfterMouseMove(L.changedTouches[0])}),Xt(P,"handleTouchStart",function(L){L.changedTouches!=null&&L.changedTouches.length>0&&P.handleMouseDown(L.changedTouches[0])}),Xt(P,"handleTouchEnd",function(L){L.changedTouches!=null&&L.changedTouches.length>0&&P.handleMouseUp(L.changedTouches[0])}),Xt(P,"handleDoubleClick",function(L){var O=P.props.onDoubleClick;if(Nn(O)){var R=P.getMouseInfo(L);O(R,L)}}),Xt(P,"handleContextMenu",function(L){var O=P.props.onContextMenu;if(Nn(O)){var R=P.getMouseInfo(L);O(R,L)}}),Xt(P,"triggerSyncEvent",function(L){P.props.syncId!==void 0&&TP.emit(OP,P.props.syncId,L,P.eventEmitterSymbol)}),Xt(P,"applySyncEvent",function(L){var O=P.props,R=O.layout,q=O.syncMethod,U=P.state.updateId,D=L.dataStartIndex,M=L.dataEndIndex;if(L.dataStartIndex!==void 0||L.dataEndIndex!==void 0)P.setState(Xe({dataStartIndex:D,dataEndIndex:M},x({props:P.props,dataStartIndex:D,dataEndIndex:M,updateId:U},P.state)));else if(L.activeTooltipIndex!==void 0){var G=L.chartX,Y=L.chartY,Z=L.activeTooltipIndex,X=P.state,re=X.offset,z=X.tooltipTicks;if(!re)return;if(typeof q=="function")Z=q(z,L);else if(q==="value"){Z=-1;for(var te=0;te<z.length;te++)if(z[te].value===L.activeLabel){Z=te;break}}var le=Xe(Xe({},re),{},{x:re.left,y:re.top}),Q=Math.min(G,le.x+le.width),T=Math.min(Y,le.y+le.height),B=z[Z]&&z[Z].value,H=P4(P.state,P.props.data,Z),ee=z[Z]?{x:R==="horizontal"?z[Z].coordinate:Q,y:R==="horizontal"?T:z[Z].coordinate}:dJ;P.setState(Xe(Xe({},L),{},{activeLabel:B,activeCoordinate:ee,activePayload:H,activeTooltipIndex:Z}))}else P.setState(L)}),Xt(P,"renderCursor",function(L){var O,R=P.state,q=R.isTooltipActive,U=R.activeCoordinate,D=R.activePayload,M=R.offset,G=R.activeTooltipIndex,Y=R.tooltipAxisBandSize,Z=P.getTooltipEventType(),X=(O=L.props.active)!==null&&O!==void 0?O:q,re=P.props.layout,z=L.key||"_recharts-cursor";return ve.createElement(NLe,{key:z,activeCoordinate:U,activePayload:D,activeTooltipIndex:G,chartName:r,element:L,isActive:X,layout:re,offset:M,tooltipAxisBandSize:Y,tooltipEventType:Z})}),Xt(P,"renderPolarAxis",function(L,O,R){var q=$o(L,"type.axisType"),U=$o(P.state,"".concat(q,"Map")),D=L.type.defaultProps,M=D!==void 0?Xe(Xe({},D),L.props):L.props,G=U&&U[M["".concat(q,"Id")]];return C.cloneElement(L,Xe(Xe({},G),{},{className:zn(q,G.className),key:L.key||"".concat(O,"-").concat(R),ticks:Eu(G,!0)}))}),Xt(P,"renderPolarGrid",function(L){var O=L.props,R=O.radialLines,q=O.polarAngles,U=O.polarRadius,D=P.state,M=D.radiusAxisMap,G=D.angleAxisMap,Y=Xd(M),Z=Xd(G),X=Z.cx,re=Z.cy,z=Z.innerRadius,te=Z.outerRadius;return C.cloneElement(L,{polarAngles:Array.isArray(q)?q:Eu(Z,!0).map(function(le){return le.coordinate}),polarRadius:Array.isArray(U)?U:Eu(Y,!0).map(function(le){return le.coordinate}),cx:X,cy:re,innerRadius:z,outerRadius:te,key:L.key||"polar-grid",radialLines:R})}),Xt(P,"renderLegend",function(){var L=P.state.formattedGraphicalItems,O=P.props,R=O.children,q=O.width,U=O.height,D=P.props.margin||{},M=q-(D.left||0)-(D.right||0),G=oX({children:R,formattedGraphicalItems:L,legendWidth:M,legendContent:d});if(!G)return null;var Y=G.item,Z=$$(G,_Le);return C.cloneElement(Y,Xe(Xe({},Z),{},{chartWidth:q,chartHeight:U,margin:D,onBBoxUpdate:P.handleLegendBBoxUpdate}))}),Xt(P,"renderTooltip",function(){var L,O=P.props,R=O.children,q=O.accessibilityLayer,U=to(R,cc);if(!U)return null;var D=P.state,M=D.isTooltipActive,G=D.activeCoordinate,Y=D.activePayload,Z=D.activeLabel,X=D.offset,re=(L=U.props.active)!==null&&L!==void 0?L:M;return C.cloneElement(U,{viewBox:Xe(Xe({},X),{},{x:X.left,y:X.top}),active:re,label:Z,payload:re?Y:[],coordinate:G,accessibilityLayer:q})}),Xt(P,"renderBrush",function(L){var O=P.props,R=O.margin,q=O.data,U=P.state,D=U.offset,M=U.dataStartIndex,G=U.dataEndIndex,Y=U.updateId;return C.cloneElement(L,{key:L.key||"_recharts-brush",onChange:Fb(P.handleBrushChange,L.props.onChange),data:q,x:bt(L.props.x)?L.props.x:D.left,y:bt(L.props.y)?L.props.y:D.top+D.height+D.brushBottom-(R.bottom||0),width:bt(L.props.width)?L.props.width:D.width,startIndex:M,endIndex:G,updateId:"brush-".concat(Y)})}),Xt(P,"renderReferenceElement",function(L,O,R){if(!L)return null;var q=P,U=q.clipPathId,D=P.state,M=D.xAxisMap,G=D.yAxisMap,Y=D.offset,Z=L.type.defaultProps||{},X=L.props,re=X.xAxisId,z=re===void 0?Z.xAxisId:re,te=X.yAxisId,le=te===void 0?Z.yAxisId:te;return C.cloneElement(L,{key:L.key||"".concat(O,"-").concat(R),xAxis:M[z],yAxis:G[le],viewBox:{x:Y.left,y:Y.top,width:Y.width,height:Y.height},clipPathId:U})}),Xt(P,"renderActivePoints",function(L){var O=L.item,R=L.activePoint,q=L.basePoint,U=L.childIndex,D=L.isRange,M=[],G=O.props.key,Y=O.item.type.defaultProps!==void 0?Xe(Xe({},O.item.type.defaultProps),O.item.props):O.item.props,Z=Y.activeDot,X=Y.dataKey,re=Xe(Xe({index:U,dataKey:X,cx:R.x,cy:R.y,r:4,fill:AT(O.item),strokeWidth:2,stroke:"#fff",payload:R.payload,value:R.value},Zn(Z,!1)),Z1(Z));return M.push(N.renderActiveDot(Z,re,"".concat(G,"-activePoint-").concat(U))),q?M.push(N.renderActiveDot(Z,Xe(Xe({},re),{},{cx:q.x,cy:q.y}),"".concat(G,"-basePoint-").concat(U))):D&&M.push(null),M}),Xt(P,"renderGraphicChild",function(L,O,R){var q=P.filterFormatItem(L,O,R);if(!q)return null;var U=P.getTooltipEventType(),D=P.state,M=D.isTooltipActive,G=D.tooltipAxis,Y=D.activeTooltipIndex,Z=D.activeLabel,X=P.props.children,re=to(X,cc),z=q.props,te=z.points,le=z.isRange,Q=z.baseLine,T=q.item.type.defaultProps!==void 0?Xe(Xe({},q.item.type.defaultProps),q.item.props):q.item.props,B=T.activeDot,H=T.hide,ee=T.activeBar,ce=T.activeShape,he=!!(!H&&M&&re&&(B||ee||ce)),W={};U!=="axis"&&re&&re.props.trigger==="click"?W={onClick:Fb(P.handleItemMouseEnter,L.props.onClick)}:U!=="axis"&&(W={onMouseLeave:Fb(P.handleItemMouseLeave,L.props.onMouseLeave),onMouseEnter:Fb(P.handleItemMouseEnter,L.props.onMouseEnter)});var J=C.cloneElement(L,Xe(Xe({},q.props),W));function pe(st){return typeof G.dataKey=="function"?G.dataKey(st.payload):null}if(he)if(Y>=0){var ue,me;if(G.dataKey&&!G.allowDuplicatedCategory){var je=typeof G.dataKey=="function"?pe:"payload.".concat(G.dataKey.toString());ue=fk(te,je,Z),me=le&&Q&&fk(Q,je,Z)}else ue=te==null?void 0:te[Y],me=le&&Q&&Q[Y];if(ce||ee){var ze=L.props.activeIndex!==void 0?L.props.activeIndex:Y;return[C.cloneElement(L,Xe(Xe(Xe({},q.props),W),{},{activeIndex:ze})),null,null]}if(!er(ue))return[J].concat(Kg(P.renderActivePoints({item:q,activePoint:ue,basePoint:me,childIndex:Y,isRange:le})))}else{var Te,xe=(Te=P.getItemByXY(P.state.activeCoordinate))!==null&&Te!==void 0?Te:{graphicalItem:J},ht=xe.graphicalItem,gt=ht.item,Ye=gt===void 0?L:gt,dt=ht.childIndex,ft=Xe(Xe(Xe({},q.props),W),{},{activeIndex:dt});return[C.cloneElement(Ye,ft),null,null]}return le?[J,null,null]:[J,null]}),Xt(P,"renderCustomized",function(L,O,R){return C.cloneElement(L,Xe(Xe({key:"recharts-customized-".concat(R)},P.props),P.state))}),Xt(P,"renderMap",{CartesianGrid:{handler:Ub,once:!0},ReferenceArea:{handler:P.renderReferenceElement},ReferenceLine:{handler:Ub},ReferenceDot:{handler:P.renderReferenceElement},XAxis:{handler:Ub},YAxis:{handler:Ub},Brush:{handler:P.renderBrush,once:!0},Bar:{handler:P.renderGraphicChild},Line:{handler:P.renderGraphicChild},Area:{handler:P.renderGraphicChild},Radar:{handler:P.renderGraphicChild},RadialBar:{handler:P.renderGraphicChild},Scatter:{handler:P.renderGraphicChild},Pie:{handler:P.renderGraphicChild},Funnel:{handler:P.renderGraphicChild},Tooltip:{handler:P.renderCursor,once:!0},PolarGrid:{handler:P.renderPolarGrid,once:!0},PolarAngleAxis:{handler:P.renderPolarAxis},PolarRadiusAxis:{handler:P.renderPolarAxis},Customized:{handler:P.renderCustomized}}),P.clipPathId="".concat((S=j.id)!==null&&S!==void 0?S:tj("recharts"),"-clip"),P.throttleTriggeredAfterMouseMove=aQ(P.triggeredAfterMouseMove,(A=j.throttleDelay)!==null&&A!==void 0?A:1e3/60),P.state={},P}return ILe(N,b),OLe(N,[{key:"componentDidMount",value:function(){var S,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,A=S.children,P=S.data,L=S.height,O=S.layout,R=to(A,cc);if(R){var q=R.props.defaultIndex;if(!(typeof q!="number"||q<0||q>this.state.tooltipTicks.length-1)){var U=this.state.tooltipTicks[q]&&this.state.tooltipTicks[q].value,D=P4(this.state,P,q,U),M=this.state.tooltipTicks[q].coordinate,G=(this.state.offset.top+L)/2,Y=O==="horizontal",Z=Y?{x:M,y:G}:{y:M,x:G},X=this.state.formattedGraphicalItems.find(function(z){var te=z.item;return te.type.name==="Scatter"});X&&(Z=Xe(Xe({},Z),X.props.points[q].tooltipPosition),D=X.props.points[q].tooltipPayload);var re={activeTooltipIndex:q,isTooltipActive:!0,activeLabel:U,activePayload:D,activeCoordinate:Z};this.setState(re),this.renderCursor(R),this.accessibilityManager.setIndex(q)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var P,L;this.accessibilityManager.setDetails({offset:{left:(P=this.props.margin.left)!==null&&P!==void 0?P:0,top:(L=this.props.margin.top)!==null&&L!==void 0?L:0}})}return null}},{key:"componentDidUpdate",value:function(S){pk([to(S.children,cc)],[to(this.props.children,cc)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=to(this.props.children,cc);if(S&&typeof S.props.shared=="boolean"){var A=S.props.shared?"axis":"item";return c.indexOf(A)>=0?A:o}return o}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var A=this.container,P=A.getBoundingClientRect(),L=oSe(P),O={chartX:Math.round(S.pageX-L.left),chartY:Math.round(S.pageY-L.top)},R=P.width/A.offsetWidth||1,q=this.inRange(O.chartX,O.chartY,R);if(!q)return null;var U=this.state,D=U.xAxisMap,M=U.yAxisMap,G=this.getTooltipEventType(),Y=z$(this.state,this.props.data,this.props.layout,q);if(G!=="axis"&&D&&M){var Z=Xd(D).scale,X=Xd(M).scale,re=Z&&Z.invert?Z.invert(O.chartX):null,z=X&&X.invert?X.invert(O.chartY):null;return Xe(Xe({},O),{},{xValue:re,yValue:z},Y)}return Y?Xe(Xe({},O),Y):null}},{key:"inRange",value:function(S,A){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,L=this.props.layout,O=S/P,R=A/P;if(L==="horizontal"||L==="vertical"){var q=this.state.offset,U=O>=q.left&&O<=q.left+q.width&&R>=q.top&&R<=q.top+q.height;return U?{x:O,y:R}:null}var D=this.state,M=D.angleAxisMap,G=D.radiusAxisMap;if(M&&G){var Y=Xd(M);return sB({x:O,y:R},Y)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,A=this.getTooltipEventType(),P=to(S,cc),L={};P&&A==="axis"&&(P.props.trigger==="click"?L={onClick:this.handleClick}:L={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var O=Z1(this.props,this.handleOuterEvent);return Xe(Xe({},O),L)}},{key:"addListener",value:function(){TP.on(OP,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){TP.removeListener(OP,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,A,P){for(var L=this.state.formattedGraphicalItems,O=0,R=L.length;O<R;O++){var q=L[O];if(q.item===S||q.props.key===S.key||A===Iu(q.item.type)&&P===q.childIndex)return q}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,A=this.state.offset,P=A.left,L=A.top,O=A.height,R=A.width;return ve.createElement("defs",null,ve.createElement("clipPath",{id:S},ve.createElement("rect",{x:P,y:L,height:O,width:R})))}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(A,P){var L=B$(P,2),O=L[0],R=L[1];return Xe(Xe({},A),{},Xt({},O,R.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(A,P){var L=B$(P,2),O=L[0],R=L[1];return Xe(Xe({},A),{},Xt({},O,R.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[S])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(S){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[S])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(S){var A=this.state,P=A.formattedGraphicalItems,L=A.activeItem;if(P&&P.length)for(var O=0,R=P.length;O<R;O++){var q=P[O],U=q.props,D=q.item,M=D.type.defaultProps!==void 0?Xe(Xe({},D.type.defaultProps),D.props):D.props,G=Iu(D.type);if(G==="Bar"){var Y=(U.data||[]).find(function(z){return _3e(S,z)});if(Y)return{graphicalItem:q,payload:Y}}else if(G==="RadialBar"){var Z=(U.data||[]).find(function(z){return sB(S,z)});if(Z)return{graphicalItem:q,payload:Z}}else if(bj(q,L)||wj(q,L)||Mv(q,L)){var X=mTe({graphicalItem:q,activeTooltipItem:L,itemData:M.data}),re=M.activeIndex===void 0?X:M.activeIndex;return{graphicalItem:Xe(Xe({},q),{},{childIndex:re}),payload:Mv(q,L)?M.data[X]:q.props.data[X]}}}return null}},{key:"render",value:function(){var S=this;if(!gI(this))return null;var A=this.props,P=A.children,L=A.className,O=A.width,R=A.height,q=A.style,U=A.compact,D=A.title,M=A.desc,G=$$(A,SLe),Y=Zn(G,!1);if(U)return ve.createElement(N$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ve.createElement(xk,Vp({},Y,{width:O,height:R,title:D,desc:M}),this.renderClipPath(),vI(P,this.renderMap)));if(this.props.accessibilityLayer){var Z,X;Y.tabIndex=(Z=this.props.tabIndex)!==null&&Z!==void 0?Z:0,Y.role=(X=this.props.role)!==null&&X!==void 0?X:"application",Y.onKeyDown=function(z){S.accessibilityManager.keyboardEvent(z)},Y.onFocus=function(){S.accessibilityManager.focus()}}var re=this.parseEventsOfWrapper();return ve.createElement(N$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ve.createElement("div",Vp({className:zn("recharts-wrapper",L),style:Xe({position:"relative",cursor:"default",width:O,height:R},q)},re,{ref:function(te){S.container=te}}),ve.createElement(xk,Vp({},Y,{width:O,height:R,title:D,desc:M,style:zLe}),this.renderClipPath(),vI(P,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(C.Component);Xt(v,"displayName",r),Xt(v,"defaultProps",Xe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Xt(v,"getDerivedStateFromProps",function(b,N){var j=b.dataKey,S=b.data,A=b.children,P=b.width,L=b.height,O=b.layout,R=b.stackOffset,q=b.margin,U=N.dataStartIndex,D=N.dataEndIndex;if(N.updateId===void 0){var M=U$(b);return Xe(Xe(Xe({},M),{},{updateId:0},x(Xe(Xe({props:b},M),{},{updateId:0}),N)),{},{prevDataKey:j,prevData:S,prevWidth:P,prevHeight:L,prevLayout:O,prevStackOffset:R,prevMargin:q,prevChildren:A})}if(j!==N.prevDataKey||S!==N.prevData||P!==N.prevWidth||L!==N.prevHeight||O!==N.prevLayout||R!==N.prevStackOffset||!rg(q,N.prevMargin)){var G=U$(b),Y={chartX:N.chartX,chartY:N.chartY,isTooltipActive:N.isTooltipActive},Z=Xe(Xe({},z$(N,S,O)),{},{updateId:N.updateId+1}),X=Xe(Xe(Xe({},G),Y),Z);return Xe(Xe(Xe({},X),x(Xe({props:b},X),N)),{},{prevDataKey:j,prevData:S,prevWidth:P,prevHeight:L,prevLayout:O,prevStackOffset:R,prevMargin:q,prevChildren:A})}if(!pk(A,N.prevChildren)){var re,z,te,le,Q=to(A,Fg),T=Q&&(re=(z=Q.props)===null||z===void 0?void 0:z.startIndex)!==null&&re!==void 0?re:U,B=Q&&(te=(le=Q.props)===null||le===void 0?void 0:le.endIndex)!==null&&te!==void 0?te:D,H=T!==U||B!==D,ee=!er(S),ce=ee&&!H?N.updateId:N.updateId+1;return Xe(Xe({updateId:ce},x(Xe(Xe({props:b},N),{},{updateId:ce,dataStartIndex:T,dataEndIndex:B}),N)),{},{prevChildren:A,dataStartIndex:T,dataEndIndex:B})}return null}),Xt(v,"renderActiveDot",function(b,N,j){var S;return C.isValidElement(b)?S=C.cloneElement(b,N):Nn(b)?S=b(N):S=ve.createElement(_X,N),ve.createElement(Zs,{className:"recharts-active-dot",key:j},S)});var y=C.forwardRef(function(N,j){return ve.createElement(v,Vp({},N,{ref:j}))});return y.displayName=v.displayName,y},ZLe=JLe({chartName:"BarChart",GraphicalChild:Bu,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Pj},{axisType:"yAxis",AxisComp:Aj}],formatAxisMap:u8e});function eRe(){var T,B,H,ee,ce,he,W,J,pe,ue,me;const{t:e}=$t(),[n,r]=C.useState("all"),[s,a]=C.useState(""),[o,l]=C.useState(!0),[c,u]=C.useState(!0),[d,f]=C.useState("created_date"),[m,g]=C.useState("desc"),[x,v]=C.useState(!1),{data:y,isLoading:b,error:N}=Dt({queryKey:["current-user"],queryFn:()=>Ce.auth.me(),retry:!1}),j=(y==null?void 0:y.role)==="admin",{data:S,isLoading:A,error:P,refetch:L}=Dt({queryKey:["user-report"],queryFn:async()=>(await Ce.functions.invoke("getUserReport",{})).data,enabled:j,retry:!1}),{data:O,isLoading:R}=Dt({queryKey:["admin-metrics"],queryFn:async()=>(await Ce.functions.invoke("getAdminMetrics",{})).data,enabled:j,retry:!1}),q=(S==null?void 0:S.summary)||{total_users:0,paid_users:0,free_users:0,paid_percentage:0},U=(O==null?void 0:O.trialMetrics)||{},D=(O==null?void 0:O.platformBreakdown)||{},M=((T=O==null?void 0:O.growthMetrics)==null?void 0:T.lastEightWeeks)||[],G=(O==null?void 0:O.churnMetrics)||{},Y=(O==null?void 0:O.userCounts)||{},Z=(O==null?void 0:O.subscriptionBreakdown)||{},X=(O==null?void 0:O.usageMetrics)||{},re=(X==null?void 0:X.avgPipesPerUser)||{},z=(X==null?void 0:X.avgTobaccosPerUser)||{},te=C.useMemo(()=>{if(!S)return{paid:[],free:[]};let je=[...S.paid_users||[]],ze=[...S.free_users||[]];if(s){const xe=s.toLowerCase();je=je.filter(ht=>{const gt=String(ht.email||"").toLowerCase(),Ye=String(ht.full_name||"").toLowerCase();return gt.includes(xe)||Ye.includes(xe)}),ze=ze.filter(ht=>{const gt=String(ht.email||"").toLowerCase(),Ye=String(ht.full_name||"").toLowerCase();return gt.includes(xe)||Ye.includes(xe)})}const Te=(xe,ht)=>{let gt=xe[d],Ye=ht[d];return(d==="created_date"||d==="subscription_end")&&(gt=new Date(gt||0),Ye=new Date(Ye||0)),gt<Ye?m==="asc"?-1:1:gt>Ye?m==="asc"?1:-1:0};return je.sort(Te),ze.sort(Te),{paid:je,free:ze}},[S,s,d,m]);if(b)return i.jsx("div",{className:"max-w-7xl mx-auto p-6",children:i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(Cn,{className:"w-8 h-8 animate-spin text-[#8b3a3a]"})})});if(N)return i.jsx("div",{className:"max-w-7xl mx-auto p-6",children:i.jsx(Ee,{className:"border-rose-200 bg-rose-50",children:i.jsx(Oe,{className:"p-6",children:i.jsxs("p",{className:"text-rose-800",children:[e("userReport.errorLoadingUser","Error loading user"),": ",N.message]})})})});if(!j)return i.jsx("div",{className:"max-w-7xl mx-auto p-6",children:i.jsx(Ee,{className:"bg-white/95 border-rose-200",children:i.jsxs(Oe,{className:"p-6",children:[i.jsx("p",{className:"text-rose-800 font-semibold",children:e("userReport.unauthorized","Unauthorized")}),i.jsx("p",{className:"text-rose-700 text-sm mt-2",children:e("userReport.adminAccessRequired","Admin access required to view this page.")})]})})});if(A)return i.jsx("div",{className:"max-w-7xl mx-auto p-6",children:i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(Cn,{className:"w-8 h-8 animate-spin text-[#8b3a3a]"})})});if(P)return i.jsx("div",{className:"max-w-7xl mx-auto p-6",children:i.jsx(Ee,{className:"border-rose-200 bg-rose-50",children:i.jsx(Oe,{className:"p-6",children:i.jsxs("p",{className:"text-rose-800",children:[e("userReport.errorLoadingReport","Error loading report"),": ",P.message]})})})});const le=je=>{d===je?g(m==="asc"?"desc":"asc"):(f(je),g("desc"))},Q=new Date().toLocaleString();return i.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[i.jsxs("div",{className:"mb-2 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-[#e8d5b7]",children:e("userReport.title","User Subscription Report")}),i.jsxs("p",{className:"text-xs text-[#e8d5b7]/60 mt-1",children:[e("userReport.lastUpdated","Last updated"),": ",Q]})]}),i.jsxs("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center",children:[i.jsxs(ye,{onClick:async()=>{var je,ze;try{v(!0);const Te=await Ce.functions.invoke("backfillStripeCustomers",{});(je=Te==null?void 0:Te.data)!=null&&je.ok?Ve.success(e("userReport.backfillComplete","Backfill complete: {{created}} created, {{updated}} updated",{created:Te.data.created,updated:Te.data.updated})):Ve.error(((ze=Te==null?void 0:Te.data)==null?void 0:ze.error)||e("userReport.backfillFailed","Backfill failed")),await L()}catch(Te){Ve.error((Te==null?void 0:Te.message)||e("userReport.backfillFailed","Backfill failed"))}finally{v(!1)}},variant:"default",className:"w-full gap-2 sm:w-auto",disabled:x,children:[i.jsx($s,{className:`w-4 h-4 ${x?"animate-spin":""}`}),x?e("userReport.syncing","Syncing…"):e("userReport.backfillFromStripe","Backfill from Stripe")]}),i.jsxs(ye,{onClick:()=>{L(),Ve.success(e("userReport.reportRefreshed","Report refreshed"))},variant:"outline",className:"w-full gap-2 sm:w-auto",children:[i.jsx($s,{className:"w-4 h-4"}),e("common.refresh")]})]})]}),i.jsx("div",{className:"mb-6"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs(Ee,{className:`bg-white/95 border-[#e8d5b7]/30 cursor-pointer transition-all hover:shadow-lg ${n==="all"?"ring-2 ring-[#8b3a3a]":""}`,onClick:()=>{r("all"),l(!0),u(!0)},children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs(et,{className:"text-sm font-medium text-stone-600 flex items-center gap-2",children:[i.jsx(nm,{className:"w-4 h-4"}),e("userReport.totalUsers","Total Users")]})}),i.jsx(Oe,{children:i.jsx("p",{className:"text-3xl font-bold text-stone-800",children:q.total_users})})]}),i.jsxs(Ee,{className:`bg-white/95 border-[#e8d5b7]/30 cursor-pointer transition-all hover:shadow-lg ${n==="paid"?"ring-2 ring-emerald-500":""}`,onClick:()=>{r("paid"),l(!0),u(!1)},children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs(et,{className:"text-sm font-medium text-emerald-600 flex items-center gap-2",children:[i.jsx(yh,{className:"w-4 h-4"}),e("userReport.paidUsers","Paid Users")]})}),i.jsx(Oe,{children:i.jsx("p",{className:"text-3xl font-bold text-emerald-700",children:q.paid_users})})]}),i.jsxs(Ee,{className:`bg-white/95 border-[#e8d5b7]/30 cursor-pointer transition-all hover:shadow-lg ${n==="free"?"ring-2 ring-stone-500":""}`,onClick:()=>{r("free"),l(!1),u(!0)},children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs(et,{className:"text-sm font-medium text-stone-600 flex items-center gap-2",children:[i.jsx(b1,{className:"w-4 h-4"}),e("userReport.freeUsers","Free Users")]})}),i.jsx(Oe,{children:i.jsx("p",{className:"text-3xl font-bold text-stone-700",children:q.free_users})})]}),i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30",children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs(et,{className:"text-sm font-medium text-blue-600 flex items-center gap-2",children:[i.jsx(Hx,{className:"w-4 h-4"}),e("userReport.paidPercentage","Paid %")]})}),i.jsx(Oe,{children:i.jsxs("p",{className:"text-3xl font-bold text-blue-700",children:[q.paid_percentage,"%"]})})]}),i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30",children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs(et,{className:"text-sm font-medium text-purple-600 flex items-center gap-2",children:[i.jsx(Kp,{className:"w-4 h-4"}),e("userReport.new7Days","New (7 days)")]})}),i.jsx(Oe,{children:i.jsx("p",{className:"text-3xl font-bold text-purple-700",children:R?"...":U.newSignupsLast7d||0})})]}),(O==null?void 0:O.platformBreakdown)&&!R&&i.jsxs(i.Fragment,{children:[i.jsxs(Ee,{className:"bg-white/95 border-gray-200",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-sm font-medium text-gray-700",children:e("userReport.apple","Apple")})}),i.jsx(Oe,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsxs("span",{className:"text-emerald-600",children:[e("userReport.paid","Paid"),":"]}),i.jsx("span",{className:"font-bold text-emerald-700",children:((B=D.apple)==null?void 0:B.paid)||0})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsxs("span",{className:"text-gray-600",children:[e("userReport.free","Free"),":"]}),i.jsx("span",{className:"font-bold text-gray-700",children:((H=D.apple)==null?void 0:H.free)||0})]})]})})]}),i.jsxs(Ee,{className:"bg-white/95 border-green-200",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-sm font-medium text-green-700",children:e("userReport.android","Android")})}),i.jsx(Oe,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsxs("span",{className:"text-emerald-600",children:[e("userReport.paid","Paid"),":"]}),i.jsx("span",{className:"font-bold text-emerald-700",children:((ee=D.android)==null?void 0:ee.paid)||0})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsxs("span",{className:"text-gray-600",children:[e("userReport.free","Free"),":"]}),i.jsx("span",{className:"font-bold text-gray-700",children:((ce=D.android)==null?void 0:ce.free)||0})]})]})})]}),i.jsxs(Ee,{className:"bg-white/95 border-blue-200",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-sm font-medium text-blue-700",children:e("userReport.web","Web")})}),i.jsx(Oe,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsxs("span",{className:"text-emerald-600",children:[e("userReport.paid","Paid"),":"]}),i.jsx("span",{className:"font-bold text-emerald-700",children:((he=D.web)==null?void 0:he.paid)||0})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsxs("span",{className:"text-gray-600",children:[e("userReport.free","Free"),":"]}),i.jsx("span",{className:"font-bold text-gray-700",children:((W=D.web)==null?void 0:W.free)||0})]})]})})]}),i.jsxs(Ee,{className:"bg-white/95 border-purple-200",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-sm font-medium text-purple-700",children:e("userReport.iOS","iOS")})}),i.jsx(Oe,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsxs("span",{className:"text-emerald-600",children:[e("userReport.paid","Paid"),":"]}),i.jsx("span",{className:"font-bold text-emerald-700",children:((J=D.ios)==null?void 0:J.paid)||0})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsxs("span",{className:"text-gray-600",children:[e("userReport.free","Free"),":"]}),i.jsx("span",{className:"font-bold text-gray-700",children:((pe=D.ios)==null?void 0:pe.free)||0})]})]})})]}),i.jsxs(Ee,{className:"bg-white/95 border-amber-200",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-sm font-medium text-amber-700",children:e("userReport.unknown","Unknown")})}),i.jsx(Oe,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsxs("span",{className:"text-emerald-600",children:[e("userReport.paid","Paid"),":"]}),i.jsx("span",{className:"font-bold text-emerald-700",children:((ue=D.unknown)==null?void 0:ue.paid)||0})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsxs("span",{className:"text-gray-600",children:[e("userReport.free","Free"),":"]}),i.jsx("span",{className:"font-bold text-gray-700",children:((me=D.unknown)==null?void 0:me.free)||0})]})]})})]})]})]}),O&&!R&&i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30 mb-6",children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs(et,{className:"text-stone-800 flex items-center gap-2",children:[i.jsx(Gw,{className:"w-5 h-5 text-orange-600"}),e("userReport.trialMetrics","Trial Metrics")]})}),i.jsx(Oe,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-100",children:[i.jsx("p",{className:"text-xs text-orange-600 font-medium",children:e("userReport.currentlyOnTrial","Currently on Trial")}),i.jsx("p",{className:"text-2xl font-bold text-orange-800",children:U.currentlyOnTrial||0})]}),i.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border border-red-100",children:[i.jsx("p",{className:"text-xs text-red-600 font-medium",children:e("userReport.endingIn3Days","Ending in 3 Days")}),i.jsx("p",{className:"text-2xl font-bold text-red-800",children:U.endingIn3Days||0})]}),i.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-100",children:[i.jsx("p",{className:"text-xs text-yellow-600 font-medium",children:e("userReport.endingIn7Days","Ending in 7 Days")}),i.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:U.endingIn7Days||0})]}),i.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-100",children:[i.jsx("p",{className:"text-xs text-blue-600 font-medium",children:e("userReport.avgDaysRemaining","Avg Days Remaining")}),i.jsx("p",{className:"text-2xl font-bold text-blue-800",children:U.avgDaysRemaining||0})]}),i.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-100",children:[i.jsx("p",{className:"text-xs text-green-600 font-medium",children:e("userReport.converted30d","Converted (30d)")}),i.jsx("p",{className:"text-2xl font-bold text-green-800",children:U.convertedLast30d||0})]}),i.jsxs("div",{className:"p-3 bg-rose-50 rounded-lg border border-rose-100",children:[i.jsx("p",{className:"text-xs text-rose-600 font-medium",children:e("userReport.dropoffs30d","Drop-offs (30d)")}),i.jsx("p",{className:"text-2xl font-bold text-rose-800",children:U.dropoffLast30d||0})]})]})})]}),M.length>0&&!R&&i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30 mb-6",children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs(et,{className:"text-stone-800 flex items-center gap-2",children:[i.jsx(Hx,{className:"w-5 h-5 text-blue-600"}),e("userReport.weeklyGrowth","Weekly Growth (Last 8 Weeks)")]})}),i.jsx(Oe,{children:i.jsx(eSe,{width:"100%",height:300,children:i.jsxs(ZLe,{data:M,children:[i.jsx(ZX,{strokeDasharray:"3 3",stroke:"#e8d5b7/20"}),i.jsx(Pj,{dataKey:"week",tick:{fill:"#5a5a5a",fontSize:12}}),i.jsx(Aj,{tick:{fill:"#5a5a5a",fontSize:12}}),i.jsx(cc,{contentStyle:{backgroundColor:"#fff",border:"1px solid #ddd"}}),i.jsx(om,{}),i.jsx(Bu,{dataKey:"newUsers",fill:"#3b82f6",name:e("userReport.newUsers","New Users")}),i.jsx(Bu,{dataKey:"newPaidSubscribers",fill:"#10b981",name:e("userReport.newPaid","New Paid")}),i.jsx(Bu,{dataKey:"newProSubscribers",fill:"#f59e0b",name:e("userReport.newPro","New Pro")})]})})})]}),(O==null?void 0:O.churnMetrics)&&!R&&i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30 mb-6",children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs(et,{className:"text-stone-800 flex items-center gap-2",children:[i.jsx(xte,{className:"w-5 h-5 text-red-600"}),e("userReport.churnDowngrades","Churn & Downgrades (Last 30 Days)")]})}),i.jsx(Oe,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border border-red-100",children:[i.jsx("p",{className:"text-xs text-red-600 font-medium",children:e("userReport.premiumChurnRate","Premium Churn Rate")}),i.jsxs("p",{className:"text-2xl font-bold text-red-800",children:[G.premiumChurn30d||0,"%"]})]}),i.jsxs("div",{className:"p-3 bg-rose-50 rounded-lg border border-rose-100",children:[i.jsx("p",{className:"text-xs text-rose-600 font-medium",children:e("userReport.proChurnRate","Pro Churn Rate")}),i.jsxs("p",{className:"text-2xl font-bold text-rose-800",children:[G.proChurn30d||0,"%"]})]}),i.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-100",children:[i.jsx("p",{className:"text-xs text-purple-600 font-medium",children:e("userReport.proToPremium","Pro → Premium")}),i.jsx("p",{className:"text-2xl font-bold text-purple-800",children:G.proToPremiumDowngrade||0})]}),i.jsxs("div",{className:"p-3 bg-pink-50 rounded-lg border border-pink-100",children:[i.jsx("p",{className:"text-xs text-pink-600 font-medium",children:e("userReport.premiumToFree","Premium → Free")}),i.jsx("p",{className:"text-2xl font-bold text-pink-800",children:G.premiumToFreeDowngrade||0})]})]})})]}),O&&!R&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsx(et,{className:"text-sm font-medium text-indigo-600",children:e("userReport.premiumUsers","Premium Users")}),i.jsx("p",{className:"text-xs text-stone-500 mt-1",children:e("userReport.postFeb1","Post Feb 1, 2026")})]}),i.jsx(Oe,{children:i.jsx("p",{className:"text-3xl font-bold text-indigo-700",children:Y.premium||0})})]}),i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-sm font-medium text-amber-600",children:e("userReport.proUsers","Pro Users")})}),i.jsx(Oe,{children:i.jsx("p",{className:"text-3xl font-bold text-amber-700",children:Y.pro||0})})]}),i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-sm font-medium text-rose-600",children:e("userReport.onTrial","On Trial")})}),i.jsx(Oe,{children:i.jsx("p",{className:"text-3xl font-bold text-rose-700",children:U.currentlyOnTrial||0})})]}),i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-sm font-medium text-cyan-600",children:e("userReport.activeTrialPremium","Active/Trial Premium")})}),i.jsx(Oe,{children:i.jsx("p",{className:"text-3xl font-bold text-cyan-700",children:Z.activeOrTrialPremium||0})})]}),i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-sm font-medium text-orange-600",children:e("userReport.activeTrialPro","Active/Trial Pro")})}),i.jsx(Oe,{children:i.jsx("p",{className:"text-3xl font-bold text-orange-700",children:Z.activeOrTrialPro||0})})]}),i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsx(et,{className:"text-sm font-medium text-fuchsia-600",children:e("userReport.legacyPremium","Legacy Premium")}),i.jsx("p",{className:"text-xs text-stone-500 mt-1",children:e("userReport.subscribedBeforeFeb1","Subscribed before Feb 1, 2026")})]}),i.jsx(Oe,{children:i.jsx("p",{className:"text-3xl font-bold text-fuchsia-700",children:Y.legacyPremium||0})})]})]}),(O==null?void 0:O.usageMetrics)&&!R&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-sm font-medium text-indigo-600",children:e("userReport.avgPipesPerUser","Avg Pipes per User")})}),i.jsx(Oe,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-stone-600",children:e("userReport.free","Free")}),i.jsx("span",{className:"font-bold text-stone-800",children:re.free||0})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-stone-600",children:e("userReport.premium","Premium")}),i.jsx("span",{className:"font-bold text-stone-800",children:re.premium||0})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-stone-600",children:e("userReport.pro","Pro")}),i.jsx("span",{className:"font-bold text-stone-800",children:re.pro||0})]})]})})]}),i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-sm font-medium text-amber-600",children:e("userReport.avgTobaccosPerUser","Avg Tobaccos per User")})}),i.jsx(Oe,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-stone-600",children:e("userReport.free","Free")}),i.jsx("span",{className:"font-bold text-stone-800",children:z.free||0})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-stone-600",children:e("userReport.premium","Premium")}),i.jsx("span",{className:"font-bold text-stone-800",children:z.premium||0})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-stone-600",children:e("userReport.pro","Pro")}),i.jsx("span",{className:"font-bold text-stone-800",children:z.pro||0})]})]})})]}),i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30",children:[i.jsx(Ze,{className:"pb-3",children:i.jsx(et,{className:"text-sm font-medium text-cyan-600",children:e("userReport.communityEngagement","Community Engagement")})}),i.jsxs(Oe,{children:[i.jsxs("p",{className:"text-3xl font-bold text-cyan-700",children:[X.communityEngagement||0,"%"]}),i.jsx("p",{className:"text-xs text-stone-500 mt-1",children:e("userReport.usersWithComments","Users with comments")})]})]})]}),i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-stone-400"}),i.jsx(at,{placeholder:e("userReport.searchPlaceholder","Search by name or email..."),value:s,onChange:je=>a(je.target.value),className:"pl-10 bg-white"})]})}),(n==="all"||n==="paid")&&i.jsx(Ax,{open:o,onOpenChange:l,children:i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30 mb-6",children:[i.jsx(kx,{className:"w-full",children:i.jsx(Ze,{className:"cursor-pointer hover:bg-stone-50",children:i.jsxs(et,{className:"text-stone-800 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(yh,{className:"w-5 h-5 text-amber-600"}),e("userReport.paidUsersCount","Paid Users ({{count}})",{count:te.paid.length})]}),o?i.jsx(uh,{className:"w-5 h-5"}):i.jsx(La,{className:"w-5 h-5"})]})})}),i.jsx(Ex,{children:i.jsx(Oe,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-stone-200",children:[i.jsxs("th",{className:"text-left py-3 px-4 text-sm font-semibold text-stone-700 cursor-pointer hover:bg-stone-50",onClick:()=>le("full_name"),children:[e("userReport.name","Name")," ",d==="full_name"&&(m==="asc"?"↑":"↓")]}),i.jsxs("th",{className:"text-left py-3 px-4 text-sm font-semibold text-stone-700 cursor-pointer hover:bg-stone-50",onClick:()=>le("email"),children:[e("userReport.email","Email")," ",d==="email"&&(m==="asc"?"↑":"↓")]}),i.jsxs("th",{className:"text-left py-3 px-4 text-sm font-semibold text-stone-700 cursor-pointer hover:bg-stone-50",onClick:()=>le("subscription_status"),children:[e("userReport.status","Status")," ",d==="subscription_status"&&(m==="asc"?"↑":"↓")]}),i.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-stone-700",children:e("userReport.billing","Billing")}),i.jsxs("th",{className:"text-left py-3 px-4 text-sm font-semibold text-stone-700 cursor-pointer hover:bg-stone-50",onClick:()=>le("subscription_end"),children:[e("userReport.periodEnd","Period End")," ",d==="subscription_end"&&(m==="asc"?"↑":"↓")]}),i.jsxs("th",{className:"text-left py-3 px-4 text-sm font-semibold text-stone-700 cursor-pointer hover:bg-stone-50",onClick:()=>le("created_date"),children:[e("userReport.joined","Joined")," ",d==="created_date"&&(m==="asc"?"↑":"↓")]})]})}),i.jsx("tbody",{children:te.paid.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"text-center py-8 text-stone-500",children:s?e("userReport.noUsersMatchSearch","No users match your search"):e("userReport.noPaidUsersFound","No paid users found")})}):te.paid.map(je=>i.jsxs("tr",{className:"border-b border-stone-100 hover:bg-stone-50",children:[i.jsx("td",{className:"py-3 px-4 text-sm text-stone-800",children:je.full_name||"-"}),i.jsx("td",{className:"py-3 px-4 text-sm text-stone-600",children:je.email}),i.jsx("td",{className:"py-3 px-4",children:i.jsx(Ge,{className:"bg-emerald-100 text-emerald-800",children:je.subscription_status})}),i.jsx("td",{className:"py-3 px-4 text-sm text-stone-600 capitalize",children:je.billing_interval||"-"}),i.jsx("td",{className:"py-3 px-4 text-sm text-stone-600",children:je.subscription_end?new Date(je.subscription_end).toLocaleDateString():"-"}),i.jsx("td",{className:"py-3 px-4 text-sm text-stone-600",children:new Date(je.created_date).toLocaleDateString()})]},je.email))})]})})})})]})}),(n==="all"||n==="free")&&i.jsx(Ax,{open:c,onOpenChange:u,children:i.jsxs(Ee,{className:"bg-white/95 border-[#e8d5b7]/30",children:[i.jsx(kx,{className:"w-full",children:i.jsx(Ze,{className:"cursor-pointer hover:bg-stone-50",children:i.jsxs(et,{className:"text-stone-800 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(b1,{className:"w-5 h-5 text-stone-600"}),e("userReport.freeUsersCount","Free Users ({{count}})",{count:te.free.length})]}),c?i.jsx(uh,{className:"w-5 h-5"}):i.jsx(La,{className:"w-5 h-5"})]})})}),i.jsx(Ex,{children:i.jsx(Oe,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-stone-200",children:[i.jsxs("th",{className:"text-left py-3 px-4 text-sm font-semibold text-stone-700 cursor-pointer hover:bg-stone-50",onClick:()=>le("full_name"),children:[e("userReport.name","Name")," ",d==="full_name"&&(m==="asc"?"↑":"↓")]}),i.jsxs("th",{className:"text-left py-3 px-4 text-sm font-semibold text-stone-700 cursor-pointer hover:bg-stone-50",onClick:()=>le("email"),children:[e("userReport.email","Email")," ",d==="email"&&(m==="asc"?"↑":"↓")]}),i.jsxs("th",{className:"text-left py-3 px-4 text-sm font-semibold text-stone-700 cursor-pointer hover:bg-stone-50",onClick:()=>le("subscription_status"),children:[e("userReport.status","Status")," ",d==="subscription_status"&&(m==="asc"?"↑":"↓")]}),i.jsxs("th",{className:"text-left py-3 px-4 text-sm font-semibold text-stone-700 cursor-pointer hover:bg-stone-50",onClick:()=>le("created_date"),children:[e("userReport.joined","Joined")," ",d==="created_date"&&(m==="asc"?"↑":"↓")]})]})}),i.jsx("tbody",{children:te.free.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"4",className:"text-center py-8 text-stone-500",children:s?e("userReport.noUsersMatchSearch","No users match your search"):e("userReport.noFreeUsersFound","No free users found")})}):te.free.map(je=>i.jsxs("tr",{className:"border-b border-stone-100 hover:bg-stone-50",children:[i.jsx("td",{className:"py-3 px-4 text-sm text-stone-800",children:je.full_name||"-"}),i.jsx("td",{className:"py-3 px-4 text-sm text-stone-600",children:je.email}),i.jsx("td",{className:"py-3 px-4",children:i.jsx(Ge,{variant:"outline",className:"text-stone-600",children:je.subscription_status})}),i.jsx("td",{className:"py-3 px-4 text-sm text-stone-600",children:new Date(je.created_date).toLocaleDateString()})]},je.email))})]})})})})]})})]})}function tRe(){const e=async()=>{try{await Ce.auth.redirectToLogin()}catch(n){console.error("Redirect failed:",n)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42] flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-2xl space-y-6",children:[i.jsxs(Ee,{children:[i.jsx(Ze,{children:i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(vn,{className:"w-8 h-8 text-[#A35C5C]"}),i.jsx(et,{className:"text-2xl",children:"Email Verification Help"})]})}),i.jsx(Oe,{className:"space-y-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#E0D8C8]",children:"Verification Code Expired?"}),i.jsx("p",{className:"text-[#E0D8C8]/70",children:"If your email verification code expired or you missed the 10-minute window, you have a few options:"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"p-4 bg-[#1A2B3A]/50 rounded-lg border border-[#A35C5C]/30",children:[i.jsxs("h4",{className:"font-semibold text-[#E0D8C8] mb-2 flex items-center gap-2",children:[i.jsx($s,{className:"w-4 h-4"}),"Option 1: Request a New Verification Code"]}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70 mb-3",children:"Click below to return to the login page. Enter your email again and a fresh verification code will be sent automatically with a new 10-minute window."}),i.jsx(ye,{onClick:e,className:"w-full",children:"Request New Code"}),i.jsxs("p",{className:"text-xs text-[#E0D8C8]/60 mt-2",children:["✓ This will send a new 6-digit code to your email",i.jsx("br",{}),"✓ You'll have 10 minutes to enter the new code",i.jsx("br",{}),"✓ Check your spam folder if you don't see it"]})]}),i.jsxs("div",{className:"p-4 bg-[#1A2B3A]/50 rounded-lg border border-[#A35C5C]/30",children:[i.jsxs("h4",{className:"font-semibold text-[#E0D8C8] mb-2 flex items-center gap-2",children:[i.jsx(Cu,{className:"w-4 h-4"}),"Option 2: Contact Support"]}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70 mb-3",children:"If you're unable to receive a new verification code, please contact us directly:"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("a",{href:"mailto:admin@pipekeeperapp.com",className:"block w-full text-center px-4 py-2 bg-[#A35C5C] text-[#E0D8C8] rounded-lg hover:bg-[#8F4E4E] transition-colors",children:"admin@pipekeeperapp.com"}),i.jsx("p",{className:"text-xs text-[#E0D8C8]/60 text-center",children:"Include your email address and describe the issue you're experiencing"})]})]})]}),i.jsxs("div",{className:"mt-6 p-4 bg-[#2EAF6F]/10 border border-[#2EAF6F]/30 rounded-lg",children:[i.jsx("h4",{className:"font-semibold text-[#E0D8C8] mb-2",children:"Troubleshooting Tips"}),i.jsxs("ul",{className:"text-sm text-[#E0D8C8]/70 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Check your spam/junk folder for the verification email"}),i.jsx("li",{children:"Make sure you're using the correct email address"}),i.jsx("li",{children:"Wait a few minutes and try logging in again to receive a fresh code"}),i.jsx("li",{children:"Clear your browser cache and cookies if the issue persists"})]})]})]})})]}),i.jsx("div",{className:"text-center",children:i.jsx("a",{href:"https://pipekeeper.app",className:"text-[#E0D8C8]/70 hover:text-[#E0D8C8] text-sm transition-colors",children:"← Back to PipeKeeper"})})]})})}class nRe extends ve.Component{constructor(n){super(n),this.state={hasError:!1,error:null,info:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("[PipeKeeper] Fatal UI Error:",n,r),this.setState({info:r})}render(){var r,s,a,o,l,c,u;if(!this.state.hasError)return this.props.children;const n=typeof window<"u"&&(((s=(r=window.location)==null?void 0:r.hostname)==null?void 0:s.includes("localhost"))||((o=(a=window.location)==null?void 0:a.hostname)==null?void 0:o.includes("preview"))||((c=(l=window.location)==null?void 0:l.hostname)==null?void 0:c.includes("base44")));return i.jsxs("div",{style:{padding:18,fontFamily:"system-ui",lineHeight:1.4},children:[i.jsx("h2",{style:{fontSize:18,marginBottom:8},children:"PipeKeeper failed to load"}),i.jsx("p",{style:{opacity:.8,marginBottom:12},children:"Please close and reopen the app. If this keeps happening, contact support."}),n&&i.jsxs("pre",{style:{whiteSpace:"pre-wrap",background:"#111",color:"#fff",padding:12,borderRadius:8,fontSize:12,overflow:"auto",maxHeight:240},children:[String(this.state.error||""),`

`,String(((u=this.state.info)==null?void 0:u.componentStack)||"")]})]})}}class fJ extends ve.Component{constructor(n){super(n),this.state={hasError:!1,error:null,diagnostics:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){var l,c,u;const s=(()=>{try{return localStorage.getItem("pk_lang")||"unknown"}catch{return"unknown"}})(),a=(()=>{try{return window.location.pathname||"unknown"}catch{return"unknown"}})(),o={error:(n==null?void 0:n.toString())||"Unknown error",message:(n==null?void 0:n.message)||"",stack:(n==null?void 0:n.stack)||"",componentStack:(r==null?void 0:r.componentStack)||"",language:s,route:a,timestamp:new Date().toISOString()};this.setState({diagnostics:o}),console.error("[GlobalErrorBoundary] Error caught:",o),((l=n==null?void 0:n.message)!=null&&l.includes("is not a function")||(c=n==null?void 0:n.message)!=null&&c.includes("useTranslation")||(u=n==null?void 0:n.message)!=null&&u.includes("formatCurrency"))&&console.error("[GlobalErrorBoundary] ⚠️ i18n/formatter error detected!",{language:s,route:a,errorMsg:n==null?void 0:n.message});try{fetch("/api/log-client-error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).catch(()=>{})}catch{}}render(){var n,r,s,a,o,l,c,u,d,f,m,g;if(this.state.hasError){const x=((r=(n=this.state.error)==null?void 0:n.message)==null?void 0:r.includes("useTranslation"))||((a=(s=this.state.error)==null?void 0:s.message)==null?void 0:a.includes("is not a function"))||((l=(o=this.state.error)==null?void 0:o.message)==null?void 0:l.includes("formatCurrency"));return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0B1320] via-[#112133] to-[#0B1320] flex items-center justify-center p-6",children:i.jsx("div",{className:"max-w-md w-full bg-[#1A2B3A] rounded-2xl p-8 border border-[#A35C5C]/30 shadow-2xl",children:i.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center",children:i.jsx(vn,{className:"w-8 h-8 text-red-500"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#E0D8C8] mb-2",children:"Something went wrong"}),i.jsx("p",{className:"text-[#E0D8C8]/70 text-sm",children:"We've encountered an unexpected error. Please try refreshing the page."})]}),x&&i.jsx("div",{className:"w-full p-3 bg-amber-900/20 border border-amber-600/30 rounded text-left",children:i.jsxs("p",{className:"text-xs text-amber-400",children:["⚠️ ",i.jsx("strong",{children:"Translation error detected"}),i.jsx("br",{}),"Language: ",((c=this.state.diagnostics)==null?void 0:c.language)||"unknown",i.jsx("br",{}),"Route: ",((u=this.state.diagnostics)==null?void 0:u.route)||"unknown"]})}),((f=(d=import.meta)==null?void 0:d.env)==null?void 0:f.DEV)&&i.jsxs("details",{className:"w-full mt-4 text-left",children:[i.jsx("summary",{className:"text-xs text-[#E0D8C8]/50 cursor-pointer hover:text-[#E0D8C8]/70",children:"Error details"}),i.jsx("pre",{className:"mt-2 text-xs text-red-400 bg-black/20 p-3 rounded overflow-auto max-h-32",children:((m=this.state.error)==null?void 0:m.stack)||((g=this.state.error)==null?void 0:g.message)||String(this.state.error)})]}),i.jsxs("div",{className:"flex gap-3 mt-4 w-full",children:[i.jsx(ye,{variant:"outline",onClick:()=>{try{localStorage.setItem("pk_lang","en")}catch{}this.setState({hasError:!1,error:null,diagnostics:null})},className:"flex-1",children:"Try Again"}),i.jsx(ye,{onClick:()=>{try{x&&localStorage.setItem("pk_lang","en")}catch{}window.location.reload()},className:"flex-1",children:"Reload Page"})]})]})})})}return this.props.children}}function rRe(){const{t:e}=$t(),n=co(),[r,s]=C.useState(!1);C.useEffect(()=>{const o=l=>{l.key==="k"&&(l.metaKey||l.ctrlKey)&&(l.preventDefault(),s(c=>!c))};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[]);const a=C.useMemo(()=>[{label:e("search.sectionPipes",{defaultValue:"Pipes"}),href:"/pipes"},{label:e("search.sectionTobacco",{defaultValue:"Tobacco"}),href:"/tobacco"},{label:e("search.actionViewStats",{defaultValue:"View Collection Stats"}),href:"/insights"},{label:e("search.actionExportData",{defaultValue:"Export Collection Data"}),href:"/reports"},{label:e("search.actionAddPipe",{defaultValue:"Add New Pipe"}),href:"/pipes/new"},{label:e("search.actionAddBlend",{defaultValue:"Add New Blend"}),href:"/tobacco/new"}],[e]);return i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",onClick:()=>s(!0),"aria-label":e("search.openAria",{defaultValue:"Open search"}),className:"inline-flex items-center gap-2 rounded-md border border-white/10 bg-white/5 px-3 py-1.5 text-sm text-white/80 hover:bg-white/10",children:[i.jsx(fs,{className:"h-4 w-4"}),i.jsx("span",{className:"truncate",children:e("search.trigger",{defaultValue:"Search..."})}),i.jsx("span",{className:"ml-2 rounded border border-white/10 bg-white/5 px-1.5 py-0.5 text-[10px] text-white/60",children:"⌘ K"})]}),i.jsxs(Hve,{open:r,onOpenChange:s,children:[i.jsx(_3,{placeholder:e("search.commandInputPlaceholder",{defaultValue:"Type to search pipes, tobacco, makers..."})}),i.jsxs(aG,{children:[i.jsx(S3,{children:i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"text-sm font-medium",children:e("search.noResultsFound",{defaultValue:"No results found"})}),i.jsx("div",{className:"mt-1 text-sm text-muted-foreground",children:e("search.noResultsMessage",{defaultValue:"Try searching for a pipe name, maker, tobacco blend, or shape"})})]})}),i.jsx(C3,{heading:e("search.sectionQuickActions",{defaultValue:"Quick Actions"}),children:a.map(o=>i.jsx(P3,{value:o.label,onSelect:()=>{s(!1),n(o.href)},children:o.label},o.href))})]})]})]})}const sRe={Community:"Home",PublicProfile:"Community",TobaccoDetail:"Tobacco",PipeDetail:"Pipes",Profile:"Home",AIUpdates:"Home",FAQ:"Home",Support:"Home",HowTo:"Home",Troubleshooting:"Home",AdminReports:"Home"},iRe=new Set(["Home","Index","Pipes","Tobacco","TermsOfService","PrivacyPolicy","Subscription","AgeGate"]);let Vb=0;function H$({currentPageName:e,className:n=""}){const{t:r}=$t(),s=co(),a=$h(),[o,l]=C.useState(!1);if(C.useEffect(()=>{var d;const u=((d=a.state)==null?void 0:d.fromInternal)||Vb>0;return l(u),Vb++,()=>{Vb>0&&Vb--}},[a]),iRe.has(e))return null;const c=()=>{if(window.history.length>1)s(-1);else{const u=sRe[e]||"Home";s(xt(u))}};return i.jsxs(ye,{variant:"ghost",size:"sm",onClick:c,className:`text-[#E0D8C8] hover:bg-white/10 ${n}`,"aria-label":r("common.back"),children:[i.jsx($i,{className:"w-4 h-4 mr-1"}),i.jsx("span",{className:"hidden sm:inline",children:r("common.back")})]})}var aRe=(e,n,r,s,a,o,l,c)=>{let u=document.documentElement,d=["light","dark"];function f(x){(Array.isArray(e)?e:[e]).forEach(v=>{let y=v==="class",b=y&&o?a.map(N=>o[N]||N):a;y?(u.classList.remove(...b),u.classList.add(o&&o[x]?o[x]:x)):u.setAttribute(v,x)}),m(x)}function m(x){c&&d.includes(x)&&(u.style.colorScheme=x)}function g(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)f(s);else try{let x=localStorage.getItem(n)||r,v=l&&x==="system"?g():x;f(v)}catch{}},oRe=C.createContext(void 0),lRe={setTheme:e=>{},themes:[]},cRe=()=>{var e;return(e=C.useContext(oRe))!=null?e:lRe};C.memo(({forcedTheme:e,storageKey:n,attribute:r,enableSystem:s,enableColorScheme:a,defaultTheme:o,value:l,themes:c,nonce:u,scriptProps:d})=>{let f=JSON.stringify([r,n,o,e,c,l,s,a]).slice(1,-1);return C.createElement("script",{...d,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${aRe.toString()})(${f})`}})});const uRe=({...e})=>{const{theme:n="system"}=cRe();return i.jsx(qoe,{theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},dRe=/^[a-z0-9]+(\.[a-z0-9]+)+$/i;function hRe(e,n){var r,s;(s=(r=import.meta)==null?void 0:r.env)!=null&&s.PROD||typeof e=="string"&&dRe.test(e)&&console.warn("[i18n-regression] Key leak detected:",{text:e,context:n})}function fRe({title:e}){const{t:n}=$t(),r=e||n("common.appName");return C.useEffect(()=>{document.title=r;const s=setTimeout(()=>document.title=r,50);return()=>clearTimeout(s)},[r]),null}const A4="pk_tos_local_accept_v1";function mRe(e){const n=String((e==null?void 0:e.message)||e||"");return n.includes("429")||n.toLowerCase().includes("rate limit")}function pRe(e){if(e==null?void 0:e.tos_accepted_at)return!0;try{return localStorage.getItem(A4)==="1"}catch{return!1}}function gRe({user:e}){const{t:n}=$t(),r=On(),[s,a]=C.useState(!1),[o,l]=C.useState(!1),[c,u]=C.useState(""),d=C.useMemo(()=>`${xt("TermsOfService")}?view=1`,[]),f=C.useMemo(()=>`${xt("PrivacyPolicy")}?view=1`,[]);if(!e||pRe(e))return null;async function m(){try{localStorage.setItem(A4,"1")}catch{}}async function g(){try{localStorage.removeItem(A4)}catch{}}async function x(){if(!(!s||o)){l(!0),u("");try{const v=new Date().toISOString();await Ce.auth.updateMe({tos_accepted_at:v}),await g(),await r.invalidateQueries({queryKey:["current-user"]}),u(n("termsGate.savedContinuing"))}catch(v){console.error("[TermsGate] accept failed:",v),mRe(v)?(await m(),await r.invalidateQueries({queryKey:["current-user"]}),u(n("termsGate.rateLimitedTemporary"))):u("We couldn’t save your acceptance. Please try again.")}finally{l(!1)}}}return i.jsx("div",{className:"fixed inset-0 z-[99999] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-xl rounded-2xl border border-white/10 bg-[#101b2a] p-5 shadow-2xl text-[#E0D8C8]",children:[i.jsx("div",{className:"text-xl font-bold text-white",children:n("termsGate.beforeContinue")}),i.jsx("div",{className:"mt-2 text-sm text-[#E0D8C8]/70",children:n("termsGate.reviewAccept")}),i.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm",children:[i.jsx("a",{className:"underline font-semibold",href:d,target:"_blank",rel:"noreferrer",children:n("termsGate.termsOfService")}),i.jsx("span",{className:"text-[#E0D8C8]/50",children:"•"}),i.jsx("a",{className:"underline font-semibold",href:f,target:"_blank",rel:"noreferrer",children:n("termsGate.privacyPolicy")})]}),i.jsxs("label",{className:"mt-4 flex gap-2 items-start",children:[i.jsx("input",{type:"checkbox",checked:s,onChange:v=>a(v.target.checked),className:"mt-1"}),i.jsx("span",{className:"text-sm",children:n("termsGate.agreeCheckbox")})]}),c?i.jsx("div",{className:"mt-3 text-xs text-[#E0D8C8]/70",children:c}):null,i.jsx("button",{onClick:x,disabled:!s||o,className:"mt-4 w-full rounded-xl bg-[#7b2d2d] px-4 py-3 font-bold text-white disabled:opacity-70",children:n(o?"termsGate.saving":"termsGate.acceptContinue")}),i.jsx("div",{className:"mt-3 text-[11px] text-[#E0D8C8]/55 leading-snug",children:n("termsGate.rateLimitNote")})]})})}function xRe({isOpen:e,onClose:n}){return i.jsx(fa,{open:e,onOpenChange:n,children:i.jsxs(ma,{className:"sm:max-w-md",children:[i.jsxs(ho,{children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"w-12 h-12 rounded-full bg-[#A35C5C]/20 flex items-center justify-center",children:i.jsx(Tm,{className:"w-6 h-6 text-[#A35C5C] fill-current"})})}),i.jsx(fo,{className:"text-center text-xl",children:"Thank You for Being an Early Supporter"}),i.jsxs(Vh,{className:"text-center space-y-3 pt-4",children:[i.jsx("p",{children:"Thanks for subscribing to PipeKeeper Premium and for supporting the app early on."}),i.jsx("p",{children:"As a founding member, you'll continue to enjoy full Premium access, including all features available today. Nothing you currently have access to will be removed or restricted."}),i.jsx("p",{children:"Your support truly helps shape the future of PipeKeeper."})]})]}),i.jsx("div",{className:"flex justify-center pt-4",children:i.jsx(ye,{onClick:n,className:"px-8",children:"Got it — thanks!"})})]})})}function vRe(){const n=[].join(`
`),r=new Blob([n],{type:"text/plain"}),s=URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download="missing-keys.txt",a.click(),URL.revokeObjectURL(s)}function yRe(){if(typeof window>"u")return!1;try{const e=new URLSearchParams(window.location.search);return(e==null?void 0:e.get("debug"))==="1"}catch{return!1}}function bRe(e){if(typeof navigator>"u"||!navigator.clipboard)return console.warn("[EntitlementDebug] Clipboard API not available"),!1;try{return navigator.clipboard.writeText(e),!0}catch(n){return console.error("[EntitlementDebug] Copy failed:",n),!1}}function wRe(){var P;const[e,n]=C.useState(!1),[r,s]=C.useState(!1),[a,o]=C.useState(!1),{user:l,subscription:c,isLoading:u,hasPaid:d,hasPremium:f,isInTrial:m,isAdmin:g}=Kr();if(C.useEffect(()=>{o(!0)},[]),!a||u||!(l!=null&&l.email))return null;const x=yRe();if(!(g&&x))return null;const y=tE(c),b=Jz(l),N=c!=null&&c.stripe_subscription_id?"Stripe":c!=null&&c.id?"Apple IAP":"None",j={tier:(c==null?void 0:c.tier)||"free",isOnTrial:m,subscriptionStartedAt:(c==null?void 0:c.subscriptionStartedAt)||null,isLegacyPremium:y,isFoundingMember:b,planSource:N,canUseSummary:f},S=()=>{bRe(JSON.stringify(j,null,2))?(s(!0),setTimeout(()=>s(!1),2e3),Ve.success("Snapshot copied")):Ve.error("Copy failed - clipboard unavailable")},A=()=>{vRe(),Ve.success("i18n report downloaded")};return i.jsxs("div",{className:"fixed bottom-4 right-4 max-w-xs bg-black/95 text-white/80 text-xs p-3 rounded-lg border border-yellow-600/50 font-mono z-40 shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[i.jsxs("div",{className:"text-yellow-500 font-bold flex items-center gap-1",children:[i.jsx("span",{children:"🔍 Debug"}),i.jsx("span",{className:"text-blue-400 text-[10px]",children:"(Admin)"})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:A,className:"hover:bg-white/10 p-1 rounded transition-colors",title:"Download i18n report",children:i.jsx(MP,{className:"w-3 h-3 text-white/60"})}),i.jsx("button",{onClick:S,className:"hover:bg-white/10 p-1 rounded transition-colors",title:"Copy snapshot",children:r?i.jsx(vh,{className:"w-3 h-3 text-green-400"}):i.jsx(YZ,{className:"w-3 h-3 text-white/60"})}),i.jsx("button",{onClick:()=>n(!e),className:"hover:bg-white/10 p-1 rounded transition-colors",children:e?i.jsx(uh,{className:"w-3 h-3"}):i.jsx(La,{className:"w-3 h-3"})})]})]}),e&&i.jsxs("div",{className:"space-y-1 border-t border-white/10 pt-2",children:[i.jsxs("div",{children:["Tier: ",i.jsx("span",{className:"text-blue-400",children:j.tier})]}),i.jsxs("div",{children:["Paid: ",i.jsx("span",{className:d?"text-green-400":"text-red-400",children:d?"Yes":"No"})]}),i.jsxs("div",{children:["Premium: ",i.jsx("span",{className:f?"text-green-400":"text-red-400",children:f?"Yes":"No"})]}),i.jsxs("div",{children:["Trial: ",i.jsx("span",{className:m?"text-orange-400":"text-gray-500",children:m?"Yes":"No"})]}),i.jsxs("div",{children:["Legacy: ",i.jsx("span",{className:y?"text-purple-400":"text-gray-500",children:y?"Yes":"No"})]}),i.jsxs("div",{children:["Founder: ",i.jsx("span",{className:b?"text-amber-400":"text-gray-500",children:b?"Yes":"No"})]}),i.jsxs("div",{children:["Source: ",i.jsx("span",{className:"text-cyan-400",children:N})]}),i.jsxs("div",{className:"text-gray-400 mt-1",children:["Started: ",((P=j.subscriptionStartedAt)==null?void 0:P.split("T")[0])||"N/A"]})]})]})}function jRe(){const[e,n]=C.useState(!1),[r,s]=C.useState(null),[a,o]=C.useState(null),{user:l,subscription:c,hasPaid:u,hasPremium:d,hasPro:f,isTrial:m,provider:g,isLoading:x}=Kr(),v=n0(),y=async()=>{if(!(l!=null&&l.email))return;const b=await iv(l.email,u,m),N=await av(l.email,u,m);s(b),o(N)};return ve.useEffect(()=>{e&&(l!=null&&l.email)&&y()},[e,l==null?void 0:l.email,u,m]),(l==null?void 0:l.role)!=="admin"?null:i.jsxs("div",{className:"fixed bottom-4 right-4 z-[9999]",children:[i.jsxs(ye,{onClick:()=>n(!e),variant:"outline",size:"sm",className:"bg-purple-600 text-white hover:bg-purple-700 border-purple-500",children:[e?i.jsx(La,{className:"w-4 h-4"}):i.jsx(uh,{className:"w-4 h-4"}),"Debug"]}),e&&i.jsxs(Ee,{className:"absolute bottom-12 right-0 w-96 max-h-[600px] overflow-y-auto shadow-2xl bg-white",children:[i.jsx(Ze,{className:"pb-3 bg-purple-50 border-b",children:i.jsx(et,{className:"text-sm flex items-center gap-2 text-slate-900",children:"🔍 Permissions Debug Panel"})}),i.jsxs(Oe,{className:"space-y-4 text-xs pt-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-2 text-slate-900",children:"User Info"}),i.jsxs("div",{className:"space-y-1 font-mono bg-slate-50 p-2 rounded text-slate-900",children:[i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Email:"})," ",(l==null?void 0:l.email)||"N/A"]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"ID:"})," ",(l==null?void 0:l.id)||(l==null?void 0:l.auth_user_id)||"N/A"]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Role:"})," ",(l==null?void 0:l.role)||"user"]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Created:"})," ",(l==null?void 0:l.created_date)||(l==null?void 0:l.created_at)||"Unknown"]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-2 text-slate-900",children:"Subscription Info"}),i.jsxs("div",{className:"space-y-1 font-mono bg-slate-50 p-2 rounded text-slate-900",children:[i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Provider:"})," ",g||(c==null?void 0:c.provider)||"None"]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Status:"})," ",(c==null?void 0:c.status)||"None"]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Tier:"})," ",(c==null?void 0:c.tier)||"None"]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Period End:"})," ",c!=null&&c.current_period_end?new Date(c.current_period_end).toLocaleDateString():"N/A"]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Stripe Customer:"})," ",(c==null?void 0:c.stripe_customer_id)||(l==null?void 0:l.stripe_customer_id)||"None"]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-2 text-slate-900",children:"useCurrentUser Flags"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oi,{label:"hasPaid",value:u}),i.jsx(Oi,{label:"hasPremium",value:d}),i.jsx(Oi,{label:"hasPro",value:f}),i.jsx(Oi,{label:"isTrial",value:m}),i.jsx(Oi,{label:"isLoading",value:x})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-2 text-slate-900",children:"Utility Function Checks"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oi,{label:"hasPaidAccess()",value:ny(l,c)}),i.jsx(Oi,{label:"hasProAccess()",value:i2(l,c)}),i.jsx(Oi,{label:"hasPremiumAccess()",value:ry(l,c)})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-2 text-slate-900",children:"Entitlements"}),i.jsxs("div",{className:"space-y-1 font-mono bg-slate-50 p-2 rounded text-slate-900",children:[i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Tier:"})," ",v.tier]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Legacy:"})," ",v.isPremiumLegacy?"Yes":"No"]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Pipes:"})," ",v.limits.pipes===1/0?"∞":v.limits.pipes]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Tobacco:"})," ",v.limits.tobaccos===1/0?"∞":v.limits.tobaccos]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Photos:"})," ",v.limits.photosPerItem===1/0?"∞":v.limits.photosPerItem]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-2 text-slate-900",children:"Feature Access"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oi,{label:"UNLIMITED_COLLECTION",value:v.canUse("UNLIMITED_COLLECTION")}),i.jsx(Oi,{label:"AI_IDENTIFY",value:v.canUse("AI_IDENTIFY")}),i.jsx(Oi,{label:"COLLECTION_OPTIMIZATION",value:v.canUse("COLLECTION_OPTIMIZATION")}),i.jsx(Oi,{label:"EXPORT_REPORTS",value:v.canUse("EXPORT_REPORTS")}),i.jsx(Oi,{label:"AI_VALUE_LOOKUP",value:v.canUse("AI_VALUE_LOOKUP")}),i.jsx(Oi,{label:"BULK_EDIT",value:v.canUse("BULK_EDIT")})]})]}),r&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-2 text-slate-900",children:"Pipe Creation Check"}),i.jsxs("div",{className:"space-y-1 font-mono bg-slate-50 p-2 rounded",children:[i.jsx(Oi,{label:"Can Create",value:r.canCreate}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Current:"})," ",r.currentCount]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Limit:"})," ",r.limit===null?"∞":r.limit]}),r.reason&&i.jsx("p",{className:"text-red-700 text-xs font-semibold",children:r.reason})]})]}),a&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-2 text-slate-900",children:"Tobacco Creation Check"}),i.jsxs("div",{className:"space-y-1 font-mono bg-slate-50 p-2 rounded",children:[i.jsx(Oi,{label:"Can Create",value:a.canCreate}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Current:"})," ",a.currentCount]}),i.jsxs("p",{className:"text-slate-900",children:[i.jsx("strong",{children:"Limit:"})," ",a.limit===null?"∞":a.limit]}),a.reason&&i.jsx("p",{className:"text-red-700 text-xs font-semibold",children:a.reason})]})]}),i.jsx(ye,{onClick:y,variant:"outline",size:"sm",className:"w-full",children:"Refresh Limit Checks"})]})]})]})}function Oi({label:e,value:n}){return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-slate-700",children:[e,":"]}),n?i.jsxs(Ge,{className:"bg-green-100 text-green-800 border-green-300 gap-1",children:[i.jsx(Nr,{className:"w-3 h-3"}),"Pass"]}):i.jsxs(Ge,{className:"bg-red-100 text-red-800 border-red-300 gap-1",children:[i.jsx(ha,{className:"w-3 h-3"}),"Fail"]})]})}function W$({className:e=""}){const{t:n,lang:r}=$t(),s=C.useMemo(()=>{const o=(r||"en").trim();return Y8.some(l=>l.code===o)?o:"en"},[r]),a=o=>{try{localStorage.setItem("pk_lang",o),window.location.reload()}catch(l){console.error("[LanguageSwitcher] Failed to change language:",l)}};return i.jsx("select",{value:s,onChange:o=>a(o.target.value),className:e||"bg-[#1A2B3A]/90 border border-[#A35C5C]/40 text-[#E0D8C8] rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#A35C5C]/50","aria-label":n("common.language")||"Language",children:Y8.map(o=>i.jsx("option",{value:o.code,children:o.label},o.code))})}function NRe({isOpen:e,onClose:n}){const{t:r}=$t(),s=co(),a=[{icon:wh,label:r("nav.pipes"),description:r("quickAccess.catalogPipes"),page:"Pipes"},{icon:Hp,label:r("nav.tobacco"),description:r("quickAccess.manageBlendsAndCellar"),page:"Tobacco"},{icon:RZ,label:r("quickAccess.collectionInsights"),description:r("quickAccess.viewPairingsUsageTrends"),page:"Home",hash:"#insights"},{icon:L4,label:r("quickAccess.reportsExports"),description:r("quickAccess.generatePDFCSV"),page:"Home",hash:"#insights"},{icon:Da,label:r("quickAccess.aiTools"),description:r("quickAccess.photoIdentificationOptimization"),page:"Home",hash:"#ai-tools"},{icon:XZ,label:r("subscription.title"),description:r("quickAccess.manageSubscription"),page:"Subscription"},{icon:hm,label:r("nav.profile"),description:r("quickAccess.accountSettings"),page:"Profile"},{icon:Ux,label:r("nav.help"),description:r("nav.faq"),page:"Help"}],o=l=>{const c=xt(l.page);s(c+(l.hash||"")),n()};return i.jsx(fa,{open:e,onOpenChange:n,children:i.jsxs(ma,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[i.jsxs(ho,{children:[i.jsx(fo,{className:"text-xl",children:r("quickAccess.quickAccess")}),i.jsx("p",{className:"text-sm text-[#E0D8C8]/70",children:r("quickAccess.jumpToFeatures")})]}),i.jsx("div",{className:"grid gap-3 mt-4",children:a.map((l,c)=>i.jsxs("button",{onClick:()=>o(l),className:"flex items-start gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-left",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#A35C5C]/20 flex items-center justify-center flex-shrink-0",children:i.jsx(l.icon,{className:"w-5 h-5 text-[#A35C5C]"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-semibold text-[#E0D8C8] text-sm",children:l.label}),i.jsx("p",{className:"text-xs text-[#E0D8C8]/70 mt-0.5",children:l.description})]})]},c))})]})})}var cq,uq;(uq=(cq=import.meta)==null?void 0:cq.env)!=null&&uq.DEV&&console.log("[PipeKeeper] Canonical entitlement system active");const RP="https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/694956e18d119cc497192525/6be04be36_Screenshot2025-12-22at33829PM.png",_Re="https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/694956e18d119cc497192525/15563e4ee_PipeiconUpdated-fotor-20260110195319.png";function Hb({item:e,currentPage:n,onClick:r,hasPaidAccess:s,isMobile:a=!1}){const o=n===e.page;return i.jsxs(ca,{to:xt(e.page),onClick:r,className:ut("flex items-center gap-1.5 px-2 py-2 rounded-lg font-medium text-xs transition-all duration-200 transform hover:scale-105 flex-shrink-0 whitespace-nowrap",o?"bg-gradient-to-r from-[#A35C5C] to-[#8B4A4A] text-[#E0D8C8] shadow-md":a?"text-[#1a2c42] hover:bg-[#A35C5C]/10":"text-[#E0D8C8]/70 hover:bg-[#A35C5C]/30 hover:text-[#E0D8C8]"),style:{WebkitTapHighlightColor:"transparent"},"aria-current":o?"page":void 0,role:"link",title:e.name,children:[e.isIconComponent?i.jsx(e.icon,{className:"w-5 h-5 flex-shrink-0"}):i.jsx("img",{src:e.icon,alt:e.name,className:"w-5 h-5 sm:w-6 sm:h-6 object-contain flex-shrink-0",style:{filter:a?"brightness(0)":o?"invert(1) sepia(0.35) saturate(0.4) hue-rotate(350deg) brightness(1)":"invert(1) sepia(0.35) saturate(0.4) hue-rotate(350deg) brightness(0.9) opacity(0.7)"}}),i.jsx("span",{className:ut("truncate",a?"inline":"hidden lg:inline"),children:e.name}),e.isPremium&&!s&&i.jsx(yh,{className:"w-3 h-3 text-amber-500"})]})}const K$="pk_age_confirmed",mJ="pk_subscribe_prompt_last_shown";function pJ(e){return`pk_stripe_sync_last_${e||"unknown"}`}function SRe(e){try{if(!e)return!1;const n=localStorage.getItem(pJ(e));if(!n)return!0;const r=new Date(n).getTime();return Number.isNaN(r)?!0:Date.now()-r>600*1e3}catch{return!0}}function CRe(e){try{if(!e)return;localStorage.setItem(pJ(e),new Date().toISOString())}catch{}}function PRe(){try{const e=localStorage.getItem(mJ);if(!e)return!0;const n=new Date(e).getTime();return Number.isNaN(n)?!0:Date.now()-n>1440*60*1e3}catch{return!0}}function ARe(){try{localStorage.setItem(mJ,new Date().toISOString())}catch{}}async function kRe(){const e=["syncFromStripe","syncStripeFromStripe","syncStripeSubscriptions","syncSubscriptionFromStripe","syncStripeForUser","syncStripeForCurrentUser","syncMySubscription"];for(const n of e)try{const r=mh!=null&&mh()?{platform:"ios"}:{},s=await Ce.functions.invoke(n,r);return{ok:!0,fn:n,res:s}}catch{}return{ok:!1}}function gJ({children:e,currentPageName:n}){console.log("8️⃣ Layout component rendering");try{const[r,s]=C.useState(!1),[a,o]=C.useState(()=>typeof window<"u"?localStorage.getItem(K$)==="true":!1),[l,c]=C.useState(!1),[u,d]=C.useState(!1),[f,m]=C.useState(!1),[g,x]=C.useState(""),[v,y]=C.useState(!1),[b,N]=C.useState(!1),j=co(),S=On(),A=C.useMemo(()=>SE(),[]),{t:P,lang:L}=dq();console.log("9️⃣ Layout useTranslation hook successful"),C.useEffect(()=>{var Q,T;(T=(Q=import.meta)==null?void 0:Q.env)!=null&&T.DEV&&console.log("[LANG_DEBUG]",{pk_lang:localStorage.getItem("pk_lang"),i18nextLng:localStorage.getItem("i18nextLng"),htmlLang:document.documentElement.lang})},[]),C.useEffect(()=>{const Q=T=>{if(T.preventDefault(),r){s(!1);return}j(-1)};return window.addEventListener("popstate",Q),()=>window.removeEventListener("popstate",Q)},[r,j]);const O=C.useMemo(()=>[{name:P("nav.home"),page:"Home",icon:xee,isIconComponent:!0},{name:P("nav.pipes"),page:"Pipes",icon:_Re,isIconComponent:!1},{name:P(cs?"nav.cellar":"nav.tobacco"),page:"Tobacco",icon:Hp,isIconComponent:!0},...Qz.community?[{name:P("nav.community"),page:"Community",icon:nm,isIconComponent:!0,isPremium:!0}]:[],{name:P("nav.profile"),page:"Profile",icon:hm,isIconComponent:!0},{name:P("nav.help"),page:"FAQ",icon:Ux,isIconComponent:!0}],[L,cs]),R=C.useMemo(()=>new Set(["FAQ","Support","TermsOfService","PrivacyPolicy","Invite","PublicProfile","Index","Subscription"]),[]),{user:q,isLoading:U,error:D,hasPremium:M,hasPaid:G,hasPro:Y,isAdmin:Z,subscription:X,isLoading:re}=Kr(),z=C.useMemo(()=>Z?[{name:P("nav.subscriptionSupport")||"Subscription Support",page:"SubscriptionSupport",icon:Wp,isIconComponent:!0},{name:P("nav.userReport")||"User Report",page:"UserReport",icon:nm,isIconComponent:!0},{name:P("nav.contentModeration")||"Content Moderation",page:"AdminReports",icon:yq,isIconComponent:!0},{name:P("nav.eventsLog")||"Events Log",page:"SubscriptionEventsLog",icon:L4,isIconComponent:!0}]:[],[Z,L]),te=!U&&(X||!0);C.useEffect(()=>{var Q,T;if((T=(Q=import.meta)==null?void 0:Q.env)!=null&&T.DEV&&O.length>0){const B=/^(Title|Subtitle|Page Title|Page Subtitle|Optional|Info|Description|Label)$/i;O.forEach(H=>{B.test(H.name)&&console.error("[i18n] Placeholder text rendered —",H.name,"— fix required"),hRe(H.name,`Nav: ${H.page}`)})}},[O]);const le=Q=>{x(Q),clearTimeout(le._timer),le._timer=setTimeout(()=>x(""),2600)};return C.useEffect(()=>{const Q=T=>{T.key==="logout"&&(S.removeQueries({predicate:B=>B.queryKey[0]!=="current-user"}),setTimeout(()=>window.location.reload(),100)),T.key==="pk_force_entitlement_refresh"&&(S.invalidateQueries({queryKey:["current-user"]}),S.invalidateQueries({queryKey:["subscription"]}))};return window.addEventListener("storage",Q),()=>window.removeEventListener("storage",Q)},[S]),C.useEffect(()=>{if(U||!(q!=null&&q.email)||cs||G||!SRe(q.email))return;let Q=!1;return(async()=>{try{d(!0);const T=await kRe();CRe(q.email),!Q&&T.ok&&(await S.invalidateQueries({queryKey:["current-user"]}),await S.invalidateQueries({queryKey:["subscription"]}),await S.refetchQueries({queryKey:["current-user"]}),await S.refetchQueries({queryKey:["subscription"]}))}catch(T){console.warn("[Layout] Auto Stripe sync failed (non-fatal):",(T==null?void 0:T.message)||T)}finally{Q||d(!1)}})(),()=>{Q=!0}},[U,q==null?void 0:q.email,G,S]),C.useEffect(()=>{U||q!=null&&q.email&&(q!=null&&q.isFoundingMember||G&&X&&(async()=>{try{const{ensureFoundingMemberStatus:Q}=await Y1(async()=>{const{ensureFoundingMemberStatus:B}=await import("./foundingMemberBackfill-B19c9iIA.js");return{ensureFoundingMemberStatus:B}},[]);await Q(q,X)&&await S.invalidateQueries({queryKey:["current-user"]})}catch(Q){console.warn("[Layout] Founding member backfill failed (non-fatal):",(Q==null?void 0:Q.message)||Q)}})())},[U,q,X,G,S]),C.useEffect(()=>{if(!A)return;YN("Layout mounted (bridge ok)"),TA();const Q=()=>{try{TA()}catch{}},T=()=>{document.visibilityState==="visible"&&Q()};window.addEventListener("focus",Q),document.addEventListener("visibilitychange",T);const B=gV(async H=>{var ce;console.log("[Layout] Native subscription payload:",H);const ee=!!H.active;y(ee);try{if(((ce=(await Ce.functions.invoke("syncAppleSubscriptionForMe",H)).data)==null?void 0:ce.code)==="ALREADY_LINKED"){le("This Apple subscription is already linked to a different account. Please sign in with the original account or contact support.");return}await S.invalidateQueries({queryKey:["current-user"]});const W=q==null?void 0:q.id,J=((q==null?void 0:q.email)||"").trim().toLowerCase();(W||J)&&await S.invalidateQueries({queryKey:["subscription",W,J]})}catch(he){console.error("[Layout] Apple subscription sync failed:",he),le("Failed to sync subscription. Please try again.")}});return()=>{window.removeEventListener("focus",Q),document.removeEventListener("visibilitychange",T),B==null||B()}},[A,S,q==null?void 0:q.id,q==null?void 0:q.email]),C.useEffect(()=>{if(!A)return;const Q=W=>{try{const J=typeof(W==null?void 0:W.composedPath)=="function"?W.composedPath():[],pe=[];let ue=W;for(let me=0;me<8&&ue;me++)pe.push(ue),ue=ue.parentElement;for(const me of J)me&&me.nodeType===1&&pe.push(me);for(const me of pe){const je=((me==null?void 0:me.innerText)||(me==null?void 0:me.textContent)||"").trim();if(je&&je.length<=60)return je}return""}catch{return""}},T=W=>{const J=(W||"").trim().toLowerCase();return J.includes("manage subscription")||J.includes("update subscription")||J.includes("cancel subscription")||J.includes("manage plan")||J.includes("manage billing")},B=W=>{const J=(W||"").trim().toLowerCase();return J==="upgrade"||J.includes("upgrade to pro")||J.includes("upgrade (app store)")||J.includes("subscribe")||J.includes("go pro")},H=(W,J)=>{const pe=Q(W.target);if(T(pe)){W.preventDefault(),W.stopPropagation(),le("Opening Apple Subscriptions…"),YN(`Intercepted manage (${J})`),O1()||le("Bridge not available: cannot open Apple subscriptions.");return}if(B(pe)){W.preventDefault(),W.stopPropagation(),le("Opening upgrade…"),YN(`Intercepted upgrade (${J})`),CE()||le("Bridge not available: cannot open upgrade.");return}},ee=W=>H(W,"pointerdown"),ce=W=>H(W,"touchend"),he=W=>H(W,"click");return document.addEventListener("pointerdown",ee,!0),document.addEventListener("touchend",ce,!0),document.addEventListener("click",he,!0),()=>{document.removeEventListener("pointerdown",ee,!0),document.removeEventListener("touchend",ce,!0),document.removeEventListener("click",he,!0)}},[A]),C.useEffect(()=>{U||q!=null&&q.email&&(G||R.has(n)||PRe()&&(c(!0),ARe()))},[U,q==null?void 0:q.email,G,n,R]),C.useEffect(()=>{if(U||!(q!=null&&q.email)||!G||q!=null&&q.foundingMemberAcknowledged)return;const Q=new Date("2026-02-01T00:00:00.000Z"),T=(X==null?void 0:X.subscriptionStartedAt)||(X==null?void 0:X.started_at)||(X==null?void 0:X.current_period_start);if(!T)return;new Date(T)<Q&&m(!0)},[U,q,G,X]),a?U?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42] flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("img",{src:"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/694956e18d119cc497192525/6838e48a7_IMG_4833.jpeg",alt:"PipeKeeper",className:"w-32 h-32 mx-auto mb-4 object-contain animate-pulse"}),i.jsx("p",{className:"text-[#e8d5b7]",children:P("common.loading")})]})}):(D||!(q!=null&&q.email))&&!R.has(n)?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2c42] via-[#243548] to-[#1a2c42] flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("img",{src:"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/694956e18d119cc497192525/6838e48a7_IMG_4833.jpeg",alt:"PipeKeeper",className:"w-32 h-32 mx-auto mb-4 object-contain"}),i.jsx("p",{className:"text-[#e8d5b7] text-lg font-semibold mb-6",children:P("auth.loginPrompt")}),i.jsx(ye,{onClick:()=>Ce.auth.redirectToLogin(),children:P("auth.login")})]})}):te?(console.log("🔟 Layout JSX about to return"),i.jsx(fJ,{children:i.jsxs(nRe,{children:[i.jsx(fRe,{title:"PipeKeeper"}),i.jsx(uRe,{position:"top-center"}),i.jsx(wxe,{children:i.jsxs("div",{className:"dark min-h-screen flex flex-col bg-gradient-to-br from-[#0B1320] via-[#112133] to-[#0B1320]",style:{colorScheme:"dark"},children:[i.jsx("nav",{className:"hidden md:flex fixed top-0 left-0 right-0 z-50 bg-[#1A2B3A]/95 backdrop-blur-lg border-b border-[#A35C5C]/50 shadow-lg overflow-x-hidden",style:{paddingTop:"var(--safe-area-top)"},children:i.jsx("div",{className:"w-full",children:i.jsxs("div",{className:"flex items-center justify-between h-16 gap-2 px-3 lg:px-6",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.jsx(H$,{currentPageName:n}),i.jsxs(ca,{to:xt("Home"),className:"flex items-center gap-2 flex-shrink-0",children:[i.jsx("img",{src:RP,alt:"PipeKeeper",className:"w-7 h-7 lg:w-8 lg:h-8 object-contain"}),i.jsx("span",{className:"font-bold text-lg lg:text-xl text-[#E0D8C8] hidden sm:inline whitespace-nowrap",children:"PipeKeeper"})]})]}),i.jsxs("div",{className:"flex items-center gap-1 flex-1 justify-start min-w-0 overflow-x-auto overflow-y-hidden scrollbar-hide px-2",children:[O.map(Q=>i.jsx(Hb,{item:Q,currentPage:n,hasPaidAccess:G},Q.page)),z.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"h-6 w-px bg-[#E0D8C8]/20 mx-2"}),z.map(Q=>i.jsx(Hb,{item:Q,currentPage:n,hasPaidAccess:G},Q.page))]})]}),i.jsxs("div",{className:"flex items-center gap-1 lg:gap-3 flex-shrink-0",children:[i.jsx(W$,{}),i.jsx(rRe,{}),i.jsx("button",{onClick:()=>N(!0),className:"text-[#E0D8C8]/70 hover:text-[#E0D8C8] transition-colors text-xs lg:text-sm font-medium px-1.5 lg:px-3 py-1.5 rounded-lg hover:bg-white/5 overflow-hidden text-ellipsis whitespace-nowrap hidden lg:block",children:P("nav.quickAccess")}),u?i.jsx("span",{className:"text-xs text-[#E0D8C8]/70 whitespace-nowrap hidden lg:inline",children:P("nav.syncing")}):null]})]})})}),i.jsx("nav",{className:"md:hidden fixed top-0 left-0 right-0 z-50 bg-[#1A2B3A]/95 backdrop-blur-lg border-b border-[#A35C5C]/50 shadow-lg",style:{paddingTop:"env(safe-area-inset-top, 0px)"},children:i.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(H$,{currentPageName:n}),i.jsxs(ca,{to:xt("Home"),className:"flex items-center gap-2",onClick:()=>s(!1),children:[i.jsx("img",{src:RP,alt:"PipeKeeper",className:"w-7 h-7 object-contain"}),i.jsx("span",{className:"font-bold text-lg text-[#E0D8C8]",children:"PipeKeeper"})]})]}),i.jsx("button",{onClick:Q=>{Q.stopPropagation(),s(T=>!T)},className:"text-[#E0D8C8] p-2 -mr-2 hover:bg-[#A35C5C]/20 rounded-lg active:scale-95 transition-all duration-200",style:{WebkitTapHighlightColor:"transparent"},"aria-label":P("layout.toggleMenu","Toggle menu"),children:r?i.jsx(zi,{className:"w-6 h-6"}):i.jsx(Fee,{className:"w-6 h-6"})})]})}),i.jsx("div",{className:ut("md:hidden fixed inset-0 bg-black/50 z-50 transition-opacity duration-200",r?"opacity-100":"opacity-0 pointer-events-none"),onClick:()=>s(!1),style:{top:"calc(56px + var(--safe-area-top))"}}),i.jsx("div",{className:ut("md:hidden fixed right-0 w-64 bg-white z-50 shadow-xl overflow-y-auto transition-transform duration-200",r?"translate-x-0":"translate-x-full"),style:{top:"calc(4rem + env(safe-area-inset-top, 0px))",height:"calc(100vh - 4rem - env(safe-area-inset-top, 0px))"},children:i.jsxs("div",{className:"flex flex-col gap-2 p-4",children:[O.map(Q=>i.jsx(Hb,{item:Q,currentPage:n,onClick:()=>s(!1),hasPaidAccess:G,isMobile:!0},Q.page)),z.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"h-px bg-gray-200 my-2"}),i.jsx("p",{className:"text-xs text-gray-500 px-2 mb-1 uppercase tracking-wider",children:P("layout.admin","Admin")}),z.map(Q=>i.jsx(Hb,{item:Q,currentPage:n,onClick:()=>s(!1),hasPaidAccess:G,isMobile:!0},Q.page))]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsx(W$,{})})]})}),i.jsx("main",{className:"flex-1 pb-20 md:pt-16",style:{paddingTop:"calc(4rem + env(safe-area-inset-top, 0px))"},children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 sm:py-6 lg:px-8",children:e})}),i.jsx("footer",{className:"bg-[#1A2B3A]/95 border-t border-[#A35C5C]/50 mt-auto",children:i.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("img",{src:RP,alt:"PipeKeeper",className:"w-5 h-5 object-contain"}),i.jsx("span",{className:"text-sm text-[#E0D8C8]/70",children:"© 2025 PipeKeeper. All rights reserved."})]}),i.jsxs("div",{className:"flex gap-6",children:[i.jsx("a",{href:xt("FAQ"),className:"text-sm text-[#E0D8C8]/70 hover:text-[#E0D8C8] transition-all duration-200 hover:underline whitespace-nowrap overflow-hidden text-ellipsis",children:P("nav.faq")}),i.jsx("a",{href:xt("Support"),className:"text-sm text-[#E0D8C8]/70 hover:text-[#E0D8C8] transition-all duration-200 hover:underline whitespace-nowrap overflow-hidden text-ellipsis",children:P("nav.support")}),i.jsx("a",{href:xt("TermsOfService"),className:"text-sm text-[#E0D8C8]/70 hover:text-[#E0D8C8] transition-all duration-200 hover:underline whitespace-nowrap overflow-hidden text-ellipsis",children:P("nav.terms")}),i.jsx("a",{href:xt("PrivacyPolicy"),className:"text-sm text-[#E0D8C8]/70 hover:text-[#E0D8C8] transition-all duration-200 hover:underline whitespace-nowrap overflow-hidden text-ellipsis",children:P("nav.privacy")})]})]})})}),i.jsx(gRe,{user:q}),i.jsx(xRe,{isOpen:f,onClose:async()=>{m(!1);try{await Ce.auth.updateMe({foundingMemberAcknowledged:!0}),await S.invalidateQueries({queryKey:["current-user"]})}catch(Q){console.error("Failed to update founding member status:",Q)}}}),l&&i.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/60 flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-lg rounded-2xl bg-[#243548] border border-[#A35C5C]/60 shadow-2xl p-6",children:[i.jsx("h3",{className:"text-[#E0D8C8] text-xl font-bold mb-2",children:P("subscription.trialEndedTitle")}),i.jsx("p",{className:"text-[#E0D8C8]/80 mb-5",children:P("subscription.trialEndedBody")}),i.jsxs("div",{className:"flex gap-3 justify-end",children:[i.jsx(ye,{variant:"secondary",onClick:()=>c(!1),children:P("subscription.continueFree")}),i.jsx(ye,{onClick:()=>{c(!1),j(xt("Subscription"))},children:P("subscription.subscribe")})]})]})}),i.jsx(wRe,{}),i.jsx(jRe,{}),i.jsx(NRe,{isOpen:b,onClose:()=>N(!1)}),g&&i.jsx("div",{style:{position:"fixed",left:"50%",bottom:"24px",transform:"translateX(-50%)",padding:"10px 14px",borderRadius:"12px",background:"rgba(0,0,0,0.85)",color:"white",zIndex:999999,fontSize:"14px",maxWidth:"340px",textAlign:"center"},children:g}),A&&i.jsxs("div",{style:{position:"fixed",right:10,bottom:10,padding:"6px 10px",borderRadius:10,background:"rgba(0,0,0,0.18)",fontSize:12,zIndex:999999,pointerEvents:"none"},children:["Bridge: ✅ | ",v?"Pro ✅":"Free"]})]})})]})})):null:i.jsx(bV,{onConfirm:()=>{localStorage.setItem(K$,"true"),o(!0)}})}catch(r){return console.error("❌ LAYOUT ERROR:",r),i.jsxs("div",{children:["Layout Error: ",r.message]})}}function ERe({title:e="Not available on iOS",message:n="This iOS build is a Collection & Cellar Manager. Recommendation and usage-guidance features are not included."}){return i.jsx("div",{className:"max-w-3xl mx-auto p-6",children:i.jsxs(Ee,{className:"bg-[#243548]/60 border border-[#A35C5C]/35",children:[i.jsx(Ze,{children:i.jsx(et,{className:"text-[#E0D8C8]",children:e})}),i.jsxs(Oe,{className:"text-[#E0D8C8]/80 text-sm space-y-3",children:[i.jsx("p",{children:n}),i.jsxs("div",{className:"flex gap-2 pt-3",children:[i.jsx(ye,{onClick:()=>window.location.replace("/Home"),children:"Home"}),i.jsx(ye,{variant:"outline",onClick:()=>window.location.replace("/Tobacco"),children:"Go to Cellar"})]})]})]})})}const ag={"/Home":ME,"/Pipes":MG,"/PipeDetail":mG,"/Tobacco":rY,"/TobaccoDetail":sY,"/Community":xH,"/Profile":$G,"/PublicProfile":qG,"/Import":bH,"/Invite":jH,"/Subscription":UG,"/Support":HG,"/FAQ":yH,"/Troubleshooting":aY,"/TermsOfService":WG,"/PrivacyPolicy":FG,"/TobaccoLibrarySync":iY,"/BulkLogoUpload":PV,"/AIUpdates":DU},TRe={"/Community":"community","/AIUpdates":"recommendations"};function ORe(e,n){if(!cs)return n;const r=TRe[e];return r&&Qz[r]===!1?function(){return i.jsx(ERe,{title:"Not available on iOS",message:"This iOS build is a Collection & Cellar Manager. Social/recommendation-style features are not included."})}:n}const xJ=Object.fromEntries(Object.entries(ag).map(([e,n])=>[e.toLowerCase(),n])),LRe=new Wq;function RRe(e){const n=(e||"/").trim();if(n==="/"||n==="")return"/Home";const r=n.toLowerCase();return ag[n]?n:xJ[r]&&Object.keys(ag).find(s=>s.toLowerCase()===r)||"/Home"}function DRe(){const e=window.location.pathname||"/",n=window.location.search||"",r=new URLSearchParams(n),s=(e.toLowerCase()==="/termsofservice"||e.toLowerCase()==="/privacypolicy")&&r.get("view")!=="1",a=C.useMemo(()=>s?"/Home":RRe(e),[e,s]);C.useEffect(()=>{(window.location.pathname||"/")!==a&&window.history.replaceState({},"",a)},[a]);const o=ag[a]||xJ[a.toLowerCase()]||ME,l=ORe(a,o),u=(ag[a]?a:Object.keys(ag).find(d=>d.toLowerCase()===a.toLowerCase())||"/Home").replace("/","")||"Home";return i.jsx(Gq,{client:LRe,children:i.jsx(gJ,{currentPageName:u,children:i.jsx(l,{})})})}const IRe={AIUpdates:DU,AdminReports:Wde,"AdminReports.tsx":whe,AdminSubscriptionRequests:Che,AdminSubscriptionTools:Phe,AgeGate:bV,BulkLogoUpload:PV,Community:xH,FAQ:yH,FAQFull:vH,Help:gfe,Home:ME,HowTo:xfe,Import:bH,Invite:jH,InviteFull:wH,PipeDetail:mG,Pipes:MG,PrivacyPolicy:FG,Profile:$G,PublicProfile:qG,Subscription:UG,SubscriptionCancelled:n1e,"SubscriptionCancelled.tsx":r1e,SubscriptionE2ETest:a1e,SubscriptionEventsLog:o1e,SubscriptionFull:zG,SubscriptionSuccess:u1e,"SubscriptionSuccess.tsx":d1e,SubscriptionSupport:h1e,Support:HG,SupportFull:VG,TermsOfService:WG,Tobacco:rY,TobaccoDetail:sY,TobaccoLibrarySync:iY,Troubleshooting:aY,TroubleshootingFull:y2e,UserReport:eRe,VerificationHelp:tRe,index:DRe},vJ={mainPage:"Home",Pages:IRe,Layout:gJ};function MRe(){const e=$h(),{isAuthenticated:n}=Gz(),{Pages:r,mainPage:s}=vJ,a=s;return C.useEffect(()=>{const o=e.pathname;let l;if(o==="/"||o==="")l=a;else{const c=o.replace(/^\//,"").split("/")[0];l=Object.keys(r).find(f=>f.toLowerCase()===c.toLowerCase())||null}n&&l&&Ce.appLogs.logUserInApp(l).catch(()=>{})},[e,n,r,a]),null}function FRe({}){var o;const{t:e}=dq(),r=$h().pathname.substring(1),{data:s,isFetched:a}=Dt({queryKey:["user"],queryFn:async()=>{try{return{user:await Ce.auth.me(),isAuthenticated:!0}}catch{return{user:null,isAuthenticated:!1}}}});return i.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-slate-50",children:i.jsx("div",{className:"max-w-md w-full",children:i.jsxs("div",{className:"text-center space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h1",{className:"text-7xl font-light text-slate-300",children:"404"}),i.jsx("div",{className:"h-0.5 w-16 bg-slate-200 mx-auto"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h2",{className:"text-2xl font-medium text-slate-800 overflow-wrap break-words",children:e("error.pageNotFound")}),i.jsxs("p",{className:"text-slate-600 leading-relaxed overflow-wrap break-words",children:[e("error.pageNotFoundDescription")," ",i.jsxs("span",{className:"font-medium text-slate-700",children:['"',r,'"']})," ",e("error.pageNotFoundSuffix")]})]}),a&&s.isAuthenticated&&((o=s.user)==null?void 0:o.role)==="admin"&&i.jsx("div",{className:"mt-8 p-4 bg-slate-100 rounded-lg border border-slate-200",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-orange-100 flex items-center justify-center mt-0.5",children:i.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-400"})}),i.jsxs("div",{className:"text-left space-y-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-700",children:e("error.adminNote")}),i.jsx("p",{className:"text-sm text-slate-600 leading-relaxed overflow-wrap break-words",children:e("error.adminNoteDescription")})]})]})}),i.jsx("div",{className:"pt-6",children:i.jsxs("button",{onClick:()=>window.location.href="/",className:"inline-flex items-center px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 hover:border-slate-300 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 whitespace-nowrap",children:[i.jsx("svg",{className:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),e("nav.goHome")]})})]})})})}const BRe=()=>{const{t:e}=$t();return i.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-white to-slate-50",children:i.jsx("div",{className:"max-w-md w-full p-8 bg-white rounded-lg shadow-lg border border-slate-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 mb-6 rounded-full bg-orange-100",children:i.jsx("svg",{className:"w-8 h-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),i.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-4",children:e("userNotRegistered.title")}),i.jsx("p",{className:"text-slate-600 mb-8",children:e("userNotRegistered.description")}),i.jsxs("div",{className:"p-4 bg-slate-50 rounded-md text-sm text-slate-600",children:[i.jsx("p",{children:e("userNotRegistered.ifError")}),i.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[i.jsx("li",{children:e("userNotRegistered.verifyAccount")}),i.jsx("li",{children:e("userNotRegistered.contactAdmin")}),i.jsx("li",{children:e("userNotRegistered.tryRelogin")})]})]})]})})})},{Pages:yJ,Layout:G$,mainPage:$Re}=vJ,bJ=$Re,qRe=yJ[bJ],Y$=({children:e,currentPageName:n})=>G$?i.jsx(G$,{currentPageName:n,children:e}):i.jsx(i.Fragment,{children:e}),zRe=()=>{const{isLoadingAuth:e,isLoadingPublicSettings:n,authError:r,navigateToLogin:s}=Gz(),a=C.useRef(!1);if(C.useEffect(()=>{(r==null?void 0:r.type)==="auth_required"&&!a.current&&(a.current=!0,s())},[r==null?void 0:r.type,s]),n||e)return i.jsx("div",{className:"fixed inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin"})});if(r){if(r.type==="user_not_registered")return i.jsx(BRe,{});if(r.type==="auth_required")return i.jsx("div",{className:"fixed inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin"})})}return i.jsxs(Vre,{children:[i.jsx(Qb,{path:"/",element:i.jsx(Y$,{currentPageName:bJ,children:i.jsx(qRe,{})})}),Object.entries(yJ).map(([o,l])=>i.jsx(Qb,{path:`/${o}`,element:i.jsx(Y$,{currentPageName:o,children:i.jsx(l,{})})},o)),i.jsx(Qb,{path:"*",element:i.jsx(FRe,{})})]})};function URe(){return i.jsx(fJ,{children:i.jsx(ooe,{children:i.jsxs(Gq,{client:Zne,children:[i.jsxs(Xre,{children:[i.jsx(MRe,{}),i.jsx(zRe,{})]}),i.jsx(yne,{})]})})})}uZ.createRoot(document.getElementById("root")).render(i.jsx(URe,{}));export{cr as _,Ce as b,ab as c,ur as g};
